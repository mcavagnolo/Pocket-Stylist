(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Fu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ak(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var lk={exports:{}},Gg={},uk={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd=Symbol.for("react.element"),Rj=Symbol.for("react.portal"),Cj=Symbol.for("react.fragment"),xj=Symbol.for("react.strict_mode"),Aj=Symbol.for("react.profiler"),Pj=Symbol.for("react.provider"),kj=Symbol.for("react.context"),Dj=Symbol.for("react.forward_ref"),Oj=Symbol.for("react.suspense"),Mj=Symbol.for("react.memo"),Lj=Symbol.for("react.lazy"),zI=Symbol.iterator;function Nj(t){return t===null||typeof t!="object"?null:(t=zI&&t[zI]||t["@@iterator"],typeof t=="function"?t:null)}var ck={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hk=Object.assign,dk={};function Bu(t,e,n){this.props=t,this.context=e,this.refs=dk,this.updater=n||ck}Bu.prototype.isReactComponent={};Bu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fk(){}fk.prototype=Bu.prototype;function z0(t,e,n){this.props=t,this.context=e,this.refs=dk,this.updater=n||ck}var W0=z0.prototype=new fk;W0.constructor=z0;hk(W0,Bu.prototype);W0.isPureReactComponent=!0;var WI=Array.isArray,pk=Object.prototype.hasOwnProperty,H0={current:null},mk={key:!0,ref:!0,__self:!0,__source:!0};function gk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)pk.call(e,r)&&!mk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Nd,type:t,key:s,ref:o,props:i,_owner:H0.current}}function Vj(t,e){return{$$typeof:Nd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nd}function Fj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var HI=/\/+/g;function mv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fj(""+t.key):e.toString(36)}function xp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nd:case Rj:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+mv(o,0):r,WI(i)?(n="",t!=null&&(n=t.replace(HI,"$&/")+"/"),xp(i,e,n,"",function(u){return u})):i!=null&&(K0(i)&&(i=Vj(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(HI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",WI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+mv(s,a);o+=xp(s,e,n,l,i)}else if(l=Nj(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+mv(s,a++),o+=xp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vf(t,e,n){if(t==null)return t;var r=[],i=0;return xp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Bj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},Ap={transition:null},jj={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Ap,ReactCurrentOwner:H0};function yk(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Vf,forEach:function(t,e,n){Vf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vf(t,function(){e++}),e},toArray:function(t){return Vf(t,function(e){return e})||[]},only:function(t){if(!K0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Bu;Se.Fragment=Cj;Se.Profiler=Aj;Se.PureComponent=z0;Se.StrictMode=xj;Se.Suspense=Oj;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jj;Se.act=yk;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=H0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pk.call(e,l)&&!mk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Nd,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:kj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pj,_context:t},t.Consumer=t};Se.createElement=gk;Se.createFactory=function(t){var e=gk.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:Dj,render:t}};Se.isValidElement=K0;Se.lazy=function(t){return{$$typeof:Lj,_payload:{_status:-1,_result:t},_init:Bj}};Se.memo=function(t,e){return{$$typeof:Mj,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Ap.transition;Ap.transition={};try{t()}finally{Ap.transition=e}};Se.unstable_act=yk;Se.useCallback=function(t,e){return vn.current.useCallback(t,e)};Se.useContext=function(t){return vn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return vn.current.useEffect(t,e)};Se.useId=function(){return vn.current.useId()};Se.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return vn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Se.useRef=function(t){return vn.current.useRef(t)};Se.useState=function(t){return vn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return vn.current.useTransition()};Se.version="18.3.1";uk.exports=Se;var I=uk.exports;const ft=Fu(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j=I,Uj=Symbol.for("react.element"),zj=Symbol.for("react.fragment"),Wj=Object.prototype.hasOwnProperty,Hj=$j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kj={key:!0,ref:!0,__self:!0,__source:!0};function vk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wj.call(e,r)&&!Kj.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Uj,type:t,key:s,ref:o,props:i,_owner:Hj.current}}Gg.Fragment=zj;Gg.jsx=vk;Gg.jsxs=vk;lk.exports=Gg;var M=lk.exports,tw={},_k={exports:{}},Qn={},wk={exports:{}},Sk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Y){var ie=$.length;$.push(Y);e:for(;0<ie;){var we=ie-1>>>1,Ae=$[we];if(0<i(Ae,Y))$[we]=Y,$[ie]=Ae,ie=we;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],ie=$.pop();if(ie!==Y){$[0]=ie;e:for(var we=0,Ae=$.length,un=Ae>>>1;we<un;){var at=2*(we+1)-1,$t=$[at],dt=at+1,Ke=$[dt];if(0>i($t,ie))dt<Ae&&0>i(Ke,$t)?($[we]=Ke,$[dt]=ie,we=dt):($[we]=$t,$[at]=ie,we=at);else if(dt<Ae&&0>i(Ke,ie))$[we]=Ke,$[dt]=ie,we=dt;else break e}}return Y}function i($,Y){var ie=$.sortIndex-Y.sortIndex;return ie!==0?ie:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,g=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=$)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function x($){if(E=!1,w($),!g)if(n(l)!==null)g=!0,je(O);else{var Y=n(u);Y!==null&&Re(x,Y.startTime-$)}}function O($,Y){g=!1,E&&(E=!1,S(v),v=-1),p=!0;var ie=f;try{for(w(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||$&&!A());){var we=d.callback;if(typeof we=="function"){d.callback=null,f=d.priorityLevel;var Ae=we(d.expirationTime<=Y);Y=t.unstable_now(),typeof Ae=="function"?d.callback=Ae:d===n(l)&&r(l),w(Y)}else r(l);d=n(l)}if(d!==null)var un=!0;else{var at=n(u);at!==null&&Re(x,at.startTime-Y),un=!1}return un}finally{d=null,f=ie,p=!1}}var k=!1,T=null,v=-1,R=5,C=-1;function A(){return!(t.unstable_now()-C<R)}function L(){if(T!==null){var $=t.unstable_now();C=$;var Y=!0;try{Y=T(!0,$)}finally{Y?D():(k=!1,T=null)}}else k=!1}var D;if(typeof y=="function")D=function(){y(L)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,fe=de.port2;de.port1.onmessage=L,D=function(){fe.postMessage(null)}}else D=function(){b(L,0)};function je($){T=$,k||(k=!0,D())}function Re($,Y){v=b(function(){$(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,je(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var ie=f;f=Y;try{return $()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ie=f;f=$;try{return Y()}finally{f=ie}},t.unstable_scheduleCallback=function($,Y,ie){var we=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?we+ie:we):ie=we,$){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=ie+Ae,$={id:c++,callback:Y,priorityLevel:$,startTime:ie,expirationTime:Ae,sortIndex:-1},ie>we?($.sortIndex=ie,e(u,$),n(l)===null&&$===n(u)&&(E?(S(v),v=-1):E=!0,Re(x,ie-we))):($.sortIndex=Ae,e(l,$),g||p||(g=!0,je(O))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var Y=f;return function(){var ie=f;f=Y;try{return $.apply(this,arguments)}finally{f=ie}}}})(Sk);wk.exports=Sk;var qj=wk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gj=I,qn=qj;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ek=new Set,Wh={};function $a(t,e){hu(t,e),hu(t+"Capture",e)}function hu(t,e){for(Wh[t]=e,t=0;t<e.length;t++)Ek.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nw=Object.prototype.hasOwnProperty,Qj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KI={},qI={};function Xj(t){return nw.call(qI,t)?!0:nw.call(KI,t)?!1:Qj.test(t)?qI[t]=!0:(KI[t]=!0,!1)}function Yj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jj(t,e,n,r){if(e===null||typeof e>"u"||Yj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var q0=/[\-:]([a-z])/g;function G0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(q0,G0);Gt[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(q0,G0);Gt[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(q0,G0);Gt[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Q0(t,e,n,r){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jj(e,n,i,r)&&(n=null),r||i===null?Xj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ji=Gj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ff=Symbol.for("react.element"),Pl=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),rw=Symbol.for("react.profiler"),Tk=Symbol.for("react.provider"),bk=Symbol.for("react.context"),Y0=Symbol.for("react.forward_ref"),iw=Symbol.for("react.suspense"),sw=Symbol.for("react.suspense_list"),J0=Symbol.for("react.memo"),Ls=Symbol.for("react.lazy"),Ik=Symbol.for("react.offscreen"),GI=Symbol.iterator;function xc(t){return t===null||typeof t!="object"?null:(t=GI&&t[GI]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,gv;function qc(t){if(gv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gv=e&&e[1]||""}return`
`+gv+t}var yv=!1;function vv(t,e){if(!t||yv)return"";yv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qc(t):""}function Zj(t){switch(t.tag){case 5:return qc(t.type);case 16:return qc("Lazy");case 13:return qc("Suspense");case 19:return qc("SuspenseList");case 0:case 2:case 15:return t=vv(t.type,!1),t;case 11:return t=vv(t.type.render,!1),t;case 1:return t=vv(t.type,!0),t;default:return""}}function ow(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kl:return"Fragment";case Pl:return"Portal";case rw:return"Profiler";case X0:return"StrictMode";case iw:return"Suspense";case sw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bk:return(t.displayName||"Context")+".Consumer";case Tk:return(t._context.displayName||"Context")+".Provider";case Y0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J0:return e=t.displayName||null,e!==null?e:ow(t.type)||"Memo";case Ls:e=t._payload,t=t._init;try{return ow(t(e))}catch{}}return null}function e4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ow(e);case 8:return e===X0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t4(t){var e=Rk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bf(t){t._valueTracker||(t._valueTracker=t4(t))}function Ck(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function aw(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function QI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xk(t,e){e=e.checked,e!=null&&Q0(t,"checked",e,!1)}function lw(t,e){xk(t,e);var n=lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uw(t,e.type,n):e.hasOwnProperty("defaultValue")&&uw(t,e.type,lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function XI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uw(t,e,n){(e!=="number"||Tm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gc=Array.isArray;function Xl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function YI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Gc(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lo(n)}}function Ak(t,e){var n=lo(e.value),r=lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function JI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jf,kk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jf=jf||document.createElement("div"),jf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n4=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(t){n4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ph[e]=ph[t]})});function Dk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ph.hasOwnProperty(t)&&ph[t]?(""+e).trim():e+"px"}function Ok(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r4=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dw(t,e){if(e){if(r4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function fw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pw=null;function Z0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mw=null,Yl=null,Jl=null;function ZI(t){if(t=Bd(t)){if(typeof mw!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Zg(e),mw(t.stateNode,t.type,e))}}function Mk(t){Yl?Jl?Jl.push(t):Jl=[t]:Yl=t}function Lk(){if(Yl){var t=Yl,e=Jl;if(Jl=Yl=null,ZI(t),e)for(t=0;t<e.length;t++)ZI(e[t])}}function Nk(t,e){return t(e)}function Vk(){}var _v=!1;function Fk(t,e,n){if(_v)return t(e,n);_v=!0;try{return Nk(t,e,n)}finally{_v=!1,(Yl!==null||Jl!==null)&&(Vk(),Lk())}}function Kh(t,e){var n=t.stateNode;if(n===null)return null;var r=Zg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var gw=!1;if(ji)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){gw=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{gw=!1}function i4(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var mh=!1,bm=null,Im=!1,yw=null,s4={onError:function(t){mh=!0,bm=t}};function o4(t,e,n,r,i,s,o,a,l){mh=!1,bm=null,i4.apply(s4,arguments)}function a4(t,e,n,r,i,s,o,a,l){if(o4.apply(this,arguments),mh){if(mh){var u=bm;mh=!1,bm=null}else throw Error(H(198));Im||(Im=!0,yw=u)}}function Ua(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eR(t){if(Ua(t)!==t)throw Error(H(188))}function l4(t){var e=t.alternate;if(!e){if(e=Ua(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return eR(i),t;if(s===r)return eR(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function jk(t){return t=l4(t),t!==null?$k(t):null}function $k(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$k(t);if(e!==null)return e;t=t.sibling}return null}var Uk=qn.unstable_scheduleCallback,tR=qn.unstable_cancelCallback,u4=qn.unstable_shouldYield,c4=qn.unstable_requestPaint,pt=qn.unstable_now,h4=qn.unstable_getCurrentPriorityLevel,eE=qn.unstable_ImmediatePriority,zk=qn.unstable_UserBlockingPriority,Rm=qn.unstable_NormalPriority,d4=qn.unstable_LowPriority,Wk=qn.unstable_IdlePriority,Qg=null,ai=null;function f4(t){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(Qg,t,void 0,(t.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:g4,p4=Math.log,m4=Math.LN2;function g4(t){return t>>>=0,t===0?32:31-(p4(t)/m4|0)|0}var $f=64,Uf=4194304;function Qc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qc(a):(s&=o,s!==0&&(r=Qc(s)))}else o=n&~i,o!==0?r=Qc(o):s!==0&&(r=Qc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Or(e),i=1<<n,r|=t[n],e&=~i;return r}function y4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Or(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=y4(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hk(){var t=$f;return $f<<=1,!($f&4194240)&&($f=64),t}function wv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Or(e),t[e]=n}function _4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function tE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function Kk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qk,nE,Gk,Qk,Xk,_w=!1,zf=[],Gs=null,Qs=null,Xs=null,qh=new Map,Gh=new Map,Fs=[],w4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nR(t,e){switch(t){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":qh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(e.pointerId)}}function Pc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bd(e),e!==null&&nE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function S4(t,e,n,r,i){switch(e){case"focusin":return Gs=Pc(Gs,t,e,n,r,i),!0;case"dragenter":return Qs=Pc(Qs,t,e,n,r,i),!0;case"mouseover":return Xs=Pc(Xs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return qh.set(s,Pc(qh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gh.set(s,Pc(Gh.get(s)||null,t,e,n,r,i)),!0}return!1}function Yk(t){var e=ia(t.target);if(e!==null){var n=Ua(e);if(n!==null){if(e=n.tag,e===13){if(e=Bk(n),e!==null){t.blockedOn=e,Xk(t.priority,function(){Gk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ww(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pw=r,n.target.dispatchEvent(r),pw=null}else return e=Bd(n),e!==null&&nE(e),t.blockedOn=n,!1;e.shift()}return!0}function rR(t,e,n){Pp(t)&&n.delete(e)}function E4(){_w=!1,Gs!==null&&Pp(Gs)&&(Gs=null),Qs!==null&&Pp(Qs)&&(Qs=null),Xs!==null&&Pp(Xs)&&(Xs=null),qh.forEach(rR),Gh.forEach(rR)}function kc(t,e){t.blockedOn===e&&(t.blockedOn=null,_w||(_w=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,E4)))}function Qh(t){function e(i){return kc(i,t)}if(0<zf.length){kc(zf[0],t);for(var n=1;n<zf.length;n++){var r=zf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gs!==null&&kc(Gs,t),Qs!==null&&kc(Qs,t),Xs!==null&&kc(Xs,t),qh.forEach(e),Gh.forEach(e),n=0;n<Fs.length;n++)r=Fs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)Yk(n),n.blockedOn===null&&Fs.shift()}var Zl=Ji.ReactCurrentBatchConfig,xm=!0;function T4(t,e,n,r){var i=Ve,s=Zl.transition;Zl.transition=null;try{Ve=1,rE(t,e,n,r)}finally{Ve=i,Zl.transition=s}}function b4(t,e,n,r){var i=Ve,s=Zl.transition;Zl.transition=null;try{Ve=4,rE(t,e,n,r)}finally{Ve=i,Zl.transition=s}}function rE(t,e,n,r){if(xm){var i=ww(t,e,n,r);if(i===null)Pv(t,e,r,Am,n),nR(t,r);else if(S4(i,t,e,n,r))r.stopPropagation();else if(nR(t,r),e&4&&-1<w4.indexOf(t)){for(;i!==null;){var s=Bd(i);if(s!==null&&qk(s),s=ww(t,e,n,r),s===null&&Pv(t,e,r,Am,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pv(t,e,r,null,n)}}var Am=null;function ww(t,e,n,r){if(Am=null,t=Z0(r),t=ia(t),t!==null)if(e=Ua(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Am=t,null}function Jk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h4()){case eE:return 1;case zk:return 4;case Rm:case d4:return 16;case Wk:return 536870912;default:return 16}default:return 16}}var Hs=null,iE=null,kp=null;function Zk(){if(kp)return kp;var t,e=iE,n=e.length,r,i="value"in Hs?Hs.value:Hs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return kp=i.slice(t,1<r?1-r:void 0)}function Dp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wf(){return!0}function iR(){return!1}function Xn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wf:iR,this.isPropagationStopped=iR,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wf)},persist:function(){},isPersistent:Wf}),e}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sE=Xn(ju),Fd=ot({},ju,{view:0,detail:0}),I4=Xn(Fd),Sv,Ev,Dc,Xg=ot({},Fd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dc&&(Dc&&t.type==="mousemove"?(Sv=t.screenX-Dc.screenX,Ev=t.screenY-Dc.screenY):Ev=Sv=0,Dc=t),Sv)},movementY:function(t){return"movementY"in t?t.movementY:Ev}}),sR=Xn(Xg),R4=ot({},Xg,{dataTransfer:0}),C4=Xn(R4),x4=ot({},Fd,{relatedTarget:0}),Tv=Xn(x4),A4=ot({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),P4=Xn(A4),k4=ot({},ju,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D4=Xn(k4),O4=ot({},ju,{data:0}),oR=Xn(O4),M4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N4[t])?!!e[t]:!1}function oE(){return V4}var F4=ot({},Fd,{key:function(t){if(t.key){var e=M4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oE,charCode:function(t){return t.type==="keypress"?Dp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),B4=Xn(F4),j4=ot({},Xg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aR=Xn(j4),$4=ot({},Fd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oE}),U4=Xn($4),z4=ot({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),W4=Xn(z4),H4=ot({},Xg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K4=Xn(H4),q4=[9,13,27,32],aE=ji&&"CompositionEvent"in window,gh=null;ji&&"documentMode"in document&&(gh=document.documentMode);var G4=ji&&"TextEvent"in window&&!gh,eD=ji&&(!aE||gh&&8<gh&&11>=gh),lR=" ",uR=!1;function tD(t,e){switch(t){case"keyup":return q4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dl=!1;function Q4(t,e){switch(t){case"compositionend":return nD(e);case"keypress":return e.which!==32?null:(uR=!0,lR);case"textInput":return t=e.data,t===lR&&uR?null:t;default:return null}}function X4(t,e){if(Dl)return t==="compositionend"||!aE&&tD(t,e)?(t=Zk(),kp=iE=Hs=null,Dl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eD&&e.locale!=="ko"?null:e.data;default:return null}}var Y4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y4[t.type]:e==="textarea"}function rD(t,e,n,r){Mk(r),e=Pm(e,"onChange"),0<e.length&&(n=new sE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yh=null,Xh=null;function J4(t){pD(t,0)}function Yg(t){var e=Ll(t);if(Ck(e))return t}function Z4(t,e){if(t==="change")return e}var iD=!1;if(ji){var bv;if(ji){var Iv="oninput"in document;if(!Iv){var hR=document.createElement("div");hR.setAttribute("oninput","return;"),Iv=typeof hR.oninput=="function"}bv=Iv}else bv=!1;iD=bv&&(!document.documentMode||9<document.documentMode)}function dR(){yh&&(yh.detachEvent("onpropertychange",sD),Xh=yh=null)}function sD(t){if(t.propertyName==="value"&&Yg(Xh)){var e=[];rD(e,Xh,t,Z0(t)),Fk(J4,e)}}function e$(t,e,n){t==="focusin"?(dR(),yh=e,Xh=n,yh.attachEvent("onpropertychange",sD)):t==="focusout"&&dR()}function t$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yg(Xh)}function n$(t,e){if(t==="click")return Yg(e)}function r$(t,e){if(t==="input"||t==="change")return Yg(e)}function i$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lr=typeof Object.is=="function"?Object.is:i$;function Yh(t,e){if(Lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!nw.call(e,i)||!Lr(t[i],e[i]))return!1}return!0}function fR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pR(t,e){var n=fR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fR(n)}}function oD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aD(){for(var t=window,e=Tm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tm(t.document)}return e}function lE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s$(t){var e=aD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oD(n.ownerDocument.documentElement,n)){if(r!==null&&lE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=pR(n,s);var o=pR(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var o$=ji&&"documentMode"in document&&11>=document.documentMode,Ol=null,Sw=null,vh=null,Ew=!1;function mR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ew||Ol==null||Ol!==Tm(r)||(r=Ol,"selectionStart"in r&&lE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vh&&Yh(vh,r)||(vh=r,r=Pm(Sw,"onSelect"),0<r.length&&(e=new sE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ol)))}function Hf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ml={animationend:Hf("Animation","AnimationEnd"),animationiteration:Hf("Animation","AnimationIteration"),animationstart:Hf("Animation","AnimationStart"),transitionend:Hf("Transition","TransitionEnd")},Rv={},lD={};ji&&(lD=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function Jg(t){if(Rv[t])return Rv[t];if(!Ml[t])return t;var e=Ml[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lD)return Rv[t]=e[n];return t}var uD=Jg("animationend"),cD=Jg("animationiteration"),hD=Jg("animationstart"),dD=Jg("transitionend"),fD=new Map,gR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(t,e){fD.set(t,e),$a(e,[t])}for(var Cv=0;Cv<gR.length;Cv++){var xv=gR[Cv],a$=xv.toLowerCase(),l$=xv[0].toUpperCase()+xv.slice(1);vo(a$,"on"+l$)}vo(uD,"onAnimationEnd");vo(cD,"onAnimationIteration");vo(hD,"onAnimationStart");vo("dblclick","onDoubleClick");vo("focusin","onFocus");vo("focusout","onBlur");vo(dD,"onTransitionEnd");hu("onMouseEnter",["mouseout","mouseover"]);hu("onMouseLeave",["mouseout","mouseover"]);hu("onPointerEnter",["pointerout","pointerover"]);hu("onPointerLeave",["pointerout","pointerover"]);$a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$a("onBeforeInput",["compositionend","keypress","textInput","paste"]);$a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xc));function yR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,a4(r,e,void 0,t),t.currentTarget=null}function pD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;yR(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;yR(i,a,u),s=l}}}if(Im)throw t=yw,Im=!1,yw=null,t}function Ge(t,e){var n=e[Cw];n===void 0&&(n=e[Cw]=new Set);var r=t+"__bubble";n.has(r)||(mD(e,t,2,!1),n.add(r))}function Av(t,e,n){var r=0;e&&(r|=4),mD(n,t,r,e)}var Kf="_reactListening"+Math.random().toString(36).slice(2);function Jh(t){if(!t[Kf]){t[Kf]=!0,Ek.forEach(function(n){n!=="selectionchange"&&(u$.has(n)||Av(n,!1,t),Av(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kf]||(e[Kf]=!0,Av("selectionchange",!1,e))}}function mD(t,e,n,r){switch(Jk(e)){case 1:var i=T4;break;case 4:i=b4;break;default:i=rE}n=i.bind(null,e,n,t),i=void 0,!gw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pv(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ia(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Fk(function(){var u=s,c=Z0(n),d=[];e:{var f=fD.get(t);if(f!==void 0){var p=sE,g=t;switch(t){case"keypress":if(Dp(n)===0)break e;case"keydown":case"keyup":p=B4;break;case"focusin":g="focus",p=Tv;break;case"focusout":g="blur",p=Tv;break;case"beforeblur":case"afterblur":p=Tv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=sR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=C4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=U4;break;case uD:case cD:case hD:p=P4;break;case dD:p=W4;break;case"scroll":p=I4;break;case"wheel":p=K4;break;case"copy":case"cut":case"paste":p=D4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=aR}var E=(e&4)!==0,b=!E&&t==="scroll",S=E?f!==null?f+"Capture":null:f;E=[];for(var y=u,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,S!==null&&(x=Kh(y,S),x!=null&&E.push(Zh(y,x,w)))),b)break;y=y.return}0<E.length&&(f=new p(f,g,null,n,c),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==pw&&(g=n.relatedTarget||n.fromElement)&&(ia(g)||g[$i]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?ia(g):null,g!==null&&(b=Ua(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(E=sR,x="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=aR,x="onPointerLeave",S="onPointerEnter",y="pointer"),b=p==null?f:Ll(p),w=g==null?f:Ll(g),f=new E(x,y+"leave",p,n,c),f.target=b,f.relatedTarget=w,x=null,ia(c)===u&&(E=new E(S,y+"enter",g,n,c),E.target=w,E.relatedTarget=b,x=E),b=x,p&&g)t:{for(E=p,S=g,y=0,w=E;w;w=cl(w))y++;for(w=0,x=S;x;x=cl(x))w++;for(;0<y-w;)E=cl(E),y--;for(;0<w-y;)S=cl(S),w--;for(;y--;){if(E===S||S!==null&&E===S.alternate)break t;E=cl(E),S=cl(S)}E=null}else E=null;p!==null&&vR(d,f,p,E,!1),g!==null&&b!==null&&vR(d,b,g,E,!0)}}e:{if(f=u?Ll(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=Z4;else if(cR(f))if(iD)O=r$;else{O=t$;var k=e$}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=n$);if(O&&(O=O(t,u))){rD(d,O,n,c);break e}k&&k(t,f,u),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&uw(f,"number",f.value)}switch(k=u?Ll(u):window,t){case"focusin":(cR(k)||k.contentEditable==="true")&&(Ol=k,Sw=u,vh=null);break;case"focusout":vh=Sw=Ol=null;break;case"mousedown":Ew=!0;break;case"contextmenu":case"mouseup":case"dragend":Ew=!1,mR(d,n,c);break;case"selectionchange":if(o$)break;case"keydown":case"keyup":mR(d,n,c)}var T;if(aE)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Dl?tD(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(eD&&n.locale!=="ko"&&(Dl||v!=="onCompositionStart"?v==="onCompositionEnd"&&Dl&&(T=Zk()):(Hs=c,iE="value"in Hs?Hs.value:Hs.textContent,Dl=!0)),k=Pm(u,v),0<k.length&&(v=new oR(v,t,null,n,c),d.push({event:v,listeners:k}),T?v.data=T:(T=nD(n),T!==null&&(v.data=T)))),(T=G4?Q4(t,n):X4(t,n))&&(u=Pm(u,"onBeforeInput"),0<u.length&&(c=new oR("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}pD(d,e)})}function Zh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Kh(t,n),s!=null&&r.unshift(Zh(t,s,i)),s=Kh(t,e),s!=null&&r.push(Zh(t,s,i))),t=t.return}return r}function cl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vR(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Kh(n,s),l!=null&&o.unshift(Zh(n,l,a))):i||(l=Kh(n,s),l!=null&&o.push(Zh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var c$=/\r\n?/g,h$=/\u0000|\uFFFD/g;function _R(t){return(typeof t=="string"?t:""+t).replace(c$,`
`).replace(h$,"")}function qf(t,e,n){if(e=_R(e),_R(t)!==e&&n)throw Error(H(425))}function km(){}var Tw=null,bw=null;function Iw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rw=typeof setTimeout=="function"?setTimeout:void 0,d$=typeof clearTimeout=="function"?clearTimeout:void 0,wR=typeof Promise=="function"?Promise:void 0,f$=typeof queueMicrotask=="function"?queueMicrotask:typeof wR<"u"?function(t){return wR.resolve(null).then(t).catch(p$)}:Rw;function p$(t){setTimeout(function(){throw t})}function kv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Qh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qh(e)}function Ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function SR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $u=Math.random().toString(36).slice(2),Zr="__reactFiber$"+$u,ed="__reactProps$"+$u,$i="__reactContainer$"+$u,Cw="__reactEvents$"+$u,m$="__reactListeners$"+$u,g$="__reactHandles$"+$u;function ia(t){var e=t[Zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$i]||n[Zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=SR(t);t!==null;){if(n=t[Zr])return n;t=SR(t)}return e}t=n,n=t.parentNode}return null}function Bd(t){return t=t[Zr]||t[$i],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ll(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Zg(t){return t[ed]||null}var xw=[],Nl=-1;function _o(t){return{current:t}}function Qe(t){0>Nl||(t.current=xw[Nl],xw[Nl]=null,Nl--)}function We(t,e){Nl++,xw[Nl]=t.current,t.current=e}var uo={},an=_o(uo),Cn=_o(!1),Ta=uo;function du(t,e){var n=t.type.contextTypes;if(!n)return uo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xn(t){return t=t.childContextTypes,t!=null}function Dm(){Qe(Cn),Qe(an)}function ER(t,e,n){if(an.current!==uo)throw Error(H(168));We(an,e),We(Cn,n)}function gD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,e4(t)||"Unknown",i));return ot({},n,r)}function Om(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uo,Ta=an.current,We(an,t),We(Cn,Cn.current),!0}function TR(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=gD(t,e,Ta),r.__reactInternalMemoizedMergedChildContext=t,Qe(Cn),Qe(an),We(an,t)):Qe(Cn),We(Cn,n)}var Ai=null,ey=!1,Dv=!1;function yD(t){Ai===null?Ai=[t]:Ai.push(t)}function y$(t){ey=!0,yD(t)}function wo(){if(!Dv&&Ai!==null){Dv=!0;var t=0,e=Ve;try{var n=Ai;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ai=null,ey=!1}catch(i){throw Ai!==null&&(Ai=Ai.slice(t+1)),Uk(eE,wo),i}finally{Ve=e,Dv=!1}}return null}var Vl=[],Fl=0,Mm=null,Lm=0,nr=[],rr=0,ba=null,Pi=1,ki="";function Ko(t,e){Vl[Fl++]=Lm,Vl[Fl++]=Mm,Mm=t,Lm=e}function vD(t,e,n){nr[rr++]=Pi,nr[rr++]=ki,nr[rr++]=ba,ba=t;var r=Pi;t=ki;var i=32-Or(r)-1;r&=~(1<<i),n+=1;var s=32-Or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pi=1<<32-Or(e)+i|n<<i|r,ki=s+t}else Pi=1<<s|n<<i|r,ki=t}function uE(t){t.return!==null&&(Ko(t,1),vD(t,1,0))}function cE(t){for(;t===Mm;)Mm=Vl[--Fl],Vl[Fl]=null,Lm=Vl[--Fl],Vl[Fl]=null;for(;t===ba;)ba=nr[--rr],nr[rr]=null,ki=nr[--rr],nr[rr]=null,Pi=nr[--rr],nr[rr]=null}var Wn=null,Un=null,Je=!1,Pr=null;function _D(t,e){var n=or(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wn=t,Un=Ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wn=t,Un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ba!==null?{id:Pi,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=or(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wn=t,Un=null,!0):!1;default:return!1}}function Aw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pw(t){if(Je){var e=Un;if(e){var n=e;if(!bR(t,e)){if(Aw(t))throw Error(H(418));e=Ys(n.nextSibling);var r=Wn;e&&bR(t,e)?_D(r,n):(t.flags=t.flags&-4097|2,Je=!1,Wn=t)}}else{if(Aw(t))throw Error(H(418));t.flags=t.flags&-4097|2,Je=!1,Wn=t}}}function IR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function Gf(t){if(t!==Wn)return!1;if(!Je)return IR(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Iw(t.type,t.memoizedProps)),e&&(e=Un)){if(Aw(t))throw wD(),Error(H(418));for(;e;)_D(t,e),e=Ys(e.nextSibling)}if(IR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Un=Ys(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Un=null}}else Un=Wn?Ys(t.stateNode.nextSibling):null;return!0}function wD(){for(var t=Un;t;)t=Ys(t.nextSibling)}function fu(){Un=Wn=null,Je=!1}function hE(t){Pr===null?Pr=[t]:Pr.push(t)}var v$=Ji.ReactCurrentBatchConfig;function Oc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Qf(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function RR(t){var e=t._init;return e(t._payload)}function SD(t){function e(S,y){if(t){var w=S.deletions;w===null?(S.deletions=[y],S.flags|=16):w.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function r(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function i(S,y){return S=to(S,y),S.index=0,S.sibling=null,S}function s(S,y,w){return S.index=w,t?(w=S.alternate,w!==null?(w=w.index,w<y?(S.flags|=2,y):w):(S.flags|=2,y)):(S.flags|=1048576,y)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,y,w,x){return y===null||y.tag!==6?(y=Bv(w,S.mode,x),y.return=S,y):(y=i(y,w),y.return=S,y)}function l(S,y,w,x){var O=w.type;return O===kl?c(S,y,w.props.children,x,w.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ls&&RR(O)===y.type)?(x=i(y,w.props),x.ref=Oc(S,y,w),x.return=S,x):(x=Bp(w.type,w.key,w.props,null,S.mode,x),x.ref=Oc(S,y,w),x.return=S,x)}function u(S,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=jv(w,S.mode,x),y.return=S,y):(y=i(y,w.children||[]),y.return=S,y)}function c(S,y,w,x,O){return y===null||y.tag!==7?(y=ga(w,S.mode,x,O),y.return=S,y):(y=i(y,w),y.return=S,y)}function d(S,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Bv(""+y,S.mode,w),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ff:return w=Bp(y.type,y.key,y.props,null,S.mode,w),w.ref=Oc(S,null,y),w.return=S,w;case Pl:return y=jv(y,S.mode,w),y.return=S,y;case Ls:var x=y._init;return d(S,x(y._payload),w)}if(Gc(y)||xc(y))return y=ga(y,S.mode,w,null),y.return=S,y;Qf(S,y)}return null}function f(S,y,w,x){var O=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(S,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ff:return w.key===O?l(S,y,w,x):null;case Pl:return w.key===O?u(S,y,w,x):null;case Ls:return O=w._init,f(S,y,O(w._payload),x)}if(Gc(w)||xc(w))return O!==null?null:c(S,y,w,x,null);Qf(S,w)}return null}function p(S,y,w,x,O){if(typeof x=="string"&&x!==""||typeof x=="number")return S=S.get(w)||null,a(y,S,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ff:return S=S.get(x.key===null?w:x.key)||null,l(y,S,x,O);case Pl:return S=S.get(x.key===null?w:x.key)||null,u(y,S,x,O);case Ls:var k=x._init;return p(S,y,w,k(x._payload),O)}if(Gc(x)||xc(x))return S=S.get(w)||null,c(y,S,x,O,null);Qf(y,x)}return null}function g(S,y,w,x){for(var O=null,k=null,T=y,v=y=0,R=null;T!==null&&v<w.length;v++){T.index>v?(R=T,T=null):R=T.sibling;var C=f(S,T,w[v],x);if(C===null){T===null&&(T=R);break}t&&T&&C.alternate===null&&e(S,T),y=s(C,y,v),k===null?O=C:k.sibling=C,k=C,T=R}if(v===w.length)return n(S,T),Je&&Ko(S,v),O;if(T===null){for(;v<w.length;v++)T=d(S,w[v],x),T!==null&&(y=s(T,y,v),k===null?O=T:k.sibling=T,k=T);return Je&&Ko(S,v),O}for(T=r(S,T);v<w.length;v++)R=p(T,S,v,w[v],x),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?v:R.key),y=s(R,y,v),k===null?O=R:k.sibling=R,k=R);return t&&T.forEach(function(A){return e(S,A)}),Je&&Ko(S,v),O}function E(S,y,w,x){var O=xc(w);if(typeof O!="function")throw Error(H(150));if(w=O.call(w),w==null)throw Error(H(151));for(var k=O=null,T=y,v=y=0,R=null,C=w.next();T!==null&&!C.done;v++,C=w.next()){T.index>v?(R=T,T=null):R=T.sibling;var A=f(S,T,C.value,x);if(A===null){T===null&&(T=R);break}t&&T&&A.alternate===null&&e(S,T),y=s(A,y,v),k===null?O=A:k.sibling=A,k=A,T=R}if(C.done)return n(S,T),Je&&Ko(S,v),O;if(T===null){for(;!C.done;v++,C=w.next())C=d(S,C.value,x),C!==null&&(y=s(C,y,v),k===null?O=C:k.sibling=C,k=C);return Je&&Ko(S,v),O}for(T=r(S,T);!C.done;v++,C=w.next())C=p(T,S,v,C.value,x),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?v:C.key),y=s(C,y,v),k===null?O=C:k.sibling=C,k=C);return t&&T.forEach(function(L){return e(S,L)}),Je&&Ko(S,v),O}function b(S,y,w,x){if(typeof w=="object"&&w!==null&&w.type===kl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ff:e:{for(var O=w.key,k=y;k!==null;){if(k.key===O){if(O=w.type,O===kl){if(k.tag===7){n(S,k.sibling),y=i(k,w.props.children),y.return=S,S=y;break e}}else if(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ls&&RR(O)===k.type){n(S,k.sibling),y=i(k,w.props),y.ref=Oc(S,k,w),y.return=S,S=y;break e}n(S,k);break}else e(S,k);k=k.sibling}w.type===kl?(y=ga(w.props.children,S.mode,x,w.key),y.return=S,S=y):(x=Bp(w.type,w.key,w.props,null,S.mode,x),x.ref=Oc(S,y,w),x.return=S,S=x)}return o(S);case Pl:e:{for(k=w.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(S,y.sibling),y=i(y,w.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=jv(w,S.mode,x),y.return=S,S=y}return o(S);case Ls:return k=w._init,b(S,y,k(w._payload),x)}if(Gc(w))return g(S,y,w,x);if(xc(w))return E(S,y,w,x);Qf(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(S,y.sibling),y=i(y,w),y.return=S,S=y):(n(S,y),y=Bv(w,S.mode,x),y.return=S,S=y),o(S)):n(S,y)}return b}var pu=SD(!0),ED=SD(!1),Nm=_o(null),Vm=null,Bl=null,dE=null;function fE(){dE=Bl=Vm=null}function pE(t){var e=Nm.current;Qe(Nm),t._currentValue=e}function kw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eu(t,e){Vm=t,dE=Bl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function dr(t){var e=t._currentValue;if(dE!==t)if(t={context:t,memoizedValue:e,next:null},Bl===null){if(Vm===null)throw Error(H(308));Bl=t,Vm.dependencies={lanes:0,firstContext:t}}else Bl=Bl.next=t;return e}var sa=null;function mE(t){sa===null?sa=[t]:sa.push(t)}function TD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mE(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ui(t,r)}function Ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ns=!1;function gE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Js(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ui(t,n)}return i=r.interleaved,i===null?(e.next=e,mE(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ui(t,n)}function Op(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tE(t,n)}}function CR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fm(t,e,n,r){var i=t.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,E=a;switch(f=e,p=n,E.tag){case 1:if(g=E.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=E.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=ot({},d,f);break e;case 2:Ns=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ra|=o,t.lanes=o,t.memoizedState=d}}function xR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var jd={},li=_o(jd),td=_o(jd),nd=_o(jd);function oa(t){if(t===jd)throw Error(H(174));return t}function yE(t,e){switch(We(nd,e),We(td,t),We(li,jd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hw(e,t)}Qe(li),We(li,e)}function mu(){Qe(li),Qe(td),Qe(nd)}function ID(t){oa(nd.current);var e=oa(li.current),n=hw(e,t.type);e!==n&&(We(td,t),We(li,n))}function vE(t){td.current===t&&(Qe(li),Qe(td))}var tt=_o(0);function Bm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ov=[];function _E(){for(var t=0;t<Ov.length;t++)Ov[t]._workInProgressVersionPrimary=null;Ov.length=0}var Mp=Ji.ReactCurrentDispatcher,Mv=Ji.ReactCurrentBatchConfig,Ia=0,it=null,Ct=null,Bt=null,jm=!1,_h=!1,rd=0,_$=0;function Xt(){throw Error(H(321))}function wE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lr(t[n],e[n]))return!1;return!0}function SE(t,e,n,r,i,s){if(Ia=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mp.current=t===null||t.memoizedState===null?T$:b$,t=n(r,i),_h){s=0;do{if(_h=!1,rd=0,25<=s)throw Error(H(301));s+=1,Bt=Ct=null,e.updateQueue=null,Mp.current=I$,t=n(r,i)}while(_h)}if(Mp.current=$m,e=Ct!==null&&Ct.next!==null,Ia=0,Bt=Ct=it=null,jm=!1,e)throw Error(H(300));return t}function EE(){var t=rd!==0;return rd=0,t}function Qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?it.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function fr(){if(Ct===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Bt===null?it.memoizedState:Bt.next;if(e!==null)Bt=e,Ct=t;else{if(t===null)throw Error(H(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Bt===null?it.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function id(t,e){return typeof e=="function"?e(t):e}function Lv(t){var e=fr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ia&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,it.lanes|=c,Ra|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Lr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,Ra|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nv(t){var e=fr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Lr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function RD(){}function CD(t,e){var n=it,r=fr(),i=e(),s=!Lr(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,TE(PD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,sd(9,AD.bind(null,n,r,i,e),void 0,null),jt===null)throw Error(H(349));Ia&30||xD(n,e,i)}return i}function xD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AD(t,e,n,r){e.value=n,e.getSnapshot=r,kD(e)&&DD(t)}function PD(t,e,n){return n(function(){kD(e)&&DD(t)})}function kD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lr(t,n)}catch{return!0}}function DD(t){var e=Ui(t,1);e!==null&&Mr(e,t,1,-1)}function AR(t){var e=Qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:id,lastRenderedState:t},e.queue=t,t=t.dispatch=E$.bind(null,it,t),[e.memoizedState,t]}function sd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function OD(){return fr().memoizedState}function Lp(t,e,n,r){var i=Qr();it.flags|=t,i.memoizedState=sd(1|e,n,void 0,r===void 0?null:r)}function ty(t,e,n,r){var i=fr();r=r===void 0?null:r;var s=void 0;if(Ct!==null){var o=Ct.memoizedState;if(s=o.destroy,r!==null&&wE(r,o.deps)){i.memoizedState=sd(e,n,s,r);return}}it.flags|=t,i.memoizedState=sd(1|e,n,s,r)}function PR(t,e){return Lp(8390656,8,t,e)}function TE(t,e){return ty(2048,8,t,e)}function MD(t,e){return ty(4,2,t,e)}function LD(t,e){return ty(4,4,t,e)}function ND(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VD(t,e,n){return n=n!=null?n.concat([t]):null,ty(4,4,ND.bind(null,e,t),n)}function bE(){}function FD(t,e){var n=fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function BD(t,e){var n=fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jD(t,e,n){return Ia&21?(Lr(n,e)||(n=Hk(),it.lanes|=n,Ra|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function w$(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Mv.transition;Mv.transition={};try{t(!1),e()}finally{Ve=n,Mv.transition=r}}function $D(){return fr().memoizedState}function S$(t,e,n){var r=eo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},UD(t))zD(e,n);else if(n=TD(t,e,n,r),n!==null){var i=mn();Mr(n,t,r,i),WD(n,e,r)}}function E$(t,e,n){var r=eo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(UD(t))zD(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Lr(a,o)){var l=e.interleaved;l===null?(i.next=i,mE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=TD(t,e,i,r),n!==null&&(i=mn(),Mr(n,t,r,i),WD(n,e,r))}}function UD(t){var e=t.alternate;return t===it||e!==null&&e===it}function zD(t,e){_h=jm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tE(t,n)}}var $m={readContext:dr,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},T$={readContext:dr,useCallback:function(t,e){return Qr().memoizedState=[t,e===void 0?null:e],t},useContext:dr,useEffect:PR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lp(4194308,4,ND.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lp(4,2,t,e)},useMemo:function(t,e){var n=Qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=S$.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Qr();return t={current:t},e.memoizedState=t},useState:AR,useDebugValue:bE,useDeferredValue:function(t){return Qr().memoizedState=t},useTransition:function(){var t=AR(!1),e=t[0];return t=w$.bind(null,t[1]),Qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Qr();if(Je){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),jt===null)throw Error(H(349));Ia&30||xD(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,PR(PD.bind(null,r,s,t),[t]),r.flags|=2048,sd(9,AD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qr(),e=jt.identifierPrefix;if(Je){var n=ki,r=Pi;n=(r&~(1<<32-Or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},b$={readContext:dr,useCallback:FD,useContext:dr,useEffect:TE,useImperativeHandle:VD,useInsertionEffect:MD,useLayoutEffect:LD,useMemo:BD,useReducer:Lv,useRef:OD,useState:function(){return Lv(id)},useDebugValue:bE,useDeferredValue:function(t){var e=fr();return jD(e,Ct.memoizedState,t)},useTransition:function(){var t=Lv(id)[0],e=fr().memoizedState;return[t,e]},useMutableSource:RD,useSyncExternalStore:CD,useId:$D,unstable_isNewReconciler:!1},I$={readContext:dr,useCallback:FD,useContext:dr,useEffect:TE,useImperativeHandle:VD,useInsertionEffect:MD,useLayoutEffect:LD,useMemo:BD,useReducer:Nv,useRef:OD,useState:function(){return Nv(id)},useDebugValue:bE,useDeferredValue:function(t){var e=fr();return Ct===null?e.memoizedState=t:jD(e,Ct.memoizedState,t)},useTransition:function(){var t=Nv(id)[0],e=fr().memoizedState;return[t,e]},useMutableSource:RD,useSyncExternalStore:CD,useId:$D,unstable_isNewReconciler:!1};function Rr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ny={isMounted:function(t){return(t=t._reactInternals)?Ua(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mn(),i=eo(t),s=Ni(r,i);s.payload=e,n!=null&&(s.callback=n),e=Js(t,s,i),e!==null&&(Mr(e,t,i,r),Op(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mn(),i=eo(t),s=Ni(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Js(t,s,i),e!==null&&(Mr(e,t,i,r),Op(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),r=eo(t),i=Ni(n,r);i.tag=2,e!=null&&(i.callback=e),e=Js(t,i,r),e!==null&&(Mr(e,t,r,n),Op(e,t,r))}};function kR(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Yh(n,r)||!Yh(i,s):!0}function HD(t,e,n){var r=!1,i=uo,s=e.contextType;return typeof s=="object"&&s!==null?s=dr(s):(i=xn(e)?Ta:an.current,r=e.contextTypes,s=(r=r!=null)?du(t,i):uo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ny,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function DR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ny.enqueueReplaceState(e,e.state,null)}function Ow(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dr(s):(s=xn(e)?Ta:an.current,i.context=du(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ny.enqueueReplaceState(i,i.state,null),Fm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gu(t,e){try{var n="",r=e;do n+=Zj(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R$=typeof WeakMap=="function"?WeakMap:Map;function KD(t,e,n){n=Ni(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zm||(zm=!0,Ww=r),Mw(t,e)},n}function qD(t,e,n){n=Ni(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Mw(t,e),typeof r!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function OR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=j$.bind(null,t,e,n),e.then(t,t))}function MR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LR(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ni(-1,1),e.tag=2,Js(n,e,1))),n.lanes|=1),t)}var C$=Ji.ReactCurrentOwner,Tn=!1;function dn(t,e,n,r){e.child=t===null?ED(e,null,n,r):pu(e,t.child,n,r)}function NR(t,e,n,r,i){n=n.render;var s=e.ref;return eu(e,i),r=SE(t,e,n,r,s,i),n=EE(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(Je&&n&&uE(e),e.flags|=1,dn(t,e,r,i),e.child)}function VR(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!DE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,GD(t,e,s,r,i)):(t=Bp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yh,n(o,r)&&t.ref===e.ref)return zi(t,e,i)}return e.flags|=1,t=to(s,r),t.ref=e.ref,t.return=e,e.child=t}function GD(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Yh(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,zi(t,e,i)}return Lw(t,e,n,r,i)}function QD(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We($l,Bn),Bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We($l,Bn),Bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We($l,Bn),Bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,We($l,Bn),Bn|=r;return dn(t,e,i,n),e.child}function XD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lw(t,e,n,r,i){var s=xn(n)?Ta:an.current;return s=du(e,s),eu(e,i),n=SE(t,e,n,r,s,i),r=EE(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(Je&&r&&uE(e),e.flags|=1,dn(t,e,n,i),e.child)}function FR(t,e,n,r,i){if(xn(n)){var s=!0;Om(e)}else s=!1;if(eu(e,i),e.stateNode===null)Np(t,e),HD(e,n,r),Ow(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=dr(u):(u=xn(n)?Ta:an.current,u=du(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&DR(e,o,r,u),Ns=!1;var f=e.memoizedState;o.state=f,Fm(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Cn.current||Ns?(typeof c=="function"&&(Dw(e,n,c,r),l=e.memoizedState),(a=Ns||kR(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,bD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Rr(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=dr(l):(l=xn(n)?Ta:an.current,l=du(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&DR(e,o,r,l),Ns=!1,f=e.memoizedState,o.state=f,Fm(e,r,o,i);var g=e.memoizedState;a!==d||f!==g||Cn.current||Ns?(typeof p=="function"&&(Dw(e,n,p,r),g=e.memoizedState),(u=Ns||kR(e,n,u,r,f,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Nw(t,e,n,r,s,i)}function Nw(t,e,n,r,i,s){XD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&TR(e,n,!1),zi(t,e,s);r=e.stateNode,C$.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pu(e,t.child,null,s),e.child=pu(e,null,a,s)):dn(t,e,a,s),e.memoizedState=r.state,i&&TR(e,n,!0),e.child}function YD(t){var e=t.stateNode;e.pendingContext?ER(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ER(t,e.context,!1),yE(t,e.containerInfo)}function BR(t,e,n,r,i){return fu(),hE(i),e.flags|=256,dn(t,e,n,r),e.child}var Vw={dehydrated:null,treeContext:null,retryLane:0};function Fw(t){return{baseLanes:t,cachePool:null,transitions:null}}function JD(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),We(tt,i&1),t===null)return Pw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sy(o,r,0,null),t=ga(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Fw(n),e.memoizedState=Vw,t):IE(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return x$(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=to(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=to(a,s):(s=ga(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Fw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vw,r}return s=t.child,t=s.sibling,r=to(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function IE(t,e){return e=sy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xf(t,e,n,r){return r!==null&&hE(r),pu(e,t.child,null,n),t=IE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x$(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vv(Error(H(422))),Xf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sy({mode:"visible",children:r.children},i,0,null),s=ga(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&pu(e,t.child,null,o),e.child.memoizedState=Fw(o),e.memoizedState=Vw,s);if(!(e.mode&1))return Xf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=Vv(s,r,void 0),Xf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ui(t,i),Mr(r,t,i,-1))}return kE(),r=Vv(Error(H(421))),Xf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$$.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Un=Ys(i.nextSibling),Wn=e,Je=!0,Pr=null,t!==null&&(nr[rr++]=Pi,nr[rr++]=ki,nr[rr++]=ba,Pi=t.id,ki=t.overflow,ba=e),e=IE(e,r.children),e.flags|=4096,e)}function jR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kw(t.return,e,n)}function Fv(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ZD(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jR(t,n,e);else if(t.tag===19)jR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Fv(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Fv(e,!0,n,null,s);break;case"together":Fv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Np(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ra|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=to(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=to(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function A$(t,e,n){switch(e.tag){case 3:YD(e),fu();break;case 5:ID(e);break;case 1:xn(e.type)&&Om(e);break;case 4:yE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;We(Nm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?JD(t,e,n):(We(tt,tt.current&1),t=zi(t,e,n),t!==null?t.sibling:null);We(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,QD(t,e,n)}return zi(t,e,n)}var eO,Bw,tO,nO;eO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bw=function(){};tO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,oa(li.current);var s=null;switch(n){case"input":i=aw(t,i),r=aw(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=cw(t,i),r=cw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=km)}dw(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ge("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};nO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mc(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function P$(t,e,n){var r=e.pendingProps;switch(cE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return xn(e.type)&&Dm(),Yt(e),null;case 3:return r=e.stateNode,mu(),Qe(Cn),Qe(an),_E(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pr!==null&&(qw(Pr),Pr=null))),Bw(t,e),Yt(e),null;case 5:vE(e);var i=oa(nd.current);if(n=e.type,t!==null&&e.stateNode!=null)tO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Yt(e),null}if(t=oa(li.current),Gf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zr]=e,r[ed]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<Xc.length;i++)Ge(Xc[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":QI(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":YI(r,s),Ge("invalid",r)}dw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&qf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qf(r.textContent,a,t),i=["children",""+a]):Wh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Bf(r),XI(r,s,!0);break;case"textarea":Bf(r),JI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=km)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zr]=e,t[ed]=r,eO(t,e,!1,!1),e.stateNode=t;e:{switch(o=fw(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xc.length;i++)Ge(Xc[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":QI(t,r),i=aw(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":YI(t,r),i=cw(t,r),Ge("invalid",t);break;default:i=r}dw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ok(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Hh(t,l):typeof l=="number"&&Hh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",t):l!=null&&Q0(t,s,l,o))}switch(n){case"input":Bf(t),XI(t,r,!1);break;case"textarea":Bf(t),JI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Xl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Xl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=km)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)nO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=oa(nd.current),oa(li.current),Gf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zr]=e,(s=r.nodeValue!==n)&&(t=Wn,t!==null))switch(t.tag){case 3:qf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zr]=e,e.stateNode=r}return Yt(e),null;case 13:if(Qe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&Un!==null&&e.mode&1&&!(e.flags&128))wD(),fu(),e.flags|=98560,s=!1;else if(s=Gf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Zr]=e}else fu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),s=!1}else Pr!==null&&(qw(Pr),Pr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?xt===0&&(xt=3):kE())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return mu(),Bw(t,e),t===null&&Jh(e.stateNode.containerInfo),Yt(e),null;case 10:return pE(e.type._context),Yt(e),null;case 17:return xn(e.type)&&Dm(),Yt(e),null;case 19:if(Qe(tt),s=e.memoizedState,s===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mc(s,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bm(t),o!==null){for(e.flags|=128,Mc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>yu&&(e.flags|=128,r=!0,Mc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Je)return Yt(e),null}else 2*pt()-s.renderingStartTime>yu&&n!==1073741824&&(e.flags|=128,r=!0,Mc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=tt.current,We(tt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return PE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function k$(t,e){switch(cE(e),e.tag){case 1:return xn(e.type)&&Dm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mu(),Qe(Cn),Qe(an),_E(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vE(e),null;case 13:if(Qe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));fu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(tt),null;case 4:return mu(),null;case 10:return pE(e.type._context),null;case 22:case 23:return PE(),null;case 24:return null;default:return null}}var Yf=!1,nn=!1,D$=typeof WeakSet=="function"?WeakSet:Set,J=null;function jl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function jw(t,e,n){try{n()}catch(r){ct(t,e,r)}}var $R=!1;function O$(t,e){if(Tw=xm,t=aD(),lE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bw={focusedElem:t,selectionRange:n},xm=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var E=g.memoizedProps,b=g.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:Rr(e.type,E),b);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(x){ct(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return g=$R,$R=!1,g}function wh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&jw(e,n,s)}i=i.next}while(i!==r)}}function ry(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $w(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rO(t){var e=t.alternate;e!==null&&(t.alternate=null,rO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zr],delete e[ed],delete e[Cw],delete e[m$],delete e[g$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iO(t){return t.tag===5||t.tag===3||t.tag===4}function UR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=km));else if(r!==4&&(t=t.child,t!==null))for(Uw(t,e,n),t=t.sibling;t!==null;)Uw(t,e,n),t=t.sibling}function zw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zw(t,e,n),t=t.sibling;t!==null;)zw(t,e,n),t=t.sibling}var Ut=null,xr=!1;function Ts(t,e,n){for(n=n.child;n!==null;)sO(t,e,n),n=n.sibling}function sO(t,e,n){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(Qg,n)}catch{}switch(n.tag){case 5:nn||jl(n,e);case 6:var r=Ut,i=xr;Ut=null,Ts(t,e,n),Ut=r,xr=i,Ut!==null&&(xr?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(xr?(t=Ut,n=n.stateNode,t.nodeType===8?kv(t.parentNode,n):t.nodeType===1&&kv(t,n),Qh(t)):kv(Ut,n.stateNode));break;case 4:r=Ut,i=xr,Ut=n.stateNode.containerInfo,xr=!0,Ts(t,e,n),Ut=r,xr=i;break;case 0:case 11:case 14:case 15:if(!nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jw(n,e,o),i=i.next}while(i!==r)}Ts(t,e,n);break;case 1:if(!nn&&(jl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ct(n,e,a)}Ts(t,e,n);break;case 21:Ts(t,e,n);break;case 22:n.mode&1?(nn=(r=nn)||n.memoizedState!==null,Ts(t,e,n),nn=r):Ts(t,e,n);break;default:Ts(t,e,n)}}function zR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new D$),e.forEach(function(r){var i=U$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ut=a.stateNode,xr=!1;break e;case 3:Ut=a.stateNode.containerInfo,xr=!0;break e;case 4:Ut=a.stateNode.containerInfo,xr=!0;break e}a=a.return}if(Ut===null)throw Error(H(160));sO(s,o,i),Ut=null,xr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ct(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oO(e,t),e=e.sibling}function oO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wr(e,t),Kr(t),r&4){try{wh(3,t,t.return),ry(3,t)}catch(E){ct(t,t.return,E)}try{wh(5,t,t.return)}catch(E){ct(t,t.return,E)}}break;case 1:wr(e,t),Kr(t),r&512&&n!==null&&jl(n,n.return);break;case 5:if(wr(e,t),Kr(t),r&512&&n!==null&&jl(n,n.return),t.flags&32){var i=t.stateNode;try{Hh(i,"")}catch(E){ct(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xk(i,s),fw(a,o);var u=fw(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Ok(i,d):c==="dangerouslySetInnerHTML"?kk(i,d):c==="children"?Hh(i,d):Q0(i,c,d,u)}switch(a){case"input":lw(i,s);break;case"textarea":Ak(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Xl(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Xl(i,!!s.multiple,s.defaultValue,!0):Xl(i,!!s.multiple,s.multiple?[]:"",!1))}i[ed]=s}catch(E){ct(t,t.return,E)}}break;case 6:if(wr(e,t),Kr(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){ct(t,t.return,E)}}break;case 3:if(wr(e,t),Kr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qh(e.containerInfo)}catch(E){ct(t,t.return,E)}break;case 4:wr(e,t),Kr(t);break;case 13:wr(e,t),Kr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xE=pt())),r&4&&zR(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(u=nn)||c,wr(e,t),nn=u):wr(e,t),Kr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(J=t,c=t.child;c!==null;){for(d=J=c;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:wh(4,f,f.return);break;case 1:jl(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(E){ct(r,n,E)}}break;case 5:jl(f,f.return);break;case 22:if(f.memoizedState!==null){HR(d);continue}}p!==null?(p.return=f,J=p):HR(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Dk("display",o))}catch(E){ct(t,t.return,E)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){ct(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wr(e,t),Kr(t),r&4&&zR(t);break;case 21:break;default:wr(e,t),Kr(t)}}function Kr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iO(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hh(i,""),r.flags&=-33);var s=UR(t);zw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=UR(t);Uw(t,a,o);break;default:throw Error(H(161))}}catch(l){ct(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function M$(t,e,n){J=t,aO(t)}function aO(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||nn;a=Yf;var u=nn;if(Yf=o,(nn=l)&&!u)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?KR(i):l!==null?(l.return=o,J=l):KR(i);for(;s!==null;)J=s,aO(s),s=s.sibling;J=i,Yf=a,nn=u}WR(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):WR(t)}}function WR(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||ry(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&xR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Qh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}nn||e.flags&512&&$w(e)}catch(f){ct(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function HR(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function KR(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ry(4,e)}catch(l){ct(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ct(e,i,l)}}var s=e.return;try{$w(e)}catch(l){ct(e,s,l)}break;case 5:var o=e.return;try{$w(e)}catch(l){ct(e,o,l)}}}catch(l){ct(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var L$=Math.ceil,Um=Ji.ReactCurrentDispatcher,RE=Ji.ReactCurrentOwner,ur=Ji.ReactCurrentBatchConfig,xe=0,jt=null,wt=null,qt=0,Bn=0,$l=_o(0),xt=0,od=null,Ra=0,iy=0,CE=0,Sh=null,En=null,xE=0,yu=1/0,Ci=null,zm=!1,Ww=null,Zs=null,Jf=!1,Ks=null,Wm=0,Eh=0,Hw=null,Vp=-1,Fp=0;function mn(){return xe&6?pt():Vp!==-1?Vp:Vp=pt()}function eo(t){return t.mode&1?xe&2&&qt!==0?qt&-qt:v$.transition!==null?(Fp===0&&(Fp=Hk()),Fp):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Jk(t.type)),t):1}function Mr(t,e,n,r){if(50<Eh)throw Eh=0,Hw=null,Error(H(185));Vd(t,n,r),(!(xe&2)||t!==jt)&&(t===jt&&(!(xe&2)&&(iy|=n),xt===4&&Bs(t,qt)),An(t,r),n===1&&xe===0&&!(e.mode&1)&&(yu=pt()+500,ey&&wo()))}function An(t,e){var n=t.callbackNode;v4(t,e);var r=Cm(t,t===jt?qt:0);if(r===0)n!==null&&tR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tR(n),e===1)t.tag===0?y$(qR.bind(null,t)):yD(qR.bind(null,t)),f$(function(){!(xe&6)&&wo()}),n=null;else{switch(Kk(r)){case 1:n=eE;break;case 4:n=zk;break;case 16:n=Rm;break;case 536870912:n=Wk;break;default:n=Rm}n=mO(n,lO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lO(t,e){if(Vp=-1,Fp=0,xe&6)throw Error(H(327));var n=t.callbackNode;if(tu()&&t.callbackNode!==n)return null;var r=Cm(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hm(t,r);else{e=r;var i=xe;xe|=2;var s=cO();(jt!==t||qt!==e)&&(Ci=null,yu=pt()+500,ma(t,e));do try{F$();break}catch(a){uO(t,a)}while(!0);fE(),Um.current=s,xe=i,wt!==null?e=0:(jt=null,qt=0,e=xt)}if(e!==0){if(e===2&&(i=vw(t),i!==0&&(r=i,e=Kw(t,i))),e===1)throw n=od,ma(t,0),Bs(t,r),An(t,pt()),n;if(e===6)Bs(t,r);else{if(i=t.current.alternate,!(r&30)&&!N$(i)&&(e=Hm(t,r),e===2&&(s=vw(t),s!==0&&(r=s,e=Kw(t,s))),e===1))throw n=od,ma(t,0),Bs(t,r),An(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:qo(t,En,Ci);break;case 3:if(Bs(t,r),(r&130023424)===r&&(e=xE+500-pt(),10<e)){if(Cm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rw(qo.bind(null,t,En,Ci),e);break}qo(t,En,Ci);break;case 4:if(Bs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*L$(r/1960))-r,10<r){t.timeoutHandle=Rw(qo.bind(null,t,En,Ci),r);break}qo(t,En,Ci);break;case 5:qo(t,En,Ci);break;default:throw Error(H(329))}}}return An(t,pt()),t.callbackNode===n?lO.bind(null,t):null}function Kw(t,e){var n=Sh;return t.current.memoizedState.isDehydrated&&(ma(t,e).flags|=256),t=Hm(t,e),t!==2&&(e=En,En=n,e!==null&&qw(e)),t}function qw(t){En===null?En=t:En.push.apply(En,t)}function N$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Lr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bs(t,e){for(e&=~CE,e&=~iy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Or(e),r=1<<n;t[n]=-1,e&=~r}}function qR(t){if(xe&6)throw Error(H(327));tu();var e=Cm(t,0);if(!(e&1))return An(t,pt()),null;var n=Hm(t,e);if(t.tag!==0&&n===2){var r=vw(t);r!==0&&(e=r,n=Kw(t,r))}if(n===1)throw n=od,ma(t,0),Bs(t,e),An(t,pt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qo(t,En,Ci),An(t,pt()),null}function AE(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(yu=pt()+500,ey&&wo())}}function Ca(t){Ks!==null&&Ks.tag===0&&!(xe&6)&&tu();var e=xe;xe|=1;var n=ur.transition,r=Ve;try{if(ur.transition=null,Ve=1,t)return t()}finally{Ve=r,ur.transition=n,xe=e,!(xe&6)&&wo()}}function PE(){Bn=$l.current,Qe($l)}function ma(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,d$(n)),wt!==null)for(n=wt.return;n!==null;){var r=n;switch(cE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dm();break;case 3:mu(),Qe(Cn),Qe(an),_E();break;case 5:vE(r);break;case 4:mu();break;case 13:Qe(tt);break;case 19:Qe(tt);break;case 10:pE(r.type._context);break;case 22:case 23:PE()}n=n.return}if(jt=t,wt=t=to(t.current,null),qt=Bn=e,xt=0,od=null,CE=iy=Ra=0,En=Sh=null,sa!==null){for(e=0;e<sa.length;e++)if(n=sa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}sa=null}return t}function uO(t,e){do{var n=wt;try{if(fE(),Mp.current=$m,jm){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jm=!1}if(Ia=0,Bt=Ct=it=null,_h=!1,rd=0,RE.current=null,n===null||n.return===null){xt=1,od=e,wt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=MR(o);if(p!==null){p.flags&=-257,LR(p,o,a,s,e),p.mode&1&&OR(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var E=new Set;E.add(l),e.updateQueue=E}else g.add(l);break e}else{if(!(e&1)){OR(s,u,e),kE();break e}l=Error(H(426))}}else if(Je&&a.mode&1){var b=MR(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),LR(b,o,a,s,e),hE(gu(l,a));break e}}s=l=gu(l,a),xt!==4&&(xt=2),Sh===null?Sh=[s]:Sh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=KD(s,l,e);CR(s,S);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Zs===null||!Zs.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=qD(s,a,e);CR(s,x);break e}}s=s.return}while(s!==null)}dO(n)}catch(O){e=O,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(!0)}function cO(){var t=Um.current;return Um.current=$m,t===null?$m:t}function kE(){(xt===0||xt===3||xt===2)&&(xt=4),jt===null||!(Ra&268435455)&&!(iy&268435455)||Bs(jt,qt)}function Hm(t,e){var n=xe;xe|=2;var r=cO();(jt!==t||qt!==e)&&(Ci=null,ma(t,e));do try{V$();break}catch(i){uO(t,i)}while(!0);if(fE(),xe=n,Um.current=r,wt!==null)throw Error(H(261));return jt=null,qt=0,xt}function V$(){for(;wt!==null;)hO(wt)}function F$(){for(;wt!==null&&!u4();)hO(wt)}function hO(t){var e=pO(t.alternate,t,Bn);t.memoizedProps=t.pendingProps,e===null?dO(t):wt=e,RE.current=null}function dO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=k$(n,e),n!==null){n.flags&=32767,wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,wt=null;return}}else if(n=P$(n,e,Bn),n!==null){wt=n;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);xt===0&&(xt=5)}function qo(t,e,n){var r=Ve,i=ur.transition;try{ur.transition=null,Ve=1,B$(t,e,n,r)}finally{ur.transition=i,Ve=r}return null}function B$(t,e,n,r){do tu();while(Ks!==null);if(xe&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_4(t,s),t===jt&&(wt=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jf||(Jf=!0,mO(Rm,function(){return tu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ur.transition,ur.transition=null;var o=Ve;Ve=1;var a=xe;xe|=4,RE.current=null,O$(t,n),oO(n,t),s$(bw),xm=!!Tw,bw=Tw=null,t.current=n,M$(n),c4(),xe=a,Ve=o,ur.transition=s}else t.current=n;if(Jf&&(Jf=!1,Ks=t,Wm=i),s=t.pendingLanes,s===0&&(Zs=null),f4(n.stateNode),An(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zm)throw zm=!1,t=Ww,Ww=null,t;return Wm&1&&t.tag!==0&&tu(),s=t.pendingLanes,s&1?t===Hw?Eh++:(Eh=0,Hw=t):Eh=0,wo(),null}function tu(){if(Ks!==null){var t=Kk(Wm),e=ur.transition,n=Ve;try{if(ur.transition=null,Ve=16>t?16:t,Ks===null)var r=!1;else{if(t=Ks,Ks=null,Wm=0,xe&6)throw Error(H(331));var i=xe;for(xe|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:wh(8,c,s)}var d=c.child;if(d!==null)d.return=c,J=d;else for(;J!==null;){c=J;var f=c.sibling,p=c.return;if(rO(c),c===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var g=s.alternate;if(g!==null){var E=g.child;if(E!==null){g.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wh(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,J=S;break e}J=s.return}}var y=t.current;for(J=y;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=y;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ry(9,a)}}catch(O){ct(a,a.return,O)}if(a===o){J=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,J=x;break e}J=a.return}}if(xe=i,wo(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(Qg,t)}catch{}r=!0}return r}finally{Ve=n,ur.transition=e}}return!1}function GR(t,e,n){e=gu(n,e),e=KD(t,e,1),t=Js(t,e,1),e=mn(),t!==null&&(Vd(t,1,e),An(t,e))}function ct(t,e,n){if(t.tag===3)GR(t,t,n);else for(;e!==null;){if(e.tag===3){GR(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zs===null||!Zs.has(r))){t=gu(n,t),t=qD(e,t,1),e=Js(e,t,1),t=mn(),e!==null&&(Vd(e,1,t),An(e,t));break}}e=e.return}}function j$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(xt===4||xt===3&&(qt&130023424)===qt&&500>pt()-xE?ma(t,0):CE|=n),An(t,e)}function fO(t,e){e===0&&(t.mode&1?(e=Uf,Uf<<=1,!(Uf&130023424)&&(Uf=4194304)):e=1);var n=mn();t=Ui(t,e),t!==null&&(Vd(t,e,n),An(t,n))}function $$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fO(t,n)}function U$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),fO(t,n)}var pO;pO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,A$(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,Je&&e.flags&1048576&&vD(e,Lm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Np(t,e),t=e.pendingProps;var i=du(e,an.current);eu(e,n),i=SE(null,e,r,t,i,n);var s=EE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(r)?(s=!0,Om(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gE(e),i.updater=ny,e.stateNode=i,i._reactInternals=e,Ow(e,r,t,n),e=Nw(null,e,r,!0,s,n)):(e.tag=0,Je&&s&&uE(e),dn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Np(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=W$(r),t=Rr(r,t),i){case 0:e=Lw(null,e,r,t,n);break e;case 1:e=FR(null,e,r,t,n);break e;case 11:e=NR(null,e,r,t,n);break e;case 14:e=VR(null,e,r,Rr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),Lw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),FR(t,e,r,i,n);case 3:e:{if(YD(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,bD(t,e),Fm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gu(Error(H(423)),e),e=BR(t,e,r,n,i);break e}else if(r!==i){i=gu(Error(H(424)),e),e=BR(t,e,r,n,i);break e}else for(Un=Ys(e.stateNode.containerInfo.firstChild),Wn=e,Je=!0,Pr=null,n=ED(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fu(),r===i){e=zi(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return ID(e),t===null&&Pw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Iw(r,i)?o=null:s!==null&&Iw(r,s)&&(e.flags|=32),XD(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&Pw(e),null;case 13:return JD(t,e,n);case 4:return yE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pu(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),NR(t,e,r,i,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,We(Nm,r._currentValue),r._currentValue=o,s!==null)if(Lr(s.value,o)){if(s.children===i.children&&!Cn.current){e=zi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ni(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),kw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eu(e,n),i=dr(i),r=r(i),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,i=Rr(r,e.pendingProps),i=Rr(r.type,i),VR(t,e,r,i,n);case 15:return GD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rr(r,i),Np(t,e),e.tag=1,xn(r)?(t=!0,Om(e)):t=!1,eu(e,n),HD(e,r,i),Ow(e,r,i,n),Nw(null,e,r,!0,t,n);case 19:return ZD(t,e,n);case 22:return QD(t,e,n)}throw Error(H(156,e.tag))};function mO(t,e){return Uk(t,e)}function z$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(t,e,n,r){return new z$(t,e,n,r)}function DE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W$(t){if(typeof t=="function")return DE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Y0)return 11;if(t===J0)return 14}return 2}function to(t,e){var n=t.alternate;return n===null?(n=or(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")DE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kl:return ga(n.children,i,s,e);case X0:o=8,i|=8;break;case rw:return t=or(12,n,e,i|2),t.elementType=rw,t.lanes=s,t;case iw:return t=or(13,n,e,i),t.elementType=iw,t.lanes=s,t;case sw:return t=or(19,n,e,i),t.elementType=sw,t.lanes=s,t;case Ik:return sy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tk:o=10;break e;case bk:o=9;break e;case Y0:o=11;break e;case J0:o=14;break e;case Ls:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=or(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ga(t,e,n,r){return t=or(7,t,r,e),t.lanes=n,t}function sy(t,e,n,r){return t=or(22,t,r,e),t.elementType=Ik,t.lanes=n,t.stateNode={isHidden:!1},t}function Bv(t,e,n){return t=or(6,t,null,e),t.lanes=n,t}function jv(t,e,n){return e=or(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function H$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wv(0),this.expirationTimes=wv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function OE(t,e,n,r,i,s,o,a,l){return t=new H$(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=or(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gE(s),t}function K$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gO(t){if(!t)return uo;t=t._reactInternals;e:{if(Ua(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(xn(n))return gD(t,n,e)}return e}function yO(t,e,n,r,i,s,o,a,l){return t=OE(n,r,!0,t,i,s,o,a,l),t.context=gO(null),n=t.current,r=mn(),i=eo(n),s=Ni(r,i),s.callback=e??null,Js(n,s,i),t.current.lanes=i,Vd(t,i,r),An(t,r),t}function oy(t,e,n,r){var i=e.current,s=mn(),o=eo(i);return n=gO(n),e.context===null?e.context=n:e.pendingContext=n,e=Ni(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Js(i,e,o),t!==null&&(Mr(t,i,o,s),Op(t,i,o)),o}function Km(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function QR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ME(t,e){QR(t,e),(t=t.alternate)&&QR(t,e)}function q$(){return null}var vO=typeof reportError=="function"?reportError:function(t){console.error(t)};function LE(t){this._internalRoot=t}ay.prototype.render=LE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));oy(t,e,null,null)};ay.prototype.unmount=LE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ca(function(){oy(null,t,null,null)}),e[$i]=null}};function ay(t){this._internalRoot=t}ay.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fs.length&&e!==0&&e<Fs[n].priority;n++);Fs.splice(n,0,t),n===0&&Yk(t)}};function NE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ly(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XR(){}function G$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Km(o);s.call(u)}}var o=yO(e,r,t,0,null,!1,!1,"",XR);return t._reactRootContainer=o,t[$i]=o.current,Jh(t.nodeType===8?t.parentNode:t),Ca(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Km(l);a.call(u)}}var l=OE(t,0,!1,null,null,!1,!1,"",XR);return t._reactRootContainer=l,t[$i]=l.current,Jh(t.nodeType===8?t.parentNode:t),Ca(function(){oy(e,l,n,r)}),l}function uy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Km(o);a.call(l)}}oy(e,o,t,i)}else o=G$(n,e,t,i,r);return Km(o)}qk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qc(e.pendingLanes);n!==0&&(tE(e,n|1),An(e,pt()),!(xe&6)&&(yu=pt()+500,wo()))}break;case 13:Ca(function(){var r=Ui(t,1);if(r!==null){var i=mn();Mr(r,t,1,i)}}),ME(t,1)}};nE=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var n=mn();Mr(e,t,134217728,n)}ME(t,134217728)}};Gk=function(t){if(t.tag===13){var e=eo(t),n=Ui(t,e);if(n!==null){var r=mn();Mr(n,t,e,r)}ME(t,e)}};Qk=function(){return Ve};Xk=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};mw=function(t,e,n){switch(e){case"input":if(lw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Zg(r);if(!i)throw Error(H(90));Ck(r),lw(r,i)}}}break;case"textarea":Ak(t,n);break;case"select":e=n.value,e!=null&&Xl(t,!!n.multiple,e,!1)}};Nk=AE;Vk=Ca;var Q$={usingClientEntryPoint:!1,Events:[Bd,Ll,Zg,Mk,Lk,AE]},Lc={findFiberByHostInstance:ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X$={bundleType:Lc.bundleType,version:Lc.version,rendererPackageName:Lc.rendererPackageName,rendererConfig:Lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jk(t),t===null?null:t.stateNode},findFiberByHostInstance:Lc.findFiberByHostInstance||q$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{Qg=Zf.inject(X$),ai=Zf}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q$;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NE(e))throw Error(H(200));return K$(t,e,null,n)};Qn.createRoot=function(t,e){if(!NE(t))throw Error(H(299));var n=!1,r="",i=vO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=OE(t,1,!1,null,null,n,!1,r,i),t[$i]=e.current,Jh(t.nodeType===8?t.parentNode:t),new LE(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=jk(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return Ca(t)};Qn.hydrate=function(t,e,n){if(!ly(e))throw Error(H(200));return uy(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!NE(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yO(e,null,t,1,n??null,i,!1,s,o),t[$i]=e.current,Jh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ay(e)};Qn.render=function(t,e,n){if(!ly(e))throw Error(H(200));return uy(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!ly(t))throw Error(H(40));return t._reactRootContainer?(Ca(function(){uy(null,null,t,!1,function(){t._reactRootContainer=null,t[$i]=null})}),!0):!1};Qn.unstable_batchedUpdates=AE;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ly(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return uy(t,e,n,!1,r)};Qn.version="18.3.1-next-f1338f8080-20240426";function _O(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_O)}catch(t){console.error(t)}}_O(),_k.exports=Qn;var wO=_k.exports;const Y$=Fu(wO);var YR=wO;tw.createRoot=YR.createRoot,tw.hydrateRoot=YR.hydrateRoot;var J$=t=>t.disabled||Array.isArray(t.accessibilityStates)&&t.accessibilityStates.indexOf("disabled")>-1,Z$={adjustable:"slider",button:"button",header:"heading",image:"img",imagebutton:null,keyboardkey:null,label:null,link:"link",none:"presentation",search:"search",summary:"region",text:null},SO=t=>{var e=t.accessibilityRole,n=t.role,r=n||e;if(r){var i=Z$[r];if(i!==null)return i||r}},eU={article:"article",banner:"header",blockquote:"blockquote",button:"button",code:"code",complementary:"aside",contentinfo:"footer",deletion:"del",emphasis:"em",figure:"figure",insertion:"ins",form:"form",list:"ul",listitem:"li",main:"main",navigation:"nav",paragraph:"p",region:"section",strong:"strong"},tU={},nU=function(e){e===void 0&&(e=tU);var n=e.role||e.accessibilityRole;if(n==="label")return"label";var r=SO(e);if(r){if(r==="heading"){var i=e.accessibilityLevel||e["aria-level"];return i!=null?"h"+i:"h1"}return eU[r]}},EO={isDisabled:J$,propsToAccessibilityComponent:nU,propsToAriaRole:SO};function ad(t){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ad(t)}function rU(t,e){if(ad(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iU(t){var e=rU(t,"string");return ad(e)=="symbol"?e:e+""}function sU(t,e,n){return(e=iU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(r){sU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pn(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},oU=["ms","Moz","O","Webkit"],aU=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(jp).forEach(t=>{oU.forEach(e=>{jp[aU(e,t)]=jp[t]})});var lU=t=>t==="currentcolor"||t==="currentColor"||t==="inherit"||t.indexOf("var(")===0;function uU(t){if(typeof t=="number")return t>>>0===t&&t>=0&&t<=4294967295?t:null;if(typeof t!="string")return null;const e=hU();let n;if(n=e.hex6.exec(t))return parseInt(n[1]+"ff",16)>>>0;const r=dU(t);return r??((n=e.rgb.exec(t))?(bi(n[1])<<24|bi(n[2])<<16|bi(n[3])<<8|255)>>>0:(n=e.rgba.exec(t))?n[6]!==void 0?(bi(n[6])<<24|bi(n[7])<<16|bi(n[8])<<8|tp(n[9]))>>>0:(bi(n[2])<<24|bi(n[3])<<16|bi(n[4])<<8|tp(n[5]))>>>0:(n=e.hex3.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=e.hex8.exec(t))?parseInt(n[1],16)>>>0:(n=e.hex4.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=e.hsl.exec(t))?($v(ep(n[1]),Is(n[2]),Is(n[3]))|255)>>>0:(n=e.hsla.exec(t))?n[6]!==void 0?($v(ep(n[6]),Is(n[7]),Is(n[8]))|tp(n[9]))>>>0:($v(ep(n[2]),Is(n[3]),Is(n[4]))|tp(n[5]))>>>0:(n=e.hwb.exec(t))?(cU(ep(n[1]),Is(n[2]),Is(n[3]))|255)>>>0:null)}function nu(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $v(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=nu(i,r,t+1/3),o=nu(i,r,t),a=nu(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function cU(t,e,n){if(e+n>=1){const o=Math.round(e*255/(e+n));return o<<24|o<<16|o<<8}const r=nu(0,1,t+1/3)*(1-e-n)+e,i=nu(0,1,t)*(1-e-n)+e,s=nu(0,1,t-1/3)*(1-e-n)+e;return Math.round(r*255)<<24|Math.round(i*255)<<16|Math.round(s*255)<<8}const Nt="[-+]?\\d*\\.?\\d+",bs=Nt+"%";function Uv(...t){return"\\(\\s*("+t.join(")\\s*,?\\s*(")+")\\s*\\)"}function ZR(...t){return"\\(\\s*("+t.slice(0,t.length-1).join(")\\s*,?\\s*(")+")\\s*/\\s*("+t[t.length-1]+")\\s*\\)"}function eC(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}let zv;function hU(){return zv===void 0&&(zv={rgb:new RegExp("rgb"+Uv(Nt,Nt,Nt)),rgba:new RegExp("rgba("+eC(Nt,Nt,Nt,Nt)+"|"+ZR(Nt,Nt,Nt,Nt)+")"),hsl:new RegExp("hsl"+Uv(Nt,bs,bs)),hsla:new RegExp("hsla("+eC(Nt,bs,bs,Nt)+"|"+ZR(Nt,bs,bs,Nt)+")"),hwb:new RegExp("hwb"+Uv(Nt,bs,bs)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/}),zv}function bi(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function ep(t){return(parseFloat(t)%360+360)%360/360}function tp(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Is(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function dU(t){switch(t){case"transparent":return 0;case"aliceblue":return 4042850303;case"antiquewhite":return 4209760255;case"aqua":return 16777215;case"aquamarine":return 2147472639;case"azure":return 4043309055;case"beige":return 4126530815;case"bisque":return 4293182719;case"black":return 255;case"blanchedalmond":return 4293643775;case"blue":return 65535;case"blueviolet":return 2318131967;case"brown":return 2771004159;case"burlywood":return 3736635391;case"burntsienna":return 3934150143;case"cadetblue":return 1604231423;case"chartreuse":return 2147418367;case"chocolate":return 3530104575;case"coral":return 4286533887;case"cornflowerblue":return 1687547391;case"cornsilk":return 4294499583;case"crimson":return 3692313855;case"cyan":return 16777215;case"darkblue":return 35839;case"darkcyan":return 9145343;case"darkgoldenrod":return 3095792639;case"darkgray":return 2846468607;case"darkgreen":return 6553855;case"darkgrey":return 2846468607;case"darkkhaki":return 3182914559;case"darkmagenta":return 2332068863;case"darkolivegreen":return 1433087999;case"darkorange":return 4287365375;case"darkorchid":return 2570243327;case"darkred":return 2332033279;case"darksalmon":return 3918953215;case"darkseagreen":return 2411499519;case"darkslateblue":return 1211993087;case"darkslategray":return 793726975;case"darkslategrey":return 793726975;case"darkturquoise":return 13554175;case"darkviolet":return 2483082239;case"deeppink":return 4279538687;case"deepskyblue":return 12582911;case"dimgray":return 1768516095;case"dimgrey":return 1768516095;case"dodgerblue":return 512819199;case"firebrick":return 2988581631;case"floralwhite":return 4294635775;case"forestgreen":return 579543807;case"fuchsia":return 4278255615;case"gainsboro":return 3705462015;case"ghostwhite":return 4177068031;case"gold":return 4292280575;case"goldenrod":return 3668254975;case"gray":return 2155905279;case"green":return 8388863;case"greenyellow":return 2919182335;case"grey":return 2155905279;case"honeydew":return 4043305215;case"hotpink":return 4285117695;case"indianred":return 3445382399;case"indigo":return 1258324735;case"ivory":return 4294963455;case"khaki":return 4041641215;case"lavender":return 3873897215;case"lavenderblush":return 4293981695;case"lawngreen":return 2096890111;case"lemonchiffon":return 4294626815;case"lightblue":return 2916673279;case"lightcoral":return 4034953471;case"lightcyan":return 3774873599;case"lightgoldenrodyellow":return 4210742015;case"lightgray":return 3553874943;case"lightgreen":return 2431553791;case"lightgrey":return 3553874943;case"lightpink":return 4290167295;case"lightsalmon":return 4288707327;case"lightseagreen":return 548580095;case"lightskyblue":return 2278488831;case"lightslategray":return 2005441023;case"lightslategrey":return 2005441023;case"lightsteelblue":return 2965692159;case"lightyellow":return 4294959359;case"lime":return 16711935;case"limegreen":return 852308735;case"linen":return 4210091775;case"magenta":return 4278255615;case"maroon":return 2147483903;case"mediumaquamarine":return 1724754687;case"mediumblue":return 52735;case"mediumorchid":return 3126187007;case"mediumpurple":return 2473647103;case"mediumseagreen":return 1018393087;case"mediumslateblue":return 2070474495;case"mediumspringgreen":return 16423679;case"mediumturquoise":return 1221709055;case"mediumvioletred":return 3340076543;case"midnightblue":return 421097727;case"mintcream":return 4127193855;case"mistyrose":return 4293190143;case"moccasin":return 4293178879;case"navajowhite":return 4292783615;case"navy":return 33023;case"oldlace":return 4260751103;case"olive":return 2155872511;case"olivedrab":return 1804477439;case"orange":return 4289003775;case"orangered":return 4282712319;case"orchid":return 3664828159;case"palegoldenrod":return 4008225535;case"palegreen":return 2566625535;case"paleturquoise":return 2951671551;case"palevioletred":return 3681588223;case"papayawhip":return 4293907967;case"peachpuff":return 4292524543;case"peru":return 3448061951;case"pink":return 4290825215;case"plum":return 3718307327;case"powderblue":return 2967529215;case"purple":return 2147516671;case"rebeccapurple":return 1714657791;case"red":return 4278190335;case"rosybrown":return 3163525119;case"royalblue":return 1097458175;case"saddlebrown":return 2336560127;case"salmon":return 4202722047;case"sandybrown":return 4104413439;case"seagreen":return 780883967;case"seashell":return 4294307583;case"sienna":return 2689740287;case"silver":return 3233857791;case"skyblue":return 2278484991;case"slateblue":return 1784335871;case"slategray":return 1887473919;case"slategrey":return 1887473919;case"snow":return 4294638335;case"springgreen":return 16744447;case"steelblue":return 1182971135;case"tan":return 3535047935;case"teal":return 8421631;case"thistle":return 3636451583;case"tomato":return 4284696575;case"turquoise":return 1088475391;case"violet":return 4001558271;case"wheat":return 4125012991;case"white":return 4294967295;case"whitesmoke":return 4126537215;case"yellow":return 4294902015;case"yellowgreen":return 2597139199}return null}var fU=uU;const pU=Fu(fU);var mU=t=>{if(t==null)return t;var e=pU(t);if(e!=null)return e=(e<<24|e>>>8)>>>0,e},TO=function(e,n){if(n===void 0&&(n=1),e!=null){if(typeof e=="string"&&lU(e))return e;var r=mU(e);if(r!=null){var i=r>>16&255,s=r>>8&255,o=r&255,a=(r>>24&255)/255,l=(a*n).toFixed(2);return"rgba("+i+","+s+","+o+","+l+")"}}},gU={backgroundColor:!0,borderColor:!0,borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0,color:!0,shadowColor:!0,textDecorationColor:!0,textShadowColor:!0};function ni(t,e){var n=t;return(e==null||!jp[e])&&typeof t=="number"?n=t+"px":e!=null&&gU[e]&&(n=TO(t)),n}var At=!!(typeof window<"u"&&window.document&&window.document.createElement),yU={},vU=!At||window.CSS!=null&&window.CSS.supports!=null&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),_U="monospace,monospace",tC='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif',wU={borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderBlockColor:["borderTopColor","borderBottomColor"],borderInlineColor:["borderRightColor","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderInlineStyle:["borderRightStyle","borderLeftStyle"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderInlineWidth:["borderRightWidth","borderLeftWidth"],insetBlock:["top","bottom"],insetInline:["left","right"],marginBlock:["marginTop","marginBottom"],marginInline:["marginRight","marginLeft"],paddingBlock:["paddingTop","paddingBottom"],paddingInline:["paddingRight","paddingLeft"],overflow:["overflowX","overflowY"],overscrollBehavior:["overscrollBehaviorX","overscrollBehaviorY"],borderBlockStartColor:["borderTopColor"],borderBlockStartStyle:["borderTopStyle"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndColor:["borderBottomColor"],borderBlockEndStyle:["borderBottomStyle"],borderBlockEndWidth:["borderBottomWidth"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],insetBlockEnd:["bottom"],insetBlockStart:["top"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"]},bO=(t,e)=>{if(!t)return yU;var n={},r=function(){var a=t[i];if(a==null)return"continue";if(i==="backgroundClip")a==="text"&&(n.backgroundClip=a,n.WebkitBackgroundClip=a);else if(i==="flex")a===-1?(n.flexGrow=0,n.flexShrink=1,n.flexBasis="auto"):n.flex=a;else if(i==="font")n[i]=a.replace("System",tC);else if(i==="fontFamily")if(a.indexOf("System")>-1){var l=a.split(/,\s*/);l[l.indexOf("System")]=tC,n[i]=l.join(",")}else a==="monospace"?n[i]=_U:n[i]=a;else if(i==="textDecorationLine")vU?n.textDecorationLine=a:n.textDecoration=a;else if(i==="writingDirection")n.direction=a;else{var u=ni(t[i],i),c=wU[i];e&&i==="inset"?(t.insetInline==null&&(n.left=u,n.right=u),t.insetBlock==null&&(n.top=u,n.bottom=u)):e&&i==="margin"?(t.marginInline==null&&(n.marginLeft=u,n.marginRight=u),t.marginBlock==null&&(n.marginTop=u,n.marginBottom=u)):e&&i==="padding"?(t.paddingInline==null&&(n.paddingLeft=u,n.paddingRight=u),t.paddingBlock==null&&(n.paddingTop=u,n.paddingBottom=u)):c?c.forEach((d,f)=>{t[d]==null&&(n[d]=u)}):n[i]=u}};for(var i in t)var s=r();return n};function SU(t,e){for(var n=t.length,r=e^n,i=0,s;n>=4;)s=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),s^=s>>>24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)^s,n-=4,++i;switch(n){case 3:r^=(t.charCodeAt(i+2)&255)<<16;case 2:r^=(t.charCodeAt(i+1)&255)<<8;case 1:r^=t.charCodeAt(i)&255,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)}return r^=r>>>13,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16),r^=r>>>15,r>>>0}var EU=t=>SU(t,1).toString(36),TU=/[A-Z]/g,bU=/^ms-/,Wv={};function IU(t){return"-"+t.toLowerCase()}function RU(t){if(t in Wv)return Wv[t];var e=t.replace(TU,IU);return Wv[t]=bU.test(e)?"-"+e:e}var IO={},VE={},cy={};Object.defineProperty(cy,"__esModule",{value:!0});cy.default=CU;function CU(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(VE,"__esModule",{value:!0});VE.default=kU;var xU=cy,AU=PU(xU);function PU(t){return t&&t.__esModule?t:{default:t}}function kU(t,e,n){var r=t[e];if(r&&n.hasOwnProperty(e))for(var i=(0,AU.default)(e),s=0;s<r.length;++s){var o=r[s]+i;n[o]||(n[o]=n[e])}return n}var FE={};Object.defineProperty(FE,"__esModule",{value:!0});FE.default=DU;function DU(t,e,n,r,i){for(var s=0,o=t.length;s<o;++s){var a=t[s](e,n,r,i);if(a)return a}}var BE={};Object.defineProperty(BE,"__esModule",{value:!0});BE.default=OU;function nC(t,e){t.indexOf(e)===-1&&t.push(e)}function OU(t,e){if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n)nC(t,e[n]);else nC(t,e)}var jE={};Object.defineProperty(jE,"__esModule",{value:!0});jE.default=MU;function MU(t){return t instanceof Object&&!Array.isArray(t)}Object.defineProperty(IO,"__esModule",{value:!0});var LU=IO.default=zU,NU=VE,VU=hy(NU),FU=FE,rC=hy(FU),BU=BE,jU=hy(BU),$U=jE,UU=hy($U);function hy(t){return t&&t.__esModule?t:{default:t}}function zU(t){var e=t.prefixMap,n=t.plugins;return function r(i){for(var s in i){var o=i[s];if((0,UU.default)(o))i[s]=r(o);else if(Array.isArray(o)){for(var a=[],l=0,u=o.length;l<u;++l){var c=(0,rC.default)(n,s,o[l],i,e);(0,jU.default)(a,c||o[l])}a.length>0&&(i[s]=a)}else{var d=(0,rC.default)(n,s,o,i,e);d&&(i[s]=d),i=(0,VU.default)(e,s,i)}}return i}}var RO={};Object.defineProperty(RO,"__esModule",{value:!0});var WU=RO.default=HU;function HU(){return null}var CO={};function $p(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$p=function(n){return typeof n}:$p=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$p(t)}function KU(t){return XU(t)||QU(t)||GU(t)||qU()}function qU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GU(t,e){if(t){if(typeof t=="string")return Gw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gw(t,e)}}function QU(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function XU(t){if(Array.isArray(t))return Gw(t)}function Gw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iC(t){return t.filter(function(e,n){return t.lastIndexOf(e)===n})}function xO(t){for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;++e){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];for(var i in r){var s=r[i],o=t[i];if(o&&s){if(Array.isArray(o)){t[i]=iC(o.concat(s));continue}if(Array.isArray(s)){t[i]=iC([o].concat(KU(s)));continue}if($p(s)==="object"){t[i]=xO({},o,s);continue}}t[i]=s}}return t}var YU=/-([a-z])/g,JU=/^Ms/g,Hv={};function ZU(t){return t[1].toUpperCase()}function AO(t){if(Hv.hasOwnProperty(t))return Hv[t];var e=t.replace(YU,ZU).replace(JU,"ms");return Hv[t]=e,e}var e3=/[A-Z]/g,t3=/^ms-/,Kv={};function n3(t){return"-"+t.toLowerCase()}function PO(t){if(Kv.hasOwnProperty(t))return Kv[t];var e=t.replace(e3,n3);return Kv[t]=t3.test(e)?"-"+e:e}const r3=Object.freeze(Object.defineProperty({__proto__:null,default:PO},Symbol.toStringTag,{value:"Module"}));function dy(t){return PO(t)}function kO(t,e){return dy(t)+":"+e}function i3(t){var e="";for(var n in t){var r=t[n];typeof r!="string"&&typeof r!="number"||(e&&(e+=";"),e+=kO(n,r))}return e}var s3=/^(Webkit|Moz|O|ms)/;function o3(t){return s3.test(t)}var a3=/-webkit-|-moz-|-ms-/;function l3(t){return typeof t=="string"&&a3.test(t)}var ld={borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sC=["animationIterationCount","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineClamp","order"],oC=["Webkit","ms","Moz","O"];function u3(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}for(var qv=0,c3=sC.length;qv<c3;++qv){var aC=sC[qv];ld[aC]=!0;for(var Gv=0,h3=oC.length;Gv<h3;++Gv)ld[u3(oC[Gv],aC)]=!0}for(var d3 in ld)ld[dy(d3)]=!0;function f3(t){return ld.hasOwnProperty(t)}var p3=/^(ms|Webkit|Moz|O)/;function DO(t){var e=t.replace(p3,"");return e.charAt(0).toLowerCase()+e.slice(1)}function m3(t){return DO(AO(t))}function g3(t,e){return e.join(";"+dy(t)+":")}var y3=/(-ms-|-webkit-|-moz-|-o-)/g;function v3(t){return typeof t=="string"?t.replace(y3,""):t}const _3=Object.freeze(Object.defineProperty({__proto__:null,assignStyle:xO,camelCaseProperty:AO,cssifyDeclaration:kO,cssifyObject:i3,hyphenateProperty:dy,isPrefixedProperty:o3,isPrefixedValue:l3,isUnitlessProperty:f3,normalizeProperty:m3,resolveArrayValue:g3,unprefixProperty:DO,unprefixValue:v3},Symbol.toStringTag,{value:"Module"})),OO=ak(_3);Object.defineProperty(CO,"__esModule",{value:!0});var w3=CO.default=b3,S3=OO,E3=/cross-fade\(/g,T3=["-webkit-",""];function b3(t,e){if(typeof e=="string"&&!(0,S3.isPrefixedValue)(e)&&e.indexOf("cross-fade(")!==-1)return T3.map(function(n){return e.replace(E3,n+"cross-fade(")})}var MO={};Object.defineProperty(MO,"__esModule",{value:!0});var I3=MO.default=x3,R3=["-webkit-","-moz-",""],C3={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function x3(t,e){if(t==="cursor"&&C3.hasOwnProperty(e))return R3.map(function(n){return n+e})}var LO={};Object.defineProperty(LO,"__esModule",{value:!0});var A3=LO.default=O3,P3=OO,k3=/filter\(/g,D3=["-webkit-",""];function O3(t,e){if(typeof e=="string"&&!(0,P3.isPrefixedValue)(e)&&e.indexOf("filter(")!==-1)return D3.map(function(n){return e.replace(k3,n+"filter(")})}var NO={},$E={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=/-webkit-|-moz-|-ms-/;function n(r){return typeof r=="string"&&e.test(r)}})($E);Object.defineProperty(NO,"__esModule",{value:!0});var M3=NO.default=B3,L3=$E,N3=V3(L3);function V3(t){return t&&t.__esModule?t:{default:t}}var F3=["-webkit-",""];function B3(t,e){if(typeof e=="string"&&!(0,N3.default)(e)&&e.indexOf("image-set(")>-1)return F3.map(function(n){return e.replace(/image-set\(/g,n+"image-set(")})}var VO={};Object.defineProperty(VO,"__esModule",{value:!0});var j3=VO.default=$3,lC={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};function $3(t,e,n){if(Object.prototype.hasOwnProperty.call(lC,t))for(var r=lC[t],i=0,s=r.length;i<s;++i)n[r[i]]=e}var FO={};Object.defineProperty(FO,"__esModule",{value:!0});var U3=FO.default=z3;function z3(t,e){if(t==="position"&&e==="sticky")return["-webkit-sticky","sticky"]}var BO={};Object.defineProperty(BO,"__esModule",{value:!0});var W3=BO.default=G3,H3=["-webkit-","-moz-",""],K3={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},q3={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function G3(t,e){if(K3.hasOwnProperty(t)&&q3.hasOwnProperty(e))return H3.map(function(n){return n+e})}var jO={},$O={};const Q3=ak(r3);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var e=Q3,n=r(e);function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,n.default)(s)}})($O);Object.defineProperty(jO,"__esModule",{value:!0});var X3=jO.default=s6,Y3=$O,J3=UE(Y3),Z3=$E,e6=UE(Z3),t6=cy,uC=UE(t6);function UE(t){return t&&t.__esModule?t:{default:t}}var n6={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},r6={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function i6(t,e){if((0,e6.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,i=n.length;r<i;++r){var s=n[r],o=[s];for(var a in e){var l=(0,J3.default)(a);if(s.indexOf(l)>-1&&l!=="order")for(var u=e[a],c=0,d=u.length;c<d;++c)o.unshift(s.replace(l,r6[u[c]]+l))}n[r]=o.join(",")}return n.join(",")}function s6(t,e,n,r){if(typeof e=="string"&&n6.hasOwnProperty(t)){var i=i6(e,r),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-moz-|-ms-/.test(a)}).join(",");if(t.indexOf("Webkit")>-1)return s;var o=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-webkit-|-ms-/.test(a)}).join(",");return t.indexOf("Moz")>-1?o:(n["Webkit"+(0,uC.default)(t)]=s,n["Moz"+(0,uC.default)(t)]=o,i)}}var ze=["Webkit"],o6=["Moz"],a6=["Webkit","Moz"],lt=["Webkit","ms"],l6=["Webkit","Moz","ms"];const u6={plugins:[WU,w3,I3,A3,M3,j3,U3,W3,X3],prefixMap:{appearance:l6,userSelect:a6,textEmphasisPosition:lt,textEmphasis:lt,textEmphasisStyle:lt,textEmphasisColor:lt,boxDecorationBreak:lt,clipPath:ze,maskImage:lt,maskMode:lt,maskRepeat:lt,maskPosition:lt,maskClip:lt,maskOrigin:lt,maskSize:lt,maskComposite:lt,mask:lt,maskBorderSource:lt,maskBorderMode:lt,maskBorderSlice:lt,maskBorderWidth:lt,maskBorderOutset:lt,maskBorderRepeat:lt,maskBorder:lt,maskType:lt,textDecorationStyle:ze,textDecorationSkip:ze,textDecorationLine:ze,textDecorationColor:ze,filter:ze,breakAfter:ze,breakBefore:ze,breakInside:ze,columnCount:ze,columnFill:ze,columnGap:ze,columnRule:ze,columnRuleColor:ze,columnRuleStyle:ze,columnRuleWidth:ze,columns:ze,columnSpan:ze,columnWidth:ze,backdropFilter:ze,hyphens:ze,flowInto:ze,flowFrom:ze,regionFragment:ze,textOrientation:ze,tabSize:o6,fontKerning:ze,textSizeAdjust:ze}};var c6=LU(u6),h6=["animationKeyframes"],cC=new Map,d6={},f6=1,p6=3,m6={borderColor:2,borderRadius:2,borderStyle:2,borderWidth:2,display:2,flex:2,inset:2,margin:2,overflow:2,overscrollBehavior:2,padding:2,insetBlock:2.1,insetInline:2.1,marginInline:2.1,marginBlock:2.1,paddingInline:2.1,paddingBlock:2.1,borderBlockStartColor:2.2,borderBlockStartStyle:2.2,borderBlockStartWidth:2.2,borderBlockEndColor:2.2,borderBlockEndStyle:2.2,borderBlockEndWidth:2.2,borderInlineStartColor:2.2,borderInlineStartStyle:2.2,borderInlineStartWidth:2.2,borderInlineEndColor:2.2,borderInlineEndStyle:2.2,borderInlineEndWidth:2.2,borderEndStartRadius:2.2,borderEndEndRadius:2.2,borderStartStartRadius:2.2,borderStartEndRadius:2.2,insetBlockEnd:2.2,insetBlockStart:2.2,insetInlineEnd:2.2,insetInlineStart:2.2,marginBlockStart:2.2,marginBlockEnd:2.2,marginInlineStart:2.2,marginInlineEnd:2.2,paddingBlockStart:2.2,paddingBlockEnd:2.2,paddingInlineStart:2.2,paddingInlineEnd:2.2},Qw="borderTopLeftRadius",Xw="borderTopRightRadius",Yw="borderBottomLeftRadius",Jw="borderBottomRightRadius",Zw="borderLeftColor",eS="borderLeftStyle",tS="borderLeftWidth",nS="borderRightColor",rS="borderRightStyle",iS="borderRightWidth",sS="right",oS="marginLeft",aS="marginRight",lS="paddingLeft",uS="paddingRight",cS="left",qm={[Qw]:Xw,[Xw]:Qw,[Yw]:Jw,[Jw]:Yw,[Zw]:nS,[eS]:rS,[tS]:iS,[nS]:Zw,[rS]:eS,[iS]:tS,[cS]:sS,[oS]:aS,[aS]:oS,[lS]:uS,[uS]:lS,[sS]:cS},Th={borderStartStartRadius:Qw,borderStartEndRadius:Xw,borderEndStartRadius:Yw,borderEndEndRadius:Jw,borderInlineStartColor:Zw,borderInlineStartStyle:eS,borderInlineStartWidth:tS,borderInlineEndColor:nS,borderInlineEndStyle:rS,borderInlineEndWidth:iS,insetInlineEnd:sS,insetInlineStart:cS,marginInlineStart:oS,marginInlineEnd:aS,paddingInlineStart:lS,paddingInlineEnd:uS},UO=["clear","float","textAlign"];function g6(t){var e={$$css:!0},n=[];function r(i,s,o){var a=_6(o,s),l=s+a,u=cC.get(l),c;if(u!=null)c=u[0],n.push(u[1]);else{var d=i!==s?l:a;c=zE("r",i,d);var f=m6[i]||p6,p=w6(c,s,o),g=[p,f];n.push(g),cC.set(l,[c,g])}return c}return Object.keys(t).sort().forEach(i=>{var s=t[i];if(s!=null){var o;if(UO.indexOf(i)>-1){var a=r(i,i,"left"),l=r(i,i,"right");s==="start"?o=[a,l]:s==="end"&&(o=[l,a])}var u=Th[i];if(u!=null){var c=r(i,u,s),d=r(i,qm[u],s);o=[c,d]}if(i==="transitionProperty"){for(var f=Array.isArray(s)?s:[s],p=[],g=0;g<f.length;g++){var E=f[g];typeof E=="string"&&Th[E]!=null&&p.push(g)}if(p.length>0){var b=[...f],S=[...f];p.forEach(y=>{var w=b[y];if(typeof w=="string"){var x=Th[w],O=qm[x];b[y]=x,S[y]=O;var k=r(i,i,b),T=r(i,i,S);o=[k,T]}})}}o==null?o=r(i,i,s):e.$$css$localize=!0,e[i]=o}}),[e,n]}function y6(t,e){var n={$$css:!0},r=[],i=t.animationKeyframes,s=Pn(t,h6),o=zE("css",e,JSON.stringify(t)),a="."+o,l;if(i!=null){var u=zO(i),c=u[0],d=u[1];l=c.join(","),r.push(...d)}var f=xi(ye(ye({},s),{},{animationName:l}));return r.push(""+a+f),n[o]=o,[n,[[r,f6]]]}function v6(t,e){var n=t||d6,r={},i={},s=function(){var u=n[o],c=o,d=u;if(!Object.prototype.hasOwnProperty.call(n,o)||u==null)return"continue";UO.indexOf(o)>-1&&(u==="start"?d=e?"right":"left":u==="end"&&(d=e?"left":"right"));var f=Th[o];if(f!=null&&(c=e?qm[f]:f),o==="transitionProperty"){var p=Array.isArray(u)?u:[u];p.forEach((g,E)=>{if(typeof g=="string"){var b=Th[g];b!=null&&(p[E]=e?qm[b]:b,d=p.join(" "))}})}r[c]||(i[c]=d),c===o&&(r[c]=!0)};for(var o in n)var a=s();return bO(i,!0)}function _6(t,e){var n=ni(t,e);return typeof n!="string"?JSON.stringify(n||""):n}function w6(t,e,n){var r=[],i="."+t;switch(e){case"animationKeyframes":{var s=zO(n),o=s[0],a=s[1],l=xi({animationName:o.join(",")});r.push(""+i+l,...a);break}case"placeholderTextColor":{var u=xi({color:n,opacity:1});r.push(i+"::-webkit-input-placeholder"+u,i+"::-moz-placeholder"+u,i+":-ms-input-placeholder"+u,i+"::placeholder"+u);break}case"pointerEvents":{var c=n;if(n==="auto"||n==="box-only"){if(c="auto!important",n==="box-only"){var d=xi({pointerEvents:"none"});r.push(i+">*"+d)}}else if((n==="none"||n==="box-none")&&(c="none!important",n==="box-none")){var f=xi({pointerEvents:"auto"});r.push(i+">*"+f)}var p=xi({pointerEvents:c});r.push(""+i+p);break}case"scrollbarWidth":{n==="none"&&r.push(i+"::-webkit-scrollbar{display:none}");var g=xi({scrollbarWidth:n});r.push(""+i+g);break}default:{var E=xi({[e]:n});r.push(""+i+E);break}}return r}function xi(t){var e=c6(bO(t)),n=Object.keys(e).map(r=>{var i=e[r],s=RU(r);return Array.isArray(i)?i.map(o=>s+":"+o).join(";"):s+":"+i}).sort().join(";");return"{"+n+";}"}function zE(t,e,n){var r=EU(e+n);return t+"-"+r}function S6(t){var e=["-webkit-",""],n=zE("r","animation",JSON.stringify(t)),r="{"+Object.keys(t).map(s=>{var o=t[s],a=xi(o);return""+s+a}).join("")+"}",i=e.map(s=>"@"+s+"keyframes "+n+r);return[n,i]}function zO(t){if(typeof t=="number")throw new Error("Invalid CSS keyframes type: "+typeof t);var e=[],n=[],r=Array.isArray(t)?t:[t];return r.forEach(i=>{if(typeof i=="string")e.push(i);else{var s=S6(i),o=s[0],a=s[1];e.push(o),n.push(...a)}}),[e,n]}function Qv(t,e,n){if(At){var r=e??document,i=r.getElementById(t);if(i==null)if(i=document.createElement("style"),i.setAttribute("id",t),typeof n=="string"&&i.appendChild(document.createTextNode(n)),r instanceof ShadowRoot)r.insertBefore(i,r.firstChild);else{var s=r.head;s&&s.insertBefore(i,s.firstChild)}return i.sheet}else return null}var E6=Array.prototype.slice;function Xv(t){var e={},n={};if(t!=null){var r;E6.call(t.cssRules).forEach((o,a)=>{var l=o.cssText;if(l.indexOf("stylesheet-group")>-1)r=I6(o),e[r]={start:a,rules:[l]};else{var u=dC(l);u!=null&&(n[u]=!0,e[r].rules.push(l))}})}function i(o,a,l){var u=hC(e),c=u.indexOf(a),d=c+1,f=u[d],p=f!=null&&e[f].start!=null?e[f].start:o.cssRules.length,g=C6(o,l,p);if(g){e[a].start==null&&(e[a].start=p);for(var E=d;E<u.length;E+=1){var b=u[E],S=e[b].start||0;e[b].start=S+1}}return g}var s={getTextContent(){return hC(e).map(o=>{var a=e[o].rules,l=a.shift();return a.sort(),a.unshift(l),a.join(`
`)}).join(`
`)},insert(o,a){var l=Number(a);if(e[l]==null){var u=T6(l);e[l]={start:null,rules:[u]},t!=null&&i(t,l,u)}var c=dC(o);if(c!=null&&n[c]==null&&(n[c]=!0,e[l].rules.push(o),t!=null)){var d=i(t,l,o);d||e[l].rules.pop()}}};return s}function T6(t){return'[stylesheet-group="'+t+'"]{}'}var b6=/["']/g;function I6(t){return Number(t.selectorText.split(b6)[1])}function hC(t){return Object.keys(t).map(Number).sort((e,n)=>e>n?1:-1)}var R6=/\s*([,])\s*/g;function dC(t){var e=t.split("{")[0].trim();return e!==""?e.replace(R6,"$1"):null}function C6(t,e,n){try{return t.insertRule(e,n),!0}catch{return!1}}var x6="react-native-stylesheet",Yv=new WeakMap,Sr=[],fC=["html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0);}","body{margin:0;}","button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}","input::-webkit-search-cancel-button,input::-webkit-search-decoration,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}"];function A6(t,e){e===void 0&&(e=x6);var n;if(At){var r=document;if(Sr.length===0)n=Xv(Qv(e)),fC.forEach(a=>{n.insert(a,0)}),Yv.set(r,Sr.length),Sr.push(n);else{var i=Yv.get(r);if(i==null){var s=Sr[0],o=s!=null?s.getTextContent():"";n=Xv(Qv(e,r,o)),Yv.set(r,Sr.length),Sr.push(n)}else n=Sr[i]}}else Sr.length===0?(n=Xv(Qv(e)),fC.forEach(a=>{n.insert(a,0)}),Sr.push(n)):n=Sr[0];return{getTextContent(){return n.getTextContent()},id:e,insert(a,l){Sr.forEach(u=>{u.insert(a,l)})}}}var WE={};Object.defineProperty(WE,"__esModule",{value:!0});WE.localizeStyle=P6;var np=new WeakMap,WO="$$css$localize";function pC(t,e){var n={};for(var r in t)if(r!==WO){var i=t[r];Array.isArray(i)?n[r]=e?i[1]:i[0]:n[r]=i}return n}function P6(t,e){if(t[WO]!=null){var n=e?1:0;if(np.has(t)){var r=np.get(t),i=r[n];return i==null&&(i=pC(t,e),r[n]=i,np.set(t,r)),i}var s=pC(t,e),o=new Array(2);return o[n]=s,np.set(t,o),s}return t}var k6=WE,D6={},HO={height:0,width:0},KO=t=>{var e=t.shadowColor,n=t.shadowOffset,r=t.shadowOpacity,i=t.shadowRadius,s=n||HO,o=s.height,a=s.width,l=ni(a),u=ni(o),c=ni(i||0),d=TO(e||"black",r);if(d!=null&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},O6=t=>{var e=t.textShadowColor,n=t.textShadowOffset,r=t.textShadowRadius,i=n||HO,s=i.height,o=i.width,a=r||0,l=ni(o),u=ni(s),c=ni(a),d=ni(e,"textShadowColor");if(d&&(s!==0||o!==0||a!==0)&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},M6=t=>{var e=Object.keys(t)[0],n=t[e];if(e==="matrix"||e==="matrix3d")return e+"("+n.join(",")+")";var r=ni(n,e);return e+"("+r+")"},L6=t=>t.map(M6).join(" "),N6={borderBottomEndRadius:"borderEndEndRadius",borderBottomStartRadius:"borderEndStartRadius",borderTopEndRadius:"borderStartEndRadius",borderTopStartRadius:"borderStartStartRadius",borderEndColor:"borderInlineEndColor",borderEndStyle:"borderInlineEndStyle",borderEndWidth:"borderInlineEndWidth",borderStartColor:"borderInlineStartColor",borderStartStyle:"borderInlineStartStyle",borderStartWidth:"borderInlineStartWidth",end:"insetInlineEnd",marginEnd:"marginInlineEnd",marginHorizontal:"marginInline",marginStart:"marginInlineStart",marginVertical:"marginBlock",paddingEnd:"paddingInlineEnd",paddingHorizontal:"paddingInline",paddingStart:"paddingInlineStart",paddingVertical:"paddingBlock",start:"insetInlineStart"},V6={elevation:!0,overlayColor:!0,resizeMode:!0,tintColor:!0},qO=function(e,n){n===void 0&&(n={});var r=e||D6,i={};if(n.shadow,r.shadowColor!=null||r.shadowOffset!=null||r.shadowOpacity!=null||r.shadowRadius!=null){var s=KO(r);if(s!=null&&i.boxShadow==null){var o=r.boxShadow,a=o?o+", "+s:s;i.boxShadow=a}}if(n.textShadow,r.textShadowColor!=null||r.textShadowOffset!=null||r.textShadowRadius!=null){var l=O6(r);if(l!=null&&i.textShadow==null){var u=r.textShadow,c=u?u+", "+l:l;i.textShadow=c}}for(var d in r)if(!(V6[d]!=null||d==="shadowColor"||d==="shadowOffset"||d==="shadowOpacity"||d==="shadowRadius"||d==="textShadowColor"||d==="textShadowOffset"||d==="textShadowRadius")){var f=r[d],p=N6[d]||d,g=f;!Object.prototype.hasOwnProperty.call(r,d)||p!==d&&r[p]!=null||(p==="aspectRatio"&&typeof g=="number"?i[p]=g.toString():p==="fontVariant"?(Array.isArray(g)&&g.length>0&&(g=g.join(" ")),i[p]=g):p==="textAlignVertical"?r.verticalAlign==null&&(i.verticalAlign=g==="center"?"middle":g):p==="transform"?(Array.isArray(g)&&(g=L6(g)),i.transform=g):i[p]=g)}return i},HE={};Object.defineProperty(HE,"__esModule",{value:!0});var GO=HE.styleq=void 0,F6=new WeakMap,B6="$$css";function QO(t){var e,n,r;return t!=null&&(e=t.disableCache===!0,n=t.disableMix===!0,r=t.transform),function(){for(var s=[],o="",a=null,l=e?null:F6,u=new Array(arguments.length),c=0;c<arguments.length;c++)u[c]=arguments[c];for(;u.length>0;){var d=u.pop();if(!(d==null||d===!1)){if(Array.isArray(d)){for(var f=0;f<d.length;f++)u.push(d[f]);continue}var p=r!=null?r(d):d;if(p.$$css){var g="";if(l!=null&&l.has(p)){var E=l.get(p);E!=null&&(g=E[0],s.push.apply(s,E[1]),l=E[2])}else{var b=[];for(var S in p){var y=p[S];S!==B6&&(typeof y=="string"||y===null?s.includes(S)||(s.push(S),l!=null&&b.push(S),typeof y=="string"&&(g+=g?" "+y:y)):console.error("styleq: ".concat(S," typeof ").concat(String(y),' is not "string" or "null".')))}if(l!=null){var w=new WeakMap;l.set(p,[g,b,w]),l=w}}g&&(o=o?g+" "+o:g)}else if(n)a==null&&(a={}),a=Object.assign({},p,a);else{var x=null;for(var O in p){var k=p[O];k!==void 0&&(s.includes(O)||(k!=null&&(a==null&&(a={}),x==null&&(x={}),x[O]=k),s.push(O),l=null))}x!=null&&(a=Object.assign(x,a))}}}var T=[o,a];return T}}var XO=QO();GO=HE.styleq=XO;XO.factory=QO;var j6=["writingDirection"],YO=new WeakMap,Gm=A6(),JO={shadow:!0,textShadow:!0};function $6(t,e){e===void 0&&(e={});var n=e,r=n.writingDirection,i=Pn(n,j6),s=r==="rtl";return GO.factory({transform(o){var a=YO.get(o);return a!=null?k6.localizeStyle(a,s):qO(o,ye(ye({},JO),i))}})(t)}function ZO(t){t.forEach(e=>{var n=e[0],r=e[1];Gm!=null&&n.forEach(i=>{Gm.insert(i,r)})})}function U6(t){var e=g6(qO(t,JO)),n=e[0],r=e[1];return ZO(r),n}function z6(t,e){var n=y6(t,e),r=n[0],i=n[1];return ZO(i),r}var eM={position:"absolute",left:0,right:0,top:0,bottom:0},W6=tM({x:ye({},eM)}).x;function tM(t){return Object.keys(t).forEach(e=>{var n=t[e];if(n!=null&&n.$$css!==!0){var r;e.indexOf("$raw")>-1?r=z6(n,e.split("$raw")[0]):r=U6(n),YO.set(n,r)}}),t}function H6(t,e){return[t,e]}function K6(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.flat(1/0),i={},s=0;s<r.length;s++){var o=r[s];o!=null&&typeof o=="object"&&Object.assign(i,o)}return i}function q6(){return{id:Gm.id,textContent:Gm.getTextContent()}}function Zi(t,e){e===void 0&&(e={});var n=e.writingDirection==="rtl",r=$6(t,e);return Array.isArray(r)&&r[1]!=null&&(r[1]=v6(r[1],n)),r}Zi.absoluteFill=W6;Zi.absoluteFillObject=eM;Zi.create=tM;Zi.compose=H6;Zi.flatten=K6;Zi.getSheet=q6;Zi.hairlineWidth=1;At&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.resolveRNStyle=Zi.flatten);var De=Zi,G6=["aria-activedescendant","accessibilityActiveDescendant","aria-atomic","accessibilityAtomic","aria-autocomplete","accessibilityAutoComplete","aria-busy","accessibilityBusy","aria-checked","accessibilityChecked","aria-colcount","accessibilityColumnCount","aria-colindex","accessibilityColumnIndex","aria-colspan","accessibilityColumnSpan","aria-controls","accessibilityControls","aria-current","accessibilityCurrent","aria-describedby","accessibilityDescribedBy","aria-details","accessibilityDetails","aria-disabled","accessibilityDisabled","aria-errormessage","accessibilityErrorMessage","aria-expanded","accessibilityExpanded","aria-flowto","accessibilityFlowTo","aria-haspopup","accessibilityHasPopup","aria-hidden","accessibilityHidden","aria-invalid","accessibilityInvalid","aria-keyshortcuts","accessibilityKeyShortcuts","aria-label","accessibilityLabel","aria-labelledby","accessibilityLabelledBy","aria-level","accessibilityLevel","aria-live","accessibilityLiveRegion","aria-modal","accessibilityModal","aria-multiline","accessibilityMultiline","aria-multiselectable","accessibilityMultiSelectable","aria-orientation","accessibilityOrientation","aria-owns","accessibilityOwns","aria-placeholder","accessibilityPlaceholder","aria-posinset","accessibilityPosInSet","aria-pressed","accessibilityPressed","aria-readonly","accessibilityReadOnly","aria-required","accessibilityRequired","role","accessibilityRole","aria-roledescription","accessibilityRoleDescription","aria-rowcount","accessibilityRowCount","aria-rowindex","accessibilityRowIndex","aria-rowspan","accessibilityRowSpan","aria-selected","accessibilitySelected","aria-setsize","accessibilitySetSize","aria-sort","accessibilitySort","aria-valuemax","accessibilityValueMax","aria-valuemin","accessibilityValueMin","aria-valuenow","accessibilityValueNow","aria-valuetext","accessibilityValueText","dataSet","focusable","id","nativeID","pointerEvents","style","tabIndex","testID"],Q6={},X6=Object.prototype.hasOwnProperty,Y6=Array.isArray,J6=/[A-Z]/g;function Z6(t){return"-"+t.toLowerCase()}function ez(t){return t.replace(J6,Z6)}function hl(t){return Y6(t)?t.join(" "):t}var tz=De.create({auto:{pointerEvents:"auto"},"box-none":{pointerEvents:"box-none"},"box-only":{pointerEvents:"box-only"},none:{pointerEvents:"none"}}),nz=(t,e,n)=>{e||(e=Q6);var r=e,i=r["aria-activedescendant"],s=r.accessibilityActiveDescendant,o=r["aria-atomic"],a=r.accessibilityAtomic,l=r["aria-autocomplete"],u=r.accessibilityAutoComplete,c=r["aria-busy"],d=r.accessibilityBusy,f=r["aria-checked"],p=r.accessibilityChecked,g=r["aria-colcount"],E=r.accessibilityColumnCount,b=r["aria-colindex"],S=r.accessibilityColumnIndex,y=r["aria-colspan"],w=r.accessibilityColumnSpan,x=r["aria-controls"],O=r.accessibilityControls,k=r["aria-current"],T=r.accessibilityCurrent,v=r["aria-describedby"],R=r.accessibilityDescribedBy,C=r["aria-details"],A=r.accessibilityDetails,L=r["aria-disabled"],D=r.accessibilityDisabled,de=r["aria-errormessage"],fe=r.accessibilityErrorMessage,je=r["aria-expanded"],Re=r.accessibilityExpanded,$=r["aria-flowto"],Y=r.accessibilityFlowTo,ie=r["aria-haspopup"],we=r.accessibilityHasPopup,Ae=r["aria-hidden"],un=r.accessibilityHidden,at=r["aria-invalid"],$t=r.accessibilityInvalid,dt=r["aria-keyshortcuts"],Ke=r.accessibilityKeyShortcuts,Ot=r["aria-label"],kn=r.accessibilityLabel,vi=r["aria-labelledby"],as=r.accessibilityLabelledBy,mr=r["aria-level"],Br=r.accessibilityLevel,Yn=r["aria-live"],xo=r.accessibilityLiveRegion,ls=r["aria-modal"],Ao=r.accessibilityModal,us=r["aria-multiline"],Oe=r.accessibilityMultiline,et=r["aria-multiselectable"],Dn=r.accessibilityMultiSelectable,Jn=r["aria-orientation"],cs=r.accessibilityOrientation,Po=r["aria-owns"],gr=r.accessibilityOwns,ko=r["aria-placeholder"],qa=r.accessibilityPlaceholder,hs=r["aria-posinset"],ac=r.accessibilityPosInSet,Ga=r["aria-pressed"],Qa=r.accessibilityPressed,Do=r["aria-readonly"],_i=r.accessibilityReadOnly,ds=r["aria-required"],$e=r.accessibilityRequired;r.role,r.accessibilityRole;var Zn=r["aria-roledescription"],Xa=r.accessibilityRoleDescription,wi=r["aria-rowcount"],Ya=r.accessibilityRowCount,jr=r["aria-rowindex"],Ja=r.accessibilityRowIndex,ee=r["aria-rowspan"],Xe=r.accessibilityRowSpan,Mt=r["aria-selected"],yr=r.accessibilitySelected,$r=r["aria-setsize"],Za=r.accessibilitySetSize,Si=r["aria-sort"],uv=r.accessibilitySort,pf=r["aria-valuemax"],el=r.accessibilityValueMax,lc=r["aria-valuemin"],mf=r.accessibilityValueMin,tl=r["aria-valuenow"],Oo=r.accessibilityValueNow,gf=r["aria-valuetext"],Ur=r.accessibilityValueText,Mo=r.dataSet,Lo=r.focusable,nl=r.id,uc=r.nativeID,cc=r.pointerEvents,cv=r.style,fs=r.tabIndex,yf=r.testID,X=Pn(r,G6),vf=L||D,On=EO.propsToAriaRole(e),ps=i??s;ps!=null&&(X["aria-activedescendant"]=ps);var zr=o!=null?i:a;zr!=null&&(X["aria-atomic"]=zr);var rl=l??u;rl!=null&&(X["aria-autocomplete"]=rl);var _f=c??d;_f!=null&&(X["aria-busy"]=_f);var hc=f??p;hc!=null&&(X["aria-checked"]=hc);var dc=g??E;dc!=null&&(X["aria-colcount"]=dc);var fc=b??S;fc!=null&&(X["aria-colindex"]=fc);var il=y??w;il!=null&&(X["aria-colspan"]=il);var sl=x??O;sl!=null&&(X["aria-controls"]=hl(sl));var pc=k??T;pc!=null&&(X["aria-current"]=pc);var mc=v??R;mc!=null&&(X["aria-describedby"]=hl(mc));var gc=C??A;gc!=null&&(X["aria-details"]=gc),vf===!0&&(X["aria-disabled"]=!0,(t==="button"||t==="form"||t==="input"||t==="select"||t==="textarea")&&(X.disabled=!0));var wf=de??fe;wf!=null&&(X["aria-errormessage"]=wf);var vr=je??Re;vr!=null&&(X["aria-expanded"]=vr);var Mn=$??Y;Mn!=null&&(X["aria-flowto"]=hl(Mn));var ms=ie??we;ms!=null&&(X["aria-haspopup"]=ms);var gs=Ae??un;gs===!0&&(X["aria-hidden"]=gs);var ol=at??$t;ol!=null&&(X["aria-invalid"]=ol);var Be=dt??Ke;Be!=null&&(X["aria-keyshortcuts"]=hl(Be));var No=Ot??kn;No!=null&&(X["aria-label"]=No);var ys=vi??as;ys!=null&&(X["aria-labelledby"]=hl(ys));var vs=mr??Br;vs!=null&&(X["aria-level"]=vs);var yc=Yn??xo;yc!=null&&(X["aria-live"]=yc==="none"?"off":yc);var vc=ls??Ao;vc!=null&&(X["aria-modal"]=vc);var Sf=us??Oe;Sf!=null&&(X["aria-multiline"]=Sf);var Ef=et??Dn;Ef!=null&&(X["aria-multiselectable"]=Ef);var Tf=Jn??cs;Tf!=null&&(X["aria-orientation"]=Tf);var bf=Po??gr;bf!=null&&(X["aria-owns"]=hl(bf));var _s=ko??qa;_s!=null&&(X["aria-placeholder"]=_s);var Wr=hs??ac;Wr!=null&&(X["aria-posinset"]=Wr);var _c=Ga??Qa;_c!=null&&(X["aria-pressed"]=_c);var wc=Do??_i;wc!=null&&(X["aria-readonly"]=wc,(t==="input"||t==="select"||t==="textarea")&&(X.readOnly=!0));var Sc=ds??$e;Sc!=null&&(X["aria-required"]=Sc,(t==="input"||t==="select"||t==="textarea")&&(X.required=$e)),On!=null&&(X.role=On==="none"?"presentation":On);var Ec=Zn??Xa;Ec!=null&&(X["aria-roledescription"]=Ec);var Tc=wi??Ya;Tc!=null&&(X["aria-rowcount"]=Tc);var Ei=jr??Ja;Ei!=null&&(X["aria-rowindex"]=Ei);var If=ee??Xe;If!=null&&(X["aria-rowspan"]=If);var Rf=Mt??yr;Rf!=null&&(X["aria-selected"]=Rf);var Cf=$r??Za;Cf!=null&&(X["aria-setsize"]=Cf);var _r=Si??uv;_r!=null&&(X["aria-sort"]=_r);var xf=pf??el;xf!=null&&(X["aria-valuemax"]=xf);var al=lc??mf;al!=null&&(X["aria-valuemin"]=al);var Vo=tl??Oo;Vo!=null&&(X["aria-valuenow"]=Vo);var bc=gf??Ur;if(bc!=null&&(X["aria-valuetext"]=bc),Mo!=null){for(var Ti in Mo)if(X6.call(Mo,Ti)){var Fo=ez(Ti),Ic=Mo[Ti];Ic!=null&&(X["data-"+Fo]=Ic)}}fs===0||fs==="0"||fs===-1||fs==="-1"?X.tabIndex=fs:(Lo===!1&&(X.tabIndex="-1"),t==="a"||t==="button"||t==="input"||t==="select"||t==="textarea"?(Lo===!1||D===!0)&&(X.tabIndex="-1"):On==="button"||On==="checkbox"||On==="link"||On==="radio"||On==="textbox"||On==="switch"?Lo!==!1&&(X.tabIndex="0"):Lo===!0&&(X.tabIndex="0"));var ll=De([cv,cc&&tz[cc]],ye({writingDirection:"ltr"},n)),qe=ll[0],Af=ll[1];qe&&(X.className=qe),Af&&(X.style=Af);var Pf=nl??uc;return Pf!=null&&(X.id=Pf),yf!=null&&(X["data-testid"]=yf),X.type==null&&t==="button"&&(X.type="button"),X},rz=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),mC=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","far","glk","he","iw","khw","ks","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]),gC=new Map;function iz(t){var e=gC.get(t);if(e)return e;var n=!1;if(Intl.Locale)try{var r=new Intl.Locale(t).maximize().script;n=rz.has(r)}catch{var i=t.split("-")[0];n=mC.has(i)}else{var s=t.split("-")[0];n=mC.has(s)}return gC.set(t,n),n}var sz={direction:"ltr",locale:"en-US"},nM=I.createContext(sz);function fy(t){return iz(t)?"rtl":"ltr"}function oz(t){var e=t.direction,n=t.locale,r=t.children,i=e||n;return i?ft.createElement(nM.Provider,{children:r,value:{direction:n?fy(n):e,locale:n}}):r}function KE(){return I.useContext(nM)}var Uu=(t,e,n)=>{var r;t&&t.constructor===String&&(r=EO.propsToAccessibilityComponent(e));var i=r||t,s=nz(i,e,n),o=ft.createElement(i,s),a=s.dir?ft.createElement(oz,{children:o,direction:s.dir,locale:s.lang}):o;return a},hS=t=>{if(t!=null){var e=t.nodeType===1;if(e&&typeof t.getBoundingClientRect=="function")return t.getBoundingClientRect()}},bh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},az=["ms","Moz","O","Webkit"],lz=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(bh).forEach(t=>{az.forEach(e=>{bh[lz(e,t)]=bh[t]})});function uz(t,e,n){var r=e==null||typeof e=="boolean"||e==="";return r?"":!n&&typeof e=="number"&&e!==0&&!(bh.hasOwnProperty(t)&&bh[t])?e+"px":(""+e).trim()}function cz(t,e){var n=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=uz(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var yC=t=>{var e=t.offsetHeight,n=t.offsetWidth,r=t.offsetLeft,i=t.offsetTop;for(t=t.offsetParent;t&&t.nodeType===1;)r+=t.offsetLeft+t.clientLeft-t.scrollLeft,i+=t.offsetTop+t.clientTop-t.scrollTop,t=t.offsetParent;return i-=window.scrollY,r-=window.scrollX,{width:n,height:e,top:i,left:r}},vC=(t,e,n)=>{var r=e||t&&t.parentNode;t&&r&&setTimeout(()=>{if(t.isConnected&&r.isConnected){var i=yC(r),s=yC(t),o=s.height,a=s.left,l=s.top,u=s.width,c=a-i.left,d=l-i.top;n(c,d,u,o,a,l)}},0)},hz={A:!0,BODY:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0},Vi={blur(t){try{t.blur()}catch{}},focus(t){try{var e=t.nodeName;t.getAttribute("tabIndex")==null&&t.isContentEditable!==!0&&hz[e]==null&&t.setAttribute("tabIndex","-1"),t.focus()}catch{}},measure(t,e){vC(t,null,e)},measureInWindow(t,e){t&&setTimeout(()=>{var n=hS(t),r=n.height,i=n.left,s=n.top,o=n.width;e(i,s,o,r)},0)},measureLayout(t,e,n,r){vC(t,e,r)},updateView(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];switch(n){case"style":{cz(t,r);break}case"class":case"className":{t.setAttribute("class",r);break}case"text":case"value":t.value=r;break;default:t.setAttribute(n,r)}}},configureNextLayoutAnimation(t,e){e()},setLayoutAnimationEnabledExperimental(){}},dz={OS:"web"};function ln(){return ln=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ln.apply(null,arguments)}var qE={children:!0,dataSet:!0,dir:!0,id:!0,ref:!0,suppressHydrationWarning:!0,tabIndex:!0,testID:!0,focusable:!0,nativeID:!0},GE={"aria-activedescendant":!0,"aria-atomic":!0,"aria-autocomplete":!0,"aria-busy":!0,"aria-checked":!0,"aria-colcount":!0,"aria-colindex":!0,"aria-colspan":!0,"aria-controls":!0,"aria-current":!0,"aria-describedby":!0,"aria-details":!0,"aria-disabled":!0,"aria-errormessage":!0,"aria-expanded":!0,"aria-flowto":!0,"aria-haspopup":!0,"aria-hidden":!0,"aria-invalid":!0,"aria-keyshortcuts":!0,"aria-label":!0,"aria-labelledby":!0,"aria-level":!0,"aria-live":!0,"aria-modal":!0,"aria-multiline":!0,"aria-multiselectable":!0,"aria-orientation":!0,"aria-owns":!0,"aria-placeholder":!0,"aria-posinset":!0,"aria-pressed":!0,"aria-readonly":!0,"aria-required":!0,role:!0,"aria-roledescription":!0,"aria-rowcount":!0,"aria-rowindex":!0,"aria-rowspan":!0,"aria-selected":!0,"aria-setsize":!0,"aria-sort":!0,"aria-valuemax":!0,"aria-valuemin":!0,"aria-valuenow":!0,"aria-valuetext":!0,accessibilityActiveDescendant:!0,accessibilityAtomic:!0,accessibilityAutoComplete:!0,accessibilityBusy:!0,accessibilityChecked:!0,accessibilityColumnCount:!0,accessibilityColumnIndex:!0,accessibilityColumnSpan:!0,accessibilityControls:!0,accessibilityCurrent:!0,accessibilityDescribedBy:!0,accessibilityDetails:!0,accessibilityDisabled:!0,accessibilityErrorMessage:!0,accessibilityExpanded:!0,accessibilityFlowTo:!0,accessibilityHasPopup:!0,accessibilityHidden:!0,accessibilityInvalid:!0,accessibilityKeyShortcuts:!0,accessibilityLabel:!0,accessibilityLabelledBy:!0,accessibilityLevel:!0,accessibilityLiveRegion:!0,accessibilityModal:!0,accessibilityMultiline:!0,accessibilityMultiSelectable:!0,accessibilityOrientation:!0,accessibilityOwns:!0,accessibilityPlaceholder:!0,accessibilityPosInSet:!0,accessibilityPressed:!0,accessibilityReadOnly:!0,accessibilityRequired:!0,accessibilityRole:!0,accessibilityRoleDescription:!0,accessibilityRowCount:!0,accessibilityRowIndex:!0,accessibilityRowSpan:!0,accessibilitySelected:!0,accessibilitySetSize:!0,accessibilitySort:!0,accessibilityValueMax:!0,accessibilityValueMin:!0,accessibilityValueNow:!0,accessibilityValueText:!0},QE={onClick:!0,onAuxClick:!0,onContextMenu:!0,onGotPointerCapture:!0,onLostPointerCapture:!0,onPointerCancel:!0,onPointerDown:!0,onPointerEnter:!0,onPointerMove:!0,onPointerLeave:!0,onPointerOut:!0,onPointerOver:!0,onPointerUp:!0},XE={onBlur:!0,onFocus:!0},YE={onKeyDown:!0,onKeyDownCapture:!0,onKeyUp:!0,onKeyUpCapture:!0},JE={onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0},ZE={onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0},eT={style:!0};function tT(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&e[r]===!0&&(n[r]=t[r]);return n}var dS=At?I.useLayoutEffect:I.useEffect,fS="__reactLayoutHandler",Jv=null;function fz(){return At&&typeof window.ResizeObserver<"u"&&Jv==null&&(Jv=new window.ResizeObserver(function(t){t.forEach(e=>{var n=e.target,r=n[fS];typeof r=="function"&&Vi.measure(n,(i,s,o,a,l,u)=>{var c={nativeEvent:{layout:{x:i,y:s,width:o,height:a,left:l,top:u}},timeStamp:Date.now()};Object.defineProperty(c.nativeEvent,"target",{enumerable:!0,get:()=>e.target}),r(c)})})})),Jv}function nT(t,e){var n=fz();dS(()=>{var r=t.current;r!=null&&(r[fS]=e)},[t,e]),dS(()=>{var r=t.current;return r!=null&&n!=null&&(typeof r[fS]=="function"?n.observe(r):n.unobserve(r)),()=>{r!=null&&n!=null&&n.unobserve(r)}},[t,n])}function rM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){e.forEach(s=>{if(s!=null){if(typeof s=="function"){s(i);return}if(typeof s=="object"){s.current=i;return}console.error("mergeRefs cannot handle Refs of type boolean, number or string, received ref "+String(s))}})}}function $d(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.useMemo(()=>rM(...e),[...e])}var _C=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():Object.freeze({});function pz(t){var e=I.useRef(_C);return e.current===_C&&(e.current=t()),e.current}function rT(t){t.pointerEvents,t.style;var e=pz(()=>n=>{n!=null&&(n.measure=r=>Vi.measure(n,r),n.measureLayout=(r,i,s)=>Vi.measureLayout(n,r,s,i),n.measureInWindow=r=>Vi.measureInWindow(n,r))});return e}var wC=()=>{},mz={},gz=[];function SC(t){return t>20?t%20:t}function iM(t,e){var n,r=!1,i,s,o=t.changedTouches,a=t.type,l=t.metaKey===!0,u=t.shiftKey===!0,c=o&&o[0].force||0,d=SC(o&&o[0].identifier||0),f=o&&o[0].clientX||t.clientX,p=o&&o[0].clientY||t.clientY,g=o&&o[0].pageX||t.pageX,E=o&&o[0].pageY||t.pageY,b=typeof t.preventDefault=="function"?t.preventDefault.bind(t):wC,S=t.timeStamp;function y(T){return Array.prototype.slice.call(T).map(v=>({force:v.force,identifier:SC(v.identifier),get locationX(){return O(v.clientX)},get locationY(){return k(v.clientY)},pageX:v.pageX,pageY:v.pageY,target:v.target,timestamp:S}))}if(o!=null)i=y(o),s=y(t.touches);else{var w=[{force:c,identifier:d,get locationX(){return O(f)},get locationY(){return k(p)},pageX:g,pageY:E,target:t.target,timestamp:S}];i=w,s=a==="mouseup"||a==="dragstart"?gz:w}var x={bubbles:!0,cancelable:!0,currentTarget:null,defaultPrevented:t.defaultPrevented,dispatchConfig:mz,eventPhase:t.eventPhase,isDefaultPrevented(){return t.defaultPrevented},isPropagationStopped(){return r},isTrusted:t.isTrusted,nativeEvent:{altKey:!1,ctrlKey:!1,metaKey:l,shiftKey:u,changedTouches:i,force:c,identifier:d,get locationX(){return O(f)},get locationY(){return k(p)},pageX:g,pageY:E,target:t.target,timestamp:S,touches:s,type:a},persist:wC,preventDefault:b,stopPropagation(){r=!0},target:t.target,timeStamp:S,touchHistory:e.touchHistory};function O(T){if(n=n||hS(x.currentTarget),n)return T-n.left}function k(T){if(n=n||hS(x.currentTarget),n)return T-n.top}return x}var yz="mousedown",vz="mousemove",_z="mouseup",wz="dragstart",Sz="touchstart",Ez="touchmove",Tz="touchend",bz="touchcancel",Iz="scroll",Rz="select",Cz="selectionchange";function sM(t){return t===Sz||t===yz}function oM(t){return t===Ez||t===vz}function aM(t){return t===Tz||t===_z||lM(t)}function lM(t){return t===bz||t===wz}function xz(t){return t===Iz}function Az(t){return t===Rz||t===Cz}function Pz(){var t=window.getSelection(),e=t.toString(),n=t.anchorNode,r=t.focusNode,i=n&&n.nodeType===window.Node.TEXT_NODE||r&&r.nodeType===window.Node.TEXT_NODE;return e.length>=1&&e!==`
`&&i}var uM="__reactResponderId";function kz(t){if(t.type==="selectionchange"){var e=window.getSelection().anchorNode;return EC(e)}else{var n=t.composedPath!=null?t.composedPath():EC(t.target);return n}}function EC(t){for(var e=[];t!=null&&t!==document.body;)e.push(t),t=t.parentNode;return e}function Dz(t){return t!=null?t[uM]:null}function Oz(t,e){t!=null&&(t[uM]=e)}function Mz(t){for(var e=[],n=[],r=kz(t),i=0;i<r.length;i++){var s=r[i],o=Dz(s);o!=null&&(e.push(o),n.push(s))}return{idPath:e,nodePath:n}}function Lz(t,e){var n=t.length,r=e.length;if(n===0||r===0||t[n-1]!==e[r-1])return null;var i=t[0],s=0,o=e[0],a=0;n-r>0&&(s=n-r,i=t[s],n=r),r-n>0&&(a=r-n,o=e[a],r=n);for(var l=n;l--;){if(i===o)return i;i=t[s++],o=e[a++]}return null}function Nz(t,e){if(!e||e.length===0)return!1;for(var n=0;n<e.length;n++){var r=e[n].target;if(r!=null&&t.contains(r))return!0}return!1}function Vz(t){return t.type==="selectionchange"?Pz():t.type==="select"}function Fz(t){var e=t.altKey,n=t.button,r=t.buttons,i=t.ctrlKey,s=t.type,o=s==="touchstart"||s==="touchmove",a=s==="mousedown"&&(n===0||r===1),l=s==="mousemove"&&r===1,u=e===!1&&i===!1;return!!(o||a&&u||l&&u)}var TC=20;function cr(t){return t.timeStamp||t.timestamp}function Bz(t){return{touchActive:!0,startPageX:t.pageX,startPageY:t.pageY,startTimeStamp:cr(t),currentPageX:t.pageX,currentPageY:t.pageY,currentTimeStamp:cr(t),previousPageX:t.pageX,previousPageY:t.pageY,previousTimeStamp:cr(t)}}function jz(t,e){t.touchActive=!0,t.startPageX=e.pageX,t.startPageY=e.pageY,t.startTimeStamp=cr(e),t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=cr(e),t.previousPageX=e.pageX,t.previousPageY=e.pageY,t.previousTimeStamp=cr(e)}function iT(t){var e=t.identifier;return e==null&&console.error("Touch object is missing identifier."),e}function $z(t,e){var n=iT(t),r=e.touchBank[n];r?jz(r,t):e.touchBank[n]=Bz(t),e.mostRecentTimeStamp=cr(t)}function Uz(t,e){var n=e.touchBank[iT(t)];n?(n.touchActive=!0,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=cr(t),e.mostRecentTimeStamp=cr(t)):console.warn(`Cannot record touch move without a touch start.
`,"Touch Move: "+cM(t)+`
`,"Touch Bank: "+hM(e))}function zz(t,e){var n=e.touchBank[iT(t)];n?(n.touchActive=!1,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=cr(t),e.mostRecentTimeStamp=cr(t)):console.warn(`Cannot record touch end without a touch start.
`,"Touch End: "+cM(t)+`
`,"Touch Bank: "+hM(e))}function cM(t){return JSON.stringify({identifier:t.identifier,pageX:t.pageX,pageY:t.pageY,timestamp:cr(t)})}function hM(t){var e=t.touchBank,n=JSON.stringify(e.slice(0,TC));return e.length>TC&&(n+=" (original size: "+e.length+")"),n}class Wz{constructor(){this._touchHistory={touchBank:[],numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0}}recordTouchTrack(e,n){var r=this._touchHistory;if(oM(e))n.changedTouches.forEach(a=>Uz(a,r));else if(sM(e))n.changedTouches.forEach(a=>$z(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1&&(r.indexOfSingleActiveTouch=n.touches[0].identifier);else if(aM(e)&&(n.changedTouches.forEach(a=>zz(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1))for(var i=r.touchBank,s=0;s<i.length;s++){var o=i[s];if(o!=null&&o.touchActive){r.indexOfSingleActiveTouch=s;break}}}get touchHistory(){return this._touchHistory}}var Hz={},bC=["onStartShouldSetResponderCapture","onStartShouldSetResponder",{bubbles:!0}],IC=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder",{bubbles:!0}],Kz=["onScrollShouldSetResponderCapture","onScrollShouldSetResponder",{bubbles:!1}],qz={touchstart:bC,mousedown:bC,touchmove:IC,mousemove:IC,scroll:Kz},pS={id:null,idPath:null,node:null},Qm=new Map,Os=!1,Gr=0,ei={id:null,node:null,idPath:null},mS=new Wz;function ud(t){ei=t}function cd(t){var e=Qm.get(t);return e??Hz}function Zv(t){var e=t.type,n=t.target;if(e==="touchstart"&&(Os=!0),(e==="touchmove"||Gr>1)&&(Os=!1),!(e==="mousedown"&&Os||e==="mousemove"&&Os||e==="mousemove"&&Gr<1)){if(Os&&e==="mouseup"){Gr===0&&(Os=!1);return}var r=sM(e)&&Fz(t),i=oM(e),s=aM(e),o=xz(e),a=Az(e),l=iM(t,mS);(r||i||s)&&(t.touches?Gr=t.touches.length:r?Gr=1:s&&(Gr=0),mS.recordTouchTrack(e,l.nativeEvent));var u=Mz(t),c=!1,d;if(r||i||o&&Gr>0){var f=ei.idPath,p=u.idPath;if(f!=null&&p!=null){var g=Lz(f,p);if(g!=null){var E=p.indexOf(g),b=E+(g===ei.id?1:0);u={idPath:p.slice(b),nodePath:u.nodePath.slice(b)}}else u=null}u!=null&&(d=Gz(u,t,l),d!=null&&(Qz(l,d),c=!0))}if(ei.id!=null&&ei.node!=null){var S=ei,y=S.id,w=S.node,x=cd(y),O=x.onResponderStart,k=x.onResponderMove,T=x.onResponderEnd,v=x.onResponderRelease,R=x.onResponderTerminate,C=x.onResponderTerminationRequest;if(l.bubbles=!1,l.cancelable=!1,l.currentTarget=w,r)O!=null&&(l.dispatchConfig.registrationName="onResponderStart",O(l));else if(i)k!=null&&(l.dispatchConfig.registrationName="onResponderMove",k(l));else{var A=lM(e)||e==="contextmenu"||e==="blur"&&n===window||e==="blur"&&n.contains(w)&&t.relatedTarget!==w||o&&Gr===0||o&&n.contains(w)&&n!==w||a&&Vz(t),L=s&&!A&&!Nz(w,t.touches);if(s&&T!=null&&(l.dispatchConfig.registrationName="onResponderEnd",T(l)),L&&(v!=null&&(l.dispatchConfig.registrationName="onResponderRelease",v(l)),ud(pS)),A){var D=!0;(e==="contextmenu"||e==="scroll"||e==="selectionchange")&&(c?D=!1:C!=null&&(l.dispatchConfig.registrationName="onResponderTerminationRequest",C(l)===!1&&(D=!1))),D&&(R!=null&&(l.dispatchConfig.registrationName="onResponderTerminate",R(l)),ud(pS),Os=!1,Gr=0)}}}}}function Gz(t,e,n){var r=qz[e.type];if(r!=null){for(var i=t.idPath,s=t.nodePath,o=r[0],a=r[1],l=r[2].bubbles,u=function(k,T,v){var R=cd(k),C=R[v];if(C!=null&&(n.currentTarget=T,C(n)===!0)){var A=i.slice(i.indexOf(k));return{id:k,node:T,idPath:A}}},c=i.length-1;c>=0;c--){var d=i[c],f=s[c],p=u(d,f,o);if(p!=null)return p;if(n.isPropagationStopped()===!0)return}if(l)for(var g=0;g<i.length;g++){var E=i[g],b=s[g],S=u(E,b,a);if(S!=null)return S;if(n.isPropagationStopped()===!0)return}else{var y=i[0],w=s[0],x=e.target;if(x===w)return u(y,w,a)}}}function Qz(t,e){var n=ei,r=n.id,i=n.node,s=e.id,o=e.node,a=cd(s),l=a.onResponderGrant,u=a.onResponderReject;if(t.bubbles=!1,t.cancelable=!1,t.currentTarget=o,r==null)l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),ud(e);else{var c=cd(r),d=c.onResponderTerminate,f=c.onResponderTerminationRequest,p=!0;f!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminationRequest",f(t)===!1&&(p=!1)),p?(d!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminate",d(t)),l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),ud(e)):u!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderReject",u(t))}}var Xz=["blur","scroll"],Yz=["mousedown","mousemove","mouseup","dragstart","touchstart","touchmove","touchend","touchcancel","contextmenu","select","selectionchange"];function Jz(){At&&window.__reactResponderSystemActive==null&&(window.addEventListener("blur",Zv),Yz.forEach(t=>{document.addEventListener(t,Zv)}),Xz.forEach(t=>{document.addEventListener(t,Zv,!0)}),window.__reactResponderSystemActive=!0)}function Zz(t,e,n){Oz(e,t),Qm.set(t,n)}function RC(t){ei.id===t&&e5(),Qm.has(t)&&Qm.delete(t)}function e5(){var t=ei,e=t.id,n=t.node;if(e!=null&&n!=null){var r=cd(e),i=r.onResponderTerminate;if(i!=null){var s=iM({},mS);s.currentTarget=n,i(s)}ud(pS)}Os=!1,Gr=0}function t5(){return ei.node}var n5={},r5=0;function i5(t){var e=I.useRef(null);return e.current==null&&(e.current=t()),e.current}function sT(t,e){e===void 0&&(e=n5);var n=i5(()=>r5++),r=I.useRef(!1);I.useEffect(()=>(Jz(),()=>{RC(n)}),[n]),I.useEffect(()=>{var i=e,s=i.onMoveShouldSetResponder,o=i.onMoveShouldSetResponderCapture,a=i.onScrollShouldSetResponder,l=i.onScrollShouldSetResponderCapture,u=i.onSelectionChangeShouldSetResponder,c=i.onSelectionChangeShouldSetResponderCapture,d=i.onStartShouldSetResponder,f=i.onStartShouldSetResponderCapture,p=s!=null||o!=null||a!=null||l!=null||u!=null||c!=null||d!=null||f!=null,g=t.current;p?(Zz(n,g,e),r.current=!0):r.current&&(RC(n),r.current=!1)},[e,t,n]),I.useDebugValue({isResponder:t.current===t5()}),I.useDebugValue(e)}var Xm=I.createContext(!1),s5=["hrefAttrs","onLayout","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture"],o5=Object.assign({},qE,GE,QE,XE,YE,JE,ZE,eT,{href:!0,lang:!0,onScroll:!0,onWheel:!0,pointerEvents:!0}),a5=t=>tT(t,o5),Q=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.onLayout,i=t.onMoveShouldSetResponder,s=t.onMoveShouldSetResponderCapture,o=t.onResponderEnd,a=t.onResponderGrant,l=t.onResponderMove,u=t.onResponderReject,c=t.onResponderRelease,d=t.onResponderStart,f=t.onResponderTerminate,p=t.onResponderTerminationRequest,g=t.onScrollShouldSetResponder,E=t.onScrollShouldSetResponderCapture,b=t.onSelectionChangeShouldSetResponder,S=t.onSelectionChangeShouldSetResponderCapture,y=t.onStartShouldSetResponder,w=t.onStartShouldSetResponderCapture,x=Pn(t,s5),O=I.useContext(Xm),k=I.useRef(null),T=KE(),v=T.direction;nT(k,r),sT(k,{onMoveShouldSetResponder:i,onMoveShouldSetResponderCapture:s,onResponderEnd:o,onResponderGrant:a,onResponderMove:l,onResponderReject:u,onResponderRelease:c,onResponderStart:d,onResponderTerminate:f,onResponderTerminationRequest:p,onScrollShouldSetResponder:g,onScrollShouldSetResponderCapture:E,onSelectionChangeShouldSetResponder:b,onSelectionChangeShouldSetResponderCapture:S,onStartShouldSetResponder:y,onStartShouldSetResponderCapture:w});var R="div",C=t.lang!=null?fy(t.lang):null,A=t.dir||C,L=A||v,D=a5(x);if(D.dir=A,D.style=[CC.view$raw,O&&CC.inline,t.style],t.href!=null&&(R="a",n!=null)){var de=n.download,fe=n.rel,je=n.target;de!=null&&(D.download=de),fe!=null&&(D.rel=fe),typeof je=="string"&&(D.target=je.charAt(0)!=="_"?"_"+je:je)}var Re=rT(D),$=$d(k,Re,e);return D.ref=$,Uu(R,D,{writingDirection:L})});Q.displayName="View";var CC=De.create({view$raw:{alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",zIndex:0},inline:{display:"inline-flex"}}),l5=function t(e,n,r){if(r===void 0&&(r=-1),r===0)return!0;if(e===n||typeof e=="function"&&typeof n=="function")return!1;if(typeof e!="object"||e===null)return e!==n;if(typeof n!="object"||n===null||e.constructor!==n.constructor)return!0;if(Array.isArray(e)){var i=e.length;if(n.length!==i)return!0;for(var s=0;s<i;s++)if(t(e[s],n[s],r-1))return!0}else{for(var o in e)if(t(e[o],n[o],r-1))return!0;for(var a in n)if(e[a]===void 0&&n[a]!==void 0)return!0}return!1};function u5(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!t){var s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;s=new Error(e.replace(/%s/g,function(){return String(r[o++])})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}var c5=u5;const ge=Fu(c5);function xC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function h5(t,e){if(t){if(typeof t=="string")return xC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xC(t,e):void 0}}function aa(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=h5(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d5=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function f5(t){t.colors,t.enabled,t.onRefresh,t.progressBackgroundColor,t.progressViewOffset,t.refreshing,t.size,t.tintColor,t.title,t.titleColor;var e=Pn(t,d5);return ft.createElement(Q,e)}var la={window:{fontScale:1,height:0,scale:1,width:0},screen:{fontScale:1,height:0,scale:1,width:0}},Vs={},AC=At;function dM(){if(At){var t=window,e,n;if(t.visualViewport){var r=t.visualViewport;e=Math.round(r.height*r.scale),n=Math.round(r.width*r.scale)}else{var i=t.document.documentElement;e=i.clientHeight,n=i.clientWidth}la.window={fontScale:1,height:e,scale:t.devicePixelRatio||1,width:n},la.screen={fontScale:1,height:t.screen.height,scale:t.devicePixelRatio||1,width:t.screen.width}}}function PC(){dM(),Array.isArray(Vs.change)&&Vs.change.forEach(t=>t(la))}class Ym{static get(e){return AC&&(AC=!1,dM()),ge(la[e],"No dimension set for key "+e),la[e]}static set(e){e&&(At?ge(!1,"Dimensions cannot be set in the browser"):(e.screen!=null&&(la.screen=e.screen),e.window!=null&&(la.window=e.window)))}static addEventListener(e,n){return Vs[e]=Vs[e]||[],Vs[e].push(n),{remove:()=>{this.removeEventListener(e,n)}}}static removeEventListener(e,n){Array.isArray(Vs[e])&&(Vs[e]=Vs[e].filter(r=>r!==n))}}At&&(window.visualViewport?window.visualViewport.addEventListener("resize",PC,!1):window.addEventListener("resize",PC,!1));var Di={_currentlyFocusedNode:null,currentlyFocusedField(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput(t){t!==null&&(this._currentlyFocusedNode=t,document.activeElement!==t&&Vi.focus(t))},blurTextInput(t){t!==null&&(this._currentlyFocusedNode=null,document.activeElement===t&&Vi.blur(t))}},p5=()=>{Di.blurTextInput(Di.currentlyFocusedField())},m5=["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"];function kC(t){return{nativeEvent:{contentOffset:{get x(){return t.target.scrollLeft},get y(){return t.target.scrollTop}},contentSize:{get height(){return t.target.scrollHeight},get width(){return t.target.scrollWidth}},layoutMeasurement:{get height(){return t.target.offsetHeight},get width(){return t.target.offsetWidth}}},timeStamp:Date.now()}}function g5(t,e){var n=Date.now()-t;return e>0&&n>=e}var y5=I.forwardRef((t,e)=>{var n=t.onScroll,r=t.onTouchMove,i=t.onWheel,s=t.scrollEnabled,o=s===void 0?!0:s,a=t.scrollEventThrottle,l=a===void 0?0:a,u=t.showsHorizontalScrollIndicator,c=t.showsVerticalScrollIndicator,d=t.style,f=Pn(t,m5),p=I.useRef({isScrolling:!1,scrollLastTick:0}),g=I.useRef(null),E=I.useRef(null);function b(k){return T=>{o&&k&&k(T)}}function S(k){k.stopPropagation(),k.target===E.current&&(k.persist(),g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{x(k)},100),p.current.isScrolling?g5(p.current.scrollLastTick,l)&&w(k):y(k))}function y(k){p.current.isScrolling=!0,w(k)}function w(k){p.current.scrollLastTick=Date.now(),n&&n(kC(k))}function x(k){p.current.isScrolling=!1,n&&n(kC(k))}var O=u===!1||c===!1;return I.createElement(Q,ln({},f,{onScroll:S,onTouchMove:b(r),onWheel:b(i),ref:$d(E,e),style:[d,!o&&DC.scrollDisabled,O&&DC.hideScrollbar]}))}),DC=De.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});function py(t){return function(){return t}}var za=function(){};za.thatReturns=py;za.thatReturnsFalse=py(!1);za.thatReturnsTrue=py(!0);za.thatReturnsNull=py(null);za.thatReturnsThis=function(){return this};za.thatReturnsArgument=function(t){return t};var v5=za,_5=v5,w5=_5,S5=w5;const E5=Fu(S5);var T5=["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll","centerContent"],OC={},b5=16;class I5 extends ft.Component{constructor(){super(...arguments),this._scrollNodeRef=null,this._innerViewRef=null,this.isTouching=!1,this.lastMomentumScrollBeginTime=0,this.lastMomentumScrollEndTime=0,this.observedScrollSinceBecomingResponder=!1,this.becameResponderWhileAnimating=!1,this.scrollResponderHandleScrollShouldSetResponder=()=>this.isTouching,this.scrollResponderHandleStartShouldSetResponderCapture=e=>this.scrollResponderIsAnimating(),this.scrollResponderHandleTerminationRequest=()=>!this.observedScrollSinceBecomingResponder,this.scrollResponderHandleTouchEnd=e=>{var n=e.nativeEvent;this.isTouching=n.touches.length!==0,this.props.onTouchEnd&&this.props.onTouchEnd(e)},this.scrollResponderHandleResponderRelease=e=>{this.props.onResponderRelease&&this.props.onResponderRelease(e);var n=Di.currentlyFocusedField();!this.props.keyboardShouldPersistTaps&&n!=null&&e.target!==n&&!this.observedScrollSinceBecomingResponder&&!this.becameResponderWhileAnimating&&(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),Di.blurTextInput(n))},this.scrollResponderHandleScroll=e=>{this.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},this.scrollResponderHandleResponderGrant=e=>{this.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},this.scrollResponderHandleScrollBeginDrag=e=>{this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},this.scrollResponderHandleScrollEndDrag=e=>{this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},this.scrollResponderHandleMomentumScrollBegin=e=>{this.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},this.scrollResponderHandleMomentumScrollEnd=e=>{this.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},this.scrollResponderHandleTouchStart=e=>{this.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},this.scrollResponderHandleTouchMove=e=>{this.props.onTouchMove&&this.props.onTouchMove(e)},this.scrollResponderIsAnimating=()=>{var e=Date.now(),n=e-this.lastMomentumScrollEndTime,r=n<b5||this.lastMomentumScrollEndTime<this.lastMomentumScrollBeginTime;return r},this.scrollResponderScrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||OC;e=i.x,n=i.y,r=i.animated}var s=this.getScrollableNode(),o=e||0,a=n||0;s!=null&&(typeof s.scroll=="function"?s.scroll({top:a,left:o,behavior:r?"smooth":"auto"}):(s.scrollLeft=o,s.scrollTop=a))},this.scrollResponderZoomTo=(e,n)=>{ge("zoomToRect is not implemented")},this.scrollResponderScrollNativeHandleToKeyboard=(e,n,r)=>{this.additionalScrollOffset=n||0,this.preventNegativeScrollOffset=!!r,Vi.measureLayout(e,this.getInnerViewNode(),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},this.scrollResponderInputMeasureAndScrollToKeyboard=(e,n,r,i)=>{var s=Ym.get("window").height;this.keyboardWillOpenTo&&(s=this.keyboardWillOpenTo.endCoordinates.screenY);var o=n-s+i+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(o=Math.max(0,o)),this.scrollResponderScrollTo({x:0,y:o,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},this.scrollResponderKeyboardWillShow=e=>{this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},this.scrollResponderKeyboardWillHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},this.scrollResponderKeyboardDidShow=e=>{e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},this.scrollResponderKeyboardDidHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)},this.flashScrollIndicators=()=>{this.scrollResponderFlashScrollIndicators()},this.getScrollResponder=()=>this,this.getScrollableNode=()=>this._scrollNodeRef,this.getInnerViewRef=()=>this._innerViewRef,this.getInnerViewNode=()=>this._innerViewRef,this.getNativeScrollRef=()=>this._scrollNodeRef,this.scrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||OC;n=i.x,e=i.y,r=i.animated}this.scrollResponderScrollTo({x:n||0,y:e||0,animated:r!==!1})},this.scrollToEnd=e=>{var n=(e&&e.animated)!==!1,r=this.props.horizontal,i=this.getScrollableNode(),s=r?i.scrollWidth:0,o=r?0:i.scrollHeight;this.scrollResponderScrollTo({x:s,y:o,animated:n})},this._handleContentOnLayout=e=>{var n=e.nativeEvent.layout,r=n.width,i=n.height;this.props.onContentSizeChange(r,i)},this._handleScroll=e=>{this.props.keyboardDismissMode==="on-drag"&&p5(),this.scrollResponderHandleScroll(e)},this._setInnerViewRef=e=>{this._innerViewRef=e},this._setScrollNodeRef=e=>{this._scrollNodeRef=e,e!=null&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard);var n=rM(this.props.forwardedRef);n(e)}}scrollResponderHandleStartShouldSetResponder(){return!1}scrollResponderHandleResponderReject(){E5(!1,"ScrollView doesn't take rejection well - scrolls anyway")}scrollResponderFlashScrollIndicators(){}scrollResponderTextInputFocusError(e){console.error("Error measuring text field: ",e)}render(){var e=this.props,n=e.contentContainerStyle,r=e.horizontal,i=e.onContentSizeChange,s=e.refreshControl,o=e.stickyHeaderIndices,a=e.pagingEnabled;e.forwardedRef,e.keyboardDismissMode,e.onScroll;var l=e.centerContent,u=Pn(e,T5),c={};i&&(c={onLayout:this._handleContentOnLayout});var d=!r&&Array.isArray(o),f=d||a?ft.Children.map(this.props.children,(w,x)=>{var O=d&&o.indexOf(x)>-1;return w!=null&&(O||a)?ft.createElement(Q,{style:[O&&Rs.stickyHeader,a&&Rs.pagingEnabledChild]},w):w}):this.props.children,p=ft.createElement(Q,ln({},c,{children:f,collapsable:!1,ref:this._setInnerViewRef,style:[r&&Rs.contentContainerHorizontal,l&&Rs.contentContainerCenterContent,n]})),g=r?Rs.baseHorizontal:Rs.baseVertical,E=r?Rs.pagingEnabledHorizontal:Rs.pagingEnabledVertical,b=ye(ye({},u),{},{style:[g,a&&E,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),S=y5;ge(S!==void 0,"ScrollViewClass must not be undefined");var y=ft.createElement(S,ln({},b,{ref:this._setScrollNodeRef}),p);return s?ft.cloneElement(s,{style:b.style},y):y}}var MC={flexGrow:1,flexShrink:1,transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},Rs=De.create({baseVertical:ye(ye({},MC),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:ye(ye({},MC),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},contentContainerCenterContent:{justifyContent:"center",flexGrow:1},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),kr=ft.forwardRef((t,e)=>ft.createElement(I5,ln({},t,{forwardedRef:e})));kr.displayName="ScrollView";class R5{constructor(e){var n=e.onMoreTasks;this._onMoreTasks=n,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(n=>this.enqueue(n))}cancelTasks(e){this._queueStack=this._queueStack.map(n=>ye(ye({},n),{},{tasks:n.tasks.filter(r=>e.indexOf(r)===-1)})).filter((n,r)=>n.tasks.length>0||r===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var n=e.shift();try{typeof n=="object"&&n.gen?this._genPromise(n):typeof n=="object"&&n.run?n.run():(ge(typeof n=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(n,null,2)),n())}catch(r){throw r.message="TaskQueue: Error with task "+(n.name||"")+": "+r.message,r}}}_getCurrentQueue(){var e=this._queueStack.length-1,n=this._queueStack[e];return n.popable&&n.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}_genPromise(e){var n=this._queueStack.push({tasks:[],popable:!1}),r=n-1,i=this._queueStack[r];e.gen().then(()=>{i.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(s=>{setTimeout(()=>{throw s.message="TaskQueue: Error resolving Promise in task "+e.name+": "+s.message,s},0)})}}class C5{constructor(){this._registry={}}addListener(e,n,r){var i=x5(this._registry,e),s={context:r,listener:n,remove(){i.delete(s)}};return i.add(s),s}emit(e){var n=this._registry[e];if(n!=null){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var o=0,a=[...n];o<a.length;o++){var l=a[o];l.listener.apply(l.context,i)}}}removeAllListeners(e){e==null?this._registry={}:delete this._registry[e]}listenerCount(e){var n=this._registry[e];return n==null?0:n.size}}function x5(t,e){var n=t[e];return n==null&&(n=new Set,t[e]=n),n}var A5=function(e,n){return setTimeout(()=>{var r=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}})},1)},P5=At&&typeof window.requestIdleCallback<"u",k5=P5?window.requestIdleCallback:A5,Jm=new C5,gS={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(t){var e=[],n=new Promise(r=>{Ih(),t&&e.push(t),e.push({run:r,name:"resolve "+(t&&t.name||"?")}),eg.enqueueTasks(e)});return{then:n.then.bind(n),done:n.then.bind(n),cancel:()=>{eg.cancelTasks(e)}}},createInteractionHandle(){Ih();var t=++D5;return Zm.add(t),t},clearInteractionHandle(t){ge(!!t,"Must provide a handle to clear."),Ih(),Zm.delete(t),yS.add(t)},addListener:Jm.addListener.bind(Jm),setDeadline(t){tg=t}},rp=new Set,Zm=new Set,yS=new Set,eg=new R5({onMoreTasks:Ih}),Up=0,D5=0,tg=-1;function Ih(){Up||(tg>0?Up=setTimeout(LC):Up=k5(LC))}function LC(){Up=0;var t=rp.size;Zm.forEach(r=>rp.add(r)),yS.forEach(r=>rp.delete(r));var e=rp.size;if(t!==0&&e===0?Jm.emit(gS.Events.interactionComplete):t===0&&e!==0&&Jm.emit(gS.Events.interactionStart),e===0){for(var n=Date.now();eg.hasTasksToProcess();)if(eg.processNext(),tg>0&&Date.now()-n>=tg){Ih();break}}Zm.clear(),yS.clear()}class O5{constructor(e,n){this._delay=n,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=gS.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function NC(t,e,n){return e<t?t:e>n?n:e}function M5(){return console.log(...arguments)}class L5{constructor(e){ge(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(ge(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var n=this._findRegion(e.first),r=n[0],i=n[1],s=this._findRegion(e.last),o=s[0],a=s[1];if(!(i===a&&!r.isSpacer)){var l=[],u=[],c=ye(ye({},e),{},{isSpacer:!1});r.first<c.first&&(r.isSpacer?l.push({first:r.first,last:c.first-1,isSpacer:!0}):c.first=r.first),o.last>c.last&&(o.isSpacer?u.push({first:c.last+1,last:o.last,isSpacer:!0}):c.last=o.last);var d=[...l,c,...u],f=a-i+1;this._regions.splice(i,f,...d)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((n,r)=>n.first===e._regions[r].first&&n.last===e._regions[r].last&&n.isSpacer===e._regions[r].isSpacer)}_findRegion(e){for(var n=0,r=this._regions.length-1;n<=r;){var i=Math.floor((n+r)/2),s=this._regions[i];if(e>=s.first&&e<=s.last)return[s,i];e<s.first?r=i-1:e>s.last&&(n=i+1)}ge(!1,"A region was not found containing cellIdx "+e)}}class N5{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,n){var r;ge(!this._childrenToCellKey.has(e),"Trying to add already present child list");var i=(r=this._cellKeyToChildren.get(n))!==null&&r!==void 0?r:new Set;i.add(e),this._cellKeyToChildren.set(n,i),this._childrenToCellKey.set(e,n)}remove(e){var n=this._childrenToCellKey.get(e);ge(n!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var r=this._cellKeyToChildren.get(n);ge(r,"_cellKeyToChildren should contain cellKey"),r.delete(e),r.size===0&&this._cellKeyToChildren.delete(n)}forEach(e){for(var n=aa(this._cellKeyToChildren.values()),r;!(r=n()).done;)for(var i=r.value,s=aa(i),o;!(o=s()).done;){var a=o.value;e(a)}}forEachInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=aa(i),o;!(o=s()).done;){var a=o.value;n(a)}}anyInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=aa(i),o;!(o=s()).done;){var a=o.value;if(n(a))return!0}return!1}size(){return this._childrenToCellKey.size}}class VC{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var ip=[],FC=10,e_=null;class V5{static addListener(e){return e_===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),ip.push(e),{remove:()=>{ip=ip.filter(n=>e!==n)}}}static setSampleRate(e){e_=e}static setMinSampleCount(e){FC=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new VC,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(e_||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<FC){this._resetData();return}var n=global.performance.now()-e,r=ye(ye({},this._info),{},{total_time_spent:n});ip.forEach(i=>i(r)),this._resetData()}}}computeBlankness(e,n,r){if(!this._enabled||e.getItemCount(e.data)===0||n.last<n.first||this._samplesStartTime==null)return 0;var i=r.dOffset,s=r.offset,o=r.velocity,a=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(a),this._info.pixels_scrolled+=Math.round(Math.abs(i));var l=Math.round(Math.abs(o)*1e3),u=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=u-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=u-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var c=0,d=n.first,f=this._getFrameMetrics(d,e);d<=n.last&&(!f||!f.inLayout);)f=this._getFrameMetrics(d,e),d++;f&&d>0&&(c=Math.min(a,Math.max(0,f.offset-s)));for(var p=0,g=n.last,E=this._getFrameMetrics(g,e);g>=n.first&&(!E||!E.inLayout);)E=this._getFrameMetrics(g,e),g--;if(E&&g<e.getItemCount(e.data)-1){var b=E.offset+E.length;p=Math.min(a,Math.max(0,s+a-b))}var S=Math.round(c+p),y=S/a;return y>0?(this._anyBlankStartTime=u,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=S,y>.5&&(this._mostlyBlankStartTime=u,this._info.mostly_blank_count++)):(l<.01||Math.abs(i)<1)&&this.deactivateAndFlush(),y}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new VC,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class F5 extends I.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,n){typeof e=="function"?super.setState((r,i)=>{this._inAsyncStateUpdate=!0;var s;try{s=e(r,i)}catch(o){throw o}finally{this._inAsyncStateUpdate=!1}return s},n):super.setState(e,n)}_installSetStateHooks(){var e=this,n=this.props,r=this.state;Object.defineProperty(this,"props",{get(){return ge(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),n},set(i){n=i}}),Object.defineProperty(this,"state",{get(){return ge(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),r},set(i){r=i}})}}class BC{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,n,r,i,s){var o=e.getItemCount(e.data),a=this._config,l=a.itemVisiblePercentThreshold,u=a.viewAreaCoveragePercentThreshold,c=u!=null,d=c?u:l;ge(d!=null&&l!=null!=(u!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var f=[];if(o===0)return f;var p=-1,g=s||{first:0,last:o-1},E=g.first,b=g.last;if(b>=o)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:s,itemCount:o})),[];for(var S=E;S<=b;S++){var y=i(S,e);if(y){var w=y.offset-n,x=w+y.length;if(w<r&&x>0)p=S,B5(c,d,w,x,r,y.length)&&f.push(S);else if(p>=0)break}}return f}onUpdate(e,n,r,i,s,o,a){var l=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||l===0||!i(0,e))){var u=[];if(l&&(u=this.computeViewableItems(e,n,r,i,a)),!(this._viewableIndices.length===u.length&&this._viewableIndices.every((d,f)=>d===u[f])))if(this._viewableIndices=u,this._config.minimumViewTime){var c=setTimeout(()=>{this._timers.delete(c),this._onUpdateSync(e,u,o,s)},this._config.minimumViewTime);this._timers.add(c)}else this._onUpdateSync(e,u,o,s)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,n,r,i){n=n.filter(y=>this._viewableIndices.includes(y));for(var s=this._viewableItems,o=new Map(n.map(y=>{var w=i(y,!0,e);return[w.key,w]})),a=[],l=aa(o),u;!(u=l()).done;){var c=u.value,d=c[0],f=c[1];s.has(d)||a.push(f)}for(var p=aa(s),g;!(g=p()).done;){var E=g.value,b=E[0],S=E[1];o.has(b)||a.push(ye(ye({},S),{},{isViewable:!1}))}a.length>0&&(this._viewableItems=o,r({viewableItems:Array.from(o.values()),changed:a,viewabilityConfig:this._config}))}}function B5(t,e,n,r,i,s){if($5(n,r,i))return!0;var o=j5(n,r,i),a=100*(t?o/i:o/s);return a>=e}function j5(t,e,n){var r=Math.min(e,n)-Math.max(t,0);return Math.max(0,r)}function $5(t,e,n){return t>=0&&e<=n&&e>t}var ng=I.createContext(null);function U5(t){var e=t.children,n=t.value,r=I.useMemo(()=>({cellKey:null,getScrollMetrics:n.getScrollMetrics,horizontal:n.horizontal,getOutermostParentListRef:n.getOutermostParentListRef,registerAsNestedChild:n.registerAsNestedChild,unregisterAsNestedChild:n.unregisterAsNestedChild}),[n.getScrollMetrics,n.horizontal,n.getOutermostParentListRef,n.registerAsNestedChild,n.unregisterAsNestedChild]);return I.createElement(ng.Provider,{value:r},e)}function zp(t){var e=t.cellKey,n=t.children,r=I.useContext(ng),i=I.useMemo(()=>r==null?null:ye(ye({},r),{},{cellKey:e}),[r,e]);return I.createElement(ng.Provider,{value:i},n)}class z5 extends I.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!0})},unhighlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!1})},updateProps:(e,n)=>{var r=this.props,i=r.cellKey,s=r.prevCellKey;this.props.onUpdateSeparators([e==="leading"?s:i],n)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,n){return{separatorProps:ye(ye({},n.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(n=>({separatorProps:ye(ye({},n.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,n,r,i){if(e&&n&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),n)return I.createElement(n,{item:r,index:i,separators:this._separators});if(e)return e({item:r,index:i,separators:this._separators});ge(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,n=e.CellRendererComponent,r=e.ItemSeparatorComponent,i=e.ListItemComponent,s=e.cellKey,o=e.horizontal,a=e.item,l=e.index,u=e.inversionStyle,c=e.onCellFocusCapture,d=e.onCellLayout,f=e.renderItem,p=this._renderElement(f,i,a,l),g=I.isValidElement(r)?r:r&&I.createElement(r,this.state.separatorProps),E=u?o?[t_.rowReverse,u]:[t_.columnReverse,u]:o?[t_.row,u]:u,b=n?I.createElement(n,ln({cellKey:s,index:l,item:a,style:E,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g):I.createElement(Q,ln({style:E,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g);return I.createElement(zp,{cellKey:this.props.cellKey},b)}}var t_=De.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function W5(t,e,n,r){r===void 0&&(r=1);for(var i=e.getItemCount(e.data),s=[],o=0;o<t.length;o++)for(var a=t[o],l=0,u=i-1;l<=u;){var c=l+(u-l>>>1),d=n(c,e),f=d.offset*r,p=(d.offset+d.length)*r;if(c===0&&a<f||c!==0&&a<=f)u=c-1;else if(a>p)l=c+1;else{s[o]=c;break}}return s}function H5(t,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,t.last)-Math.max(e.first,t.first))}function K5(t,e,n,r,i,s){var o=t.getItemCount(t.data);if(o===0)return{first:0,last:-1};var a=s.offset,l=s.velocity,u=s.visibleLength,c=s.zoomScale,d=c===void 0?1:c,f=Math.max(0,a),p=f+u,g=(n-1)*u,E=.5,b=l>1?"after":l<-1?"before":"none",S=Math.max(0,f-(1-E)*g),y=Math.max(0,p+E*g),w=i(o-1,t).offset*d;if(w<S)return{first:Math.max(0,o-1-e),last:o-1};var x=W5([S,f,p,y],t,i,d),O=x[0],k=x[1],T=x[2],v=x[3];O=O??0,k=k??Math.max(0,O),v=v??o-1,T=T??Math.min(v,k+e-1);for(var R={first:k,last:T},C=H5(r,R);!(k<=O&&T>=v);){var A=C>=e,L=k<=r.first||k>r.last,D=k>O&&(!A||!L),de=T>=r.last||T<r.first,fe=T<v&&(!A||!de);if(A&&!D&&!fe)break;D&&!(b==="after"&&fe&&de)&&(L&&C++,k--),fe&&!(b==="before"&&D&&L)&&(de&&C++,T++)}if(!(T>=k&&k>=0&&T<o&&k>=O&&T<=v&&k<=R.first&&T>=R.last))throw new Error("Bad window calculation "+JSON.stringify({first:k,last:T,itemCount:o,overscanFirst:O,overscanLast:v,visible:R}));return{first:k,last:T}}function vS(t,e){return typeof t=="object"&&(t==null?void 0:t.key)!=null?t.key:typeof t=="object"&&(t==null?void 0:t.id)!=null?t.id:String(e)}var my={exports:{}};function fM(t,e){if(t!=null)return t;var n=new Error(e!==void 0?e:"Got unexpected "+t);throw n.framesToPop=1,n}my.exports=fM;my.exports.default=fM;Object.defineProperty(my.exports,"__esModule",{value:!0});var q5=my.exports;const G5=Fu(q5);var jC=.001,n_=!1,r_="";function $o(t){return t??!1}function Q5(t){return t??10}function i_(t){return t??10}function X5(t){return t??2}function $C(t){return t??2}function UC(t,e){return t*e/2}function Y5(t){return t??50}function zC(t){return t??21}function J5(t,e){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return t[n];return null}class tr extends F5{scrollToEnd(e){var n=e?e.animated:!0,r=this.props.getItemCount(this.props.data)-1;if(!(r<0)){var i=this.__getFrameMetricsApprox(r,this.props),s=Math.max(0,i.offset+i.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo($o(this.props.horizontal)?{x:s,animated:n}:{y:s,animated:n})}}}scrollToIndex(e){var n=this.props,r=n.data,i=n.horizontal,s=n.getItemCount,o=n.getItemLayout,a=n.onScrollToIndexFailed,l=e.animated,u=e.index,c=e.viewOffset,d=e.viewPosition;if(ge(u>=0,"scrollToIndex out of range: requested index "+u+" but minimum is 0"),ge(s(r)>=1,"scrollToIndex out of range: item length "+s(r)+" but minimum is 1"),ge(u<s(r),"scrollToIndex out of range: requested index "+u+" is out of 0 to "+(s(r)-1)),!o&&u>this._highestMeasuredFrameIndex){ge(!!a,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),a({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:u});return}var f=this.__getFrameMetricsApprox(Math.floor(u),this.props),p=Math.max(0,this._getOffsetApprox(u,this.props)-(d||0)*(this._scrollMetrics.visibleLength-f.length))-(c||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(i?{x:p,animated:l}:{y:p,animated:l})}}scrollToItem(e){for(var n=e.item,r=this.props,i=r.data,s=r.getItem,o=r.getItemCount,a=o(i),l=0;l<a;l++)if(s(i,l)===n){this.scrollToIndex(ye(ye({},e),{},{index:l}));break}}scrollToOffset(e){var n=e.animated,r=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo($o(this.props.horizontal)?{x:r,animated:n}:{y:r,animated:n})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var n;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=a=>{this._nestedChildLists.add(a.ref,a.cellKey),this._hasInteracted&&a.ref.recordInteraction()},this._unregisterAsNestedChild=a=>{this._nestedChildLists.remove(a.ref)},this._onUpdateSeparators=(a,l)=>{a.forEach(u=>{var c=u!=null&&this._cellRefs[u];c&&c.updateSeparatorProps(l)})},this._getSpacerKey=a=>a?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new N5,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=a=>{this._scrollRef=a},this._defaultRenderScrollComponent=a=>{var l=a.onRefresh;if(this._isNestedWithSameOrientation())return I.createElement(Q,a);if(l){var u;return ge(typeof a.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((u=a.refreshing)!==null&&u!==void 0?u:"undefined")+"`"),I.createElement(kr,ln({},a,{refreshControl:a.refreshControl==null?I.createElement(f5,{refreshing:a.refreshing,onRefresh:l,progressViewOffset:a.progressViewOffset}):a.refreshControl}))}else return I.createElement(kr,a)},this._onCellLayout=(a,l,u)=>{var c=a.nativeEvent.layout,d={offset:this._selectOffset(c),length:this._selectLength(c),index:u,inLayout:!0},f=this._frames[l];!f||d.offset!==f.offset||d.length!==f.length||u!==f.index?(this._totalCellLength+=d.length-(f?f.length:0),this._totalCellsMeasured+=f?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[l]=d,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,u),this._scheduleCellsToRenderUpdate()):this._frames[l].inLayout=!0,this._triggerRemeasureForChildListsInCell(l),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=a=>{delete this._cellRefs[a];var l=this._frames[a];l&&(this._frames[a]=ye(ye({},l),{},{inLayout:!1}))},this._onLayout=a=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(a.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(a),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=a=>{this.props.onLayout&&this.props.onLayout(a)},this._onLayoutFooter=a=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(a.nativeEvent.layout)},this._onLayoutHeader=a=>{this._headerLength=this._selectLength(a.nativeEvent.layout)},this._onContentSizeChange=(a,l)=>{a>0&&l>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:G5(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(a,l),this._scrollMetrics.contentLength=this._selectLength({height:l,width:a}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=a=>{var l=a.offset-this._offsetFromParentVirtualizedList,u=a.visibleLength,c=l-this._scrollMetrics.offset,d=this._scrollMetrics.contentLength;return{visibleLength:u,contentLength:d,offset:l,dOffset:c}},this._onScroll=a=>{this._nestedChildLists.forEach(S=>{S._onScroll(a)}),this.props.onScroll&&this.props.onScroll(a);var l=a.timeStamp,u=this._selectLength(a.nativeEvent.layoutMeasurement),c=this._selectLength(a.nativeEvent.contentSize),d=this._selectOffset(a.nativeEvent.contentOffset),f=d-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var p=this._convertParentScrollMetrics({visibleLength:u,offset:d});u=p.visibleLength,c=p.contentLength,d=p.offset,f=p.dOffset}var g=this._scrollMetrics.timestamp?Math.max(1,l-this._scrollMetrics.timestamp):1,E=f/g;g>500&&this._scrollMetrics.dt>500&&c>5*u&&!this._hasWarned.perf&&(M5("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:g,prevDt:this._scrollMetrics.dt,contentLength:c}),this._hasWarned.perf=!0);var b=a.nativeEvent.zoomScale<0?1:a.nativeEvent.zoomScale;this._scrollMetrics={contentLength:c,dt:g,dOffset:f,offset:d,timestamp:l,velocity:E,visibleLength:u,zoomScale:b},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),E!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=a=>{this._nestedChildLists.forEach(l=>{l._onScrollBeginDrag(a)}),this._viewabilityTuples.forEach(l=>{l.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(a)},this._onScrollEndDrag=a=>{this._nestedChildLists.forEach(u=>{u._onScrollEndDrag(a)});var l=a.nativeEvent.velocity;l&&(this._scrollMetrics.velocity=this._selectOffset(l)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(a)},this._onMomentumScrollBegin=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollBegin(a)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(a)},this._onMomentumScrollEnd=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollEnd(a)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(a)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((a,l)=>{var u=this._adjustCellsAroundViewport(l,a.cellsAroundViewport),c=tr._createRenderMask(l,u,this._getNonViewportRenderRegions(l));return u.first===a.cellsAroundViewport.first&&u.last===a.cellsAroundViewport.last&&c.equals(a.renderMask)?null:{cellsAroundViewport:u,renderMask:c}})},this._createViewToken=(a,l,u)=>{var c=u.data,d=u.getItem,f=d(c,a);return{index:a,item:f,key:this._keyExtractor(f,a,u),isViewable:l}},this._getOffsetApprox=(a,l)=>{if(Number.isInteger(a))return this.__getFrameMetricsApprox(a,l).offset;var u=this.__getFrameMetricsApprox(Math.floor(a),l),c=a-Math.floor(a);return u.offset+c*u.length},this.__getFrameMetricsApprox=(a,l)=>{var u=this._getFrameMetrics(a,l);if(u&&u.index===a)return u;var c=l.data,d=l.getItemCount,f=l.getItemLayout;return ge(a>=0&&a<d(c),"Tried to get frame for out of range index "+a),ge(!f,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*a}},this._getFrameMetrics=(a,l)=>{var u=l.data,c=l.getItem,d=l.getItemCount,f=l.getItemLayout;ge(a>=0&&a<d(u),"Tried to get frame for out of range index "+a);var p=c(u,a),g=this._frames[this._keyExtractor(p,a,l)];return(!g||g.index!==a)&&f?f(u,a):g},this._getNonViewportRenderRegions=a=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var l=this._cellRefs[this._lastFocusedCellKey],u=l.props.index,c=a.getItemCount(a.data);if(u>=c||this._keyExtractor(a.getItem(a.data,u),u,a)!==this._lastFocusedCellKey)return[];for(var d=u,f=0,p=d-1;p>=0&&f<this._scrollMetrics.visibleLength;p--)d--,f+=this.__getFrameMetricsApprox(p,a).length;for(var g=u,E=0,b=g+1;b<c&&E<this._scrollMetrics.visibleLength;b++)g++,E+=this.__getFrameMetricsApprox(b,a).length;return[{first:d,last:g}]},this._checkProps(e),this._fillRateHelper=new V5(this._getFrameMetrics),this._updateCellsToRenderBatcher=new O5(this._updateCellsToRender,(n=this.props.updateCellsBatchingPeriod)!==null&&n!==void 0?n:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(a=>({viewabilityHelper:new BC(a.viewabilityConfig),onViewableItemsChanged:a.onViewableItemsChanged}));else{var r=this.props,i=r.onViewableItemsChanged,s=r.viewabilityConfig;i&&this._viewabilityTuples.push({viewabilityHelper:new BC(s),onViewableItemsChanged:i})}var o=tr._initialRenderRegion(e);this.state={cellsAroundViewport:o,renderMask:tr._createRenderMask(e,o)},this.invertedWheelEventHandler=a=>{var l=this.props.horizontal?a.target.scrollLeft:a.target.scrollTop,u=this.props.horizontal?a.target.scrollWidth:a.target.scrollHeight,c=this.props.horizontal?a.target.clientWidth:a.target.clientHeight,d=u>c,f=this.props.horizontal?a.deltaX||a.wheelDeltaX:a.deltaY||a.wheelDeltaY,p=f;d&&(p=f<0?Math.min(f+l,0):Math.max(f-(u-c-l),0));var g=f-p;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var E=this._scrollRef.getScrollableNode();if(this.props.horizontal){a.target.scrollLeft+=g;var b=E.scrollLeft-p;E.scrollLeft=this.props.getItemLayout?b:Math.min(b,this._totalCellLength)}else{a.target.scrollTop+=g;var S=E.scrollTop-p;E.scrollTop=this.props.getItemLayout?S:Math.min(S,this._totalCellLength)}a.preventDefault()}}}_checkProps(e){var n=e.onScroll,r=e.windowSize,i=e.getItemCount,s=e.data,o=e.initialScrollIndex;ge(!n||!n.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),ge(zC(r)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),ge(i,'VirtualizedList: The "getItemCount" prop must be provided');var a=i(s);o!=null&&!this._hasTriggeredInitialScrollToIndex&&(o<0||a>0&&o>=a)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+o+'" is not valid (list has '+a+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,n,r){var i=e.getItemCount(e.data);ge(n.first>=0&&n.last>=n.first-1&&n.last<i,'Invalid cells around viewport "['+n.first+", "+n.last+']" was passed to VirtualizedList._createRenderMask');var s=new L5(i);if(i>0){for(var o=[n,...r??[]],a=0,l=o;a<l.length;a++){var u=l[a];s.addCells(u)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var c=tr._initialRenderRegion(e);s.addCells(c)}var d=new Set(e.stickyHeaderIndices);tr._ensureClosestStickyHeader(e,d,s,n.first)}return s}static _initialRenderRegion(e){var n,r=e.getItemCount(e.data),i=Math.max(0,Math.min(r-1,Math.floor((n=e.initialScrollIndex)!==null&&n!==void 0?n:0))),s=Math.min(r,i+Q5(e.initialNumToRender))-1;return{first:i,last:s}}static _ensureClosestStickyHeader(e,n,r,i){for(var s=e.ListHeaderComponent?1:0,o=i-1;o>=0;o--)if(n.has(o+s)){r.addCells({first:o,last:o});break}}_adjustCellsAroundViewport(e,n){var r=e.data,i=e.getItemCount,s=$C(e.onEndReachedThreshold),o=this._scrollMetrics,a=o.contentLength,l=o.offset,u=o.visibleLength,c=a-u-l;if(u<=0||a<=0)return n.last>=i(r)?tr._constrainToItemCount(n,e):n;var d;if(e.disableVirtualization){var f=c<s*u?i_(e.maxToRenderPerBatch):0;d={first:0,last:Math.min(n.last+f,i(r)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(c)>=Number.EPSILON)return n.last>=i(r)?tr._constrainToItemCount(n,e):n;d=K5(e,i_(e.maxToRenderPerBatch),zC(e.windowSize),n,this.__getFrameMetricsApprox,this._scrollMetrics),ge(d.last<i(r),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var p=this._findFirstChildWithMore(d.first,d.last);d.last=p??d.last}return d}_findFirstChildWithMore(e,n){for(var r=e;r<=n;r++){var i=this._indicesToKeys.get(r);if(i!=null&&this._nestedChildLists.anyInCell(i,s=>s.hasMore()))return r}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,n){var r=e.getItemCount(e.data);if(r===n.renderMask.numCells())return n;var i=tr._constrainToItemCount(n.cellsAroundViewport,e);return{cellsAroundViewport:i,renderMask:tr._createRenderMask(e,i)}}_pushCells(e,n,r,i,s,o){var a=this,l=this.props,u=l.CellRendererComponent,c=l.ItemSeparatorComponent,d=l.ListHeaderComponent,f=l.ListItemComponent,p=l.data,g=l.debug,E=l.getItem,b=l.getItemCount,S=l.getItemLayout,y=l.horizontal,w=l.renderItem,x=d?1:0,O=b(p)-1,k;s=Math.min(O,s);for(var T=function(){var C=E(p,v),A=a._keyExtractor(C,v,a.props);a._indicesToKeys.set(v,A),r.has(v+x)&&n.push(e.length);var L=S==null||g||a._fillRateHelper.enabled();e.push(I.createElement(z5,ln({CellRendererComponent:u,ItemSeparatorComponent:v<O?c:void 0,ListItemComponent:f,cellKey:A,horizontal:y,index:v,inversionStyle:o,item:C,key:A,prevCellKey:k,onUpdateSeparators:a._onUpdateSeparators,onCellFocusCapture:D=>a._onCellFocusCapture(A),onUnmount:a._onCellUnmount,ref:D=>{a._cellRefs[A]=D},renderItem:w},L&&{onCellLayout:a._onCellLayout}))),k=A},v=i;v<=s;v++)T()}static _constrainToItemCount(e,n){var r=n.getItemCount(n.data),i=Math.min(r-1,e.last),s=i_(n.maxToRenderPerBatch);return{first:NC(0,r-1-s,e.first),last:i}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===$o(this.props.horizontal))}_keyExtractor(e,n,r){if(r.keyExtractor!=null)return r.keyExtractor(e,n);var i=vS(e,n);return i===String(n)&&(n_=!0,e.type&&e.type.displayName&&(r_=e.type.displayName)),i}render(){this._checkProps(this.props);var e=this.props,n=e.ListEmptyComponent,r=e.ListFooterComponent,i=e.ListHeaderComponent,s=this.props,o=s.data,a=s.horizontal,l=this.props.inverted?$o(this.props.horizontal)?Er.horizontallyInverted:Er.verticallyInverted:null,u=[],c=new Set(this.props.stickyHeaderIndices),d=[];if(i){c.has(0)&&d.push(0);var f=I.isValidElement(i)?i:I.createElement(i,null);u.push(I.createElement(zp,{cellKey:this._getCellKey()+"-header",key:"$header"},I.createElement(Q,{onLayout:this._onLayoutHeader,style:[l,this.props.ListHeaderComponentStyle]},f)))}var p=this.props.getItemCount(o);if(p===0&&n){var g=I.isValidElement(n)?n:I.createElement(n,null);u.push(I.createElement(zp,{cellKey:this._getCellKey()+"-empty",key:"$empty"},I.cloneElement(g,{onLayout:fe=>{this._onLayoutEmpty(fe),g.props.onLayout&&g.props.onLayout(fe)},style:[l,g.props.style]})))}if(p>0){n_=!1,r_="";for(var E=this._getSpacerKey(!a),b=this.state.renderMask.enumerateRegions(),S=J5(b,fe=>fe.isSpacer),y=aa(b),w;!(w=y()).done;){var x=w.value;if(x.isSpacer){if(this.props.disableVirtualization)continue;var O=x===S,k=O&&!this.props.getItemLayout,T=k?NC(x.first-1,x.last,this._highestMeasuredFrameIndex):x.last,v=this.__getFrameMetricsApprox(x.first,this.props),R=this.__getFrameMetricsApprox(T,this.props),C=R.offset+R.length-v.offset;u.push(I.createElement(Q,{key:"$spacer-"+x.first,style:{[E]:C}}))}else this._pushCells(u,d,c,x.first,x.last,l)}!this._hasWarned.keys&&n_&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",r_),this._hasWarned.keys=!0)}if(r){var A=I.isValidElement(r)?r:I.createElement(r,null);u.push(I.createElement(zp,{cellKey:this._getFooterCellKey(),key:"$footer"},I.createElement(Q,{onLayout:this._onLayoutFooter,style:[l,this.props.ListFooterComponentStyle]},A)))}var L=ye(ye({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:Y5(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:d,style:l?[l,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<p-1;var D=I.createElement(U5,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:$o(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},I.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(L),{ref:this._captureScrollRef},u)),de=D;return this.props.debug?I.createElement(Q,{style:Er.debug},de,this._renderDebugOverlay()):de}componentDidUpdate(e){var n=this.props,r=n.data,i=n.extraData;(r!==e.data||i!==e.extraData)&&this._viewabilityTuples.forEach(o=>{o.viewabilityHelper.resetViewableIndices()});var s=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),s&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,n=>{n.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,n,r,i)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:n}),this._scrollMetrics.contentLength=this._selectLength({width:r,height:i});var s=this._convertParentScrollMetrics(this.context.getScrollMetrics()),o=this._scrollMetrics.visibleLength!==s.visibleLength||this._scrollMetrics.offset!==s.offset;o&&(this._scrollMetrics.visibleLength=s.visibleLength,this._scrollMetrics.offset=s.offset,this._nestedChildLists.forEach(a=>{a.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),n=[],r=this.props.getItemCount(this.props.data),i=0;i<r;i++){var s=this.__getFrameMetricsApprox(i,this.props);s.inLayout&&n.push(s)}var o=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,a=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),l=a.offset+a.length-o,u=this._scrollMetrics.offset,c=this._scrollMetrics.visibleLength;return I.createElement(Q,{style:[Er.debugOverlayBase,Er.debugOverlay]},n.map((d,f)=>I.createElement(Q,{key:"f"+f,style:[Er.debugOverlayBase,Er.debugOverlayFrame,{top:d.offset*e,height:d.length*e}]})),I.createElement(Q,{style:[Er.debugOverlayBase,Er.debugOverlayFrameLast,{top:o*e,height:l*e}]}),I.createElement(Q,{style:[Er.debugOverlayBase,Er.debugOverlayFrameVis,{top:u*e,height:c*e}]}))}_selectLength(e){return $o(this.props.horizontal)?e.width:e.height}_selectOffset(e){return $o(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,n=e.data,r=e.getItemCount,i=e.onStartReached,s=e.onStartReachedThreshold,o=e.onEndReached,a=e.onEndReachedThreshold,l=e.initialScrollIndex,u=this._scrollMetrics,c=u.contentLength,d=u.visibleLength,f=u.offset,p=f,g=c-d-f;p<jC&&(p=0),g<jC&&(g=0);var E=2,b=s!=null?s*d:E,S=a!=null?a*d:E,y=p<=b,w=g<=S;o&&this.state.cellsAroundViewport.last===r(n)-1&&w&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,o({distanceFromEnd:g})):i!=null&&this.state.cellsAroundViewport.first===0&&y&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!l||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,i({distanceFromStart:p})):(this._sentStartForContentLength=y?this._sentStartForContentLength:0,this._sentEndForContentLength=w?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,n=e.first,r=e.last,i=this._scrollMetrics,s=i.offset,o=i.visibleLength,a=i.velocity,l=this.props.getItemCount(this.props.data),u=!1,c=X5(this.props.onStartReachedThreshold),d=$C(this.props.onEndReachedThreshold);if(n>0){var f=s-this.__getFrameMetricsApprox(n,this.props).offset;u=f<0||a<-2&&f<UC(c,o)}if(!u&&r>=0&&r<l-1){var p=this.__getFrameMetricsApprox(r,this.props).offset-(s+o);u=p<0||a>2&&p<UC(d,o)}if(u&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,n){this._viewabilityTuples.forEach(r=>{r.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,r.onViewableItemsChanged,n)})}}tr.contextType=ng;var Er=De.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),WC=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Z5(t,e){return!!(t===e||WC(t)&&WC(e))}function e9(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Z5(t[n],e[n]))return!1;return!0}function t9(t,e){e===void 0&&(e=e9);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var n9=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function r9(t){return t??dz.OS==="android"}function Uo(t){return t??1}function i9(t){return typeof Object(t).length=="number"}class s9 extends I.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=n=>{this._listRef=n},this._getItem=(n,r)=>{var i=Uo(this.props.numColumns);if(i>1){for(var s=[],o=0;o<i;o++){var a=r*i+o;if(a<n.length){var l=n[a];s.push(l)}}return s}else return n[r]},this._getItemCount=n=>{if(n!=null&&i9(n)){var r=Uo(this.props.numColumns);return r>1?Math.ceil(n.length/r):n.length}else return 0},this._keyExtractor=(n,r)=>{var i,s=Uo(this.props.numColumns),o=(i=this.props.keyExtractor)!==null&&i!==void 0?i:vS;return s>1?(ge(Array.isArray(n),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",s),n.map((a,l)=>o(a,r*s+l)).join(":")):o(n,r)},this._renderer=(n,r,i,s,o)=>{var a=Uo(s),l=c=>n?I.createElement(n,c):r?r(c):null,u=c=>{if(a>1){var d=c.item,f=c.index;return ge(Array.isArray(d),"Expected array of items with numColumns > 1"),I.createElement(Q,{style:[o9.row,i]},d.map((p,g)=>{var E=l({item:p,index:f*a+g,separators:c.separators});return E!=null?I.createElement(I.Fragment,{key:g},E):null}))}else return l(c)};return n?{ListItemComponent:u}:{renderItem:u}},this._memoizedRenderer=t9(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(n=>({viewabilityConfig:n.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(n.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){ge(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),ge(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),ge(!l5(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),ge(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var n=e.getItem,r=e.getItemCount,i=e.horizontal,s=e.columnWrapperStyle,o=e.onViewableItemsChanged,a=e.viewabilityConfigCallbackPairs,l=Uo(this.props.numColumns);ge(!n&&!r,"FlatList does not support custom data formats."),l>1?ge(!i,"numColumns does not support horizontal."):ge(!s,"columnWrapperStyle not supported for single column lists"),ge(!(o&&a),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,n){var r,i=Uo(this.props.numColumns),s=(r=this.props.keyExtractor)!==null&&r!==void 0?r:vS;n.item.forEach((o,a)=>{ge(n.index!=null,"Missing index!");var l=n.index*i+a;e.push(ye(ye({},n),{},{item:o,key:s(o,l),index:l}))})}_createOnViewableItemsChanged(e){return n=>{var r=Uo(this.props.numColumns);if(e)if(r>1){var i=[],s=[];n.viewableItems.forEach(o=>this._pushMultiColumnViewable(s,o)),n.changed.forEach(o=>this._pushMultiColumnViewable(i,o)),e({viewableItems:s,changed:i})}else e(n)}}render(){var e=this.props,n=e.numColumns,r=e.columnWrapperStyle,i=e.removeClippedSubviews,s=e.strictMode,o=s===void 0?!1:s,a=Pn(e,n9),l=o?this._memoizedRenderer:this._renderer;return I.createElement(tr,ln({},a,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:r9(i)},l(this.props.ListItemComponent,this.props.renderItem,r,n,this.props.extraData)))}}var o9=De.create({row:{flexDirection:"row"}}),a9=[];function pM(t){return a9[t-1]}var l9=/^data:/;class $n{static has(e){var n=$n._entries,r=l9.test(e);return r||!!n[e]}static add(e){var n=$n._entries,r=Date.now();n[e]?(n[e].lastUsedTimestamp=r,n[e].refCount+=1):n[e]={lastUsedTimestamp:r,refCount:1}}static remove(e){var n=$n._entries;n[e]&&(n[e].refCount-=1),$n._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var e=$n._entries,n=Object.keys(e);if(n.length+1>$n._maximumEntries){var r,i;n.forEach(s=>{var o=e[s];(!i||o.lastUsedTimestamp<i.lastUsedTimestamp)&&o.refCount===0&&(r=s,i=o)}),r&&delete e[r]}}}$n._maximumEntries=256;$n._entries={};var s_=0,sp={},ri={abort(t){var e=sp[""+t];e&&(e.onerror=null,e.onload=null,e=null,delete sp[""+t])},getSize(t,e,n){var r=!1,i=setInterval(o,16),s=ri.load(t,o,a);function o(){var l=sp[""+s];if(l){var u=l.naturalHeight,c=l.naturalWidth;u&&c&&(e(c,u),r=!0)}r&&(ri.abort(s),clearInterval(i))}function a(){typeof n=="function"&&n(),ri.abort(s),clearInterval(i)}},has(t){return $n.has(t)},load(t,e,n){s_+=1;var r=new window.Image;return r.onerror=n,r.onload=i=>{var s=()=>e({nativeEvent:i});typeof r.decode=="function"?r.decode().then(s,s):setTimeout(s,0)},r.src=t,sp[""+s_]=r,s_},prefetch(t){return new Promise((e,n)=>{ri.load(t,()=>{$n.add(t),$n.remove(t),e()},n)})},queryCache(t){var e={};return t.forEach(n=>{$n.has(n)&&(e[n]="disk/memory")}),Promise.resolve(e)}};class Rh{static get(){return Ym.get("window").scale}static getFontScale(){return Ym.get("window").fontScale||Rh.get()}static getPixelSizeForLayoutSize(e){return Math.round(e*Rh.get())}static roundToNearestPixel(e){var n=Rh.get();return Math.round(e*n)/n}}var u9=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],c9="ERRORED",o_="LOADED",HC="LOADING",h9="IDLE",d9=0,f9=/^(data:image\/svg\+xml;utf8,)(.*)/;function p9(t,e){return t&&e!=null?I.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},I.createElement("defs",null,I.createElement("filter",{id:"tint-"+e,suppressHydrationWarning:!0},I.createElement("feFlood",{floodColor:""+t,key:t}),I.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function m9(t,e,n,r){var i=De.flatten(t),s=i.filter,o=i.resizeMode,a=i.shadowOffset,l=i.tintColor;i.resizeMode,i.tintColor;var u=[],c=null;if(s&&u.push(s),e&&u.push("blur("+e+"px)"),a){var d=KO(i);d&&u.push("drop-shadow("+d+")")}return(r||l)&&n!=null&&u.push("url(#tint-"+n+")"),u.length>0&&(c=u.join(" ")),[o,c,l]}function g9(t){if(typeof t=="number"){var e=pM(t),n=e.height,r=e.width;return{height:n,width:r}}else if(t!=null&&!Array.isArray(t)&&typeof t=="object"){var i=t.height,s=t.width;return{height:i,width:s}}}function a_(t){var e=null;if(typeof t=="number"){var n=pM(t);if(n==null)throw new Error('Image: asset with ID "'+t+'" could not be found. Please check the image source or packager.');var r=n.scales[0];if(n.scales.length>1){var i=Rh.get();r=n.scales.reduce((c,d)=>Math.abs(d-i)<Math.abs(c-i)?d:c)}var s=r!==1?"@"+r+"x":"";e=n?n.httpServerLocation+"/"+n.name+s+"."+n.type:""}else typeof t=="string"?e=t:t&&typeof t.uri=="string"&&(e=t.uri);if(e){var o=e.match(f9);if(o){var a=o[1],l=o[2],u=encodeURIComponent(l);return""+a+u}}return e}var mM=I.forwardRef((t,e)=>{var n=t["aria-label"],r=t.accessibilityLabel,i=t.blurRadius,s=t.defaultSource,o=t.draggable,a=t.onError,l=t.onLayout,u=t.onLoad,c=t.onLoadEnd,d=t.onLoadStart,f=t.pointerEvents,p=t.source,g=t.style,E=Pn(t,u9),b=n||r,S=I.useState(()=>{var Ke=a_(p);if(Ke!=null){var Ot=ri.has(Ke);if(Ot)return o_}return h9}),y=S[0],w=S[1],x=I.useState({}),O=x[0],k=x[1],T=I.useContext(Xm),v=I.useRef(null),R=I.useRef(d9++),C=I.useRef(null),A=y===o_||y===HC&&s==null,L=m9(g,i,R.current,t.tintColor),D=L[0],de=L[1],fe=L[2],je=t.resizeMode||D||"cover",Re=t.tintColor||fe,$=A?p:s,Y=a_($),ie=g9($),we=Y?'url("'+Y+'")':null,Ae=at(),un=Y?Uu("img",{alt:b||"",style:Nc.accessibilityImage$raw,draggable:o||!1,ref:v,src:Y}):null;function at(){if(v.current!=null&&(je==="center"||je==="repeat")){var Ke=v.current,Ot=Ke.naturalHeight,kn=Ke.naturalWidth,vi=O.height,as=O.width;if(Ot&&kn&&vi&&as){var mr=Math.min(1,as/kn,vi/Ot),Br=Math.ceil(mr*kn),Yn=Math.ceil(mr*Ot);return Br+"px "+Yn+"px"}}}function $t(Ke){if(je==="center"||je==="repeat"||l){var Ot=Ke.nativeEvent.layout;l&&l(Ke),k(Ot)}}var dt=a_(p);return I.useEffect(()=>{Ke(),dt!=null&&(w(HC),d&&d(),C.current=ri.load(dt,function(kn){w(o_),u&&u(kn),c&&c()},function(){w(c9),a&&a({nativeEvent:{error:"Failed to load resource "+dt}}),c&&c()}));function Ke(){C.current!=null&&(ri.abort(C.current),C.current=null)}return Ke},[dt,C,w,a,u,c,d]),I.createElement(Q,ln({},E,{"aria-label":b,onLayout:$t,pointerEvents:f,ref:e,style:[Nc.root,T&&Nc.inline,ie,g,Nc.undo,{boxShadow:null}]}),I.createElement(Q,{style:[Nc.image,y9[je],{backgroundImage:we,filter:de},Ae!=null&&{backgroundSize:Ae}],suppressHydrationWarning:!0}),un,p9(Re,R.current))});mM.displayName="Image";var Nr=mM;Nr.getSize=function(t,e,n){ri.getSize(t,e,n)};Nr.prefetch=function(t){return ri.prefetch(t)};Nr.queryCache=function(t){return ri.queryCache(t)};var Nc=De.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:ye(ye({},De.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:ye(ye({},De.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),y9=De.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}}),v9=["hrefAttrs","numberOfLines","onClick","onLayout","onPress","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture","selectable"],_9=Object.assign({},qE,GE,QE,XE,YE,JE,ZE,eT,{href:!0,lang:!0,pointerEvents:!0}),w9=t=>tT(t,_9),G=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.numberOfLines,i=t.onClick,s=t.onLayout,o=t.onPress,a=t.onMoveShouldSetResponder,l=t.onMoveShouldSetResponderCapture,u=t.onResponderEnd,c=t.onResponderGrant,d=t.onResponderMove,f=t.onResponderReject,p=t.onResponderRelease,g=t.onResponderStart,E=t.onResponderTerminate,b=t.onResponderTerminationRequest,S=t.onScrollShouldSetResponder,y=t.onScrollShouldSetResponderCapture,w=t.onSelectionChangeShouldSetResponder,x=t.onSelectionChangeShouldSetResponderCapture,O=t.onStartShouldSetResponder,k=t.onStartShouldSetResponderCapture,T=t.selectable,v=Pn(t,v9),R=I.useContext(Xm),C=I.useRef(null),A=KE(),L=A.direction;nT(C,s),sT(C,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:l,onResponderEnd:u,onResponderGrant:c,onResponderMove:d,onResponderReject:f,onResponderRelease:p,onResponderStart:g,onResponderTerminate:E,onResponderTerminationRequest:b,onScrollShouldSetResponder:S,onScrollShouldSetResponderCapture:y,onSelectionChangeShouldSetResponder:w,onSelectionChangeShouldSetResponderCapture:x,onStartShouldSetResponder:O,onStartShouldSetResponderCapture:k});var D=I.useCallback($t=>{i!=null?i($t):o!=null&&($t.stopPropagation(),o($t))},[i,o]),de=R?"span":"div",fe=t.lang!=null?fy(t.lang):null,je=t.dir||fe,Re=je||L,$=w9(v);if($.dir=je,R||($.dir=je??"auto"),(i||o)&&($.onClick=D),$.style=[r!=null&&r>1&&{WebkitLineClamp:r},R===!0?zo.textHasAncestor$raw:zo.text$raw,r===1&&zo.textOneLine,r!=null&&r>1&&zo.textMultiLine,t.style,T===!0&&zo.selectable,T===!1&&zo.notSelectable,o&&zo.pressable],t.href!=null&&(de="a",n!=null)){var Y=n.download,ie=n.rel,we=n.target;Y!=null&&($.download=Y),ie!=null&&($.rel=ie),typeof we=="string"&&($.target=we.charAt(0)!=="_"?"_"+we:we)}var Ae=rT($),un=$d(C,Ae,e);$.ref=un;var at=Uu(de,$,{writingDirection:Re});return R?at:I.createElement(Xm.Provider,{value:!0},at)});G.displayName="Text";var KC={backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",listStyle:"none",margin:0,padding:0,position:"relative",textAlign:"start",textDecoration:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},zo=De.create({text$raw:KC,textHasAncestor$raw:ye(ye({},KC),{},{color:"inherit",font:"inherit",textAlign:"inherit",whiteSpace:"inherit"}),textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}}),S9=["animating","color","hidesWhenStopped","size","style"],qC=t=>I.createElement("circle",{cx:"16",cy:"16",fill:"none",r:"14",strokeWidth:"4",style:t}),Ud=I.forwardRef((t,e)=>{var n=t.animating,r=n===void 0?!0:n,i=t.color,s=i===void 0?"#1976D2":i,o=t.hidesWhenStopped,a=o===void 0?!0:o,l=t.size,u=l===void 0?"small":l,c=t.style,d=Pn(t,S9),f=I.createElement("svg",{height:"100%",viewBox:"0 0 32 32",width:"100%"},qC({stroke:s,opacity:.2}),qC({stroke:s,strokeDasharray:80,strokeDashoffset:60}));return I.createElement(Q,ln({},d,{"aria-valuemax":1,"aria-valuemin":0,ref:e,role:"progressbar",style:[op.container,c]}),I.createElement(Q,{children:f,style:[typeof u=="number"?{height:u,width:u}:E9[u],op.animation,!r&&op.animationPause,!r&&a&&op.hidesWhenStopped]}))});Ud.displayName="ActivityIndicator";var op=De.create({container:{alignItems:"center",justifyContent:"center"},hidesWhenStopped:{visibility:"hidden"},animation:{animationDuration:"0.75s",animationKeyframes:[{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}],animationTimingFunction:"linear",animationIterationCount:"infinite"},animationPause:{animationPlayState:"paused"}}),E9=De.create({small:{width:20,height:20},large:{width:36,height:36}}),GC="DELAY",br="ERROR",QC="LONG_PRESS_DETECTED",hn="NOT_RESPONDER",vu="RESPONDER_ACTIVE_LONG_PRESS_START",gy="RESPONDER_ACTIVE_PRESS_START",_S="RESPONDER_INACTIVE_PRESS_START",T9="RESPONDER_GRANT",Wp="RESPONDER_RELEASE",gM="RESPONDER_TERMINATED",XC=Object.freeze({NOT_RESPONDER:{DELAY:br,RESPONDER_GRANT:_S,RESPONDER_RELEASE:br,RESPONDER_TERMINATED:br,LONG_PRESS_DETECTED:br},RESPONDER_INACTIVE_PRESS_START:{DELAY:gy,RESPONDER_GRANT:br,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:br},RESPONDER_ACTIVE_PRESS_START:{DELAY:br,RESPONDER_GRANT:br,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:vu},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:br,RESPONDER_GRANT:br,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:vu},ERROR:{DELAY:hn,RESPONDER_GRANT:_S,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:hn}}),yM=t=>t.getAttribute("role"),wS=t=>t.tagName.toLowerCase(),YC=t=>t===gy||t===vu,Hp=t=>yM(t)==="button",JC=t=>t===_S||t===gy||t===vu,b9=t=>t===gM||t===Wp,ZC=t=>{var e=t.key,n=t.target,r=e===" "||e==="Spacebar",i=wS(n)==="button"||Hp(n);return e==="Enter"||r&&i},I9=450,R9=50;class C9{constructor(e){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=hn,this._responderElement=null,this.configure(e)}configure(e){this._config=e}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var e=(i,s)=>{i.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=hn,this._isPointerTouch=i.nativeEvent.type==="touchstart",this._receiveSignal(T9,i);var o=l_(this._config.delayPressStart,0,R9);s!==!1&&o>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(GC,i)},o):this._receiveSignal(GC,i);var a=l_(this._config.delayLongPress,10,I9);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(i)},a+o)},n=i=>{this._receiveSignal(Wp,i)},r=i=>{var s=this._config.onPress,o=i.target;if(this._touchState!==hn&&ZC(i)){n(i),document.removeEventListener("keyup",r);var a=o.getAttribute("role"),l=wS(o),u=a==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea",c=this._responderElement===o;s!=null&&!u&&c&&s(i),this._responderElement=null}};return{onStartShouldSetResponder:i=>{var s=this._config.disabled;return s&&Hp(i.currentTarget)&&i.stopPropagation(),s==null?!0:!s},onKeyDown:i=>{var s=this._config.disabled,o=i.key,a=i.target;if(!s&&ZC(i)){this._touchState===hn&&(e(i,!1),this._responderElement=a,document.addEventListener("keyup",r));var l=o===" "||o==="Spacebar",u=yM(a),c=u==="button"||u==="menuitem";l&&c&&wS(a)!=="button"&&i.preventDefault(),i.stopPropagation()}},onResponderGrant:i=>e(i),onResponderMove:i=>{this._config.onPressMove!=null&&this._config.onPressMove(i);var s=ex(i);if(this._touchActivatePosition!=null){var o=this._touchActivatePosition.pageX-s.pageX,a=this._touchActivatePosition.pageY-s.pageY;Math.hypot(o,a)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:i=>n(i),onResponderTerminate:i=>{i.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(gM,i)},onResponderTerminationRequest:i=>{var s=this._config,o=s.cancelable,a=s.disabled,l=s.onLongPress;return!a&&l!=null&&this._isPointerTouch&&i.nativeEvent.type==="contextmenu"?!1:o??!0},onClick:i=>{var s=this._config,o=s.disabled,a=s.onPress;o?Hp(i.currentTarget)&&i.stopPropagation():(i.stopPropagation(),this._longPressDispatched||this._selectionTerminated?i.preventDefault():a!=null&&i.altKey===!1&&a(i))},onContextMenu:i=>{var s=this._config,o=s.disabled,a=s.onLongPress;o?Hp(i.currentTarget)&&i.stopPropagation():a!=null&&this._isPointerTouch&&!i.defaultPrevented&&(i.preventDefault(),i.stopPropagation())}}}_receiveSignal(e,n){var r=this._touchState,i=null;XC[r]!=null&&(i=XC[r][e]),!(this._touchState===hn&&e===Wp)&&(i==null||i===br?console.error("PressResponder: Invalid signal "+e+" for state "+r+" on responder"):r!==i&&(this._performTransitionSideEffects(r,i,e,n),this._touchState=i))}_performTransitionSideEffects(e,n,r,i){if(b9(r)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),JC(e)&&r===QC){var s=this._config.onLongPress;s!=null&&i.nativeEvent.key==null&&(s(i),this._longPressDispatched=!0)}var o=YC(e),a=YC(n);if(!o&&a?this._activate(i):o&&!a&&this._deactivate(i),JC(e)&&r===Wp){var l=this._config,u=l.onLongPress,c=l.onPress;if(c!=null){var d=u!=null&&e===vu;d||!a&&!o&&(this._activate(i),this._deactivate(i))}}this._cancelPressDelayTimeout()}_activate(e){var n=this._config,r=n.onPressChange,i=n.onPressStart,s=ex(e);this._touchActivatePosition={pageX:s.pageX,pageY:s.pageY},i!=null&&i(e),r!=null&&r(!0)}_deactivate(e){var n=this._config,r=n.onPressChange,i=n.onPressEnd;function s(){i!=null&&i(e),r!=null&&r(!1)}var o=l_(this._config.delayPressEnd);o>0?this._pressOutDelayTimeout=setTimeout(()=>{s()},o):s()}_handleLongPress(e){(this._touchState===gy||this._touchState===vu)&&this._receiveSignal(QC,e)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function l_(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Math.max(e,t??n)}function ex(t){var e=t.nativeEvent,n=e.changedTouches,r=e.touches;return r!=null&&r.length>0?r[0]:n!=null&&n.length>0?n[0]:t.nativeEvent}function x9(t,e){var n=I.useRef(null);n.current==null&&(n.current=new C9(e));var r=n.current;return I.useEffect(()=>{r.configure(e)},[e,r]),I.useEffect(()=>()=>{r.reset()},[r]),I.useDebugValue(e),r.getEventHandlers()}var A9=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function P9(t,e){var n=t.activeOpacity,r=t.delayPressIn,i=t.delayPressOut,s=t.delayLongPress,o=t.disabled,a=t.focusable,l=t.onLongPress,u=t.onPress,c=t.onPressIn,d=t.onPressOut,f=t.rejectResponderTermination,p=t.style,g=Pn(t,A9),E=I.useRef(null),b=$d(e,E),S=I.useState("0s"),y=S[0],w=S[1],x=I.useState(null),O=x[0],k=x[1],T=I.useCallback((L,D)=>{k(L),w(D?D/1e3+"s":"0s")},[k,w]),v=I.useCallback(L=>{T(n??.2,L)},[n,T]),R=I.useCallback(L=>{T(null,L)},[T]),C=I.useMemo(()=>({cancelable:!f,disabled:o,delayLongPress:s,delayPressStart:r,delayPressEnd:i,onLongPress:l,onPress:u,onPressStart(L){var D=L.dispatchConfig!=null?L.dispatchConfig.registrationName==="onResponderGrant":L.type==="keydown";v(D?0:150),c!=null&&c(L)},onPressEnd(L){R(250),d!=null&&d(L)}}),[s,r,i,o,l,u,c,d,f,v,R]),A=x9(E,C);return I.createElement(Q,ln({},g,A,{accessibilityDisabled:o,focusable:!o&&a!==!1,pointerEvents:o?"box-none":void 0,ref:b,style:[tx.root,!o&&tx.actionable,p,O!=null&&{opacity:O},{transitionDuration:y}]}))}var tx=De.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),Ce=I.memo(I.forwardRef(P9));Ce.displayName="TouchableOpacity";function k9(t){var e=t.children,n=I.useRef(null);if(At&&!n.current){var r=document.createElement("div");r&&document.body&&(document.body.appendChild(r),n.current=r)}return I.useEffect(()=>{if(At)return()=>{document.body&&n.current&&(document.body.removeChild(n.current),n.current=null)}},[]),n.current&&At?Y$.createPortal(e,n.current):null}var nx=300;function D9(t,e){return t==="slide"?e?M9:L9:t==="fade"?e?N9:V9:e?gn.container:gn.hidden}function O9(t){var e=t.animationType,n=t.children,r=t.onDismiss,i=t.onShow,s=t.visible,o=I.useState(!1),a=o[0],l=o[1],u=I.useRef(!1),c=I.useRef(!1),d=e&&e!=="none",f=I.useCallback(p=>{p&&p.currentTarget!==p.target||(s?i&&i():l(!1))},[i,s]);return I.useEffect(()=>{c.current&&!a&&r&&r(),c.current=a},[a,r]),I.useEffect(()=>{s&&l(!0),s!==u.current&&!d&&f(),u.current=s},[d,s,f]),a||s?Uu("div",{style:a?D9(e,s):gn.hidden,onAnimationEnd:f,children:n}):null}var gn=De.create({container:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:9999},animatedIn:{animationDuration:nx+"ms",animationTimingFunction:"ease-in"},animatedOut:{pointerEvents:"none",animationDuration:nx+"ms",animationTimingFunction:"ease-out"},fadeIn:{opacity:1,animationKeyframes:{"0%":{opacity:0},"100%":{opacity:1}}},fadeOut:{opacity:0,animationKeyframes:{"0%":{opacity:1},"100%":{opacity:0}}},slideIn:{transform:"translateY(0%)",animationKeyframes:{"0%":{transform:"translateY(100%)"},"100%":{transform:"translateY(0%)"}}},slideOut:{transform:"translateY(100%)",animationKeyframes:{"0%":{transform:"translateY(0%)"},"100%":{transform:"translateY(100%)"}}},hidden:{opacity:0}}),M9=[gn.container,gn.animatedIn,gn.slideIn],L9=[gn.container,gn.animatedOut,gn.slideOut],N9=[gn.container,gn.animatedIn,gn.fadeIn],V9=[gn.container,gn.animatedOut,gn.fadeOut],F9=["active","children","onRequestClose","transparent"],B9=I.forwardRef((t,e)=>{var n=t.active,r=t.children,i=t.onRequestClose,s=t.transparent,o=Pn(t,F9);I.useEffect(()=>{if(At){var l=u=>{n&&u.key==="Escape"&&(u.stopPropagation(),i&&i())};return document.addEventListener("keyup",l,!1),()=>document.removeEventListener("keyup",l,!1)}},[n,i]);var a=I.useMemo(()=>[ap.modal,s?ap.modalTransparent:ap.modalOpaque],[s]);return I.createElement(Q,ln({},o,{"aria-modal":!0,ref:e,role:n?"dialog":null,style:a}),I.createElement(Q,{style:ap.container},r))}),ap=De.create({modal:{position:"fixed",top:0,right:0,bottom:0,left:0},modalTransparent:{backgroundColor:"transparent"},modalOpaque:{backgroundColor:"white"},container:{top:0,flex:1}}),rx=()=>Uu("div",{role:"none",tabIndex:0,style:$9.focusBracket});function vM(t){if(!At)return!1;try{t.focus()}catch{}return document.activeElement===t}function _M(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(vM(n)||_M(n))return!0}return!1}function wM(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(vM(n)||wM(n))return!0}return!1}var j9=t=>{var e=t.active,n=t.children,r=I.useRef(),i=I.useRef({trapFocusInProgress:!1,lastFocusedElement:null});return I.useEffect(()=>{if(At){var s=()=>{if(!(r.current==null||i.current.trapFocusInProgress||!e)){try{if(i.current.trapFocusInProgress=!0,document.activeElement instanceof Node&&!r.current.contains(document.activeElement)){var o=_M(r.current);i.current.lastFocusedElement===document.activeElement&&(o=wM(r.current)),!o&&r.current!=null&&document.activeElement&&Vi.focus(r.current)}}finally{i.current.trapFocusInProgress=!1}i.current.lastFocusedElement=document.activeElement}};return s(),document.addEventListener("focus",s,!0),()=>document.removeEventListener("focus",s,!0)}},[e]),I.useEffect(function(){if(At){var s=document.activeElement;return function(){s&&document.contains(s)&&Vi.focus(s)}}},[]),I.createElement(I.Fragment,null,I.createElement(rx,null),I.createElement(Q,{ref:r},n),I.createElement(rx,null))},$9=De.create({focusBracket:{outlineStyle:"none"}}),U9=["animationType","children","onDismiss","onRequestClose","onShow","transparent","visible"],z9=0,ua=[],ru={};function SM(){if(ua.length!==0){var t=ua[ua.length-1];ua.forEach(e=>{e in ru&&ru[e](e===t)})}}function SS(t){t in ru&&(ru[t](!1),delete ru[t]);var e=ua.indexOf(t);e!==-1&&(ua.splice(e,1),SM())}function W9(t,e){SS(t),ua.push(t),ru[t]=e,SM()}var hd=I.forwardRef((t,e)=>{var n=t.animationType,r=t.children,i=t.onDismiss,s=t.onRequestClose,o=t.onShow,a=t.transparent,l=t.visible,u=l===void 0?!0:l,c=Pn(t,U9),d=I.useMemo(()=>z9++,[]),f=I.useState(!1),p=f[0],g=f[1],E=I.useCallback(()=>{SS(d),i&&i()},[d,i]),b=I.useCallback(()=>{W9(d,g),o&&o()},[d,o]);return I.useEffect(()=>()=>SS(d),[d]),I.createElement(k9,null,I.createElement(O9,{animationType:n,onDismiss:E,onShow:b,visible:u},I.createElement(j9,{active:p},I.createElement(B9,ln({},c,{active:p,onRequestClose:s,ref:e,transparent:a}),r))))}),H9=(t,e)=>{var n=t.selectionEnd,r=t.selectionStart,i=e.start,s=e.end;return i!==r||s!==n},ix=(t,e)=>{if(H9(t,e)){var n=e.start,r=e.end;try{t.setSelectionRange(n,r||n)}catch{}}},K9=Object.assign({},qE,GE,QE,XE,YE,JE,ZE,eT,{autoCapitalize:!0,autoComplete:!0,autoCorrect:!0,autoFocus:!0,defaultValue:!0,disabled:!0,lang:!0,maxLength:!0,onChange:!0,onScroll:!0,placeholder:!0,pointerEvents:!0,readOnly:!0,rows:!0,spellCheck:!0,value:!0,type:!0}),q9=t=>tT(t,K9);function G9(t){return t.isComposing||t.keyCode===229}var u_=null,Hn=I.forwardRef((t,e)=>{var n=t.autoCapitalize,r=n===void 0?"sentences":n,i=t.autoComplete,s=t.autoCompleteType,o=t.autoCorrect,a=o===void 0?!0:o,l=t.blurOnSubmit,u=t.caretHidden,c=t.clearTextOnFocus,d=t.dir,f=t.editable,p=t.enterKeyHint,g=t.inputMode,E=t.keyboardType,b=t.multiline,S=b===void 0?!1:b,y=t.numberOfLines,w=t.onBlur,x=t.onChange,O=t.onChangeText,k=t.onContentSizeChange,T=t.onFocus,v=t.onKeyPress,R=t.onLayout,C=t.onMoveShouldSetResponder,A=t.onMoveShouldSetResponderCapture,L=t.onResponderEnd,D=t.onResponderGrant,de=t.onResponderMove,fe=t.onResponderReject,je=t.onResponderRelease,Re=t.onResponderStart,$=t.onResponderTerminate,Y=t.onResponderTerminationRequest,ie=t.onScrollShouldSetResponder,we=t.onScrollShouldSetResponderCapture,Ae=t.onSelectionChange,un=t.onSelectionChangeShouldSetResponder,at=t.onSelectionChangeShouldSetResponderCapture,$t=t.onStartShouldSetResponder,dt=t.onStartShouldSetResponderCapture,Ke=t.onSubmitEditing,Ot=t.placeholderTextColor,kn=t.readOnly,vi=kn===void 0?!1:kn,as=t.returnKeyType,mr=t.rows,Br=t.secureTextEntry,Yn=Br===void 0?!1:Br,xo=t.selection,ls=t.selectTextOnFocus,Ao=t.showSoftInputOnFocus,us=t.spellCheck,Oe,et;if(g!=null)et=g,g==="email"?Oe="email":g==="tel"?Oe="tel":g==="search"?Oe="search":g==="url"?Oe="url":Oe="text";else if(E!=null)switch(E){case"email-address":Oe="email";break;case"number-pad":case"numeric":et="numeric";break;case"decimal-pad":et="decimal";break;case"phone-pad":Oe="tel";break;case"search":case"web-search":Oe="search";break;case"url":Oe="url";break;default:Oe="text"}Yn&&(Oe="password");var Dn=I.useRef({height:null,width:null}),Jn=I.useRef(null),cs=I.useRef(null),Po=I.useRef(!1);I.useEffect(()=>{Jn.current&&cs.current&&ix(Jn.current,cs.current),Po.current=Yn},[Yn]);var gr=I.useCallback(ee=>{if(S&&k&&ee!=null){var Xe=ee.scrollHeight,Mt=ee.scrollWidth;(Xe!==Dn.current.height||Mt!==Dn.current.width)&&(Dn.current.height=Xe,Dn.current.width=Mt,k({nativeEvent:{contentSize:{height:Dn.current.height,width:Dn.current.width}}}))}},[S,k]),ko=I.useMemo(()=>ee=>{ee!=null&&(ee.clear=function(){ee!=null&&(ee.value="")},ee.isFocused=function(){return ee!=null&&Di.currentlyFocusedField()===ee},gr(ee))},[gr]);function qa(ee){Di._currentlyFocusedNode=null,w&&(ee.nativeEvent.text=ee.target.value,w(ee))}function hs(ee){var Xe=ee.target,Mt=Xe.value;ee.nativeEvent.text=Mt,gr(Xe),x&&x(ee),O&&O(Mt)}function ac(ee){var Xe=ee.target;T&&(ee.nativeEvent.text=Xe.value,T(ee)),Xe!=null&&(Di._currentlyFocusedNode=Xe,c&&(Xe.value=""),ls&&(u_!=null&&clearTimeout(u_),u_=setTimeout(()=>{Xe!=null&&document.activeElement===Xe&&Xe.select()},0)))}function Ga(ee){var Xe=ee.target;ee.stopPropagation();var Mt=!S,yr=l??Mt,$r=ee.nativeEvent,Za=G9($r);v&&v(ee),ee.key==="Enter"&&!ee.shiftKey&&!Za&&!ee.isDefaultPrevented()&&((l||!S)&&Ke&&(ee.preventDefault(),$r.text=ee.target.value,Ke(ee)),yr&&Xe!=null&&setTimeout(()=>Xe.blur(),0))}function Qa(ee){try{var Xe=ee.target,Mt=Xe.selectionStart,yr=Xe.selectionEnd,$r={start:Mt,end:yr};Ae&&(ee.nativeEvent.selection=$r,ee.nativeEvent.text=ee.target.value,Ae(ee)),Po.current===Yn&&(cs.current=$r)}catch{}}dS(()=>{var ee=Jn.current;ee!=null&&xo!=null&&ix(ee,xo),document.activeElement===ee&&(Di._currentlyFocusedNode=ee)},[Jn,xo]);var Do=S?"textarea":"input";nT(Jn,R),sT(Jn,{onMoveShouldSetResponder:C,onMoveShouldSetResponderCapture:A,onResponderEnd:L,onResponderGrant:D,onResponderMove:de,onResponderReject:fe,onResponderRelease:je,onResponderStart:Re,onResponderTerminate:$,onResponderTerminationRequest:Y,onScrollShouldSetResponder:ie,onScrollShouldSetResponderCapture:we,onSelectionChangeShouldSetResponder:un,onSelectionChangeShouldSetResponderCapture:at,onStartShouldSetResponder:$t,onStartShouldSetResponderCapture:dt});var _i=KE(),ds=_i.direction,$e=q9(t);$e.autoCapitalize=r,$e.autoComplete=i||s||"on",$e.autoCorrect=a?"on":"off",$e.dir=d!==void 0?d:"auto",$e.enterKeyHint=p||as,$e.inputMode=et,$e.onBlur=qa,$e.onChange=hs,$e.onFocus=ac,$e.onKeyDown=Ga,$e.onSelect=Qa,$e.readOnly=vi===!0||f===!1,$e.rows=S?mr??y:1,$e.spellCheck=us??a,$e.style=[{"--placeholderTextColor":Ot},c_.textinput$raw,c_.placeholder,t.style,u&&c_.caretHidden],$e.type=S?void 0:Oe,$e.virtualkeyboardpolicy=Ao===!1?"manual":"auto";var Zn=rT($e),Xa=$d(Jn,Zn,ko,e);$e.ref=Xa;var wi=t.lang!=null?fy(t.lang):null,Ya=t.dir||wi,jr=Ya||ds,Ja=Uu(Do,$e,{writingDirection:jr});return Ja});Hn.displayName="TextInput";Hn.State=Di;var c_=De.create({textinput$raw:{MozAppearance:"textfield",WebkitAppearance:"none",backgroundColor:"transparent",border:"0 solid black",borderRadius:0,boxSizing:"border-box",font:"14px System",margin:0,padding:0,resize:"none"},placeholder:{placeholderTextColor:"var(--placeholderTextColor)"},caretHidden:{caretColor:"transparent"}});/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sx="popstate";function Q9(t={}){function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Wa(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ES("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:dd(s))}function r(i,s){pr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return Y9(e,n,r,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X9(){return Math.random().toString(36).substring(2,10)}function ox(t,e){return{usr:t.state,key:t.key,idx:e}}function ES(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Wa(e):e,state:n,key:e&&e.key||r||X9()}}function dd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Wa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Y9(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let b=c(),S=b==null?null:b-u;u=b,l&&l({action:a,location:E.location,delta:S})}function f(b,S){a="PUSH";let y=ES(E.location,b,S);n&&n(y,b),u=c()+1;let w=ox(y,u),x=E.createHref(y);try{o.pushState(w,"",x)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(x)}s&&l&&l({action:a,location:E.location,delta:1})}function p(b,S){a="REPLACE";let y=ES(E.location,b,S);n&&n(y,b),u=c();let w=ox(y,u),x=E.createHref(y);o.replaceState(w,"",x),s&&l&&l({action:a,location:E.location,delta:0})}function g(b){return J9(b)}let E={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(sx,d),l=b,()=>{i.removeEventListener(sx,d),l=null}},createHref(b){return e(i,b)},createURL:g,encodeLocation(b){let S=g(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:f,replace:p,go(b){return o.go(b)}};return E}function J9(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),st(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:dd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function EM(t,e,n="/"){return Z9(t,e,n,!1)}function Z9(t,e,n,r){let i=typeof e=="string"?Wa(e):e,s=Wi(i.pathname||"/",n);if(s==null)return null;let o=TM(t);eW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=hW(s);a=uW(o[l],u,r)}return a}function TM(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;st(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=Fi([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(st(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),TM(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:aW(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of bM(o.path))s(o,a,!0,u)}),e}function bM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=bM(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function eW(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lW(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var tW=/^:[\w-]+$/,nW=3,rW=2,iW=1,sW=10,oW=-2,ax=t=>t==="*";function aW(t,e){let n=t.split("/"),r=n.length;return n.some(ax)&&(r+=oW),e&&(r+=rW),n.filter(i=>!ax(i)).reduce((i,s)=>i+(tW.test(s)?nW:s===""?iW:sW),r)}function lW(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function uW(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=rg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=rg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Fi([s,d.pathname]),pathnameBase:gW(Fi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Fi([s,d.pathnameBase]))}return o}function rg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cW(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function cW(t,e=!1,n=!0){pr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function hW(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Wi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var dW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fW=t=>dW.test(t);function pW(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wa(t):t,s;if(n)if(fW(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),pr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=lx(n.substring(1),"/"):s=lx(n,e)}else s=e;return{pathname:s,search:yW(r),hash:vW(i)}}function lx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function h_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mW(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function IM(t){let e=mW(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function RM(t,e,n,r=!1){let i;typeof t=="string"?i=Wa(t):(i={...t},st(!i.pathname||!i.pathname.includes("?"),h_("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),h_("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),h_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=pW(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Fi=t=>t.join("/").replace(/\/\/+/g,"/"),gW=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yW=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vW=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _W(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function wW(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var CM=["POST","PUT","PATCH","DELETE"];new Set(CM);var SW=["GET",...CM];new Set(SW);var zu=I.createContext(null);zu.displayName="DataRouter";var yy=I.createContext(null);yy.displayName="DataRouterState";I.createContext(!1);var xM=I.createContext({isTransitioning:!1});xM.displayName="ViewTransition";var EW=I.createContext(new Map);EW.displayName="Fetchers";var TW=I.createContext(null);TW.displayName="Await";var Fr=I.createContext(null);Fr.displayName="Navigation";var zd=I.createContext(null);zd.displayName="Location";var es=I.createContext({outlet:null,matches:[],isDataRoute:!1});es.displayName="Route";var oT=I.createContext(null);oT.displayName="RouteError";function bW(t,{relative:e}={}){st(Wd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(Fr),{hash:i,pathname:s,search:o}=Hd(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Fi([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Wd(){return I.useContext(zd)!=null}function yi(){return st(Wd(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(zd).location}var AM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PM(t){I.useContext(Fr).static||I.useLayoutEffect(t)}function Wu(){let{isDataRoute:t}=I.useContext(es);return t?VW():IW()}function IW(){st(Wd(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(zu),{basename:e,navigator:n}=I.useContext(Fr),{matches:r}=I.useContext(es),{pathname:i}=yi(),s=JSON.stringify(IM(r)),o=I.useRef(!1);return PM(()=>{o.current=!0}),I.useCallback((l,u={})=>{if(pr(o.current,AM),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=RM(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Fi([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}I.createContext(null);function Hd(t,{relative:e}={}){let{matches:n}=I.useContext(es),{pathname:r}=yi(),i=JSON.stringify(IM(n));return I.useMemo(()=>RM(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function RW(t,e){return kM(t,e)}function kM(t,e,n,r,i){var y;st(Wd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I.useContext(Fr),{matches:o}=I.useContext(es),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";DM(u,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=yi(),p;if(e){let w=typeof e=="string"?Wa(e):e;st(c==="/"||((y=w.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),p=w}else p=f;let g=p.pathname||"/",E=g;if(c!=="/"){let w=c.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=EM(t,{pathname:E});pr(d||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),pr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=kW(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Fi([c,s.encodeLocation?s.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Fi([c,s.encodeLocation?s.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,i);return e&&S?I.createElement(zd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},S):S}function CW(){let t=NW(),e=_W(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:s},"ErrorBoundary")," or"," ",I.createElement("code",{style:s},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,o)}var xW=I.createElement(CW,null),AW=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?I.createElement(es.Provider,{value:this.props.routeContext},I.createElement(oT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function PW({routeContext:t,match:e,children:n}){let r=I.useContext(zu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(es.Provider,{value:t},n)}function kW(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);st(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&r?(c,d)=>{var f,p;r(c,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:wW(n.matches),errorInfo:d})}:void 0;return s.reduceRight((c,d,f)=>{let p,g=!1,E=null,b=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,E=d.route.errorElement||xW,a&&(l<0&&f===0?(DM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===f&&(g=!0,b=d.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,f+1)),y=()=>{let w;return p?w=E:g?w=b:d.route.Component?w=I.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,I.createElement(PW,{match:d,routeContext:{outlet:c,matches:S,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?I.createElement(AW,{location:n.location,revalidation:n.revalidation,component:E,error:p,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):y()},null)}function aT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DW(t){let e=I.useContext(zu);return st(e,aT(t)),e}function OW(t){let e=I.useContext(yy);return st(e,aT(t)),e}function MW(t){let e=I.useContext(es);return st(e,aT(t)),e}function lT(t){let e=MW(t),n=e.matches[e.matches.length-1];return st(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function LW(){return lT("useRouteId")}function NW(){var r;let t=I.useContext(oT),e=OW("useRouteError"),n=lT("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function VW(){let{router:t}=DW("useNavigate"),e=lT("useNavigate"),n=I.useRef(!1);return PM(()=>{n.current=!0}),I.useCallback(async(i,s={})=>{pr(n.current,AM),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var ux={};function DM(t,e,n){!e&&!ux[t]&&(ux[t]=!0,pr(!1,n))}I.memo(FW);function FW({routes:t,future:e,state:n,unstable_onError:r}){return kM(t,void 0,n,r,e)}function Sl(t){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BW({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){st(!Wd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=Wa(n));let{pathname:u="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,g=I.useMemo(()=>{let E=Wi(u,a);return E==null?null:{location:{pathname:E,search:c,hash:d,state:f,key:p},navigationType:r}},[a,u,c,d,f,p,r]);return pr(g!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:I.createElement(Fr.Provider,{value:l},I.createElement(zd.Provider,{children:e,value:g}))}function jW({children:t,location:e}){return RW(TS(t),e)}function TS(t,e=[]){let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,TS(r.props.children,s));return}st(r.type===Sl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=TS(r.props.children,s)),n.push(o)}),n}var Kp="get",qp="application/x-www-form-urlencoded";function vy(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function $W(t){return vy(t)&&t.tagName.toLowerCase()==="button"}function UW(t){return vy(t)&&t.tagName.toLowerCase()==="form"}function zW(t){return vy(t)&&t.tagName.toLowerCase()==="input"}function WW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function HW(t,e){return t.button===0&&(!e||e==="_self")&&!WW(t)}var lp=null;function KW(){if(lp===null)try{new FormData(document.createElement("form"),0),lp=!1}catch{lp=!0}return lp}var qW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function d_(t){return t!=null&&!qW.has(t)?(pr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qp}"`),null):t}function GW(t,e){let n,r,i,s,o;if(UW(t)){let a=t.getAttribute("action");r=a?Wi(a,e):null,n=t.getAttribute("method")||Kp,i=d_(t.getAttribute("enctype"))||qp,s=new FormData(t)}else if($W(t)||zW(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Wi(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Kp,i=d_(t.getAttribute("formenctype"))||d_(a.getAttribute("enctype"))||qp,s=new FormData(a,t),!KW()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(vy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Kp,r=null,i=qp,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uT(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QW(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Wi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function XW(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YW(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function JW(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await XW(s,n);return o.links?o.links():[]}return[]}));return n8(r.flat(1).filter(YW).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function cx(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function ZW(t,e,{includeHydrateFallback:n}={}){return e8(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function e8(t){return[...new Set(t)]}function t8(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function n8(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(t8(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function OM(){let t=I.useContext(zu);return uT(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function r8(){let t=I.useContext(yy);return uT(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cT=I.createContext(void 0);cT.displayName="FrameworkContext";function MM(){let t=I.useContext(cT);return uT(t,"You must render this element inside a <HydratedRouter> element"),t}function i8(t,e){let n=I.useContext(cT),[r,i]=I.useState(!1),[s,o]=I.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=I.useRef(null);I.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=S=>{S.forEach(y=>{o(y.isIntersecting)})},b=new IntersectionObserver(E,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[t]),I.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Vc(a,p),onBlur:Vc(l,g),onMouseEnter:Vc(u,p),onMouseLeave:Vc(c,g),onTouchStart:Vc(d,p)}]:[!1,f,{}]}function Vc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function s8({page:t,...e}){let{router:n}=OM(),r=I.useMemo(()=>EM(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?I.createElement(a8,{page:t,matches:r,...e}):null}function o8(t){let{manifest:e,routeModules:n}=MM(),[r,i]=I.useState([]);return I.useEffect(()=>{let s=!1;return JW(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function a8({page:t,matches:e,...n}){let r=yi(),{manifest:i,routeModules:s}=MM(),{basename:o}=OM(),{loaderData:a,matches:l}=r8(),u=I.useMemo(()=>cx(t,e,l,i,r,"data"),[t,e,l,i,r]),c=I.useMemo(()=>cx(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=I.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,E=!1;if(e.forEach(S=>{var w;let y=i.routes[S.route.id];!y||!y.hasLoader||(!u.some(x=>x.route.id===S.route.id)&&S.route.id in a&&((w=s[S.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?E=!0:g.add(S.route.id))}),g.size===0)return[];let b=QW(t,o,"data");return E&&g.size>0&&b.searchParams.set("_routes",e.filter(S=>g.has(S.route.id)).map(S=>S.route.id).join(",")),[b.pathname+b.search]},[o,a,r,i,u,e,t,s]),f=I.useMemo(()=>ZW(c,i),[c,i]),p=o8(c);return I.createElement(I.Fragment,null,d.map(g=>I.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>I.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:E})=>I.createElement("link",{key:g,nonce:n.nonce,...E})))}function l8(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var LM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LM&&(window.__reactRouterVersion="7.10.1")}catch{}function u8({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=I.useRef();i.current==null&&(i.current=Q9({window:r,v5Compat:!0}));let s=i.current,[o,a]=I.useState({action:s.action,location:s.location}),l=I.useCallback(u=>{n===!1?a(u):I.startTransition(()=>a(u))},[n]);return I.useLayoutEffect(()=>s.listen(l),[s,l]),I.createElement(BW,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n===!0})}var NM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VM=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},p){let{basename:g,unstable_useTransitions:E}=I.useContext(Fr),b=typeof u=="string"&&NM.test(u),S,y=!1;if(typeof u=="string"&&b&&(S=u,LM))try{let C=new URL(window.location.href),A=u.startsWith("//")?new URL(C.protocol+u):new URL(u),L=Wi(A.pathname,g);A.origin===C.origin&&L!=null?u=L+A.search+A.hash:y=!0}catch{pr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=bW(u,{relative:i}),[x,O,k]=i8(r,f),T=f8(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d,unstable_useTransitions:E});function v(C){e&&e(C),C.defaultPrevented||T(C)}let R=I.createElement("a",{...f,...k,href:S||w,onClick:y||s?e:v,ref:l8(p,O),target:l,"data-discover":!b&&n==="render"?"true":void 0});return x&&!b?I.createElement(I.Fragment,null,R,I.createElement(s8,{page:w})):R});VM.displayName="Link";var c8=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=Hd(o,{relative:u.relative}),f=yi(),p=I.useContext(yy),{navigator:g,basename:E}=I.useContext(Fr),b=p!=null&&v8(d)&&a===!0,S=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,y=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,S=S.toLowerCase()),w&&E&&(w=Wi(w,E)||w);const x=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=y===S||!i&&y.startsWith(S)&&y.charAt(x)==="/",k=w!=null&&(w===S||!i&&w.startsWith(S)&&w.charAt(S.length)==="/"),T={isActive:O,isPending:k,isTransitioning:b},v=O?e:void 0,R;typeof r=="function"?R=r(T):R=[r,O?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(T):s;return I.createElement(VM,{...u,"aria-current":v,className:R,ref:c,style:C,to:o,viewTransition:a},typeof l=="function"?l(T):l)});c8.displayName="NavLink";var h8=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Kp,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},p)=>{let{unstable_useTransitions:g}=I.useContext(Fr),E=g8(),b=y8(a,{relative:u}),S=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&NM.test(a),w=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let O=x.nativeEvent.submitter,k=(O==null?void 0:O.getAttribute("formmethod"))||o,T=()=>E(O||x.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d});g&&n!==!1?I.startTransition(()=>T()):T()};return I.createElement("form",{ref:p,method:S,action:b,onSubmit:r?l:w,...f,"data-discover":!y&&t==="render"?"true":void 0})});h8.displayName="Form";function d8(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FM(t){let e=I.useContext(zu);return st(e,d8(t)),e}function f8(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_useTransitions:a}={}){let l=Wu(),u=yi(),c=Hd(t,{relative:s});return I.useCallback(d=>{if(HW(d,e)){d.preventDefault();let f=n!==void 0?n:dd(u)===dd(c),p=()=>l(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o});a?I.startTransition(()=>p()):p()}},[u,l,c,n,r,e,t,i,s,o,a])}var p8=0,m8=()=>`__${String(++p8)}__`;function g8(){let{router:t}=FM("useSubmit"),{basename:e}=I.useContext(Fr),n=LW(),r=t.fetch,i=t.navigate;return I.useCallback(async(s,o={})=>{let{action:a,method:l,encType:u,formData:c,body:d}=GW(s,e);if(o.navigate===!1){let f=o.fetcherKey||m8();await r(f,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function y8(t,{relative:e}={}){let{basename:n}=I.useContext(Fr),r=I.useContext(es);st(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Hd(t||".",{relative:e})},o=yi();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Fi([n,s.pathname])),dd(s)}function v8(t,{relative:e}={}){let n=I.useContext(xM);st(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=FM("useViewTransitionState"),i=Hd(t,{relative:e});if(!n.isTransitioning)return!1;let s=Wi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Wi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return rg(i.pathname,o)!=null||rg(i.pathname,s)!=null}const _8=()=>{};var hx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[c],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new S8;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class S8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E8=function(t){const e=BM(t);return jM.encodeByteArray(e,!0)},$M=function(t){return E8(t).replace(/\./g,"")},UM=function(t){try{return jM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=()=>zM().__FIREBASE_DEFAULTS__,b8=()=>{if(typeof process>"u"||typeof hx>"u")return;const t=hx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UM(t[1]);return e&&JSON.parse(e)},_y=()=>{try{return _8()||T8()||b8()||I8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},R8=t=>{var e,n;return(n=(e=_y())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},WM=()=>{var t;return(t=_y())==null?void 0:t.config},HM=t=>{var e;return(e=_y())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KM(t){return(await fetch(t,{credentials:"include"})).ok}const Ch={};function x8(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ch))Ch[e]?t.emulator.push(e):t.prod.push(e);return t}function A8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dx=!1;function P8(t,e){if(typeof window>"u"||typeof document>"u"||!Hu(window.location.host)||Ch[t]===e||Ch[t]||dx)return;Ch[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=x8().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{dx=!0,o()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=A8(r),p=n("text"),g=document.getElementById(p)||document.createElement("span"),E=n("learnmore"),b=document.getElementById(E)||document.createElement("a"),S=n("preprendIcon"),y=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),c(b,E);const x=u();l(y,S),w.append(y,g,b,x),document.body.appendChild(w)}s?(g.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function qM(){var e;const t=(e=_y())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function M8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L8(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GM(){return!qM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QM(){return!qM()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function XM(){try{return typeof indexedDB=="object"}catch{return!1}}function N8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="FirebaseError";class ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V8,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kd.prototype.create)}}class Kd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?F8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ts(i,a,r)}}function F8(t,e){return t.replace(B8,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const B8=/\{\$([^}]+)}/g;function j8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(fx(s)&&fx(o)){if(!xa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $8(t,e){const n=new U8(t,e);return n.subscribe.bind(n)}class U8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");z8(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=f_),i.error===void 0&&(i.error=f_),i.complete===void 0&&(i.complete=f_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function f_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Aa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new C8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K8(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H8(t){return t===Go?void 0:t}function K8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new W8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const G8={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Q8=Ee.INFO,X8={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Y8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=X8[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hT{constructor(e){this.name=e,this._logLevel=Q8,this._logHandler=Y8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const J8=(t,e)=>e.some(n=>t instanceof n);let px,mx;function Z8(){return px||(px=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eH(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YM=new WeakMap,bS=new WeakMap,JM=new WeakMap,p_=new WeakMap,dT=new WeakMap;function tH(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(no(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&YM.set(n,t)}).catch(()=>{}),dT.set(e,t),e}function nH(t){if(bS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bS.set(t,e)}let IS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return no(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rH(t){IS=t(IS)}function iH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(m_(this),e,...n);return JM.set(r,e.sort?e.sort():[e]),no(r)}:eH().includes(t)?function(...e){return t.apply(m_(this),e),no(YM.get(this))}:function(...e){return no(t.apply(m_(this),e))}}function sH(t){return typeof t=="function"?iH(t):(t instanceof IDBTransaction&&nH(t),J8(t,Z8())?new Proxy(t,IS):t)}function no(t){if(t instanceof IDBRequest)return tH(t);if(p_.has(t))return p_.get(t);const e=sH(t);return e!==t&&(p_.set(t,e),dT.set(e,t)),e}const m_=t=>dT.get(t);function oH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=no(o);return r&&o.addEventListener("upgradeneeded",l=>{r(no(o.result),l.oldVersion,l.newVersion,no(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const aH=["get","getKey","getAll","getAllKeys","count"],lH=["put","add","delete","clear"],g_=new Map;function gx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(g_.get(e))return g_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aH.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return g_.set(e,s),s}rH(t=>({...t,get:(e,n,r)=>gx(e,n)||t.get(e,n,r),has:(e,n)=>!!gx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const RS="@firebase/app",yx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new hT("@firebase/app"),hH="@firebase/app-compat",dH="@firebase/analytics-compat",fH="@firebase/analytics",pH="@firebase/app-check-compat",mH="@firebase/app-check",gH="@firebase/auth",yH="@firebase/auth-compat",vH="@firebase/database",_H="@firebase/data-connect",wH="@firebase/database-compat",SH="@firebase/functions",EH="@firebase/functions-compat",TH="@firebase/installations",bH="@firebase/installations-compat",IH="@firebase/messaging",RH="@firebase/messaging-compat",CH="@firebase/performance",xH="@firebase/performance-compat",AH="@firebase/remote-config",PH="@firebase/remote-config-compat",kH="@firebase/storage",DH="@firebase/storage-compat",OH="@firebase/firestore",MH="@firebase/ai",LH="@firebase/firestore-compat",NH="firebase",VH="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="[DEFAULT]",FH={[RS]:"fire-core",[hH]:"fire-core-compat",[fH]:"fire-analytics",[dH]:"fire-analytics-compat",[mH]:"fire-app-check",[pH]:"fire-app-check-compat",[gH]:"fire-auth",[yH]:"fire-auth-compat",[vH]:"fire-rtdb",[_H]:"fire-data-connect",[wH]:"fire-rtdb-compat",[SH]:"fire-fn",[EH]:"fire-fn-compat",[TH]:"fire-iid",[bH]:"fire-iid-compat",[IH]:"fire-fcm",[RH]:"fire-fcm-compat",[CH]:"fire-perf",[xH]:"fire-perf-compat",[AH]:"fire-rc",[PH]:"fire-rc-compat",[kH]:"fire-gcs",[DH]:"fire-gcs-compat",[OH]:"fire-fst",[LH]:"fire-fst-compat",[MH]:"fire-vertex","fire-js":"fire-js",[NH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new Map,BH=new Map,xS=new Map;function vx(t,e){try{t.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _u(t){const e=t.name;if(xS.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;xS.set(e,t);for(const n of ig.values())vx(n,t);for(const n of BH.values())vx(n,t);return!0}function fT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ro=new Kd("app","Firebase",jH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=VH;function ZM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:CS,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ro.create("bad-app-name",{appName:String(i)});if(n||(n=WM()),!n)throw ro.create("no-options");const s=ig.get(i);if(s){if(xa(n,s.options)&&xa(r,s.config))return s;throw ro.create("duplicate-app",{appName:i})}const o=new q8(i);for(const l of xS.values())o.addComponent(l);const a=new $H(n,r,o);return ig.set(i,a),a}function UH(t=CS){const e=ig.get(t);if(!e&&t===CS&&WM())return ZM();if(!e)throw ro.create("no-app",{appName:t});return e}function io(t,e,n){let r=FH[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(o.join(" "));return}_u(new Aa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="firebase-heartbeat-database",WH=1,fd="firebase-heartbeat-store";let y_=null;function eL(){return y_||(y_=oH(zH,WH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fd)}catch(n){console.warn(n)}}}}).catch(t=>{throw ro.create("idb-open",{originalErrorMessage:t.message})})),y_}async function HH(t){try{const n=(await eL()).transaction(fd),r=await n.objectStore(fd).get(tL(t));return await n.done,r}catch(e){if(e instanceof ts)Hi.warn(e.message);else{const n=ro.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(n.message)}}}async function _x(t,e){try{const r=(await eL()).transaction(fd,"readwrite");await r.objectStore(fd).put(e,tL(t)),await r.done}catch(n){if(n instanceof ts)Hi.warn(n.message);else{const r=ro.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(r.message)}}}function tL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH=1024,qH=30;class GH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>qH){const o=YH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wx(),{heartbeatsToSend:r,unsentEntries:i}=QH(this._heartbeatsCache.heartbeats),s=$M(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hi.warn(n),""}}}function wx(){return new Date().toISOString().substring(0,10)}function QH(t,e=KH){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XM()?N8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HH(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _x(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _x(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sx(t){return $M(JSON.stringify({version:2,heartbeats:t})).length}function YH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(t){_u(new Aa("platform-logger",e=>new uH(e),"PRIVATE")),_u(new Aa("heartbeat",e=>new GH(e),"PRIVATE")),io(RS,yx,t),io(RS,yx,"esm2020"),io("fire-js","")}JH("");var ZH="firebase",eK="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */io(ZH,eK,"app");var Ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var so,nL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function R(){}R.prototype=v.prototype,T.F=v.prototype,T.prototype=new R,T.prototype.constructor=T,T.D=function(C,A,L){for(var D=Array(arguments.length-2),de=2;de<arguments.length;de++)D[de-2]=arguments[de];return v.prototype[A].apply(C,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,R){R||(R=0);const C=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)C[A]=v.charCodeAt(R++)|v.charCodeAt(R++)<<8|v.charCodeAt(R++)<<16|v.charCodeAt(R++)<<24;else for(A=0;A<16;++A)C[A]=v[R++]|v[R++]<<8|v[R++]<<16|v[R++]<<24;v=T.g[0],R=T.g[1],A=T.g[2];let L=T.g[3],D;D=v+(L^R&(A^L))+C[0]+3614090360&4294967295,v=R+(D<<7&4294967295|D>>>25),D=L+(A^v&(R^A))+C[1]+3905402710&4294967295,L=v+(D<<12&4294967295|D>>>20),D=A+(R^L&(v^R))+C[2]+606105819&4294967295,A=L+(D<<17&4294967295|D>>>15),D=R+(v^A&(L^v))+C[3]+3250441966&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(L^R&(A^L))+C[4]+4118548399&4294967295,v=R+(D<<7&4294967295|D>>>25),D=L+(A^v&(R^A))+C[5]+1200080426&4294967295,L=v+(D<<12&4294967295|D>>>20),D=A+(R^L&(v^R))+C[6]+2821735955&4294967295,A=L+(D<<17&4294967295|D>>>15),D=R+(v^A&(L^v))+C[7]+4249261313&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(L^R&(A^L))+C[8]+1770035416&4294967295,v=R+(D<<7&4294967295|D>>>25),D=L+(A^v&(R^A))+C[9]+2336552879&4294967295,L=v+(D<<12&4294967295|D>>>20),D=A+(R^L&(v^R))+C[10]+4294925233&4294967295,A=L+(D<<17&4294967295|D>>>15),D=R+(v^A&(L^v))+C[11]+2304563134&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(L^R&(A^L))+C[12]+1804603682&4294967295,v=R+(D<<7&4294967295|D>>>25),D=L+(A^v&(R^A))+C[13]+4254626195&4294967295,L=v+(D<<12&4294967295|D>>>20),D=A+(R^L&(v^R))+C[14]+2792965006&4294967295,A=L+(D<<17&4294967295|D>>>15),D=R+(v^A&(L^v))+C[15]+1236535329&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(A^L&(R^A))+C[1]+4129170786&4294967295,v=R+(D<<5&4294967295|D>>>27),D=L+(R^A&(v^R))+C[6]+3225465664&4294967295,L=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(L^v))+C[11]+643717713&4294967295,A=L+(D<<14&4294967295|D>>>18),D=R+(L^v&(A^L))+C[0]+3921069994&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(A^L&(R^A))+C[5]+3593408605&4294967295,v=R+(D<<5&4294967295|D>>>27),D=L+(R^A&(v^R))+C[10]+38016083&4294967295,L=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(L^v))+C[15]+3634488961&4294967295,A=L+(D<<14&4294967295|D>>>18),D=R+(L^v&(A^L))+C[4]+3889429448&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(A^L&(R^A))+C[9]+568446438&4294967295,v=R+(D<<5&4294967295|D>>>27),D=L+(R^A&(v^R))+C[14]+3275163606&4294967295,L=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(L^v))+C[3]+4107603335&4294967295,A=L+(D<<14&4294967295|D>>>18),D=R+(L^v&(A^L))+C[8]+1163531501&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(A^L&(R^A))+C[13]+2850285829&4294967295,v=R+(D<<5&4294967295|D>>>27),D=L+(R^A&(v^R))+C[2]+4243563512&4294967295,L=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(L^v))+C[7]+1735328473&4294967295,A=L+(D<<14&4294967295|D>>>18),D=R+(L^v&(A^L))+C[12]+2368359562&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(R^A^L)+C[5]+4294588738&4294967295,v=R+(D<<4&4294967295|D>>>28),D=L+(v^R^A)+C[8]+2272392833&4294967295,L=v+(D<<11&4294967295|D>>>21),D=A+(L^v^R)+C[11]+1839030562&4294967295,A=L+(D<<16&4294967295|D>>>16),D=R+(A^L^v)+C[14]+4259657740&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(R^A^L)+C[1]+2763975236&4294967295,v=R+(D<<4&4294967295|D>>>28),D=L+(v^R^A)+C[4]+1272893353&4294967295,L=v+(D<<11&4294967295|D>>>21),D=A+(L^v^R)+C[7]+4139469664&4294967295,A=L+(D<<16&4294967295|D>>>16),D=R+(A^L^v)+C[10]+3200236656&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(R^A^L)+C[13]+681279174&4294967295,v=R+(D<<4&4294967295|D>>>28),D=L+(v^R^A)+C[0]+3936430074&4294967295,L=v+(D<<11&4294967295|D>>>21),D=A+(L^v^R)+C[3]+3572445317&4294967295,A=L+(D<<16&4294967295|D>>>16),D=R+(A^L^v)+C[6]+76029189&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(R^A^L)+C[9]+3654602809&4294967295,v=R+(D<<4&4294967295|D>>>28),D=L+(v^R^A)+C[12]+3873151461&4294967295,L=v+(D<<11&4294967295|D>>>21),D=A+(L^v^R)+C[15]+530742520&4294967295,A=L+(D<<16&4294967295|D>>>16),D=R+(A^L^v)+C[2]+3299628645&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(A^(R|~L))+C[0]+4096336452&4294967295,v=R+(D<<6&4294967295|D>>>26),D=L+(R^(v|~A))+C[7]+1126891415&4294967295,L=v+(D<<10&4294967295|D>>>22),D=A+(v^(L|~R))+C[14]+2878612391&4294967295,A=L+(D<<15&4294967295|D>>>17),D=R+(L^(A|~v))+C[5]+4237533241&4294967295,R=A+(D<<21&4294967295|D>>>11),D=v+(A^(R|~L))+C[12]+1700485571&4294967295,v=R+(D<<6&4294967295|D>>>26),D=L+(R^(v|~A))+C[3]+2399980690&4294967295,L=v+(D<<10&4294967295|D>>>22),D=A+(v^(L|~R))+C[10]+4293915773&4294967295,A=L+(D<<15&4294967295|D>>>17),D=R+(L^(A|~v))+C[1]+2240044497&4294967295,R=A+(D<<21&4294967295|D>>>11),D=v+(A^(R|~L))+C[8]+1873313359&4294967295,v=R+(D<<6&4294967295|D>>>26),D=L+(R^(v|~A))+C[15]+4264355552&4294967295,L=v+(D<<10&4294967295|D>>>22),D=A+(v^(L|~R))+C[6]+2734768916&4294967295,A=L+(D<<15&4294967295|D>>>17),D=R+(L^(A|~v))+C[13]+1309151649&4294967295,R=A+(D<<21&4294967295|D>>>11),D=v+(A^(R|~L))+C[4]+4149444226&4294967295,v=R+(D<<6&4294967295|D>>>26),D=L+(R^(v|~A))+C[11]+3174756917&4294967295,L=v+(D<<10&4294967295|D>>>22),D=A+(v^(L|~R))+C[2]+718787259&4294967295,A=L+(D<<15&4294967295|D>>>17),D=R+(L^(A|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+L&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const R=v-this.blockSize,C=this.C;let A=this.h,L=0;for(;L<v;){if(A==0)for(;L<=R;)i(this,T,L),L+=this.blockSize;if(typeof T=="string"){for(;L<v;)if(C[A++]=T.charCodeAt(L++),A==this.blockSize){i(this,C),A=0;break}}else for(;L<v;)if(C[A++]=T[L++],A==this.blockSize){i(this,C),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var R=T.length-8;R<T.length;++R)T[R]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)T[v++]=this.g[R]>>>C&255;return T};function s(T,v){var R=a;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=v(T)}function o(T,v){this.h=v;const R=[];let C=!0;for(let A=T.length-1;A>=0;A--){const L=T[A]|0;C&&L==v||(R[A]=L,C=!1)}this.g=R}var a={};function l(T){return-128<=T&&T<128?s(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return b(u(-T));const v=[];let R=1;for(let C=0;T>=R;C++)v[C]=T/R|0,R*=4294967296;return new o(v,0)}function c(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return b(c(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(v,8));let C=d;for(let L=0;L<T.length;L+=8){var A=Math.min(8,T.length-L);const D=parseInt(T.substring(L,L+A),v);A<8?(A=u(Math.pow(v,A)),C=C.j(A).add(u(D))):(C=C.j(R),C=C.add(u(D)))}return C}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-b(this).m();let T=0,v=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);T+=(C>=0?C:4294967296+C)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(g(this))return"0";if(E(this))return"-"+b(this).toString(T);const v=u(Math.pow(T,6));var R=this;let C="";for(;;){const A=x(R,v).g;R=S(R,A.j(v));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(T);if(R=A,g(R))return L+C;for(;L.length<6;)L="0"+L;C=L+C}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function g(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function E(T){return T.h==-1}t.l=function(T){return T=S(this,T),E(T)?-1:g(T)?0:1};function b(T){const v=T.g.length,R=[];for(let C=0;C<v;C++)R[C]=~T.g[C];return new o(R,~T.h).add(f)}t.abs=function(){return E(this)?b(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),R=[];let C=0;for(let A=0;A<=v;A++){let L=C+(this.i(A)&65535)+(T.i(A)&65535),D=(L>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);C=D>>>16,L&=65535,D&=65535,R[A]=D<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function S(T,v){return T.add(b(v))}t.j=function(T){if(g(this)||g(T))return d;if(E(this))return E(T)?b(this).j(b(T)):b(b(this).j(T));if(E(T))return b(this.j(b(T)));if(this.l(p)<0&&T.l(p)<0)return u(this.m()*T.m());const v=this.g.length+T.g.length,R=[];for(var C=0;C<2*v;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let A=0;A<T.g.length;A++){const L=this.i(C)>>>16,D=this.i(C)&65535,de=T.i(A)>>>16,fe=T.i(A)&65535;R[2*C+2*A]+=D*fe,y(R,2*C+2*A),R[2*C+2*A+1]+=L*fe,y(R,2*C+2*A+1),R[2*C+2*A+1]+=D*de,y(R,2*C+2*A+1),R[2*C+2*A+2]+=L*de,y(R,2*C+2*A+2)}for(T=0;T<v;T++)R[T]=R[2*T+1]<<16|R[2*T];for(T=v;T<2*v;T++)R[T]=0;return new o(R,0)};function y(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function w(T,v){this.g=T,this.h=v}function x(T,v){if(g(v))throw Error("division by zero");if(g(T))return new w(d,d);if(E(T))return v=x(b(T),v),new w(b(v.g),b(v.h));if(E(v))return v=x(T,b(v)),new w(b(v.g),v.h);if(T.g.length>30){if(E(T)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=v;C.l(T)<=0;)R=O(R),C=O(C);var A=k(R,1),L=k(C,1);for(C=k(C,2),R=k(R,2);!g(C);){var D=L.add(C);D.l(T)<=0&&(A=A.add(R),L=D),C=k(C,1),R=k(R,1)}return v=S(T,A.j(v)),new w(A,v)}for(A=d;T.l(v)>=0;){for(R=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),L=u(R),D=L.j(v);E(D)||D.l(T)>0;)R-=C,L=u(R),D=L.j(v);g(L)&&(L=f),A=A.add(L),T=S(T,D)}return new w(A,T)}t.B=function(T){return x(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<v;C++)R[C]=this.i(C)&T.i(C);return new o(R,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<v;C++)R[C]=this.i(C)|T.i(C);return new o(R,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<v;C++)R[C]=this.i(C)^T.i(C);return new o(R,this.h^T.h)};function O(T){const v=T.g.length+1,R=[];for(let C=0;C<v;C++)R[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(R,T.h)}function k(T,v){const R=v>>5;v%=32;const C=T.g.length-R,A=[];for(let L=0;L<C;L++)A[L]=v>0?T.i(L+R)>>>v|T.i(L+R+1)<<32-v:T.i(L+R);return new o(A,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,nL=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,so=o}).apply(typeof Ex<"u"?Ex:typeof self<"u"?self:typeof window<"u"?window:{});var up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rL,Zc,iL,Gp,AS,sL,oL,aL;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof up=="object"&&up];for(var m=0;m<h.length;++m){var _=h[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(h,m){if(m)e:{var _=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var V=h[P];if(!(V in _))break e;_=_[V]}h=h[h.length-1],P=_[h],m=m(P),m!=P&&m!=null&&e(_,h,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(m){var _=[],P;for(P in m)Object.prototype.hasOwnProperty.call(m,P)&&_.push([P,m[P]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(h){var m=typeof h;return m=="object"&&h!=null||m=="function"}function l(h,m,_){return h.call.apply(h.bind,arguments)}function u(h,m,_){return u=l,u.apply(null,arguments)}function c(h,m){var _=Array.prototype.slice.call(arguments,1);return function(){var P=_.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function d(h,m){function _(){}_.prototype=m.prototype,h.Z=m.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(P,V,B){for(var K=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)K[pe-2]=arguments[pe];return m.prototype[V].apply(P,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function p(h){const m=h.length;if(m>0){const _=Array(m);for(let P=0;P<m;P++)_[P]=h[P];return _}return[]}function g(h,m){for(let P=1;P<arguments.length;P++){const V=arguments[P];var _=typeof V;if(_=_!="object"?_:V?Array.isArray(V)?"array":_:"null",_=="array"||_=="object"&&typeof V.length=="number"){_=h.length||0;const B=V.length||0;h.length=_+B;for(let K=0;K<B;K++)h[_+K]=V[K]}else h.push(V)}}class E{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(h){o.setTimeout(()=>{throw h},0)}function S(){var h=T;let m=null;return h.g&&(m=h.g,h.g=h.g.next,h.g||(h.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,_){const P=w.get();P.set(m,_),this.h?this.h.next=P:this.g=P,this.h=P}}var w=new E(()=>new x,h=>h.reset());class x{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let O,k=!1,T=new y,v=()=>{const h=Promise.resolve(void 0);O=()=>{h.then(R)}};function R(){for(var h;h=S();){try{h.h.call(h.g)}catch(_){b(_)}var m=w;m.j(h),m.h<100&&(m.h++,h.next=m.g,m.g=h)}k=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(h,m){this.type=h,this.g=this.target=m,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,m=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};o.addEventListener("test",_,m),o.removeEventListener("test",_,m)}catch{}return h}();function D(h){return/^[\s\xa0]*$/.test(h)}function de(h,m){A.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,m)}d(de,A),de.prototype.init=function(h,m){const _=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=m,m=h.relatedTarget,m||(_=="mouseover"?m=h.fromElement:_=="mouseout"&&(m=h.toElement)),this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),je=0;function Re(h,m,_,P,V){this.listener=h,this.proxy=null,this.src=m,this.type=_,this.capture=!!P,this.ha=V,this.key=++je,this.da=this.fa=!1}function $(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Y(h,m,_){for(const P in h)m.call(_,h[P],P,h)}function ie(h,m){for(const _ in h)m.call(void 0,h[_],_,h)}function we(h){const m={};for(const _ in h)m[_]=h[_];return m}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function un(h,m){let _,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(_ in P)h[_]=P[_];for(let B=0;B<Ae.length;B++)_=Ae[B],Object.prototype.hasOwnProperty.call(P,_)&&(h[_]=P[_])}}function at(h){this.src=h,this.g={},this.h=0}at.prototype.add=function(h,m,_,P,V){const B=h.toString();h=this.g[B],h||(h=this.g[B]=[],this.h++);const K=dt(h,m,P,V);return K>-1?(m=h[K],_||(m.fa=!1)):(m=new Re(m,this.src,B,!!P,V),m.fa=_,h.push(m)),m};function $t(h,m){const _=m.type;if(_ in h.g){var P=h.g[_],V=Array.prototype.indexOf.call(P,m,void 0),B;(B=V>=0)&&Array.prototype.splice.call(P,V,1),B&&($(m),h.g[_].length==0&&(delete h.g[_],h.h--))}}function dt(h,m,_,P){for(let V=0;V<h.length;++V){const B=h[V];if(!B.da&&B.listener==m&&B.capture==!!_&&B.ha==P)return V}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Ot={};function kn(h,m,_,P,V){if(Array.isArray(m)){for(let B=0;B<m.length;B++)kn(h,m[B],_,P,V);return null}return _=us(_),h&&h[fe]?h.J(m,_,a(P)?!!P.capture:!1,V):vi(h,m,_,!1,P,V)}function vi(h,m,_,P,V,B){if(!m)throw Error("Invalid event type");const K=a(V)?!!V.capture:!!V;let pe=ls(h);if(pe||(h[Ke]=pe=new at(h)),_=pe.add(m,_,P,K,B),_.proxy)return _;if(P=as(),_.proxy=P,P.src=h,P.listener=_,h.addEventListener)L||(V=K),V===void 0&&(V=!1),h.addEventListener(m.toString(),P,V);else if(h.attachEvent)h.attachEvent(Yn(m.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return _}function as(){function h(_){return m.call(h.src,h.listener,_)}const m=xo;return h}function mr(h,m,_,P,V){if(Array.isArray(m))for(var B=0;B<m.length;B++)mr(h,m[B],_,P,V);else P=a(P)?!!P.capture:!!P,_=us(_),h&&h[fe]?(h=h.i,B=String(m).toString(),B in h.g&&(m=h.g[B],_=dt(m,_,P,V),_>-1&&($(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete h.g[B],h.h--)))):h&&(h=ls(h))&&(m=h.g[m.toString()],h=-1,m&&(h=dt(m,_,P,V)),(_=h>-1?m[h]:null)&&Br(_))}function Br(h){if(typeof h!="number"&&h&&!h.da){var m=h.src;if(m&&m[fe])$t(m.i,h);else{var _=h.type,P=h.proxy;m.removeEventListener?m.removeEventListener(_,P,h.capture):m.detachEvent?m.detachEvent(Yn(_),P):m.addListener&&m.removeListener&&m.removeListener(P),(_=ls(m))?($t(_,h),_.h==0&&(_.src=null,m[Ke]=null)):$(h)}}}function Yn(h){return h in Ot?Ot[h]:Ot[h]="on"+h}function xo(h,m){if(h.da)h=!0;else{m=new de(m,this);const _=h.listener,P=h.ha||h.src;h.fa&&Br(h),h=_.call(P,m)}return h}function ls(h){return h=h[Ke],h instanceof at?h:null}var Ao="__closure_events_fn_"+(Math.random()*1e9>>>0);function us(h){return typeof h=="function"?h:(h[Ao]||(h[Ao]=function(m){return h.handleEvent(m)}),h[Ao])}function Oe(){C.call(this),this.i=new at(this),this.M=this,this.G=null}d(Oe,C),Oe.prototype[fe]=!0,Oe.prototype.removeEventListener=function(h,m,_,P){mr(this,h,m,_,P)};function et(h,m){var _,P=h.G;if(P)for(_=[];P;P=P.G)_.push(P);if(h=h.M,P=m.type||m,typeof m=="string")m=new A(m,h);else if(m instanceof A)m.target=m.target||h;else{var V=m;m=new A(P,h),un(m,V)}V=!0;let B,K;if(_)for(K=_.length-1;K>=0;K--)B=m.g=_[K],V=Dn(B,P,!0,m)&&V;if(B=m.g=h,V=Dn(B,P,!0,m)&&V,V=Dn(B,P,!1,m)&&V,_)for(K=0;K<_.length;K++)B=m.g=_[K],V=Dn(B,P,!1,m)&&V}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var h=this.i;for(const m in h.g){const _=h.g[m];for(let P=0;P<_.length;P++)$(_[P]);delete h.g[m],h.h--}}this.G=null},Oe.prototype.J=function(h,m,_,P){return this.i.add(String(h),m,!1,_,P)},Oe.prototype.K=function(h,m,_,P){return this.i.add(String(h),m,!0,_,P)};function Dn(h,m,_,P){if(m=h.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let B=0;B<m.length;++B){const K=m[B];if(K&&!K.da&&K.capture==_){const pe=K.listener,Tt=K.ha||K.src;K.fa&&$t(h.i,K),V=pe.call(Tt,P)!==!1&&V}}return V&&!P.defaultPrevented}function Jn(h,m){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(h,m||0)}function cs(h){h.g=Jn(()=>{h.g=null,h.i&&(h.i=!1,cs(h))},h.l);const m=h.h;h.h=null,h.m.apply(null,m)}class Po extends C{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:cs(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(h){C.call(this),this.h=h,this.g={}}d(gr,C);var ko=[];function qa(h){Y(h.g,function(m,_){this.g.hasOwnProperty(_)&&Br(m)},h),h.g={}}gr.prototype.N=function(){gr.Z.N.call(this),qa(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hs=o.JSON.stringify,ac=o.JSON.parse,Ga=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Qa(){}function Do(){}var _i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ds(){A.call(this,"d")}d(ds,A);function $e(){A.call(this,"c")}d($e,A);var Zn={},Xa=null;function wi(){return Xa=Xa||new Oe}Zn.Ia="serverreachability";function Ya(h){A.call(this,Zn.Ia,h)}d(Ya,A);function jr(h){const m=wi();et(m,new Ya(m))}Zn.STAT_EVENT="statevent";function Ja(h,m){A.call(this,Zn.STAT_EVENT,h),this.stat=m}d(Ja,A);function ee(h){const m=wi();et(m,new Ja(m,h))}Zn.Ja="timingevent";function Xe(h,m){A.call(this,Zn.Ja,h),this.size=m}d(Xe,A);function Mt(h,m){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},m)}function yr(){this.g=!0}yr.prototype.ua=function(){this.g=!1};function $r(h,m,_,P,V,B){h.info(function(){if(h.g)if(B){var K="",pe=B.split("&");for(let Ue=0;Ue<pe.length;Ue++){var Tt=pe[Ue].split("=");if(Tt.length>1){const Lt=Tt[0];Tt=Tt[1];const Hr=Lt.split("_");K=Hr.length>=2&&Hr[1]=="type"?K+(Lt+"="+Tt+"&"):K+(Lt+"=redacted&")}}}else K=null;else K=B;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+m+`
`+_+`
`+K})}function Za(h,m,_,P,V,B,K){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+m+`
`+_+`
`+B+" "+K})}function Si(h,m,_,P){h.info(function(){return"XMLHTTP TEXT ("+m+"): "+pf(h,_)+(P?" "+P:"")})}function uv(h,m){h.info(function(){return"TIMEOUT: "+m})}yr.prototype.info=function(){};function pf(h,m){if(!h.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(h=0;h<B.length;h++)if(Array.isArray(B[h])){var _=B[h];if(!(_.length<2)){var P=_[1];if(Array.isArray(P)&&!(P.length<1)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<P.length;K++)P[K]=""}}}}return hs(B)}catch{return m}}var el={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mf;function tl(){}d(tl,Qa),tl.prototype.g=function(){return new XMLHttpRequest},mf=new tl;function Oo(h){return encodeURIComponent(String(h))}function gf(h){var m=1;h=h.split(":");const _=[];for(;m>0&&h.length;)_.push(h.shift()),m--;return h.length&&_.push(h.join(":")),_}function Ur(h,m,_,P){this.j=h,this.i=m,this.l=_,this.S=P||1,this.V=new gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mo}function Mo(){this.i=null,this.g="",this.h=!1}var Lo={},nl={};function uc(h,m,_){h.M=1,h.A=No(Mn(m)),h.u=_,h.R=!0,cc(h,null)}function cc(h,m){h.F=Date.now(),X(h),h.B=Mn(h.A);var _=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),Ec(_.i,"t",P),h.C=0,_=h.j.L,h.h=new Mo,h.g=BI(h.j,_?m:null,!h.u),h.P>0&&(h.O=new Po(u(h.Y,h,h.g),h.P)),m=h.V,_=h.g,P=h.ba;var V="readystatechange";Array.isArray(V)||(V&&(ko[0]=V.toString()),V=ko);for(let B=0;B<V.length;B++){const K=kn(_,V[B],P||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=h.J?we(h.J):{},h.u?(h.v||(h.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,m)):(h.v="GET",h.g.ea(h.B,h.v,null,m)),jr(),$r(h.i,h.v,h.B,h.l,h.S,h.u)}Ur.prototype.ba=function(h){h=h.target;const m=this.O;m&&ws(h)==3?m.j():this.Y(h)},Ur.prototype.Y=function(h){try{if(h==this.g)e:{const pe=ws(this.g),Tt=this.g.ya(),Ue=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||xI(this.g)))){this.K||pe!=4||Tt==7||(Tt==8||Ue<=0?jr(3):jr(2)),On(this);var m=this.g.ca();this.X=m;var _=cv(this);if(this.o=m==200,Za(this.i,this.v,this.B,this.l,this.S,pe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var P,V=this.g;if((P=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(P)){var B=P;break t}}B=null}if(h=B)Si(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rl(this,h);else{this.o=!1,this.m=3,ee(12),zr(this),ps(this);break e}}if(this.R){h=!0;let Lt;for(;!this.K&&this.C<_.length;)if(Lt=yf(this,_),Lt==nl){pe==4&&(this.m=4,ee(14),h=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Lo){this.m=4,ee(15),Si(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Si(this.i,this.l,Lt,null),rl(this,Lt);if(fs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||_.length!=0||this.h.h||(this.m=1,ee(16),h=!1),this.o=this.o&&h,!h)Si(this.i,this.l,_,"[Invalid Chunked Response]"),zr(this),ps(this);else if(_.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),fv(K),K.P=!0,ee(11))}}else Si(this.i,this.l,_,null),rl(this,_);pe==4&&zr(this),this.o&&!this.K&&(pe==4?LI(this.j,this):(this.o=!1,X(this)))}else bj(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ee(12)):(this.m=0,ee(13)),zr(this),ps(this)}}}catch{}finally{}};function cv(h){if(!fs(h))return h.g.la();const m=xI(h.g);if(m==="")return"";let _="";const P=m.length,V=ws(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return zr(h),ps(h),"";h.h.i=new o.TextDecoder}for(let B=0;B<P;B++)h.h.h=!0,_+=h.h.i.decode(m[B],{stream:!(V&&B==P-1)});return m.length=0,h.h.g+=_,h.C=0,h.h.g}function fs(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function yf(h,m){var _=h.C,P=m.indexOf(`
`,_);return P==-1?nl:(_=Number(m.substring(_,P)),isNaN(_)?Lo:(P+=1,P+_>m.length?nl:(m=m.slice(P,P+_),h.C=P+_,m)))}Ur.prototype.cancel=function(){this.K=!0,zr(this)};function X(h){h.T=Date.now()+h.H,vf(h,h.H)}function vf(h,m){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Mt(u(h.aa,h),m)}function On(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Ur.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(uv(this.i,this.B),this.M!=2&&(jr(),ee(17)),zr(this),this.m=2,ps(this)):vf(this,this.T-h)};function ps(h){h.j.I==0||h.K||LI(h.j,h)}function zr(h){On(h);var m=h.O;m&&typeof m.dispose=="function"&&m.dispose(),h.O=null,qa(h.V),h.g&&(m=h.g,h.g=null,m.abort(),m.dispose())}function rl(h,m){try{var _=h.j;if(_.I!=0&&(_.g==h||il(_.h,h))){if(!h.L&&il(_.h,h)&&_.I==3){try{var P=_.Ba.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Mf(_),Df(_);else break e;dv(_),ee(18)}}else _.xa=V[1],0<_.xa-_.K&&V[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Mt(u(_.Va,_),6e3));fc(_.h)<=1&&_.ta&&(_.ta=void 0)}else Bo(_,11)}else if((h.L||_.g==h)&&Mf(_),!D(m))for(V=_.Ba.g.parse(m),m=0;m<V.length;m++){let Ue=V[m];const Lt=Ue[0];if(!(Lt<=_.K))if(_.K=Lt,Ue=Ue[1],_.I==2)if(Ue[0]=="c"){_.M=Ue[1],_.ba=Ue[2];const Hr=Ue[3];Hr!=null&&(_.ka=Hr,_.j.info("VER="+_.ka));const jo=Ue[4];jo!=null&&(_.za=jo,_.j.info("SVER="+_.za));const Ss=Ue[5];Ss!=null&&typeof Ss=="number"&&Ss>0&&(P=1.5*Ss,_.O=P,_.j.info("backChannelRequestTimeoutMs_="+P)),P=_;const Es=h.g;if(Es){const Nf=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nf){var B=P.h;B.g||Nf.indexOf("spdy")==-1&&Nf.indexOf("quic")==-1&&Nf.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(sl(B,B.h),B.h=null))}if(P.G){const pv=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;pv&&(P.wa=pv,Be(P.J,P.G,pv))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),P=_;var K=h;if(P.na=FI(P,P.L?P.ba:null,P.W),K.L){pc(P.h,K);var pe=K,Tt=P.O;Tt&&(pe.H=Tt),pe.D&&(On(pe),X(pe)),P.g=K}else OI(P);_.i.length>0&&Of(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Bo(_,7);else _.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Bo(_,7):hv(_):Ue[0]!="noop"&&_.l&&_.l.qa(Ue),_.A=0)}}jr(4)}catch{}}var _f=class{constructor(h,m){this.g=h,this.map=m}};function hc(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function dc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fc(h){return h.h?1:h.g?h.g.size:0}function il(h,m){return h.h?h.h==m:h.g?h.g.has(m):!1}function sl(h,m){h.g?h.g.add(m):h.h=m}function pc(h,m){h.h&&h.h==m?h.h=null:h.g&&h.g.has(m)&&h.g.delete(m)}hc.prototype.cancel=function(){if(this.i=mc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function mc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let m=h.i;for(const _ of h.g.values())m=m.concat(_.G);return m}return p(h.i)}var gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wf(h,m){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const P=h[_].indexOf("=");let V,B=null;P>=0?(V=h[_].substring(0,P),B=h[_].substring(P+1)):V=h[_],m(V,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function vr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;h instanceof vr?(this.l=h.l,ms(this,h.j),this.o=h.o,this.g=h.g,gs(this,h.u),this.h=h.h,ol(this,Tc(h.i)),this.m=h.m):h&&(m=String(h).match(gc))?(this.l=!1,ms(this,m[1]||"",!0),this.o=ys(m[2]||""),this.g=ys(m[3]||"",!0),gs(this,m[4]),this.h=ys(m[5]||"",!0),ol(this,m[6]||"",!0),this.m=ys(m[7]||"")):(this.l=!1,this.i=new _s(null,this.l))}vr.prototype.toString=function(){const h=[];var m=this.j;m&&h.push(vs(m,vc,!0),":");var _=this.g;return(_||m=="file")&&(h.push("//"),(m=this.o)&&h.push(vs(m,vc,!0),"@"),h.push(Oo(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(vs(_,_.charAt(0)=="/"?Ef:Sf,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",vs(_,bf)),h.join("")},vr.prototype.resolve=function(h){const m=Mn(this);let _=!!h.j;_?ms(m,h.j):_=!!h.o,_?m.o=h.o:_=!!h.g,_?m.g=h.g:_=h.u!=null;var P=h.h;if(_)gs(m,h.u);else if(_=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var V=m.h.lastIndexOf("/");V!=-1&&(P=m.h.slice(0,V+1)+P)}if(V=P,V==".."||V==".")P="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){P=V.lastIndexOf("/",0)==0,V=V.split("/");const B=[];for(let K=0;K<V.length;){const pe=V[K++];pe=="."?P&&K==V.length&&B.push(""):pe==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),P&&K==V.length&&B.push("")):(B.push(pe),P=!0)}P=B.join("/")}else P=V}return _?m.h=P:_=h.i.toString()!=="",_?ol(m,Tc(h.i)):_=!!h.m,_&&(m.m=h.m),m};function Mn(h){return new vr(h)}function ms(h,m,_){h.j=_?ys(m,!0):m,h.j&&(h.j=h.j.replace(/:$/,""))}function gs(h,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);h.u=m}else h.u=null}function ol(h,m,_){m instanceof _s?(h.i=m,If(h.i,h.l)):(_||(m=vs(m,Tf)),h.i=new _s(m,h.l))}function Be(h,m,_){h.i.set(m,_)}function No(h){return Be(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ys(h,m){return h?m?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function vs(h,m,_){return typeof h=="string"?(h=encodeURI(h).replace(m,yc),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var vc=/[#\/\?@]/g,Sf=/[#\?:]/g,Ef=/[#\?]/g,Tf=/[#\?@]/g,bf=/#/g;function _s(h,m){this.h=this.g=null,this.i=h||null,this.j=!!m}function Wr(h){h.g||(h.g=new Map,h.h=0,h.i&&wf(h.i,function(m,_){h.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=_s.prototype,t.add=function(h,m){Wr(this),this.i=null,h=Ei(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(m),this.h+=1,this};function _c(h,m){Wr(h),m=Ei(h,m),h.g.has(m)&&(h.i=null,h.h-=h.g.get(m).length,h.g.delete(m))}function wc(h,m){return Wr(h),m=Ei(h,m),h.g.has(m)}t.forEach=function(h,m){Wr(this),this.g.forEach(function(_,P){_.forEach(function(V){h.call(m,V,P,this)},this)},this)};function Sc(h,m){Wr(h);let _=[];if(typeof m=="string")wc(h,m)&&(_=_.concat(h.g.get(Ei(h,m))));else for(h=Array.from(h.g.values()),m=0;m<h.length;m++)_=_.concat(h[m]);return _}t.set=function(h,m){return Wr(this),this.i=null,h=Ei(this,h),wc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[m]),this.h+=1,this},t.get=function(h,m){return h?(h=Sc(this,h),h.length>0?String(h[0]):m):m};function Ec(h,m,_){_c(h,m),_.length>0&&(h.i=null,h.g.set(Ei(h,m),p(_)),h.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],m=Array.from(this.g.keys());for(let P=0;P<m.length;P++){var _=m[P];const V=Oo(_);_=Sc(this,_);for(let B=0;B<_.length;B++){let K=V;_[B]!==""&&(K+="="+Oo(_[B])),h.push(K)}}return this.i=h.join("&")};function Tc(h){const m=new _s;return m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),m}function Ei(h,m){return m=String(m),h.j&&(m=m.toLowerCase()),m}function If(h,m){m&&!h.j&&(Wr(h),h.i=null,h.g.forEach(function(_,P){const V=P.toLowerCase();P!=V&&(_c(this,P),Ec(this,V,_))},h)),h.j=m}function Rf(h,m){const _=new yr;if(o.Image){const P=new Image;P.onload=c(_r,_,"TestLoadImage: loaded",!0,m,P),P.onerror=c(_r,_,"TestLoadImage: error",!1,m,P),P.onabort=c(_r,_,"TestLoadImage: abort",!1,m,P),P.ontimeout=c(_r,_,"TestLoadImage: timeout",!1,m,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else m(!1)}function Cf(h,m){const _=new yr,P=new AbortController,V=setTimeout(()=>{P.abort(),_r(_,"TestPingServer: timeout",!1,m)},1e4);fetch(h,{signal:P.signal}).then(B=>{clearTimeout(V),B.ok?_r(_,"TestPingServer: ok",!0,m):_r(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),_r(_,"TestPingServer: error",!1,m)})}function _r(h,m,_,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(_)}catch{}}function xf(){this.g=new Ga}function al(h){this.i=h.Sb||null,this.h=h.ab||!1}d(al,Qa),al.prototype.g=function(){return new Vo(this.i,this.h)};function Vo(h,m){Oe.call(this),this.H=h,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Vo,Oe),t=Vo.prototype,t.open=function(h,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=m,this.readyState=1,Fo(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(m.body=h),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bc(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function bc(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var m=h.value?h.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!h.done}))&&(this.response=this.responseText+=m)}h.done?Ti(this):Fo(this),this.readyState==3&&bc(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Ti(this))},t.Na=function(h){this.g&&(this.response=h,Ti(this))},t.ga=function(){this.g&&Ti(this)};function Ti(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Fo(h)}t.setRequestHeader=function(h,m){this.A.append(h,m)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=m.next();return h.join(`\r
`)};function Fo(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ic(h){let m="";return Y(h,function(_,P){m+=P,m+=":",m+=_,m+=`\r
`}),m}function ll(h,m,_){e:{for(P in _){var P=!1;break e}P=!0}P||(_=Ic(_),typeof h=="string"?_!=null&&Oo(_):Be(h,m,_))}function qe(h){Oe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(qe,Oe);var Af=/^https?$/i,Pf=["POST","PUT"];t=qe.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,m,_,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);m=m?m.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mf.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(h),!0),this.B=!1}catch(B){II(this,B);return}if(h=_||"",_=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)_.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const B of P.keys())_.set(B,P.get(B));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),V=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(Pf,m,void 0)>=0)||P||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of _)this.g.setRequestHeader(B,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(B){II(this,B)}};function II(h,m){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=m,h.o=5,RI(h),kf(h)}function RI(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,et(this,"complete"),et(this,"abort"),kf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kf(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?CI(this):this.Xa())},t.Xa=function(){CI(this)};function CI(h){if(h.h&&typeof s<"u"){if(h.v&&ws(h)==4)setTimeout(h.Ca.bind(h),0);else if(et(h,"readystatechange"),ws(h)==4){h.h=!1;try{const B=h.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var P;if(P=B===0){let K=String(h.D).match(gc)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),P=!Af.test(K?K.toLowerCase():"")}_=P}if(_)et(h,"complete"),et(h,"success");else{h.o=6;try{var V=ws(h)>2?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.ca()+"]",RI(h)}}finally{kf(h)}}}}function kf(h,m){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,m||et(h,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ws(h){return h.g?h.g.readyState:0}t.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var m=this.g.responseText;return h&&m.indexOf(h)==0&&(m=m.substring(h.length)),ac(m)}};function xI(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function bj(h){const m={};h=(h.g&&ws(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(D(h[P]))continue;var _=gf(h[P]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=m[V]||[];m[V]=B,B.push(_)}ie(m,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rc(h,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||m}function AI(h){this.za=0,this.i=[],this.j=new yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rc("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rc("baseRetryDelayMs",5e3,h),this.Za=Rc("retryDelaySeedMs",1e4,h),this.Ta=Rc("forwardChannelMaxRetries",2,h),this.va=Rc("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new hc(h&&h.concurrentRequestLimit),this.Ba=new xf,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=AI.prototype,t.ka=8,t.I=1,t.connect=function(h,m,_,P){ee(0),this.W=h,this.H=m||{},_&&P!==void 0&&(this.H.OSID=_,this.H.OAID=P),this.F=this.X,this.J=FI(this,null,this.W),Of(this)};function hv(h){if(PI(h),h.I==3){var m=h.V++,_=Mn(h.J);if(Be(_,"SID",h.M),Be(_,"RID",m),Be(_,"TYPE","terminate"),Cc(h,_),m=new Ur(h,h.j,m),m.M=2,m.A=No(Mn(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=m.A,_=!0),_||(m.g=BI(m.j,null),m.g.ea(m.A)),m.F=Date.now(),X(m)}VI(h)}function Df(h){h.g&&(fv(h),h.g.cancel(),h.g=null)}function PI(h){Df(h),h.v&&(o.clearTimeout(h.v),h.v=null),Mf(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function Of(h){if(!dc(h.h)&&!h.m){h.m=!0;var m=h.Ea;O||v(),k||(O(),k=!0),T.add(m,h),h.D=0}}function Ij(h,m){return fc(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=m.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Mt(u(h.Ea,h,m),NI(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const V=new Ur(this,this.j,h);let B=this.o;if(this.U&&(B?(B=we(B),un(B,this.U)):B=this.U),this.u!==null||this.R||(V.J=B,B=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var P=this.i[_];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=DI(this,V,m),_=Mn(this.J),Be(_,"RID",h),Be(_,"CVER",22),this.G&&Be(_,"X-HTTP-Session-Id",this.G),Cc(this,_),B&&(this.R?m="headers="+Oo(Ic(B))+"&"+m:this.u&&ll(_,this.u,B)),sl(this.h,V),this.Ra&&Be(_,"TYPE","init"),this.S?(Be(_,"$req",m),Be(_,"SID","null"),V.U=!0,uc(V,_,null)):uc(V,_,m),this.I=2}}else this.I==3&&(h?kI(this,h):this.i.length==0||dc(this.h)||kI(this))};function kI(h,m){var _;m?_=m.l:_=h.V++;const P=Mn(h.J);Be(P,"SID",h.M),Be(P,"RID",_),Be(P,"AID",h.K),Cc(h,P),h.u&&h.o&&ll(P,h.u,h.o),_=new Ur(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),m&&(h.i=m.G.concat(h.i)),m=DI(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),sl(h.h,_),uc(_,P,m)}function Cc(h,m){h.H&&Y(h.H,function(_,P){Be(m,P,_)}),h.l&&Y({},function(_,P){Be(m,P,_)})}function DI(h,m,_){_=Math.min(h.i.length,_);const P=h.l?u(h.l.Ka,h.l,h):null;e:{var V=h.i;let pe=-1;for(;;){const Tt=["count="+_];pe==-1?_>0?(pe=V[0].g,Tt.push("ofs="+pe)):pe=0:Tt.push("ofs="+pe);let Ue=!0;for(let Lt=0;Lt<_;Lt++){var B=V[Lt].g;const Hr=V[Lt].map;if(B-=pe,B<0)pe=Math.max(0,V[Lt].g-100),Ue=!1;else try{B="req"+B+"_"||"";try{var K=Hr instanceof Map?Hr:Object.entries(Hr);for(const[jo,Ss]of K){let Es=Ss;a(Ss)&&(Es=hs(Ss)),Tt.push(B+jo+"="+encodeURIComponent(Es))}}catch(jo){throw Tt.push(B+"type="+encodeURIComponent("_badmap")),jo}}catch{P&&P(Hr)}}if(Ue){K=Tt.join("&");break e}}K=void 0}return h=h.i.splice(0,_),m.G=h,K}function OI(h){if(!h.g&&!h.v){h.Y=1;var m=h.Da;O||v(),k||(O(),k=!0),T.add(m,h),h.A=0}}function dv(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Mt(u(h.Da,h),NI(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,MI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Mt(u(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ee(10),Df(this),MI(this))};function fv(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function MI(h){h.g=new Ur(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var m=Mn(h.na);Be(m,"RID","rpc"),Be(m,"SID",h.M),Be(m,"AID",h.K),Be(m,"CI",h.F?"0":"1"),!h.F&&h.ia&&Be(m,"TO",h.ia),Be(m,"TYPE","xmlhttp"),Cc(h,m),h.u&&h.o&&ll(m,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=No(Mn(m)),_.u=null,_.R=!0,cc(_,h)}t.Va=function(){this.C!=null&&(this.C=null,Df(this),dv(this),ee(19))};function Mf(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function LI(h,m){var _=null;if(h.g==m){Mf(h),fv(h),h.g=null;var P=2}else if(il(h.h,m))_=m.G,pc(h.h,m),P=1;else return;if(h.I!=0){if(m.o)if(P==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var V=h.D;P=wi(),et(P,new Xe(P,_)),Of(h)}else OI(h);else if(V=m.m,V==3||V==0&&m.X>0||!(P==1&&Ij(h,m)||P==2&&dv(h)))switch(_&&_.length>0&&(m=h.h,m.i=m.i.concat(_)),V){case 1:Bo(h,5);break;case 4:Bo(h,10);break;case 3:Bo(h,6);break;default:Bo(h,2)}}}function NI(h,m){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*m}function Bo(h,m){if(h.j.info("Error code "+m),m==2){var _=u(h.bb,h),P=h.Ua;const V=!P;P=new vr(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ms(P,"https"),No(P),V?Rf(P.toString(),_):Cf(P.toString(),_)}else ee(2);h.I=0,h.l&&h.l.pa(m),VI(h),PI(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function VI(h){if(h.I=0,h.ja=[],h.l){const m=mc(h.h);(m.length!=0||h.i.length!=0)&&(g(h.ja,m),g(h.ja,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.oa()}}function FI(h,m,_){var P=_ instanceof vr?Mn(_):new vr(_);if(P.g!="")m&&(P.g=m+"."+P.g),gs(P,P.u);else{var V=o.location;P=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const B=new vr(null);P&&ms(B,P),m&&(B.g=m),V&&gs(B,V),_&&(B.h=_),P=B}return _=h.G,m=h.wa,_&&m&&Be(P,_,m),Be(P,"VER",h.ka),Cc(h,P),P}function BI(h,m,_){if(m&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=h.Aa&&!h.ma?new qe(new al({ab:_})):new qe(h.ma),m.Fa(h.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jI(){}t=jI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Lf(){}Lf.prototype.g=function(h,m){return new Ln(h,m)};function Ln(h,m){Oe.call(this),this.g=new AI(m),this.l=h,this.h=m&&m.messageUrlParams||null,h=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(h?h["X-WebChannel-Content-Type"]=m.messageContentType:h={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(h?h["X-WebChannel-Client-Profile"]=m.sa:h={"X-WebChannel-Client-Profile":m.sa}),this.g.U=h,(h=m&&m.Qb)&&!D(h)&&(this.g.u=h),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!D(m)&&(this.g.G=m,h=this.h,h!==null&&m in h&&(h=this.h,m in h&&delete h[m])),this.j=new ul(this)}d(Ln,Oe),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){hv(this.g)},Ln.prototype.o=function(h){var m=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=hs(h),h=_);m.i.push(new _f(m.Ya++,h)),m.I==3&&Of(m)},Ln.prototype.N=function(){this.g.l=null,delete this.j,hv(this.g),delete this.g,Ln.Z.N.call(this)};function $I(h){ds.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var m=h.__sm__;if(m){e:{for(const _ in m){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,m=m!==null&&h in m?m[h]:void 0),this.data=m}else this.data=h}d($I,ds);function UI(){$e.call(this),this.status=1}d(UI,$e);function ul(h){this.g=h}d(ul,jI),ul.prototype.ra=function(){et(this.g,"a")},ul.prototype.qa=function(h){et(this.g,new $I(h))},ul.prototype.pa=function(h){et(this.g,new UI)},ul.prototype.oa=function(){et(this.g,"b")},Lf.prototype.createWebChannel=Lf.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,aL=function(){return new Lf},oL=function(){return wi()},sL=Zn,AS={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,Gp=el,lc.COMPLETE="complete",iL=lc,Do.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,Zc=Do,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,rL=qe}).apply(typeof up<"u"?up:typeof self<"u"?self:typeof window<"u"?window:{});const Tx="@firebase/firestore",bx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new hT("@firebase/firestore");function El(){return Pa.logLevel}function U(t,...e){if(Pa.logLevel<=Ee.DEBUG){const n=e.map(pT);Pa.debug(`Firestore (${qu}): ${t}`,...n)}}function mt(t,...e){if(Pa.logLevel<=Ee.ERROR){const n=e.map(pT);Pa.error(`Firestore (${qu}): ${t}`,...n)}}function pd(t,...e){if(Pa.logLevel<=Ee.WARN){const n=e.map(pT);Pa.warn(`Firestore (${qu}): ${t}`,...n)}}function pT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lL(t,r,n)}function lL(t,e,n){let r=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mt(r),new Error(r)}function re(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||lL(e,i,r)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class rK{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ui,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ui)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string",31837,{l:r}),new tK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class iK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ix{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oK{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){re(this.o===void 0,3512);const r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ix(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ix(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=aK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function PS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return v_(i)===v_(s)?he(i,s):v_(i)?1:-1}return he(t.length,e.length)}const lK=55296,uK=57343;function v_(t){const e=t.charCodeAt(0);return e>=lK&&e<=uK}function wu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function uL(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="__name__";class Xr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Xr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=Xr.isNumericId(e),i=Xr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Xr.extractNumericId(e).compare(Xr.extractNumericId(n)):PS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return so.fromString(e.substring(4,e.length-2))}}class ke extends Xr{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const cK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Xr{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return cK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rx}static keyField(){return new nt([Rx])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ke.fromString(e))}static fromName(e){return new q(ke.fromString(e).popFirst(5))}static empty(){return new q(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t,e,n){if(!n)throw new W(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hK(t,e,n,r){if(e===!0&&r===!0)throw new W(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cx(t){if(!q.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xx(t){if(q.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hL(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Ki(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wy(t);throw new W(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dK(t,e){if(e<=0)throw new W(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,e){const n={typeString:t};return e&&(n.value=e),n}function Gd(t,e){if(!hL(t))throw new W(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=-62135596800,Px=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Px);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ax)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Px}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gd(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ax;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:St("string",Le._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Le(0,0))}static max(){return new ae(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;class sg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function kS(t){return t.fields.find(e=>e.kind===2)}function Qo(t){return t.fields.filter(e=>e.kind!==2)}sg.UNKNOWN_ID=-1;class Qp{constructor(e,n){this.fieldPath=e,this.kind=n}}class md{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new md(0,Gn.min())}}function dL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Gn(i,q.empty(),e)}function fL(t){return new Gn(t.readTime,t.key,Su)}class Gn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gn(ae.min(),q.empty(),Su)}static max(){return new Gn(ae.max(),q.empty(),Su)}}function gT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==pL)throw t;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="SimpleDb";class Sy{static open(e,n,r,i){try{return new Sy(n,e.transaction(i,r))}catch(s){throw new xh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ui,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new xh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=yT(r.target.error);this.S.reject(new xh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(U(jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new pK(n)}}class oo{static delete(e){return U(jn,"Removing database:",e),Zo(zM().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!XM())return!1;if(oo.F())return!0;const e=Pt(),n=oo.M(e),r=0<n&&n<10,i=gL(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,oo.M(Pt())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(U(jn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new xh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new W(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new W(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new xh(e,o))},i.onupgradeneeded=s=>{U(jn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{U(jn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Sy.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),N.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(U(jn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class fK{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Zo(this.U.delete())}}class xh extends W{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Eo(t){return t.name==="IndexedDbTransactionError"}class pK{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(U(jn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(U(jn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zo(r)}add(e){return U(jn,"ADD",this.store.name,e,e),Zo(this.store.add(e))}get(e){return Zo(this.store.get(e)).next(n=>(n===void 0&&(n=null),U(jn,"GET",this.store.name,e,n),n))}delete(e){return U(jn,"DELETE",this.store.name,e),Zo(this.store.delete(e))}count(){return U(jn,"COUNT",this.store.name),Zo(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new N((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){U(jn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=yT(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new fK(a),u=n(a.primaryKey,a.value,l);if(u instanceof N){const c=u.catch(d=>(l.done(),N.reject(d)));r.push(c)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Zo(t){return new N((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=yT(r.target.error);n(i)}})}let kx=!1;function yT(t){const e=oo.M(Pt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kx||(kx=!0,setTimeout(()=>{throw r},0)),r}}return t}const Ah="IndexBackfiller";class mK{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){U(Ah,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();U(Ah,`Documents written: ${n}`)}catch(n){Eo(n)?U(Ah,"Ignoring IndexedDB error during index backfill: ",n):await So(n)}await this.re(6e4)})}}class gK{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return U(Ah,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(U(Ah,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=fL(s);gT(o,r)>0&&(r=o)}),new Gn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=-1;function Ey(t){return t==null}function gd(t){return t===0&&1/t==-1/0}function yL(t){return typeof t=="number"&&Number.isInteger(t)&&!gd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="";function on(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Dx(e)),e=yK(t.get(n),e);return Dx(e)}function yK(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case og:n+="";break;default:n+=s}}return n}function Dx(t){return t+og+""}function ii(t){const e=t.length;if(re(e>=2,64408,{path:t}),e===2)return re(t.charAt(0)===og&&t.charAt(1)==="",56145,{path:t}),ke.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(og,s);switch((o<0||o>n)&&Z(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Z(61167,{path:t})}s=o+2}return new ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="remoteDocuments",Qd="owner",dl="owner",yd="mutationQueues",vK="userId",Ar="mutations",Ox="batchId",ca="userMutationsIndex",Mx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){return[t,on(e)]}function vL(t,e,n){return[t,on(e),n]}const _K={},Eu="documentMutations",ag="remoteDocumentsV14",wK=["prefixPath","collectionGroup","readTime","documentId"],Yp="documentKeyIndex",SK=["prefixPath","collectionGroup","documentId"],_L="collectionGroupIndex",EK=["collectionGroup","readTime","prefixPath","documentId"],vd="remoteDocumentGlobal",DS="remoteDocumentGlobalKey",Tu="targets",wL="queryTargetsIndex",TK=["canonicalId","targetId"],bu="targetDocuments",bK=["targetId","path"],vT="documentTargetsIndex",IK=["path","targetId"],lg="targetGlobalKey",va="targetGlobal",_d="collectionParents",RK=["collectionId","parent"],Iu="clientMetadata",CK="clientId",Ty="bundles",xK="bundleId",by="namedQueries",AK="name",_T="indexConfiguration",PK="indexId",OS="collectionGroupIndex",kK="collectionGroup",Ph="indexState",DK=["indexId","uid"],SL="sequenceNumberIndex",OK=["uid","sequenceNumber"],kh="indexEntries",MK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EL="documentKeyIndex",LK=["indexId","uid","orderedDocumentKey"],Iy="documentOverlays",NK=["userId","collectionPath","documentId"],MS="collectionPathOverlayIndex",VK=["userId","collectionPath","largestBatchId"],TL="collectionGroupOverlayIndex",FK=["userId","collectionGroup","largestBatchId"],wT="globals",BK="name",bL=[yd,Ar,Eu,Xo,Tu,Qd,va,bu,Iu,vd,_d,Ty,by],jK=[...bL,Iy],IL=[yd,Ar,Eu,ag,Tu,Qd,va,bu,Iu,vd,_d,Ty,by,Iy],RL=IL,ST=[...RL,_T,Ph,kh],$K=ST,CL=[...ST,wT],UK=CL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends mL{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Dt(t,e){const n=ne(t);return oo.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function To(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cp(this.root,e,this.comparator,!1)}getReverseIterator(){return new cp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cp(this.root,e,this.comparator,!0)}}class cp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=i??Kt.EMPTY,this.right=s??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nx(this.data.getIterator())}getIteratorFrom(e){return new Nx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class Nx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new In([])}unionWith(e){let n=new Fe(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AL("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const zK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(t){if(re(!!t,39018),typeof t=="string"){let e=0;const n=zK.exec(t);if(re(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gi(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="server_timestamp",kL="__type__",DL="__previous_value__",OL="__local_write_time__";function Ry(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kL])==null?void 0:r.stringValue)===PL}function Cy(t){const e=t.mapValue.fields[DL];return Ry(e)?Cy(e):e}function wd(t){const e=qi(t.mapValue.fields[OL].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const ug="(default)";class ka{constructor(e,n){this.projectId=e,this.database=n||ug}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database===ug}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="__type__",ML="__max__",qs={mapValue:{fields:{__type__:{stringValue:ML}}}},TT="__vector__",Ru="value",Jp={nullValue:"NULL_VALUE"};function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ry(t)?4:LL(t)?9007199254740991:xy(t)?10:11:Z(28295,{value:t})}function gi(t,e){if(t===e)return!0;const n=co(t);if(n!==co(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wd(t).isEqual(wd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=qi(i.timestampValue),a=qi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Gi(i.bytesValue).isEqual(Gi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?gd(o)===gd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return wu(t.arrayValue.values||[],e.arrayValue.values||[],gi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Lx(o)!==Lx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!gi(o[l],a[l])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function Sd(t,e){return(t.values||[]).find(n=>gi(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=co(t),r=co(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Vx(t.timestampValue,e.timestampValue);case 4:return Vx(wd(t),wd(e));case 5:return PS(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Gi(s),l=Gi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=he(a[u],l[u]);if(c!==0)return c}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Ye(s.latitude),Ye(o.latitude));return a!==0?a:he(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,p,g,E;const a=s.fields||{},l=o.fields||{},u=(f=a[Ru])==null?void 0:f.arrayValue,c=(p=l[Ru])==null?void 0:p.arrayValue,d=he(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((E=c==null?void 0:c.values)==null?void 0:E.length)||0);return d!==0?d:Fx(u,c)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===qs.mapValue&&o===qs.mapValue)return 0;if(s===qs.mapValue)return 1;if(o===qs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=PS(l[d],c[d]);if(f!==0)return f;const p=ho(a[l[d]],u[c[d]]);if(p!==0)return p}return he(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function Vx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=qi(t),r=qi(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function Fx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ho(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Cu(t){return NS(t)}function NS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=NS(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${NS(n.fields[o])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function Zp(t){switch(co(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cy(t);return e?16+Zp(e):16;case 5:return 2*t.stringValue.length;case 6:return Gi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Zp(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return To(r.fields,(s,o)=>{i+=s.length+Zp(o)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function Da(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function VS(t){return!!t&&"integerValue"in t}function Ed(t){return!!t&&"arrayValue"in t}function Bx(t){return!!t&&"nullValue"in t}function jx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function em(t){return!!t&&"mapValue"in t}function xy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ET])==null?void 0:r.stringValue)===TT}function Dh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return To(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Dh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dh(t.arrayValue.values[n]);return e}return{...t}}function LL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ML}const NL={mapValue:{fields:{[ET]:{stringValue:TT},[Ru]:{arrayValue:{}}}}};function HK(t){return"nullValue"in t?Jp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Da(ka.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?xy(t)?NL:{mapValue:{}}:Z(35942,{value:t})}function KK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Da(ka.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?NL:"mapValue"in t?xy(t)?{mapValue:{}}:qs:Z(61959,{value:t})}function $x(t,e){const n=ho(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Ux(t,e){const n=ho(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!em(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dh(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Dh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());em(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];em(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){To(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(Dh(this.value))}}function VL(t){const e=[];return To(t.fields,(n,r)=>{const i=new nt([n]);if(em(r)){const s=VL(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ht(e,0,ae.min(),ae.min(),ae.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new ht(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new ht(e,2,n,ae.min(),ae.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,ae.min(),ae.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.position=e,this.inclusive=n}}function zx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n="asc"){this.field=e,this.dir=n}}function qK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{}class Te extends FL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GK(e,n,r):n==="array-contains"?new YK(e,r):n==="in"?new WL(e,r):n==="not-in"?new JK(e,r):n==="array-contains-any"?new ZK(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QK(e,r):new XK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ho(n,this.value)):n!==null&&co(this.value)===co(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends FL{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ne(e,n)}matches(e){return xu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xu(t){return t.op==="and"}function FS(t){return t.op==="or"}function bT(t){return BL(t)&&xu(t)}function BL(t){for(const e of t.filters)if(e instanceof Ne)return!1;return!0}function BS(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+Cu(t.value);if(bT(t))return t.filters.map(e=>BS(e)).join(",");{const e=t.filters.map(n=>BS(n)).join(",");return`${t.op}(${e})`}}function jL(t,e){return t instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&gi(r.value,i.value)}(t,e):t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jL(o,i.filters[a]),!0):!1}(t,e):void Z(19439)}function $L(t,e){const n=t.filters.concat(e);return Ne.create(n,t.op)}function UL(t){return t instanceof Te?function(n){return`${n.field.canonicalString()} ${n.op} ${Cu(n.value)}`}(t):t instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(UL).join(" ,")+"}"}(t):"Filter"}class GK extends Te{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class QK extends Te{constructor(e,n){super(e,"in",n),this.keys=zL("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XK extends Te{constructor(e,n){super(e,"not-in",n),this.keys=zL("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zL(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class YK extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ed(n)&&Sd(n.arrayValue,this.value)}}class WL extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sd(this.value.arrayValue,n)}}class JK extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sd(this.value.arrayValue,n)}}class ZK extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ed(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function jS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new eq(t,e,n,r,i,s,o)}function Oa(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>BS(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ey(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cu(r)).join(",")),e.Te=n}return e.Te}function Xd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wx(t.startAt,e.startAt)&&Wx(t.endAt,e.endAt)}function cg(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function hg(t,e){return t.filters.filter(n=>n instanceof Te&&n.field.isEqual(e))}function Hx(t,e,n){let r=Jp,i=!0;for(const s of hg(t,e)){let o=Jp,a=!0;switch(s.op){case"<":case"<=":o=HK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Jp}$x({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];$x({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Kx(t,e,n){let r=qs,i=!0;for(const s of hg(t,e)){let o=qs,a=!0;switch(s.op){case">=":case">":o=KK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qs}Ux({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Ux({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HL(t,e,n,r,i,s,o,a){return new Ha(t,e,n,r,i,s,o,a)}function Ay(t){return new Ha(t)}function qx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IT(t){return t.collectionGroup!==null}function iu(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Td(s,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new Td(nt.keyField(),r))}return e.Ie}function Kn(t){const e=ne(t);return e.Ee||(e.Ee=tq(e,iu(t))),e.Ee}function tq(t,e){if(t.limitType==="F")return jS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Td(i.field,s)});const n=t.endAt?new fo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fo(t.startAt.position,t.startAt.inclusive):null;return jS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $S(t,e){const n=t.filters.concat([e]);return new Ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dg(t,e,n){return new Ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Py(t,e){return Xd(Kn(t),Kn(e))&&t.limitType===e.limitType}function KL(t){return`${Oa(Kn(t))}|lt:${t.limitType}`}function Tl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UL(i)).join(", ")}]`),Ey(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Cu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Cu(i)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function Yd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of iu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=zx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,iu(r),i)||r.endAt&&!function(o,a,l){const u=zx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,iu(r),i))}(t,e)}function qL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GL(t){return(e,n)=>{let r=!1;for(const i of iu(t)){const s=nq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nq(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ho(l,u):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=new He(q.comparator);function zn(){return rq}const QL=new He(q.comparator);function eh(...t){let e=QL;for(const n of t)e=e.insert(n.key,n);return e}function XL(t){let e=QL;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function si(){return Oh()}function YL(){return Oh()}function Oh(){return new ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const iq=new He(q.comparator),sq=new Fe(q.comparator);function _e(...t){let e=sq;for(const n of t)e=e.add(n);return e}const oq=new Fe(he);function RT(){return oq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(e)?"-0":e}}function JL(t){return{integerValue:""+t}}function aq(t,e){return yL(e)?JL(e):CT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this._=void 0}}function lq(t,e,n){return t instanceof bd?function(i,s){const o={fields:{[kL]:{stringValue:PL},[OL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ry(s)&&(s=Cy(s)),s&&(o.fields[DL]=s),{mapValue:o}}(n,e):t instanceof Au?eN(t,e):t instanceof Pu?tN(t,e):function(i,s){const o=ZL(i,s),a=Gx(o)+Gx(i.Ae);return VS(o)&&VS(i.Ae)?JL(a):CT(i.serializer,a)}(t,e)}function uq(t,e,n){return t instanceof Au?eN(t,e):t instanceof Pu?tN(t,e):n}function ZL(t,e){return t instanceof Id?function(r){return VS(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class bd extends ky{}class Au extends ky{constructor(e){super(),this.elements=e}}function eN(t,e){const n=nN(e);for(const r of t.elements)n.some(i=>gi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pu extends ky{constructor(e){super(),this.elements=e}}function tN(t,e){let n=nN(e);for(const r of t.elements)n=n.filter(i=>!gi(i,r));return{arrayValue:{values:n}}}class Id extends ky{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gx(t){return Ye(t.integerValue||t.doubleValue)}function nN(t){return Ed(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e,n){this.field=e,this.transform=n}}function hq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Au&&i instanceof Au||r instanceof Pu&&i instanceof Pu?wu(r.elements,i.elements,gi):r instanceof Id&&i instanceof Id?gi(r.Ae,i.Ae):r instanceof bd&&i instanceof bd}(t.transform,e.transform)}class dq{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dy{}function rN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oy(t.key,fn.none()):new Gu(t.key,t.data,fn.none());{const n=t.data,r=rn.empty();let i=new Fe(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new rs(t.key,r,new In(i.toArray()),fn.none())}}function fq(t,e,n){t instanceof Gu?function(i,s,o){const a=i.value.clone(),l=Xx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rs?function(i,s,o){if(!tm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Xx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(iN(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mh(t,e,n,r){return t instanceof Gu?function(s,o,a,l){if(!tm(s.precondition,o))return a;const u=s.value.clone(),c=Yx(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof rs?function(s,o,a,l){if(!tm(s.precondition,o))return a;const u=Yx(s.fieldTransforms,l,o),c=o.data;return c.setAll(iN(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return tm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function pq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ZL(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function Qx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wu(r,i,(s,o)=>hq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gu extends Dy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rs extends Dy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xx(t,e,n){const r=new Map;re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,uq(o,a,n[i]))}return r}function Yx(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,lq(s,o,e))}return r}class Oy extends Dy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sN extends Dy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fq(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=rN(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&wu(this.mutations,e.mutations,(n,r)=>Qx(n,r))&&wu(this.baseMutations,e.baseMutations,(n,r)=>Qx(n,r))}}class AT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return iq}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new AT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,be;function gq(t){switch(t){case j.OK:return Z(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function oN(t){if(t===void 0)return mt("GRPC error has no .code"),j.UNKNOWN;switch(t){case vt.OK:return j.OK;case vt.CANCELLED:return j.CANCELLED;case vt.UNKNOWN:return j.UNKNOWN;case vt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case vt.INTERNAL:return j.INTERNAL;case vt.UNAVAILABLE:return j.UNAVAILABLE;case vt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case vt.NOT_FOUND:return j.NOT_FOUND;case vt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case vt.ABORTED:return j.ABORTED;case vt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case vt.DATA_LOSS:return j.DATA_LOSS;default:return Z(39323,{code:t})}}(be=vt||(vt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq=new so([4294967295,4294967295],0);function Jx(t){const e=yq().encode(t),n=new nL;return n.update(e),new Uint8Array(n.digest())}function Zx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new so([n,r],0),new so([i,s],0)]}class kT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new th(`Invalid padding: ${n}`);if(r<0)throw new th(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new th(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new th(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=so.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(so.fromNumber(r)));return i.compare(vq)===1&&(i=new so([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jx(e),[r,i]=Zx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new kT(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Jx(e),[r,i]=Zx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class th extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Zd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jd(ae.min(),i,new He(he),zn(),_e())}}class Zd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zd(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class aN{constructor(e,n){this.targetId=e,this.Ce=n}}class lN{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class eA{constructor(){this.ve=0,this.Fe=tA(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new Zd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=tA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _q{constructor(e){this.Ge=e,this.ze=new Map,this.je=zn(),this.Je=hp(),this.He=hp(),this.Ye=new He(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(cg(s))if(r===0){const o=new q(s.path);this.et(n,o,ht.newNoDocument(o,ae.min()))}else re(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Gi(r).toUint8Array()}catch(l){if(l instanceof AL)return pd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kT(o,i,s)}catch(l){return pd(l instanceof th?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&cg(a.target)){const l=new q(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ht.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=_e();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Jd(e,n,this.Ye,this.je,r);return this.je=zn(),this.Je=hp(),this.He=hp(),this.Ye=new He(he),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hp(){return new He(q.comparator)}function tA(){return new He(q.comparator)}const wq={asc:"ASCENDING",desc:"DESCENDING"},Sq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eq={and:"AND",or:"OR"};class Tq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function US(t,e){return t.useProto3Json||Ey(e)?e:{value:e}}function ku(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bq(t,e){return ku(t,e.toTimestamp())}function yn(t){return re(!!t,49232),ae.fromTimestamp(function(n){const r=qi(n);return new Le(r.seconds,r.nanos)}(t))}function DT(t,e){return zS(t,e).canonicalString()}function zS(t,e){const n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cN(t){const e=ke.fromString(t);return re(_N(e),10190,{key:e.toString()}),e}function fg(t,e){return DT(t.databaseId,e.path)}function _a(t,e){const n=cN(e);if(n.get(1)!==t.databaseId.projectId)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(fN(n))}function hN(t,e){return DT(t.databaseId,e)}function dN(t){const e=cN(t);return e.length===4?ke.emptyPath():fN(e)}function WS(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fN(t){return re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function nA(t,e,n){return{name:fg(t,e),fields:n.value.mapValue.fields}}function Iq(t,e,n){const r=_a(t,e.name),i=yn(e.updateTime),s=e.createTime?yn(e.createTime):ae.min(),o=new rn({mapValue:{fields:e.fields}}),a=ht.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Rq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(re(c===void 0||typeof c=="string",58123),yt.fromBase64String(c||"")):(re(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),yt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?j.UNKNOWN:oN(u.code);return new W(c,u.message||"")}(o);n=new lN(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_a(t,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):ae.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=ht.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new nm(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_a(t,r.document),s=r.readTime?yn(r.readTime):ae.min(),o=ht.newNoDocument(i,s),a=r.removedTargetIds||[];n=new nm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_a(t,r.document),s=r.removedTargetIds||[];n=new nm([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new mq(i,s),a=r.targetId;n=new aN(a,o)}}return n}function pg(t,e){let n;if(e instanceof Gu)n={update:nA(t,e.key,e.value)};else if(e instanceof Oy)n={delete:fg(t,e.key)};else if(e instanceof rs)n={update:nA(t,e.key,e.data),updateMask:Dq(e.fieldMask)};else{if(!(e instanceof sN))return Z(16599,{Vt:e.type});n={verify:fg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Id)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function HS(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?fn.updateTime(yn(s.updateTime)):s.exists!==void 0?fn.exists(s.exists):fn.none()}(e.currentDocument):fn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new bd;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new Au(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new Pu(c)}else"increment"in a?l=new Id(o,a.increment):Z(16584,{proto:a});const u=nt.fromServerFormat(a.fieldPath);return new cq(u,l)}(t,i)):[];if(e.update){e.update.name;const i=_a(t,e.update.name),s=new rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new In(u.map(c=>nt.fromServerFormat(c)))}(e.updateMask);return new rs(i,s,o,n,r)}return new Gu(i,s,n,r)}if(e.delete){const i=_a(t,e.delete);return new Oy(i,n)}if(e.verify){const i=_a(t,e.verify);return new sN(i,n)}return Z(1463,{proto:e})}function Cq(t,e){return t&&t.length>0?(re(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?yn(i.updateTime):yn(s);return o.isEqual(ae.min())&&(o=yn(s)),new dq(o,i.transformResults||[])}(n,e))):[]}function pN(t,e){return{documents:[hN(t,e.path)]}}function mN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hN(t,i);const s=function(u){if(u.length!==0)return vN(Ne.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:bl(f.field),direction:Aq(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=US(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function gN(t){let e=dN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=yN(d);return f instanceof Ne&&bT(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(g){return new Td(Il(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Ey(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new fo(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,p=d.values||[];return new fo(p,f)}(n.endAt)),HL(e,i,o,s,a,"F",l,u)}function xq(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Il(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Il(n.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Il(n.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Il(n.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Te.create(Il(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(r=>yN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function Aq(t){return wq[t]}function Pq(t){return Sq[t]}function kq(t){return Eq[t]}function bl(t){return{fieldPath:t.canonicalString()}}function Il(t){return nt.fromServerFormat(t.fieldPath)}function vN(t){return t instanceof Te?function(n){if(n.op==="=="){if(jx(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NAN"}};if(Bx(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jx(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NOT_NAN"}};if(Bx(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(n.field),op:Pq(n.op),value:n.value}}}(t):t instanceof Ne?function(n){const r=n.getFilters().map(i=>vN(i));return r.length===1?r[0]:{compositeFilter:{op:kq(n.op),filters:r}}}(t):Z(54877,{filter:t})}function Dq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _N(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.yt=e}}function Oq(t,e){let n;if(e.document)n=Iq(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),i=La(e.noDocument.readTime);n=ht.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z(56709);{const r=q.fromSegments(e.unknownDocument.path),i=La(e.unknownDocument.version);n=ht.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Le(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function rA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:mg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:fg(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ku(s,o.version.toTimestamp()),createTime:ku(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ma(e.version)};else{if(!e.isUnknownDocument())return Z(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ma(e.version)}}return r}function mg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ma(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function La(t){const e=new Le(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function ea(t,e){const n=(e.baseMutations||[]).map(s=>HS(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>HS(t.yt,s)),i=Le.fromMillis(e.localWriteTimeMs);return new xT(e.batchId,i,n,r)}function nh(t){const e=La(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?La(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return re(o===1,1966,{count:o}),Kn(Ay(dN(s.documents[0])))}(t.query):function(s){return Kn(gN(s))}(t.query),new Oi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yt.fromBase64String(t.resumeToken))}function SN(t,e){const n=Ma(e.snapshotVersion),r=Ma(e.lastLimboFreeSnapshotVersion);let i;i=cg(e.target)?pN(t.yt,e.target):mN(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function EN(t){const e=gN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dg(e,e.limit,"L"):e}function __(t,e){return new PT(e.largestBatchId,HS(t.yt,e.overlayMutation))}function iA(t,e){const n=e.path.lastSegment();return[t,on(e.path.popLast()),n]}function sA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ma(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{getBundleMetadata(e,n){return oA(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:La(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return oA(e).put(function(i){return{bundleId:i.id,createTime:Ma(yn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return aA(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:EN(s.bundledQuery),readTime:La(s.readTime)}}(r)})}saveNamedQuery(e,n){return aA(e).put(function(i){return{name:i.name,readTime:Ma(yn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function oA(t){return Dt(t,Ty)}function aA(t){return Dt(t,by)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new My(e,r)}getOverlay(e,n){return Fc(e).get(iA(this.userId,n)).next(r=>r?__(this.serializer,r):null)}getOverlays(e,n){const r=si();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new PT(n,o);i.push(this.St(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(on(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Fc(e).Z(MS,a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=si(),s=on(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Fc(e).J(MS,o).next(a=>{for(const l of a){const u=__(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=si();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fc(e).ee({index:TL,range:a},(l,u,c)=>{const d=__(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}St(e,n){return Fc(e).put(function(i,s,o){const[a,l,u]=iA(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:pg(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Fc(t){return Dt(t,Iy)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{bt(e){return Dt(e,wT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?yt.fromUint8Array(r):yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ye(e.integerValue));else if("doubleValue"in e){const r=Ye(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),gd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=qi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Gi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?LL(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):xy(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Z(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Ru,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ye(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),q.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ta.Kt=new ta;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=255;function Nq(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function lA(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Nq(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class Vq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=lA(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=lA(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(pl),this.sn(255)}_n(){this.an(pl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===pl?(this.sn(pl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===pl?(this.an(pl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Fq{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Bq{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Bc{constructor(){this.cn=new Vq,this.ln=new Fq(this.cn),this.hn=new Bq(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new na(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:rm(this.En),directionalValue:rm(this.dn),orderedDocumentKey:rm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Cs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=uA(t.En,e.En),n!==0?n:(n=uA(t.dn,e.dn),n!==0?n:q.comparator(t.In,e.In)))}function uA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function rm(t){return QM()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function cA(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class hA{constructor(e){this.mn=new Fe((n,r)=>nt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=kS(e);if(n!==void 0&&!this.wn(n))return!1;const r=Qo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Fe(nt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Qp(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Qp(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Qp(r.field,r.dir==="asc"?0:1)));return new sg(sg.UNKNOWN_ID,this.collectionId,n,md.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){var n,r;if(re(t instanceof Te||t instanceof Ne,20012),t instanceof Te){if(t instanceof WL){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>Te.create(t.field,"==",s)))||[];return Ne.create(i,"or")}return t}const e=t.filters.map(i=>TN(i));return Ne.create(e,t.op)}function jq(t){if(t.getFilters().length===0)return[];const e=GS(TN(t));return re(bN(e),7391),KS(e)||qS(e)?[e]:e.getFilters()}function KS(t){return t instanceof Te}function qS(t){return t instanceof Ne&&bT(t)}function bN(t){return KS(t)||qS(t)||function(n){if(n instanceof Ne&&FS(n)){for(const r of n.getFilters())if(!KS(r)&&!qS(r))return!1;return!0}return!1}(t)}function GS(t){if(re(t instanceof Te||t instanceof Ne,34018),t instanceof Te)return t;if(t.filters.length===1)return GS(t.filters[0]);const e=t.filters.map(r=>GS(r));let n=Ne.create(e,t.op);return n=gg(n),bN(n)?n:(re(n instanceof Ne,64498),re(xu(n),40251),re(n.filters.length>1,57927),n.filters.reduce((r,i)=>OT(r,i)))}function OT(t,e){let n;return re(t instanceof Te||t instanceof Ne,38388),re(e instanceof Te||e instanceof Ne,25473),n=t instanceof Te?e instanceof Te?function(i,s){return Ne.create([i,s],"and")}(t,e):dA(t,e):e instanceof Te?dA(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0,48005),xu(i)&&xu(s))return $L(i,s.getFilters());const o=FS(i)?i:s,a=FS(i)?s:i,l=o.filters.map(u=>OT(u,a));return Ne.create(l,"or")}(t,e),gg(n)}function dA(t,e){if(xu(e))return $L(e,t.getFilters());{const n=e.filters.map(r=>OT(t,r));return Ne.create(n,"or")}}function gg(t){if(re(t instanceof Te||t instanceof Ne,11850),t instanceof Te)return t;const e=t.getFilters();if(e.length===1)return gg(e[0]);if(BL(t))return t;const n=e.map(i=>gg(i)),r=[];return n.forEach(i=>{i instanceof Te?r.push(i):i instanceof Ne&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ne.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(){this.Cn=new MT}addToCollectionParentIndex(e,n){return this.Cn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Gn.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class MT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(ke.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="IndexedDbIndexManager",dp=new Uint8Array(0);class Uq{constructor(e,n){this.databaseId=n,this.vn=new MT,this.Fn=new ns(r=>Oa(r),(r,i)=>Xd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:on(i)};return pA(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[uL(n),""],!1,!0);return pA(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ii(o.parent))}return r})}addFieldIndex(e,n){const r=jc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=gl(e);return s.next(a=>{o.put(sA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=jc(e),i=gl(e),s=ml(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=jc(e),r=ml(e),i=gl(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return N.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new hA(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ml(e);let i=!0;const s=new Map;return N.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_e();const a=[];return N.forEach(s,(l,u)=>{U(fA,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${Oa(n)}`);const c=function(w,x){const O=kS(x);if(O===void 0)return null;for(const k of hg(w,O.fieldPath))switch(k.op){case"array-contains-any":return k.value.arrayValue.values||[];case"array-contains":return[k.value]}return null}(u,l),d=function(w,x){const O=new Map;for(const k of Qo(x))for(const T of hg(w,k.fieldPath))switch(T.op){case"==":case"in":O.set(k.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return O.set(k.fieldPath.canonicalString(),T.value),Array.from(O.values())}return null}(u,l),f=function(w,x){const O=[];let k=!0;for(const T of Qo(x)){const v=T.kind===0?Hx(w,T.fieldPath,w.startAt):Kx(w,T.fieldPath,w.startAt);O.push(v.value),k&&(k=v.inclusive)}return new fo(O,k)}(u,l),p=function(w,x){const O=[];let k=!0;for(const T of Qo(x)){const v=T.kind===0?Kx(w,T.fieldPath,w.endAt):Hx(w,T.fieldPath,w.endAt);O.push(v.value),k&&(k=v.inclusive)}return new fo(O,k)}(u,l),g=this.On(l,u,f),E=this.On(l,u,p),b=this.Nn(l,u,d),S=this.Bn(l.indexId,c,g,f.inclusive,E,p.inclusive,b);return N.forEach(S,y=>r.Y(y,n.limit).next(w=>{w.forEach(x=>{const O=q.fromSegments(x.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return N.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=jq(Ne.create(e.filters,"and")).map(r=>jS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/u]):dp,p=this.kn(e,f,r[d%u],i),g=this.qn(e,f,s[d%u],o),E=a.map(b=>this.kn(e,f,b,!0));c.push(...this.createRange(p,g,E))}return c}kn(e,n,r,i){const s=new na(e,q.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new na(e,q.empty(),n,r);return i?s.An():s}xn(e,n){const r=new hA(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return N.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Fe(nt.comparator),c=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Bc;for(const i of Qo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ta.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Bc;return ta.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Bc;return ta.Kt.Dt(Da(this.databaseId,n),r.Pn(function(s){const o=Qo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Bc);let s=0;for(const o of Qo(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Ed(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ta.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Bc;l.seed(a.un()),ta.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=jc(e),i=gl(e);return(n?r.J(OS,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const f=d?new md(d.sequenceNumber,new Gn(La(d.readTime),new q(ii(d.documentKey)),d.largestBatchId)):md.empty(),p=c.fields.map(([g,E])=>new Qp(nt.fromServerFormat(g),E));return new sg(c.indexId,c.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=jc(e),s=gl(e);return this.Gn(e).next(o=>i.J(OS,IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,l=>s.put(sA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,l=>this.zn(e,i,l).next(u=>{const c=this.jn(s,l);return u.isEqual(c)?N.resolve():this.Jn(e,s,l,u,c)}))))})}Hn(e,n,r,i){return ml(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return ml(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=ml(e);let s=new Fe(Cs);return i.ee({index:EL,range:IDBKeyRange.only([r.indexId,this.uid,rm(this.$n(r,n))])},(o,a)=>{s=s.add(new na(r.indexId,n,cA(a.arrayValue),cA(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Fe(Cs);const i=this.Qn(n,e);if(i==null)return r;const s=kS(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Ed(o))for(const a of o.arrayValue.values||[])r=r.add(new na(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new na(n.indexId,e.key,dp,i));return r}Jn(e,n,r,i,s){U(fA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,f){const p=l.getIterator(),g=u.getIterator();let E=fl(p),b=fl(g);for(;E||b;){let S=!1,y=!1;if(E&&b){const w=c(E,b);w<0?y=!0:w>0&&(S=!0)}else E!=null?y=!0:S=!0;S?(d(b),b=fl(g)):y?(f(E),E=fl(p)):(E=fl(p),b=fl(g))}}(i,s,Cs,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),N.waitFor(o)}Gn(e){let n=1;return gl(e).ee({index:SL,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Cs(o,a)).filter((o,a,l)=>!a||Cs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Cs(o,e),l=Cs(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,dp,q.empty()),l=i[o+1].Vn(this.uid,dp,q.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Cs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(mA)}getMinOffset(e,n){return N.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||Z(44426))).next(mA)}}function pA(t){return Dt(t,_d)}function ml(t){return Dt(t,kh)}function jc(t){return Dt(t,_T)}function gl(t){return Dt(t,Ph)}function mA(t){re(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;gT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Gn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IN=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e,n){const r=t.store(Ar),i=t.store(Eu),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(c,d,f)=>(a++,f.delete()));s.push(l.next(()=>{re(a===1,47070,{batchId:n.batchId})}));const u=[];for(const c of n.mutations){const d=vL(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return N.waitFor(s).next(()=>u)}function yg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(IN,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class Ly{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){re(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Ly(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xs(e).ee({index:ca,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Rl(e),o=xs(e);return o.add({}).next(a=>{re(typeof a=="number",49019);const l=new xT(a,n,r,i),u=function(p,g,E){const b=E.baseMutations.map(y=>pg(p.yt,y)),S=E.mutations.map(y=>pg(p.yt,y));return{userId:g,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:b,mutations:S}}(this.serializer,this.userId,l),c=[];let d=new Fe((f,p)=>he(f.canonicalString(),p.canonicalString()));for(const f of i){const p=vL(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),c.push(o.put(u)),c.push(s.put(p,_K))}return d.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),N.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return xs(e).get(n).next(r=>r?(re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ea(this.serializer,r)):null)}er(e,n){return this.Xn[n]?N.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return xs(e).ee({index:ca,range:i},(o,a,l)=>{a.userId===this.userId&&(re(a.batchId>=r,47524,{tr:r}),s=ea(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ya;return xs(e).ee({index:ca,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ya],[this.userId,Number.POSITIVE_INFINITY]);return xs(e).J(ca,n).next(r=>r.map(i=>ea(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Xp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Rl(e).ee({range:i},(o,a,l)=>{const[u,c,d]=o,f=ii(c);if(u===this.userId&&n.path.isEqual(f))return xs(e).get(d).next(p=>{if(!p)throw Z(61480,{nr:o,batchId:d});re(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(ea(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);const i=[];return n.forEach(s=>{const o=Xp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Rl(e).ee({range:a},(u,c,d)=>{const[f,p,g]=u,E=ii(p);f===this.userId&&s.path.isEqual(E)?r=r.add(g):d.done()});i.push(l)}),N.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Xp(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Fe(he);return Rl(e).ee({range:o},(l,u,c)=>{const[d,f,p]=l,g=ii(f);d===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(p)):c.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(xs(e).get(s).next(o=>{if(o===null)throw Z(35274,{batchId:s});re(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(ea(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return RN(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Rl(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ii(s[1]);i.push(l)}else a.done()}).next(()=>{re(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return CN(e,this.userId,n)}_r(e){return xN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:ya,lastStreamToken:""})}}function CN(t,e,n){const r=Xp(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Rl(t).ee({range:s,X:!0},(a,l,u)=>{const[c,d,f]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function xs(t){return Dt(t,Ar)}function Rl(t){return Dt(t,Eu)}function xN(t){return Dt(t,yd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Na(0)}static cr(){return new Na(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Na(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ae.fromTimestamp(new Le(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>yl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(re(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return yl(e).ee((o,a)=>{const l=nh(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return yl(e).ee((r,i)=>{const s=nh(i);n(s)})}lr(e){return yA(e).get(lg).next(n=>(re(n!==null,2888),n))}hr(e,n){return yA(e).put(lg,n)}Pr(e,n){return yl(e).put(SN(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Oa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return yl(e).ee({range:i,index:wL},(o,a,l)=>{const u=nh(a);Xd(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=js(e);return n.forEach(o=>{const a=on(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=js(e);return N.forEach(n,s=>{const o=on(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=js(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=js(e);let s=_e();return i.ee({range:r,X:!0},(o,a,l)=>{const u=ii(o[1]),c=new q(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=on(n.path),i=IDBKeyRange.bound([r],[uL(r)],!1,!0);let s=0;return js(e).ee({index:vT,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return yl(e).get(n).next(r=>r?nh(r):null)}}function yl(t){return Dt(t,Tu)}function yA(t){return Dt(t,va)}function js(t){return Dt(t,bu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="LruGarbageCollector",AN=1048576;function _A([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class Wq{constructor(e){this.Ir=e,this.buffer=new Fe(_A),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_A(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){U(vA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?U(vA,"Ignoring IndexedDB error during garbage collection: ",n):await So(n)}await this.Vr(3e5)})}}class Hq{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(bn.ce);const r=new Wq(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(gA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),El()<=Ee.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function kN(t,e){return new Hq(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e,n){this.db=e,this.garbageCollector=kN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return fp(e,r)}removeReference(e,n,r){return fp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return fp(e,n)}br(e,n){return function(i,s){let o=!1;return xN(i).te(a=>CN(i,a,s).next(l=>(l&&(o=!0),N.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),js(e).delete(function(d){return[0,on(d.path)]}(o))))});i.push(l)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return fp(e,n)}Sr(e,n){const r=js(e);let i,s=bn.ce;return r.ee({index:vT},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==bn.ce&&n(new q(ii(i)),s),s=u,i=l):s=bn.ce}).next(()=>{s!==bn.ce&&n(new q(ii(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fp(t,e){return js(t).put(function(r,i){return{targetId:0,path:on(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.changes=new ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Wo(e).put(r)}removeEntry(e,n,r){return Wo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=ht.newInvalidDocument(n);return Wo(e).ee({index:Yp,range:IDBKeyRange.only($c(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:ht.newInvalidDocument(n)};return Wo(e).ee({index:Yp,range:IDBKeyRange.only($c(n))},(i,s)=>{r={document:this.Cr(n,s),size:yg(s)}}).next(()=>r)}getEntries(e,n){let r=zn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=zn(),i=new He(q.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,yg(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return N.resolve();let i=new Fe(EA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound($c(i.first()),$c(i.last())),o=i.getIterator();let a=o.getNext();return Wo(e).ee({index:Yp,range:s},(l,u,c)=>{const d=q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&EA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j($c(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),mg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=zn();for(const d of u){const f=this.Cr(q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Yd(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=zn();const o=SA(n,r),a=SA(n,Gn.max());return Wo(e).ee({index:_L,range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.Cr(q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new Gq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return wA(e).get(DS).next(n=>(re(!!n,20021),n))}Dr(e,n){return wA(e).put(DS,n)}Cr(e,n){if(n){const r=Oq(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return ht.newInvalidDocument(e)}}function ON(t){return new qq(t)}class Gq extends DN{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ns(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Fe((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=rA(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=yg(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=rA(this.Nr.serializer,o.convertToNoDocument(ae.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function wA(t){return Dt(t,vd)}function Wo(t){return Dt(t,ag)}function $c(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SA(t,e){const n=e.documentKey.path.toArray();return[t,mg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function EA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Mh(r.mutation,i,In.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=si();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=eh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=zn();const o=Oh(),a=function(){return Oh()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof rs)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Mh(c.mutation,u,c.mutation.getFieldMask(),Le.now())):o.set(u.key,In.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>a.set(u,new Qq(c,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Oh();let i=new He((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||In.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=YL();c.forEach(f=>{if(!s.has(f)){const p=rN(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(si());let a=Su,l=s;return o.next(u=>N.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?N.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(c=>({batchId:a,changes:XL(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=eh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=eh();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,l=>{const u=function(d,f){return new Ha(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,ht.newInvalidDocument(c)))});let a=eh();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Mh(c.mutation,u,In.empty(),Le.now()),Yd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return N.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:EN(i.bundledQuery),readTime:yn(i.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(){this.overlays=new He(q.comparator),this.qr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=si();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=si(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new He((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=si(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=si(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return N.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PT(n,r));let s=this.qr.get(n);s===void 0&&(s=_e(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,N.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.Qr=new Fe(Ft.$r),this.Ur=new Fe(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new q(new ke([])),r=new Ft(n,e),i=new Ft(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new q(new ke([])),r=new Ft(n,e),i=new Ft(n,e+1);let s=_e();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ft(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(Ft.$r)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?ya:this.tr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),i=new Ft(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);return n.forEach(i=>{const s=new Ft(i,0),o=new Ft(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),N.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new Ft(new q(s),0);let a=new Fe(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),N.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return N.forEach(n.mutations,i=>{const s=new Ft(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ft(n,0),i=this.Zr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.ri=e,this.docs=function(){return new He(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ht.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=zn();const o=n.path,a=new q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||gT(fL(c),r)<=0||(i.has(c.key)||Yd(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new t7(this)}getSize(e){return N.resolve(this.size)}}class t7 extends DN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e){this.persistence=e,this.si=new ns(n=>Oa(n),Xd),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new LT,this.targetCount=0,this.ai=Na.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),N.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Pr(n),N.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.ui={},this.overlays={},this.ci=new bn(0),this.li=!1,this.li=!0,this.hi=new Jq,this.referenceDelegate=e(this),this.Pi=new n7(this),this.indexManager=new $q,this.remoteDocumentCache=function(i){return new e7(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new wN(n),this.Ii=new Xq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Zq(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);const i=new r7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return N.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class r7 extends mL{constructor(e){super(),this.currentSequenceNumber=e}}class Ny{constructor(e){this.persistence=e,this.Ri=new LT,this.Vi=null}static mi(e){return new Ny(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),N.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.fi,r=>{const i=q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return N.or([()=>N.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class vg{constructor(e,n){this.persistence=e,this.pi=new ns(r=>on(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=kN(this,n)}static mi(e,n){return new vg(e,n)}Ei(){}di(e){return N.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return N.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?N.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),N.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),N.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zp(e.data.value)),n}br(e,n,r){return N.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e){this.serializer=e}k(e,n,r,i){const s=new Sy("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(Qd)}(e),function(l){l.createObjectStore(yd,{keyPath:vK}),l.createObjectStore(Ar,{keyPath:Ox,autoIncrement:!0}).createIndex(ca,Mx,{unique:!0}),l.createObjectStore(Eu)}(e),TA(e),function(l){l.createObjectStore(Xo)}(e));let o=N.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(bu),l.deleteObjectStore(Tu),l.deleteObjectStore(va)}(e),TA(e)),o=o.next(()=>function(l){const u=l.store(va),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put(lg,c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Ar).J().next(d=>{l.deleteObjectStore(Ar),l.createObjectStore(Ar,{keyPath:Ox,autoIncrement:!0}).createIndex(ca,Mx,{unique:!0});const f=u.store(Ar),p=d.map(g=>f.put(g));return N.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Iu,{keyPath:CK})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(vd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Ty,{keyPath:xK})})(e),function(l){l.createObjectStore(by,{keyPath:AK})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Iy,{keyPath:NK});u.createIndex(MS,VK,{unique:!1}),u.createIndex(TL,FK,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(ag,{keyPath:wK});u.createIndex(Yp,SK),u.createIndex(_L,EK)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Xo))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(_T,{keyPath:PK,autoIncrement:!0}).createIndex(OS,kK,{unique:!1}),l.createObjectStore(Ph,{keyPath:DK}).createIndex(SL,OK,{unique:!1}),l.createObjectStore(kh,{keyPath:MK}).createIndex(EL,LK,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Ph).clear()}).next(()=>{n.objectStore(kh).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(wT,{keyPath:BK})})(e)})),r<18&&i>=18&&QM()&&(o=o.next(()=>{n.objectStore(Ph).clear()}).next(()=>{n.objectStore(kh).clear()})),o}wi(e){let n=0;return e.store(Xo).ee((r,i)=>{n+=yg(i)}).next(()=>{const r={byteSize:n};return e.store(vd).put(DS,r)})}yi(e){const n=e.store(yd),r=e.store(Ar);return n.J().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,ya],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ca,o).next(a=>N.forEach(a,l=>{re(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=ea(this.serializer,l);return RN(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(bu),r=e.store(Xo);return e.store(va).get(lg).next(i=>{const s=[];return r.ee((o,a)=>{const l=new ke(o),u=function(d){return[0,on(d)]}(l);s.push(n.get(u).next(c=>c?N.resolve():(d=>n.put({targetId:0,path:on(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>N.waitFor(s))})}bi(e,n){e.createObjectStore(_d,{keyPath:RK});const r=n.store(_d),i=new MT,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:on(l)})}};return n.store(Xo).ee({X:!0},(o,a)=>{const l=new ke(o);return s(l.popLast())}).next(()=>n.store(Eu).ee({X:!0},([o,a,l],u)=>{const c=ii(a);return s(c.popLast())}))}Di(e){const n=e.store(Tu);return n.ee((r,i)=>{const s=nh(i),o=SN(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(Xo),i=[];return r.ee((s,o)=>{const a=n.store(ag),l=function(d){return d.document?new q(ke.fromString(d.document.name).popFirst(5)):d.noDocument?q.fromSegments(d.noDocument.path):d.unknownDocument?q.fromSegments(d.unknownDocument.path):Z(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>N.waitFor(i))}Fi(e,n){const r=n.store(Ar),i=ON(this.serializer),s=new NT(Ny.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??_e();ea(this.serializer,l).keys().forEach(c=>u=u.add(c)),a.set(l.userId,u)}),N.forEach(a,(l,u)=>{const c=new en(u),d=My.wt(this.serializer,c),f=s.getIndexManager(c),p=Ly.wt(c,this.serializer,f,s.referenceDelegate);return new MN(i,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new LS(n,bn.ce),l).next()})})}}function TA(t){t.createObjectStore(bu,{keyPath:bK}).createIndex(vT,IK,{unique:!0}),t.createObjectStore(Tu,{keyPath:"targetId"}).createIndex(wL,TK,{unique:!0}),t.createObjectStore(va)}const As="IndexedDbPersistence",w_=18e5,S_=5e3,E_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",s7="main";class VT{constructor(e,n,r,i,s,o,a,l,u,c,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=c,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!VT.v())throw new W(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kq(this,i),this.$i=n+s7,this.serializer=new wN(l),this.Ui=new oo(this.$i,this.Ni,new i7(this.serializer)),this.hi=new Lq,this.Pi=new zq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ON(this.serializer),this.Ii=new Mq,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,c===!1&&mt(As,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(j.FAILED_PRECONDITION,E_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new bn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Eo(e))return U(As,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U(As,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Uc(e).get(dl).next(n=>N.resolve(this.es(n)))}ts(e){return pp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,w_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dt(n,Iu);return r.J().next(i=>{const s=this.ss(i,w_),o=i.filter(a=>s.indexOf(a)===-1);return N.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?N.resolve(!0):Uc(e).get(dl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,S_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new W(j.FAILED_PRECONDITION,E_);return!1}}return!(!this.networkEnabled||!this.inForeground)||pp(e).J().next(r=>this.ss(r,S_).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&U(As,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Qd,Iu],e=>{const n=new LS(e,bn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>pp(e).J().next(n=>this.ss(n,w_).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Ly.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uq(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return My.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){U(As,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?UK:l===17?CL:l===16?$K:l===15?ST:l===14?RL:l===13?IL:l===12?jK:l===11?bL:void Z(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new LS(a,this.ci?this.ci.next():bn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new W(j.FAILED_PRECONDITION,pL);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Uc(e).get(dl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,S_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new W(j.FAILED_PRECONDITION,E_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uc(e).put(dl,n)}static v(){return oo.v()}Zi(e){const n=Uc(e);return n.get(dl).next(r=>this.es(r)?(U(As,"Releasing primary lease."),n.delete(dl)):N.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;GM()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return U(As,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mt(As,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uc(t){return Dt(t,Qd)}function pp(t){return Dt(t,Iu)}function LN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new FT(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return GM()?8:gL(Pt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new o7;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(El()<=Ee.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),N.resolve()):(El()<=Ee.DEBUG&&U("QueryEngine","Query:",Tl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(El()<=Ee.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):N.resolve())}ys(e,n){if(qx(n))return N.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dg(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,dg(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return qx(n)||i.isEqual(ae.min())?N.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?N.resolve(null):(El()<=Ee.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tl(n)),this.vs(e,o,n,dL(i,Su)).next(a=>a))})}Ds(e,n){let r=new Fe(GL(e));return n.forEach((i,s)=>{Yd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return El()<=Ee.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Tl(n)),this.ps.getDocumentsMatchingQuery(e,n,Gn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="LocalStore",a7=3e8;class l7{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new He(he),this.xs=new ns(s=>Oa(s),Xd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function VN(t,e,n,r){return new l7(t,e,n,r)}async function FN(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function u7(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let p=N.resolve();return f.forEach(g=>{p=p.next(()=>c.getEntry(l,g)).next(E=>{const b=u.docVersions.get(g);re(b!==null,48541),E.version.compareTo(b)<0&&(d.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),c.addEntry(E)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function BN(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function c7(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(yt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(d,p),function(E,b,S){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=a7?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(f,p,c)&&a.push(n.Pi.updateTargetData(s,p))});let l=zn(),u=_e();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(h7(s,o,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!r.isEqual(ae.min())){const c=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function h7(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=zn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):U(BT,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function d7(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ya),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _g(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Oi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Du(t,e,n){const r=ne(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Eo(o))throw o;U(BT,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function QS(t,e,n){const r=ne(t);let i=ae.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=ne(l),f=d.xs.get(c);return f!==void 0?N.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,c)}(r,o,Kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:_e())).next(a=>(UN(r,qL(e),a),{documents:a,Qs:s})))}function jN(t,e){const n=ne(t),r=ne(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function $N(t,e){const n=ne(t),r=n.Os.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,dL(r,Su),Number.MAX_SAFE_INTEGER)).then(i=>(UN(n,e,i),i))}function UN(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="firestore_clients";function bA(t,e){return`${zN}_${t}_${e}`}const WN="firestore_mutations";function IA(t,e,n){let r=`${WN}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const HN="firestore_targets";function T_(t,e){return`${HN}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="SharedClientState";class wg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new W(i.error.code,i.error.message))),o?new wg(e,n,i.state,s):(mt(Jr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new W(r.error.code,r.error.message))),s?new Lh(e,r.state,i):(mt(Jr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=RT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=yL(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Sg(e,s):(mt(Jr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class jT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new jT(n.clientId,n.onlineState):(mt(Jr,`Failed to parse online state: ${e}`),null)}}class XS{constructor(){this.activeTargetIds=RT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class b_{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new He(he),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=bA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new XS),this.ro=new RegExp(`^${zN}_${o}_([^_]*)$`),this.io=new RegExp(`^${WN}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${HN}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(bA(this.persistenceKey,r));if(i){const s=Sg.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(T_(this.persistenceKey,e));if(i){const s=Lh.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(T_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return U(Jr,"READ",e,n),n}setItem(e,n){U(Jr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){U(Jr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(U(Jr,"EVENT",n.key,n.newValue),n.key===this.eo)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=bn.ce;if(s!=null)try{const a=JSON.parse(s);re(typeof a=="number",30636,{So:s}),o=a}catch(a){mt(Jr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==bn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new wg(this.currentUser,e,n,r),s=IA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=IA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=T_(this.persistenceKey,e),s=new Lh(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Sg.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return wg.Ws(new en(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Lh.Ws(i,n)}uo(e){return jT.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);U(Jr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=RT();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class KN{constructor(){this.Mo=new XS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new XS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="ConnectivityMonitor";class CA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){U(RA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){U(RA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp=null;function YS(){return mp===null?mp=function(){return 268435456+Math.round(2147483648*Math.random())}():mp++,"0x"+mp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="RestConnection",p7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ug?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=YS(),a=this.zo(e,n.toUriEncodedString());U(I_,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),c=Hu(u);return this.Jo(e,a,l,r,c).then(d=>(U(I_,`Received RPC '${e}' ${o}: `,d),d),d=>{throw pd(I_,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=p7[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class y7 extends m7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=YS();return new Promise((a,l)=>{const u=new rL;u.setWithCredentials(!0),u.listenOnce(iL.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gp.NO_ERROR:const d=u.getResponseJson();U(Jt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Gp.TIMEOUT:U(Jt,`RPC '${e}' ${o} timed out`),l(new W(j.DEADLINE_EXCEEDED,"Request time out"));break;case Gp.HTTP_ERROR:const f=u.getStatus();if(U(Jt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const E=function(S){const y=S.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(y)>=0?y:j.UNKNOWN}(g.status);l(new W(E,g.message))}else l(new W(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(j.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{U(Jt,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);U(Jt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}T_(e,n,r){const i=YS(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aL(),a=oL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");U(Jt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.I_(d);let f=!1,p=!1;const g=new g7({Yo:b=>{p?U(Jt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(U(Jt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),U(Jt,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},Zo:()=>d.close()}),E=(b,S,y)=>{b.listen(S,w=>{try{y(w)}catch(x){setTimeout(()=>{throw x},0)}})};return E(d,Zc.EventType.OPEN,()=>{p||(U(Jt,`RPC '${e}' stream ${i} transport opened.`),g.o_())}),E(d,Zc.EventType.CLOSE,()=>{p||(p=!0,U(Jt,`RPC '${e}' stream ${i} transport closed`),g.a_(),this.E_(d))}),E(d,Zc.EventType.ERROR,b=>{p||(p=!0,pd(Jt,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new W(j.UNAVAILABLE,"The operation could not be completed")))}),E(d,Zc.EventType.MESSAGE,b=>{var S;if(!p){const y=b.data[0];re(!!y,16349);const w=y,x=(w==null?void 0:w.error)||((S=w[0])==null?void 0:S.error);if(x){U(Jt,`RPC '${e}' stream ${i} received error:`,x);const O=x.status;let k=function(R){const C=vt[R];if(C!==void 0)return oN(C)}(O),T=x.message;k===void 0&&(k=j.INTERNAL,T="Unknown error status: "+O+" with message "+x.message),p=!0,g.a_(new W(k,T)),d.close()}else U(Jt,`RPC '${e}' stream ${i} received:`,y),g.u_(y)}}),E(a,sL.STAT_EVENT,b=>{b.stat===AS.PROXY?U(Jt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===AS.NOPROXY&&U(Jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof window<"u"?window:null}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){return new Tq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="PersistentStream";class QN{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return U(xA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(U(xA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v7 extends QN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Rq(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?yn(o.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=WS(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=cg(l)?{documents:pN(s,l)}:{query:mN(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uN(s,o.resumeToken);const u=US(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=ku(s,o.snapshotVersion.toTimestamp());const u=US(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=xq(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=WS(this.serializer),n.removeTarget=e,this.q_(n)}}class _7 extends QN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Cq(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=WS(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pg(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{}class S7 extends w7{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,zS(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,zS(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class E7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mt(n),this.aa=!1):U("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="RemoteStore";class T7{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ka(this)&&(U(Va,"Restarting streams for network reachability change."),await async function(l){const u=ne(l);u.Ea.add(4),await ef(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Fy(u)}(this))})}),this.Ra=new E7(r,i)}}async function Fy(t){if(Ka(t))for(const e of t.da)await e(!0)}async function ef(t){for(const e of t.da)await e(!1)}function By(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zT(n)?UT(n):Xu(n).O_()&&$T(n,e))}function Ou(t,e){const n=ne(t),r=Xu(n);n.Ia.delete(e),r.O_()&&XN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ka(n)&&n.Ra.set("Unknown"))}function $T(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xu(t).Y_(e)}function XN(t,e){t.Va.Ue(e),Xu(t).Z_(e)}function UT(t){t.Va=new _q({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xu(t).start(),t.Ra.ua()}function zT(t){return Ka(t)&&!Xu(t).x_()&&t.Ia.size>0}function Ka(t){return ne(t).Ea.size===0}function YN(t){t.Va=void 0}async function b7(t){t.Ra.set("Online")}async function I7(t){t.Ia.forEach((e,n)=>{$T(t,e)})}async function R7(t,e){YN(t),zT(t)?(t.Ra.ha(e),UT(t)):t.Ra.set("Unknown")}async function C7(t,e,n){if(t.Ra.set("Online"),e instanceof lN&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){U(Va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Eg(t,r)}else if(e instanceof nm?t.Va.Ze(e):e instanceof aN?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await BN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(yt.EMPTY_BYTE_STRING,c.snapshotVersion)),XN(s,l);const d=new Oi(c.target,l,u,c.sequenceNumber);$T(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){U(Va,"Failed to raise snapshot:",r),await Eg(t,r)}}async function Eg(t,e,n){if(!Eo(e))throw e;t.Ea.add(1),await ef(t),t.Ra.set("Offline"),n||(n=()=>BN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U(Va,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fy(t)})}function JN(t,e){return e().catch(n=>Eg(t,n,e))}async function Qu(t){const e=ne(t),n=po(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ya;for(;x7(e);)try{const i=await d7(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,A7(e,i)}catch(i){await Eg(e,i)}ZN(e)&&eV(e)}function x7(t){return Ka(t)&&t.Ta.length<10}function A7(t,e){t.Ta.push(e);const n=po(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ZN(t){return Ka(t)&&!po(t).x_()&&t.Ta.length>0}function eV(t){po(t).start()}async function P7(t){po(t).ra()}async function k7(t){const e=po(t);for(const n of t.Ta)e.ea(n.mutations)}async function D7(t,e,n){const r=t.Ta.shift(),i=AT.from(r,e,n);await JN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Qu(t)}async function O7(t,e){e&&po(t).X_&&await async function(r,i){if(function(o){return gq(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();po(r).B_(),await JN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Qu(r)}}(t,e),ZN(t)&&eV(t)}async function AA(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),U(Va,"RemoteStore received new credentials");const r=Ka(n);n.Ea.add(3),await ef(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fy(n)}async function JS(t,e){const n=ne(t);e?(n.Ea.delete(2),await Fy(n)):e||(n.Ea.add(2),await ef(n),n.Ra.set("Unknown"))}function Xu(t){return t.ma||(t.ma=function(n,r,i){const s=ne(n);return s.sa(),new v7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:b7.bind(null,t),t_:I7.bind(null,t),r_:R7.bind(null,t),H_:C7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),zT(t)?UT(t):t.Ra.set("Unknown")):(await t.ma.stop(),YN(t))})),t.ma}function po(t){return t.fa||(t.fa=function(n,r,i){const s=ne(n);return s.sa(),new _7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:P7.bind(null,t),r_:O7.bind(null,t),ta:k7.bind(null,t),na:D7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qu(t)):(await t.fa.stop(),t.Ta.length>0&&(U(Va,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new WT(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function HT(t,e){if(mt("AsyncQueue",`${e}: ${t}`),Eo(t))return new W(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{static emptySet(e){return new su(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=eh(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof su)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new su;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.ga=new He(q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mu{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mu(e,n,su.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Py(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class L7{constructor(){this.queries=kA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=kA(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new W(j.ABORTED,"Firestore shutting down"))}}function kA(){return new ns(t=>KL(t),Py)}async function tV(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new M7,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=HT(o,`Initialization of query '${Tl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&KT(n)}async function nV(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function N7(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&KT(n)}function V7(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function KT(t){t.Ca.forEach(e=>{e.next()})}var ZS,DA;(DA=ZS||(ZS={})).Ma="default",DA.Cache="cache";class rV{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ZS.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.key=e}}class sV{constructor(e){this.key=e}}class F7{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=GL(e),this.tu=new su(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new PA,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=Yd(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;f&&p?f.data.isEqual(p.data)?g!==E&&(r.track({type:3,doc:p}),b=!0):this.su(f,p)||(r.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),b=!0):f&&!p&&(r.track({type:1,doc:f}),b=!0,(l||u)&&(a=!0)),b&&(p?(o=o.add(p),s=E?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((c,d)=>function(p,g){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:b})}};return E(p)-E(g)}(c.type,d.type)||this.eu(c.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Mu(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sV(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new iV(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yu="SyncEngine";class B7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class j7{constructor(e){this.key=e,this.hu=!1}}class $7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ns(a=>KL(a),Py),this.Iu=new Map,this.Eu=new Set,this.du=new He(q.comparator),this.Au=new Map,this.Ru=new LT,this.Vu={},this.mu=new Map,this.fu=Na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U7(t,e,n=!0){const r=jy(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await oV(r,e,n,!0),i}async function z7(t,e){const n=jy(t);await oV(n,e,!0,!1)}async function oV(t,e,n,r){const i=await _g(t.localStore,Kn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await qT(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&By(t.remoteStore,i),a}async function qT(t,e,n,r,i){t.pu=(d,f,p)=>async function(E,b,S,y){let w=b.view.ru(S);w.Cs&&(w=await QS(E.localStore,b.query,!1).then(({documents:T})=>b.view.ru(T,w)));const x=y&&y.targetChanges.get(b.targetId),O=y&&y.targetMismatches.get(b.targetId)!=null,k=b.view.applyChanges(w,E.isPrimaryClient,x,O);return e0(E,b.targetId,k.au),k.snapshot}(t,d,f,p);const s=await QS(t.localStore,e,!0),o=new F7(e,s.Qs),a=o.ru(s.documents),l=Zd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);e0(t,n,u.au);const c=new B7(e,n,o);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function W7(t,e,n){const r=ne(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Py(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Du(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ou(r.remoteStore,i.targetId),Lu(r,i.targetId)}).catch(So)):(Lu(r,i.targetId),await Du(r.localStore,i.targetId,!0))}async function H7(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ou(n.remoteStore,r.targetId))}async function K7(t,e,n){const r=YT(t);try{const i=await function(o,a){const l=ne(o),u=Le.now(),c=a.reduce((p,g)=>p.add(g.key),_e());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=zn(),E=_e();return l.Ns.getEntries(p,c).next(b=>{g=b,g.forEach((S,y)=>{y.isValidDocument()||(E=E.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(b=>{d=b;const S=[];for(const y of a){const w=pq(y,d.get(y.key).overlayedDocument);w!=null&&S.push(new rs(y.key,w,VL(w.value.mapValue),fn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,S,a)}).next(b=>{f=b;const S=b.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(p,b.batchId,S)})}).then(()=>({batchId:f.batchId,changes:XL(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new He(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await bo(r,i.changes),await Qu(r.remoteStore)}catch(i){const s=HT(i,"Failed to persist write");n.reject(s)}}async function aV(t,e){const n=ne(t);try{const r=await c7(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?re(o.hu,14607):i.removedDocuments.size>0&&(re(o.hu,42227),o.hu=!1))}),await bo(n,r,e)}catch(r){await So(r)}}function OA(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&KT(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q7(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new He(q.comparator);o=o.insert(s,ht.newNoDocument(s,ae.min()));const a=_e().add(s),l=new Jd(ae.min(),new Map,new He(he),o,a);await aV(r,l),r.du=r.du.remove(s),r.Au.delete(e),XT(r)}else await Du(r.localStore,e,!1).then(()=>Lu(r,e,n)).catch(So)}async function G7(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await u7(n.localStore,e);QT(n,r,null),GT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bo(n,i)}catch(i){await So(i)}}async function Q7(t,e,n){const r=ne(t);try{const i=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(re(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);QT(r,e,n),GT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bo(r,i)}catch(i){await So(i)}}function GT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function QT(t,e,n){const r=ne(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Lu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||lV(t,r)})}function lV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ou(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),XT(t))}function e0(t,e,n){for(const r of n)r instanceof iV?(t.Ru.addReference(r.key,e),X7(t,r)):r instanceof sV?(U(Yu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||lV(t,r.key)):Z(19791,{wu:r})}function X7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(U(Yu,"New document in limbo: "+n),t.Eu.add(r),XT(t))}function XT(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(ke.fromString(e)),r=t.fu.next();t.Au.set(r,new j7(n)),t.du=t.du.insert(n,r),By(t.remoteStore,new Oi(Kn(Ay(n.path)),r,"TargetPurposeLimboResolution",bn.ce))}}async function bo(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=FT.As(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const c=ne(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(u,f=>N.forEach(f.Es,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>N.forEach(f.ds,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Eo(d))throw d;U(BT,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const p=c.Ms.get(f),g=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(g);c.Ms=c.Ms.insert(f,E)}}}(r.localStore,s))}async function Y7(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){U(Yu,"User change. New user:",e.toKey());const r=await FN(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new W(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bo(n,r.Ls)}}function J7(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function Z7(t,e){const n=ne(t),r=await QS(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&e0(n,e.targetId,i.au),i}async function eG(t,e){const n=ne(t);return $N(n.localStore,e).then(r=>bo(n,r))}async function tG(t,e,n,r){const i=ne(t),s=await function(a,l){const u=ne(a),c=ne(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.er(d,l).next(f=>f?u.localDocuments.getDocuments(d,f):N.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Qu(i.remoteStore):n==="acknowledged"||n==="rejected"?(QT(i,e,r||null),GT(i,e),function(a,l){ne(ne(a).mutationQueue).ir(l)}(i.localStore,e)):Z(6720,"Unknown batchState",{Su:n}),await bo(i,s)):U(Yu,"Cannot apply mutation batch with id: "+e)}async function nG(t,e){const n=ne(t);if(jy(n),YT(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await MA(n,r.toArray());n.gu=!0,await JS(n.remoteStore,!0);for(const s of i)By(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Lu(n,o),Du(n.localStore,o,!0))),Ou(n.remoteStore,o)}),await i,await MA(n,r),function(o){const a=ne(o);a.Au.forEach((l,u)=>{Ou(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new He(q.comparator)}(n),n.gu=!1,await JS(n.remoteStore,!1)}}async function MA(t,e,n){const r=ne(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await _g(r.localStore,Kn(l[0]));for(const u of l){const c=r.Tu.get(u),d=await Z7(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await jN(r.localStore,o);a=await _g(r.localStore,u),await qT(r,uV(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function uV(t){return HL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function rG(t){return function(n){return ne(ne(n).persistence).Ts()}(ne(t).localStore)}async function iG(t,e,n,r){const i=ne(t);if(i.gu)return void U(Yu,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await $N(i.localStore,qL(s[0])),a=Jd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yt.EMPTY_BYTE_STRING);await bo(i,o,a);break}case"rejected":await Du(i.localStore,e,!0),Lu(i,e,r);break;default:Z(64155,n)}}async function sG(t,e,n){const r=jy(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){U(Yu,"Adding an already active target "+i);continue}const s=await jN(r.localStore,i),o=await _g(r.localStore,s);await qT(r,uV(s),o.targetId,!1,o.resumeToken),By(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await Du(r.localStore,i,!1).then(()=>{Ou(r.remoteStore,i),Lu(r,i)}).catch(So)}}function jy(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q7.bind(null,e),e.Pu.H_=N7.bind(null,e.eventManager),e.Pu.yu=V7.bind(null,e.eventManager),e}function YT(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q7.bind(null,e),e}class Rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VN(this.persistence,new NN,e.initialUser,this.serializer)}Cu(e){return new NT(Ny.mi,this.serializer)}Du(e){return new KN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rd.provider={build:()=>new Rd};class oG extends Rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){re(this.persistence.referenceDelegate instanceof vg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new NT(r=>vg.mi(r,n),this.serializer)}}class cV extends Rd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await YT(this.xu.syncEngine),await Qu(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return VN(this.persistence,new NN,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new PN(r,e.asyncQueue,n)}Mu(e,n){const r=new gK(n,this.persistence);return new mK(e.asyncQueue,r)}Cu(e){const n=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new VT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,qN(),im(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new KN}}class aG extends cV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof b_&&(this.sharedClientState.syncEngine={Co:tG.bind(null,n),vo:iG.bind(null,n),Fo:sG.bind(null,n),Ts:rG.bind(null,n),Do:eG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await nG(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=qN();if(!b_.v(n))throw new W(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new b_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Cd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y7.bind(null,this.syncEngine),await JS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new L7}()}createDatastore(e){const n=Vy(e.databaseInfo.databaseId),r=function(s){return new y7(s)}(e.databaseInfo);return function(s,o,a,l){return new S7(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new T7(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>OA(this.syncEngine,n,0),function(){return CA.v()?new CA:new f7}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new $7(i,s,o,a,l,u);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);U(Va,"RemoteStore shutting down."),s.Ea.add(5),await ef(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Cd.provider={build:()=>new Cd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="FirestoreClient";class lG{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=en.UNAUTHENTICATED,this.clientId=mT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{U(mo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(U(mo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=HT(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function R_(t,e){t.asyncQueue.verifyOperationInProgress(),U(mo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await FN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function LA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uG(t);U(mo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>AA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>AA(e.remoteStore,i)),t._onlineComponents=e}async function uG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U(mo,"Using user provided OfflineComponentProvider");try{await R_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;pd("Error using user provided cache. Falling back to memory cache: "+n),await R_(t,new Rd)}}else U(mo,"Using default OfflineComponentProvider"),await R_(t,new oG(void 0));return t._offlineComponents}async function dV(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(U(mo,"Using user provided OnlineComponentProvider"),await LA(t,t._uninitializedComponentsProvider._online)):(U(mo,"Using default OnlineComponentProvider"),await LA(t,new Cd))),t._onlineComponents}function cG(t){return dV(t).then(e=>e.syncEngine)}async function fV(t){const e=await dV(t),n=e.eventManager;return n.onListen=U7.bind(null,e.syncEngine),n.onUnlisten=W7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H7.bind(null,e.syncEngine),n}function hG(t,e,n={}){const r=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new hV({next:f=>{c.Nu(),o.enqueueAndForget(()=>nV(s,d));const p=f.docs.has(a);!p&&f.fromCache?u.reject(new W(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?u.reject(new W(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new rV(Ay(a.path),c,{includeMetadataChanges:!0,qa:!0});return tV(s,d)}(await fV(t),t.asyncQueue,e,n,r)),r.promise}function dG(t,e,n={}){const r=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new hV({next:f=>{c.Nu(),o.enqueueAndForget(()=>nV(s,d)),f.fromCache&&l.source==="server"?u.reject(new W(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new rV(a,c,{includeMetadataChanges:!0,qa:!0});return tV(s,d)}(await fV(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG="firestore.googleapis.com",VA=!0;class FA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fG,this.ssl=VA}else this.host=e.host,this.ssl=e.ssl??VA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AN)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pV(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class JT{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nK;switch(r.type){case"firstParty":return new sK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=NA.get(n);r&&(U("ComponentProvider","Removing Datastore"),NA.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Gd(n,gt._jsonSchema))return new gt(e,r||null,new q(ke.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:St("string",gt._jsonSchemaVersion),referencePath:St("string")};class ao extends is{constructor(e,n,r){super(e,n,Ay(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new q(e))}withConverter(e){return new ao(this.firestore,e,this._path)}}function ZT(t,e,...n){if(t=kt(t),cL("collection","path",e),t instanceof JT){const r=ke.fromString(e,...n);return xx(r),new ao(t,null,r)}{if(!(t instanceof gt||t instanceof ao))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return xx(r),new ao(t.firestore,null,r)}}function Ju(t,e,...n){if(t=kt(t),arguments.length===1&&(e=mT.newId()),cL("doc","path",e),t instanceof JT){const r=ke.fromString(e,...n);return Cx(r),new gt(t,null,new q(r))}{if(!(t instanceof gt||t instanceof ao))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Cx(r),new gt(t.firestore,t instanceof ao?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="AsyncQueue";class jA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GN(this,"async_queue_retry"),this._c=()=>{const r=im();r&&U(BA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ui;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Eo(e))throw e;U(BA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mt("INTERNAL UNHANDLED ERROR: ",$A(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=WT.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:$A(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $A(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zu extends JT{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jA(e),this._firestoreClient=void 0,await e}}}function pG(t,e,n){n||(n=ug);const r=fT(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(xa(s,e))return i;throw new W(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new W(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AN)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Hu(e.host)&&KM(e.host),r.initialize({options:e,instanceIdentifier:n})}function eb(t){if(t._terminated)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mG(t),t._firestoreClient}function mG(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,c){return new WK(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,pV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new lG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(yt.fromBase64String(e))}catch(n){throw new W(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sr(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gd(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:St("string",sr._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(Gd(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:St("string",ci._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gd(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new hi(e.vectorValues);throw new W(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:St("string",hi._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gG=/^__.*__$/;class yG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gu(e,this.data,n,this.fieldTransforms)}}class mV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class nb{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gV(this.Ac)&&gG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vy(e)}Cc(e,n,r,i=!1){return new nb({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uy(t){const e=t._freezeSettings(),n=Vy(t._databaseId);return new vG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _G(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);rb("Data must be an object, but it was:",o,r);const a=vV(r,o);let l,u;if(s.merge)l=new In(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=t0(e,d,n);if(!o.contains(f))throw new W(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wV(c,f)||c.push(f)}l=new In(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new yG(new rn(a),l,u)}class zy extends tb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zy}}function wG(t,e,n,r){const i=t.Cc(1,e,n);rb("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();To(r,(l,u)=>{const c=ib(e,l,n);u=kt(u);const d=i.yc(c);if(u instanceof zy)s.push(c);else{const f=tf(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new In(s);return new mV(o,a,i.fieldTransforms)}function SG(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[t0(e,r,n)],l=[i];if(s.length%2!=0)throw new W(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(t0(e,s[f])),l.push(s[f+1]);const u=[],c=rn.empty();for(let f=a.length-1;f>=0;--f)if(!wV(u,a[f])){const p=a[f];let g=l[f];g=kt(g);const E=o.yc(p);if(g instanceof zy)u.push(p);else{const b=tf(g,E);b!=null&&(u.push(p),c.set(p,b))}}const d=new In(u);return new mV(c,d,o.fieldTransforms)}function yV(t,e,n,r=!1){return tf(n,t.Cc(r?4:3,e))}function tf(t,e){if(_V(t=kt(t)))return rb("Unsupported field value:",e,t),vV(t,e);if(t instanceof tb)return function(r,i){if(!gV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=tf(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Le.fromDate(r);return{timestampValue:ku(i.serializer,s)}}if(r instanceof Le){const s=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ku(i.serializer,s)}}if(r instanceof ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sr)return{bytesValue:uN(i.serializer,r._byteString)};if(r instanceof gt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:DT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hi)return function(o,a){return{mapValue:{fields:{[ET]:{stringValue:TT},[Ru]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return CT(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${wy(r)}`)}(t,e)}function vV(t,e){const n={};return xL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(t,(r,i)=>{const s=tf(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function _V(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof ci||t instanceof sr||t instanceof gt||t instanceof tb||t instanceof hi)}function rb(t,e,n){if(!_V(n)||!hL(n)){const r=wy(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function t0(t,e,n){if((e=kt(e))instanceof $y)return e._internalPath;if(typeof e=="string")return ib(t,e);throw Tg("Field path arguments must be of type string or ",t,!1,void 0,n)}const EG=new RegExp("[~\\*/\\[\\]]");function ib(t,e,n){if(e.search(EG)>=0)throw Tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $y(...e.split("."))._internalPath}catch{throw Tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(j.INVALID_ARGUMENT,a+t+l)}function wV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ob("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TG extends sb{data(){return super.data()}}function ob(t,e){return typeof e=="string"?ib(t,e):e instanceof $y?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ab{}class Wy extends ab{}function n0(t,e,...n){let r=[];e instanceof ab&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof ub).length,a=s.filter(l=>l instanceof lb).length;if(o>1||o>0&&a>0)throw new W(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class lb extends Wy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lb(e,n,r)}_apply(e){const n=this._parse(e);return SV(e._query,n),new is(e.firestore,e.converter,$S(e._query,n))}_parse(e){const n=Uy(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new W(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){HA(d,c);const g=[];for(const E of d)g.push(WA(l,s,E));f={arrayValue:{values:g}}}else f=WA(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||HA(d,c),f=yV(a,o,d,c==="in"||c==="not-in");return Te.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class ub extends ab{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ub(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)SV(o,l),o=$S(o,l)}(e._query,n),new is(e.firestore,e.converter,$S(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cb extends Wy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cb(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new W(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Td(s,o)}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ha(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function UA(t,e="asc"){const n=e,r=ob("orderBy",t);return cb._create(r,n)}class hb extends Wy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hb(e,n,r)}_apply(e){return new is(e.firestore,e.converter,dg(e._query,this._limit,this._limitType))}}function zA(t){return dK("limit",t),hb._create("limit",t,"F")}class db extends Wy{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new db(e,n,r)}_apply(e){const n=RG(e,this.type,this._docOrFields,this._inclusive);return new is(e.firestore,e.converter,function(i,s){return new Ha(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function IG(...t){return db._create("startAfter",t,!1)}function RG(t,e,n,r){if(n[0]=kt(n[0]),n[0]instanceof sb)return function(s,o,a,l,u){if(!l)throw new W(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const d of iu(s))if(d.field.isKeyField())c.push(Da(o,l.key));else{const f=l.data.field(d.field);if(Ry(f))throw new W(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=d.field.canonicalString();throw new W(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}c.push(f)}return new fo(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Uy(t.firestore);return function(o,a,l,u,c,d){const f=o.explicitOrderBy;if(c.length>f.length)throw new W(j.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<c.length;g++){const E=c[g];if(f[g].field.isKeyField()){if(typeof E!="string")throw new W(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof E}`);if(!IT(o)&&E.indexOf("/")!==-1)throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${E}' contains a slash.`);const b=o.path.child(ke.fromString(E));if(!q.isDocumentKey(b))throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const S=new q(b);p.push(Da(a,S))}else{const b=yV(l,u,E);p.push(b)}}return new fo(p,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function WA(t,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new W(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IT(e)&&n.indexOf("/")!==-1)throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!q.isDocumentKey(r))throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Da(t,new q(r))}if(n instanceof gt)return Da(t,n._key);throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wy(n)}.`)}function HA(t,e){if(!Array.isArray(t)||t.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SV(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CG{convertValue(e,n="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return To(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ru].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ye(o.doubleValue));return new hi(n)}convertGeoPoint(e){return new ci(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wd(e));default:return null}}convertTimestamp(e){const n=qi(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);re(_N(r),9688,{name:e});const i=new ka(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||mt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xG(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class rh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends sb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ob("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:St("string",wa._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class sm extends wa{data(e={}){return super.data(e)}}class ou{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new rh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sm(this._firestore,this._userDataWriter,r.key,r,new rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new sm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new sm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:AG(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ou._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PG(t){t=Ki(t,gt);const e=Ki(t.firestore,Zu);return hG(eb(e),t._key).then(n=>OG(e,t,n))}ou._jsonSchemaVersion="firestore/querySnapshot/1.0",ou._jsonSchema={type:St("string",ou._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class EV extends CG{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function TV(t){t=Ki(t,is);const e=Ki(t.firestore,Zu),n=eb(e),r=new EV(e);return bG(t._query),dG(n,t._query).then(i=>new ou(e,r,t,i))}function fb(t,e,n){t=Ki(t,gt);const r=Ki(t.firestore,Zu),i=xG(t.converter,e,n);return pb(r,[_G(Uy(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fn.none())])}function kG(t,e,n,...r){t=Ki(t,gt);const i=Ki(t.firestore,Zu),s=Uy(i);let o;return o=typeof(e=kt(e))=="string"||e instanceof $y?SG(s,"updateDoc",t._key,e,n,r):wG(s,"updateDoc",t._key,e),pb(i,[o.toMutation(t._key,fn.exists(!0))])}function DG(t){return pb(Ki(t.firestore,Zu),[new Oy(t._key,fn.none())])}function pb(t,e){return function(r,i){const s=new ui;return r.asyncQueue.enqueueAndForget(async()=>K7(await cG(r),i,s)),s.promise}(eb(t),e)}function OG(t,e,n){const r=n.docs.get(e._key),i=new EV(t);return new wa(t,i,e._key,r,new rh(n.hasPendingWrites,n.fromCache),e.converter)}class MG{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=FG(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function LG(t){return new MG(t)}class NG{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Cd.provider,this._offlineComponentProvider={build:n=>new cV(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class VG{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Cd.provider,this._offlineComponentProvider={build:n=>new aG(n,e==null?void 0:e.cacheSizeBytes)}}}function FG(t){return new NG(t==null?void 0:t.forceOwnership)}function BG(){return new VG}(function(e,n=!0){(function(i){qu=i})(Ku),_u(new Aa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zu(new rK(r.getProvider("auth-internal")),new oK(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(u.options.projectId,c)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),io(Tx,bx,e),io(Tx,bx,"esm2020")})();function bV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jG=bV,IV=new Kd("auth","Firebase",bV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=new hT("@firebase/auth");function $G(t,...e){bg.logLevel<=Ee.WARN&&bg.warn(`Auth (${Ku}): ${t}`,...e)}function om(t,...e){bg.logLevel<=Ee.ERROR&&bg.error(`Auth (${Ku}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,...e){throw mb(t,...e)}function di(t,...e){return mb(t,...e)}function RV(t,e,n){const r={...jG(),[e]:n};return new Kd("auth","Firebase",r).create(e,{appName:t.name})}function Bi(t){return RV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IV.create(t,...e)}function le(t,e,...n){if(!t)throw mb(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw om(e),new Error(e)}function Qi(t,e){t||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function UG(){return KA()==="http:"||KA()==="https:"}function KA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UG()||O8()||"connection"in navigator)?navigator.onLine:!0}function WG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qi(n>e,"Short delay should be less than long delay!"),this.isMobile=k8()||M8()}get(){return zG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t,e){Qi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qG=new nf(3e4,6e4);function ss(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function os(t,e,n,r,i={}){return xV(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=qd({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return D8()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Hu(t.emulatorConfig.host)&&(u.credentials="include"),CV.fetch()(await AV(t,t.config.apiHost,n,a),u)})}async function xV(t,e,n){t._canInitEmulator=!1;const r={...HG,...e};try{const i=new QG(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gp(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw RV(t,c,u);Vr(t,c)}}catch(i){if(i instanceof ts)throw i;Vr(t,"network-request-failed",{message:String(i)})}}async function rf(t,e,n,r,i={}){const s=await os(t,e,n,r,i);return"mfaPendingCredential"in s&&Vr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function AV(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?gb(t.config,i):`${t.config.apiScheme}://${i}`;return KG.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function GG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),qG.get())})}}function gp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=di(t,e,r);return i.customData._tokenResponse=n,i}function qA(t){return t!==void 0&&t.enterprise!==void 0}class XG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return GG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YG(t,e){return os(t,"GET","/v2/recaptchaConfig",ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JG(t,e){return os(t,"POST","/v1/accounts:delete",e)}async function Ig(t,e){return os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZG(t,e=!1){const n=kt(t),r=await n.getIdToken(e),i=yb(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Nh(C_(i.auth_time)),issuedAtTime:Nh(C_(i.iat)),expirationTime:Nh(C_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function C_(t){return Number(t)*1e3}function yb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return om("JWT malformed, contained fewer than 3 sections"),null;try{const i=UM(n);return i?JSON.parse(i):(om("Failed to decode base64 JWT payload"),null)}catch(i){return om("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function GA(t){const e=yb(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ts&&eQ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eQ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nh(this.lastLoginAt),this.creationTime=Nh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rg(t){var d;const e=t.auth,n=await t.getIdToken(),r=await xd(t,Ig(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?PV(i.providerUserInfo):[],o=rQ(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new i0(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function nQ(t){const e=kt(t);await Rg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rQ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PV(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iQ(t,e){const n=await xV(t,{},async()=>{const r=qd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await AV(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Hu(t.emulatorConfig.host)&&(l.credentials="include"),CV.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sQ(t,e){return os(t,"POST","/v2/accounts:revokeToken",ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=GA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iQ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new au;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new au,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new tQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new i0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await xd(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZG(this,e)}reload(){return nQ(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Bi(this.auth));const e=await this.getIdToken();return await xd(this,JG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:g,stsTokenManager:E}=n;le(d&&E,e,"internal-error");const b=au.fromJSON(this.name,E);le(typeof d=="string",e,"internal-error"),Ps(r,e.name),Ps(i,e.name),le(typeof f=="boolean",e,"internal-error"),le(typeof p=="boolean",e,"internal-error"),Ps(s,e.name),Ps(o,e.name),Ps(a,e.name),Ps(l,e.name),Ps(u,e.name),Ps(c,e.name);const S=new Dr({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:u,lastLoginAt:c});return g&&Array.isArray(g)&&(S.providerData=g.map(y=>({...y}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new au;i.updateFromServerResponse(n);const s=new Dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?PV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new au;a.updateFromIdToken(r);const l=new Dr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new i0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new Map;function Li(t){Qi(t instanceof Function,"Expected a class definition");let e=QA.get(t);return e?(Qi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kV.type="NONE";const XA=kV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e,n){return`firebase:${t}:${e}:${n}`}class lu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=am(this.userKey,i.apiKey,s),this.fullPersistenceKey=am("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ig(this.auth,{idToken:e}).catch(()=>{});return n?Dr._fromGetAccountInfoResponse(this.auth,n,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lu(Li(XA),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Li(XA);const o=am(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await Ig(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Dr._fromGetAccountInfoResponse(e,f,c)}else d=Dr._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new lu(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new lu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VV(e))return"Blackberry";if(FV(e))return"Webos";if(OV(e))return"Safari";if((e.includes("chrome/")||MV(e))&&!e.includes("edge/"))return"Chrome";if(NV(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DV(t=Pt()){return/firefox\//i.test(t)}function OV(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MV(t=Pt()){return/crios\//i.test(t)}function LV(t=Pt()){return/iemobile/i.test(t)}function NV(t=Pt()){return/android/i.test(t)}function VV(t=Pt()){return/blackberry/i.test(t)}function FV(t=Pt()){return/webos/i.test(t)}function vb(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oQ(t=Pt()){var e;return vb(t)&&!!((e=window.navigator)!=null&&e.standalone)}function aQ(){return L8()&&document.documentMode===10}function BV(t=Pt()){return vb(t)||NV(t)||FV(t)||VV(t)||/windows phone/i.test(t)||LV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t,e=[]){let n;switch(t){case"Browser":n=YA(Pt());break;case"Worker":n=`${YA(Pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ku}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uQ(t,e={}){return os(t,"GET","/v2/passwordPolicy",ss(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=6;class hQ{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cQ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JA(this),this.idTokenSubscription=new JA(this),this.beforeStateQueue=new lQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Li(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await lu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ig(this,{idToken:e}),r=await Dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ir(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Bi(this));const n=e?kt(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uQ(this),n=new hQ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sQ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Li(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await lu.create(this,[Li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$G(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Io(t){return kt(t)}class JA{constructor(e){this.auth=e,this.observer=null,this.addObserver=$8(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fQ(t){Hy=t}function $V(t){return Hy.loadJS(t)}function pQ(){return Hy.recaptchaEnterpriseScript}function mQ(){return Hy.gapiScript}function gQ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yQ{constructor(){this.enterprise=new vQ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vQ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _Q="recaptcha-enterprise",UV="NO_RECAPTCHA";class wQ{constructor(e){this.type=_Q,this.auth=Io(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{YG(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new XG(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;qA(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(UV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yQ().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&qA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=pQ();l.length!==0&&(l+=a),$V(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function ZA(t,e,n,r=!1,i=!1){const s=new wQ(t);let o;if(i)o=UV;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Cg(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ZA(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ZA(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SQ(t,e){const n=fT(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xa(s,e??{}))return i;Vr(i,"already-initialized")}return n.initialize({options:e})}function EQ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TQ(t,e,n){const r=Io(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=zV(e),{host:o,port:a}=bQ(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(xa(u,r.config.emulator)&&xa(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Hu(o)?(KM(`${s}//${o}${l}`),P8("Auth",!0)):IQ()}function zV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bQ(t){const e=zV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:eP(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:eP(o)}}}function eP(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IQ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}async function RQ(t,e){return os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CQ(t,e){return rf(t,"POST","/v1/accounts:signInWithPassword",ss(t,e))}async function xQ(t,e){return os(t,"POST","/v1/accounts:sendOobCode",ss(t,e))}async function AQ(t,e){return xQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PQ(t,e){return rf(t,"POST","/v1/accounts:signInWithEmailLink",ss(t,e))}async function kQ(t,e){return rf(t,"POST","/v1/accounts:signInWithEmailLink",ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends _b{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ad(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ad(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cg(e,n,"signInWithPassword",CQ);case"emailLink":return PQ(e,{email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cg(e,r,"signUpPassword",RQ);case"emailLink":return kQ(e,{idToken:n,email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t,e){return rf(t,"POST","/v1/accounts:signInWithIdp",ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DQ="http://localhost";class Fa extends _b{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Fa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uu(e,n)}buildRequest(){const e={requestUri:DQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MQ(t){const e=Yc(Jc(t)).link,n=e?Yc(Jc(e)).deep_link_id:null,r=Yc(Jc(t)).deep_link_id;return(r?Yc(Jc(r)).link:null)||r||n||e||t}class wb{constructor(e){const n=Yc(Jc(e)),r=n.apiKey??null,i=n.oobCode??null,s=OQ(n.mode??null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=MQ(e);try{return new wb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.providerId=ec.PROVIDER_ID}static credential(e,n){return Ad._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wb.parseLink(n);return le(r,"argument-error"),Ad._fromEmailAndCode(e,r.code,r.tenantId)}}ec.PROVIDER_ID="password";ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends WV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends sf{constructor(){super("facebook.com")}static credential(e){return Fa._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends sf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fa._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Us.credential(n,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends sf{constructor(){super("github.com")}static credential(e){return Fa._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends sf{constructor(){super("twitter.com")}static credential(e,n){return Fa._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ws.credential(n,r)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LQ(t,e){return rf(t,"POST","/v1/accounts:signUp",ss(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Dr._fromIdTokenResponse(e,r,i),o=tP(r);return new Ba({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=tP(r);return new Ba({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function tP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends ts{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,xg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new xg(e,n,r,i)}}function HV(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xg._fromErrorAndOperation(t,s,e,r):s})}async function NQ(t,e,n=!1){const r=await xd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ba._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VQ(t,e,n=!1){const{auth:r}=t;if(ir(r.app))return Promise.reject(Bi(r));const i="reauthenticate";try{const s=await xd(t,HV(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=yb(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Ba._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(t,e,n=!1){if(ir(t.app))return Promise.reject(Bi(t));const r="signIn",i=await HV(t,r,e),s=await Ba._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function FQ(t,e){return KV(Io(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(t){const e=Io(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BQ(t,e,n){const r=Io(t);await Cg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AQ)}async function jQ(t,e,n){if(ir(t.app))return Promise.reject(Bi(t));const r=Io(t),o=await Cg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LQ).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qV(t),l}),a=await Ba._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function $Q(t,e,n){return ir(t.app)?Promise.reject(Bi(t)):FQ(kt(t),ec.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qV(t),r})}function UQ(t,e,n,r){return kt(t).onIdTokenChanged(e,n,r)}function zQ(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function WQ(t,e,n,r){return kt(t).onAuthStateChanged(e,n,r)}function HQ(t){return kt(t).signOut()}const Ag="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ag,"1"),this.storage.removeItem(Ag),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KQ=1e3,qQ=10;class QV extends GV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);aQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qQ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QV.type="LOCAL";const GQ=QV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV extends GV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XV.type="SESSION";const YV=XV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QQ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ky(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await QQ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ky.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Sb("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function YQ(t){fi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function JQ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZQ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eX(){return JV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV="firebaseLocalStorageDb",tX=1,Pg="firebaseLocalStorage",e2="fbase_key";class of{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qy(t,e){return t.transaction([Pg],e?"readwrite":"readonly").objectStore(Pg)}function nX(){const t=indexedDB.deleteDatabase(ZV);return new of(t).toPromise()}function s0(){const t=indexedDB.open(ZV,tX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Pg,{keyPath:e2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Pg)?e(r):(r.close(),await nX(),e(await s0()))})})}async function nP(t,e,n){const r=qy(t,!0).put({[e2]:e,value:n});return new of(r).toPromise()}async function rX(t,e){const n=qy(t,!1).get(e),r=await new of(n).toPromise();return r===void 0?null:r.value}function rP(t,e){const n=qy(t,!0).delete(e);return new of(n).toPromise()}const iX=800,sX=3;class t2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ky._getInstance(eX()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await JQ(),!this.activeServiceWorker)return;this.sender=new XQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s0();return await nP(e,Ag,"1"),await rP(e,Ag),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=qy(i,!1).getAll();return new of(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t2.type="LOCAL";const oX=t2;new nf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aX(t,e){return e?Li(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends _b{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lX(t){return KV(t.auth,new Eb(t),t.bypassAuthState)}function uX(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),VQ(n,new Eb(t),t.bypassAuthState)}async function cX(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),NQ(n,new Eb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lX;case"linkViaPopup":case"linkViaRedirect":return cX;case"reauthViaPopup":case"reauthViaRedirect":return uX;default:Vr(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hX=new nf(2e3,1e4);class Ul extends n2{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ul.currentPopupAction&&Ul.currentPopupAction.cancel(),Ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Qi(this.filter.length===1,"Popup operations only handle one event");const e=Sb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hX.get())};e()}}Ul.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX="pendingRedirect",lm=new Map;class fX extends n2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lm.get(this.auth._key());if(!e){try{const r=await pX(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lm.set(this.auth._key(),e)}return this.bypassAuthState||lm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pX(t,e){const n=yX(e),r=gX(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mX(t,e){lm.set(t._key(),e)}function gX(t){return Li(t._redirectPersistence)}function yX(t){return am(dX,t.config.apiKey,t.name)}async function vX(t,e,n=!1){if(ir(t.app))return Promise.reject(Bi(t));const r=Io(t),i=aX(r,e),o=await new fX(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _X=10*60*1e3;class wX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SX(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!r2(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(di(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_X&&this.cachedEventUids.clear(),this.cachedEventUids.has(iP(e))}saveEventToCache(e){this.cachedEventUids.add(iP(e)),this.lastProcessedEventTime=Date.now()}}function iP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function r2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SX(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EX(t,e={}){return os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bX=/^https?/;async function IX(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EX(t);for(const n of e)try{if(RX(n))return}catch{}Vr(t,"unauthorized-domain")}function RX(t){const e=r0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bX.test(n))return!1;if(TX.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CX=new nf(3e4,6e4);function sP(){const t=fi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xX(t){return new Promise((e,n)=>{var i,s,o;function r(){sP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sP(),n(di(t,"network-request-failed"))},timeout:CX.get()})}if((s=(i=fi().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=fi().gapi)!=null&&o.load)r();else{const a=gQ("iframefcb");return fi()[a]=()=>{gapi.load?r():n(di(t,"network-request-failed"))},$V(`${mQ()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw um=null,e})}let um=null;function AX(t){return um=um||xX(t),um}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PX=new nf(5e3,15e3),kX="__/auth/iframe",DX="emulator/auth/iframe",OX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LX(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gb(e,DX):`https://${t.config.authDomain}/${kX}`,r={apiKey:e.apiKey,appName:t.name,v:Ku},i=MX.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${qd(r).slice(1)}`}async function NX(t){const e=await AX(t),n=fi().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:LX(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OX,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=di(t,"network-request-failed"),a=fi().setTimeout(()=>{s(o)},PX.get());function l(){fi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FX=500,BX=600,jX="_blank",$X="http://localhost";class oP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UX(t,e,n,r=FX,i=BX){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...VX,width:r.toString(),height:i.toString(),top:s,left:o},u=Pt().toLowerCase();n&&(a=MV(u)?jX:n),DV(u)&&(e=e||$X,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(oQ(u)&&a!=="_self")return zX(e||"",a),new oP(null);const d=window.open(e||"",a,c);le(d,t,"popup-blocked");try{d.focus()}catch{}return new oP(d)}function zX(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WX="__/auth/handler",HX="emulator/auth/handler",KX=encodeURIComponent("fac");async function aP(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ku,eventId:i};if(e instanceof WV){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",j8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof sf){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${KX}=${encodeURIComponent(l)}`:"";return`${qX(t)}?${qd(a).slice(1)}${u}`}function qX({config:t}){return t.emulator?gb(t,HX):`https://${t.authDomain}/${WX}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="webStorageSupport";class GX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YV,this._completeRedirectFn=vX,this._overrideRedirectResult=mX}async _openPopup(e,n,r,i){var o;Qi((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await aP(e,n,r,r0(),i);return UX(e,s,Sb())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await aP(e,n,r,r0(),i);return YQ(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NX(e),r=new wX(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(x_,{type:x_},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[x_];s!==void 0&&n(!!s),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IX(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BV()||OV()||vb()}}const QX=GX;var lP="@firebase/auth",uP="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YX(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JX(t){_u(new Aa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jV(t)},u=new dQ(r,i,s,l);return EQ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_u(new Aa("auth-internal",e=>{const n=Io(e.getProvider("auth").getImmediate());return(r=>new XX(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),io(lP,uP,YX(t)),io(lP,uP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX=5*60,eY=HM("authIdTokenMaxAge")||ZX;let cP=null;const tY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eY)return;const i=n==null?void 0:n.token;cP!==i&&(cP=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function nY(t=UH()){const e=fT(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SQ(t,{popupRedirectResolver:QX,persistence:[oX,GQ,YV]}),r=HM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=tY(s.toString());zQ(n,o,()=>o(n.currentUser)),UQ(n,a=>o(a))}}const i=R8("auth");return i&&TQ(n,`http://${i}`),n}function rY(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}fQ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=di("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JX("Browser");const iY={apiKey:"AIzaSyBbUnVpOyU1eSSFrQi79ztijFjT0bvMosc",authDomain:"pocket-stylist-3c0fe.firebaseapp.com",projectId:"pocket-stylist-3c0fe",storageBucket:"pocket-stylist-3c0fe.firebasestorage.app",messagingSenderId:"274246899324",appId:"1:274246899324:web:845c91cdaab06299df1bf9"},i2=ZM(iY),tc=nY(i2),Ro=pG(i2,{localCache:LG({tabManager:BG()})}),sY=(t,e)=>$Q(tc,t,e),oY=(t,e)=>jQ(tc,t,e),aY=()=>HQ(tc),lY=t=>BQ(tc,t),s2=I.createContext();function o2(){return I.useContext(s2)}function uY({children:t}){const[e,n]=I.useState(null),[r,i]=I.useState(!0);I.useEffect(()=>WQ(tc,a=>{n(a),i(!1)}),[]);const s={currentUser:e,loading:r};return M.jsx(s2.Provider,{value:s,children:!r&&t})}const cY="Left",hY="Right",dY="Up",fY="Down",zl={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},o0={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},hP="mousemove",dP="mouseup",pY="touchend",mY="touchmove",gY="touchstart";function yY(t,e,n,r){return t>e?n>0?hY:cY:r>0?fY:dY}function fP(t,e){if(e===0)return t;const n=Math.PI/180*e,r=t[0]*Math.cos(n)+t[1]*Math.sin(n),i=t[1]*Math.cos(n)-t[0]*Math.sin(n);return[r,i]}function vY(t,e){const n=c=>{const d="touches"in c;d&&c.touches.length>1||t((f,p)=>{p.trackMouse&&!d&&(document.addEventListener(hP,r),document.addEventListener(dP,o));const{clientX:g,clientY:E}=d?c.touches[0]:c,b=fP([g,E],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},f),o0),{initial:b.slice(),xy:b,start:c.timeStamp||0})})},r=c=>{t((d,f)=>{const p="touches"in c;if(p&&c.touches.length>1)return d;if(c.timeStamp-d.start>f.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:g,clientY:E}=p?c.touches[0]:c,[b,S]=fP([g,E],f.rotationAngle),y=b-d.xy[0],w=S-d.xy[1],x=Math.abs(y),O=Math.abs(w),k=(c.timeStamp||0)-d.start,T=Math.sqrt(x*x+O*O)/(k||1),v=[y/(k||1),w/(k||1)],R=yY(x,O,y,w),C=typeof f.delta=="number"?f.delta:f.delta[R.toLowerCase()]||zl.delta;if(x<C&&O<C&&!d.swiping)return d;const A={absX:x,absY:O,deltaX:y,deltaY:w,dir:R,event:c,first:d.first,initial:d.initial,velocity:T,vxvy:v};A.first&&f.onSwipeStart&&f.onSwipeStart(A),f.onSwiping&&f.onSwiping(A);let L=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${R}`])&&(L=!0),L&&f.preventScrollOnSwipe&&f.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:A,swiping:!0})})},i=c=>{t((d,f)=>{let p;if(d.swiping&&d.eventData){if(c.timeStamp-d.start<f.swipeDuration){p=Object.assign(Object.assign({},d.eventData),{event:c}),f.onSwiped&&f.onSwiped(p);const g=f[`onSwiped${p.dir}`];g&&g(p)}}else f.onTap&&f.onTap({event:c});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},d),o0),{eventData:p})})},s=()=>{document.removeEventListener(hP,r),document.removeEventListener(dP,o)},o=c=>{s(),i(c)},a=(c,d)=>{let f=()=>{};if(c&&c.addEventListener){const p=Object.assign(Object.assign({},zl.touchEventOptions),d.touchEventOptions),g=[[gY,n,p],[mY,r,Object.assign(Object.assign({},p),d.preventScrollOnSwipe?{passive:!1}:{})],[pY,i,p]];g.forEach(([E,b,S])=>c.addEventListener(E,b,S)),f=()=>g.forEach(([E,b])=>c.removeEventListener(E,b))}return f},u={ref:c=>{c!==null&&t((d,f)=>{if(d.el===c)return d;const p={};return d.el&&d.el!==c&&d.cleanUpTouch&&(d.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&c&&(p.cleanUpTouch=a(c,f)),Object.assign(Object.assign(Object.assign({},d),{el:c}),p)})}};return e.trackMouse&&(u.onMouseDown=n),[u,a]}function _Y(t,e,n,r){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==n.preventScrollOnSwipe||e.touchEventOptions.passive!==n.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})}function wY(t){const{trackMouse:e}=t,n=I.useRef(Object.assign({},o0)),r=I.useRef(Object.assign({},zl)),i=I.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},zl),t);let s;for(s in zl)r.current[s]===void 0&&(r.current[s]=zl[s]);const[o,a]=I.useMemo(()=>vY(l=>n.current=l(n.current,r.current),{trackMouse:e}),[e]);return n.current=_Y(n.current,r.current,i.current,a),o}var a2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pP=ft.createContext&&ft.createContext(a2),SY=["attr","size","title"];function EY(t,e){if(t==null)return{};var n=TY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kg(){return kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kg.apply(this,arguments)}function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){bY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bY(t,e,n){return e=IY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IY(t){var e=RY(t,"string");return typeof e=="symbol"?e:e+""}function RY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l2(t){return t&&t.map((e,n)=>ft.createElement(e.tag,Dg({key:n},e.attr),l2(e.child)))}function CY(t){return e=>ft.createElement(xY,kg({attr:Dg({},t.attr)},e),l2(t.child))}function xY(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=EY(t,SY),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ft.createElement("svg",kg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Dg(Dg({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ft.createElement("title",null,s),t.children)};return pP!==void 0?ft.createElement(pP.Consumer,null,n=>e(n)):e(a2)}function AY(t){return CY({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}const Tb=I.createContext({});function bb(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ib=typeof window<"u",u2=Ib?I.useLayoutEffect:I.useEffect,Gy=I.createContext(null);function Rb(t,e){t.indexOf(e)===-1&&t.push(e)}function Cb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Xi=(t,e,n)=>n>e?e:n<t?t:n;let xb=()=>{};const Yi={},c2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function h2(t){return typeof t=="object"&&t!==null}const d2=t=>/^0[^.\s]+$/u.test(t);function Ab(t){let e;return()=>(e===void 0&&(e=t()),e)}const hr=t=>t,PY=(t,e)=>n=>e(t(n)),af=(...t)=>t.reduce(PY),Pd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Pb{constructor(){this.subscriptions=[]}add(e){return Rb(this.subscriptions,e),()=>Cb(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pi=t=>t*1e3,ar=t=>t/1e3;function f2(t,e){return e?t*(1e3/e):0}const p2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kY=1e-7,DY=12;function OY(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=p2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>kY&&++a<DY);return o}function lf(t,e,n,r){if(t===e&&n===r)return hr;const i=s=>OY(s,0,1,t,n);return s=>s===0||s===1?s:p2(i(s),e,r)}const m2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,g2=t=>e=>1-t(1-e),y2=lf(.33,1.53,.69,.99),kb=g2(y2),v2=m2(kb),_2=t=>(t*=2)<1?.5*kb(t):.5*(2-Math.pow(2,-10*(t-1))),Db=t=>1-Math.sin(Math.acos(t)),w2=g2(Db),S2=m2(Db),MY=lf(.42,0,1,1),LY=lf(0,0,.58,1),E2=lf(.42,0,.58,1),NY=t=>Array.isArray(t)&&typeof t[0]!="number",T2=t=>Array.isArray(t)&&typeof t[0]=="number",VY={linear:hr,easeIn:MY,easeInOut:E2,easeOut:LY,circIn:Db,circInOut:S2,circOut:w2,backIn:kb,backInOut:v2,backOut:y2,anticipate:_2},FY=t=>typeof t=="string",gP=t=>{if(T2(t)){xb(t.length===4);const[e,n,r,i]=t;return lf(e,n,r,i)}else if(FY(t))return VY[t];return t},yp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function BY(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),t()),c(a)}const u={schedule:(c,d=!1,f=!1)=>{const g=f&&i?n:r;return d&&o.add(c),g.has(c)||g.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const jY=40;function b2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=yp.reduce((w,x)=>(w[x]=BY(s),w),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:f,render:p,postRender:g}=o,E=()=>{const w=Yi.useManualTiming?i.timestamp:performance.now();n=!1,Yi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,jY),1)),i.timestamp=w,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},b=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:yp.reduce((w,x)=>{const O=o[x];return w[x]=(k,T=!1,v=!1)=>(n||b(),O.schedule(k,T,v)),w},{}),cancel:w=>{for(let x=0;x<yp.length;x++)o[yp[x]].cancel(w)},state:i,steps:o}}const{schedule:Ze,cancel:go,state:zt,steps:A_}=b2(typeof requestAnimationFrame<"u"?requestAnimationFrame:hr,!0);let cm;function $Y(){cm=void 0}const Rn={now:()=>(cm===void 0&&Rn.set(zt.isProcessing||Yi.useManualTiming?zt.timestamp:performance.now()),cm),set:t=>{cm=t,queueMicrotask($Y)}},I2=t=>e=>typeof e=="string"&&e.startsWith(t),R2=I2("--"),UY=I2("var(--"),Ob=t=>UY(t)?zY.test(t.split("/*")[0].trim()):!1,zY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},kd={...nc,transform:t=>Xi(0,1,t)},vp={...nc,default:1},Vh=t=>Math.round(t*1e5)/1e5,Mb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WY(t){return t==null}const HY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lb=(t,e)=>n=>!!(typeof n=="string"&&HY.test(n)&&n.startsWith(t)||e&&!WY(n)&&Object.prototype.hasOwnProperty.call(n,e)),C2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Mb);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},KY=t=>Xi(0,255,t),P_={...nc,transform:t=>Math.round(KY(t))},ha={test:Lb("rgb","red"),parse:C2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+P_.transform(t)+", "+P_.transform(e)+", "+P_.transform(n)+", "+Vh(kd.transform(r))+")"};function qY(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const a0={test:Lb("#"),parse:qY,transform:ha.transform},uf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ms=uf("deg"),mi=uf("%"),ue=uf("px"),GY=uf("vh"),QY=uf("vw"),yP={...mi,parse:t=>mi.parse(t)/100,transform:t=>mi.transform(t*100)},Wl={test:Lb("hsl","hue"),parse:C2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+mi.transform(Vh(e))+", "+mi.transform(Vh(n))+", "+Vh(kd.transform(r))+")"},_t={test:t=>ha.test(t)||a0.test(t)||Wl.test(t),parse:t=>ha.test(t)?ha.parse(t):Wl.test(t)?Wl.parse(t):a0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ha.transform(t):Wl.transform(t),getAnimatableNone:t=>{const e=_t.parse(t);return e.alpha=0,_t.transform(e)}},XY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YY(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Mb))==null?void 0:e.length)||0)+(((n=t.match(XY))==null?void 0:n.length)||0)>0}const x2="number",A2="color",JY="var",ZY="var(",vP="${}",eJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(eJ,l=>(_t.test(l)?(r.color.push(s),i.push(A2),n.push(_t.parse(l))):l.startsWith(ZY)?(r.var.push(s),i.push(JY),n.push(l)):(r.number.push(s),i.push(x2),n.push(parseFloat(l))),++s,vP)).split(vP);return{values:n,split:a,indexes:r,types:i}}function P2(t){return Dd(t).values}function k2(t){const{split:e,types:n}=Dd(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===x2?s+=Vh(i[o]):a===A2?s+=_t.transform(i[o]):s+=i[o]}return s}}const tJ=t=>typeof t=="number"?0:_t.test(t)?_t.getAnimatableNone(t):t;function nJ(t){const e=P2(t);return k2(t)(e.map(tJ))}const yo={test:YY,parse:P2,createTransformer:k2,getAnimatableNone:nJ};function k_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function rJ({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=k_(l,a,t+1/3),s=k_(l,a,t),o=k_(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Og(t,e){return n=>n>0?e:t}const rt=(t,e,n)=>t+(e-t)*n,D_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},iJ=[a0,ha,Wl],sJ=t=>iJ.find(e=>e.test(t));function _P(t){const e=sJ(t);if(!e)return!1;let n=e.parse(t);return e===Wl&&(n=rJ(n)),n}const wP=(t,e)=>{const n=_P(t),r=_P(e);if(!n||!r)return Og(t,e);const i={...n};return s=>(i.red=D_(n.red,r.red,s),i.green=D_(n.green,r.green,s),i.blue=D_(n.blue,r.blue,s),i.alpha=rt(n.alpha,r.alpha,s),ha.transform(i))},l0=new Set(["none","hidden"]);function oJ(t,e){return l0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function aJ(t,e){return n=>rt(t,e,n)}function Nb(t){return typeof t=="number"?aJ:typeof t=="string"?Ob(t)?Og:_t.test(t)?wP:cJ:Array.isArray(t)?D2:typeof t=="object"?_t.test(t)?wP:lJ:Og}function D2(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Nb(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function lJ(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Nb(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function uJ(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const cJ=(t,e)=>{const n=yo.createTransformer(e),r=Dd(t),i=Dd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?l0.has(t)&&!i.values.length||l0.has(e)&&!r.values.length?oJ(t,e):af(D2(uJ(r,i),i.values),n):Og(t,e)};function O2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rt(t,e,n):Nb(t)(t,e)}const hJ=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ze.update(e,n),stop:()=>go(e),now:()=>zt.isProcessing?zt.timestamp:Rn.now()}},M2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Mg=2e4;function Vb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Mg;)e+=n,r=t.next(e);return e>=Mg?1/0:e}function dJ(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Vb(r),Mg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:ar(i)}}const fJ=5;function L2(t,e,n){const r=Math.max(e-fJ,0);return f2(n-t(r),e-r)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},O_=.001;function pJ({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:r=ut.mass}){let i,s,o=1-e;o=Xi(ut.minDamping,ut.maxDamping,o),t=Xi(ut.minDuration,ut.maxDuration,ar(t)),o<1?(i=u=>{const c=u*o,d=c*t,f=c-n,p=u0(u,o),g=Math.exp(-d);return O_-f/p*g},s=u=>{const d=u*o*t,f=d*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-d),E=u0(Math.pow(u,2),o);return(-i(u)+O_>0?-1:1)*((f-p)*g)/E}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-O_+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=gJ(i,s,a);if(t=pi(t),isNaN(l))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const mJ=12;function gJ(t,e,n){let r=n;for(let i=1;i<mJ;i++)r=r-t(r)/e(r);return r}function u0(t,e){return t*Math.sqrt(1-e*e)}const yJ=["duration","bounce"],vJ=["stiffness","damping","mass"];function SP(t,e){return e.some(n=>t[n]!==void 0)}function _J(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!SP(t,vJ)&&SP(t,yJ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Xi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ut.mass,stiffness:i,damping:s}}else{const n=pJ(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function Lg(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=_J({...n,velocity:-ar(n.velocity||0)}),g=f||0,E=u/(2*Math.sqrt(l*c)),b=o-s,S=ar(Math.sqrt(l/c)),y=Math.abs(b)<5;r||(r=y?ut.restSpeed.granular:ut.restSpeed.default),i||(i=y?ut.restDelta.granular:ut.restDelta.default);let w;if(E<1){const O=u0(S,E);w=k=>{const T=Math.exp(-E*S*k);return o-T*((g+E*S*b)/O*Math.sin(O*k)+b*Math.cos(O*k))}}else if(E===1)w=O=>o-Math.exp(-S*O)*(b+(g+S*b)*O);else{const O=S*Math.sqrt(E*E-1);w=k=>{const T=Math.exp(-E*S*k),v=Math.min(O*k,300);return o-T*((g+E*S*b)*Math.sinh(v)+O*b*Math.cosh(v))/O}}const x={calculatedDuration:p&&d||null,next:O=>{const k=w(O);if(p)a.done=O>=d;else{let T=O===0?g:0;E<1&&(T=O===0?pi(g):L2(w,O,k));const v=Math.abs(T)<=r,R=Math.abs(o-k)<=i;a.done=v&&R}return a.value=a.done?o:k,a},toString:()=>{const O=Math.min(Vb(x),Mg),k=M2(T=>x.next(O*T).value,O,30);return O+"ms "+k},toTransition:()=>{}};return x}Lg.applyToOptions=t=>{const e=dJ(t,100,Lg);return t.ease=e.ease,t.duration=pi(e.duration),t.type="keyframes",t};function c0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},p=v=>a!==void 0&&v<a||l!==void 0&&v>l,g=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let E=n*e;const b=d+E,S=o===void 0?b:o(b);S!==b&&(E=S-d);const y=v=>-E*Math.exp(-v/r),w=v=>S+y(v),x=v=>{const R=y(v),C=w(v);f.done=Math.abs(R)<=u,f.value=f.done?S:C};let O,k;const T=v=>{p(f.value)&&(O=v,k=Lg({keyframes:[f.value,g(f.value)],velocity:L2(w,v,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:v=>{let R=!1;return!k&&O===void 0&&(R=!0,x(v),T(v)),O!==void 0&&v>=O?k.next(v-O):(!R&&x(v),f)}}}function wJ(t,e,n){const r=[],i=n||Yi.mix||O2,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||hr:e;a=af(l,a)}r.push(a)}return r}function SJ(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(xb(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=wJ(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const f=Pd(t[d],t[d+1],c);return a[d](f)};return n?c=>u(Xi(t[0],t[s-1],c)):u}function EJ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Pd(0,e,r);t.push(rt(n,1,i))}}function TJ(t){const e=[0];return EJ(e,t.length-1),e}function bJ(t,e){return t.map(n=>n*e)}function IJ(t,e){return t.map(()=>e||E2).splice(0,t.length-1)}function Fh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=NY(r)?r.map(gP):gP(r),s={done:!1,value:e[0]},o=bJ(n&&n.length===e.length?n:TJ(e),t),a=SJ(o,e,{ease:Array.isArray(i)?i:IJ(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const RJ=t=>t!==null;function Fb(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(RJ),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const CJ={decay:c0,inertia:c0,tween:Fh,keyframes:Fh,spring:Lg};function N2(t){typeof t.type=="string"&&(t.type=CJ[t.type])}class Bb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xJ=t=>t/100;class jb extends Bb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Rn.now()&&this.tick(Rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;N2(e);const{type:n=Fh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Fh;l!==Fh&&typeof a[0]!="number"&&(this.mixKeyframes=af(xJ,O2(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Vb(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:f,repeatDelay:p,type:g,onUpdate:E,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,x=r;if(d){const v=Math.min(this.currentTime,i)/a;let R=Math.floor(v),C=v%1;!C&&v>=1&&(C=1),C===1&&R--,R=Math.min(R,d+1),!!(R%2)&&(f==="reverse"?(C=1-C,p&&(C-=p/a)):f==="mirror"&&(x=o)),w=Xi(0,1,C)*a}const O=y?{done:!1,value:c[0]}:x.next(w);s&&(O.value=s(O.value));let{done:k}=O;!y&&l!==null&&(k=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return T&&g!==c0&&(O.value=Fb(c,this.options,b,this.speed)),E&&E(O.value),T&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return ar(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(this.currentTime)}set time(e){var n;e=pi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Rn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ar(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=hJ,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function AJ(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const da=t=>t*180/Math.PI,h0=t=>{const e=da(Math.atan2(t[1],t[0]));return d0(e)},PJ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:h0,rotateZ:h0,skewX:t=>da(Math.atan(t[1])),skewY:t=>da(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},d0=t=>(t=t%360,t<0&&(t+=360),t),EP=h0,TP=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),bP=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kJ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TP,scaleY:bP,scale:t=>(TP(t)+bP(t))/2,rotateX:t=>d0(da(Math.atan2(t[6],t[5]))),rotateY:t=>d0(da(Math.atan2(-t[2],t[0]))),rotateZ:EP,rotate:EP,skewX:t=>da(Math.atan(t[4])),skewY:t=>da(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function f0(t){return t.includes("scale")?1:0}function p0(t,e){if(!t||t==="none")return f0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=kJ,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=PJ,i=a}if(!i)return f0(e);const s=r[e],o=i[1].split(",").map(OJ);return typeof s=="function"?s(o):o[s]}const DJ=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return p0(n,e)};function OJ(t){return parseFloat(t.trim())}const rc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ic=new Set(rc),IP=t=>t===nc||t===ue,MJ=new Set(["x","y","z"]),LJ=rc.filter(t=>!MJ.has(t));function NJ(t){const e=[];return LJ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Sa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>p0(e,"x"),y:(t,{transform:e})=>p0(e,"y")};Sa.translateX=Sa.x;Sa.translateY=Sa.y;const Ea=new Set;let m0=!1,g0=!1,y0=!1;function V2(){if(g0){const t=Array.from(Ea).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=NJ(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}g0=!1,m0=!1,Ea.forEach(t=>t.complete(y0)),Ea.clear()}function F2(){Ea.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(g0=!0)})}function VJ(){y0=!0,F2(),V2(),y0=!1}class $b{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ea.add(this),m0||(m0=!0,Ze.read(F2),Ze.resolveKeyframes(V2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}AJ(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ea.delete(this)}cancel(){this.state==="scheduled"&&(Ea.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const FJ=t=>t.startsWith("--");function BJ(t,e,n){FJ(e)?t.style.setProperty(e,n):t.style[e]=n}const jJ=Ab(()=>window.ScrollTimeline!==void 0),$J={};function UJ(t,e){const n=Ab(t);return()=>$J[e]??n()}const B2=UJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ih=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,RP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ih([0,.65,.55,1]),circOut:ih([.55,0,1,.45]),backIn:ih([.31,.01,.66,-.59]),backOut:ih([.33,1.53,.69,.99])};function j2(t,e){if(t)return typeof t=="function"?B2()?M2(t,e):"ease-out":T2(t)?ih(t):Array.isArray(t)?t.map(n=>j2(n,e)||RP.easeOut):RP[t]}function zJ(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:n};l&&(c.offset=l);const d=j2(a,i);Array.isArray(d)&&(c.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(c,f)}function $2(t){return typeof t=="function"&&"applyToOptions"in t}function WJ({type:t,...e}){return $2(t)&&B2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class HJ extends Bb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,xb(typeof e.type!="string");const u=WJ(e);this.animation=zJ(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=Fb(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):BJ(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ar(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&jJ()?(this.animation.timeline=e,hr):n(this)}}const U2={anticipate:_2,backInOut:v2,circInOut:S2};function KJ(t){return t in U2}function qJ(t){typeof t.ease=="string"&&KJ(t.ease)&&(t.ease=U2[t.ease])}const CP=10;class GJ extends HJ{constructor(e){qJ(e),N2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new jb({...o,autoplay:!1}),l=pi(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-CP).value,a.sample(l).value,CP),a.stop()}}const xP=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yo.test(t)||t==="0")&&!t.startsWith("url("));function QJ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function XJ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=xP(i,e),a=xP(s,e);return!o||!a?!1:QJ(t)||(n==="spring"||$2(n))&&r}function v0(t){t.duration=0,t.type="keyframes"}const YJ=new Set(["opacity","clipPath","filter","transform"]),JJ=Ab(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ZJ(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return JJ()&&n&&YJ.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const eZ=40;class tZ extends Bb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var g;super(),this.stop=()=>{var E,b;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Rn.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},p=(c==null?void 0:c.KeyframeResolver)||$b;this.keyframeResolver=new p(a,(E,b,S)=>this.onKeyframesResolved(E,b,f,!S),l,u,c),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=Rn.now(),XJ(e,s,o,a)||((Yi.instantAnimations||!l)&&(c==null||c(Fb(e,r,n))),e[0]=e[e.length-1],v0(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>eZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&ZJ(f)?new GJ({...f,element:f.motionValue.owner.current}):new jb(f);p.finished.then(()=>this.notifyFinished()).catch(hr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),VJ()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const nZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rZ(t){const e=nZ.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function z2(t,e,n=1){const[r,i]=rZ(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return c2(o)?parseFloat(o):o}return Ob(i)?z2(i,e,n+1):i}function Ub(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const W2=new Set(["width","height","top","left","right","bottom",...rc]),iZ={test:t=>t==="auto",parse:t=>t},H2=t=>e=>e.test(t),K2=[nc,ue,mi,Ms,QY,GY,iZ],AP=t=>K2.find(H2(t));function sZ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||d2(t):!0}const oZ=new Set(["brightness","contrast","saturate","opacity"]);function aZ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Mb)||[];if(!r)return t;const i=n.replace(r,"");let s=oZ.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const lZ=/\b([a-z-]*)\(.*?\)/gu,_0={...yo,getAnimatableNone:t=>{const e=t.match(lZ);return e?e.map(aZ).join(" "):t}},PP={...nc,transform:Math.round},uZ={rotate:Ms,rotateX:Ms,rotateY:Ms,rotateZ:Ms,scale:vp,scaleX:vp,scaleY:vp,scaleZ:vp,skew:Ms,skewX:Ms,skewY:Ms,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:kd,originX:yP,originY:yP,originZ:ue},zb={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue,...uZ,zIndex:PP,fillOpacity:kd,strokeOpacity:kd,numOctaves:PP},cZ={...zb,color:_t,backgroundColor:_t,outlineColor:_t,fill:_t,stroke:_t,borderColor:_t,borderTopColor:_t,borderRightColor:_t,borderBottomColor:_t,borderLeftColor:_t,filter:_0,WebkitFilter:_0},q2=t=>cZ[t];function G2(t,e){let n=q2(t);return n!==_0&&(n=yo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hZ=new Set(["auto","none","0"]);function dZ(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!hZ.has(s)&&Dd(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=G2(n,i)}class fZ extends $b{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Ob(u))){const c=z2(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!W2.has(r)||e.length!==2)return;const[i,s]=e,o=AP(i),a=AP(s);if(o!==a)if(IP(o)&&IP(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Sa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||sZ(e[i]))&&r.push(i);r.length&&dZ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Sa[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function pZ(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Q2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function X2(t){return h2(t)&&"offsetHeight"in t}const kP=30,mZ=t=>!isNaN(parseFloat(t));class gZ{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Rn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mZ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Pb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>kP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,kP);return f2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nu(t,e){return new gZ(t,e)}const{schedule:Wb}=b2(queueMicrotask,!1),Ir={x:!1,y:!1};function Y2(){return Ir.x||Ir.y}function yZ(t){return t==="x"||t==="y"?Ir[t]?null:(Ir[t]=!0,()=>{Ir[t]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1})}function J2(t,e){const n=pZ(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function DP(t){return!(t.pointerType==="touch"||Y2())}function vZ(t,e,n={}){const[r,i,s]=J2(t,n),o=a=>{if(!DP(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{DP(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Z2=(t,e)=>e?t===e?!0:Z2(t,e.parentElement):!1,Hb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_Z=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wZ(t){return _Z.has(t.tagName)||t.tabIndex!==-1}const hm=new WeakSet;function OP(t){return e=>{e.key==="Enter"&&t(e)}}function M_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const SZ=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=OP(()=>{if(hm.has(n))return;M_(n,"down");const i=OP(()=>{M_(n,"up")}),s=()=>M_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function MP(t){return Hb(t)&&!Y2()}function EZ(t,e,n={}){const[r,i,s]=J2(t,n),o=a=>{const l=a.currentTarget;if(!MP(a))return;hm.add(l);const u=e(l,a),c=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),hm.has(l)&&hm.delete(l),MP(p)&&typeof u=="function"&&u(p,{success:g})},d=p=>{c(p,l===window||l===document||n.useGlobalTarget||Z2(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),X2(a)&&(a.addEventListener("focus",u=>SZ(u,i)),!wZ(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function eF(t){return h2(t)&&"ownerSVGElement"in t}function TZ(t){return eF(t)&&t.tagName==="svg"}const sn=t=>!!(t&&t.getVelocity),bZ=[...K2,_t,yo],IZ=t=>bZ.find(H2(t)),Kb=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function LP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function RZ(...t){return e=>{let n=!1;const r=t.map(i=>{const s=LP(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():LP(t[i],null)}}}}function CZ(...t){return I.useCallback(RZ(...t),t)}class xZ extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=X2(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function AZ({children:t,isPresent:e,anchorX:n,root:r}){const i=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=I.useContext(Kb),l=CZ(s,t==null?void 0:t.ref);return I.useInsertionEffect(()=>{const{width:u,height:c,top:d,left:f,right:p}=o.current;if(e||!s.current||!u||!c)return;const g=n==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=i;const E=document.createElement("style");a&&(E.nonce=a);const b=r??document.head;return b.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{b.contains(E)&&b.removeChild(E)}},[e]),M.jsx(xZ,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(t,{ref:l})})}const PZ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=bb(kZ),c=I.useId();let d=!0,f=I.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:i,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return s&&d&&(f={...f}),I.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),I.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=M.jsx(AZ,{isPresent:n,anchorX:a,root:l,children:t})),M.jsx(Gy.Provider,{value:f,children:t})};function kZ(){return new Map}function tF(t=!0){const e=I.useContext(Gy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=I.useId();I.useEffect(()=>{if(t)return i(s)},[t]);const o=I.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const _p=t=>t.key||"";function NP(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const DZ=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=tF(o),d=I.useMemo(()=>NP(t),[t]),f=o&&!u?[]:d.map(_p),p=I.useRef(!0),g=I.useRef(d),E=bb(()=>new Map),[b,S]=I.useState(d),[y,w]=I.useState(d);u2(()=>{p.current=!1,g.current=d;for(let k=0;k<y.length;k++){const T=_p(y[k]);f.includes(T)?E.delete(T):E.get(T)!==!0&&E.set(T,!1)}},[y,f.length,f.join("-")]);const x=[];if(d!==b){let k=[...d];for(let T=0;T<y.length;T++){const v=y[T],R=_p(v);f.includes(R)||(k.splice(T,0,v),x.push(v))}return s==="wait"&&x.length&&(k=x),w(NP(k)),S(d),null}const{forceRender:O}=I.useContext(Tb);return M.jsx(M.Fragment,{children:y.map(k=>{const T=_p(k),v=o&&!u?!1:d===y||f.includes(T),R=()=>{if(E.has(T))E.set(T,!0);else return;let C=!0;E.forEach(A=>{A||(C=!1)}),C&&(O==null||O(),w(g.current),o&&(c==null||c()),r&&r())};return M.jsx(PZ,{isPresent:v,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:v?void 0:R,anchorX:a,children:k},T)})})},nF=I.createContext({strict:!1}),VP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vu={};for(const t in VP)Vu[t]={isEnabled:e=>VP[t].some(n=>!!e[n])};function OZ(t){for(const e in t)Vu[e]={...Vu[e],...t[e]}}const MZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ng(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||MZ.has(t)}let rF=t=>!Ng(t);function LZ(t){typeof t=="function"&&(rF=e=>e.startsWith("on")?!Ng(e):t(e))}try{LZ(require("@emotion/is-prop-valid").default)}catch{}function NZ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(rF(i)||n===!0&&Ng(i)||!e&&!Ng(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Qy=I.createContext({});function Xy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Od(t){return typeof t=="string"||Array.isArray(t)}const qb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gb=["initial",...qb];function Yy(t){return Xy(t.animate)||Gb.some(e=>Od(t[e]))}function iF(t){return!!(Yy(t)||t.variants)}function VZ(t,e){if(Yy(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Od(n)?n:void 0,animate:Od(r)?r:void 0}}return t.inherit!==!1?e:{}}function FZ(t){const{initial:e,animate:n}=VZ(t,I.useContext(Qy));return I.useMemo(()=>({initial:e,animate:n}),[FP(e),FP(n)])}function FP(t){return Array.isArray(t)?t.join(" "):t}function BP(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const zc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=BP(t,e.target.x),r=BP(t,e.target.y);return`${n}% ${r}%`}},BZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=yo.parse(t);if(i.length>5)return r;const s=yo.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=rt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},w0={borderRadius:{...zc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zc,borderTopRightRadius:zc,borderBottomLeftRadius:zc,borderBottomRightRadius:zc,boxShadow:BZ};function sF(t,{layout:e,layoutId:n}){return ic.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!w0[t]||t==="opacity")}const jZ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$Z=rc.length;function UZ(t,e,n){let r="",i=!0;for(let s=0;s<$Z;s++){const o=rc[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=Q2(a,zb[o]);if(!l){i=!1;const c=jZ[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Qb(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(ic.has(l)){o=!0;continue}else if(R2(l)){i[l]=u;continue}else{const c=Q2(u,zb[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=UZ(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const Xb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oF(t,e,n){for(const r in e)!sn(e[r])&&!sF(r,n)&&(t[r]=e[r])}function zZ({transformTemplate:t},e){return I.useMemo(()=>{const n=Xb();return Qb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function WZ(t,e){const n=t.style||{},r={};return oF(r,n,t),Object.assign(r,zZ(t,e)),r}function HZ(t,e){const n={},r=WZ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const KZ={offset:"stroke-dashoffset",array:"stroke-dasharray"},qZ={offset:"strokeDashoffset",array:"strokeDasharray"};function GZ(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?KZ:qZ;t[s.offset]=ue.transform(-r);const o=ue.transform(e),a=ue.transform(n);t[s.array]=`${o} ${a}`}function aF(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(Qb(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f}=t;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&GZ(d,i,s,o,!1)}const lF=()=>({...Xb(),attrs:{}}),uF=t=>typeof t=="string"&&t.toLowerCase()==="svg";function QZ(t,e,n,r){const i=I.useMemo(()=>{const s=lF();return aF(s,e,uF(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};oF(s,t.style,t),i.style={...s,...i.style}}return i}const XZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yb(t){return typeof t!="string"||t.includes("-")?!1:!!(XZ.indexOf(t)>-1||/[A-Z]/u.test(t))}function YZ(t,e,n,{latestValues:r},i,s=!1){const a=(Yb(t)?QZ:HZ)(e,r,i,t),l=NZ(e,typeof t=="string",s),u=t!==I.Fragment?{...l,...a,ref:n}:{},{children:c}=e,d=I.useMemo(()=>sn(c)?c.get():c,[c]);return I.createElement(t,{...u,children:d})}function jP(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Jb(t,e,n,r){if(typeof e=="function"){const[i,s]=jP(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=jP(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function dm(t){return sn(t)?t.get():t}function JZ({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:ZZ(n,r,i,t),renderState:e()}}function ZZ(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=dm(s[f]);let{initial:o,animate:a}=t;const l=Yy(t),u=iF(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!Xy(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=Jb(t,f[p]);if(g){const{transitionEnd:E,transition:b,...S}=g;for(const y in S){let w=S[y];if(Array.isArray(w)){const x=c?w.length-1:0;w=w[x]}w!==null&&(i[y]=w)}for(const y in E)i[y]=E[y]}}}return i}const cF=t=>(e,n)=>{const r=I.useContext(Qy),i=I.useContext(Gy),s=()=>JZ(t,e,r,i);return n?s():bb(s)};function Zb(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(sn(r[o])||e.style&&sn(e.style[o])||sF(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const eee=cF({scrapeMotionValuesFromProps:Zb,createRenderState:Xb});function hF(t,e,n){const r=Zb(t,e,n);for(const i in t)if(sn(t[i])||sn(e[i])){const s=rc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const tee=cF({scrapeMotionValuesFromProps:hF,createRenderState:lF}),nee=Symbol.for("motionComponentSymbol");function Hl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ree(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Hl(n)&&(n.current=r))},[e])}const eI=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iee="framerAppearId",dF="data-"+eI(iee),fF=I.createContext({});function see(t,e,n,r,i){var E,b;const{visualElement:s}=I.useContext(Qy),o=I.useContext(nF),a=I.useContext(Gy),l=I.useContext(Kb).reducedMotion,u=I.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=I.useContext(fF);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&oee(u.current,n,i,d);const f=I.useRef(!1);I.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const p=n[dF],g=I.useRef(!!p&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,p))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,p)));return u2(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),g.current&&c.animationState&&c.animationState.animateChanges())}),I.useEffect(()=>{c&&(!g.current&&c.animationState&&c.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,p)}),g.current=!1),c.enteringChildren=void 0)}),c}function oee(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:pF(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Hl(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function pF(t){if(t)return t.options.allowProjection!==!1?t.projection:pF(t.parent)}function L_(t,{forwardMotionProps:e=!1}={},n,r){n&&OZ(n);const i=Yb(t)?tee:eee;function s(a,l){let u;const c={...I.useContext(Kb),...a,layoutId:aee(a)},{isStatic:d}=c,f=FZ(a),p=i(a,d);if(!d&&Ib){lee();const g=uee(c);u=g.MeasureLayout,f.visualElement=see(t,p,c,r,g.ProjectionNode)}return M.jsxs(Qy.Provider,{value:f,children:[u&&f.visualElement?M.jsx(u,{visualElement:f.visualElement,...c}):null,YZ(t,a,ree(p,f.visualElement,l),p,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=I.forwardRef(s);return o[nee]=t,o}function aee({layoutId:t}){const e=I.useContext(Tb).id;return e&&t!==void 0?e+"-"+t:t}function lee(t,e){I.useContext(nF).strict}function uee(t){const{drag:e,layout:n}=Vu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function cee(t,e){if(typeof Proxy>"u")return L_;const n=new Map,r=(s,o)=>L_(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,L_(o,void 0,t,e)),n.get(o))})}function mF({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function hee({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function dee(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function N_(t){return t===void 0||t===1}function S0({scale:t,scaleX:e,scaleY:n}){return!N_(t)||!N_(e)||!N_(n)}function Yo(t){return S0(t)||gF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gF(t){return $P(t.x)||$P(t.y)}function $P(t){return t&&t!=="0%"}function Vg(t,e,n){const r=t-n,i=e*r;return n+i}function UP(t,e,n,r,i){return i!==void 0&&(t=Vg(t,i,r)),Vg(t,n,r)+e}function E0(t,e=0,n=1,r,i){t.min=UP(t.min,e,n,r,i),t.max=UP(t.max,e,n,r,i)}function yF(t,{x:e,y:n}){E0(t.x,e.translate,e.scale,e.originPoint),E0(t.y,n.translate,n.scale,n.originPoint)}const zP=.999999999999,WP=1.0000000000001;function fee(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ql(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,yF(t,o)),r&&Yo(s.latestValues)&&ql(t,s.latestValues))}e.x<WP&&e.x>zP&&(e.x=1),e.y<WP&&e.y>zP&&(e.y=1)}function Kl(t,e){t.min=t.min+e,t.max=t.max+e}function HP(t,e,n,r,i=.5){const s=rt(t.min,t.max,i);E0(t,e,n,s,r)}function ql(t,e){HP(t.x,e.x,e.scaleX,e.scale,e.originX),HP(t.y,e.y,e.scaleY,e.scale,e.originY)}function vF(t,e){return mF(dee(t.getBoundingClientRect(),e))}function pee(t,e,n){const r=vF(t,n),{scroll:i}=e;return i&&(Kl(r.x,i.offset.x),Kl(r.y,i.offset.y)),r}const KP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gl=()=>({x:KP(),y:KP()}),qP=()=>({min:0,max:0}),Rt=()=>({x:qP(),y:qP()}),T0={current:null},_F={current:!1};function mee(){if(_F.current=!0,!!Ib)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>T0.current=t.matches;t.addEventListener("change",e),e()}else T0.current=!1}const gee=new WeakMap;function yee(t,e,n){for(const r in e){const i=e[r],s=n[r];if(sn(i))t.addValue(r,i);else if(sn(s))t.addValue(r,Nu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Nu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const GP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vee{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$b,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Rn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Yy(n),this.isVariantNode=iF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&sn(p)&&p.set(l[f])}}mount(e){var n;this.current=e,gee.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),_F.current||mee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:T0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),go(this.notifyUpdate),go(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ic.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vu){const n=Vu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<GP.length;r++){const i=GP[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=yee(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Nu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(c2(r)||d2(r))?r=parseFloat(r):!IZ(r)&&yo.test(n)&&(r=G2(e,n)),this.setBaseTarget(e,sn(r)?r.get():r)),sn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Jb(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!sn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Pb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Wb.render(this.render)}}class wF extends vee{constructor(){super(...arguments),this.KeyframeResolver=fZ}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function SF(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function _ee(t){return window.getComputedStyle(t)}class wee extends wF{constructor(){super(...arguments),this.type="html",this.renderInstance=SF}readValueFromInstance(e,n){var r;if(ic.has(n))return(r=this.projection)!=null&&r.isProjecting?f0(n):DJ(e,n);{const i=_ee(e),s=(R2(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return vF(e,n)}build(e,n,r){Qb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Zb(e,n,r)}}const EF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function See(t,e,n,r){SF(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(EF.has(i)?i:eI(i),e.attrs[i])}class Eee extends wF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ic.has(n)){const r=q2(n);return r&&r.default||0}return n=EF.has(n)?n:eI(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return hF(e,n,r)}build(e,n,r){aF(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){See(e,n,r,i)}mount(e){this.isSVGTag=uF(e.tagName),super.mount(e)}}const Tee=(t,e)=>Yb(t)?new Eee(e):new wee(e,{allowProjection:t!==I.Fragment});function cu(t,e,n){const r=t.getProps();return Jb(r,e,n!==void 0?n:r.custom,t)}const b0=t=>Array.isArray(t);function bee(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Nu(n))}function Iee(t){return b0(t)?t[t.length-1]||0:t}function Ree(t,e){const n=cu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Iee(s[o]);bee(t,o,a)}}function Cee(t){return!!(sn(t)&&t.add)}function I0(t,e){const n=t.getValue("willChange");if(Cee(n))return n.add(e);if(!n&&Yi.WillChange){const r=new Yi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function TF(t){return t.props[dF]}const xee=t=>t!==null;function Aee(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(xee),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Pee={type:"spring",stiffness:500,damping:25,restSpeed:10},kee=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Dee={type:"keyframes",duration:.8},Oee={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mee=(t,{keyframes:e})=>e.length>2?Dee:ic.has(t)?t.startsWith("scale")?kee(e[1]):Pee:Oee;function Lee({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const tI=(t,e,n,r={},i,s)=>o=>{const a=Ub(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-pi(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Lee(a)||Object.assign(c,Mee(t,c)),c.duration&&(c.duration=pi(c.duration)),c.repeatDelay&&(c.repeatDelay=pi(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(v0(c),c.delay===0&&(d=!0)),(Yi.instantAnimations||Yi.skipAnimations)&&(d=!0,v0(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const f=Aee(c.keyframes,a);if(f!==void 0){Ze.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new jb(c):new tZ(c)};function Nee({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function bF(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const d=t.getValue(c,t.latestValues[c]??null),f=a[c];if(f===void 0||u&&Nee(u,c))continue;const p={delay:n,...Ub(s||{},c)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const S=TF(t);if(S){const y=window.MotionHandoffAnimation(S,c,Ze);y!==null&&(p.startTime=y,E=!0)}}I0(t,c),d.start(tI(c,d,f,t.shouldReduceMotion&&W2.has(c)?{type:!1}:p,t,E));const b=d.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Ze.update(()=>{o&&Ree(t,o)})}),l}function IF(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function R0(t,e,n={}){var l;const r=cu(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(bF(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return Vee(t,e,u,c,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function Vee(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(R0(l,e,{...o,delay:n+(typeof r=="function"?0:r)+IF(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Fee(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>R0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=R0(t,e,n);else{const i=typeof e=="function"?cu(t,e,n.custom):e;r=Promise.all(bF(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function RF(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Bee=Gb.length;function CF(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?CF(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Bee;n++){const r=Gb[n],i=t.props[r];(Od(i)||i===!1)&&(e[r]=i)}return e}const jee=[...qb].reverse(),$ee=qb.length;function Uee(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Fee(t,n,r)))}function zee(t){let e=Uee(t),n=QP(),r=!0;const i=l=>(u,c)=>{var f;const d=cu(t,c,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,...E}=d;u={...u,...E,...g}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=CF(t.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let b=0;b<$ee;b++){const S=jee[b],y=n[S],w=u[S]!==void 0?u[S]:c[S],x=Od(w),O=S===l?y.isActive:null;O===!1&&(g=b);let k=w===c[S]&&w!==u[S]&&x;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),y.protectedKeys={...p},!y.isActive&&O===null||!w&&!y.prevProp||Xy(w)||typeof w=="boolean")continue;const T=Wee(y.prevProp,w);let v=T||S===l&&y.isActive&&!k&&x||b>g&&x,R=!1;const C=Array.isArray(w)?w:[w];let A=C.reduce(i(S),{});O===!1&&(A={});const{prevResolvedValues:L={}}=y,D={...L,...A},de=Re=>{v=!0,f.has(Re)&&(R=!0,f.delete(Re)),y.needsAnimating[Re]=!0;const $=t.getValue(Re);$&&($.liveStyle=!1)};for(const Re in D){const $=A[Re],Y=L[Re];if(p.hasOwnProperty(Re))continue;let ie=!1;b0($)&&b0(Y)?ie=!RF($,Y):ie=$!==Y,ie?$!=null?de(Re):f.add(Re):$!==void 0&&f.has(Re)?de(Re):y.protectedKeys[Re]=!0}y.prevProp=w,y.prevResolvedValues=A,y.isActive&&(p={...p,...A}),r&&t.blockInitialAnimation&&(v=!1);const fe=k&&T;v&&(!fe||R)&&d.push(...C.map(Re=>{const $={type:S};if(typeof Re=="string"&&r&&!fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,ie=cu(Y,Re);if(Y.enteringChildren&&ie){const{delayChildren:we}=ie.transition||{};$.delay=IF(Y.enteringChildren,t,we)}}return{animation:Re,options:$}}))}if(f.size){const b={};if(typeof u.initial!="boolean"){const S=cu(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(b.transition=S.transition)}f.forEach(S=>{const y=t.getBaseTarget(S),w=t.getValue(S);w&&(w.liveStyle=!0),b[S]=y??null}),d.push({animation:b})}let E=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=QP()}}}function Wee(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!RF(e,t):!1}function Ho(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function QP(){return{animate:Ho(!0),whileInView:Ho(),whileHover:Ho(),whileTap:Ho(),whileDrag:Ho(),whileFocus:Ho(),exit:Ho()}}class Co{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Hee extends Co{constructor(e){super(e),e.animationState||(e.animationState=zee(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Kee=0;class qee extends Co{constructor(){super(...arguments),this.id=Kee++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Gee={animation:{Feature:Hee},exit:{Feature:qee}};function Md(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function cf(t){return{point:{x:t.pageX,y:t.pageY}}}const Qee=t=>e=>Hb(e)&&t(e,cf(e));function Bh(t,e,n,r){return Md(t,e,Qee(n),r)}const xF=1e-4,Xee=1-xF,Yee=1+xF,AF=.01,Jee=0-AF,Zee=0+AF;function pn(t){return t.max-t.min}function ete(t,e,n){return Math.abs(t-e)<=n}function XP(t,e,n,r=.5){t.origin=r,t.originPoint=rt(e.min,e.max,t.origin),t.scale=pn(n)/pn(e),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Xee&&t.scale<=Yee||isNaN(t.scale))&&(t.scale=1),(t.translate>=Jee&&t.translate<=Zee||isNaN(t.translate))&&(t.translate=0)}function jh(t,e,n,r){XP(t.x,e.x,n.x,r?r.originX:void 0),XP(t.y,e.y,n.y,r?r.originY:void 0)}function YP(t,e,n){t.min=n.min+e.min,t.max=t.min+pn(e)}function tte(t,e,n){YP(t.x,e.x,n.x),YP(t.y,e.y,n.y)}function JP(t,e,n){t.min=e.min-n.min,t.max=t.min+pn(e)}function Fg(t,e,n){JP(t.x,e.x,n.x),JP(t.y,e.y,n.y)}function er(t){return[t("x"),t("y")]}const PF=({current:t})=>t?t.ownerDocument.defaultView:null,ZP=(t,e)=>Math.abs(t-e);function nte(t,e){const n=ZP(t.x,e.x),r=ZP(t.y,e.y);return Math.sqrt(n**2+r**2)}class kF{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=F_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=nte(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:E}=f,{timestamp:b}=zt;this.history.push({...E,timestamp:b});const{onStart:S,onMove:y}=this.handlers;p||(S&&S(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=V_(p,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:E,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=F_(f.type==="pointercancel"?this.lastMoveEventInfo:V_(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,S),E&&E(f,S)},!Hb(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=cf(e),l=V_(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=zt;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,F_(l,this.history)),this.removeListeners=af(Bh(this.contextWindow,"pointermove",this.handlePointerMove),Bh(this.contextWindow,"pointerup",this.handlePointerUp),Bh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),go(this.updatePoint)}}function V_(t,e){return e?{point:e(t.point)}:t}function e1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function F_({point:t},e){return{point:t,delta:e1(t,DF(e)),offset:e1(t,rte(e)),velocity:ite(e,.1)}}function rte(t){return t[0]}function DF(t){return t[t.length-1]}function ite(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=DF(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>pi(e)));)n--;if(!r)return{x:0,y:0};const s=ar(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ste(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?rt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?rt(n,t,r.max):Math.min(t,n)),t}function t1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function ote(t,{top:e,left:n,bottom:r,right:i}){return{x:t1(t.x,n,i),y:t1(t.y,e,r)}}function n1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function ate(t,e){return{x:n1(t.x,e.x),y:n1(t.y,e.y)}}function lte(t,e){let n=.5;const r=pn(t),i=pn(e);return i>r?n=Pd(e.min,e.max-r,t.min):r>i&&(n=Pd(t.min,t.max-i,e.min)),Xi(0,1,n)}function ute(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const C0=.35;function cte(t=C0){return t===!1?t=0:t===!0&&(t=C0),{x:r1(t,"left","right"),y:r1(t,"top","bottom")}}function r1(t,e,n){return{min:i1(t,e),max:i1(t,n)}}function i1(t,e){return typeof t=="number"?t:t[e]||0}const hte=new WeakMap;class dte{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(cf(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:E}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=yZ(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),er(S=>{let y=this.getAxisMotionValue(S).get()||0;if(mi.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const x=w.layout.layoutBox[S];x&&(y=pn(x)*(parseFloat(y)/100))}}this.originPoint[S]=y}),E&&Ze.postRender(()=>E(d,f)),I0(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:E,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:S}=f;if(g&&this.currentDirection===null){this.currentDirection=fte(S),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,S),this.updateAxis("y",f.point,S),this.visualElement.render(),b&&b(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>er(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new kF(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:PF(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ze.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wp(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=ste(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Hl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=ote(r.layoutBox,e):this.constraints=!1,this.elastic=cte(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&er(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ute(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Hl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=pee(r,i.root,this.visualElement.getTransformPagePoint());let o=ate(i.layout.layoutBox,s);if(n){const a=n(hee(o));this.hasMutatedConstraints=!!a,a&&(o=mF(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=er(c=>{if(!wp(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return I0(this.visualElement,e),r.start(tI(e,r,0,n,this.visualElement,!1))}stopAnimation(){er(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){er(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){er(n=>{const{drag:r}=this.getProps();if(!wp(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-rt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Hl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};er(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=lte({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),er(o=>{if(!wp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(rt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;hte.set(this.visualElement,this);const e=this.visualElement.current,n=Bh(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Hl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ze.read(r);const o=Md(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(er(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=C0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function wp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function fte(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class pte extends Co{constructor(e){super(e),this.removeGroupControls=hr,this.removeListeners=hr,this.controls=new dte(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const s1=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class mte extends Co{constructor(){super(...arguments),this.removePointerDownListener=hr}onPointerDown(e){this.session=new kF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:s1(e),onStart:s1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ze.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Bh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let B_=!1;class gte extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),B_&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,B_=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Wb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;B_=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OF(t){const[e,n]=tF(),r=I.useContext(Tb);return M.jsx(gte,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(fF),isPresent:e,safeToRemove:n})}function yte(t,e,n){const r=sn(t)?t:Nu(t);return r.start(tI("",r,e,n)),r.animation}const vte=(t,e)=>t.depth-e.depth;class _te{constructor(){this.children=[],this.isDirty=!1}add(e){Rb(this.children,e),this.isDirty=!0}remove(e){Cb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vte),this.isDirty=!1,this.children.forEach(e)}}function wte(t,e){const n=Rn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(go(r),t(s-e))};return Ze.setup(r,!0),()=>go(r)}const MF=["TopLeft","TopRight","BottomLeft","BottomRight"],Ste=MF.length,o1=t=>typeof t=="string"?parseFloat(t):t,a1=t=>typeof t=="number"||ue.test(t);function Ete(t,e,n,r,i,s){i?(t.opacity=rt(0,n.opacity??1,Tte(r)),t.opacityExit=rt(e.opacity??1,0,bte(r))):s&&(t.opacity=rt(e.opacity??1,n.opacity??1,r));for(let o=0;o<Ste;o++){const a=`border${MF[o]}Radius`;let l=l1(e,a),u=l1(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||a1(l)===a1(u)?(t[a]=Math.max(rt(o1(l),o1(u),r),0),(mi.test(u)||mi.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,r))}function l1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Tte=LF(0,.5,w2),bte=LF(.5,.95,hr);function LF(t,e,n){return r=>r<t?0:r>e?1:n(Pd(t,e,r))}function u1(t,e){t.min=e.min,t.max=e.max}function Tr(t,e){u1(t.x,e.x),u1(t.y,e.y)}function c1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function h1(t,e,n,r,i){return t-=e,t=Vg(t,1/n,r),i!==void 0&&(t=Vg(t,1/i,r)),t}function Ite(t,e=0,n=1,r=.5,i,s=t,o=t){if(mi.test(e)&&(e=parseFloat(e),e=rt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=rt(s.min,s.max,r);t===s&&(a-=e),t.min=h1(t.min,e,n,a,i),t.max=h1(t.max,e,n,a,i)}function d1(t,e,[n,r,i],s,o){Ite(t,e[n],e[r],e[i],e.scale,s,o)}const Rte=["x","scaleX","originX"],Cte=["y","scaleY","originY"];function f1(t,e,n,r){d1(t.x,e,Rte,n?n.x:void 0,r?r.x:void 0),d1(t.y,e,Cte,n?n.y:void 0,r?r.y:void 0)}function p1(t){return t.translate===0&&t.scale===1}function NF(t){return p1(t.x)&&p1(t.y)}function m1(t,e){return t.min===e.min&&t.max===e.max}function xte(t,e){return m1(t.x,e.x)&&m1(t.y,e.y)}function g1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function VF(t,e){return g1(t.x,e.x)&&g1(t.y,e.y)}function y1(t){return pn(t.x)/pn(t.y)}function v1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Ate{constructor(){this.members=[]}add(e){Rb(this.members,e),e.scheduleRender()}remove(e){if(Cb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pte(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:p,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const j_=["","X","Y","Z"],kte=1e3;let Dte=0;function $_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function FF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=TF(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&FF(r)}function BF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Dte++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Lte),this.nodes.forEach(Bte),this.nodes.forEach(jte),this.nodes.forEach(Nte)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _te)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Pb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=eF(o)&&!TZ(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c,d=0;const f=()=>this.root.updateBlockedByResize=!1;Ze.read(()=>{d=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,c&&c(),c=wte(f,250),fm.hasAnimatedSinceResize&&(fm.hasAnimatedSinceResize=!1,this.nodes.forEach(S1)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Hte,{onLayoutAnimationStart:E,onLayoutAnimationComplete:b}=u.getProps(),S=!this.targetLayout||!VF(this.targetLayout,p),y=!d&&f;if(this.options.layoutRoot||this.resumeFrom||y||d&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...Ub(g,"layout"),onPlay:E,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,y)}else d||S1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),go(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($te),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&FF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(w1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Fte),this.nodes.forEach(Ote),this.nodes.forEach(Mte)):this.nodes.forEach(w1),this.clearAllSnapshots();const a=Rn.now();zt.delta=Xi(0,1e3/60,a-zt.timestamp),zt.timestamp=a,zt.isProcessing=!0,A_.update.process(zt),A_.preRender.process(zt),A_.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Vte),this.sharedNodes.forEach(Ute)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pn(this.snapshot.measuredBox.x)&&!pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!NF(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Yo(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Kte(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Rt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(qte))){const{scroll:c}=this.root;c&&(Kl(a.x,c.offset.x),Kl(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Rt();if(Tr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Tr(a,o),Kl(a.x,d.offset.x),Kl(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Rt();Tr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ql(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Yo(c.latestValues)&&ql(l,c.latestValues)}return Yo(this.latestValues)&&ql(l,this.latestValues),l}removeTransform(o){const a=Rt();Tr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Yo(u.latestValues))continue;S0(u.latestValues)&&u.updateSnapshot();const c=Rt(),d=u.measurePageBox();Tr(c,d),f1(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Yo(this.latestValues)&&f1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!this.layout||!(c||d))return;this.resolvedRelativeTargetAt=zt.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Rt(),this.targetWithTransforms=Rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tte(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),yF(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||S0(this.parent.latestValues)||gF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),Fg(this.relativeTargetOrigin,a,l),Tr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Tr(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;fee(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Rt());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(c1(this.prevProjectionDelta.x,this.projectionDelta.x),c1(this.prevProjectionDelta.y,this.projectionDelta.y)),jh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!v1(this.projectionDelta.x,this.prevProjectionDelta.x)||!v1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gl(),this.projectionDelta=Gl(),this.projectionDeltaWithTransform=Gl()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Gl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Rt(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,E=p!==g,b=this.getStack(),S=!b||b.members.length<=1,y=!!(E&&!S&&this.options.crossfade===!0&&!this.path.some(Wte));this.animationProgress=0;let w;this.mixTargetDelta=x=>{const O=x/1e3;E1(d.x,o.x,O),E1(d.y,o.y,O),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fg(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zte(this.relativeTarget,this.relativeTargetOrigin,f,O),w&&xte(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Rt()),Tr(w,this.relativeTarget)),E&&(this.animationValues=c,Ete(c,u,this.latestValues,O,y,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(go(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{fm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nu(0)),this.currentAnimation=yte(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kte),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&jF(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Rt();const d=pn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=pn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Tr(a,l),ql(a,c),jh(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Ate),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&$_("z",o,u,this.animationValues);for(let c=0;c<j_.length;c++)$_(`rotate${j_[c]}`,o,u,this.animationValues),$_(`skew${j_[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=dm(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=dm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Yo(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Pte(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const g in w0){if(c[g]===void 0)continue;const{correct:E,applyTo:b,isCSSVariable:S}=w0[g],y=d==="none"?c[g]:E(c[g],u);if(b){const w=b.length;for(let x=0;x<w;x++)o[b[x]]=y}else S?this.options.visualElement.renderState.vars[g]=y:o[g]=y}this.options.layoutId&&(o.pointerEvents=u===this?dm(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(_1),this.root.sharedNodes.clear()}}}function Ote(t){t.updateLayout()}function Mte(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?er(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=pn(f);f.min=r[d].min,f.max=f.min+p}):jF(s,e.layoutBox,r)&&er(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=pn(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Gl();jh(a,r,e.layoutBox);const l=Gl();o?jh(l,t.applyTransform(i,!0),e.measuredBox):jh(l,r,e.layoutBox);const u=!NF(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=Rt();Fg(g,e.layoutBox,f.layoutBox);const E=Rt();Fg(E,r,p.layoutBox),VF(g,E)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Lte(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Nte(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Vte(t){t.clearSnapshot()}function _1(t){t.clearMeasurements()}function w1(t){t.isLayoutDirty=!1}function Fte(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function S1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Bte(t){t.resolveTargetDelta()}function jte(t){t.calcProjection()}function $te(t){t.resetSkewAndRotation()}function Ute(t){t.removeLeadSnapshot()}function E1(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function T1(t,e,n,r){t.min=rt(e.min,n.min,r),t.max=rt(e.max,n.max,r)}function zte(t,e,n,r){T1(t.x,e.x,n.x,r),T1(t.y,e.y,n.y,r)}function Wte(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hte={duration:.45,ease:[.4,0,.1,1]},b1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),I1=b1("applewebkit/")&&!b1("chrome/")?Math.round:hr;function R1(t){t.min=I1(t.min),t.max=I1(t.max)}function Kte(t){R1(t.x),R1(t.y)}function jF(t,e,n){return t==="position"||t==="preserve-aspect"&&!ete(y1(e),y1(n),.2)}function qte(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Gte=BF({attachResizeListener:(t,e)=>Md(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),U_={current:void 0},$F=BF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!U_.current){const t=new Gte({});t.mount(window),t.setOptions({layoutScroll:!0}),U_.current=t}return U_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Qte={pan:{Feature:mte},drag:{Feature:pte,ProjectionNode:$F,MeasureLayout:OF}};function C1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ze.postRender(()=>s(e,cf(e)))}class Xte extends Co{mount(){const{current:e}=this.node;e&&(this.unmount=vZ(e,(n,r)=>(C1(this.node,r,"Start"),i=>C1(this.node,i,"End"))))}unmount(){}}class Yte extends Co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=af(Md(this.node.current,"focus",()=>this.onFocus()),Md(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function x1(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ze.postRender(()=>s(e,cf(e)))}class Jte extends Co{mount(){const{current:e}=this.node;e&&(this.unmount=EZ(e,(n,r)=>(x1(this.node,r,"Start"),(i,{success:s})=>x1(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const x0=new WeakMap,z_=new WeakMap,Zte=t=>{const e=x0.get(t.target);e&&e(t)},ene=t=>{t.forEach(Zte)};function tne({root:t,...e}){const n=t||document;z_.has(n)||z_.set(n,{});const r=z_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ene,{root:t,...e})),r[i]}function nne(t,e,n){const r=tne(e);return x0.set(t,n),r.observe(t),()=>{x0.delete(t),r.unobserve(t)}}const rne={some:0,all:1};class ine extends Co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:rne[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return nne(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sne(e,n))&&this.startObserver()}unmount(){}}function sne({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const one={inView:{Feature:ine},tap:{Feature:Jte},focus:{Feature:Yte},hover:{Feature:Xte}},ane={layout:{ProjectionNode:$F,MeasureLayout:OF}},lne={...Gee,...one,...Qte,...ane},une=cee(lne,Tee),cne=""+new URL("banner-CuJgjCV8.png",import.meta.url).href,ti={colors:{background:"#fff9ec",highlight:"#ff8e52",text:"#00202b",secondaryText:"#666666",border:"#eee"}};function hne(){return M.jsxs(Q,{style:A1.container,children:[M.jsx(G,{style:A1.title,children:"Pocket Stylist"}),M.jsx(G,{children:"Welcome to your personal style assistant."})]})}const A1=De.create({container:{flex:1,padding:20,alignItems:"center",justifyContent:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:10}}),dne=async(t,e)=>{const n=Ju(Ro,"users",t);await fb(n,e,{merge:!0})},fne=async t=>{const e=Ju(Ro,"users",t),n=PG(e);return(await n).exists()?(await n).data():null},pne=async(t,e)=>{console.log("addItemToDb called for user:",t);try{const n=ZT(Ro,"users",t,"closet"),r=Ju(n);return console.log("Generated ID:",r.id),console.log("Writing document to Firestore (setDoc)..."),await fb(r,e),console.log("Document written successfully"),{...e,id:r.id}}catch(n){throw console.error("Error in addItemToDb:",n),n}},P1=async(t,e=null,n=12)=>{const r=ZT(Ro,"users",t,"closet");let i;e?i=n0(r,UA("createdAt","desc"),IG(e),zA(n)):i=n0(r,UA("createdAt","desc"),zA(n));const s=await TV(i),o=s.docs.map(l=>({id:l.id,...l.data()})),a=s.docs[s.docs.length-1];return{items:o,lastVisible:a}},k1=async(t,e,n)=>{const r=Ju(Ro,"users",t,"closet",e);await kG(r,n)},mne=async(t,e)=>{const n=Ju(Ro,"users",t,"closet",e);await DG(n)},gne=async(t,e,n)=>{const r=Ju(Ro,"users",t,"schedule",e);await fb(r,{date:e,...n},{merge:!0})},yne=async t=>{const e=ZT(Ro,"users",t,"schedule"),n=n0(e),r=await TV(n),i={};return r.forEach(s=>{i[s.id]=s.data()}),i},UF=I.createContext();function Jy(){return I.useContext(UF)}function vne({children:t}){const{currentUser:e}=o2(),[n,r]=I.useState([]),[i,s]=I.useState({}),[o,a]=I.useState(!0),[l,u]=I.useState(null),[c,d]=I.useState(!0),[f,p]=I.useState(!1);I.useEffect(()=>{e?(async()=>{try{const{items:T,lastVisible:v}=await P1(e.uid);r(T),u(v),d(!!v);const R=await yne(e.uid);s(R)}catch(T){console.error("Error fetching data:",T)}finally{a(!1)}})():(r([]),s({}),a(!1))},[e]);const O={items:n,schedule:i,loading:o,loadingMore:f,hasMore:c,loadMoreItems:async()=>{if(!(!e||!c||f)){p(!0);try{const{items:k,lastVisible:T}=await P1(e.uid,l);k.length>0?(r(v=>[...v,...k]),u(T),d(!!T)):d(!1)}catch(k){console.error("Error loading more items:",k)}finally{p(!1)}}},addItem:async k=>{if(!e)throw new Error("User not authenticated");const T=Date.now().toString(),v={...k,id:T,rating:3,wearCount:0,createdAt:new Date().toISOString()};r(R=>[...R,v]);try{const R=await pne(e.uid,{...k,rating:3,wearCount:0,createdAt:new Date().toISOString()});return r(C=>C.map(A=>A.id===T?R:A)),R}catch(R){throw console.error("Error adding item:",R),r(C=>C.filter(A=>A.id!==T)),R}},updateItem:async(k,T)=>{if(e){r(v=>v.map(R=>R.id===k?{...R,...T}:R));try{await k1(e.uid,k,T)}catch(v){console.error("Error updating item:",v)}}},deleteItem:async k=>{if(!e)return;const T=n.find(v=>v.id===k);r(v=>v.filter(R=>R.id!==k));try{await mne(e.uid,k)}catch(v){console.error("Error deleting item:",v),T&&r(R=>[...R,T])}},addToSchedule:async(k,T)=>{if(e)try{await gne(e.uid,k,T),s(v=>({...v,[k]:T}))}catch(v){console.error("Error saving schedule:",v)}},markAsWorn:async(k,T=new Date)=>{if(!e)return;const v=new Date(T).toISOString();r(R=>R.map(C=>k.includes(C.id)?{...C,lastWorn:v,wearCount:(C.wearCount||0)+1}:C));for(const R of k){const C=n.find(A=>A.id===R);C&&await k1(e.uid,R,{lastWorn:v,wearCount:(C.wearCount||0)+1})}},isItemAvailable:k=>{if(!k.lastWorn)return!0;const T=new Date(k.lastWorn),v=new Date(T);return v.setDate(T.getDate()+(k.refreshCycle||1)),new Date>=v}};return M.jsx(UF.Provider,{value:O,children:t})}const zF=2,_ne=Ym.get("window").width,wne=(_ne-40)/zF,Sne=ft.memo(({item:t,onPress:e,isAvailable:n})=>M.jsx(Ce,{onPress:()=>e(t),children:M.jsxs(Q,{style:[me.itemContainer,!n&&me.unavailableItem],children:[M.jsx(Nr,{source:{uri:t.imageUri||t.image},style:me.image,resizeMode:"cover"}),M.jsxs(Q,{style:me.infoContainer,children:[M.jsx(G,{style:me.itemType,children:t.type}),!n&&M.jsx(G,{style:me.unavailableText,children:"In Wash"})]})]})}));function Ene(){const{items:t,isItemAvailable:e,deleteItem:n,updateItem:r,loadMoreItems:i,hasMore:s,loadingMore:o}=Jy(),a=Wu(),[l,u]=I.useState(!1),[c,d]=I.useState(!1),[f,p]=I.useState(null),g=I.useRef(null),E=I.useRef(null),b=O=>{const k=O.target.files[0];if(k){u(!1);const T=new FileReader;T.onloadend=()=>{a("/camera",{state:{image:T.result}})},T.readAsDataURL(k)}},S=O=>{p(O),d(!0)},y=()=>{confirm("Are you sure you want to delete this item?")&&(n(f.id),d(!1))},w=O=>{p(k=>({...k,rating:O})),r(f.id,{rating:O})},x=({item:O})=>M.jsx(Sne,{item:O,onPress:S,isAvailable:e(O)});return M.jsxs(Q,{style:me.container,children:[M.jsxs(Q,{style:me.header,children:[M.jsx(G,{style:me.title,children:"Virtual Closet"}),M.jsx(Ce,{style:me.addButton,onPress:()=>u(!0),children:M.jsx(G,{style:me.addButtonText,children:"+ Add"})}),M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:g,style:{display:"none"},onChange:b}),M.jsx("input",{type:"file",accept:"image/*",ref:E,style:{display:"none"},onChange:b})]}),M.jsx(s9,{data:t,renderItem:x,keyExtractor:O=>O.id,numColumns:zF,contentContainerStyle:me.listContent,ListEmptyComponent:M.jsx(G,{style:me.emptyText,children:"No items in closet. Add some!"}),onEndReached:i,onEndReachedThreshold:.5,ListFooterComponent:o?M.jsx(G,{style:{textAlign:"center",padding:10},children:"Loading more..."}):null}),M.jsx(hd,{animationType:"fade",transparent:!0,visible:l,onRequestClose:()=>u(!1),children:M.jsxs(Q,{style:me.modalOverlay,children:[M.jsx(Ce,{style:me.modalBackdrop,onPress:()=>u(!1)}),M.jsxs(Q,{style:me.modalContent,children:[M.jsx(G,{style:me.modalTitle,children:"Add New Item"}),M.jsx(Ce,{style:me.modalButton,onPress:()=>{u(!1),g.current.click()},children:M.jsx(G,{style:me.modalButtonText,children:"Take Photo"})}),M.jsx(Ce,{style:me.modalButton,onPress:()=>{u(!1),E.current.click()},children:M.jsx(G,{style:me.modalButtonText,children:"Choose from Library"})}),M.jsx(Ce,{style:[me.modalButton,me.cancelButton],onPress:()=>u(!1),children:M.jsx(G,{style:me.cancelButtonText,children:"Cancel"})})]})]})}),M.jsx(hd,{animationType:"slide",visible:c,onRequestClose:()=>d(!1),children:M.jsx(Q,{style:me.detailContainer,children:f&&M.jsxs(kr,{children:[M.jsx(Nr,{source:{uri:f.imageUri},style:me.detailImage,resizeMode:"contain"}),M.jsxs(Q,{style:me.detailInfo,children:[M.jsx(G,{style:me.detailTitle,children:f.type}),M.jsxs(G,{style:me.detailText,children:["Color: ",f.color]}),M.jsxs(G,{style:me.detailText,children:["Style: ",f.style]}),M.jsxs(G,{style:me.detailText,children:["Worn: ",f.wearCount||0," times"]}),M.jsx(G,{style:me.sectionTitle,children:"Rating"}),M.jsx(Q,{style:me.ratingContainer,children:[1,2,3,4,5].map(O=>M.jsx(Ce,{onPress:()=>w(O),children:M.jsx(G,{style:[me.star,(f.rating||0)>=O?me.starFilled:me.starEmpty],children:""})},O))}),M.jsx(Ce,{style:me.deleteButton,onPress:y,children:M.jsx(G,{style:me.deleteButtonText,children:"Delete Item"})}),M.jsx(Ce,{style:me.closeDetailButton,onPress:()=>d(!1),children:M.jsx(G,{style:me.closeDetailButtonText,children:"Close"})})]})]})})})]})}const me=De.create({container:{flex:1,padding:10,backgroundColor:"#fff"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingHorizontal:10},title:{fontSize:24,fontWeight:"bold"},addButton:{backgroundColor:"#007AFF",paddingVertical:8,paddingHorizontal:15,borderRadius:20},addButtonText:{color:"#fff",fontWeight:"bold"},listContent:{paddingBottom:20},itemContainer:{width:wne,margin:5,backgroundColor:"#f9f9f9",borderRadius:10,overflow:"hidden",elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41},unavailableItem:{opacity:.5,backgroundColor:"#eee"},image:{width:"100%",height:150},infoContainer:{padding:10},itemType:{textTransform:"capitalize",fontWeight:"bold"},unavailableText:{color:"red",fontSize:12,marginTop:5},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalBackdrop:{...De.absoluteFillObject},modalContent:{width:"80%",maxWidth:300,backgroundColor:"white",borderRadius:20,padding:20,alignItems:"center",elevation:5},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},modalButton:{width:"100%",padding:15,backgroundColor:"#f0f0f0",borderRadius:10,marginBottom:10,alignItems:"center"},modalButtonText:{fontSize:16,color:"#007AFF"},cancelButton:{backgroundColor:"transparent",marginTop:5},cancelButtonText:{fontSize:16,color:"#FF3B30",fontWeight:"bold"},detailContainer:{flex:1,backgroundColor:"#fff"},detailImage:{width:"100%",height:400,backgroundColor:"#f0f0f0"},detailInfo:{padding:20},detailTitle:{fontSize:28,fontWeight:"bold",marginBottom:10,textTransform:"capitalize"},detailText:{fontSize:16,marginBottom:5,color:"#333"},sectionTitle:{fontSize:18,fontWeight:"bold",marginTop:20,marginBottom:10},ratingContainer:{flexDirection:"row",marginBottom:20},star:{fontSize:30,marginRight:5},starFilled:{color:"#FFD700"},starEmpty:{color:"#ddd"},deleteButton:{backgroundColor:"#FF3B30",padding:15,borderRadius:10,alignItems:"center",marginTop:20},deleteButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},closeDetailButton:{padding:15,alignItems:"center",marginTop:10},closeDetailButtonText:{color:"#007AFF",fontSize:16},emptyText:{textAlign:"center",marginTop:50,fontSize:18,color:"#999"}});function ce(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function F(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let WF=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return WF=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function A0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const P0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class oe extends Error{}class Qt extends oe{constructor(e,n,r,i){super(`${Qt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Zy({message:r,cause:P0(n)});const s=n==null?void 0:n.error;return e===400?new HF(e,s,r,i):e===401?new KF(e,s,r,i):e===403?new qF(e,s,r,i):e===404?new GF(e,s,r,i):e===409?new QF(e,s,r,i):e===422?new XF(e,s,r,i):e===429?new YF(e,s,r,i):e>=500?new JF(e,s,r,i):new Qt(e,s,r,i)}}class lr extends Qt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Zy extends Qt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class nI extends Zy{constructor({message:e}={}){super({message:e??"Request timed out."})}}class HF extends Qt{}class KF extends Qt{}class qF extends Qt{}class GF extends Qt{}class QF extends Qt{}class XF extends Qt{}class YF extends Qt{}class JF extends Qt{}class ZF extends oe{constructor(){super("Could not parse response content as the length limit was reached")}}class eB extends oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class sh extends Error{constructor(e){super(e)}}const Tne=/^[a-z][a-z0-9+.-]*:/i,bne=t=>Tne.test(t);let Sn=t=>(Sn=Array.isArray,Sn(t)),D1=Sn;function tB(t){return typeof t!="object"?{}:t??{}}function Ine(t){if(!t)return!0;for(const e in t)return!1;return!0}function Rne(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W_(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Cne=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new oe(`${t} must be an integer`);if(e<0)throw new oe(`${t} must be a positive integer`);return e},xne=t=>{try{return JSON.parse(t)}catch{return}},hf=t=>new Promise(e=>setTimeout(e,t)),Cl="6.10.0",Ane=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Pne(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const kne=()=>{var n;const t=Pne();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":M1(Deno.build.os),"X-Stainless-Arch":O1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":M1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":O1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Dne();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Dne(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const O1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",M1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let L1;const One=()=>L1??(L1=kne());function Mne(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function nB(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function rB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return nB({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function iB(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Lne(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Nne=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),sB="RFC3986",oB=t=>String(t),N1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:oB},Vne="RFC1738";let k0=(t,e)=>(k0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),k0(t,e));const qr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),H_=1024,Fne=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=H_){const l=s.length>=H_?s.slice(a,a+H_):s,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Vne&&(d===40||d===41)){u[u.length]=l.charAt(c);continue}if(d<128){u[u.length]=qr[d];continue}if(d<2048){u[u.length]=qr[192|d>>6]+qr[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=qr[224|d>>12]+qr[128|d>>6&63]+qr[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=qr[240|d>>18]+qr[128|d>>12&63]+qr[128|d>>6&63]+qr[128|d&63]}o+=u.join("")}return o};function Bne(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function V1(t,e){if(Sn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const aB={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},lB=function(t,e){Array.prototype.push.apply(t,Sn(e)?e:[e])};let F1;const It={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Fne,encodeValuesOnly:!1,format:sB,formatter:oB,indices:!1,serializeDate(t){return(F1??(F1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function jne(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const K_={};function uB(t,e,n,r,i,s,o,a,l,u,c,d,f,p,g,E,b,S){let y=t,w=S,x=0,O=!1;for(;(w=w.get(K_))!==void 0&&!O;){const C=w.get(t);if(x+=1,typeof C<"u"){if(C===x)throw new RangeError("Cyclic object value");O=!0}typeof w.get(K_)>"u"&&(x=0)}if(typeof u=="function"?y=u(e,y):y instanceof Date?y=f==null?void 0:f(y):n==="comma"&&Sn(y)&&(y=V1(y,function(C){return C instanceof Date?f==null?void 0:f(C):C})),y===null){if(s)return l&&!E?l(e,It.encoder,b,"key",p):e;y=""}if(jne(y)||Bne(y)){if(l){const C=E?e:l(e,It.encoder,b,"key",p);return[(g==null?void 0:g(C))+"="+(g==null?void 0:g(l(y,It.encoder,b,"value",p)))]}return[(g==null?void 0:g(e))+"="+(g==null?void 0:g(String(y)))]}const k=[];if(typeof y>"u")return k;let T;if(n==="comma"&&Sn(y))E&&l&&(y=V1(y,l)),T=[{value:y.length>0?y.join(",")||null:void 0}];else if(Sn(u))T=u;else{const C=Object.keys(y);T=c?C.sort(c):C}const v=a?String(e).replace(/\./g,"%2E"):String(e),R=r&&Sn(y)&&y.length===1?v+"[]":v;if(i&&Sn(y)&&y.length===0)return R+"[]";for(let C=0;C<T.length;++C){const A=T[C],L=typeof A=="object"&&typeof A.value<"u"?A.value:y[A];if(o&&L===null)continue;const D=d&&a?A.replace(/\./g,"%2E"):A,de=Sn(y)?typeof n=="function"?n(R,D):R:R+(d?"."+D:"["+D+"]");S.set(t,x);const fe=new WeakMap;fe.set(K_,S),lB(k,uB(L,de,n,r,i,s,o,a,n==="comma"&&E&&Sn(y)?null:l,u,c,d,f,p,g,E,b,fe))}return k}function $ne(t=It){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||It.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=sB;if(typeof t.format<"u"){if(!k0(N1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=N1[n];let i=It.filter;(typeof t.filter=="function"||Sn(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in aB?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=It.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:It.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:It.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:It.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:It.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?It.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:It.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:It.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:It.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:It.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:It.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:It.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:It.strictNullHandling}}function Une(t,e={}){let n=t;const r=$ne(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Sn(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=aB[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const p=i[f];r.skipNulls&&n[p]===null||lB(o,uB(n[p],p,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}function zne(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let B1;function rI(t){let e;return(B1??(e=new globalThis.TextEncoder,B1=e.encode.bind(e)))(t)}let j1;function $1(t){let e;return(j1??(e=new globalThis.TextDecoder,j1=e.decode.bind(e)))(t)}var Nn,Vn;class ev{constructor(){Nn.set(this,void 0),Vn.set(this,void 0),ce(this,Nn,new Uint8Array),ce(this,Vn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?rI(e):e;ce(this,Nn,zne([F(this,Nn,"f"),n]));const r=[];let i;for(;(i=Wne(F(this,Nn,"f"),F(this,Vn,"f")))!=null;){if(i.carriage&&F(this,Vn,"f")==null){ce(this,Vn,i.index);continue}if(F(this,Vn,"f")!=null&&(i.index!==F(this,Vn,"f")+1||i.carriage)){r.push($1(F(this,Nn,"f").subarray(0,F(this,Vn,"f")-1))),ce(this,Nn,F(this,Nn,"f").subarray(F(this,Vn,"f"))),ce(this,Vn,null);continue}const s=F(this,Vn,"f")!==null?i.preceding-1:i.preceding,o=$1(F(this,Nn,"f").subarray(0,s));r.push(o),ce(this,Nn,F(this,Nn,"f").subarray(i.index)),ce(this,Vn,null)}return r}flush(){return F(this,Nn,"f").length?this.decode(`
`):[]}}Nn=new WeakMap,Vn=new WeakMap;ev.NEWLINE_CHARS=new Set([`
`,"\r"]);ev.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Wne(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Hne(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Bg={off:0,error:200,warn:300,info:400,debug:500},U1=(t,e,n)=>{if(t){if(Rne(Bg,t))return t;Wt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Bg))}`)}};function oh(){}function Sp(t,e,n){return!e||Bg[t]>Bg[n]?oh:e[t].bind(e)}const Kne={error:oh,warn:oh,info:oh,debug:oh};let z1=new WeakMap;function Wt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Kne;const r=z1.get(e);if(r&&r[0]===n)return r[1];const i={error:Sp("error",e,n),warn:Sp("warn",e,n),info:Sp("info",e,n),debug:Sp("debug",e,n)};return z1.set(e,[n,i]),i}const Jo=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Wc;class oi{constructor(e,n,r){this.iterator=e,Wc.set(this,void 0),this.controller=n,ce(this,Wc,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Wt(r):console;async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of qne(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(c){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),c}if(u&&u.error)throw new Qt(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(l.event=="error")throw new Qt(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(A0(l))return;throw l}finally{a||n.abort()}}return new oi(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new ev,l=iB(e);for await(const u of l)for(const c of a.decode(u))yield c;for(const u of a.flush())yield u}async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of s())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(A0(l))return;throw l}finally{a||n.abort()}}return new oi(o,n,r)}[(Wc=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new oi(()=>i(e),this.controller,F(this,Wc,"f")),new oi(()=>i(n),this.controller,F(this,Wc,"f"))]}toReadableStream(){const e=this;let n;return nB({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=rI(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*qne(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new oe("Attempted to iterate over a response with no body");const n=new Qne,r=new ev,i=iB(t.body);for await(const s of Gne(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*Gne(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?rI(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=Hne(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class Qne{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Xne(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Xne(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function cB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var d;if(e.options.stream)return Wt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):oi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),l=(d=a==null?void 0:a.split(";")[0])==null?void 0:d.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const f=await n.json();return hB(f,n)}return await n.text()})();return Wt(t).debug(`[${r}] response parsed`,Jo({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function hB(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ah;class tv extends Promise{constructor(e,n,r=cB){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,ah.set(this,void 0),ce(this,ah,e)}_thenUnwrap(e){return new tv(F(this,ah,"f"),this.responsePromise,async(n,r)=>hB(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(F(this,ah,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ah=new WeakMap;var Ep;class iI{constructor(e,n,r,i){Ep.set(this,void 0),ce(this,Ep,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await F(this,Ep,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ep=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Yne extends tv{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await cB(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class nv extends iI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Et extends iI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...tB(this.options.query),after:n}}:null}}class jg extends iI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...tB(this.options.query),after:e}}:null}}const dB=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $h(t,e,n){return dB(),new File(t,e??"unknown_file",n)}function pm(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const sI=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",W1=async(t,e)=>D0(t.body)?{...t,body:await fB(t.body,e)}:t,ja=async(t,e)=>({...t,body:await fB(t.body,e)}),H1=new WeakMap;function Jne(t){const e=typeof t=="function"?t:t.fetch,n=H1.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return H1.set(e,r),r}const fB=async(t,e)=>{if(!await Jne(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>O0(n,r,i))),n},pB=t=>t instanceof Blob&&"name"in t,Zne=t=>typeof t=="object"&&t!==null&&(t instanceof Response||sI(t)||pB(t)),D0=t=>{if(Zne(t))return!0;if(Array.isArray(t))return t.some(D0);if(t&&typeof t=="object"){for(const e in t)if(D0(t[e]))return!0}return!1},O0=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,$h([await n.blob()],pm(n)));else if(sI(n))t.append(e,$h([await new Response(rB(n)).blob()],pm(n)));else if(pB(n))t.append(e,n,pm(n));else if(Array.isArray(n))await Promise.all(n.map(r=>O0(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>O0(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},mB=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ere=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&mB(t),tre=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function nre(t,e,n){if(dB(),t=await t,ere(t))return t instanceof File?t:$h([await t.arrayBuffer()],t.name);if(tre(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),$h(await M0(i),e,n)}const r=await M0(t);if(e||(e=pm(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return $h(r,e,n)}async function M0(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(mB(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(sI(t))for await(const r of t)e.push(...await M0(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${rre(t)}`)}return e}function rre(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class se{constructor(e){this._client=e}}function gB(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const K1=Object.freeze(Object.create(null)),ire=(t=gB)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((c,d,f)=>{var E;/[?#]/.test(d)&&(i=!0);const p=r[f];let g=(i?encodeURIComponent:t)(""+p);return f!==r.length&&(p==null||typeof p=="object"&&p.toString===((E=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??K1)??K1))==null?void 0:E.toString))&&(g=p+"",s.push({start:c.length+d.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),c+d+(f===r.length?"":g)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((c,d)=>c.start-d.start),s.length>0){let c=0;const d=s.reduce((f,p)=>{const g=" ".repeat(p.start-c),E="^".repeat(p.length);return c=p.start+p.length,f+g+E},"");throw new oe(`Path parameters result in path with invalid segments:
${s.map(f=>f.error).join(`
`)}
${o}
${d}`)}return o},z=ire(gB);let yB=class extends se{list(e,n={},r){return this._client.getAPIList(z`/chat/completions/${e}/messages`,Et,{query:n,...r})}};function $g(t){return t!==void 0&&"function"in t&&t.function!==void 0}function oI(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function df(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function sre(t,e){return!e||!vB(e)?{...t,choices:t.choices.map(n=>(_B(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:aI(t,e)}function aI(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new ZF;if(r.finish_reason==="content_filter")throw new eB;return _B(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>are(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?ore(e,r.message.content):null}}});return{...t,choices:n}}function ore(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function are(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return $g(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:df(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function lre(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return $g(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return $g(n)&&(df(n)||(n==null?void 0:n.function.strict)||!1)}function vB(t){var e;return oI(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>df(n)||n.type==="function"&&n.function.strict===!0))??!1}function _B(t){for(const e of t||[])if(e.type!=="function")throw new oe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function ure(t){for(const e of t??[]){if(e.type!=="function")throw new oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Ug=t=>(t==null?void 0:t.role)==="assistant",wB=t=>(t==null?void 0:t.role)==="tool";var L0,mm,gm,lh,uh,ym,ch,Ri,hh,zg,Wg,xl,SB;class lI{constructor(){L0.add(this),this.controller=new AbortController,mm.set(this,void 0),gm.set(this,()=>{}),lh.set(this,()=>{}),uh.set(this,void 0),ym.set(this,()=>{}),ch.set(this,()=>{}),Ri.set(this,{}),hh.set(this,!1),zg.set(this,!1),Wg.set(this,!1),xl.set(this,!1),ce(this,mm,new Promise((e,n)=>{ce(this,gm,e,"f"),ce(this,lh,n,"f")})),ce(this,uh,new Promise((e,n)=>{ce(this,ym,e,"f"),ce(this,ch,n,"f")})),F(this,mm,"f").catch(()=>{}),F(this,uh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},F(this,L0,"m",SB).bind(this))},0)}_connected(){this.ended||(F(this,gm,"f").call(this),this._emit("connect"))}get ended(){return F(this,hh,"f")}get errored(){return F(this,zg,"f")}get aborted(){return F(this,Wg,"f")}abort(){this.controller.abort()}on(e,n){return(F(this,Ri,"f")[e]||(F(this,Ri,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=F(this,Ri,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(F(this,Ri,"f")[e]||(F(this,Ri,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ce(this,xl,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ce(this,xl,!0),await F(this,uh,"f")}_emit(e,...n){if(F(this,hh,"f"))return;e==="end"&&(ce(this,hh,!0),F(this,ym,"f").call(this));const r=F(this,Ri,"f")[e];if(r&&(F(this,Ri,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!F(this,xl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,lh,"f").call(this,i),F(this,ch,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!F(this,xl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,lh,"f").call(this,i),F(this,ch,"f").call(this,i),this._emit("end")}}_emitFinal(){}}mm=new WeakMap,gm=new WeakMap,lh=new WeakMap,uh=new WeakMap,ym=new WeakMap,ch=new WeakMap,Ri=new WeakMap,hh=new WeakMap,zg=new WeakMap,Wg=new WeakMap,xl=new WeakMap,L0=new WeakSet,SB=function(e){if(ce(this,zg,!0),e instanceof Error&&e.name==="AbortError"&&(e=new lr),e instanceof lr)return ce(this,Wg,!0),this._emit("abort",e);if(e instanceof oe)return this._emit("error",e);if(e instanceof Error){const n=new oe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new oe(String(e)))};function cre(t){return typeof t.parse=="function"}var cn,N0,Hg,V0,F0,B0,EB,TB;const hre=10;class bB extends lI{constructor(){super(...arguments),cn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),wB(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Ug(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),F(this,cn,"m",N0).call(this)}async finalMessage(){return await this.done(),F(this,cn,"m",Hg).call(this)}async finalFunctionToolCall(){return await this.done(),F(this,cn,"m",V0).call(this)}async finalFunctionToolCallResult(){return await this.done(),F(this,cn,"m",F0).call(this)}async totalUsage(){return await this.done(),F(this,cn,"m",B0).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=F(this,cn,"m",Hg).call(this);n&&this._emit("finalMessage",n);const r=F(this,cn,"m",N0).call(this);r&&this._emit("finalContent",r);const i=F(this,cn,"m",V0).call(this);i&&this._emit("finalFunctionToolCall",i);const s=F(this,cn,"m",F0).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",F(this,cn,"m",B0).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,cn,"m",EB).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(aI(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var p,g,E;const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s.type==="function"&&((p=s==null?void 0:s.function)==null?void 0:p.name),{maxChatCompletions:u=hre}=r||{},c=n.tools.map(b=>{if(df(b)){if(!b.$callback)throw new oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),d={};for(const b of c)b.type==="function"&&(d[b.function.name||b.function.function.name]=b.function);const f="tools"in n?c.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<u;++b){const y=(g=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:f,messages:[...this.messages]},r)).choices[0])==null?void 0:g.message;if(!y)throw new oe("missing message in ChatCompletion response");if(!((E=y.tool_calls)!=null&&E.length))return;for(const w of y.tool_calls){if(w.type!=="function")continue;const x=w.id,{name:O,arguments:k}=w.function,T=d[O];if(T){if(l&&l!==O){const A=`Invalid tool_call: ${JSON.stringify(O)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:A});continue}}else{const A=`Invalid tool_call: ${JSON.stringify(O)}. Available options are: ${Object.keys(d).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:A});continue}let v;try{v=cre(T)?await T.parse(k):k}catch(A){const L=A instanceof Error?A.message:String(A);this._addMessage({role:i,tool_call_id:x,content:L});continue}const R=await T.function(v,this),C=F(this,cn,"m",TB).call(this,R);if(this._addMessage({role:i,tool_call_id:x,content:C}),l)return}}}}cn=new WeakSet,N0=function(){return F(this,cn,"m",Hg).call(this).content??null},Hg=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Ug(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new oe("stream ended without producing a ChatCompletionMessage with role=assistant")},V0=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Ug(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},F0=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(wB(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},B0=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},EB=function(e){if(e.n!=null&&e.n>1)throw new oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},TB=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class uI extends bB{static runTools(e,n,r){const i=new uI,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),Ug(e)&&e.content&&this._emit("content",e.content)}}const IB=1,RB=2,CB=4,xB=8,AB=16,PB=32,kB=64,DB=128,OB=256,MB=DB|OB,LB=AB|PB|MB|kB,NB=IB|RB|LB,VB=CB|xB,dre=NB|VB,Vt={STR:IB,NUM:RB,ARR:CB,OBJ:xB,NULL:AB,BOOL:PB,NAN:kB,INFINITY:DB,MINUS_INFINITY:OB,INF:MB,SPECIAL:LB,ATOM:NB,COLLECTION:VB,ALL:dre};class fre extends Error{}class pre extends Error{}function mre(t,e=Vt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return gre(t.trim(),e)}const gre=(t,e)=>{const n=t.length;let r=0;const i=f=>{throw new fre(`${f} at position ${r}`)},s=f=>{throw new pre(`${f} at position ${r}`)},o=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||Vt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Vt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Vt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Vt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Vt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Vt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):c()),a=()=>{const f=r;let p=!1;for(r++;r<n&&(t[r]!=='"'||p&&t[r-1]==="\\");)p=t[r]==="\\"?!p:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(f,++r-Number(p)))}catch(g){s(String(g))}else if(Vt.STR&e)try{return JSON.parse(t.substring(f,r-Number(p))+'"')}catch{return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;t[r]!=="}";){if(d(),r>=n&&Vt.OBJ&e)return f;const p=a();d(),r++;try{const g=o();Object.defineProperty(f,p,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(Vt.OBJ&e)return f;throw g}d(),t[r]===","&&r++}}catch{if(Vt.OBJ&e)return f;i("Expected '}' at end of object")}return r++,f},u=()=>{r++;const f=[];try{for(;t[r]!=="]";)f.push(o()),d(),t[r]===","&&r++}catch{if(Vt.ARR&e)return f;i("Expected ']' at end of array")}return r++,f},c=()=>{if(r===0){t==="-"&&Vt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(Vt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(p))}}const f=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Vt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(f,r))}catch{t.substring(f,r)==="-"&&Vt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(g){s(String(g))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},q1=t=>mre(t,Vt.ALL^Vt.NUM);var bt,Ii,vl,ks,q_,Tp,G_,Q_,X_,bp,Y_,G1;class Ld extends bB{constructor(e){super(),bt.add(this),Ii.set(this,void 0),vl.set(this,void 0),ks.set(this,void 0),ce(this,Ii,e),ce(this,vl,[])}get currentChatCompletionSnapshot(){return F(this,ks,"f")}static fromReadableStream(e){const n=new Ld(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Ld(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,bt,"m",q_).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)F(this,bt,"m",G_).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new lr;return this._addChatCompletion(F(this,bt,"m",bp).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),F(this,bt,"m",q_).call(this),this._connected();const i=oi.fromReadableStream(e,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(F(this,bt,"m",bp).call(this)),F(this,bt,"m",G_).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new lr;return this._addChatCompletion(F(this,bt,"m",bp).call(this))}[(Ii=new WeakMap,vl=new WeakMap,ks=new WeakMap,bt=new WeakSet,q_=function(){this.ended||ce(this,ks,void 0)},Tp=function(n){let r=F(this,vl,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},F(this,vl,"f")[n.index]=r,r)},G_=function(n){var i,s,o,a,l,u,c,d,f,p,g,E,b,S,y;if(this.ended)return;const r=F(this,bt,"m",G1).call(this,n);this._emit("chunk",n,r);for(const w of n.choices){const x=r.choices[w.index];w.delta.content!=null&&((i=x.message)==null?void 0:i.role)==="assistant"&&((s=x.message)!=null&&s.content)&&(this._emit("content",w.delta.content,x.message.content),this._emit("content.delta",{delta:w.delta.content,snapshot:x.message.content,parsed:x.message.parsed})),w.delta.refusal!=null&&((o=x.message)==null?void 0:o.role)==="assistant"&&((a=x.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:w.delta.refusal,snapshot:x.message.refusal}),((l=w.logprobs)==null?void 0:l.content)!=null&&((u=x.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=w.logprobs)==null?void 0:c.content,snapshot:((d=x.logprobs)==null?void 0:d.content)??[]}),((f=w.logprobs)==null?void 0:f.refusal)!=null&&((p=x.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=w.logprobs)==null?void 0:g.refusal,snapshot:((E=x.logprobs)==null?void 0:E.refusal)??[]});const O=F(this,bt,"m",Tp).call(this,x);x.finish_reason&&(F(this,bt,"m",X_).call(this,x),O.current_tool_call_index!=null&&F(this,bt,"m",Q_).call(this,x,O.current_tool_call_index));for(const k of w.delta.tool_calls??[])O.current_tool_call_index!==k.index&&(F(this,bt,"m",X_).call(this,x),O.current_tool_call_index!=null&&F(this,bt,"m",Q_).call(this,x,O.current_tool_call_index)),O.current_tool_call_index=k.index;for(const k of w.delta.tool_calls??[]){const T=(b=x.message.tool_calls)==null?void 0:b[k.index];T!=null&&T.type&&((T==null?void 0:T.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(S=T.function)==null?void 0:S.name,index:k.index,arguments:T.function.arguments,parsed_arguments:T.function.parsed_arguments,arguments_delta:((y=k.function)==null?void 0:y.arguments)??""}):(T==null||T.type,void 0))}}},Q_=function(n,r){var o,a,l;if(F(this,bt,"m",Tp).call(this,n).done_tool_calls.has(r))return;const s=(o=n.message.tool_calls)==null?void 0:o[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(a=F(this,Ii,"f"))==null?void 0:a.tools)==null?void 0:l.find(c=>$g(c)&&c.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:df(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},X_=function(n){var i,s;const r=F(this,bt,"m",Tp).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=F(this,bt,"m",Y_).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},bp=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,ks,"f");if(!n)throw new oe("request ended without sending any chunks");return ce(this,ks,void 0),ce(this,vl,[]),yre(n,F(this,Ii,"f"))},Y_=function(){var r;const n=(r=F(this,Ii,"f"))==null?void 0:r.response_format;return oI(n)?n:null},G1=function(n){var r,i,s,o;let a=F(this,ks,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=ce(this,ks,{...u,choices:[]});for(const{delta:c,finish_reason:d,index:f,logprobs:p=null,...g}of n.choices){let E=a.choices[f];if(E||(E=a.choices[f]={finish_reason:d,index:f,message:{},logprobs:p,...g}),p)if(!E.logprobs)E.logprobs=Object.assign({},p);else{const{content:k,refusal:T,...v}=p;Object.assign(E.logprobs,v),k&&((r=E.logprobs).content??(r.content=[]),E.logprobs.content.push(...k)),T&&((i=E.logprobs).refusal??(i.refusal=[]),E.logprobs.refusal.push(...T))}if(d&&(E.finish_reason=d,F(this,Ii,"f")&&vB(F(this,Ii,"f")))){if(d==="length")throw new ZF;if(d==="content_filter")throw new eB}if(Object.assign(E,g),!c)continue;const{content:b,refusal:S,function_call:y,role:w,tool_calls:x,...O}=c;if(Object.assign(E.message,O),S&&(E.message.refusal=(E.message.refusal||"")+S),w&&(E.message.role=w),y&&(E.message.function_call?(y.name&&(E.message.function_call.name=y.name),y.arguments&&((s=E.message.function_call).arguments??(s.arguments=""),E.message.function_call.arguments+=y.arguments)):E.message.function_call=y),b&&(E.message.content=(E.message.content||"")+b,!E.message.refusal&&F(this,bt,"m",Y_).call(this)&&(E.message.parsed=q1(E.message.content))),x){E.message.tool_calls||(E.message.tool_calls=[]);for(const{index:k,id:T,type:v,function:R,...C}of x){const A=(o=E.message.tool_calls)[k]??(o[k]={});Object.assign(A,C),T&&(A.id=T),v&&(A.type=v),R&&(A.function??(A.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(A.function.name=R.name),R!=null&&R.arguments&&(A.function.arguments+=R.arguments,lre(F(this,Ii,"f"),A)&&(A.function.parsed_arguments=q1(A.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new oi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function yre(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:f,...p})=>{if(!c)throw new oe(`missing finish_reason for choice ${d}`);const{content:g=null,function_call:E,tool_calls:b,...S}=u,y=u.role;if(!y)throw new oe(`missing role for choice ${d}`);if(E){const{arguments:w,name:x}=E;if(w==null)throw new oe(`missing function_call.arguments for choice ${d}`);if(!x)throw new oe(`missing function_call.name for choice ${d}`);return{...p,message:{content:g,function_call:{arguments:w,name:x},role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}return b?{...p,index:d,finish_reason:c,logprobs:f,message:{...S,role:y,content:g,refusal:u.refusal??null,tool_calls:b.map((w,x)=>{const{function:O,type:k,id:T,...v}=w,{arguments:R,name:C,...A}=O||{};if(T==null)throw new oe(`missing choices[${d}].tool_calls[${x}].id
${Ip(t)}`);if(k==null)throw new oe(`missing choices[${d}].tool_calls[${x}].type
${Ip(t)}`);if(C==null)throw new oe(`missing choices[${d}].tool_calls[${x}].function.name
${Ip(t)}`);if(R==null)throw new oe(`missing choices[${d}].tool_calls[${x}].function.arguments
${Ip(t)}`);return{...v,id:T,type:k,function:{...A,name:C,arguments:R}}})}}:{...p,message:{...S,content:g,role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return sre(l,e)}function Ip(t){return JSON.stringify(t)}class Kg extends Ld{static fromReadableStream(e){const n=new Kg(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new Kg(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let cI=class extends se{constructor(){super(...arguments),this.messages=new yB(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(z`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(z`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Et,{query:e,...n})}delete(e,n){return this._client.delete(z`/chat/completions/${e}`,n)}parse(e,n){return ure(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>aI(r,e))}runTools(e,n){return e.stream?Kg.runTools(this._client,e,n):uI.runTools(this._client,e,n)}stream(e,n){return Ld.createChatCompletion(this._client,e,n)}};cI.Messages=yB;class hI extends se{constructor(){super(...arguments),this.completions=new cI(this._client)}}hI.Completions=cI;const FB=Symbol("brand.privateNullableHeaders");function*vre(t){if(!t)return;if(FB in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():D1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=D1(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const te=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of vre(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[FB]:!0,values:e,nulls:n}};class BB extends se{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:te([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class jB extends se{create(e,n){return this._client.post("/audio/transcriptions",ja({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class $B extends se{create(e,n){return this._client.post("/audio/translations",ja({body:e,...n,__metadata:{model:e.model}},this._client))}}class ff extends se{constructor(){super(...arguments),this.transcriptions=new jB(this._client),this.translations=new $B(this._client),this.speech=new BB(this._client)}}ff.Transcriptions=jB;ff.Translations=$B;ff.Speech=BB;class UB extends se{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(z`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Et,{query:e,...n})}cancel(e,n){return this._client.post(z`/batches/${e}/cancel`,n)}}class zB extends se{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/assistants/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Et,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let WB=class extends se{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class HB extends se{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let rv=class extends se{constructor(){super(...arguments),this.sessions=new WB(this._client),this.transcriptionSessions=new HB(this._client)}};rv.Sessions=WB;rv.TranscriptionSessions=HB;class KB extends se{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(z`/chatkit/sessions/${e}/cancel`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let qB=class extends se{retrieve(e,n){return this._client.get(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",jg,{query:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(z`/chatkit/threads/${e}/items`,jg,{query:n,...r,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class iv extends se{constructor(){super(...arguments),this.sessions=new KB(this._client),this.threads=new qB(this._client)}}iv.Sessions=KB;iv.Threads=qB;class GB extends se{create(e,n,r){return this._client.post(z`/threads/${e}/messages`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/messages/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/messages`,Et,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class QB extends se{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(z`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(z`/threads/${i}/runs/${e}/steps`,Et,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const _re=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var J_={};const _l=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=J_==null?void 0:J_[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var Ht,fa,j0,Yr,vm,Cr,pa,Ql,ra,qg,Fn,_m,wm,Uh,dh,fh,Q1,X1,Y1,J1,Z1,ek,tk;class zh extends lI{constructor(){super(...arguments),Ht.add(this),j0.set(this,[]),Yr.set(this,{}),vm.set(this,{}),Cr.set(this,void 0),pa.set(this,void 0),Ql.set(this,void 0),ra.set(this,void 0),qg.set(this,void 0),Fn.set(this,void 0),_m.set(this,void 0),wm.set(this,void 0),Uh.set(this,void 0)}[(j0=new WeakMap,Yr=new WeakMap,vm=new WeakMap,Cr=new WeakMap,pa=new WeakMap,Ql=new WeakMap,ra=new WeakMap,qg=new WeakMap,Fn=new WeakMap,_m=new WeakMap,wm=new WeakMap,Uh=new WeakMap,Ht=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new fa;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=oi.fromReadableStream(e,this.controller);for await(const o of i)F(this,Ht,"m",dh).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new lr;return this._addRun(F(this,Ht,"m",fh).call(this))}toReadableStream(){return new oi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new fa;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,Ht,"m",dh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new lr;return this._addRun(F(this,Ht,"m",fh).call(this))}static createThreadAssistantStream(e,n,r){const i=new fa;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new fa;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return F(this,_m,"f")}currentRun(){return F(this,wm,"f")}currentMessageSnapshot(){return F(this,Cr,"f")}currentRunStepSnapshot(){return F(this,Uh,"f")}async finalRunSteps(){return await this.done(),Object.values(F(this,Yr,"f"))}async finalMessages(){return await this.done(),Object.values(F(this,vm,"f"))}async finalRun(){if(await this.done(),!F(this,pa,"f"))throw Error("Final run was not received.");return F(this,pa,"f")}async _createThreadAssistantStream(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of o)F(this,Ht,"m",dh).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new lr;return this._addRun(F(this,Ht,"m",fh).call(this))}async _createAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,Ht,"m",dh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new lr;return this._addRun(F(this,Ht,"m",fh).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(W_(s)&&W_(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!W_(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];l==null?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}fa=zh,dh=function(e){if(!this.ended)switch(ce(this,_m,e),F(this,Ht,"m",Y1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":F(this,Ht,"m",tk).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":F(this,Ht,"m",X1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":F(this,Ht,"m",Q1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},fh=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");if(!F(this,pa,"f"))throw Error("Final run has not been received");return F(this,pa,"f")},Q1=function(e){const[n,r]=F(this,Ht,"m",Z1).call(this,e,F(this,Cr,"f"));ce(this,Cr,n),F(this,vm,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=F(this,Ql,"f")){if(F(this,ra,"f"))switch(F(this,ra,"f").type){case"text":this._emit("textDone",F(this,ra,"f").text,F(this,Cr,"f"));break;case"image_file":this._emit("imageFileDone",F(this,ra,"f").image_file,F(this,Cr,"f"));break}ce(this,Ql,i.index)}ce(this,ra,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(F(this,Ql,"f")!==void 0){const i=e.data.content[F(this,Ql,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,F(this,Cr,"f"));break;case"text":this._emit("textDone",i.text,F(this,Cr,"f"));break}}F(this,Cr,"f")&&this._emit("messageDone",e.data),ce(this,Cr,void 0)}},X1=function(e){const n=F(this,Ht,"m",J1).call(this,e);switch(ce(this,Uh,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==F(this,qg,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(F(this,Fn,"f")&&this._emit("toolCallDone",F(this,Fn,"f")),ce(this,qg,s.index),ce(this,Fn,n.step_details.tool_calls[s.index]),F(this,Fn,"f")&&this._emit("toolCallCreated",F(this,Fn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,Uh,void 0),e.data.step_details.type=="tool_calls"&&F(this,Fn,"f")&&(this._emit("toolCallDone",F(this,Fn,"f")),ce(this,Fn,void 0)),this._emit("runStepDone",e.data,n);break}},Y1=function(e){F(this,j0,"f").push(e),this._emit("event",e)},J1=function(e){switch(e.event){case"thread.run.step.created":return F(this,Yr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=F(this,Yr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=fa.accumulateDelta(n,r.delta);F(this,Yr,"f")[e.data.id]=i}return F(this,Yr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":F(this,Yr,"f")[e.data.id]=e.data;break}if(F(this,Yr,"f")[e.data.id])return F(this,Yr,"f")[e.data.id];throw new Error("No snapshot available")},Z1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=F(this,Ht,"m",ek).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ek=function(e,n){return fa.accumulateDelta(n,e)},tk=function(e){switch(ce(this,wm,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ce(this,pa,e.data),F(this,Fn,"f")&&(this._emit("toolCallDone",F(this,Fn,"f")),ce(this,Fn,void 0));break}};let dI=class extends se{constructor(){super(...arguments),this.steps=new QB(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/runs/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/runs`,Et,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(z`/threads/${i}/runs/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return zh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await hf(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return zh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return zh.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};dI.Steps=QB;class sv extends se{constructor(){super(...arguments),this.runs=new dI(this._client),this.messages=new GB(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/threads/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return zh.createThreadAssistantStream(e,this._client.beta.threads,n)}}sv.Runs=dI;sv.Messages=GB;class sc extends se{constructor(){super(...arguments),this.realtime=new rv(this._client),this.chatkit=new iv(this._client),this.assistants=new zB(this._client),this.threads=new sv(this._client)}}sc.Realtime=rv;sc.ChatKit=iv;sc.Assistants=zB;sc.Threads=sv;class XB extends se{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class YB extends se{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}/content`,{...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let fI=class extends se{constructor(){super(...arguments),this.content=new YB(this._client)}create(e,n,r){return this._client.post(z`/containers/${e}/files`,ja({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/containers/${e}/files`,Et,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(z`/containers/${i}/files/${e}`,{...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}};fI.Content=YB;class pI extends se{constructor(){super(...arguments),this.files=new fI(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(z`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Et,{query:e,...n})}delete(e,n){return this._client.delete(z`/containers/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}}pI.Files=fI;class JB extends se{create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(z`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(z`/conversations/${e}/items`,jg,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(z`/conversations/${i}/items/${e}`,r)}}class mI extends se{constructor(){super(...arguments),this.items=new JB(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(z`/conversations/${e}`,n)}update(e,n,r){return this._client.post(z`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(z`/conversations/${e}`,n)}}mI.Items=JB;class ZB extends se{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Wt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Wt(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=_re(l)}),o)))}}class ej extends se{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(z`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(z`/evals/${i}/runs/${e}/output_items`,Et,{query:s,...r})}}class gI extends se{constructor(){super(...arguments),this.outputItems=new ej(this._client)}create(e,n,r){return this._client.post(z`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(z`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/evals/${e}/runs`,Et,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(z`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(z`/evals/${i}/runs/${e}`,r)}}gI.OutputItems=ej;class yI extends se{constructor(){super(...arguments),this.runs=new gI(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(z`/evals/${e}`,n)}update(e,n,r){return this._client.post(z`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Et,{query:e,...n})}delete(e,n){return this._client.delete(z`/evals/${e}`,n)}}yI.Runs=gI;let tj=class extends se{create(e,n){return this._client.post("/files",ja({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Et,{query:e,...n})}delete(e,n){return this._client.delete(z`/files/${e}`,n)}content(e,n){return this._client.get(z`/files/${e}/content`,{...n,headers:te([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await hf(n),o=await this.retrieve(e),Date.now()-s>r)throw new nI({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class nj extends se{}let rj=class extends se{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class vI extends se{constructor(){super(...arguments),this.graders=new rj(this._client)}}vI.Graders=rj;class ij extends se{create(e,n,r){return this._client.getAPIList(z`/fine_tuning/checkpoints/${e}/permissions`,nv,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(z`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(z`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let _I=class extends se{constructor(){super(...arguments),this.permissions=new ij(this._client)}};_I.Permissions=ij;class sj extends se{list(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/checkpoints`,Et,{query:n,...r})}}class wI extends se{constructor(){super(...arguments),this.checkpoints=new sj(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(z`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Et,{query:e,...n})}cancel(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/events`,Et,{query:n,...r})}pause(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/resume`,n)}}wI.Checkpoints=sj;class oc extends se{constructor(){super(...arguments),this.methods=new nj(this._client),this.jobs=new wI(this._client),this.checkpoints=new _I(this._client),this.alpha=new vI(this._client)}}oc.Methods=nj;oc.Jobs=wI;oc.Checkpoints=_I;oc.Alpha=vI;class oj extends se{}class SI extends se{constructor(){super(...arguments),this.graderModels=new oj(this._client)}}SI.GraderModels=oj;class aj extends se{createVariation(e,n){return this._client.post("/images/variations",ja({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ja({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class lj extends se{retrieve(e,n){return this._client.get(z`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",nv,e)}delete(e,n){return this._client.delete(z`/models/${e}`,n)}}class uj extends se{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class cj extends se{accept(e,n,r){return this._client.post(z`/realtime/calls/${e}/accept`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(z`/realtime/calls/${e}/hangup`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(z`/realtime/calls/${e}/refer`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(z`/realtime/calls/${e}/reject`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}}class hj extends se{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class ov extends se{constructor(){super(...arguments),this.clientSecrets=new hj(this._client),this.calls=new cj(this._client)}}ov.ClientSecrets=hj;ov.Calls=cj;function wre(t,e){return!e||!Ere(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:dj(t,e)}function dj(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Ire(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:Sre(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||$0(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function Sre(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function Ere(t){var e;return!!oI((e=t.text)==null?void 0:e.format)}function Tre(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function bre(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Ire(t,e){const n=bre(t.tools??[],e.name);return{...e,...e,parsed_arguments:Tre(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function $0(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var wl,Rp,Ds,Cp,nk,rk,ik,sk;class EI extends lI{constructor(e){super(),wl.add(this),Rp.set(this,void 0),Ds.set(this,void 0),Cp.set(this,void 0),ce(this,Rp,e)}static createResponse(e,n,r){const i=new EI(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,wl,"m",nk).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of s)F(this,wl,"m",rk).call(this,l,o);if((a=s.controller.signal)!=null&&a.aborted)throw new lr;return F(this,wl,"m",ik).call(this)}[(Rp=new WeakMap,Ds=new WeakMap,Cp=new WeakMap,wl=new WeakSet,nk=function(){this.ended||ce(this,Ds,void 0)},rk=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=F(this,wl,"m",sk).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new oe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},ik=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,Ds,"f");if(!n)throw new oe("request ended without sending any events");ce(this,Ds,void 0);const r=Rre(n,F(this,Rp,"f"));return ce(this,Cp,r),r},sk=function(n){var i;let r=F(this,Ds,"f");if(!r){if(n.type!=="response.created")throw new oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ce(this,Ds,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);const o=s.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?s.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const o=(i=s.content)==null?void 0:i[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new oe(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{ce(this,Ds,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=F(this,Cp,"f");if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}}function Rre(t,e){return wre(t,e)}class fj extends se{list(e,n={},r){return this._client.getAPIList(z`/responses/${e}/input_items`,Et,{query:n,...r})}}class pj extends se{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class av extends se{constructor(){super(...arguments),this.inputItems=new fj(this._client),this.inputTokens=new pj(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&$0(r),r))}retrieve(e,n={},r){return this._client.get(z`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&$0(i),i))}delete(e,n){return this._client.delete(z`/responses/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>dj(r,e))}stream(e,n){return EI.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(z`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}av.InputItems=fj;av.InputTokens=pj;class mj extends se{create(e,n,r){return this._client.post(z`/uploads/${e}/parts`,ja({body:n,...r},this._client))}}class TI extends se{constructor(){super(...arguments),this.parts=new mj(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(z`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(z`/uploads/${e}/complete`,{body:n,...r})}}TI.Parts=mj;const Cre=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class gj extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/file_batches`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/file_batches/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(z`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(z`/vector_stores/${i}/file_batches/${e}/files`,Et,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await hf(l);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(s,n.length),a=this._client,l=n.values(),u=[...r];async function c(f){for(let p of f){const g=await a.files.create({file:p,purpose:"assistants"},i);u.push(g.id)}}const d=Array(o).fill(l).map(c);return await Cre(d),await this.createAndPoll(e,{file_ids:u})}}class yj extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/files`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(z`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/vector_stores/${e}/files`,Et,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),a=o.data;switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await hf(l);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(z`/vector_stores/${i}/files/${e}/content`,nv,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class lv extends se{constructor(){super(...arguments),this.files=new yj(this._client),this.fileBatches=new gj(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/vector_stores/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Et,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(z`/vector_stores/${e}/search`,nv,{body:n,method:"post",...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}lv.Files=yj;lv.FileBatches=gj;class vj extends se{create(e,n){return this._client.post("/videos",W1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",jg,{query:e,...n})}delete(e,n){return this._client.delete(z`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(z`/videos/${e}/content`,{query:n,...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(z`/videos/${e}/remix`,W1({body:n,...r},this._client))}}var Al,_j,Sm;class wj extends se{constructor(){super(...arguments),Al.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");F(this,Al,"m",_j).call(this,r);const s=te([n]).values,o=F(this,Al,"m",Sm).call(this,s,"webhook-signature"),a=F(this,Al,"m",Sm).call(this,s,"webhook-timestamp"),l=F(this,Al,"m",Sm).call(this,s,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new sh("Invalid webhook timestamp format");const c=Math.floor(Date.now()/1e3);if(c-u>i)throw new sh("Webhook timestamp is too old");if(u>c+i)throw new sh("Webhook timestamp is too new");const d=o.split(" ").map(E=>E.startsWith("v1,")?E.substring(3):E),f=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),p=l?`${l}.${a}.${e}`:`${a}.${e}`,g=await crypto.subtle.importKey("raw",f,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const E of d)try{const b=Buffer.from(E,"base64");if(await crypto.subtle.verify("HMAC",g,b,new TextEncoder().encode(p)))return}catch{continue}throw new sh("The given webhook signature does not match the expected signature")}}Al=new WeakSet,_j=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Sm=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var U0,bI,Em,Sj;class ve{constructor({baseURL:e=_l("OPENAI_BASE_URL"),apiKey:n=_l("OPENAI_API_KEY"),organization:r=_l("OPENAI_ORG_ID")??null,project:i=_l("OPENAI_PROJECT_ID")??null,webhookSecret:s=_l("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(U0.add(this),Em.set(this,void 0),this.completions=new XB(this),this.chat=new hI(this),this.embeddings=new ZB(this),this.files=new tj(this),this.images=new aj(this),this.audio=new ff(this),this.moderations=new uj(this),this.models=new lj(this),this.fineTuning=new oc(this),this.graders=new SI(this),this.vectorStores=new lv(this),this.webhooks=new wj(this),this.beta=new sc(this),this.batches=new UB(this),this.uploads=new TI(this),this.responses=new av(this),this.realtime=new ov(this),this.conversations=new mI(this),this.evals=new yI(this),this.containers=new pI(this),this.videos=new vj(this),n===void 0)throw new oe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Ane())throw new oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??bI.DEFAULT_TIMEOUT,this.logger=a.logger??console;const l="warn";this.logLevel=l,this.logLevel=U1(a.logLevel,"ClientOptions.logLevel",this)??U1(_l("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Mne(),ce(this,Em,Nne),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return te([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Une(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Cl}`}defaultIdempotencyKey(){return`stainless-node-retry-${WF()}`}makeStatusError(e,n,r,i){return Qt.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof oe?r:new oe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new oe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!F(this,U0,"m",Sj).call(this)&&r||this.baseURL,s=bne(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Ine(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new tv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var S,y;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:l}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Wt(this).debug(`[${u}] sending request`,Jo({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),(S=i.signal)!=null&&S.aborted)throw new lr;const f=new AbortController,p=await this.fetchWithTimeout(a,o,l,f).catch(P0),g=Date.now();if(p instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if((y=i.signal)!=null&&y.aborted)throw new lr;const x=A0(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return Wt(this).info(`[${u}] connection ${x?"timed out":"failed"} - ${w}`),Wt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (${w})`,Jo({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),this.retryRequest(i,n,r??u);throw Wt(this).info(`[${u}] connection ${x?"timed out":"failed"} - error; no more retries left`),Wt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (error; no more retries left)`,Jo({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),x?new nI:new Zy({cause:p})}const E=[...p.headers.entries()].filter(([w])=>w==="x-request-id").map(([w,x])=>", "+w+": "+JSON.stringify(x)).join(""),b=`[${u}${c}${E}] ${o.method} ${a} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${g-d}ms`;if(!p.ok){const w=await this.shouldRetry(p);if(n&&w){const R=`retrying, ${n} attempts remaining`;return await Lne(p.body),Wt(this).info(`${b} - ${R}`),Wt(this).debug(`[${u}] response error (${R})`,Jo({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),this.retryRequest(i,n,r??u,p.headers)}const x=w?"error; no more retries left":"error; not retryable";Wt(this).info(`${b} - ${x}`);const O=await p.text().catch(R=>P0(R).message),k=xne(O),T=k?void 0:O;throw Wt(this).debug(`[${u}] response error (${x})`,Jo({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:T,durationMs:Date.now()-d})),this.makeStatusError(p.status,k,T,p.headers)}return Wt(this).info(b),Wt(this).debug(`[${u}] response start`,Jo({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),{response:p,options:i,controller:f,requestLogID:u,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Yne(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,c={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...a};o&&(c.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i==null?void 0:i.get("retry-after-ms");if(o){const l=parseFloat(o);Number.isNaN(l)||(s=l)}const a=i==null?void 0:i.get("retry-after");if(a&&!s){const l=parseFloat(a);Number.isNaN(l)?s=Date.parse(a)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,l)}return await hf(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,l=this.buildURL(s,o,a);"timeout"in r&&Cne("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:c}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=te([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...One(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=te([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:rB(e)}:F(this,Em,"f").call(this,{body:e,headers:r})}}bI=ve,Em=new WeakMap,U0=new WeakSet,Sj=function(){return this.baseURL!=="https://api.openai.com/v1"};ve.OpenAI=bI;ve.DEFAULT_TIMEOUT=6e5;ve.OpenAIError=oe;ve.APIError=Qt;ve.APIConnectionError=Zy;ve.APIConnectionTimeoutError=nI;ve.APIUserAbortError=lr;ve.NotFoundError=GF;ve.ConflictError=QF;ve.RateLimitError=YF;ve.BadRequestError=HF;ve.AuthenticationError=KF;ve.InternalServerError=JF;ve.PermissionDeniedError=qF;ve.UnprocessableEntityError=XF;ve.InvalidWebhookSignatureError=sh;ve.toFile=nre;ve.Completions=XB;ve.Chat=hI;ve.Embeddings=ZB;ve.Files=tj;ve.Images=aj;ve.Audio=ff;ve.Moderations=uj;ve.Models=lj;ve.FineTuning=oc;ve.Graders=SI;ve.VectorStores=lv;ve.Webhooks=wj;ve.Beta=sc;ve.Batches=UB;ve.Uploads=TI;ve.Responses=av;ve.Realtime=ov;ve.Conversations=mI;ve.Evals=yI;ve.Containers=pI;ve.Videos=vj;const xre=()=>localStorage.getItem("openai_api_key"),Ej=()=>{const t=xre();if(!t)throw new Error("OpenAI API Key not found. Please add it in the Account settings.");return new ve({apiKey:t,dangerouslyAllowBrowser:!0})};async function Are(t){try{const n=await Ej().chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"Analyze this clothing item. Return a JSON object with the following fields: 'type' (e.g., shirt, pants, dress), 'color' (primary color), 'style' (e.g., casual, formal, sporty), 'tags' (array of 3-5 descriptive keywords), and 'refreshCycle' (suggested number of days before re-wearing, e.g., 1 for underwear, 7 for shirts, 14 for pants)."},{type:"image_url",image_url:{url:t}}]}],response_format:{type:"json_object"}});return JSON.parse(n.choices[0].message.content)}catch(e){return console.error("Error analyzing image:",e),{type:"unknown",color:"unknown",style:"unknown",tags:["manual-entry"],refreshCycle:7}}}async function Tj(t,e){try{const n=t.map(a=>({id:a.id,type:a.type,color:a.color,tags:a.tags,style:a.style,rating:a.rating||3,wearCount:a.wearCount||0})),r=`
      I need 3 outfit suggestions from the following wardrobe items:
      ${JSON.stringify(n)}

      Criteria:
      - Destination: ${e.destination}
      - Temperature: ${e.temperature}
      - Style Preference: ${e.style}

      Rules:
      1. Prioritize items with higher 'rating'.
      2. Consider 'wearCount' - if an item has a high rating but low wear count, suggest it more.
      3. Ensure the outfits are appropriate for the temperature and destination.

      Please select 3 distinct outfits. For each outfit, provide:
      1. A short summary explaining why it fits the criteria.
      2. The list of item IDs used in the outfit.
      
      Return the result as a JSON object with a key "outfits" containing an array of the 3 suggestions.
    `,s=await Ej().chat.completions.create({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful fashion stylist assistant."},{role:"user",content:r}],response_format:{type:"json_object"}});return JSON.parse(s.choices[0].message.content).outfits}catch(n){return console.error("Error generating outfits:",n),[]}}const ok=(t,e=200,n=200)=>new Promise(r=>{let i=new Image;i.src=t,i.onload=()=>{let s=document.createElement("canvas"),o=i.width,a=i.height;o>a?o>e&&(a*=e/o,o=e):a>n&&(o*=n/a,a=n),s.width=o,s.height=a,s.getContext("2d").drawImage(i,0,0,o,a),r(s.toDataURL("image/jpeg",.4))}});function Pre(){const[t,e]=I.useState(null),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(null),l=I.useRef(null),{addItem:u}=Jy(),c=Wu(),d=yi();I.useEffect(()=>{var b;(b=d.state)!=null&&b.image&&(async()=>{const y=await ok(d.state.image);e(y),p(y)})()},[]);const f=b=>{const S=b.target.files[0];if(S){const y=new FileReader;y.onloadend=async()=>{const w=await ok(y.result);e(w),p(w)},y.readAsDataURL(S)}},p=async b=>{r(!0);try{const S=await Are(b);a(S)}catch(S){console.error("Analysis failed",S),alert("Failed to analyze image. Please try again.")}finally{r(!1)}},g=async()=>{if(t&&o&&!i){s(!0);const S=t.length*3/4/1024;console.log(`Attempting to save image. Size: ${S.toFixed(2)} KB`);try{const y=u({imageUri:t,...o,lastWorn:null}),w=new Promise(O=>setTimeout(()=>O("timeout"),1e4));await Promise.race([y,w])==="timeout"&&(console.log("Save timed out, assuming offline persistence handled it."),alert("Item saved to device! It will sync when online.")),c("/closet")}catch(y){console.error("Failed to save item:",y),alert(`Failed to save item: ${y.message}.`),s(!1)}}},E=()=>{e(null),a(null),l.current&&l.current.click()};return M.jsxs(kr,{style:{flex:1},contentContainerStyle:Me.container,children:[M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:l,style:{display:"none"},onChange:f}),M.jsx(G,{style:Me.title,children:"Add New Item"}),t?M.jsxs(Q,{style:Me.previewContainer,children:[M.jsx(Nr,{source:{uri:t},style:Me.previewImage}),n?M.jsxs(Q,{style:Me.loadingContainer,children:[M.jsx(Ud,{size:"large",color:"#007AFF"}),M.jsx(G,{style:Me.loadingText,children:"Analyzing your item..."})]}):o?M.jsxs(Q,{style:Me.formContainer,children:[M.jsxs(Q,{style:Me.rowContainer,children:[M.jsxs(Q,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Type"}),M.jsx(Hn,{style:Me.compactInput,value:o.type,onChangeText:b=>a({...o,type:b})})]}),M.jsxs(Q,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Color"}),M.jsx(Hn,{style:Me.compactInput,value:o.color,onChangeText:b=>a({...o,color:b})})]}),M.jsxs(Q,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Style"}),M.jsx(Hn,{style:Me.compactInput,value:o.style,onChangeText:b=>a({...o,style:b})})]})]}),M.jsx(G,{style:Me.label,children:"Tags"}),M.jsx(Q,{style:Me.tagsContainer,children:o.tags.map((b,S)=>M.jsx(Q,{style:Me.tagBadge,children:M.jsx(G,{style:Me.tagText,children:b})},S))}),M.jsxs(Q,{style:Me.buttonGroup,children:[M.jsx(Ce,{style:[Me.button,Me.secondaryButton],onPress:E,children:M.jsx(G,{style:Me.secondaryButtonText,children:"Retake"})}),M.jsx(Ce,{style:Me.button,onPress:g,disabled:i,children:M.jsx(G,{style:Me.buttonText,children:i?"Saving...":"Save to Closet"})})]})]}):null]}):M.jsx(Q,{style:Me.uploadContainer,children:M.jsx(Ce,{style:Me.button,onPress:()=>l.current.click(),children:M.jsx(G,{style:Me.buttonText,children:"Take Photo / Upload"})})})]})}const Me=De.create({container:{flexGrow:1,padding:20,alignItems:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:20},uploadContainer:{flex:1,justifyContent:"center",alignItems:"center",width:"100%"},previewContainer:{width:"100%",alignItems:"center"},previewImage:{width:300,height:300,borderRadius:10,marginBottom:20},loadingContainer:{alignItems:"center"},loadingText:{marginTop:10,color:"#666"},formContainer:{width:"100%"},rowContainer:{flexDirection:"row",justifyContent:"space-between",marginBottom:15},inputGroup:{width:"30%"},label:{fontWeight:"600",fontSize:12,color:"#666",marginBottom:4,textTransform:"uppercase"},compactInput:{borderWidth:1,borderColor:"#eee",padding:8,borderRadius:8,backgroundColor:"#f9f9f9",fontSize:14},tagsContainer:{flexDirection:"row",flexWrap:"wrap",marginBottom:20,marginTop:5},tagBadge:{backgroundColor:"#f0f0f0",paddingHorizontal:10,paddingVertical:5,borderRadius:15,marginRight:8,marginBottom:8},tagText:{fontSize:12,color:"#333"},buttonGroup:{flexDirection:"row",justifyContent:"space-between",marginTop:20},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",flex:1,marginHorizontal:5},buttonText:{color:"#fff",fontWeight:"bold"},secondaryButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#007AFF"},secondaryButtonText:{color:"#007AFF",fontWeight:"bold"}});function kre(){const{items:t,isItemAvailable:e,addToSchedule:n}=Jy(),r=Wu(),[i,s]=I.useState(""),[o,a]=I.useState(""),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState([]),[g,E]=I.useState(null),[b,S]=I.useState(!1),[y,w]=I.useState(new Date().toISOString().split("T")[0]),x=async()=>{if(!i||!o||!l){alert("Please fill in all fields");return}d(!0);const v=t.filter(e);try{const R=await Tj(v,{destination:i,temperature:o,style:l});p(R)}catch(R){console.error("Failed to generate outfits",R),alert("Failed to generate suggestions. Please try again.")}finally{d(!1)}},O=v=>{E(v),S(!0)},k=()=>{g&&y&&(n(y,g.items),S(!1),E(null),alert("Outfit scheduled!"),r("/schedule"))},T=v=>t.find(R=>R.id===v);return M.jsxs(kr,{contentContainerStyle:Pe.container,children:[M.jsx(G,{style:Pe.title,children:"Virtual Dressing Room"}),M.jsxs(Q,{style:Pe.form,children:[M.jsx(G,{style:Pe.label,children:"Destination / Occasion"}),M.jsx(Hn,{style:Pe.input,placeholder:"e.g. Work, Date Night, Gym",value:i,onChangeText:s}),M.jsx(G,{style:Pe.label,children:"Temperature"}),M.jsx(Hn,{style:Pe.input,placeholder:"e.g. 75F, Cold, Rainy",value:o,onChangeText:a}),M.jsx(G,{style:Pe.label,children:"Style Preference"}),M.jsx(Hn,{style:Pe.input,placeholder:"e.g. Casual, Chic, Edgy",value:l,onChangeText:u}),M.jsx(Ce,{style:[Pe.button,c&&Pe.disabledButton],onPress:x,disabled:c,children:c?M.jsx(Ud,{color:"#fff"}):M.jsx(G,{style:Pe.buttonText,children:"Generate Outfits"})})]}),f.length>0&&M.jsxs(Q,{style:Pe.results,children:[M.jsx(G,{style:Pe.subtitle,children:"Suggestions"}),f.map((v,R)=>M.jsxs(Q,{style:Pe.outfitCard,children:[M.jsx(G,{style:Pe.outfitSummary,children:v.summary}),M.jsx(kr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Pe.itemsRow,children:v.items.map(C=>{const A=T(C);return A?M.jsxs(Q,{style:Pe.itemPreview,children:[M.jsx(Nr,{source:{uri:A.imageUri},style:Pe.itemImage}),M.jsx(G,{style:Pe.itemType,children:A.type})]},C):null})}),M.jsx(Ce,{style:Pe.scheduleButton,onPress:()=>O(v),children:M.jsx(G,{style:Pe.scheduleButtonText,children:"Schedule This Outfit"})})]},R))]}),M.jsx(hd,{visible:b,transparent:!0,animationType:"slide",children:M.jsx(Q,{style:Pe.modalContainer,children:M.jsxs(Q,{style:Pe.modalContent,children:[M.jsx(G,{style:Pe.modalTitle,children:"Select Date"}),M.jsx("input",{type:"date",value:y,onChange:v=>w(v.target.value),style:Pe.dateInput}),M.jsxs(Q,{style:Pe.modalButtons,children:[M.jsx(Ce,{style:[Pe.button,Pe.cancelButton],onPress:()=>S(!1),children:M.jsx(G,{style:Pe.cancelButtonText,children:"Cancel"})}),M.jsx(Ce,{style:Pe.button,onPress:k,children:M.jsx(G,{style:Pe.buttonText,children:"Confirm"})})]})]})})})]})}const Pe=De.create({container:{flexGrow:1,padding:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},form:{backgroundColor:"#fff",padding:20,borderRadius:10,marginBottom:20,elevation:2},label:{fontWeight:"bold",marginBottom:5,color:"#333"},input:{borderWidth:1,borderColor:"#ddd",padding:10,borderRadius:5,marginBottom:15,backgroundColor:"#f9f9f9"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center"},disabledButton:{backgroundColor:"#99c9ff"},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},results:{marginTop:10,paddingBottom:40},subtitle:{fontSize:20,fontWeight:"bold",marginBottom:15},outfitCard:{backgroundColor:"#fff",padding:15,borderRadius:10,marginBottom:15,elevation:2},outfitSummary:{fontSize:16,marginBottom:10,lineHeight:22},itemsRow:{flexDirection:"row",marginTop:10,marginBottom:15},itemPreview:{marginRight:15,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:5,marginBottom:5},itemType:{fontSize:12,color:"#666",textTransform:"capitalize"},scheduleButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center"},scheduleButtonText:{color:"#fff",fontWeight:"bold"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"#fff",padding:20,borderRadius:10,width:"80%",alignItems:"center"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},dateInput:{padding:10,fontSize:16,marginBottom:20,width:"100%",border:"1px solid #ddd",borderRadius:5},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},cancelButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#ddd",marginRight:10},cancelButtonText:{color:"#333"}}),Z_=async(t,e)=>{try{const r=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&daily=temperature_2m_max,temperature_2m_min,weathercode&temperature_unit=fahrenheit&timezone=auto`)).json(),i={};return r.daily.time.forEach((s,o)=>{i[s]={max:Math.round(r.daily.temperature_2m_max[o]),min:Math.round(r.daily.temperature_2m_min[o]),code:r.daily.weathercode[o]}}),i}catch(n){return console.error("Error fetching weather:",n),null}},Dre=t=>({0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",95:"Thunderstorm"})[t]||"Variable";function Ore(){const{schedule:t,items:e,markAsWorn:n,addToSchedule:r,isItemAvailable:i}=Jy(),[s,o]=I.useState({}),[a,l]=I.useState(!1),[u,c]=I.useState(null),[d,f]=I.useState(!1),[p,g]=I.useState([]),[E,b]=I.useState({destination:"",style:"",temperature:""});I.useEffect(()=>{(async()=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async A=>{const L=await Z_(A.coords.latitude,A.coords.longitude);L&&o(L)},async()=>{const A=await Z_(40.7128,-74.006);A&&o(A)});else{const A=await Z_(40.7128,-74.006);A&&o(A)}})()},[]);const S=()=>{const v=[];for(let R=0;R<7;R++){const C=new Date;C.setDate(C.getDate()+R),v.push(C.toISOString().split("T")[0])}return v},y=v=>e.find(R=>R.id===v),w=(v,R)=>{confirm("Mark this outfit as worn? Items will be unavailable for their refresh cycle.")&&n(R,v)},x=v=>{c(v),g([]),b({destination:"",style:"",temperature:""}),l(!0)},O=async()=>{f(!0);try{const v=s[u],R=v?`${v.max}F / ${v.min}F`:"Unknown",C=e.filter(i),A=await Tj(C,{destination:E.destination,temperature:E.temperature||R,style:E.style});A&&A.outfits&&g(A.outfits)}catch(v){console.error("Generation failed",v),alert("Failed to generate outfits. Check your API key.")}finally{f(!1)}},k=v=>{r(u,v.itemIds),l(!1)},T=S();return M.jsxs(kr,{contentContainerStyle:Ie.container,children:[M.jsx(G,{style:Ie.title,children:"Outfit Schedule"}),T.map(v=>{const R=t[v],C=new Date(v),A=C.toLocaleDateString("en-US",{weekday:"long"}),L=C.toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=s[v];return M.jsxs(Q,{style:Ie.dayCard,children:[M.jsxs(Q,{style:Ie.dateHeader,children:[M.jsxs(Q,{children:[M.jsx(G,{style:Ie.dayName,children:A}),M.jsx(G,{style:Ie.dateText,children:L})]}),D&&M.jsxs(Q,{style:Ie.weatherContainer,children:[M.jsxs(G,{style:Ie.weatherTemp,children:[D.max," / ",D.min,""]}),M.jsx(G,{style:Ie.weatherDesc,children:Dre(D.code)})]})]}),R?M.jsxs(Q,{children:[M.jsx(kr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Ie.itemsRow,children:R.map(de=>{const fe=y(de);return fe?M.jsxs(Q,{style:Ie.itemPreview,children:[M.jsx(Nr,{source:{uri:fe.imageUri||fe.image},style:Ie.itemImage}),M.jsx(G,{style:Ie.itemType,children:fe.type})]},de):null})}),M.jsx(Ce,{style:Ie.wearButton,onPress:()=>w(v,R),children:M.jsx(G,{style:Ie.wearButtonText,children:"Wear This Outfit"})})]}):M.jsx(Ce,{style:Ie.generateButton,onPress:()=>x(v),children:M.jsx(G,{style:Ie.generateButtonText,children:"+ Generate Outfit"})})]},v)}),M.jsx(hd,{visible:a,animationType:"slide",onRequestClose:()=>l(!1),children:M.jsxs(Q,{style:Ie.modalContainer,children:[M.jsxs(G,{style:Ie.modalTitle,children:["Plan for ",u]}),M.jsxs(kr,{style:{flex:1},children:[M.jsxs(Q,{style:{marginBottom:20},children:[M.jsx(G,{style:Ie.label,children:"Destination / Occasion"}),M.jsx(Hn,{style:Ie.input,placeholder:"e.g. Work, Date Night, Gym",value:E.destination,onChangeText:v=>b(R=>({...R,destination:v}))}),M.jsx(G,{style:Ie.label,children:"Temperature"}),M.jsx(Hn,{style:Ie.input,placeholder:"e.g. 75F, Cold, Rainy (Leave blank to use forecast)",value:E.temperature,onChangeText:v=>b(R=>({...R,temperature:v}))}),M.jsx(G,{style:Ie.label,children:"Style Preference"}),M.jsx(Hn,{style:Ie.input,placeholder:"e.g. Casual, Chic, Edgy",value:E.style,onChangeText:v=>b(R=>({...R,style:v}))})]}),M.jsx(Ce,{style:[Ie.genButton,d&&{opacity:.7}],onPress:O,disabled:d,children:d?M.jsx(Ud,{color:"#fff"}):M.jsx(G,{style:Ie.genButtonText,children:"Generate Suggestions"})}),p.map((v,R)=>M.jsxs(Ce,{style:Ie.suggestionCard,onPress:()=>k(v),children:[M.jsx(G,{style:Ie.suggestionSummary,children:v.reason||v.summary}),M.jsx(kr,{horizontal:!0,children:v.itemIds.map(C=>{const A=y(C);return A?M.jsx(Nr,{source:{uri:A.imageUri||A.image},style:Ie.smallImage},C):null})}),M.jsx(Q,{style:Ie.selectButton,children:M.jsx(G,{style:Ie.selectButtonText,children:"Select This Outfit"})})]},R))]}),M.jsx(Ce,{style:Ie.closeButton,onPress:()=>l(!1),children:M.jsx(G,{style:Ie.closeButtonText,children:"Close"})})]})})]})}const Ie=De.create({container:{flexGrow:1,padding:20,paddingBottom:80},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},dayCard:{backgroundColor:"#fff",borderRadius:10,padding:15,marginBottom:15,elevation:2},dateHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},weatherContainer:{alignItems:"flex-end"},weatherTemp:{fontSize:16,fontWeight:"bold"},weatherDesc:{fontSize:12,color:"#666"},generateButton:{backgroundColor:"#f0f0f0",padding:15,borderRadius:8,alignItems:"center",borderWidth:1,borderColor:"#ddd",borderStyle:"dashed"},generateButtonText:{color:"#007AFF",fontSize:16},modalContainer:{flex:1,padding:20,backgroundColor:"#fff"},modalTitle:{fontSize:22,fontWeight:"bold",marginBottom:10,textAlign:"center"},modalWeather:{textAlign:"center",marginBottom:20,color:"#666"},genButton:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",marginBottom:10},genButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},suggestionCard:{borderWidth:1,borderColor:"#ddd",borderRadius:10,padding:15,marginBottom:20},suggestionSummary:{marginBottom:10,fontStyle:"italic"},smallImage:{width:60,height:60,borderRadius:5,marginRight:5},selectButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center",marginTop:10},selectButtonText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:15,alignItems:"center"},closeButtonText:{color:"red"},dayName:{fontSize:18,fontWeight:"bold"},dateText:{color:"#666"},itemsRow:{flexDirection:"row",marginBottom:10},itemPreview:{marginRight:10,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:8,marginBottom:5},itemType:{fontSize:12},wearButton:{backgroundColor:"#007AFF",padding:10,borderRadius:5,alignItems:"center"},wearButtonText:{color:"#fff",fontWeight:"bold"},emptyText:{textAlign:"center",color:"#999",fontStyle:"italic",padding:10}});function Mre(){const[t,e]=I.useState(""),[n,r]=I.useState(""),[i,s]=I.useState(!0),[o,a]=I.useState(!1),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState(""),g=async()=>{u(""),p(""),a(!0);try{c?(await lY(t),p("Check your email for password reset instructions."),d(!1)):i?await sY(t,n):await oY(t,n)}catch(E){u(E.message.replace("Firebase: ",""))}finally{a(!1)}};return M.jsxs(Q,{style:wn.container,children:[M.jsx(Nr,{source:{uri:"/pwa-192x192.png"},style:{width:100,height:100,marginBottom:20,alignSelf:"center"}}),M.jsxs(Q,{style:wn.card,children:[M.jsx(G,{style:wn.title,children:c?"Reset Password":i?"Pocket Stylist Login":"Create Account"}),l?M.jsx(G,{style:wn.error,children:l}):null,f?M.jsx(G,{style:wn.success,children:f}):null,M.jsx(Hn,{style:wn.input,placeholder:"Email",value:t,onChangeText:e,autoCapitalize:"none",keyboardType:"email-address"}),!c&&M.jsx(Hn,{style:wn.input,placeholder:"Password",value:n,onChangeText:r,secureTextEntry:!0}),M.jsx(Ce,{style:wn.button,onPress:g,disabled:o,children:o?M.jsx(Ud,{color:"#fff"}):M.jsx(G,{style:wn.buttonText,children:c?"Send Reset Email":i?"Log In":"Sign Up"})}),M.jsx(Q,{style:wn.footer,children:c?M.jsx(Ce,{onPress:()=>d(!1),children:M.jsx(G,{style:wn.link,children:"Back to Login"})}):M.jsxs(M.Fragment,{children:[M.jsx(Ce,{onPress:()=>s(!i),children:M.jsx(G,{style:wn.link,children:i?"Need an account? Sign Up":"Have an account? Log In"})}),M.jsx(Ce,{onPress:()=>d(!0),children:M.jsx(G,{style:[wn.link,wn.forgotLink],children:"Forgot Password?"})})]})})]})]})}const wn=De.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5",padding:20,height:"100vh"},card:{backgroundColor:"#fff",padding:30,borderRadius:15,width:"100%",maxWidth:400,elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center",color:"#333"},input:{backgroundColor:"#f9f9f9",padding:15,borderRadius:8,marginBottom:15,borderWidth:1,borderColor:"#eee"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:8,alignItems:"center",marginTop:10},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},error:{color:"red",marginBottom:15,textAlign:"center"},success:{color:"green",marginBottom:15,textAlign:"center"},footer:{marginTop:20,alignItems:"center"},link:{color:"#007AFF",marginTop:10},forgotLink:{color:"#666",fontSize:12}});function Lre({onNavigate:t}){const e=Wu(),n=yi(),r=s=>{t?t(s):e(s)},i=[{name:"Home",path:"/"},{name:"Closet",path:"/closet"},{name:"Style",path:"/outfits"},{name:"Plan",path:"/schedule"}];return M.jsx(Q,{style:Hc.navBar,children:i.map(s=>{const o=n.pathname===s.path;return M.jsx(Ce,{style:[Hc.tab,o&&Hc.activeTab],onPress:()=>r(s.path),children:M.jsx(G,{style:[Hc.tabText,o&&Hc.activeTabText],children:s.name})},s.name)})})}const Hc=De.create({navBar:{flexDirection:"row",justifyContent:"space-around",backgroundColor:ti.colors.background,borderTopWidth:1,borderTopColor:ti.colors.border,paddingBottom:20,paddingTop:10,position:"absolute",bottom:0,left:0,right:0},tab:{alignItems:"center",padding:10},activeTab:{borderBottomWidth:2,borderBottomColor:ti.colors.highlight},tabText:{fontSize:16,color:ti.colors.secondaryText},activeTabText:{color:ti.colors.highlight,fontWeight:"bold"}});function Nre({visible:t,onClose:e}){const n=tc.currentUser,[r,i]=I.useState("");I.useEffect(()=>{n&&fne(n.uid).then(a=>{if(a!=null&&a.openai_api_key)i(a.openai_api_key),localStorage.setItem("openai_api_key",a.openai_api_key);else{const l=localStorage.getItem("openai_api_key");l&&i(l)}})},[n,t]);const s=async()=>{n&&(await dne(n.uid,{openai_api_key:r}),localStorage.setItem("openai_api_key",r),alert("API Key saved to account!"))},o=async()=>{try{await aY(),e()}catch(a){console.error("Failed to log out",a)}};return M.jsx(hd,{visible:t,transparent:!0,animationType:"fade",onRequestClose:e,children:M.jsxs(Q,{style:Zt.overlay,children:[M.jsx(Ce,{style:De.absoluteFill,activeOpacity:1,onPress:e}),M.jsxs(Q,{style:Zt.modalContent,children:[M.jsx(G,{style:Zt.title,children:"Account"}),M.jsxs(Q,{style:Zt.info,children:[M.jsx(G,{style:Zt.label,children:"Email"}),M.jsx(G,{style:Zt.value,children:n==null?void 0:n.email})]}),M.jsxs(Q,{style:Zt.section,children:[M.jsx(G,{style:Zt.label,children:"OpenAI API Key"}),M.jsx("input",{type:"password",style:{width:"100%",padding:10,marginBottom:10,border:"1px solid #ddd",borderRadius:8,fontSize:16,boxSizing:"border-box"},placeholder:"sk-...",value:r,onChange:a=>i(a.target.value)}),M.jsx(Ce,{style:Zt.saveButton,onPress:s,children:M.jsx(G,{style:Zt.saveButtonText,children:"Save Key"})})]}),M.jsx(Ce,{style:Zt.refreshButton,onPress:()=>window.location.reload(),children:M.jsx(G,{style:Zt.refreshButtonText,children:"Refresh App"})}),M.jsx(Ce,{style:Zt.logoutButton,onPress:o,children:M.jsx(G,{style:Zt.logoutText,children:"Log Out"})}),M.jsx(Ce,{style:Zt.closeButton,onPress:e,children:M.jsx(G,{style:Zt.closeText,children:"Close"})})]})]})})}const Zt=De.create({overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",width:"80%",maxWidth:300,borderRadius:15,padding:20,alignItems:"center",elevation:5},title:{fontSize:20,fontWeight:"bold",marginBottom:20},info:{marginBottom:20,alignItems:"center"},section:{width:"100%",marginBottom:20},label:{color:"#666",fontSize:12,marginBottom:5},value:{fontSize:16,fontWeight:"500"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:10,marginBottom:10,width:"100%"},saveButton:{backgroundColor:"#007AFF",padding:10,borderRadius:8,alignItems:"center"},saveButtonText:{color:"#fff",fontWeight:"bold"},refreshButton:{backgroundColor:"#34C759",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},refreshButtonText:{color:"#fff",fontWeight:"bold"},logoutButton:{backgroundColor:"#FF3B30",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},logoutText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:10},closeText:{color:"#007AFF"}}),Vre={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:t=>({zIndex:0,x:t<0?"100%":"-100%",opacity:0})},Kc=({children:t,direction:e})=>M.jsx(une.div,{custom:e,variants:Vre,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",ease:"easeInOut",duration:.3},style:{height:"100%",width:"100%",backgroundColor:"#ffffff",overflowY:"auto",overflowX:"hidden",position:"absolute",top:0,left:0,paddingBottom:"80px"},children:t});function Fre(){const{currentUser:t}=o2(),[e,n]=I.useState(!1),[r,i]=I.useState(0),s=Wu(),o=yi(),a=["/","/closet","/outfits","/schedule"],l=c=>{const d=a.indexOf(o.pathname),f=a.indexOf(c);i(f>d?1:-1),s(c)},u=wY({onSwipedLeft:()=>{const c=a.indexOf(o.pathname);c<a.length-1&&(i(1),s(a[c+1]))},onSwipedRight:()=>{const c=a.indexOf(o.pathname);c>0&&(i(-1),s(a[c-1]))},preventScrollOnSwipe:!1,trackMouse:!0,delta:50});return t?M.jsxs(Q,{style:ew.container,children:[M.jsxs(Q,{style:ew.header,children:[M.jsx(Q,{style:{flexDirection:"row",alignItems:"center",flex:1},children:M.jsx(Nr,{source:{uri:cne},style:{width:260,height:52,resizeMode:"contain",marginLeft:-25}})}),M.jsx(Ce,{onPress:()=>n(!0),children:M.jsx(AY,{size:34,color:ti.colors.highlight})})]}),M.jsx(Q,{style:ew.content,...u,children:M.jsx(DZ,{mode:"popLayout",custom:r,children:M.jsxs(jW,{location:o,children:[M.jsx(Sl,{path:"/",element:M.jsx(Kc,{direction:r,children:M.jsx(hne,{})})}),M.jsx(Sl,{path:"/closet",element:M.jsx(Kc,{direction:r,children:M.jsx(Ene,{})})}),M.jsx(Sl,{path:"/camera",element:M.jsx(Kc,{direction:r,children:M.jsx(Pre,{})})}),M.jsx(Sl,{path:"/outfits",element:M.jsx(Kc,{direction:r,children:M.jsx(kre,{})})}),M.jsx(Sl,{path:"/schedule",element:M.jsx(Kc,{direction:r,children:M.jsx(Ore,{})})})]},o.pathname)})}),M.jsx(Lre,{onNavigate:l}),M.jsx(Nre,{visible:e,onClose:()=>n(!1)})]}):M.jsx(Mre,{})}function Bre(){return M.jsx(u8,{children:M.jsx(Fre,{})})}const ew=De.create({container:{flex:1,height:"100vh",maxHeight:"100dvh",backgroundColor:"#ffffff",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:15,backgroundColor:ti.colors.background,borderBottomWidth:1,borderBottomColor:ti.colors.border,paddingTop:15,zIndex:10,height:70},headerTitle:{fontSize:18,fontWeight:"bold",color:ti.colors.text},accountButton:{color:ti.colors.highlight,fontWeight:"500"},content:{flex:1,paddingBottom:60,overflow:"hidden"}});tw.createRoot(document.getElementById("root")).render(M.jsx(ft.StrictMode,{children:M.jsx(uY,{children:M.jsx(vne,{children:M.jsx(Bre,{})})})}));
