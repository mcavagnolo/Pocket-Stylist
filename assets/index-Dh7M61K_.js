(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Pu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function k1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var D1={exports:{}},Fg={},O1={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=Symbol.for("react.element"),YB=Symbol.for("react.portal"),JB=Symbol.for("react.fragment"),ZB=Symbol.for("react.strict_mode"),ej=Symbol.for("react.profiler"),tj=Symbol.for("react.provider"),nj=Symbol.for("react.context"),rj=Symbol.for("react.forward_ref"),ij=Symbol.for("react.suspense"),sj=Symbol.for("react.memo"),oj=Symbol.for("react.lazy"),gI=Symbol.iterator;function aj(t){return t===null||typeof t!="object"?null:(t=gI&&t[gI]||t["@@iterator"],typeof t=="function"?t:null)}var M1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L1=Object.assign,N1={};function ku(t,e,n){this.props=t,this.context=e,this.refs=N1,this.updater=n||M1}ku.prototype.isReactComponent={};ku.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ku.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V1(){}V1.prototype=ku.prototype;function x0(t,e,n){this.props=t,this.context=e,this.refs=N1,this.updater=n||M1}var A0=x0.prototype=new V1;A0.constructor=x0;L1(A0,ku.prototype);A0.isPureReactComponent=!0;var yI=Array.isArray,F1=Object.prototype.hasOwnProperty,P0={current:null},B1={key:!0,ref:!0,__self:!0,__source:!0};function j1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)F1.call(e,r)&&!B1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Id,type:t,key:s,ref:o,props:i,_owner:P0.current}}function lj(t,e){return{$$typeof:Id,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function k0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Id}function uj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vI=/\/+/g;function iv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uj(""+t.key):e.toString(36)}function _p(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Id:case YB:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+iv(o,0):r,yI(i)?(n="",t!=null&&(n=t.replace(vI,"$&/")+"/"),_p(i,e,n,"",function(u){return u})):i!=null&&(k0(i)&&(i=lj(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",yI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+iv(s,a);o+=_p(s,e,n,l,i)}else if(l=aj(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+iv(s,a++),o+=_p(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xf(t,e,n){if(t==null)return t;var r=[],i=0;return _p(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},wp={transition:null},hj={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:wp,ReactCurrentOwner:P0};function $1(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:xf,forEach:function(t,e,n){xf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xf(t,function(){e++}),e},toArray:function(t){return xf(t,function(e){return e})||[]},only:function(t){if(!k0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=ku;Se.Fragment=JB;Se.Profiler=ej;Se.PureComponent=x0;Se.StrictMode=ZB;Se.Suspense=ij;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hj;Se.act=$1;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=L1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=P0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)F1.call(e,l)&&!B1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Id,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:nj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tj,_context:t},t.Consumer=t};Se.createElement=j1;Se.createFactory=function(t){var e=j1.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:rj,render:t}};Se.isValidElement=k0;Se.lazy=function(t){return{$$typeof:oj,_payload:{_status:-1,_result:t},_init:cj}};Se.memo=function(t,e){return{$$typeof:sj,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=wp.transition;wp.transition={};try{t()}finally{wp.transition=e}};Se.unstable_act=$1;Se.useCallback=function(t,e){return vn.current.useCallback(t,e)};Se.useContext=function(t){return vn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return vn.current.useEffect(t,e)};Se.useId=function(){return vn.current.useId()};Se.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return vn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Se.useRef=function(t){return vn.current.useRef(t)};Se.useState=function(t){return vn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return vn.current.useTransition()};Se.version="18.3.1";O1.exports=Se;var I=O1.exports;const yt=Pu(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dj=I,fj=Symbol.for("react.element"),pj=Symbol.for("react.fragment"),mj=Object.prototype.hasOwnProperty,gj=dj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yj={key:!0,ref:!0,__self:!0,__source:!0};function U1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mj.call(e,r)&&!yj.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fj,type:t,key:s,ref:o,props:i,_owner:gj.current}}Fg.Fragment=pj;Fg.jsx=U1;Fg.jsxs=U1;D1.exports=Fg;var M=D1.exports,U_={},z1={exports:{}},qn={},W1={exports:{}},H1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Y){var re=$.length;$.push(Y);e:for(;0<re;){var we=re-1>>>1,Ae=$[we];if(0<i(Ae,Y))$[we]=Y,$[re]=Ae,re=we;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],re=$.pop();if(re!==Y){$[0]=re;e:for(var we=0,Ae=$.length,un=Ae>>>1;we<un;){var at=2*(we+1)-1,jt=$[at],dt=at+1,He=$[dt];if(0>i(jt,re))dt<Ae&&0>i(He,jt)?($[we]=He,$[dt]=re,we=dt):($[we]=jt,$[at]=re,we=at);else if(dt<Ae&&0>i(He,re))$[we]=He,$[dt]=re,we=dt;else break e}}return Y}function i($,Y){var re=$.sortIndex-Y.sortIndex;return re!==0?re:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,y=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=$)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function x($){if(S=!1,w($),!y)if(n(l)!==null)y=!0,je(O);else{var Y=n(u);Y!==null&&Re(x,Y.startTime-$)}}function O($,Y){y=!1,S&&(S=!1,v(E),E=-1),p=!0;var re=f;try{for(w(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||$&&!P());){var we=d.callback;if(typeof we=="function"){d.callback=null,f=d.priorityLevel;var Ae=we(d.expirationTime<=Y);Y=t.unstable_now(),typeof Ae=="function"?d.callback=Ae:d===n(l)&&r(l),w(Y)}else r(l);d=n(l)}if(d!==null)var un=!0;else{var at=n(u);at!==null&&Re(x,at.startTime-Y),un=!1}return un}finally{d=null,f=re,p=!1}}var D=!1,b=null,E=-1,R=5,C=-1;function P(){return!(t.unstable_now()-C<R)}function L(){if(b!==null){var $=t.unstable_now();C=$;var Y=!0;try{Y=b(!0,$)}finally{Y?k():(D=!1,b=null)}}else D=!1}var k;if(typeof g=="function")k=function(){g(L)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,fe=ce.port2;ce.port1.onmessage=L,k=function(){fe.postMessage(null)}}else k=function(){T(L,0)};function je($){b=$,D||(D=!0,k())}function Re($,Y){E=T(function(){$(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,je(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var re=f;f=Y;try{return $()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var re=f;f=$;try{return Y()}finally{f=re}},t.unstable_scheduleCallback=function($,Y,re){var we=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?we+re:we):re=we,$){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=re+Ae,$={id:c++,callback:Y,priorityLevel:$,startTime:re,expirationTime:Ae,sortIndex:-1},re>we?($.sortIndex=re,e(u,$),n(l)===null&&$===n(u)&&(S?(v(E),E=-1):S=!0,Re(x,re-we))):($.sortIndex=Ae,e(l,$),y||p||(y=!0,je(O))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var Y=f;return function(){var re=f;f=Y;try{return $.apply(this,arguments)}finally{f=re}}}})(H1);W1.exports=H1;var vj=W1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _j=I,Hn=vj;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K1=new Set,Mh={};function Va(t,e){ou(t,e),ou(t+"Capture",e)}function ou(t,e){for(Mh[t]=e,t=0;t<e.length;t++)K1.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z_=Object.prototype.hasOwnProperty,wj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_I={},wI={};function Sj(t){return z_.call(wI,t)?!0:z_.call(_I,t)?!1:wj.test(t)?wI[t]=!0:(_I[t]=!0,!1)}function Ej(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tj(t,e,n,r){if(e===null||typeof e>"u"||Ej(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var D0=/[\-:]([a-z])/g;function O0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D0,O0);Gt[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D0,O0);Gt[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D0,O0);Gt[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function M0(t,e,n,r){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tj(e,n,i,r)&&(n=null),r||i===null?Sj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yi=_j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Af=Symbol.for("react.element"),Rl=Symbol.for("react.portal"),Cl=Symbol.for("react.fragment"),L0=Symbol.for("react.strict_mode"),W_=Symbol.for("react.profiler"),q1=Symbol.for("react.provider"),G1=Symbol.for("react.context"),N0=Symbol.for("react.forward_ref"),H_=Symbol.for("react.suspense"),K_=Symbol.for("react.suspense_list"),V0=Symbol.for("react.memo"),Ms=Symbol.for("react.lazy"),X1=Symbol.for("react.offscreen"),SI=Symbol.iterator;function vc(t){return t===null||typeof t!="object"?null:(t=SI&&t[SI]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,sv;function Vc(t){if(sv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sv=e&&e[1]||""}return`
`+sv+t}var ov=!1;function av(t,e){if(!t||ov)return"";ov=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ov=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vc(t):""}function bj(t){switch(t.tag){case 5:return Vc(t.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 2:case 15:return t=av(t.type,!1),t;case 11:return t=av(t.type.render,!1),t;case 1:return t=av(t.type,!0),t;default:return""}}function q_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cl:return"Fragment";case Rl:return"Portal";case W_:return"Profiler";case L0:return"StrictMode";case H_:return"Suspense";case K_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case G1:return(t.displayName||"Context")+".Consumer";case q1:return(t._context.displayName||"Context")+".Provider";case N0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V0:return e=t.displayName||null,e!==null?e:q_(t.type)||"Memo";case Ms:e=t._payload,t=t._init;try{return q_(t(e))}catch{}}return null}function Ij(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q_(e);case 8:return e===L0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ao(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rj(t){var e=Q1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pf(t){t._valueTracker||(t._valueTracker=Rj(t))}function Y1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Q1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function G_(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function EI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ao(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J1(t,e){e=e.checked,e!=null&&M0(t,"checked",e,!1)}function X_(t,e){J1(t,e);var n=ao(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Q_(t,e.type,n):e.hasOwnProperty("defaultValue")&&Q_(t,e.type,ao(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function TI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Q_(t,e,n){(e!=="number"||pm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fc=Array.isArray;function Kl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ao(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Y_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Fc(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ao(n)}}function Z1(t,e){var n=ao(e.value),r=ao(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function II(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ek(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ek(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kf,tk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kf=kf||document.createElement("div"),kf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ih={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cj=["Webkit","ms","Moz","O"];Object.keys(ih).forEach(function(t){Cj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ih[e]=ih[t]})});function nk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ih.hasOwnProperty(t)&&ih[t]?(""+e).trim():e+"px"}function rk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xj=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Z_(t,e){if(e){if(xj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function ew(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tw=null;function F0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nw=null,ql=null,Gl=null;function RI(t){if(t=xd(t)){if(typeof nw!="function")throw Error(W(280));var e=t.stateNode;e&&(e=zg(e),nw(t.stateNode,t.type,e))}}function ik(t){ql?Gl?Gl.push(t):Gl=[t]:ql=t}function sk(){if(ql){var t=ql,e=Gl;if(Gl=ql=null,RI(t),e)for(t=0;t<e.length;t++)RI(e[t])}}function ok(t,e){return t(e)}function ak(){}var lv=!1;function lk(t,e,n){if(lv)return t(e,n);lv=!0;try{return ok(t,e,n)}finally{lv=!1,(ql!==null||Gl!==null)&&(ak(),sk())}}function Nh(t,e){var n=t.stateNode;if(n===null)return null;var r=zg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var rw=!1;if(ji)try{var _c={};Object.defineProperty(_c,"passive",{get:function(){rw=!0}}),window.addEventListener("test",_c,_c),window.removeEventListener("test",_c,_c)}catch{rw=!1}function Aj(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var sh=!1,mm=null,gm=!1,iw=null,Pj={onError:function(t){sh=!0,mm=t}};function kj(t,e,n,r,i,s,o,a,l){sh=!1,mm=null,Aj.apply(Pj,arguments)}function Dj(t,e,n,r,i,s,o,a,l){if(kj.apply(this,arguments),sh){if(sh){var u=mm;sh=!1,mm=null}else throw Error(W(198));gm||(gm=!0,iw=u)}}function Fa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function CI(t){if(Fa(t)!==t)throw Error(W(188))}function Oj(t){var e=t.alternate;if(!e){if(e=Fa(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return CI(i),t;if(s===r)return CI(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function ck(t){return t=Oj(t),t!==null?hk(t):null}function hk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hk(t);if(e!==null)return e;t=t.sibling}return null}var dk=Hn.unstable_scheduleCallback,xI=Hn.unstable_cancelCallback,Mj=Hn.unstable_shouldYield,Lj=Hn.unstable_requestPaint,ft=Hn.unstable_now,Nj=Hn.unstable_getCurrentPriorityLevel,B0=Hn.unstable_ImmediatePriority,fk=Hn.unstable_UserBlockingPriority,ym=Hn.unstable_NormalPriority,Vj=Hn.unstable_LowPriority,pk=Hn.unstable_IdlePriority,Bg=null,ai=null;function Fj(t){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(Bg,t,void 0,(t.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:$j,Bj=Math.log,jj=Math.LN2;function $j(t){return t>>>=0,t===0?32:31-(Bj(t)/jj|0)|0}var Df=64,Of=4194304;function Bc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bc(a):(s&=o,s!==0&&(r=Bc(s)))}else o=n&~i,o!==0?r=Bc(o):s!==0&&(r=Bc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mr(e),i=1<<n,r|=t[n],e&=~i;return r}function Uj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Mr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Uj(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function sw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mk(){var t=Df;return Df<<=1,!(Df&4194240)&&(Df=64),t}function uv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mr(e),t[e]=n}function Wj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Mr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function j0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function gk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yk,$0,vk,_k,wk,ow=!1,Mf=[],qs=null,Gs=null,Xs=null,Vh=new Map,Fh=new Map,Vs=[],Hj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AI(t,e){switch(t){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":Vh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(e.pointerId)}}function wc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xd(e),e!==null&&$0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Kj(t,e,n,r,i){switch(e){case"focusin":return qs=wc(qs,t,e,n,r,i),!0;case"dragenter":return Gs=wc(Gs,t,e,n,r,i),!0;case"mouseover":return Xs=wc(Xs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vh.set(s,wc(Vh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fh.set(s,wc(Fh.get(s)||null,t,e,n,r,i)),!0}return!1}function Sk(t){var e=ea(t.target);if(e!==null){var n=Fa(e);if(n!==null){if(e=n.tag,e===13){if(e=uk(n),e!==null){t.blockedOn=e,wk(t.priority,function(){vk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=aw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tw=r,n.target.dispatchEvent(r),tw=null}else return e=xd(n),e!==null&&$0(e),t.blockedOn=n,!1;e.shift()}return!0}function PI(t,e,n){Sp(t)&&n.delete(e)}function qj(){ow=!1,qs!==null&&Sp(qs)&&(qs=null),Gs!==null&&Sp(Gs)&&(Gs=null),Xs!==null&&Sp(Xs)&&(Xs=null),Vh.forEach(PI),Fh.forEach(PI)}function Sc(t,e){t.blockedOn===e&&(t.blockedOn=null,ow||(ow=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,qj)))}function Bh(t){function e(i){return Sc(i,t)}if(0<Mf.length){Sc(Mf[0],t);for(var n=1;n<Mf.length;n++){var r=Mf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qs!==null&&Sc(qs,t),Gs!==null&&Sc(Gs,t),Xs!==null&&Sc(Xs,t),Vh.forEach(e),Fh.forEach(e),n=0;n<Vs.length;n++)r=Vs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vs.length&&(n=Vs[0],n.blockedOn===null);)Sk(n),n.blockedOn===null&&Vs.shift()}var Xl=Yi.ReactCurrentBatchConfig,_m=!0;function Gj(t,e,n,r){var i=Ve,s=Xl.transition;Xl.transition=null;try{Ve=1,U0(t,e,n,r)}finally{Ve=i,Xl.transition=s}}function Xj(t,e,n,r){var i=Ve,s=Xl.transition;Xl.transition=null;try{Ve=4,U0(t,e,n,r)}finally{Ve=i,Xl.transition=s}}function U0(t,e,n,r){if(_m){var i=aw(t,e,n,r);if(i===null)_v(t,e,r,wm,n),AI(t,r);else if(Kj(i,t,e,n,r))r.stopPropagation();else if(AI(t,r),e&4&&-1<Hj.indexOf(t)){for(;i!==null;){var s=xd(i);if(s!==null&&yk(s),s=aw(t,e,n,r),s===null&&_v(t,e,r,wm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _v(t,e,r,null,n)}}var wm=null;function aw(t,e,n,r){if(wm=null,t=F0(r),t=ea(t),t!==null)if(e=Fa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wm=t,null}function Ek(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nj()){case B0:return 1;case fk:return 4;case ym:case Vj:return 16;case pk:return 536870912;default:return 16}default:return 16}}var Ws=null,z0=null,Ep=null;function Tk(){if(Ep)return Ep;var t,e=z0,n=e.length,r,i="value"in Ws?Ws.value:Ws.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ep=i.slice(t,1<r?1-r:void 0)}function Tp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lf(){return!0}function kI(){return!1}function Gn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lf:kI,this.isPropagationStopped=kI,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lf)},persist:function(){},isPersistent:Lf}),e}var Du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},W0=Gn(Du),Cd=ot({},Du,{view:0,detail:0}),Qj=Gn(Cd),cv,hv,Ec,jg=ot({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ec&&(Ec&&t.type==="mousemove"?(cv=t.screenX-Ec.screenX,hv=t.screenY-Ec.screenY):hv=cv=0,Ec=t),cv)},movementY:function(t){return"movementY"in t?t.movementY:hv}}),DI=Gn(jg),Yj=ot({},jg,{dataTransfer:0}),Jj=Gn(Yj),Zj=ot({},Cd,{relatedTarget:0}),dv=Gn(Zj),e4=ot({},Du,{animationName:0,elapsedTime:0,pseudoElement:0}),t4=Gn(e4),n4=ot({},Du,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),r4=Gn(n4),i4=ot({},Du,{data:0}),OI=Gn(i4),s4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=a4[t])?!!e[t]:!1}function H0(){return l4}var u4=ot({},Cd,{key:function(t){if(t.key){var e=s4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?o4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H0,charCode:function(t){return t.type==="keypress"?Tp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),c4=Gn(u4),h4=ot({},jg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MI=Gn(h4),d4=ot({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H0}),f4=Gn(d4),p4=ot({},Du,{propertyName:0,elapsedTime:0,pseudoElement:0}),m4=Gn(p4),g4=ot({},jg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y4=Gn(g4),v4=[9,13,27,32],K0=ji&&"CompositionEvent"in window,oh=null;ji&&"documentMode"in document&&(oh=document.documentMode);var _4=ji&&"TextEvent"in window&&!oh,bk=ji&&(!K0||oh&&8<oh&&11>=oh),LI=" ",NI=!1;function Ik(t,e){switch(t){case"keyup":return v4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xl=!1;function w4(t,e){switch(t){case"compositionend":return Rk(e);case"keypress":return e.which!==32?null:(NI=!0,LI);case"textInput":return t=e.data,t===LI&&NI?null:t;default:return null}}function S4(t,e){if(xl)return t==="compositionend"||!K0&&Ik(t,e)?(t=Tk(),Ep=z0=Ws=null,xl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bk&&e.locale!=="ko"?null:e.data;default:return null}}var E4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!E4[t.type]:e==="textarea"}function Ck(t,e,n,r){ik(r),e=Sm(e,"onChange"),0<e.length&&(n=new W0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ah=null,jh=null;function T4(t){Fk(t,0)}function $g(t){var e=kl(t);if(Y1(e))return t}function b4(t,e){if(t==="change")return e}var xk=!1;if(ji){var fv;if(ji){var pv="oninput"in document;if(!pv){var FI=document.createElement("div");FI.setAttribute("oninput","return;"),pv=typeof FI.oninput=="function"}fv=pv}else fv=!1;xk=fv&&(!document.documentMode||9<document.documentMode)}function BI(){ah&&(ah.detachEvent("onpropertychange",Ak),jh=ah=null)}function Ak(t){if(t.propertyName==="value"&&$g(jh)){var e=[];Ck(e,jh,t,F0(t)),lk(T4,e)}}function I4(t,e,n){t==="focusin"?(BI(),ah=e,jh=n,ah.attachEvent("onpropertychange",Ak)):t==="focusout"&&BI()}function R4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $g(jh)}function C4(t,e){if(t==="click")return $g(e)}function x4(t,e){if(t==="input"||t==="change")return $g(e)}function A4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:A4;function $h(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!z_.call(e,i)||!Nr(t[i],e[i]))return!1}return!0}function jI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $I(t,e){var n=jI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jI(n)}}function Pk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kk(){for(var t=window,e=pm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pm(t.document)}return e}function q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P4(t){var e=kk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pk(n.ownerDocument.documentElement,n)){if(r!==null&&q0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$I(n,s);var o=$I(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k4=ji&&"documentMode"in document&&11>=document.documentMode,Al=null,lw=null,lh=null,uw=!1;function UI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uw||Al==null||Al!==pm(r)||(r=Al,"selectionStart"in r&&q0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lh&&$h(lh,r)||(lh=r,r=Sm(lw,"onSelect"),0<r.length&&(e=new W0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Al)))}function Nf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pl={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},mv={},Dk={};ji&&(Dk=document.createElement("div").style,"AnimationEvent"in window||(delete Pl.animationend.animation,delete Pl.animationiteration.animation,delete Pl.animationstart.animation),"TransitionEvent"in window||delete Pl.transitionend.transition);function Ug(t){if(mv[t])return mv[t];if(!Pl[t])return t;var e=Pl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dk)return mv[t]=e[n];return t}var Ok=Ug("animationend"),Mk=Ug("animationiteration"),Lk=Ug("animationstart"),Nk=Ug("transitionend"),Vk=new Map,zI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function go(t,e){Vk.set(t,e),Va(e,[t])}for(var gv=0;gv<zI.length;gv++){var yv=zI[gv],D4=yv.toLowerCase(),O4=yv[0].toUpperCase()+yv.slice(1);go(D4,"on"+O4)}go(Ok,"onAnimationEnd");go(Mk,"onAnimationIteration");go(Lk,"onAnimationStart");go("dblclick","onDoubleClick");go("focusin","onFocus");go("focusout","onBlur");go(Nk,"onTransitionEnd");ou("onMouseEnter",["mouseout","mouseover"]);ou("onMouseLeave",["mouseout","mouseover"]);ou("onPointerEnter",["pointerout","pointerover"]);ou("onPointerLeave",["pointerout","pointerover"]);Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Va("onBeforeInput",["compositionend","keypress","textInput","paste"]);Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M4=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function WI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Dj(r,e,void 0,t),t.currentTarget=null}function Fk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;WI(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;WI(i,a,u),s=l}}}if(gm)throw t=iw,gm=!1,iw=null,t}function qe(t,e){var n=e[pw];n===void 0&&(n=e[pw]=new Set);var r=t+"__bubble";n.has(r)||(Bk(e,t,2,!1),n.add(r))}function vv(t,e,n){var r=0;e&&(r|=4),Bk(n,t,r,e)}var Vf="_reactListening"+Math.random().toString(36).slice(2);function Uh(t){if(!t[Vf]){t[Vf]=!0,K1.forEach(function(n){n!=="selectionchange"&&(M4.has(n)||vv(n,!1,t),vv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vf]||(e[Vf]=!0,vv("selectionchange",!1,e))}}function Bk(t,e,n,r){switch(Ek(e)){case 1:var i=Gj;break;case 4:i=Xj;break;default:i=U0}n=i.bind(null,e,n,t),i=void 0,!rw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _v(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ea(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}lk(function(){var u=s,c=F0(n),d=[];e:{var f=Vk.get(t);if(f!==void 0){var p=W0,y=t;switch(t){case"keypress":if(Tp(n)===0)break e;case"keydown":case"keyup":p=c4;break;case"focusin":y="focus",p=dv;break;case"focusout":y="blur",p=dv;break;case"beforeblur":case"afterblur":p=dv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=DI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Jj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=f4;break;case Ok:case Mk:case Lk:p=t4;break;case Nk:p=m4;break;case"scroll":p=Qj;break;case"wheel":p=y4;break;case"copy":case"cut":case"paste":p=r4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=MI}var S=(e&4)!==0,T=!S&&t==="scroll",v=S?f!==null?f+"Capture":null:f;S=[];for(var g=u,w;g!==null;){w=g;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,v!==null&&(x=Nh(g,v),x!=null&&S.push(zh(g,x,w)))),T)break;g=g.return}0<S.length&&(f=new p(f,y,null,n,c),d.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==tw&&(y=n.relatedTarget||n.fromElement)&&(ea(y)||y[$i]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?ea(y):null,y!==null&&(T=Fa(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(S=DI,x="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(S=MI,x="onPointerLeave",v="onPointerEnter",g="pointer"),T=p==null?f:kl(p),w=y==null?f:kl(y),f=new S(x,g+"leave",p,n,c),f.target=T,f.relatedTarget=w,x=null,ea(c)===u&&(S=new S(v,g+"enter",y,n,c),S.target=w,S.relatedTarget=T,x=S),T=x,p&&y)t:{for(S=p,v=y,g=0,w=S;w;w=ol(w))g++;for(w=0,x=v;x;x=ol(x))w++;for(;0<g-w;)S=ol(S),g--;for(;0<w-g;)v=ol(v),w--;for(;g--;){if(S===v||v!==null&&S===v.alternate)break t;S=ol(S),v=ol(v)}S=null}else S=null;p!==null&&HI(d,f,p,S,!1),y!==null&&T!==null&&HI(d,T,y,S,!0)}}e:{if(f=u?kl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=b4;else if(VI(f))if(xk)O=x4;else{O=R4;var D=I4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=C4);if(O&&(O=O(t,u))){Ck(d,O,n,c);break e}D&&D(t,f,u),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Q_(f,"number",f.value)}switch(D=u?kl(u):window,t){case"focusin":(VI(D)||D.contentEditable==="true")&&(Al=D,lw=u,lh=null);break;case"focusout":lh=lw=Al=null;break;case"mousedown":uw=!0;break;case"contextmenu":case"mouseup":case"dragend":uw=!1,UI(d,n,c);break;case"selectionchange":if(k4)break;case"keydown":case"keyup":UI(d,n,c)}var b;if(K0)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else xl?Ik(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(bk&&n.locale!=="ko"&&(xl||E!=="onCompositionStart"?E==="onCompositionEnd"&&xl&&(b=Tk()):(Ws=c,z0="value"in Ws?Ws.value:Ws.textContent,xl=!0)),D=Sm(u,E),0<D.length&&(E=new OI(E,t,null,n,c),d.push({event:E,listeners:D}),b?E.data=b:(b=Rk(n),b!==null&&(E.data=b)))),(b=_4?w4(t,n):S4(t,n))&&(u=Sm(u,"onBeforeInput"),0<u.length&&(c=new OI("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=b))}Fk(d,e)})}function zh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Nh(t,n),s!=null&&r.unshift(zh(t,s,i)),s=Nh(t,e),s!=null&&r.push(zh(t,s,i))),t=t.return}return r}function ol(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function HI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Nh(n,s),l!=null&&o.unshift(zh(n,l,a))):i||(l=Nh(n,s),l!=null&&o.push(zh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var L4=/\r\n?/g,N4=/\u0000|\uFFFD/g;function KI(t){return(typeof t=="string"?t:""+t).replace(L4,`
`).replace(N4,"")}function Ff(t,e,n){if(e=KI(e),KI(t)!==e&&n)throw Error(W(425))}function Em(){}var cw=null,hw=null;function dw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fw=typeof setTimeout=="function"?setTimeout:void 0,V4=typeof clearTimeout=="function"?clearTimeout:void 0,qI=typeof Promise=="function"?Promise:void 0,F4=typeof queueMicrotask=="function"?queueMicrotask:typeof qI<"u"?function(t){return qI.resolve(null).then(t).catch(B4)}:fw;function B4(t){setTimeout(function(){throw t})}function wv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bh(e)}function Qs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function GI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ou=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Ou,Wh="__reactProps$"+Ou,$i="__reactContainer$"+Ou,pw="__reactEvents$"+Ou,j4="__reactListeners$"+Ou,$4="__reactHandles$"+Ou;function ea(t){var e=t[Zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$i]||n[Zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=GI(t);t!==null;){if(n=t[Zr])return n;t=GI(t)}return e}t=n,n=t.parentNode}return null}function xd(t){return t=t[Zr]||t[$i],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function zg(t){return t[Wh]||null}var mw=[],Dl=-1;function yo(t){return{current:t}}function Ge(t){0>Dl||(t.current=mw[Dl],mw[Dl]=null,Dl--)}function We(t,e){Dl++,mw[Dl]=t.current,t.current=e}var lo={},an=yo(lo),Rn=yo(!1),_a=lo;function au(t,e){var n=t.type.contextTypes;if(!n)return lo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Cn(t){return t=t.childContextTypes,t!=null}function Tm(){Ge(Rn),Ge(an)}function XI(t,e,n){if(an.current!==lo)throw Error(W(168));We(an,e),We(Rn,n)}function jk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,Ij(t)||"Unknown",i));return ot({},n,r)}function bm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lo,_a=an.current,We(an,t),We(Rn,Rn.current),!0}function QI(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=jk(t,e,_a),r.__reactInternalMemoizedMergedChildContext=t,Ge(Rn),Ge(an),We(an,t)):Ge(Rn),We(Rn,n)}var Ai=null,Wg=!1,Sv=!1;function $k(t){Ai===null?Ai=[t]:Ai.push(t)}function U4(t){Wg=!0,$k(t)}function vo(){if(!Sv&&Ai!==null){Sv=!0;var t=0,e=Ve;try{var n=Ai;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ai=null,Wg=!1}catch(i){throw Ai!==null&&(Ai=Ai.slice(t+1)),dk(B0,vo),i}finally{Ve=e,Sv=!1}}return null}var Ol=[],Ml=0,Im=null,Rm=0,er=[],tr=0,wa=null,Pi=1,ki="";function Uo(t,e){Ol[Ml++]=Rm,Ol[Ml++]=Im,Im=t,Rm=e}function Uk(t,e,n){er[tr++]=Pi,er[tr++]=ki,er[tr++]=wa,wa=t;var r=Pi;t=ki;var i=32-Mr(r)-1;r&=~(1<<i),n+=1;var s=32-Mr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pi=1<<32-Mr(e)+i|n<<i|r,ki=s+t}else Pi=1<<s|n<<i|r,ki=t}function G0(t){t.return!==null&&(Uo(t,1),Uk(t,1,0))}function X0(t){for(;t===Im;)Im=Ol[--Ml],Ol[Ml]=null,Rm=Ol[--Ml],Ol[Ml]=null;for(;t===wa;)wa=er[--tr],er[tr]=null,ki=er[--tr],er[tr]=null,Pi=er[--tr],er[tr]=null}var zn=null,$n=null,Ye=!1,kr=null;function zk(t,e){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,$n=Qs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wa!==null?{id:Pi,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zn=t,$n=null,!0):!1;default:return!1}}function gw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yw(t){if(Ye){var e=$n;if(e){var n=e;if(!YI(t,e)){if(gw(t))throw Error(W(418));e=Qs(n.nextSibling);var r=zn;e&&YI(t,e)?zk(r,n):(t.flags=t.flags&-4097|2,Ye=!1,zn=t)}}else{if(gw(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ye=!1,zn=t}}}function JI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function Bf(t){if(t!==zn)return!1;if(!Ye)return JI(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dw(t.type,t.memoizedProps)),e&&(e=$n)){if(gw(t))throw Wk(),Error(W(418));for(;e;)zk(t,e),e=Qs(e.nextSibling)}if(JI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$n=Qs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=zn?Qs(t.stateNode.nextSibling):null;return!0}function Wk(){for(var t=$n;t;)t=Qs(t.nextSibling)}function lu(){$n=zn=null,Ye=!1}function Q0(t){kr===null?kr=[t]:kr.push(t)}var z4=Yi.ReactCurrentBatchConfig;function Tc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function jf(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ZI(t){var e=t._init;return e(t._payload)}function Hk(t){function e(v,g){if(t){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=eo(v,g),v.index=0,v.sibling=null,v}function s(v,g,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,w,x){return g===null||g.tag!==6?(g=xv(w,v.mode,x),g.return=v,g):(g=i(g,w),g.return=v,g)}function l(v,g,w,x){var O=w.type;return O===Cl?c(v,g,w.props.children,x,w.key):g!==null&&(g.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ms&&ZI(O)===g.type)?(x=i(g,w.props),x.ref=Tc(v,g,w),x.return=v,x):(x=Pp(w.type,w.key,w.props,null,v.mode,x),x.ref=Tc(v,g,w),x.return=v,x)}function u(v,g,w,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Av(w,v.mode,x),g.return=v,g):(g=i(g,w.children||[]),g.return=v,g)}function c(v,g,w,x,O){return g===null||g.tag!==7?(g=da(w,v.mode,x,O),g.return=v,g):(g=i(g,w),g.return=v,g)}function d(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=xv(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Af:return w=Pp(g.type,g.key,g.props,null,v.mode,w),w.ref=Tc(v,null,g),w.return=v,w;case Rl:return g=Av(g,v.mode,w),g.return=v,g;case Ms:var x=g._init;return d(v,x(g._payload),w)}if(Fc(g)||vc(g))return g=da(g,v.mode,w,null),g.return=v,g;jf(v,g)}return null}function f(v,g,w,x){var O=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(v,g,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Af:return w.key===O?l(v,g,w,x):null;case Rl:return w.key===O?u(v,g,w,x):null;case Ms:return O=w._init,f(v,g,O(w._payload),x)}if(Fc(w)||vc(w))return O!==null?null:c(v,g,w,x,null);jf(v,w)}return null}function p(v,g,w,x,O){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(w)||null,a(g,v,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Af:return v=v.get(x.key===null?w:x.key)||null,l(g,v,x,O);case Rl:return v=v.get(x.key===null?w:x.key)||null,u(g,v,x,O);case Ms:var D=x._init;return p(v,g,w,D(x._payload),O)}if(Fc(x)||vc(x))return v=v.get(w)||null,c(g,v,x,O,null);jf(g,x)}return null}function y(v,g,w,x){for(var O=null,D=null,b=g,E=g=0,R=null;b!==null&&E<w.length;E++){b.index>E?(R=b,b=null):R=b.sibling;var C=f(v,b,w[E],x);if(C===null){b===null&&(b=R);break}t&&b&&C.alternate===null&&e(v,b),g=s(C,g,E),D===null?O=C:D.sibling=C,D=C,b=R}if(E===w.length)return n(v,b),Ye&&Uo(v,E),O;if(b===null){for(;E<w.length;E++)b=d(v,w[E],x),b!==null&&(g=s(b,g,E),D===null?O=b:D.sibling=b,D=b);return Ye&&Uo(v,E),O}for(b=r(v,b);E<w.length;E++)R=p(b,v,E,w[E],x),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?E:R.key),g=s(R,g,E),D===null?O=R:D.sibling=R,D=R);return t&&b.forEach(function(P){return e(v,P)}),Ye&&Uo(v,E),O}function S(v,g,w,x){var O=vc(w);if(typeof O!="function")throw Error(W(150));if(w=O.call(w),w==null)throw Error(W(151));for(var D=O=null,b=g,E=g=0,R=null,C=w.next();b!==null&&!C.done;E++,C=w.next()){b.index>E?(R=b,b=null):R=b.sibling;var P=f(v,b,C.value,x);if(P===null){b===null&&(b=R);break}t&&b&&P.alternate===null&&e(v,b),g=s(P,g,E),D===null?O=P:D.sibling=P,D=P,b=R}if(C.done)return n(v,b),Ye&&Uo(v,E),O;if(b===null){for(;!C.done;E++,C=w.next())C=d(v,C.value,x),C!==null&&(g=s(C,g,E),D===null?O=C:D.sibling=C,D=C);return Ye&&Uo(v,E),O}for(b=r(v,b);!C.done;E++,C=w.next())C=p(b,v,E,C.value,x),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?E:C.key),g=s(C,g,E),D===null?O=C:D.sibling=C,D=C);return t&&b.forEach(function(L){return e(v,L)}),Ye&&Uo(v,E),O}function T(v,g,w,x){if(typeof w=="object"&&w!==null&&w.type===Cl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Af:e:{for(var O=w.key,D=g;D!==null;){if(D.key===O){if(O=w.type,O===Cl){if(D.tag===7){n(v,D.sibling),g=i(D,w.props.children),g.return=v,v=g;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ms&&ZI(O)===D.type){n(v,D.sibling),g=i(D,w.props),g.ref=Tc(v,D,w),g.return=v,v=g;break e}n(v,D);break}else e(v,D);D=D.sibling}w.type===Cl?(g=da(w.props.children,v.mode,x,w.key),g.return=v,v=g):(x=Pp(w.type,w.key,w.props,null,v.mode,x),x.ref=Tc(v,g,w),x.return=v,v=x)}return o(v);case Rl:e:{for(D=w.key;g!==null;){if(g.key===D)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(v,g.sibling),g=i(g,w.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Av(w,v.mode,x),g.return=v,v=g}return o(v);case Ms:return D=w._init,T(v,g,D(w._payload),x)}if(Fc(w))return y(v,g,w,x);if(vc(w))return S(v,g,w,x);jf(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,w),g.return=v,v=g):(n(v,g),g=xv(w,v.mode,x),g.return=v,v=g),o(v)):n(v,g)}return T}var uu=Hk(!0),Kk=Hk(!1),Cm=yo(null),xm=null,Ll=null,Y0=null;function J0(){Y0=Ll=xm=null}function Z0(t){var e=Cm.current;Ge(Cm),t._currentValue=e}function vw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ql(t,e){xm=t,Y0=Ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function dr(t){var e=t._currentValue;if(Y0!==t)if(t={context:t,memoizedValue:e,next:null},Ll===null){if(xm===null)throw Error(W(308));Ll=t,xm.dependencies={lanes:0,firstContext:t}}else Ll=Ll.next=t;return e}var ta=null;function eE(t){ta===null?ta=[t]:ta.push(t)}function qk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,eE(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ui(t,r)}function Ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ls=!1;function tE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ys(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ui(t,n)}return i=r.interleaved,i===null?(e.next=e,eE(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ui(t,n)}function bp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,j0(t,n)}}function eR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Am(t,e,n,r){var i=t.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,S=a;switch(f=e,p=n,S.tag){case 1:if(y=S.payload,typeof y=="function"){d=y.call(p,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break e;d=ot({},d,f);break e;case 2:Ls=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ea|=o,t.lanes=o,t.memoizedState=d}}function tR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Ad={},li=yo(Ad),Hh=yo(Ad),Kh=yo(Ad);function na(t){if(t===Ad)throw Error(W(174));return t}function nE(t,e){switch(We(Kh,e),We(Hh,t),We(li,Ad),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:J_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=J_(e,t)}Ge(li),We(li,e)}function cu(){Ge(li),Ge(Hh),Ge(Kh)}function Xk(t){na(Kh.current);var e=na(li.current),n=J_(e,t.type);e!==n&&(We(Hh,t),We(li,n))}function rE(t){Hh.current===t&&(Ge(li),Ge(Hh))}var tt=yo(0);function Pm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ev=[];function iE(){for(var t=0;t<Ev.length;t++)Ev[t]._workInProgressVersionPrimary=null;Ev.length=0}var Ip=Yi.ReactCurrentDispatcher,Tv=Yi.ReactCurrentBatchConfig,Sa=0,it=null,Rt=null,Vt=null,km=!1,uh=!1,qh=0,W4=0;function Qt(){throw Error(W(321))}function sE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function oE(t,e,n,r,i,s){if(Sa=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ip.current=t===null||t.memoizedState===null?G4:X4,t=n(r,i),uh){s=0;do{if(uh=!1,qh=0,25<=s)throw Error(W(301));s+=1,Vt=Rt=null,e.updateQueue=null,Ip.current=Q4,t=n(r,i)}while(uh)}if(Ip.current=Dm,e=Rt!==null&&Rt.next!==null,Sa=0,Vt=Rt=it=null,km=!1,e)throw Error(W(300));return t}function aE(){var t=qh!==0;return qh=0,t}function Qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?it.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function fr(){if(Rt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Vt===null?it.memoizedState:Vt.next;if(e!==null)Vt=e,Rt=t;else{if(t===null)throw Error(W(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Vt===null?it.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function Gh(t,e){return typeof e=="function"?e(t):e}function bv(t){var e=fr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Rt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Sa&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,it.lanes|=c,Ea|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Nr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,Ea|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Iv(t){var e=fr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Nr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Qk(){}function Yk(t,e){var n=it,r=fr(),i=e(),s=!Nr(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,lE(eD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,Xh(9,Zk.bind(null,n,r,i,e),void 0,null),Ft===null)throw Error(W(349));Sa&30||Jk(n,e,i)}return i}function Jk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zk(t,e,n,r){e.value=n,e.getSnapshot=r,tD(e)&&nD(t)}function eD(t,e,n){return n(function(){tD(e)&&nD(t)})}function tD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function nD(t){var e=Ui(t,1);e!==null&&Lr(e,t,1,-1)}function nR(t){var e=Qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:t},e.queue=t,t=t.dispatch=q4.bind(null,it,t),[e.memoizedState,t]}function Xh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rD(){return fr().memoizedState}function Rp(t,e,n,r){var i=Qr();it.flags|=t,i.memoizedState=Xh(1|e,n,void 0,r===void 0?null:r)}function Hg(t,e,n,r){var i=fr();r=r===void 0?null:r;var s=void 0;if(Rt!==null){var o=Rt.memoizedState;if(s=o.destroy,r!==null&&sE(r,o.deps)){i.memoizedState=Xh(e,n,s,r);return}}it.flags|=t,i.memoizedState=Xh(1|e,n,s,r)}function rR(t,e){return Rp(8390656,8,t,e)}function lE(t,e){return Hg(2048,8,t,e)}function iD(t,e){return Hg(4,2,t,e)}function sD(t,e){return Hg(4,4,t,e)}function oD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aD(t,e,n){return n=n!=null?n.concat([t]):null,Hg(4,4,oD.bind(null,e,t),n)}function uE(){}function lD(t,e){var n=fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uD(t,e){var n=fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cD(t,e,n){return Sa&21?(Nr(n,e)||(n=mk(),it.lanes|=n,Ea|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function H4(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Tv.transition;Tv.transition={};try{t(!1),e()}finally{Ve=n,Tv.transition=r}}function hD(){return fr().memoizedState}function K4(t,e,n){var r=Zs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dD(t))fD(e,n);else if(n=qk(t,e,n,r),n!==null){var i=mn();Lr(n,t,r,i),pD(n,e,r)}}function q4(t,e,n){var r=Zs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dD(t))fD(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(i.next=i,eE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=qk(t,e,i,r),n!==null&&(i=mn(),Lr(n,t,r,i),pD(n,e,r))}}function dD(t){var e=t.alternate;return t===it||e!==null&&e===it}function fD(t,e){uh=km=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,j0(t,n)}}var Dm={readContext:dr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},G4={readContext:dr,useCallback:function(t,e){return Qr().memoizedState=[t,e===void 0?null:e],t},useContext:dr,useEffect:rR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rp(4194308,4,oD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rp(4,2,t,e)},useMemo:function(t,e){var n=Qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=K4.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Qr();return t={current:t},e.memoizedState=t},useState:nR,useDebugValue:uE,useDeferredValue:function(t){return Qr().memoizedState=t},useTransition:function(){var t=nR(!1),e=t[0];return t=H4.bind(null,t[1]),Qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Qr();if(Ye){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Ft===null)throw Error(W(349));Sa&30||Jk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,rR(eD.bind(null,r,s,t),[t]),r.flags|=2048,Xh(9,Zk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qr(),e=Ft.identifierPrefix;if(Ye){var n=ki,r=Pi;n=(r&~(1<<32-Mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=W4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},X4={readContext:dr,useCallback:lD,useContext:dr,useEffect:lE,useImperativeHandle:aD,useInsertionEffect:iD,useLayoutEffect:sD,useMemo:uD,useReducer:bv,useRef:rD,useState:function(){return bv(Gh)},useDebugValue:uE,useDeferredValue:function(t){var e=fr();return cD(e,Rt.memoizedState,t)},useTransition:function(){var t=bv(Gh)[0],e=fr().memoizedState;return[t,e]},useMutableSource:Qk,useSyncExternalStore:Yk,useId:hD,unstable_isNewReconciler:!1},Q4={readContext:dr,useCallback:lD,useContext:dr,useEffect:lE,useImperativeHandle:aD,useInsertionEffect:iD,useLayoutEffect:sD,useMemo:uD,useReducer:Iv,useRef:rD,useState:function(){return Iv(Gh)},useDebugValue:uE,useDeferredValue:function(t){var e=fr();return Rt===null?e.memoizedState=t:cD(e,Rt.memoizedState,t)},useTransition:function(){var t=Iv(Gh)[0],e=fr().memoizedState;return[t,e]},useMutableSource:Qk,useSyncExternalStore:Yk,useId:hD,unstable_isNewReconciler:!1};function Cr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _w(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kg={isMounted:function(t){return(t=t._reactInternals)?Fa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mn(),i=Zs(t),s=Ni(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ys(t,s,i),e!==null&&(Lr(e,t,i,r),bp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mn(),i=Zs(t),s=Ni(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ys(t,s,i),e!==null&&(Lr(e,t,i,r),bp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),r=Zs(t),i=Ni(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ys(t,i,r),e!==null&&(Lr(e,t,r,n),bp(e,t,r))}};function iR(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$h(n,r)||!$h(i,s):!0}function mD(t,e,n){var r=!1,i=lo,s=e.contextType;return typeof s=="object"&&s!==null?s=dr(s):(i=Cn(e)?_a:an.current,r=e.contextTypes,s=(r=r!=null)?au(t,i):lo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kg.enqueueReplaceState(e,e.state,null)}function ww(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dr(s):(s=Cn(e)?_a:an.current,i.context=au(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_w(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kg.enqueueReplaceState(i,i.state,null),Am(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hu(t,e){try{var n="",r=e;do n+=bj(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Y4=typeof WeakMap=="function"?WeakMap:Map;function gD(t,e,n){n=Ni(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mm||(Mm=!0,kw=r),Sw(t,e)},n}function yD(t,e,n){n=Ni(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Sw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sw(t,e),typeof r!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function oR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Y4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=h$.bind(null,t,e,n),e.then(t,t))}function aR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lR(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ni(-1,1),e.tag=2,Ys(n,e,1))),n.lanes|=1),t)}var J4=Yi.ReactCurrentOwner,Tn=!1;function dn(t,e,n,r){e.child=t===null?Kk(e,null,n,r):uu(e,t.child,n,r)}function uR(t,e,n,r,i){n=n.render;var s=e.ref;return Ql(e,i),r=oE(t,e,n,r,s,i),n=aE(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(Ye&&n&&G0(e),e.flags|=1,dn(t,e,r,i),e.child)}function cR(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,vD(t,e,s,r,i)):(t=Pp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$h,n(o,r)&&t.ref===e.ref)return zi(t,e,i)}return e.flags|=1,t=eo(s,r),t.ref=e.ref,t.return=e,e.child=t}function vD(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($h(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,zi(t,e,i)}return Ew(t,e,n,r,i)}function _D(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Vl,Fn),Fn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(Vl,Fn),Fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(Vl,Fn),Fn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,We(Vl,Fn),Fn|=r;return dn(t,e,i,n),e.child}function wD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ew(t,e,n,r,i){var s=Cn(n)?_a:an.current;return s=au(e,s),Ql(e,i),n=oE(t,e,n,r,s,i),r=aE(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(Ye&&r&&G0(e),e.flags|=1,dn(t,e,n,i),e.child)}function hR(t,e,n,r,i){if(Cn(n)){var s=!0;bm(e)}else s=!1;if(Ql(e,i),e.stateNode===null)Cp(t,e),mD(e,n,r),ww(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=dr(u):(u=Cn(n)?_a:an.current,u=au(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&sR(e,o,r,u),Ls=!1;var f=e.memoizedState;o.state=f,Am(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Rn.current||Ls?(typeof c=="function"&&(_w(e,n,c,r),l=e.memoizedState),(a=Ls||iR(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Cr(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=dr(l):(l=Cn(n)?_a:an.current,l=au(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&sR(e,o,r,l),Ls=!1,f=e.memoizedState,o.state=f,Am(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||Rn.current||Ls?(typeof p=="function"&&(_w(e,n,p,r),y=e.memoizedState),(u=Ls||iR(e,n,u,r,f,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Tw(t,e,n,r,s,i)}function Tw(t,e,n,r,i,s){wD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&QI(e,n,!1),zi(t,e,s);r=e.stateNode,J4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=uu(e,t.child,null,s),e.child=uu(e,null,a,s)):dn(t,e,a,s),e.memoizedState=r.state,i&&QI(e,n,!0),e.child}function SD(t){var e=t.stateNode;e.pendingContext?XI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&XI(t,e.context,!1),nE(t,e.containerInfo)}function dR(t,e,n,r,i){return lu(),Q0(i),e.flags|=256,dn(t,e,n,r),e.child}var bw={dehydrated:null,treeContext:null,retryLane:0};function Iw(t){return{baseLanes:t,cachePool:null,transitions:null}}function ED(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),We(tt,i&1),t===null)return yw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Xg(o,r,0,null),t=da(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Iw(n),e.memoizedState=bw,t):cE(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Z4(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=eo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=eo(a,s):(s=da(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Iw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bw,r}return s=t.child,t=s.sibling,r=eo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cE(t,e){return e=Xg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $f(t,e,n,r){return r!==null&&Q0(r),uu(e,t.child,null,n),t=cE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z4(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Rv(Error(W(422))),$f(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Xg({mode:"visible",children:r.children},i,0,null),s=da(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&uu(e,t.child,null,o),e.child.memoizedState=Iw(o),e.memoizedState=bw,s);if(!(e.mode&1))return $f(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Rv(s,r,void 0),$f(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=Ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ui(t,i),Lr(r,t,i,-1))}return gE(),r=Rv(Error(W(421))),$f(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=d$.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$n=Qs(i.nextSibling),zn=e,Ye=!0,kr=null,t!==null&&(er[tr++]=Pi,er[tr++]=ki,er[tr++]=wa,Pi=t.id,ki=t.overflow,wa=e),e=cE(e,r.children),e.flags|=4096,e)}function fR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vw(t.return,e,n)}function Cv(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function TD(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fR(t,n,e);else if(t.tag===19)fR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cv(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cv(e,!0,n,null,s);break;case"together":Cv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ea|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=eo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=eo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function e$(t,e,n){switch(e.tag){case 3:SD(e),lu();break;case 5:Xk(e);break;case 1:Cn(e.type)&&bm(e);break;case 4:nE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;We(Cm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?ED(t,e,n):(We(tt,tt.current&1),t=zi(t,e,n),t!==null?t.sibling:null);We(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return TD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,_D(t,e,n)}return zi(t,e,n)}var bD,Rw,ID,RD;bD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rw=function(){};ID=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,na(li.current);var s=null;switch(n){case"input":i=G_(t,i),r=G_(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=Y_(t,i),r=Y_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Em)}Z_(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};RD=function(t,e,n,r){n!==r&&(e.flags|=4)};function bc(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function t$(t,e,n){var r=e.pendingProps;switch(X0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Cn(e.type)&&Tm(),Yt(e),null;case 3:return r=e.stateNode,cu(),Ge(Rn),Ge(an),iE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kr!==null&&(Mw(kr),kr=null))),Rw(t,e),Yt(e),null;case 5:rE(e);var i=na(Kh.current);if(n=e.type,t!==null&&e.stateNode!=null)ID(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Yt(e),null}if(t=na(li.current),Bf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zr]=e,r[Wh]=s,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<jc.length;i++)qe(jc[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":EI(r,s),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qe("invalid",r);break;case"textarea":bI(r,s),qe("invalid",r)}Z_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ff(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ff(r.textContent,a,t),i=["children",""+a]):Mh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":Pf(r),TI(r,s,!0);break;case"textarea":Pf(r),II(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Em)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ek(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zr]=e,t[Wh]=r,bD(t,e,!1,!1),e.stateNode=t;e:{switch(o=ew(n,r),n){case"dialog":qe("cancel",t),qe("close",t),i=r;break;case"iframe":case"object":case"embed":qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<jc.length;i++)qe(jc[i],t);i=r;break;case"source":qe("error",t),i=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),i=r;break;case"details":qe("toggle",t),i=r;break;case"input":EI(t,r),i=G_(t,r),qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),qe("invalid",t);break;case"textarea":bI(t,r),i=Y_(t,r),qe("invalid",t);break;default:i=r}Z_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?rk(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lh(t,l):typeof l=="number"&&Lh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qe("scroll",t):l!=null&&M0(t,s,l,o))}switch(n){case"input":Pf(t),TI(t,r,!1);break;case"textarea":Pf(t),II(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ao(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Kl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Kl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Em)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)RD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=na(Kh.current),na(li.current),Bf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zr]=e,(s=r.nodeValue!==n)&&(t=zn,t!==null))switch(t.tag){case 3:Ff(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ff(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zr]=e,e.stateNode=r}return Yt(e),null;case 13:if(Ge(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&$n!==null&&e.mode&1&&!(e.flags&128))Wk(),lu(),e.flags|=98560,s=!1;else if(s=Bf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Zr]=e}else lu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),s=!1}else kr!==null&&(Mw(kr),kr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?Ct===0&&(Ct=3):gE())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return cu(),Rw(t,e),t===null&&Uh(e.stateNode.containerInfo),Yt(e),null;case 10:return Z0(e.type._context),Yt(e),null;case 17:return Cn(e.type)&&Tm(),Yt(e),null;case 19:if(Ge(tt),s=e.memoizedState,s===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)bc(s,!1);else{if(Ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pm(t),o!==null){for(e.flags|=128,bc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&ft()>du&&(e.flags|=128,r=!0,bc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Pm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ye)return Yt(e),null}else 2*ft()-s.renderingStartTime>du&&n!==1073741824&&(e.flags|=128,r=!0,bc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,n=tt.current,We(tt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return mE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Fn&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function n$(t,e){switch(X0(e),e.tag){case 1:return Cn(e.type)&&Tm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cu(),Ge(Rn),Ge(an),iE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rE(e),null;case 13:if(Ge(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));lu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(tt),null;case 4:return cu(),null;case 10:return Z0(e.type._context),null;case 22:case 23:return mE(),null;case 24:return null;default:return null}}var Uf=!1,tn=!1,r$=typeof WeakSet=="function"?WeakSet:Set,J=null;function Nl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function Cw(t,e,n){try{n()}catch(r){ct(t,e,r)}}var pR=!1;function i$(t,e){if(cw=_m,t=kk(),q0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hw={focusedElem:t,selectionRange:n},_m=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,T=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?S:Cr(e.type,S),T);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(x){ct(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return y=pR,pR=!1,y}function ch(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cw(e,n,s)}i=i.next}while(i!==r)}}function qg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function CD(t){var e=t.alternate;e!==null&&(t.alternate=null,CD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zr],delete e[Wh],delete e[pw],delete e[j4],delete e[$4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xD(t){return t.tag===5||t.tag===3||t.tag===4}function mR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Aw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Em));else if(r!==4&&(t=t.child,t!==null))for(Aw(t,e,n),t=t.sibling;t!==null;)Aw(t,e,n),t=t.sibling}function Pw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pw(t,e,n),t=t.sibling;t!==null;)Pw(t,e,n),t=t.sibling}var $t=null,Ar=!1;function Es(t,e,n){for(n=n.child;n!==null;)AD(t,e,n),n=n.sibling}function AD(t,e,n){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(Bg,n)}catch{}switch(n.tag){case 5:tn||Nl(n,e);case 6:var r=$t,i=Ar;$t=null,Es(t,e,n),$t=r,Ar=i,$t!==null&&(Ar?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(Ar?(t=$t,n=n.stateNode,t.nodeType===8?wv(t.parentNode,n):t.nodeType===1&&wv(t,n),Bh(t)):wv($t,n.stateNode));break;case 4:r=$t,i=Ar,$t=n.stateNode.containerInfo,Ar=!0,Es(t,e,n),$t=r,Ar=i;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Cw(n,e,o),i=i.next}while(i!==r)}Es(t,e,n);break;case 1:if(!tn&&(Nl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ct(n,e,a)}Es(t,e,n);break;case 21:Es(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,Es(t,e,n),tn=r):Es(t,e,n);break;default:Es(t,e,n)}}function gR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r$),e.forEach(function(r){var i=f$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Sr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,Ar=!1;break e;case 3:$t=a.stateNode.containerInfo,Ar=!0;break e;case 4:$t=a.stateNode.containerInfo,Ar=!0;break e}a=a.return}if($t===null)throw Error(W(160));AD(s,o,i),$t=null,Ar=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ct(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PD(e,t),e=e.sibling}function PD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sr(e,t),qr(t),r&4){try{ch(3,t,t.return),qg(3,t)}catch(S){ct(t,t.return,S)}try{ch(5,t,t.return)}catch(S){ct(t,t.return,S)}}break;case 1:Sr(e,t),qr(t),r&512&&n!==null&&Nl(n,n.return);break;case 5:if(Sr(e,t),qr(t),r&512&&n!==null&&Nl(n,n.return),t.flags&32){var i=t.stateNode;try{Lh(i,"")}catch(S){ct(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&J1(i,s),ew(a,o);var u=ew(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?rk(i,d):c==="dangerouslySetInnerHTML"?tk(i,d):c==="children"?Lh(i,d):M0(i,c,d,u)}switch(a){case"input":X_(i,s);break;case"textarea":Z1(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Kl(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Kl(i,!!s.multiple,s.defaultValue,!0):Kl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wh]=s}catch(S){ct(t,t.return,S)}}break;case 6:if(Sr(e,t),qr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){ct(t,t.return,S)}}break;case 3:if(Sr(e,t),qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bh(e.containerInfo)}catch(S){ct(t,t.return,S)}break;case 4:Sr(e,t),qr(t);break;case 13:Sr(e,t),qr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fE=ft())),r&4&&gR(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(u=tn)||c,Sr(e,t),tn=u):Sr(e,t),qr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(J=t,c=t.child;c!==null;){for(d=J=c;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:ch(4,f,f.return);break;case 1:Nl(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){ct(r,n,S)}}break;case 5:Nl(f,f.return);break;case 22:if(f.memoizedState!==null){vR(d);continue}}p!==null?(p.return=f,J=p):vR(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nk("display",o))}catch(S){ct(t,t.return,S)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){ct(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Sr(e,t),qr(t),r&4&&gR(t);break;case 21:break;default:Sr(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xD(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lh(i,""),r.flags&=-33);var s=mR(t);Pw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=mR(t);Aw(t,a,o);break;default:throw Error(W(161))}}catch(l){ct(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function s$(t,e,n){J=t,kD(t)}function kD(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Uf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||tn;a=Uf;var u=tn;if(Uf=o,(tn=l)&&!u)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?_R(i):l!==null?(l.return=o,J=l):_R(i);for(;s!==null;)J=s,kD(s),s=s.sibling;J=i,Uf=a,tn=u}yR(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):yR(t)}}function yR(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||qg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Cr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Bh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}tn||e.flags&512&&xw(e)}catch(f){ct(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function vR(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function _R(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qg(4,e)}catch(l){ct(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ct(e,i,l)}}var s=e.return;try{xw(e)}catch(l){ct(e,s,l)}break;case 5:var o=e.return;try{xw(e)}catch(l){ct(e,o,l)}}}catch(l){ct(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var o$=Math.ceil,Om=Yi.ReactCurrentDispatcher,hE=Yi.ReactCurrentOwner,lr=Yi.ReactCurrentBatchConfig,xe=0,Ft=null,vt=null,qt=0,Fn=0,Vl=yo(0),Ct=0,Qh=null,Ea=0,Gg=0,dE=0,hh=null,En=null,fE=0,du=1/0,Ci=null,Mm=!1,kw=null,Js=null,zf=!1,Hs=null,Lm=0,dh=0,Dw=null,xp=-1,Ap=0;function mn(){return xe&6?ft():xp!==-1?xp:xp=ft()}function Zs(t){return t.mode&1?xe&2&&qt!==0?qt&-qt:z4.transition!==null?(Ap===0&&(Ap=mk()),Ap):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:Ek(t.type)),t):1}function Lr(t,e,n,r){if(50<dh)throw dh=0,Dw=null,Error(W(185));Rd(t,n,r),(!(xe&2)||t!==Ft)&&(t===Ft&&(!(xe&2)&&(Gg|=n),Ct===4&&Fs(t,qt)),xn(t,r),n===1&&xe===0&&!(e.mode&1)&&(du=ft()+500,Wg&&vo()))}function xn(t,e){var n=t.callbackNode;zj(t,e);var r=vm(t,t===Ft?qt:0);if(r===0)n!==null&&xI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xI(n),e===1)t.tag===0?U4(wR.bind(null,t)):$k(wR.bind(null,t)),F4(function(){!(xe&6)&&vo()}),n=null;else{switch(gk(r)){case 1:n=B0;break;case 4:n=fk;break;case 16:n=ym;break;case 536870912:n=pk;break;default:n=ym}n=BD(n,DD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DD(t,e){if(xp=-1,Ap=0,xe&6)throw Error(W(327));var n=t.callbackNode;if(Yl()&&t.callbackNode!==n)return null;var r=vm(t,t===Ft?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nm(t,r);else{e=r;var i=xe;xe|=2;var s=MD();(Ft!==t||qt!==e)&&(Ci=null,du=ft()+500,ha(t,e));do try{u$();break}catch(a){OD(t,a)}while(!0);J0(),Om.current=s,xe=i,vt!==null?e=0:(Ft=null,qt=0,e=Ct)}if(e!==0){if(e===2&&(i=sw(t),i!==0&&(r=i,e=Ow(t,i))),e===1)throw n=Qh,ha(t,0),Fs(t,r),xn(t,ft()),n;if(e===6)Fs(t,r);else{if(i=t.current.alternate,!(r&30)&&!a$(i)&&(e=Nm(t,r),e===2&&(s=sw(t),s!==0&&(r=s,e=Ow(t,s))),e===1))throw n=Qh,ha(t,0),Fs(t,r),xn(t,ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:zo(t,En,Ci);break;case 3:if(Fs(t,r),(r&130023424)===r&&(e=fE+500-ft(),10<e)){if(vm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=fw(zo.bind(null,t,En,Ci),e);break}zo(t,En,Ci);break;case 4:if(Fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Mr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o$(r/1960))-r,10<r){t.timeoutHandle=fw(zo.bind(null,t,En,Ci),r);break}zo(t,En,Ci);break;case 5:zo(t,En,Ci);break;default:throw Error(W(329))}}}return xn(t,ft()),t.callbackNode===n?DD.bind(null,t):null}function Ow(t,e){var n=hh;return t.current.memoizedState.isDehydrated&&(ha(t,e).flags|=256),t=Nm(t,e),t!==2&&(e=En,En=n,e!==null&&Mw(e)),t}function Mw(t){En===null?En=t:En.push.apply(En,t)}function a$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~dE,e&=~Gg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mr(e),r=1<<n;t[n]=-1,e&=~r}}function wR(t){if(xe&6)throw Error(W(327));Yl();var e=vm(t,0);if(!(e&1))return xn(t,ft()),null;var n=Nm(t,e);if(t.tag!==0&&n===2){var r=sw(t);r!==0&&(e=r,n=Ow(t,r))}if(n===1)throw n=Qh,ha(t,0),Fs(t,e),xn(t,ft()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zo(t,En,Ci),xn(t,ft()),null}function pE(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(du=ft()+500,Wg&&vo())}}function Ta(t){Hs!==null&&Hs.tag===0&&!(xe&6)&&Yl();var e=xe;xe|=1;var n=lr.transition,r=Ve;try{if(lr.transition=null,Ve=1,t)return t()}finally{Ve=r,lr.transition=n,xe=e,!(xe&6)&&vo()}}function mE(){Fn=Vl.current,Ge(Vl)}function ha(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,V4(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(X0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tm();break;case 3:cu(),Ge(Rn),Ge(an),iE();break;case 5:rE(r);break;case 4:cu();break;case 13:Ge(tt);break;case 19:Ge(tt);break;case 10:Z0(r.type._context);break;case 22:case 23:mE()}n=n.return}if(Ft=t,vt=t=eo(t.current,null),qt=Fn=e,Ct=0,Qh=null,dE=Gg=Ea=0,En=hh=null,ta!==null){for(e=0;e<ta.length;e++)if(n=ta[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ta=null}return t}function OD(t,e){do{var n=vt;try{if(J0(),Ip.current=Dm,km){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}km=!1}if(Sa=0,Vt=Rt=it=null,uh=!1,qh=0,hE.current=null,n===null||n.return===null){Ct=1,Qh=e,vt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=aR(o);if(p!==null){p.flags&=-257,lR(p,o,a,s,e),p.mode&1&&oR(s,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var S=new Set;S.add(l),e.updateQueue=S}else y.add(l);break e}else{if(!(e&1)){oR(s,u,e),gE();break e}l=Error(W(426))}}else if(Ye&&a.mode&1){var T=aR(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),lR(T,o,a,s,e),Q0(hu(l,a));break e}}s=l=hu(l,a),Ct!==4&&(Ct=2),hh===null?hh=[s]:hh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=gD(s,l,e);eR(s,v);break e;case 1:a=l;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Js===null||!Js.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=yD(s,a,e);eR(s,x);break e}}s=s.return}while(s!==null)}ND(n)}catch(O){e=O,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function MD(){var t=Om.current;return Om.current=Dm,t===null?Dm:t}function gE(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Ft===null||!(Ea&268435455)&&!(Gg&268435455)||Fs(Ft,qt)}function Nm(t,e){var n=xe;xe|=2;var r=MD();(Ft!==t||qt!==e)&&(Ci=null,ha(t,e));do try{l$();break}catch(i){OD(t,i)}while(!0);if(J0(),xe=n,Om.current=r,vt!==null)throw Error(W(261));return Ft=null,qt=0,Ct}function l$(){for(;vt!==null;)LD(vt)}function u$(){for(;vt!==null&&!Mj();)LD(vt)}function LD(t){var e=FD(t.alternate,t,Fn);t.memoizedProps=t.pendingProps,e===null?ND(t):vt=e,hE.current=null}function ND(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=n$(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,vt=null;return}}else if(n=t$(n,e,Fn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Ct===0&&(Ct=5)}function zo(t,e,n){var r=Ve,i=lr.transition;try{lr.transition=null,Ve=1,c$(t,e,n,r)}finally{lr.transition=i,Ve=r}return null}function c$(t,e,n,r){do Yl();while(Hs!==null);if(xe&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Wj(t,s),t===Ft&&(vt=Ft=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zf||(zf=!0,BD(ym,function(){return Yl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=lr.transition,lr.transition=null;var o=Ve;Ve=1;var a=xe;xe|=4,hE.current=null,i$(t,n),PD(n,t),P4(hw),_m=!!cw,hw=cw=null,t.current=n,s$(n),Lj(),xe=a,Ve=o,lr.transition=s}else t.current=n;if(zf&&(zf=!1,Hs=t,Lm=i),s=t.pendingLanes,s===0&&(Js=null),Fj(n.stateNode),xn(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mm)throw Mm=!1,t=kw,kw=null,t;return Lm&1&&t.tag!==0&&Yl(),s=t.pendingLanes,s&1?t===Dw?dh++:(dh=0,Dw=t):dh=0,vo(),null}function Yl(){if(Hs!==null){var t=gk(Lm),e=lr.transition,n=Ve;try{if(lr.transition=null,Ve=16>t?16:t,Hs===null)var r=!1;else{if(t=Hs,Hs=null,Lm=0,xe&6)throw Error(W(331));var i=xe;for(xe|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:ch(8,c,s)}var d=c.child;if(d!==null)d.return=c,J=d;else for(;J!==null;){c=J;var f=c.sibling,p=c.return;if(CD(c),c===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ch(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,J=v;break e}J=s.return}}var g=t.current;for(J=g;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=g;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qg(9,a)}}catch(O){ct(a,a.return,O)}if(a===o){J=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,J=x;break e}J=a.return}}if(xe=i,vo(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(Bg,t)}catch{}r=!0}return r}finally{Ve=n,lr.transition=e}}return!1}function SR(t,e,n){e=hu(n,e),e=gD(t,e,1),t=Ys(t,e,1),e=mn(),t!==null&&(Rd(t,1,e),xn(t,e))}function ct(t,e,n){if(t.tag===3)SR(t,t,n);else for(;e!==null;){if(e.tag===3){SR(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Js===null||!Js.has(r))){t=hu(n,t),t=yD(e,t,1),e=Ys(e,t,1),t=mn(),e!==null&&(Rd(e,1,t),xn(e,t));break}}e=e.return}}function h$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mn(),t.pingedLanes|=t.suspendedLanes&n,Ft===t&&(qt&n)===n&&(Ct===4||Ct===3&&(qt&130023424)===qt&&500>ft()-fE?ha(t,0):dE|=n),xn(t,e)}function VD(t,e){e===0&&(t.mode&1?(e=Of,Of<<=1,!(Of&130023424)&&(Of=4194304)):e=1);var n=mn();t=Ui(t,e),t!==null&&(Rd(t,e,n),xn(t,n))}function d$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VD(t,n)}function f$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),VD(t,n)}var FD;FD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,e$(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,Ye&&e.flags&1048576&&Uk(e,Rm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cp(t,e),t=e.pendingProps;var i=au(e,an.current);Ql(e,n),i=oE(null,e,r,t,i,n);var s=aE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cn(r)?(s=!0,bm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tE(e),i.updater=Kg,e.stateNode=i,i._reactInternals=e,ww(e,r,t,n),e=Tw(null,e,r,!0,s,n)):(e.tag=0,Ye&&s&&G0(e),dn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=m$(r),t=Cr(r,t),i){case 0:e=Ew(null,e,r,t,n);break e;case 1:e=hR(null,e,r,t,n);break e;case 11:e=uR(null,e,r,t,n);break e;case 14:e=cR(null,e,r,Cr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),Ew(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),hR(t,e,r,i,n);case 3:e:{if(SD(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Gk(t,e),Am(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hu(Error(W(423)),e),e=dR(t,e,r,n,i);break e}else if(r!==i){i=hu(Error(W(424)),e),e=dR(t,e,r,n,i);break e}else for($n=Qs(e.stateNode.containerInfo.firstChild),zn=e,Ye=!0,kr=null,n=Kk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lu(),r===i){e=zi(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return Xk(e),t===null&&yw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,dw(r,i)?o=null:s!==null&&dw(r,s)&&(e.flags|=32),wD(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&yw(e),null;case 13:return ED(t,e,n);case 4:return nE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uu(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),uR(t,e,r,i,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,We(Cm,r._currentValue),r._currentValue=o,s!==null)if(Nr(s.value,o)){if(s.children===i.children&&!Rn.current){e=zi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ni(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),vw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ql(e,n),i=dr(i),r=r(i),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,i=Cr(r,e.pendingProps),i=Cr(r.type,i),cR(t,e,r,i,n);case 15:return vD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),Cp(t,e),e.tag=1,Cn(r)?(t=!0,bm(e)):t=!1,Ql(e,n),mD(e,r,i),ww(e,r,i,n),Tw(null,e,r,!0,t,n);case 19:return TD(t,e,n);case 22:return _D(t,e,n)}throw Error(W(156,e.tag))};function BD(t,e){return dk(t,e)}function p$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(t,e,n,r){return new p$(t,e,n,r)}function yE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m$(t){if(typeof t=="function")return yE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===N0)return 11;if(t===V0)return 14}return 2}function eo(t,e){var n=t.alternate;return n===null?(n=ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cl:return da(n.children,i,s,e);case L0:o=8,i|=8;break;case W_:return t=ir(12,n,e,i|2),t.elementType=W_,t.lanes=s,t;case H_:return t=ir(13,n,e,i),t.elementType=H_,t.lanes=s,t;case K_:return t=ir(19,n,e,i),t.elementType=K_,t.lanes=s,t;case X1:return Xg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q1:o=10;break e;case G1:o=9;break e;case N0:o=11;break e;case V0:o=14;break e;case Ms:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=ir(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function da(t,e,n,r){return t=ir(7,t,r,e),t.lanes=n,t}function Xg(t,e,n,r){return t=ir(22,t,r,e),t.elementType=X1,t.lanes=n,t.stateNode={isHidden:!1},t}function xv(t,e,n){return t=ir(6,t,null,e),t.lanes=n,t}function Av(t,e,n){return e=ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uv(0),this.expirationTimes=uv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vE(t,e,n,r,i,s,o,a,l){return t=new g$(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ir(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tE(s),t}function y$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jD(t){if(!t)return lo;t=t._reactInternals;e:{if(Fa(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Cn(n))return jk(t,n,e)}return e}function $D(t,e,n,r,i,s,o,a,l){return t=vE(n,r,!0,t,i,s,o,a,l),t.context=jD(null),n=t.current,r=mn(),i=Zs(n),s=Ni(r,i),s.callback=e??null,Ys(n,s,i),t.current.lanes=i,Rd(t,i,r),xn(t,r),t}function Qg(t,e,n,r){var i=e.current,s=mn(),o=Zs(i);return n=jD(n),e.context===null?e.context=n:e.pendingContext=n,e=Ni(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ys(i,e,o),t!==null&&(Lr(t,i,o,s),bp(t,i,o)),o}function Vm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ER(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _E(t,e){ER(t,e),(t=t.alternate)&&ER(t,e)}function v$(){return null}var UD=typeof reportError=="function"?reportError:function(t){console.error(t)};function wE(t){this._internalRoot=t}Yg.prototype.render=wE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Qg(t,e,null,null)};Yg.prototype.unmount=wE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ta(function(){Qg(null,t,null,null)}),e[$i]=null}};function Yg(t){this._internalRoot=t}Yg.prototype.unstable_scheduleHydration=function(t){if(t){var e=_k();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vs.length&&e!==0&&e<Vs[n].priority;n++);Vs.splice(n,0,t),n===0&&Sk(t)}};function SE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function TR(){}function _$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Vm(o);s.call(u)}}var o=$D(e,r,t,0,null,!1,!1,"",TR);return t._reactRootContainer=o,t[$i]=o.current,Uh(t.nodeType===8?t.parentNode:t),Ta(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Vm(l);a.call(u)}}var l=vE(t,0,!1,null,null,!1,!1,"",TR);return t._reactRootContainer=l,t[$i]=l.current,Uh(t.nodeType===8?t.parentNode:t),Ta(function(){Qg(e,l,n,r)}),l}function Zg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Vm(o);a.call(l)}}Qg(e,o,t,i)}else o=_$(n,e,t,i,r);return Vm(o)}yk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bc(e.pendingLanes);n!==0&&(j0(e,n|1),xn(e,ft()),!(xe&6)&&(du=ft()+500,vo()))}break;case 13:Ta(function(){var r=Ui(t,1);if(r!==null){var i=mn();Lr(r,t,1,i)}}),_E(t,1)}};$0=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var n=mn();Lr(e,t,134217728,n)}_E(t,134217728)}};vk=function(t){if(t.tag===13){var e=Zs(t),n=Ui(t,e);if(n!==null){var r=mn();Lr(n,t,e,r)}_E(t,e)}};_k=function(){return Ve};wk=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};nw=function(t,e,n){switch(e){case"input":if(X_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zg(r);if(!i)throw Error(W(90));Y1(r),X_(r,i)}}}break;case"textarea":Z1(t,n);break;case"select":e=n.value,e!=null&&Kl(t,!!n.multiple,e,!1)}};ok=pE;ak=Ta;var w$={usingClientEntryPoint:!1,Events:[xd,kl,zg,ik,sk,pE]},Ic={findFiberByHostInstance:ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S$={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ck(t),t===null?null:t.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||v$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{Bg=Wf.inject(S$),ai=Wf}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w$;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!SE(e))throw Error(W(200));return y$(t,e,null,n)};qn.createRoot=function(t,e){if(!SE(t))throw Error(W(299));var n=!1,r="",i=UD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vE(t,1,!1,null,null,n,!1,r,i),t[$i]=e.current,Uh(t.nodeType===8?t.parentNode:t),new wE(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=ck(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return Ta(t)};qn.hydrate=function(t,e,n){if(!Jg(e))throw Error(W(200));return Zg(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!SE(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=UD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$D(e,null,t,1,n??null,i,!1,s,o),t[$i]=e.current,Uh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Yg(e)};qn.render=function(t,e,n){if(!Jg(e))throw Error(W(200));return Zg(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!Jg(t))throw Error(W(40));return t._reactRootContainer?(Ta(function(){Zg(null,null,t,!1,function(){t._reactRootContainer=null,t[$i]=null})}),!0):!1};qn.unstable_batchedUpdates=pE;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jg(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Zg(t,e,n,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function zD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zD)}catch(t){console.error(t)}}zD(),z1.exports=qn;var WD=z1.exports;const E$=Pu(WD);var bR=WD;U_.createRoot=bR.createRoot,U_.hydrateRoot=bR.hydrateRoot;var T$=t=>t.disabled||Array.isArray(t.accessibilityStates)&&t.accessibilityStates.indexOf("disabled")>-1,b$={adjustable:"slider",button:"button",header:"heading",image:"img",imagebutton:null,keyboardkey:null,label:null,link:"link",none:"presentation",search:"search",summary:"region",text:null},HD=t=>{var e=t.accessibilityRole,n=t.role,r=n||e;if(r){var i=b$[r];if(i!==null)return i||r}},I$={article:"article",banner:"header",blockquote:"blockquote",button:"button",code:"code",complementary:"aside",contentinfo:"footer",deletion:"del",emphasis:"em",figure:"figure",insertion:"ins",form:"form",list:"ul",listitem:"li",main:"main",navigation:"nav",paragraph:"p",region:"section",strong:"strong"},R$={},C$=function(e){e===void 0&&(e=R$);var n=e.role||e.accessibilityRole;if(n==="label")return"label";var r=HD(e);if(r){if(r==="heading"){var i=e.accessibilityLevel||e["aria-level"];return i!=null?"h"+i:"h1"}return I$[r]}},KD={isDisabled:T$,propsToAccessibilityComponent:C$,propsToAriaRole:HD};function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function x$(t,e){if(Yh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A$(t){var e=x$(t,"string");return Yh(e)=="symbol"?e:e+""}function P$(t,e,n){return(e=A$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(n),!0).forEach(function(r){P$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function An(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},k$=["ms","Moz","O","Webkit"],D$=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(kp).forEach(t=>{k$.forEach(e=>{kp[D$(e,t)]=kp[t]})});var O$=t=>t==="currentcolor"||t==="currentColor"||t==="inherit"||t.indexOf("var(")===0;function M$(t){if(typeof t=="number")return t>>>0===t&&t>=0&&t<=4294967295?t:null;if(typeof t!="string")return null;const e=N$();let n;if(n=e.hex6.exec(t))return parseInt(n[1]+"ff",16)>>>0;const r=V$(t);return r??((n=e.rgb.exec(t))?(bi(n[1])<<24|bi(n[2])<<16|bi(n[3])<<8|255)>>>0:(n=e.rgba.exec(t))?n[6]!==void 0?(bi(n[6])<<24|bi(n[7])<<16|bi(n[8])<<8|Kf(n[9]))>>>0:(bi(n[2])<<24|bi(n[3])<<16|bi(n[4])<<8|Kf(n[5]))>>>0:(n=e.hex3.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=e.hex8.exec(t))?parseInt(n[1],16)>>>0:(n=e.hex4.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=e.hsl.exec(t))?(Pv(Hf(n[1]),bs(n[2]),bs(n[3]))|255)>>>0:(n=e.hsla.exec(t))?n[6]!==void 0?(Pv(Hf(n[6]),bs(n[7]),bs(n[8]))|Kf(n[9]))>>>0:(Pv(Hf(n[2]),bs(n[3]),bs(n[4]))|Kf(n[5]))>>>0:(n=e.hwb.exec(t))?(L$(Hf(n[1]),bs(n[2]),bs(n[3]))|255)>>>0:null)}function Jl(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Pv(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=Jl(i,r,t+1/3),o=Jl(i,r,t),a=Jl(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function L$(t,e,n){if(e+n>=1){const o=Math.round(e*255/(e+n));return o<<24|o<<16|o<<8}const r=Jl(0,1,t+1/3)*(1-e-n)+e,i=Jl(0,1,t)*(1-e-n)+e,s=Jl(0,1,t-1/3)*(1-e-n)+e;return Math.round(r*255)<<24|Math.round(i*255)<<16|Math.round(s*255)<<8}const Mt="[-+]?\\d*\\.?\\d+",Ts=Mt+"%";function kv(...t){return"\\(\\s*("+t.join(")\\s*,?\\s*(")+")\\s*\\)"}function RR(...t){return"\\(\\s*("+t.slice(0,t.length-1).join(")\\s*,?\\s*(")+")\\s*/\\s*("+t[t.length-1]+")\\s*\\)"}function CR(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}let Dv;function N$(){return Dv===void 0&&(Dv={rgb:new RegExp("rgb"+kv(Mt,Mt,Mt)),rgba:new RegExp("rgba("+CR(Mt,Mt,Mt,Mt)+"|"+RR(Mt,Mt,Mt,Mt)+")"),hsl:new RegExp("hsl"+kv(Mt,Ts,Ts)),hsla:new RegExp("hsla("+CR(Mt,Ts,Ts,Mt)+"|"+RR(Mt,Ts,Ts,Mt)+")"),hwb:new RegExp("hwb"+kv(Mt,Ts,Ts)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/}),Dv}function bi(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Hf(t){return(parseFloat(t)%360+360)%360/360}function Kf(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function bs(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function V$(t){switch(t){case"transparent":return 0;case"aliceblue":return 4042850303;case"antiquewhite":return 4209760255;case"aqua":return 16777215;case"aquamarine":return 2147472639;case"azure":return 4043309055;case"beige":return 4126530815;case"bisque":return 4293182719;case"black":return 255;case"blanchedalmond":return 4293643775;case"blue":return 65535;case"blueviolet":return 2318131967;case"brown":return 2771004159;case"burlywood":return 3736635391;case"burntsienna":return 3934150143;case"cadetblue":return 1604231423;case"chartreuse":return 2147418367;case"chocolate":return 3530104575;case"coral":return 4286533887;case"cornflowerblue":return 1687547391;case"cornsilk":return 4294499583;case"crimson":return 3692313855;case"cyan":return 16777215;case"darkblue":return 35839;case"darkcyan":return 9145343;case"darkgoldenrod":return 3095792639;case"darkgray":return 2846468607;case"darkgreen":return 6553855;case"darkgrey":return 2846468607;case"darkkhaki":return 3182914559;case"darkmagenta":return 2332068863;case"darkolivegreen":return 1433087999;case"darkorange":return 4287365375;case"darkorchid":return 2570243327;case"darkred":return 2332033279;case"darksalmon":return 3918953215;case"darkseagreen":return 2411499519;case"darkslateblue":return 1211993087;case"darkslategray":return 793726975;case"darkslategrey":return 793726975;case"darkturquoise":return 13554175;case"darkviolet":return 2483082239;case"deeppink":return 4279538687;case"deepskyblue":return 12582911;case"dimgray":return 1768516095;case"dimgrey":return 1768516095;case"dodgerblue":return 512819199;case"firebrick":return 2988581631;case"floralwhite":return 4294635775;case"forestgreen":return 579543807;case"fuchsia":return 4278255615;case"gainsboro":return 3705462015;case"ghostwhite":return 4177068031;case"gold":return 4292280575;case"goldenrod":return 3668254975;case"gray":return 2155905279;case"green":return 8388863;case"greenyellow":return 2919182335;case"grey":return 2155905279;case"honeydew":return 4043305215;case"hotpink":return 4285117695;case"indianred":return 3445382399;case"indigo":return 1258324735;case"ivory":return 4294963455;case"khaki":return 4041641215;case"lavender":return 3873897215;case"lavenderblush":return 4293981695;case"lawngreen":return 2096890111;case"lemonchiffon":return 4294626815;case"lightblue":return 2916673279;case"lightcoral":return 4034953471;case"lightcyan":return 3774873599;case"lightgoldenrodyellow":return 4210742015;case"lightgray":return 3553874943;case"lightgreen":return 2431553791;case"lightgrey":return 3553874943;case"lightpink":return 4290167295;case"lightsalmon":return 4288707327;case"lightseagreen":return 548580095;case"lightskyblue":return 2278488831;case"lightslategray":return 2005441023;case"lightslategrey":return 2005441023;case"lightsteelblue":return 2965692159;case"lightyellow":return 4294959359;case"lime":return 16711935;case"limegreen":return 852308735;case"linen":return 4210091775;case"magenta":return 4278255615;case"maroon":return 2147483903;case"mediumaquamarine":return 1724754687;case"mediumblue":return 52735;case"mediumorchid":return 3126187007;case"mediumpurple":return 2473647103;case"mediumseagreen":return 1018393087;case"mediumslateblue":return 2070474495;case"mediumspringgreen":return 16423679;case"mediumturquoise":return 1221709055;case"mediumvioletred":return 3340076543;case"midnightblue":return 421097727;case"mintcream":return 4127193855;case"mistyrose":return 4293190143;case"moccasin":return 4293178879;case"navajowhite":return 4292783615;case"navy":return 33023;case"oldlace":return 4260751103;case"olive":return 2155872511;case"olivedrab":return 1804477439;case"orange":return 4289003775;case"orangered":return 4282712319;case"orchid":return 3664828159;case"palegoldenrod":return 4008225535;case"palegreen":return 2566625535;case"paleturquoise":return 2951671551;case"palevioletred":return 3681588223;case"papayawhip":return 4293907967;case"peachpuff":return 4292524543;case"peru":return 3448061951;case"pink":return 4290825215;case"plum":return 3718307327;case"powderblue":return 2967529215;case"purple":return 2147516671;case"rebeccapurple":return 1714657791;case"red":return 4278190335;case"rosybrown":return 3163525119;case"royalblue":return 1097458175;case"saddlebrown":return 2336560127;case"salmon":return 4202722047;case"sandybrown":return 4104413439;case"seagreen":return 780883967;case"seashell":return 4294307583;case"sienna":return 2689740287;case"silver":return 3233857791;case"skyblue":return 2278484991;case"slateblue":return 1784335871;case"slategray":return 1887473919;case"slategrey":return 1887473919;case"snow":return 4294638335;case"springgreen":return 16744447;case"steelblue":return 1182971135;case"tan":return 3535047935;case"teal":return 8421631;case"thistle":return 3636451583;case"tomato":return 4284696575;case"turquoise":return 1088475391;case"violet":return 4001558271;case"wheat":return 4125012991;case"white":return 4294967295;case"whitesmoke":return 4126537215;case"yellow":return 4294902015;case"yellowgreen":return 2597139199}return null}var F$=M$;const B$=Pu(F$);var j$=t=>{if(t==null)return t;var e=B$(t);if(e!=null)return e=(e<<24|e>>>8)>>>0,e},qD=function(e,n){if(n===void 0&&(n=1),e!=null){if(typeof e=="string"&&O$(e))return e;var r=j$(e);if(r!=null){var i=r>>16&255,s=r>>8&255,o=r&255,a=(r>>24&255)/255,l=(a*n).toFixed(2);return"rgba("+i+","+s+","+o+","+l+")"}}},$$={backgroundColor:!0,borderColor:!0,borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0,color:!0,shadowColor:!0,textDecorationColor:!0,textShadowColor:!0};function ni(t,e){var n=t;return(e==null||!kp[e])&&typeof t=="number"?n=t+"px":e!=null&&$$[e]&&(n=qD(t)),n}var xt=!!(typeof window<"u"&&window.document&&window.document.createElement),U$={},z$=!xt||window.CSS!=null&&window.CSS.supports!=null&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),W$="monospace,monospace",xR='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif',H$={borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderBlockColor:["borderTopColor","borderBottomColor"],borderInlineColor:["borderRightColor","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderInlineStyle:["borderRightStyle","borderLeftStyle"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderInlineWidth:["borderRightWidth","borderLeftWidth"],insetBlock:["top","bottom"],insetInline:["left","right"],marginBlock:["marginTop","marginBottom"],marginInline:["marginRight","marginLeft"],paddingBlock:["paddingTop","paddingBottom"],paddingInline:["paddingRight","paddingLeft"],overflow:["overflowX","overflowY"],overscrollBehavior:["overscrollBehaviorX","overscrollBehaviorY"],borderBlockStartColor:["borderTopColor"],borderBlockStartStyle:["borderTopStyle"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndColor:["borderBottomColor"],borderBlockEndStyle:["borderBottomStyle"],borderBlockEndWidth:["borderBottomWidth"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],insetBlockEnd:["bottom"],insetBlockStart:["top"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"]},GD=(t,e)=>{if(!t)return U$;var n={},r=function(){var a=t[i];if(a==null)return"continue";if(i==="backgroundClip")a==="text"&&(n.backgroundClip=a,n.WebkitBackgroundClip=a);else if(i==="flex")a===-1?(n.flexGrow=0,n.flexShrink=1,n.flexBasis="auto"):n.flex=a;else if(i==="font")n[i]=a.replace("System",xR);else if(i==="fontFamily")if(a.indexOf("System")>-1){var l=a.split(/,\s*/);l[l.indexOf("System")]=xR,n[i]=l.join(",")}else a==="monospace"?n[i]=W$:n[i]=a;else if(i==="textDecorationLine")z$?n.textDecorationLine=a:n.textDecoration=a;else if(i==="writingDirection")n.direction=a;else{var u=ni(t[i],i),c=H$[i];e&&i==="inset"?(t.insetInline==null&&(n.left=u,n.right=u),t.insetBlock==null&&(n.top=u,n.bottom=u)):e&&i==="margin"?(t.marginInline==null&&(n.marginLeft=u,n.marginRight=u),t.marginBlock==null&&(n.marginTop=u,n.marginBottom=u)):e&&i==="padding"?(t.paddingInline==null&&(n.paddingLeft=u,n.paddingRight=u),t.paddingBlock==null&&(n.paddingTop=u,n.paddingBottom=u)):c?c.forEach((d,f)=>{t[d]==null&&(n[d]=u)}):n[i]=u}};for(var i in t)var s=r();return n};function K$(t,e){for(var n=t.length,r=e^n,i=0,s;n>=4;)s=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),s^=s>>>24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)^s,n-=4,++i;switch(n){case 3:r^=(t.charCodeAt(i+2)&255)<<16;case 2:r^=(t.charCodeAt(i+1)&255)<<8;case 1:r^=t.charCodeAt(i)&255,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)}return r^=r>>>13,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16),r^=r>>>15,r>>>0}var q$=t=>K$(t,1).toString(36),G$=/[A-Z]/g,X$=/^ms-/,Ov={};function Q$(t){return"-"+t.toLowerCase()}function Y$(t){if(t in Ov)return Ov[t];var e=t.replace(G$,Q$);return Ov[t]=X$.test(e)?"-"+e:e}var XD={},EE={},ey={};Object.defineProperty(ey,"__esModule",{value:!0});ey.default=J$;function J$(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(EE,"__esModule",{value:!0});EE.default=nU;var Z$=ey,eU=tU(Z$);function tU(t){return t&&t.__esModule?t:{default:t}}function nU(t,e,n){var r=t[e];if(r&&n.hasOwnProperty(e))for(var i=(0,eU.default)(e),s=0;s<r.length;++s){var o=r[s]+i;n[o]||(n[o]=n[e])}return n}var TE={};Object.defineProperty(TE,"__esModule",{value:!0});TE.default=rU;function rU(t,e,n,r,i){for(var s=0,o=t.length;s<o;++s){var a=t[s](e,n,r,i);if(a)return a}}var bE={};Object.defineProperty(bE,"__esModule",{value:!0});bE.default=iU;function AR(t,e){t.indexOf(e)===-1&&t.push(e)}function iU(t,e){if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n)AR(t,e[n]);else AR(t,e)}var IE={};Object.defineProperty(IE,"__esModule",{value:!0});IE.default=sU;function sU(t){return t instanceof Object&&!Array.isArray(t)}Object.defineProperty(XD,"__esModule",{value:!0});var oU=XD.default=pU,aU=EE,lU=ty(aU),uU=TE,PR=ty(uU),cU=bE,hU=ty(cU),dU=IE,fU=ty(dU);function ty(t){return t&&t.__esModule?t:{default:t}}function pU(t){var e=t.prefixMap,n=t.plugins;return function r(i){for(var s in i){var o=i[s];if((0,fU.default)(o))i[s]=r(o);else if(Array.isArray(o)){for(var a=[],l=0,u=o.length;l<u;++l){var c=(0,PR.default)(n,s,o[l],i,e);(0,hU.default)(a,c||o[l])}a.length>0&&(i[s]=a)}else{var d=(0,PR.default)(n,s,o,i,e);d&&(i[s]=d),i=(0,lU.default)(e,s,i)}}return i}}var QD={};Object.defineProperty(QD,"__esModule",{value:!0});var mU=QD.default=gU;function gU(){return null}var YD={};function Dp(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dp=function(n){return typeof n}:Dp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dp(t)}function yU(t){return SU(t)||wU(t)||_U(t)||vU()}function vU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _U(t,e){if(t){if(typeof t=="string")return Lw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lw(t,e)}}function wU(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function SU(t){if(Array.isArray(t))return Lw(t)}function Lw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kR(t){return t.filter(function(e,n){return t.lastIndexOf(e)===n})}function JD(t){for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;++e){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];for(var i in r){var s=r[i],o=t[i];if(o&&s){if(Array.isArray(o)){t[i]=kR(o.concat(s));continue}if(Array.isArray(s)){t[i]=kR([o].concat(yU(s)));continue}if(Dp(s)==="object"){t[i]=JD({},o,s);continue}}t[i]=s}}return t}var EU=/-([a-z])/g,TU=/^Ms/g,Mv={};function bU(t){return t[1].toUpperCase()}function ZD(t){if(Mv.hasOwnProperty(t))return Mv[t];var e=t.replace(EU,bU).replace(TU,"ms");return Mv[t]=e,e}var IU=/[A-Z]/g,RU=/^ms-/,Lv={};function CU(t){return"-"+t.toLowerCase()}function eO(t){if(Lv.hasOwnProperty(t))return Lv[t];var e=t.replace(IU,CU);return Lv[t]=RU.test(e)?"-"+e:e}const xU=Object.freeze(Object.defineProperty({__proto__:null,default:eO},Symbol.toStringTag,{value:"Module"}));function ny(t){return eO(t)}function tO(t,e){return ny(t)+":"+e}function AU(t){var e="";for(var n in t){var r=t[n];typeof r!="string"&&typeof r!="number"||(e&&(e+=";"),e+=tO(n,r))}return e}var PU=/^(Webkit|Moz|O|ms)/;function kU(t){return PU.test(t)}var DU=/-webkit-|-moz-|-ms-/;function OU(t){return typeof t=="string"&&DU.test(t)}var Jh={borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DR=["animationIterationCount","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineClamp","order"],OR=["Webkit","ms","Moz","O"];function MU(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}for(var Nv=0,LU=DR.length;Nv<LU;++Nv){var MR=DR[Nv];Jh[MR]=!0;for(var Vv=0,NU=OR.length;Vv<NU;++Vv)Jh[MU(OR[Vv],MR)]=!0}for(var VU in Jh)Jh[ny(VU)]=!0;function FU(t){return Jh.hasOwnProperty(t)}var BU=/^(ms|Webkit|Moz|O)/;function nO(t){var e=t.replace(BU,"");return e.charAt(0).toLowerCase()+e.slice(1)}function jU(t){return nO(ZD(t))}function $U(t,e){return e.join(";"+ny(t)+":")}var UU=/(-ms-|-webkit-|-moz-|-o-)/g;function zU(t){return typeof t=="string"?t.replace(UU,""):t}const WU=Object.freeze(Object.defineProperty({__proto__:null,assignStyle:JD,camelCaseProperty:ZD,cssifyDeclaration:tO,cssifyObject:AU,hyphenateProperty:ny,isPrefixedProperty:kU,isPrefixedValue:OU,isUnitlessProperty:FU,normalizeProperty:jU,resolveArrayValue:$U,unprefixProperty:nO,unprefixValue:zU},Symbol.toStringTag,{value:"Module"})),rO=k1(WU);Object.defineProperty(YD,"__esModule",{value:!0});var HU=YD.default=XU,KU=rO,qU=/cross-fade\(/g,GU=["-webkit-",""];function XU(t,e){if(typeof e=="string"&&!(0,KU.isPrefixedValue)(e)&&e.indexOf("cross-fade(")!==-1)return GU.map(function(n){return e.replace(qU,n+"cross-fade(")})}var iO={};Object.defineProperty(iO,"__esModule",{value:!0});var QU=iO.default=ZU,YU=["-webkit-","-moz-",""],JU={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function ZU(t,e){if(t==="cursor"&&JU.hasOwnProperty(e))return YU.map(function(n){return n+e})}var sO={};Object.defineProperty(sO,"__esModule",{value:!0});var e3=sO.default=i3,t3=rO,n3=/filter\(/g,r3=["-webkit-",""];function i3(t,e){if(typeof e=="string"&&!(0,t3.isPrefixedValue)(e)&&e.indexOf("filter(")!==-1)return r3.map(function(n){return e.replace(n3,n+"filter(")})}var oO={},RE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=/-webkit-|-moz-|-ms-/;function n(r){return typeof r=="string"&&e.test(r)}})(RE);Object.defineProperty(oO,"__esModule",{value:!0});var s3=oO.default=c3,o3=RE,a3=l3(o3);function l3(t){return t&&t.__esModule?t:{default:t}}var u3=["-webkit-",""];function c3(t,e){if(typeof e=="string"&&!(0,a3.default)(e)&&e.indexOf("image-set(")>-1)return u3.map(function(n){return e.replace(/image-set\(/g,n+"image-set(")})}var aO={};Object.defineProperty(aO,"__esModule",{value:!0});var h3=aO.default=d3,LR={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};function d3(t,e,n){if(Object.prototype.hasOwnProperty.call(LR,t))for(var r=LR[t],i=0,s=r.length;i<s;++i)n[r[i]]=e}var lO={};Object.defineProperty(lO,"__esModule",{value:!0});var f3=lO.default=p3;function p3(t,e){if(t==="position"&&e==="sticky")return["-webkit-sticky","sticky"]}var uO={};Object.defineProperty(uO,"__esModule",{value:!0});var m3=uO.default=_3,g3=["-webkit-","-moz-",""],y3={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},v3={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function _3(t,e){if(y3.hasOwnProperty(t)&&v3.hasOwnProperty(e))return g3.map(function(n){return n+e})}var cO={},hO={};const w3=k1(xU);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var e=w3,n=r(e);function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,n.default)(s)}})(hO);Object.defineProperty(cO,"__esModule",{value:!0});var S3=cO.default=P3,E3=hO,T3=CE(E3),b3=RE,I3=CE(b3),R3=ey,NR=CE(R3);function CE(t){return t&&t.__esModule?t:{default:t}}var C3={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},x3={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function A3(t,e){if((0,I3.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,i=n.length;r<i;++r){var s=n[r],o=[s];for(var a in e){var l=(0,T3.default)(a);if(s.indexOf(l)>-1&&l!=="order")for(var u=e[a],c=0,d=u.length;c<d;++c)o.unshift(s.replace(l,x3[u[c]]+l))}n[r]=o.join(",")}return n.join(",")}function P3(t,e,n,r){if(typeof e=="string"&&C3.hasOwnProperty(t)){var i=A3(e,r),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-moz-|-ms-/.test(a)}).join(",");if(t.indexOf("Webkit")>-1)return s;var o=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-webkit-|-ms-/.test(a)}).join(",");return t.indexOf("Moz")>-1?o:(n["Webkit"+(0,NR.default)(t)]=s,n["Moz"+(0,NR.default)(t)]=o,i)}}var ze=["Webkit"],k3=["Moz"],D3=["Webkit","Moz"],lt=["Webkit","ms"],O3=["Webkit","Moz","ms"];const M3={plugins:[mU,HU,QU,e3,s3,h3,f3,m3,S3],prefixMap:{appearance:O3,userSelect:D3,textEmphasisPosition:lt,textEmphasis:lt,textEmphasisStyle:lt,textEmphasisColor:lt,boxDecorationBreak:lt,clipPath:ze,maskImage:lt,maskMode:lt,maskRepeat:lt,maskPosition:lt,maskClip:lt,maskOrigin:lt,maskSize:lt,maskComposite:lt,mask:lt,maskBorderSource:lt,maskBorderMode:lt,maskBorderSlice:lt,maskBorderWidth:lt,maskBorderOutset:lt,maskBorderRepeat:lt,maskBorder:lt,maskType:lt,textDecorationStyle:ze,textDecorationSkip:ze,textDecorationLine:ze,textDecorationColor:ze,filter:ze,breakAfter:ze,breakBefore:ze,breakInside:ze,columnCount:ze,columnFill:ze,columnGap:ze,columnRule:ze,columnRuleColor:ze,columnRuleStyle:ze,columnRuleWidth:ze,columns:ze,columnSpan:ze,columnWidth:ze,backdropFilter:ze,hyphens:ze,flowInto:ze,flowFrom:ze,regionFragment:ze,textOrientation:ze,tabSize:k3,fontKerning:ze,textSizeAdjust:ze}};var L3=oU(M3),N3=["animationKeyframes"],VR=new Map,V3={},F3=1,B3=3,j3={borderColor:2,borderRadius:2,borderStyle:2,borderWidth:2,display:2,flex:2,inset:2,margin:2,overflow:2,overscrollBehavior:2,padding:2,insetBlock:2.1,insetInline:2.1,marginInline:2.1,marginBlock:2.1,paddingInline:2.1,paddingBlock:2.1,borderBlockStartColor:2.2,borderBlockStartStyle:2.2,borderBlockStartWidth:2.2,borderBlockEndColor:2.2,borderBlockEndStyle:2.2,borderBlockEndWidth:2.2,borderInlineStartColor:2.2,borderInlineStartStyle:2.2,borderInlineStartWidth:2.2,borderInlineEndColor:2.2,borderInlineEndStyle:2.2,borderInlineEndWidth:2.2,borderEndStartRadius:2.2,borderEndEndRadius:2.2,borderStartStartRadius:2.2,borderStartEndRadius:2.2,insetBlockEnd:2.2,insetBlockStart:2.2,insetInlineEnd:2.2,insetInlineStart:2.2,marginBlockStart:2.2,marginBlockEnd:2.2,marginInlineStart:2.2,marginInlineEnd:2.2,paddingBlockStart:2.2,paddingBlockEnd:2.2,paddingInlineStart:2.2,paddingInlineEnd:2.2},Nw="borderTopLeftRadius",Vw="borderTopRightRadius",Fw="borderBottomLeftRadius",Bw="borderBottomRightRadius",jw="borderLeftColor",$w="borderLeftStyle",Uw="borderLeftWidth",zw="borderRightColor",Ww="borderRightStyle",Hw="borderRightWidth",Kw="right",qw="marginLeft",Gw="marginRight",Xw="paddingLeft",Qw="paddingRight",Yw="left",Fm={[Nw]:Vw,[Vw]:Nw,[Fw]:Bw,[Bw]:Fw,[jw]:zw,[$w]:Ww,[Uw]:Hw,[zw]:jw,[Ww]:$w,[Hw]:Uw,[Yw]:Kw,[qw]:Gw,[Gw]:qw,[Xw]:Qw,[Qw]:Xw,[Kw]:Yw},fh={borderStartStartRadius:Nw,borderStartEndRadius:Vw,borderEndStartRadius:Fw,borderEndEndRadius:Bw,borderInlineStartColor:jw,borderInlineStartStyle:$w,borderInlineStartWidth:Uw,borderInlineEndColor:zw,borderInlineEndStyle:Ww,borderInlineEndWidth:Hw,insetInlineEnd:Kw,insetInlineStart:Yw,marginInlineStart:qw,marginInlineEnd:Gw,paddingInlineStart:Xw,paddingInlineEnd:Qw},dO=["clear","float","textAlign"];function $3(t){var e={$$css:!0},n=[];function r(i,s,o){var a=W3(o,s),l=s+a,u=VR.get(l),c;if(u!=null)c=u[0],n.push(u[1]);else{var d=i!==s?l:a;c=xE("r",i,d);var f=j3[i]||B3,p=H3(c,s,o),y=[p,f];n.push(y),VR.set(l,[c,y])}return c}return Object.keys(t).sort().forEach(i=>{var s=t[i];if(s!=null){var o;if(dO.indexOf(i)>-1){var a=r(i,i,"left"),l=r(i,i,"right");s==="start"?o=[a,l]:s==="end"&&(o=[l,a])}var u=fh[i];if(u!=null){var c=r(i,u,s),d=r(i,Fm[u],s);o=[c,d]}if(i==="transitionProperty"){for(var f=Array.isArray(s)?s:[s],p=[],y=0;y<f.length;y++){var S=f[y];typeof S=="string"&&fh[S]!=null&&p.push(y)}if(p.length>0){var T=[...f],v=[...f];p.forEach(g=>{var w=T[g];if(typeof w=="string"){var x=fh[w],O=Fm[x];T[g]=x,v[g]=O;var D=r(i,i,T),b=r(i,i,v);o=[D,b]}})}}o==null?o=r(i,i,s):e.$$css$localize=!0,e[i]=o}}),[e,n]}function U3(t,e){var n={$$css:!0},r=[],i=t.animationKeyframes,s=An(t,N3),o=xE("css",e,JSON.stringify(t)),a="."+o,l;if(i!=null){var u=fO(i),c=u[0],d=u[1];l=c.join(","),r.push(...d)}var f=xi(ye(ye({},s),{},{animationName:l}));return r.push(""+a+f),n[o]=o,[n,[[r,F3]]]}function z3(t,e){var n=t||V3,r={},i={},s=function(){var u=n[o],c=o,d=u;if(!Object.prototype.hasOwnProperty.call(n,o)||u==null)return"continue";dO.indexOf(o)>-1&&(u==="start"?d=e?"right":"left":u==="end"&&(d=e?"left":"right"));var f=fh[o];if(f!=null&&(c=e?Fm[f]:f),o==="transitionProperty"){var p=Array.isArray(u)?u:[u];p.forEach((y,S)=>{if(typeof y=="string"){var T=fh[y];T!=null&&(p[S]=e?Fm[T]:T,d=p.join(" "))}})}r[c]||(i[c]=d),c===o&&(r[c]=!0)};for(var o in n)var a=s();return GD(i,!0)}function W3(t,e){var n=ni(t,e);return typeof n!="string"?JSON.stringify(n||""):n}function H3(t,e,n){var r=[],i="."+t;switch(e){case"animationKeyframes":{var s=fO(n),o=s[0],a=s[1],l=xi({animationName:o.join(",")});r.push(""+i+l,...a);break}case"placeholderTextColor":{var u=xi({color:n,opacity:1});r.push(i+"::-webkit-input-placeholder"+u,i+"::-moz-placeholder"+u,i+":-ms-input-placeholder"+u,i+"::placeholder"+u);break}case"pointerEvents":{var c=n;if(n==="auto"||n==="box-only"){if(c="auto!important",n==="box-only"){var d=xi({pointerEvents:"none"});r.push(i+">*"+d)}}else if((n==="none"||n==="box-none")&&(c="none!important",n==="box-none")){var f=xi({pointerEvents:"auto"});r.push(i+">*"+f)}var p=xi({pointerEvents:c});r.push(""+i+p);break}case"scrollbarWidth":{n==="none"&&r.push(i+"::-webkit-scrollbar{display:none}");var y=xi({scrollbarWidth:n});r.push(""+i+y);break}default:{var S=xi({[e]:n});r.push(""+i+S);break}}return r}function xi(t){var e=L3(GD(t)),n=Object.keys(e).map(r=>{var i=e[r],s=Y$(r);return Array.isArray(i)?i.map(o=>s+":"+o).join(";"):s+":"+i}).sort().join(";");return"{"+n+";}"}function xE(t,e,n){var r=q$(e+n);return t+"-"+r}function K3(t){var e=["-webkit-",""],n=xE("r","animation",JSON.stringify(t)),r="{"+Object.keys(t).map(s=>{var o=t[s],a=xi(o);return""+s+a}).join("")+"}",i=e.map(s=>"@"+s+"keyframes "+n+r);return[n,i]}function fO(t){if(typeof t=="number")throw new Error("Invalid CSS keyframes type: "+typeof t);var e=[],n=[],r=Array.isArray(t)?t:[t];return r.forEach(i=>{if(typeof i=="string")e.push(i);else{var s=K3(i),o=s[0],a=s[1];e.push(o),n.push(...a)}}),[e,n]}function Fv(t,e,n){if(xt){var r=e??document,i=r.getElementById(t);if(i==null)if(i=document.createElement("style"),i.setAttribute("id",t),typeof n=="string"&&i.appendChild(document.createTextNode(n)),r instanceof ShadowRoot)r.insertBefore(i,r.firstChild);else{var s=r.head;s&&s.insertBefore(i,s.firstChild)}return i.sheet}else return null}var q3=Array.prototype.slice;function Bv(t){var e={},n={};if(t!=null){var r;q3.call(t.cssRules).forEach((o,a)=>{var l=o.cssText;if(l.indexOf("stylesheet-group")>-1)r=Q3(o),e[r]={start:a,rules:[l]};else{var u=BR(l);u!=null&&(n[u]=!0,e[r].rules.push(l))}})}function i(o,a,l){var u=FR(e),c=u.indexOf(a),d=c+1,f=u[d],p=f!=null&&e[f].start!=null?e[f].start:o.cssRules.length,y=J3(o,l,p);if(y){e[a].start==null&&(e[a].start=p);for(var S=d;S<u.length;S+=1){var T=u[S],v=e[T].start||0;e[T].start=v+1}}return y}var s={getTextContent(){return FR(e).map(o=>{var a=e[o].rules,l=a.shift();return a.sort(),a.unshift(l),a.join(`
`)}).join(`
`)},insert(o,a){var l=Number(a);if(e[l]==null){var u=G3(l);e[l]={start:null,rules:[u]},t!=null&&i(t,l,u)}var c=BR(o);if(c!=null&&n[c]==null&&(n[c]=!0,e[l].rules.push(o),t!=null)){var d=i(t,l,o);d||e[l].rules.pop()}}};return s}function G3(t){return'[stylesheet-group="'+t+'"]{}'}var X3=/["']/g;function Q3(t){return Number(t.selectorText.split(X3)[1])}function FR(t){return Object.keys(t).map(Number).sort((e,n)=>e>n?1:-1)}var Y3=/\s*([,])\s*/g;function BR(t){var e=t.split("{")[0].trim();return e!==""?e.replace(Y3,"$1"):null}function J3(t,e,n){try{return t.insertRule(e,n),!0}catch{return!1}}var Z3="react-native-stylesheet",jv=new WeakMap,Er=[],jR=["html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0);}","body{margin:0;}","button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}","input::-webkit-search-cancel-button,input::-webkit-search-decoration,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}"];function e6(t,e){e===void 0&&(e=Z3);var n;if(xt){var r=document;if(Er.length===0)n=Bv(Fv(e)),jR.forEach(a=>{n.insert(a,0)}),jv.set(r,Er.length),Er.push(n);else{var i=jv.get(r);if(i==null){var s=Er[0],o=s!=null?s.getTextContent():"";n=Bv(Fv(e,r,o)),jv.set(r,Er.length),Er.push(n)}else n=Er[i]}}else Er.length===0?(n=Bv(Fv(e)),jR.forEach(a=>{n.insert(a,0)}),Er.push(n)):n=Er[0];return{getTextContent(){return n.getTextContent()},id:e,insert(a,l){Er.forEach(u=>{u.insert(a,l)})}}}var AE={};Object.defineProperty(AE,"__esModule",{value:!0});AE.localizeStyle=t6;var qf=new WeakMap,pO="$$css$localize";function $R(t,e){var n={};for(var r in t)if(r!==pO){var i=t[r];Array.isArray(i)?n[r]=e?i[1]:i[0]:n[r]=i}return n}function t6(t,e){if(t[pO]!=null){var n=e?1:0;if(qf.has(t)){var r=qf.get(t),i=r[n];return i==null&&(i=$R(t,e),r[n]=i,qf.set(t,r)),i}var s=$R(t,e),o=new Array(2);return o[n]=s,qf.set(t,o),s}return t}var n6=AE,r6={},mO={height:0,width:0},gO=t=>{var e=t.shadowColor,n=t.shadowOffset,r=t.shadowOpacity,i=t.shadowRadius,s=n||mO,o=s.height,a=s.width,l=ni(a),u=ni(o),c=ni(i||0),d=qD(e||"black",r);if(d!=null&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},i6=t=>{var e=t.textShadowColor,n=t.textShadowOffset,r=t.textShadowRadius,i=n||mO,s=i.height,o=i.width,a=r||0,l=ni(o),u=ni(s),c=ni(a),d=ni(e,"textShadowColor");if(d&&(s!==0||o!==0||a!==0)&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},s6=t=>{var e=Object.keys(t)[0],n=t[e];if(e==="matrix"||e==="matrix3d")return e+"("+n.join(",")+")";var r=ni(n,e);return e+"("+r+")"},o6=t=>t.map(s6).join(" "),a6={borderBottomEndRadius:"borderEndEndRadius",borderBottomStartRadius:"borderEndStartRadius",borderTopEndRadius:"borderStartEndRadius",borderTopStartRadius:"borderStartStartRadius",borderEndColor:"borderInlineEndColor",borderEndStyle:"borderInlineEndStyle",borderEndWidth:"borderInlineEndWidth",borderStartColor:"borderInlineStartColor",borderStartStyle:"borderInlineStartStyle",borderStartWidth:"borderInlineStartWidth",end:"insetInlineEnd",marginEnd:"marginInlineEnd",marginHorizontal:"marginInline",marginStart:"marginInlineStart",marginVertical:"marginBlock",paddingEnd:"paddingInlineEnd",paddingHorizontal:"paddingInline",paddingStart:"paddingInlineStart",paddingVertical:"paddingBlock",start:"insetInlineStart"},l6={elevation:!0,overlayColor:!0,resizeMode:!0,tintColor:!0},yO=function(e,n){n===void 0&&(n={});var r=e||r6,i={};if(n.shadow,r.shadowColor!=null||r.shadowOffset!=null||r.shadowOpacity!=null||r.shadowRadius!=null){var s=gO(r);if(s!=null&&i.boxShadow==null){var o=r.boxShadow,a=o?o+", "+s:s;i.boxShadow=a}}if(n.textShadow,r.textShadowColor!=null||r.textShadowOffset!=null||r.textShadowRadius!=null){var l=i6(r);if(l!=null&&i.textShadow==null){var u=r.textShadow,c=u?u+", "+l:l;i.textShadow=c}}for(var d in r)if(!(l6[d]!=null||d==="shadowColor"||d==="shadowOffset"||d==="shadowOpacity"||d==="shadowRadius"||d==="textShadowColor"||d==="textShadowOffset"||d==="textShadowRadius")){var f=r[d],p=a6[d]||d,y=f;!Object.prototype.hasOwnProperty.call(r,d)||p!==d&&r[p]!=null||(p==="aspectRatio"&&typeof y=="number"?i[p]=y.toString():p==="fontVariant"?(Array.isArray(y)&&y.length>0&&(y=y.join(" ")),i[p]=y):p==="textAlignVertical"?r.verticalAlign==null&&(i.verticalAlign=y==="center"?"middle":y):p==="transform"?(Array.isArray(y)&&(y=o6(y)),i.transform=y):i[p]=y)}return i},PE={};Object.defineProperty(PE,"__esModule",{value:!0});var vO=PE.styleq=void 0,u6=new WeakMap,c6="$$css";function _O(t){var e,n,r;return t!=null&&(e=t.disableCache===!0,n=t.disableMix===!0,r=t.transform),function(){for(var s=[],o="",a=null,l=e?null:u6,u=new Array(arguments.length),c=0;c<arguments.length;c++)u[c]=arguments[c];for(;u.length>0;){var d=u.pop();if(!(d==null||d===!1)){if(Array.isArray(d)){for(var f=0;f<d.length;f++)u.push(d[f]);continue}var p=r!=null?r(d):d;if(p.$$css){var y="";if(l!=null&&l.has(p)){var S=l.get(p);S!=null&&(y=S[0],s.push.apply(s,S[1]),l=S[2])}else{var T=[];for(var v in p){var g=p[v];v!==c6&&(typeof g=="string"||g===null?s.includes(v)||(s.push(v),l!=null&&T.push(v),typeof g=="string"&&(y+=y?" "+g:g)):console.error("styleq: ".concat(v," typeof ").concat(String(g),' is not "string" or "null".')))}if(l!=null){var w=new WeakMap;l.set(p,[y,T,w]),l=w}}y&&(o=o?y+" "+o:y)}else if(n)a==null&&(a={}),a=Object.assign({},p,a);else{var x=null;for(var O in p){var D=p[O];D!==void 0&&(s.includes(O)||(D!=null&&(a==null&&(a={}),x==null&&(x={}),x[O]=D),s.push(O),l=null))}x!=null&&(a=Object.assign(x,a))}}}var b=[o,a];return b}}var wO=_O();vO=PE.styleq=wO;wO.factory=_O;var h6=["writingDirection"],SO=new WeakMap,Bm=e6(),EO={shadow:!0,textShadow:!0};function d6(t,e){e===void 0&&(e={});var n=e,r=n.writingDirection,i=An(n,h6),s=r==="rtl";return vO.factory({transform(o){var a=SO.get(o);return a!=null?n6.localizeStyle(a,s):yO(o,ye(ye({},EO),i))}})(t)}function TO(t){t.forEach(e=>{var n=e[0],r=e[1];Bm!=null&&n.forEach(i=>{Bm.insert(i,r)})})}function f6(t){var e=$3(yO(t,EO)),n=e[0],r=e[1];return TO(r),n}function p6(t,e){var n=U3(t,e),r=n[0],i=n[1];return TO(i),r}var bO={position:"absolute",left:0,right:0,top:0,bottom:0},m6=IO({x:ye({},bO)}).x;function IO(t){return Object.keys(t).forEach(e=>{var n=t[e];if(n!=null&&n.$$css!==!0){var r;e.indexOf("$raw")>-1?r=p6(n,e.split("$raw")[0]):r=f6(n),SO.set(n,r)}}),t}function g6(t,e){return[t,e]}function y6(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.flat(1/0),i={},s=0;s<r.length;s++){var o=r[s];o!=null&&typeof o=="object"&&Object.assign(i,o)}return i}function v6(){return{id:Bm.id,textContent:Bm.getTextContent()}}function Ji(t,e){e===void 0&&(e={});var n=e.writingDirection==="rtl",r=d6(t,e);return Array.isArray(r)&&r[1]!=null&&(r[1]=z3(r[1],n)),r}Ji.absoluteFill=m6;Ji.absoluteFillObject=bO;Ji.create=IO;Ji.compose=g6;Ji.flatten=y6;Ji.getSheet=v6;Ji.hairlineWidth=1;xt&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.resolveRNStyle=Ji.flatten);var ke=Ji,_6=["aria-activedescendant","accessibilityActiveDescendant","aria-atomic","accessibilityAtomic","aria-autocomplete","accessibilityAutoComplete","aria-busy","accessibilityBusy","aria-checked","accessibilityChecked","aria-colcount","accessibilityColumnCount","aria-colindex","accessibilityColumnIndex","aria-colspan","accessibilityColumnSpan","aria-controls","accessibilityControls","aria-current","accessibilityCurrent","aria-describedby","accessibilityDescribedBy","aria-details","accessibilityDetails","aria-disabled","accessibilityDisabled","aria-errormessage","accessibilityErrorMessage","aria-expanded","accessibilityExpanded","aria-flowto","accessibilityFlowTo","aria-haspopup","accessibilityHasPopup","aria-hidden","accessibilityHidden","aria-invalid","accessibilityInvalid","aria-keyshortcuts","accessibilityKeyShortcuts","aria-label","accessibilityLabel","aria-labelledby","accessibilityLabelledBy","aria-level","accessibilityLevel","aria-live","accessibilityLiveRegion","aria-modal","accessibilityModal","aria-multiline","accessibilityMultiline","aria-multiselectable","accessibilityMultiSelectable","aria-orientation","accessibilityOrientation","aria-owns","accessibilityOwns","aria-placeholder","accessibilityPlaceholder","aria-posinset","accessibilityPosInSet","aria-pressed","accessibilityPressed","aria-readonly","accessibilityReadOnly","aria-required","accessibilityRequired","role","accessibilityRole","aria-roledescription","accessibilityRoleDescription","aria-rowcount","accessibilityRowCount","aria-rowindex","accessibilityRowIndex","aria-rowspan","accessibilityRowSpan","aria-selected","accessibilitySelected","aria-setsize","accessibilitySetSize","aria-sort","accessibilitySort","aria-valuemax","accessibilityValueMax","aria-valuemin","accessibilityValueMin","aria-valuenow","accessibilityValueNow","aria-valuetext","accessibilityValueText","dataSet","focusable","id","nativeID","pointerEvents","style","tabIndex","testID"],w6={},S6=Object.prototype.hasOwnProperty,E6=Array.isArray,T6=/[A-Z]/g;function b6(t){return"-"+t.toLowerCase()}function I6(t){return t.replace(T6,b6)}function al(t){return E6(t)?t.join(" "):t}var R6=ke.create({auto:{pointerEvents:"auto"},"box-none":{pointerEvents:"box-none"},"box-only":{pointerEvents:"box-only"},none:{pointerEvents:"none"}}),C6=(t,e,n)=>{e||(e=w6);var r=e,i=r["aria-activedescendant"],s=r.accessibilityActiveDescendant,o=r["aria-atomic"],a=r.accessibilityAtomic,l=r["aria-autocomplete"],u=r.accessibilityAutoComplete,c=r["aria-busy"],d=r.accessibilityBusy,f=r["aria-checked"],p=r.accessibilityChecked,y=r["aria-colcount"],S=r.accessibilityColumnCount,T=r["aria-colindex"],v=r.accessibilityColumnIndex,g=r["aria-colspan"],w=r.accessibilityColumnSpan,x=r["aria-controls"],O=r.accessibilityControls,D=r["aria-current"],b=r.accessibilityCurrent,E=r["aria-describedby"],R=r.accessibilityDescribedBy,C=r["aria-details"],P=r.accessibilityDetails,L=r["aria-disabled"],k=r.accessibilityDisabled,ce=r["aria-errormessage"],fe=r.accessibilityErrorMessage,je=r["aria-expanded"],Re=r.accessibilityExpanded,$=r["aria-flowto"],Y=r.accessibilityFlowTo,re=r["aria-haspopup"],we=r.accessibilityHasPopup,Ae=r["aria-hidden"],un=r.accessibilityHidden,at=r["aria-invalid"],jt=r.accessibilityInvalid,dt=r["aria-keyshortcuts"],He=r.accessibilityKeyShortcuts,kt=r["aria-label"],Pn=r.accessibilityLabel,vi=r["aria-labelledby"],os=r.accessibilityLabelledBy,gr=r["aria-level"],jr=r.accessibilityLevel,Xn=r["aria-live"],bo=r.accessibilityLiveRegion,as=r["aria-modal"],Io=r.accessibilityModal,ls=r["aria-multiline"],De=r.accessibilityMultiline,et=r["aria-multiselectable"],kn=r.accessibilityMultiSelectable,Qn=r["aria-orientation"],us=r.accessibilityOrientation,Ro=r["aria-owns"],yr=r.accessibilityOwns,Co=r["aria-placeholder"],za=r.accessibilityPlaceholder,cs=r["aria-posinset"],Yu=r.accessibilityPosInSet,Wa=r["aria-pressed"],Ha=r.accessibilityPressed,xo=r["aria-readonly"],_i=r.accessibilityReadOnly,hs=r["aria-required"],$e=r.accessibilityRequired;r.role,r.accessibilityRole;var Yn=r["aria-roledescription"],Ka=r.accessibilityRoleDescription,wi=r["aria-rowcount"],qa=r.accessibilityRowCount,$r=r["aria-rowindex"],Ga=r.accessibilityRowIndex,Z=r["aria-rowspan"],Xe=r.accessibilityRowSpan,Dt=r["aria-selected"],vr=r.accessibilitySelected,Ur=r["aria-setsize"],Xa=r.accessibilitySetSize,Si=r["aria-sort"],Jy=r.accessibilitySort,sf=r["aria-valuemax"],Qa=r.accessibilityValueMax,Ju=r["aria-valuemin"],of=r.accessibilityValueMin,Ya=r["aria-valuenow"],Ao=r.accessibilityValueNow,af=r["aria-valuetext"],zr=r.accessibilityValueText,Po=r.dataSet,ko=r.focusable,Ja=r.id,Zu=r.nativeID,ec=r.pointerEvents,Zy=r.style,ds=r.tabIndex,lf=r.testID,Q=An(r,_6),uf=L||k,Dn=KD.propsToAriaRole(e),fs=i??s;fs!=null&&(Q["aria-activedescendant"]=fs);var Wr=o!=null?i:a;Wr!=null&&(Q["aria-atomic"]=Wr);var Za=l??u;Za!=null&&(Q["aria-autocomplete"]=Za);var cf=c??d;cf!=null&&(Q["aria-busy"]=cf);var tc=f??p;tc!=null&&(Q["aria-checked"]=tc);var nc=y??S;nc!=null&&(Q["aria-colcount"]=nc);var rc=T??v;rc!=null&&(Q["aria-colindex"]=rc);var el=g??w;el!=null&&(Q["aria-colspan"]=el);var tl=x??O;tl!=null&&(Q["aria-controls"]=al(tl));var ic=D??b;ic!=null&&(Q["aria-current"]=ic);var sc=E??R;sc!=null&&(Q["aria-describedby"]=al(sc));var oc=C??P;oc!=null&&(Q["aria-details"]=oc),uf===!0&&(Q["aria-disabled"]=!0,(t==="button"||t==="form"||t==="input"||t==="select"||t==="textarea")&&(Q.disabled=!0));var hf=ce??fe;hf!=null&&(Q["aria-errormessage"]=hf);var _r=je??Re;_r!=null&&(Q["aria-expanded"]=_r);var On=$??Y;On!=null&&(Q["aria-flowto"]=al(On));var ps=re??we;ps!=null&&(Q["aria-haspopup"]=ps);var ms=Ae??un;ms===!0&&(Q["aria-hidden"]=ms);var nl=at??jt;nl!=null&&(Q["aria-invalid"]=nl);var Be=dt??He;Be!=null&&(Q["aria-keyshortcuts"]=al(Be));var Do=kt??Pn;Do!=null&&(Q["aria-label"]=Do);var gs=vi??os;gs!=null&&(Q["aria-labelledby"]=al(gs));var ys=gr??jr;ys!=null&&(Q["aria-level"]=ys);var ac=Xn??bo;ac!=null&&(Q["aria-live"]=ac==="none"?"off":ac);var lc=as??Io;lc!=null&&(Q["aria-modal"]=lc);var df=ls??De;df!=null&&(Q["aria-multiline"]=df);var ff=et??kn;ff!=null&&(Q["aria-multiselectable"]=ff);var pf=Qn??us;pf!=null&&(Q["aria-orientation"]=pf);var mf=Ro??yr;mf!=null&&(Q["aria-owns"]=al(mf));var vs=Co??za;vs!=null&&(Q["aria-placeholder"]=vs);var Hr=cs??Yu;Hr!=null&&(Q["aria-posinset"]=Hr);var uc=Wa??Ha;uc!=null&&(Q["aria-pressed"]=uc);var cc=xo??_i;cc!=null&&(Q["aria-readonly"]=cc,(t==="input"||t==="select"||t==="textarea")&&(Q.readOnly=!0));var hc=hs??$e;hc!=null&&(Q["aria-required"]=hc,(t==="input"||t==="select"||t==="textarea")&&(Q.required=$e)),Dn!=null&&(Q.role=Dn==="none"?"presentation":Dn);var dc=Yn??Ka;dc!=null&&(Q["aria-roledescription"]=dc);var fc=wi??qa;fc!=null&&(Q["aria-rowcount"]=fc);var Ei=$r??Ga;Ei!=null&&(Q["aria-rowindex"]=Ei);var gf=Z??Xe;gf!=null&&(Q["aria-rowspan"]=gf);var yf=Dt??vr;yf!=null&&(Q["aria-selected"]=yf);var vf=Ur??Xa;vf!=null&&(Q["aria-setsize"]=vf);var wr=Si??Jy;wr!=null&&(Q["aria-sort"]=wr);var _f=sf??Qa;_f!=null&&(Q["aria-valuemax"]=_f);var rl=Ju??of;rl!=null&&(Q["aria-valuemin"]=rl);var Oo=Ya??Ao;Oo!=null&&(Q["aria-valuenow"]=Oo);var pc=af??zr;if(pc!=null&&(Q["aria-valuetext"]=pc),Po!=null){for(var Ti in Po)if(S6.call(Po,Ti)){var Mo=I6(Ti),mc=Po[Ti];mc!=null&&(Q["data-"+Mo]=mc)}}ds===0||ds==="0"||ds===-1||ds==="-1"?Q.tabIndex=ds:(ko===!1&&(Q.tabIndex="-1"),t==="a"||t==="button"||t==="input"||t==="select"||t==="textarea"?(ko===!1||k===!0)&&(Q.tabIndex="-1"):Dn==="button"||Dn==="checkbox"||Dn==="link"||Dn==="radio"||Dn==="textbox"||Dn==="switch"?ko!==!1&&(Q.tabIndex="0"):ko===!0&&(Q.tabIndex="0"));var il=ke([Zy,ec&&R6[ec]],ye({writingDirection:"ltr"},n)),Ke=il[0],wf=il[1];Ke&&(Q.className=Ke),wf&&(Q.style=wf);var Sf=Ja??Zu;return Sf!=null&&(Q.id=Sf),lf!=null&&(Q["data-testid"]=lf),Q.type==null&&t==="button"&&(Q.type="button"),Q},x6=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),UR=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","far","glk","he","iw","khw","ks","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]),zR=new Map;function A6(t){var e=zR.get(t);if(e)return e;var n=!1;if(Intl.Locale)try{var r=new Intl.Locale(t).maximize().script;n=x6.has(r)}catch{var i=t.split("-")[0];n=UR.has(i)}else{var s=t.split("-")[0];n=UR.has(s)}return zR.set(t,n),n}var P6={direction:"ltr",locale:"en-US"},RO=I.createContext(P6);function ry(t){return A6(t)?"rtl":"ltr"}function k6(t){var e=t.direction,n=t.locale,r=t.children,i=e||n;return i?yt.createElement(RO.Provider,{children:r,value:{direction:n?ry(n):e,locale:n}}):r}function kE(){return I.useContext(RO)}var Mu=(t,e,n)=>{var r;t&&t.constructor===String&&(r=KD.propsToAccessibilityComponent(e));var i=r||t,s=C6(i,e,n),o=yt.createElement(i,s),a=s.dir?yt.createElement(k6,{children:o,direction:s.dir,locale:s.lang}):o;return a},Jw=t=>{if(t!=null){var e=t.nodeType===1;if(e&&typeof t.getBoundingClientRect=="function")return t.getBoundingClientRect()}},ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},D6=["ms","Moz","O","Webkit"],O6=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(ph).forEach(t=>{D6.forEach(e=>{ph[O6(e,t)]=ph[t]})});function M6(t,e,n){var r=e==null||typeof e=="boolean"||e==="";return r?"":!n&&typeof e=="number"&&e!==0&&!(ph.hasOwnProperty(t)&&ph[t])?e+"px":(""+e).trim()}function L6(t,e){var n=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=M6(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var WR=t=>{var e=t.offsetHeight,n=t.offsetWidth,r=t.offsetLeft,i=t.offsetTop;for(t=t.offsetParent;t&&t.nodeType===1;)r+=t.offsetLeft+t.clientLeft-t.scrollLeft,i+=t.offsetTop+t.clientTop-t.scrollTop,t=t.offsetParent;return i-=window.scrollY,r-=window.scrollX,{width:n,height:e,top:i,left:r}},HR=(t,e,n)=>{var r=e||t&&t.parentNode;t&&r&&setTimeout(()=>{if(t.isConnected&&r.isConnected){var i=WR(r),s=WR(t),o=s.height,a=s.left,l=s.top,u=s.width,c=a-i.left,d=l-i.top;n(c,d,u,o,a,l)}},0)},N6={A:!0,BODY:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0},Vi={blur(t){try{t.blur()}catch{}},focus(t){try{var e=t.nodeName;t.getAttribute("tabIndex")==null&&t.isContentEditable!==!0&&N6[e]==null&&t.setAttribute("tabIndex","-1"),t.focus()}catch{}},measure(t,e){HR(t,null,e)},measureInWindow(t,e){t&&setTimeout(()=>{var n=Jw(t),r=n.height,i=n.left,s=n.top,o=n.width;e(i,s,o,r)},0)},measureLayout(t,e,n,r){HR(t,e,r)},updateView(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];switch(n){case"style":{L6(t,r);break}case"class":case"className":{t.setAttribute("class",r);break}case"text":case"value":t.value=r;break;default:t.setAttribute(n,r)}}},configureNextLayoutAnimation(t,e){e()},setLayoutAnimationEnabledExperimental(){}},V6={OS:"web"};function ln(){return ln=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ln.apply(null,arguments)}var DE={children:!0,dataSet:!0,dir:!0,id:!0,ref:!0,suppressHydrationWarning:!0,tabIndex:!0,testID:!0,focusable:!0,nativeID:!0},OE={"aria-activedescendant":!0,"aria-atomic":!0,"aria-autocomplete":!0,"aria-busy":!0,"aria-checked":!0,"aria-colcount":!0,"aria-colindex":!0,"aria-colspan":!0,"aria-controls":!0,"aria-current":!0,"aria-describedby":!0,"aria-details":!0,"aria-disabled":!0,"aria-errormessage":!0,"aria-expanded":!0,"aria-flowto":!0,"aria-haspopup":!0,"aria-hidden":!0,"aria-invalid":!0,"aria-keyshortcuts":!0,"aria-label":!0,"aria-labelledby":!0,"aria-level":!0,"aria-live":!0,"aria-modal":!0,"aria-multiline":!0,"aria-multiselectable":!0,"aria-orientation":!0,"aria-owns":!0,"aria-placeholder":!0,"aria-posinset":!0,"aria-pressed":!0,"aria-readonly":!0,"aria-required":!0,role:!0,"aria-roledescription":!0,"aria-rowcount":!0,"aria-rowindex":!0,"aria-rowspan":!0,"aria-selected":!0,"aria-setsize":!0,"aria-sort":!0,"aria-valuemax":!0,"aria-valuemin":!0,"aria-valuenow":!0,"aria-valuetext":!0,accessibilityActiveDescendant:!0,accessibilityAtomic:!0,accessibilityAutoComplete:!0,accessibilityBusy:!0,accessibilityChecked:!0,accessibilityColumnCount:!0,accessibilityColumnIndex:!0,accessibilityColumnSpan:!0,accessibilityControls:!0,accessibilityCurrent:!0,accessibilityDescribedBy:!0,accessibilityDetails:!0,accessibilityDisabled:!0,accessibilityErrorMessage:!0,accessibilityExpanded:!0,accessibilityFlowTo:!0,accessibilityHasPopup:!0,accessibilityHidden:!0,accessibilityInvalid:!0,accessibilityKeyShortcuts:!0,accessibilityLabel:!0,accessibilityLabelledBy:!0,accessibilityLevel:!0,accessibilityLiveRegion:!0,accessibilityModal:!0,accessibilityMultiline:!0,accessibilityMultiSelectable:!0,accessibilityOrientation:!0,accessibilityOwns:!0,accessibilityPlaceholder:!0,accessibilityPosInSet:!0,accessibilityPressed:!0,accessibilityReadOnly:!0,accessibilityRequired:!0,accessibilityRole:!0,accessibilityRoleDescription:!0,accessibilityRowCount:!0,accessibilityRowIndex:!0,accessibilityRowSpan:!0,accessibilitySelected:!0,accessibilitySetSize:!0,accessibilitySort:!0,accessibilityValueMax:!0,accessibilityValueMin:!0,accessibilityValueNow:!0,accessibilityValueText:!0},ME={onClick:!0,onAuxClick:!0,onContextMenu:!0,onGotPointerCapture:!0,onLostPointerCapture:!0,onPointerCancel:!0,onPointerDown:!0,onPointerEnter:!0,onPointerMove:!0,onPointerLeave:!0,onPointerOut:!0,onPointerOver:!0,onPointerUp:!0},LE={onBlur:!0,onFocus:!0},NE={onKeyDown:!0,onKeyDownCapture:!0,onKeyUp:!0,onKeyUpCapture:!0},VE={onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0},FE={onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0},BE={style:!0};function jE(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&e[r]===!0&&(n[r]=t[r]);return n}var Zw=xt?I.useLayoutEffect:I.useEffect,eS="__reactLayoutHandler",$v=null;function F6(){return xt&&typeof window.ResizeObserver<"u"&&$v==null&&($v=new window.ResizeObserver(function(t){t.forEach(e=>{var n=e.target,r=n[eS];typeof r=="function"&&Vi.measure(n,(i,s,o,a,l,u)=>{var c={nativeEvent:{layout:{x:i,y:s,width:o,height:a,left:l,top:u}},timeStamp:Date.now()};Object.defineProperty(c.nativeEvent,"target",{enumerable:!0,get:()=>e.target}),r(c)})})})),$v}function $E(t,e){var n=F6();Zw(()=>{var r=t.current;r!=null&&(r[eS]=e)},[t,e]),Zw(()=>{var r=t.current;return r!=null&&n!=null&&(typeof r[eS]=="function"?n.observe(r):n.unobserve(r)),()=>{r!=null&&n!=null&&n.unobserve(r)}},[t,n])}function CO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){e.forEach(s=>{if(s!=null){if(typeof s=="function"){s(i);return}if(typeof s=="object"){s.current=i;return}console.error("mergeRefs cannot handle Refs of type boolean, number or string, received ref "+String(s))}})}}function Pd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.useMemo(()=>CO(...e),[...e])}var KR=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():Object.freeze({});function B6(t){var e=I.useRef(KR);return e.current===KR&&(e.current=t()),e.current}function UE(t){t.pointerEvents,t.style;var e=B6(()=>n=>{n!=null&&(n.measure=r=>Vi.measure(n,r),n.measureLayout=(r,i,s)=>Vi.measureLayout(n,r,s,i),n.measureInWindow=r=>Vi.measureInWindow(n,r))});return e}var qR=()=>{},j6={},$6=[];function GR(t){return t>20?t%20:t}function xO(t,e){var n,r=!1,i,s,o=t.changedTouches,a=t.type,l=t.metaKey===!0,u=t.shiftKey===!0,c=o&&o[0].force||0,d=GR(o&&o[0].identifier||0),f=o&&o[0].clientX||t.clientX,p=o&&o[0].clientY||t.clientY,y=o&&o[0].pageX||t.pageX,S=o&&o[0].pageY||t.pageY,T=typeof t.preventDefault=="function"?t.preventDefault.bind(t):qR,v=t.timeStamp;function g(b){return Array.prototype.slice.call(b).map(E=>({force:E.force,identifier:GR(E.identifier),get locationX(){return O(E.clientX)},get locationY(){return D(E.clientY)},pageX:E.pageX,pageY:E.pageY,target:E.target,timestamp:v}))}if(o!=null)i=g(o),s=g(t.touches);else{var w=[{force:c,identifier:d,get locationX(){return O(f)},get locationY(){return D(p)},pageX:y,pageY:S,target:t.target,timestamp:v}];i=w,s=a==="mouseup"||a==="dragstart"?$6:w}var x={bubbles:!0,cancelable:!0,currentTarget:null,defaultPrevented:t.defaultPrevented,dispatchConfig:j6,eventPhase:t.eventPhase,isDefaultPrevented(){return t.defaultPrevented},isPropagationStopped(){return r},isTrusted:t.isTrusted,nativeEvent:{altKey:!1,ctrlKey:!1,metaKey:l,shiftKey:u,changedTouches:i,force:c,identifier:d,get locationX(){return O(f)},get locationY(){return D(p)},pageX:y,pageY:S,target:t.target,timestamp:v,touches:s,type:a},persist:qR,preventDefault:T,stopPropagation(){r=!0},target:t.target,timeStamp:v,touchHistory:e.touchHistory};function O(b){if(n=n||Jw(x.currentTarget),n)return b-n.left}function D(b){if(n=n||Jw(x.currentTarget),n)return b-n.top}return x}var U6="mousedown",z6="mousemove",W6="mouseup",H6="dragstart",K6="touchstart",q6="touchmove",G6="touchend",X6="touchcancel",Q6="scroll",Y6="select",J6="selectionchange";function AO(t){return t===K6||t===U6}function PO(t){return t===q6||t===z6}function kO(t){return t===G6||t===W6||DO(t)}function DO(t){return t===X6||t===H6}function Z6(t){return t===Q6}function e5(t){return t===Y6||t===J6}function t5(){var t=window.getSelection(),e=t.toString(),n=t.anchorNode,r=t.focusNode,i=n&&n.nodeType===window.Node.TEXT_NODE||r&&r.nodeType===window.Node.TEXT_NODE;return e.length>=1&&e!==`
`&&i}var OO="__reactResponderId";function n5(t){if(t.type==="selectionchange"){var e=window.getSelection().anchorNode;return XR(e)}else{var n=t.composedPath!=null?t.composedPath():XR(t.target);return n}}function XR(t){for(var e=[];t!=null&&t!==document.body;)e.push(t),t=t.parentNode;return e}function r5(t){return t!=null?t[OO]:null}function i5(t,e){t!=null&&(t[OO]=e)}function s5(t){for(var e=[],n=[],r=n5(t),i=0;i<r.length;i++){var s=r[i],o=r5(s);o!=null&&(e.push(o),n.push(s))}return{idPath:e,nodePath:n}}function o5(t,e){var n=t.length,r=e.length;if(n===0||r===0||t[n-1]!==e[r-1])return null;var i=t[0],s=0,o=e[0],a=0;n-r>0&&(s=n-r,i=t[s],n=r),r-n>0&&(a=r-n,o=e[a],r=n);for(var l=n;l--;){if(i===o)return i;i=t[s++],o=e[a++]}return null}function a5(t,e){if(!e||e.length===0)return!1;for(var n=0;n<e.length;n++){var r=e[n].target;if(r!=null&&t.contains(r))return!0}return!1}function l5(t){return t.type==="selectionchange"?t5():t.type==="select"}function u5(t){var e=t.altKey,n=t.button,r=t.buttons,i=t.ctrlKey,s=t.type,o=s==="touchstart"||s==="touchmove",a=s==="mousedown"&&(n===0||r===1),l=s==="mousemove"&&r===1,u=e===!1&&i===!1;return!!(o||a&&u||l&&u)}var QR=20;function ur(t){return t.timeStamp||t.timestamp}function c5(t){return{touchActive:!0,startPageX:t.pageX,startPageY:t.pageY,startTimeStamp:ur(t),currentPageX:t.pageX,currentPageY:t.pageY,currentTimeStamp:ur(t),previousPageX:t.pageX,previousPageY:t.pageY,previousTimeStamp:ur(t)}}function h5(t,e){t.touchActive=!0,t.startPageX=e.pageX,t.startPageY=e.pageY,t.startTimeStamp=ur(e),t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=ur(e),t.previousPageX=e.pageX,t.previousPageY=e.pageY,t.previousTimeStamp=ur(e)}function zE(t){var e=t.identifier;return e==null&&console.error("Touch object is missing identifier."),e}function d5(t,e){var n=zE(t),r=e.touchBank[n];r?h5(r,t):e.touchBank[n]=c5(t),e.mostRecentTimeStamp=ur(t)}function f5(t,e){var n=e.touchBank[zE(t)];n?(n.touchActive=!0,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=ur(t),e.mostRecentTimeStamp=ur(t)):console.warn(`Cannot record touch move without a touch start.
`,"Touch Move: "+MO(t)+`
`,"Touch Bank: "+LO(e))}function p5(t,e){var n=e.touchBank[zE(t)];n?(n.touchActive=!1,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=ur(t),e.mostRecentTimeStamp=ur(t)):console.warn(`Cannot record touch end without a touch start.
`,"Touch End: "+MO(t)+`
`,"Touch Bank: "+LO(e))}function MO(t){return JSON.stringify({identifier:t.identifier,pageX:t.pageX,pageY:t.pageY,timestamp:ur(t)})}function LO(t){var e=t.touchBank,n=JSON.stringify(e.slice(0,QR));return e.length>QR&&(n+=" (original size: "+e.length+")"),n}class m5{constructor(){this._touchHistory={touchBank:[],numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0}}recordTouchTrack(e,n){var r=this._touchHistory;if(PO(e))n.changedTouches.forEach(a=>f5(a,r));else if(AO(e))n.changedTouches.forEach(a=>d5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1&&(r.indexOfSingleActiveTouch=n.touches[0].identifier);else if(kO(e)&&(n.changedTouches.forEach(a=>p5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1))for(var i=r.touchBank,s=0;s<i.length;s++){var o=i[s];if(o!=null&&o.touchActive){r.indexOfSingleActiveTouch=s;break}}}get touchHistory(){return this._touchHistory}}var g5={},YR=["onStartShouldSetResponderCapture","onStartShouldSetResponder",{bubbles:!0}],JR=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder",{bubbles:!0}],y5=["onScrollShouldSetResponderCapture","onScrollShouldSetResponder",{bubbles:!1}],v5={touchstart:YR,mousedown:YR,touchmove:JR,mousemove:JR,scroll:y5},tS={id:null,idPath:null,node:null},jm=new Map,Ds=!1,Xr=0,ei={id:null,node:null,idPath:null},nS=new m5;function Zh(t){ei=t}function ed(t){var e=jm.get(t);return e??g5}function Uv(t){var e=t.type,n=t.target;if(e==="touchstart"&&(Ds=!0),(e==="touchmove"||Xr>1)&&(Ds=!1),!(e==="mousedown"&&Ds||e==="mousemove"&&Ds||e==="mousemove"&&Xr<1)){if(Ds&&e==="mouseup"){Xr===0&&(Ds=!1);return}var r=AO(e)&&u5(t),i=PO(e),s=kO(e),o=Z6(e),a=e5(e),l=xO(t,nS);(r||i||s)&&(t.touches?Xr=t.touches.length:r?Xr=1:s&&(Xr=0),nS.recordTouchTrack(e,l.nativeEvent));var u=s5(t),c=!1,d;if(r||i||o&&Xr>0){var f=ei.idPath,p=u.idPath;if(f!=null&&p!=null){var y=o5(f,p);if(y!=null){var S=p.indexOf(y),T=S+(y===ei.id?1:0);u={idPath:p.slice(T),nodePath:u.nodePath.slice(T)}}else u=null}u!=null&&(d=_5(u,t,l),d!=null&&(w5(l,d),c=!0))}if(ei.id!=null&&ei.node!=null){var v=ei,g=v.id,w=v.node,x=ed(g),O=x.onResponderStart,D=x.onResponderMove,b=x.onResponderEnd,E=x.onResponderRelease,R=x.onResponderTerminate,C=x.onResponderTerminationRequest;if(l.bubbles=!1,l.cancelable=!1,l.currentTarget=w,r)O!=null&&(l.dispatchConfig.registrationName="onResponderStart",O(l));else if(i)D!=null&&(l.dispatchConfig.registrationName="onResponderMove",D(l));else{var P=DO(e)||e==="contextmenu"||e==="blur"&&n===window||e==="blur"&&n.contains(w)&&t.relatedTarget!==w||o&&Xr===0||o&&n.contains(w)&&n!==w||a&&l5(t),L=s&&!P&&!a5(w,t.touches);if(s&&b!=null&&(l.dispatchConfig.registrationName="onResponderEnd",b(l)),L&&(E!=null&&(l.dispatchConfig.registrationName="onResponderRelease",E(l)),Zh(tS)),P){var k=!0;(e==="contextmenu"||e==="scroll"||e==="selectionchange")&&(c?k=!1:C!=null&&(l.dispatchConfig.registrationName="onResponderTerminationRequest",C(l)===!1&&(k=!1))),k&&(R!=null&&(l.dispatchConfig.registrationName="onResponderTerminate",R(l)),Zh(tS),Ds=!1,Xr=0)}}}}}function _5(t,e,n){var r=v5[e.type];if(r!=null){for(var i=t.idPath,s=t.nodePath,o=r[0],a=r[1],l=r[2].bubbles,u=function(D,b,E){var R=ed(D),C=R[E];if(C!=null&&(n.currentTarget=b,C(n)===!0)){var P=i.slice(i.indexOf(D));return{id:D,node:b,idPath:P}}},c=i.length-1;c>=0;c--){var d=i[c],f=s[c],p=u(d,f,o);if(p!=null)return p;if(n.isPropagationStopped()===!0)return}if(l)for(var y=0;y<i.length;y++){var S=i[y],T=s[y],v=u(S,T,a);if(v!=null)return v;if(n.isPropagationStopped()===!0)return}else{var g=i[0],w=s[0],x=e.target;if(x===w)return u(g,w,a)}}}function w5(t,e){var n=ei,r=n.id,i=n.node,s=e.id,o=e.node,a=ed(s),l=a.onResponderGrant,u=a.onResponderReject;if(t.bubbles=!1,t.cancelable=!1,t.currentTarget=o,r==null)l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),Zh(e);else{var c=ed(r),d=c.onResponderTerminate,f=c.onResponderTerminationRequest,p=!0;f!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminationRequest",f(t)===!1&&(p=!1)),p?(d!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminate",d(t)),l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),Zh(e)):u!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderReject",u(t))}}var S5=["blur","scroll"],E5=["mousedown","mousemove","mouseup","dragstart","touchstart","touchmove","touchend","touchcancel","contextmenu","select","selectionchange"];function T5(){xt&&window.__reactResponderSystemActive==null&&(window.addEventListener("blur",Uv),E5.forEach(t=>{document.addEventListener(t,Uv)}),S5.forEach(t=>{document.addEventListener(t,Uv,!0)}),window.__reactResponderSystemActive=!0)}function b5(t,e,n){i5(e,t),jm.set(t,n)}function ZR(t){ei.id===t&&I5(),jm.has(t)&&jm.delete(t)}function I5(){var t=ei,e=t.id,n=t.node;if(e!=null&&n!=null){var r=ed(e),i=r.onResponderTerminate;if(i!=null){var s=xO({},nS);s.currentTarget=n,i(s)}Zh(tS)}Ds=!1,Xr=0}function R5(){return ei.node}var C5={},x5=0;function A5(t){var e=I.useRef(null);return e.current==null&&(e.current=t()),e.current}function WE(t,e){e===void 0&&(e=C5);var n=A5(()=>x5++),r=I.useRef(!1);I.useEffect(()=>(T5(),()=>{ZR(n)}),[n]),I.useEffect(()=>{var i=e,s=i.onMoveShouldSetResponder,o=i.onMoveShouldSetResponderCapture,a=i.onScrollShouldSetResponder,l=i.onScrollShouldSetResponderCapture,u=i.onSelectionChangeShouldSetResponder,c=i.onSelectionChangeShouldSetResponderCapture,d=i.onStartShouldSetResponder,f=i.onStartShouldSetResponderCapture,p=s!=null||o!=null||a!=null||l!=null||u!=null||c!=null||d!=null||f!=null,y=t.current;p?(b5(n,y,e),r.current=!0):r.current&&(ZR(n),r.current=!1)},[e,t,n]),I.useDebugValue({isResponder:t.current===R5()}),I.useDebugValue(e)}var $m=I.createContext(!1),P5=["hrefAttrs","onLayout","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture"],k5=Object.assign({},DE,OE,ME,LE,NE,VE,FE,BE,{href:!0,lang:!0,onScroll:!0,onWheel:!0,pointerEvents:!0}),D5=t=>jE(t,k5),X=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.onLayout,i=t.onMoveShouldSetResponder,s=t.onMoveShouldSetResponderCapture,o=t.onResponderEnd,a=t.onResponderGrant,l=t.onResponderMove,u=t.onResponderReject,c=t.onResponderRelease,d=t.onResponderStart,f=t.onResponderTerminate,p=t.onResponderTerminationRequest,y=t.onScrollShouldSetResponder,S=t.onScrollShouldSetResponderCapture,T=t.onSelectionChangeShouldSetResponder,v=t.onSelectionChangeShouldSetResponderCapture,g=t.onStartShouldSetResponder,w=t.onStartShouldSetResponderCapture,x=An(t,P5),O=I.useContext($m),D=I.useRef(null),b=kE(),E=b.direction;$E(D,r),WE(D,{onMoveShouldSetResponder:i,onMoveShouldSetResponderCapture:s,onResponderEnd:o,onResponderGrant:a,onResponderMove:l,onResponderReject:u,onResponderRelease:c,onResponderStart:d,onResponderTerminate:f,onResponderTerminationRequest:p,onScrollShouldSetResponder:y,onScrollShouldSetResponderCapture:S,onSelectionChangeShouldSetResponder:T,onSelectionChangeShouldSetResponderCapture:v,onStartShouldSetResponder:g,onStartShouldSetResponderCapture:w});var R="div",C=t.lang!=null?ry(t.lang):null,P=t.dir||C,L=P||E,k=D5(x);if(k.dir=P,k.style=[eC.view$raw,O&&eC.inline,t.style],t.href!=null&&(R="a",n!=null)){var ce=n.download,fe=n.rel,je=n.target;ce!=null&&(k.download=ce),fe!=null&&(k.rel=fe),typeof je=="string"&&(k.target=je.charAt(0)!=="_"?"_"+je:je)}var Re=UE(k),$=Pd(D,Re,e);return k.ref=$,Mu(R,k,{writingDirection:L})});X.displayName="View";var eC=ke.create({view$raw:{alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",zIndex:0},inline:{display:"inline-flex"}}),O5=function t(e,n,r){if(r===void 0&&(r=-1),r===0)return!0;if(e===n||typeof e=="function"&&typeof n=="function")return!1;if(typeof e!="object"||e===null)return e!==n;if(typeof n!="object"||n===null||e.constructor!==n.constructor)return!0;if(Array.isArray(e)){var i=e.length;if(n.length!==i)return!0;for(var s=0;s<i;s++)if(t(e[s],n[s],r-1))return!0}else{for(var o in e)if(t(e[o],n[o],r-1))return!0;for(var a in n)if(e[a]===void 0&&n[a]!==void 0)return!0}return!1};function M5(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!t){var s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;s=new Error(e.replace(/%s/g,function(){return String(r[o++])})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}var L5=M5;const ge=Pu(L5);function tC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function N5(t,e){if(t){if(typeof t=="string")return tC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tC(t,e):void 0}}function ra(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=N5(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V5=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function F5(t){t.colors,t.enabled,t.onRefresh,t.progressBackgroundColor,t.progressViewOffset,t.refreshing,t.size,t.tintColor,t.title,t.titleColor;var e=An(t,V5);return yt.createElement(X,e)}var ia={window:{fontScale:1,height:0,scale:1,width:0},screen:{fontScale:1,height:0,scale:1,width:0}},Ns={},nC=xt;function NO(){if(xt){var t=window,e,n;if(t.visualViewport){var r=t.visualViewport;e=Math.round(r.height*r.scale),n=Math.round(r.width*r.scale)}else{var i=t.document.documentElement;e=i.clientHeight,n=i.clientWidth}ia.window={fontScale:1,height:e,scale:t.devicePixelRatio||1,width:n},ia.screen={fontScale:1,height:t.screen.height,scale:t.devicePixelRatio||1,width:t.screen.width}}}function rC(){NO(),Array.isArray(Ns.change)&&Ns.change.forEach(t=>t(ia))}class Um{static get(e){return nC&&(nC=!1,NO()),ge(ia[e],"No dimension set for key "+e),ia[e]}static set(e){e&&(xt?ge(!1,"Dimensions cannot be set in the browser"):(e.screen!=null&&(ia.screen=e.screen),e.window!=null&&(ia.window=e.window)))}static addEventListener(e,n){return Ns[e]=Ns[e]||[],Ns[e].push(n),{remove:()=>{this.removeEventListener(e,n)}}}static removeEventListener(e,n){Array.isArray(Ns[e])&&(Ns[e]=Ns[e].filter(r=>r!==n))}}xt&&(window.visualViewport?window.visualViewport.addEventListener("resize",rC,!1):window.addEventListener("resize",rC,!1));var Di={_currentlyFocusedNode:null,currentlyFocusedField(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput(t){t!==null&&(this._currentlyFocusedNode=t,document.activeElement!==t&&Vi.focus(t))},blurTextInput(t){t!==null&&(this._currentlyFocusedNode=null,document.activeElement===t&&Vi.blur(t))}},B5=()=>{Di.blurTextInput(Di.currentlyFocusedField())},j5=["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"];function iC(t){return{nativeEvent:{contentOffset:{get x(){return t.target.scrollLeft},get y(){return t.target.scrollTop}},contentSize:{get height(){return t.target.scrollHeight},get width(){return t.target.scrollWidth}},layoutMeasurement:{get height(){return t.target.offsetHeight},get width(){return t.target.offsetWidth}}},timeStamp:Date.now()}}function $5(t,e){var n=Date.now()-t;return e>0&&n>=e}var U5=I.forwardRef((t,e)=>{var n=t.onScroll,r=t.onTouchMove,i=t.onWheel,s=t.scrollEnabled,o=s===void 0?!0:s,a=t.scrollEventThrottle,l=a===void 0?0:a,u=t.showsHorizontalScrollIndicator,c=t.showsVerticalScrollIndicator,d=t.style,f=An(t,j5),p=I.useRef({isScrolling:!1,scrollLastTick:0}),y=I.useRef(null),S=I.useRef(null);function T(D){return b=>{o&&D&&D(b)}}function v(D){D.stopPropagation(),D.target===S.current&&(D.persist(),y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{x(D)},100),p.current.isScrolling?$5(p.current.scrollLastTick,l)&&w(D):g(D))}function g(D){p.current.isScrolling=!0,w(D)}function w(D){p.current.scrollLastTick=Date.now(),n&&n(iC(D))}function x(D){p.current.isScrolling=!1,n&&n(iC(D))}var O=u===!1||c===!1;return I.createElement(X,ln({},f,{onScroll:v,onTouchMove:T(r),onWheel:T(i),ref:Pd(S,e),style:[d,!o&&sC.scrollDisabled,O&&sC.hideScrollbar]}))}),sC=ke.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});function iy(t){return function(){return t}}var Ba=function(){};Ba.thatReturns=iy;Ba.thatReturnsFalse=iy(!1);Ba.thatReturnsTrue=iy(!0);Ba.thatReturnsNull=iy(null);Ba.thatReturnsThis=function(){return this};Ba.thatReturnsArgument=function(t){return t};var z5=Ba,W5=z5,H5=W5,K5=H5;const q5=Pu(K5);var G5=["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll","centerContent"],oC={},X5=16;class Q5 extends yt.Component{constructor(){super(...arguments),this._scrollNodeRef=null,this._innerViewRef=null,this.isTouching=!1,this.lastMomentumScrollBeginTime=0,this.lastMomentumScrollEndTime=0,this.observedScrollSinceBecomingResponder=!1,this.becameResponderWhileAnimating=!1,this.scrollResponderHandleScrollShouldSetResponder=()=>this.isTouching,this.scrollResponderHandleStartShouldSetResponderCapture=e=>this.scrollResponderIsAnimating(),this.scrollResponderHandleTerminationRequest=()=>!this.observedScrollSinceBecomingResponder,this.scrollResponderHandleTouchEnd=e=>{var n=e.nativeEvent;this.isTouching=n.touches.length!==0,this.props.onTouchEnd&&this.props.onTouchEnd(e)},this.scrollResponderHandleResponderRelease=e=>{this.props.onResponderRelease&&this.props.onResponderRelease(e);var n=Di.currentlyFocusedField();!this.props.keyboardShouldPersistTaps&&n!=null&&e.target!==n&&!this.observedScrollSinceBecomingResponder&&!this.becameResponderWhileAnimating&&(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),Di.blurTextInput(n))},this.scrollResponderHandleScroll=e=>{this.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},this.scrollResponderHandleResponderGrant=e=>{this.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},this.scrollResponderHandleScrollBeginDrag=e=>{this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},this.scrollResponderHandleScrollEndDrag=e=>{this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},this.scrollResponderHandleMomentumScrollBegin=e=>{this.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},this.scrollResponderHandleMomentumScrollEnd=e=>{this.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},this.scrollResponderHandleTouchStart=e=>{this.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},this.scrollResponderHandleTouchMove=e=>{this.props.onTouchMove&&this.props.onTouchMove(e)},this.scrollResponderIsAnimating=()=>{var e=Date.now(),n=e-this.lastMomentumScrollEndTime,r=n<X5||this.lastMomentumScrollEndTime<this.lastMomentumScrollBeginTime;return r},this.scrollResponderScrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||oC;e=i.x,n=i.y,r=i.animated}var s=this.getScrollableNode(),o=e||0,a=n||0;s!=null&&(typeof s.scroll=="function"?s.scroll({top:a,left:o,behavior:r?"smooth":"auto"}):(s.scrollLeft=o,s.scrollTop=a))},this.scrollResponderZoomTo=(e,n)=>{ge("zoomToRect is not implemented")},this.scrollResponderScrollNativeHandleToKeyboard=(e,n,r)=>{this.additionalScrollOffset=n||0,this.preventNegativeScrollOffset=!!r,Vi.measureLayout(e,this.getInnerViewNode(),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},this.scrollResponderInputMeasureAndScrollToKeyboard=(e,n,r,i)=>{var s=Um.get("window").height;this.keyboardWillOpenTo&&(s=this.keyboardWillOpenTo.endCoordinates.screenY);var o=n-s+i+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(o=Math.max(0,o)),this.scrollResponderScrollTo({x:0,y:o,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},this.scrollResponderKeyboardWillShow=e=>{this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},this.scrollResponderKeyboardWillHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},this.scrollResponderKeyboardDidShow=e=>{e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},this.scrollResponderKeyboardDidHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)},this.flashScrollIndicators=()=>{this.scrollResponderFlashScrollIndicators()},this.getScrollResponder=()=>this,this.getScrollableNode=()=>this._scrollNodeRef,this.getInnerViewRef=()=>this._innerViewRef,this.getInnerViewNode=()=>this._innerViewRef,this.getNativeScrollRef=()=>this._scrollNodeRef,this.scrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||oC;n=i.x,e=i.y,r=i.animated}this.scrollResponderScrollTo({x:n||0,y:e||0,animated:r!==!1})},this.scrollToEnd=e=>{var n=(e&&e.animated)!==!1,r=this.props.horizontal,i=this.getScrollableNode(),s=r?i.scrollWidth:0,o=r?0:i.scrollHeight;this.scrollResponderScrollTo({x:s,y:o,animated:n})},this._handleContentOnLayout=e=>{var n=e.nativeEvent.layout,r=n.width,i=n.height;this.props.onContentSizeChange(r,i)},this._handleScroll=e=>{this.props.keyboardDismissMode==="on-drag"&&B5(),this.scrollResponderHandleScroll(e)},this._setInnerViewRef=e=>{this._innerViewRef=e},this._setScrollNodeRef=e=>{this._scrollNodeRef=e,e!=null&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard);var n=CO(this.props.forwardedRef);n(e)}}scrollResponderHandleStartShouldSetResponder(){return!1}scrollResponderHandleResponderReject(){q5(!1,"ScrollView doesn't take rejection well - scrolls anyway")}scrollResponderFlashScrollIndicators(){}scrollResponderTextInputFocusError(e){console.error("Error measuring text field: ",e)}render(){var e=this.props,n=e.contentContainerStyle,r=e.horizontal,i=e.onContentSizeChange,s=e.refreshControl,o=e.stickyHeaderIndices,a=e.pagingEnabled;e.forwardedRef,e.keyboardDismissMode,e.onScroll;var l=e.centerContent,u=An(e,G5),c={};i&&(c={onLayout:this._handleContentOnLayout});var d=!r&&Array.isArray(o),f=d||a?yt.Children.map(this.props.children,(w,x)=>{var O=d&&o.indexOf(x)>-1;return w!=null&&(O||a)?yt.createElement(X,{style:[O&&Is.stickyHeader,a&&Is.pagingEnabledChild]},w):w}):this.props.children,p=yt.createElement(X,ln({},c,{children:f,collapsable:!1,ref:this._setInnerViewRef,style:[r&&Is.contentContainerHorizontal,l&&Is.contentContainerCenterContent,n]})),y=r?Is.baseHorizontal:Is.baseVertical,S=r?Is.pagingEnabledHorizontal:Is.pagingEnabledVertical,T=ye(ye({},u),{},{style:[y,a&&S,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),v=U5;ge(v!==void 0,"ScrollViewClass must not be undefined");var g=yt.createElement(v,ln({},T,{ref:this._setScrollNodeRef}),p);return s?yt.cloneElement(s,{style:T.style},g):g}}var aC={flexGrow:1,flexShrink:1,transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},Is=ke.create({baseVertical:ye(ye({},aC),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:ye(ye({},aC),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},contentContainerCenterContent:{justifyContent:"center",flexGrow:1},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),Dr=yt.forwardRef((t,e)=>yt.createElement(Q5,ln({},t,{forwardedRef:e})));Dr.displayName="ScrollView";class Y5{constructor(e){var n=e.onMoreTasks;this._onMoreTasks=n,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(n=>this.enqueue(n))}cancelTasks(e){this._queueStack=this._queueStack.map(n=>ye(ye({},n),{},{tasks:n.tasks.filter(r=>e.indexOf(r)===-1)})).filter((n,r)=>n.tasks.length>0||r===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var n=e.shift();try{typeof n=="object"&&n.gen?this._genPromise(n):typeof n=="object"&&n.run?n.run():(ge(typeof n=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(n,null,2)),n())}catch(r){throw r.message="TaskQueue: Error with task "+(n.name||"")+": "+r.message,r}}}_getCurrentQueue(){var e=this._queueStack.length-1,n=this._queueStack[e];return n.popable&&n.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}_genPromise(e){var n=this._queueStack.push({tasks:[],popable:!1}),r=n-1,i=this._queueStack[r];e.gen().then(()=>{i.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(s=>{setTimeout(()=>{throw s.message="TaskQueue: Error resolving Promise in task "+e.name+": "+s.message,s},0)})}}class J5{constructor(){this._registry={}}addListener(e,n,r){var i=Z5(this._registry,e),s={context:r,listener:n,remove(){i.delete(s)}};return i.add(s),s}emit(e){var n=this._registry[e];if(n!=null){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var o=0,a=[...n];o<a.length;o++){var l=a[o];l.listener.apply(l.context,i)}}}removeAllListeners(e){e==null?this._registry={}:delete this._registry[e]}listenerCount(e){var n=this._registry[e];return n==null?0:n.size}}function Z5(t,e){var n=t[e];return n==null&&(n=new Set,t[e]=n),n}var ez=function(e,n){return setTimeout(()=>{var r=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}})},1)},tz=xt&&typeof window.requestIdleCallback<"u",nz=tz?window.requestIdleCallback:ez,zm=new J5,rS={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(t){var e=[],n=new Promise(r=>{mh(),t&&e.push(t),e.push({run:r,name:"resolve "+(t&&t.name||"?")}),Hm.enqueueTasks(e)});return{then:n.then.bind(n),done:n.then.bind(n),cancel:()=>{Hm.cancelTasks(e)}}},createInteractionHandle(){mh();var t=++rz;return Wm.add(t),t},clearInteractionHandle(t){ge(!!t,"Must provide a handle to clear."),mh(),Wm.delete(t),iS.add(t)},addListener:zm.addListener.bind(zm),setDeadline(t){Km=t}},Gf=new Set,Wm=new Set,iS=new Set,Hm=new Y5({onMoreTasks:mh}),Op=0,rz=0,Km=-1;function mh(){Op||(Km>0?Op=setTimeout(lC):Op=nz(lC))}function lC(){Op=0;var t=Gf.size;Wm.forEach(r=>Gf.add(r)),iS.forEach(r=>Gf.delete(r));var e=Gf.size;if(t!==0&&e===0?zm.emit(rS.Events.interactionComplete):t===0&&e!==0&&zm.emit(rS.Events.interactionStart),e===0){for(var n=Date.now();Hm.hasTasksToProcess();)if(Hm.processNext(),Km>0&&Date.now()-n>=Km){mh();break}}Wm.clear(),iS.clear()}class iz{constructor(e,n){this._delay=n,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=rS.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function uC(t,e,n){return e<t?t:e>n?n:e}function sz(){return console.log(...arguments)}class oz{constructor(e){ge(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(ge(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var n=this._findRegion(e.first),r=n[0],i=n[1],s=this._findRegion(e.last),o=s[0],a=s[1];if(!(i===a&&!r.isSpacer)){var l=[],u=[],c=ye(ye({},e),{},{isSpacer:!1});r.first<c.first&&(r.isSpacer?l.push({first:r.first,last:c.first-1,isSpacer:!0}):c.first=r.first),o.last>c.last&&(o.isSpacer?u.push({first:c.last+1,last:o.last,isSpacer:!0}):c.last=o.last);var d=[...l,c,...u],f=a-i+1;this._regions.splice(i,f,...d)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((n,r)=>n.first===e._regions[r].first&&n.last===e._regions[r].last&&n.isSpacer===e._regions[r].isSpacer)}_findRegion(e){for(var n=0,r=this._regions.length-1;n<=r;){var i=Math.floor((n+r)/2),s=this._regions[i];if(e>=s.first&&e<=s.last)return[s,i];e<s.first?r=i-1:e>s.last&&(n=i+1)}ge(!1,"A region was not found containing cellIdx "+e)}}class az{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,n){var r;ge(!this._childrenToCellKey.has(e),"Trying to add already present child list");var i=(r=this._cellKeyToChildren.get(n))!==null&&r!==void 0?r:new Set;i.add(e),this._cellKeyToChildren.set(n,i),this._childrenToCellKey.set(e,n)}remove(e){var n=this._childrenToCellKey.get(e);ge(n!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var r=this._cellKeyToChildren.get(n);ge(r,"_cellKeyToChildren should contain cellKey"),r.delete(e),r.size===0&&this._cellKeyToChildren.delete(n)}forEach(e){for(var n=ra(this._cellKeyToChildren.values()),r;!(r=n()).done;)for(var i=r.value,s=ra(i),o;!(o=s()).done;){var a=o.value;e(a)}}forEachInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ra(i),o;!(o=s()).done;){var a=o.value;n(a)}}anyInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ra(i),o;!(o=s()).done;){var a=o.value;if(n(a))return!0}return!1}size(){return this._childrenToCellKey.size}}class cC{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var Xf=[],hC=10,zv=null;class lz{static addListener(e){return zv===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),Xf.push(e),{remove:()=>{Xf=Xf.filter(n=>e!==n)}}}static setSampleRate(e){zv=e}static setMinSampleCount(e){hC=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new cC,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(zv||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<hC){this._resetData();return}var n=global.performance.now()-e,r=ye(ye({},this._info),{},{total_time_spent:n});Xf.forEach(i=>i(r)),this._resetData()}}}computeBlankness(e,n,r){if(!this._enabled||e.getItemCount(e.data)===0||n.last<n.first||this._samplesStartTime==null)return 0;var i=r.dOffset,s=r.offset,o=r.velocity,a=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(a),this._info.pixels_scrolled+=Math.round(Math.abs(i));var l=Math.round(Math.abs(o)*1e3),u=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=u-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=u-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var c=0,d=n.first,f=this._getFrameMetrics(d,e);d<=n.last&&(!f||!f.inLayout);)f=this._getFrameMetrics(d,e),d++;f&&d>0&&(c=Math.min(a,Math.max(0,f.offset-s)));for(var p=0,y=n.last,S=this._getFrameMetrics(y,e);y>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(y,e),y--;if(S&&y<e.getItemCount(e.data)-1){var T=S.offset+S.length;p=Math.min(a,Math.max(0,s+a-T))}var v=Math.round(c+p),g=v/a;return g>0?(this._anyBlankStartTime=u,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=v,g>.5&&(this._mostlyBlankStartTime=u,this._info.mostly_blank_count++)):(l<.01||Math.abs(i)<1)&&this.deactivateAndFlush(),g}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new cC,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class uz extends I.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,n){typeof e=="function"?super.setState((r,i)=>{this._inAsyncStateUpdate=!0;var s;try{s=e(r,i)}catch(o){throw o}finally{this._inAsyncStateUpdate=!1}return s},n):super.setState(e,n)}_installSetStateHooks(){var e=this,n=this.props,r=this.state;Object.defineProperty(this,"props",{get(){return ge(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),n},set(i){n=i}}),Object.defineProperty(this,"state",{get(){return ge(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),r},set(i){r=i}})}}class dC{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,n,r,i,s){var o=e.getItemCount(e.data),a=this._config,l=a.itemVisiblePercentThreshold,u=a.viewAreaCoveragePercentThreshold,c=u!=null,d=c?u:l;ge(d!=null&&l!=null!=(u!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var f=[];if(o===0)return f;var p=-1,y=s||{first:0,last:o-1},S=y.first,T=y.last;if(T>=o)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:s,itemCount:o})),[];for(var v=S;v<=T;v++){var g=i(v,e);if(g){var w=g.offset-n,x=w+g.length;if(w<r&&x>0)p=v,cz(c,d,w,x,r,g.length)&&f.push(v);else if(p>=0)break}}return f}onUpdate(e,n,r,i,s,o,a){var l=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||l===0||!i(0,e))){var u=[];if(l&&(u=this.computeViewableItems(e,n,r,i,a)),!(this._viewableIndices.length===u.length&&this._viewableIndices.every((d,f)=>d===u[f])))if(this._viewableIndices=u,this._config.minimumViewTime){var c=setTimeout(()=>{this._timers.delete(c),this._onUpdateSync(e,u,o,s)},this._config.minimumViewTime);this._timers.add(c)}else this._onUpdateSync(e,u,o,s)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,n,r,i){n=n.filter(g=>this._viewableIndices.includes(g));for(var s=this._viewableItems,o=new Map(n.map(g=>{var w=i(g,!0,e);return[w.key,w]})),a=[],l=ra(o),u;!(u=l()).done;){var c=u.value,d=c[0],f=c[1];s.has(d)||a.push(f)}for(var p=ra(s),y;!(y=p()).done;){var S=y.value,T=S[0],v=S[1];o.has(T)||a.push(ye(ye({},v),{},{isViewable:!1}))}a.length>0&&(this._viewableItems=o,r({viewableItems:Array.from(o.values()),changed:a,viewabilityConfig:this._config}))}}function cz(t,e,n,r,i,s){if(dz(n,r,i))return!0;var o=hz(n,r,i),a=100*(t?o/i:o/s);return a>=e}function hz(t,e,n){var r=Math.min(e,n)-Math.max(t,0);return Math.max(0,r)}function dz(t,e,n){return t>=0&&e<=n&&e>t}var qm=I.createContext(null);function fz(t){var e=t.children,n=t.value,r=I.useMemo(()=>({cellKey:null,getScrollMetrics:n.getScrollMetrics,horizontal:n.horizontal,getOutermostParentListRef:n.getOutermostParentListRef,registerAsNestedChild:n.registerAsNestedChild,unregisterAsNestedChild:n.unregisterAsNestedChild}),[n.getScrollMetrics,n.horizontal,n.getOutermostParentListRef,n.registerAsNestedChild,n.unregisterAsNestedChild]);return I.createElement(qm.Provider,{value:r},e)}function Mp(t){var e=t.cellKey,n=t.children,r=I.useContext(qm),i=I.useMemo(()=>r==null?null:ye(ye({},r),{},{cellKey:e}),[r,e]);return I.createElement(qm.Provider,{value:i},n)}class pz extends I.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!0})},unhighlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!1})},updateProps:(e,n)=>{var r=this.props,i=r.cellKey,s=r.prevCellKey;this.props.onUpdateSeparators([e==="leading"?s:i],n)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,n){return{separatorProps:ye(ye({},n.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(n=>({separatorProps:ye(ye({},n.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,n,r,i){if(e&&n&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),n)return I.createElement(n,{item:r,index:i,separators:this._separators});if(e)return e({item:r,index:i,separators:this._separators});ge(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,n=e.CellRendererComponent,r=e.ItemSeparatorComponent,i=e.ListItemComponent,s=e.cellKey,o=e.horizontal,a=e.item,l=e.index,u=e.inversionStyle,c=e.onCellFocusCapture,d=e.onCellLayout,f=e.renderItem,p=this._renderElement(f,i,a,l),y=I.isValidElement(r)?r:r&&I.createElement(r,this.state.separatorProps),S=u?o?[Wv.rowReverse,u]:[Wv.columnReverse,u]:o?[Wv.row,u]:u,T=n?I.createElement(n,ln({cellKey:s,index:l,item:a,style:S,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,y):I.createElement(X,ln({style:S,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,y);return I.createElement(Mp,{cellKey:this.props.cellKey},T)}}var Wv=ke.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function mz(t,e,n,r){r===void 0&&(r=1);for(var i=e.getItemCount(e.data),s=[],o=0;o<t.length;o++)for(var a=t[o],l=0,u=i-1;l<=u;){var c=l+(u-l>>>1),d=n(c,e),f=d.offset*r,p=(d.offset+d.length)*r;if(c===0&&a<f||c!==0&&a<=f)u=c-1;else if(a>p)l=c+1;else{s[o]=c;break}}return s}function gz(t,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,t.last)-Math.max(e.first,t.first))}function yz(t,e,n,r,i,s){var o=t.getItemCount(t.data);if(o===0)return{first:0,last:-1};var a=s.offset,l=s.velocity,u=s.visibleLength,c=s.zoomScale,d=c===void 0?1:c,f=Math.max(0,a),p=f+u,y=(n-1)*u,S=.5,T=l>1?"after":l<-1?"before":"none",v=Math.max(0,f-(1-S)*y),g=Math.max(0,p+S*y),w=i(o-1,t).offset*d;if(w<v)return{first:Math.max(0,o-1-e),last:o-1};var x=mz([v,f,p,g],t,i,d),O=x[0],D=x[1],b=x[2],E=x[3];O=O??0,D=D??Math.max(0,O),E=E??o-1,b=b??Math.min(E,D+e-1);for(var R={first:D,last:b},C=gz(r,R);!(D<=O&&b>=E);){var P=C>=e,L=D<=r.first||D>r.last,k=D>O&&(!P||!L),ce=b>=r.last||b<r.first,fe=b<E&&(!P||!ce);if(P&&!k&&!fe)break;k&&!(T==="after"&&fe&&ce)&&(L&&C++,D--),fe&&!(T==="before"&&k&&L)&&(ce&&C++,b++)}if(!(b>=D&&D>=0&&b<o&&D>=O&&b<=E&&D<=R.first&&b>=R.last))throw new Error("Bad window calculation "+JSON.stringify({first:D,last:b,itemCount:o,overscanFirst:O,overscanLast:E,visible:R}));return{first:D,last:b}}function sS(t,e){return typeof t=="object"&&(t==null?void 0:t.key)!=null?t.key:typeof t=="object"&&(t==null?void 0:t.id)!=null?t.id:String(e)}var sy={exports:{}};function VO(t,e){if(t!=null)return t;var n=new Error(e!==void 0?e:"Got unexpected "+t);throw n.framesToPop=1,n}sy.exports=VO;sy.exports.default=VO;Object.defineProperty(sy.exports,"__esModule",{value:!0});var vz=sy.exports;const _z=Pu(vz);var fC=.001,Hv=!1,Kv="";function Vo(t){return t??!1}function wz(t){return t??10}function qv(t){return t??10}function Sz(t){return t??2}function pC(t){return t??2}function mC(t,e){return t*e/2}function Ez(t){return t??50}function gC(t){return t??21}function Tz(t,e){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return t[n];return null}class Zn extends uz{scrollToEnd(e){var n=e?e.animated:!0,r=this.props.getItemCount(this.props.data)-1;if(!(r<0)){var i=this.__getFrameMetricsApprox(r,this.props),s=Math.max(0,i.offset+i.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Vo(this.props.horizontal)?{x:s,animated:n}:{y:s,animated:n})}}}scrollToIndex(e){var n=this.props,r=n.data,i=n.horizontal,s=n.getItemCount,o=n.getItemLayout,a=n.onScrollToIndexFailed,l=e.animated,u=e.index,c=e.viewOffset,d=e.viewPosition;if(ge(u>=0,"scrollToIndex out of range: requested index "+u+" but minimum is 0"),ge(s(r)>=1,"scrollToIndex out of range: item length "+s(r)+" but minimum is 1"),ge(u<s(r),"scrollToIndex out of range: requested index "+u+" is out of 0 to "+(s(r)-1)),!o&&u>this._highestMeasuredFrameIndex){ge(!!a,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),a({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:u});return}var f=this.__getFrameMetricsApprox(Math.floor(u),this.props),p=Math.max(0,this._getOffsetApprox(u,this.props)-(d||0)*(this._scrollMetrics.visibleLength-f.length))-(c||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(i?{x:p,animated:l}:{y:p,animated:l})}}scrollToItem(e){for(var n=e.item,r=this.props,i=r.data,s=r.getItem,o=r.getItemCount,a=o(i),l=0;l<a;l++)if(s(i,l)===n){this.scrollToIndex(ye(ye({},e),{},{index:l}));break}}scrollToOffset(e){var n=e.animated,r=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Vo(this.props.horizontal)?{x:r,animated:n}:{y:r,animated:n})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var n;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=a=>{this._nestedChildLists.add(a.ref,a.cellKey),this._hasInteracted&&a.ref.recordInteraction()},this._unregisterAsNestedChild=a=>{this._nestedChildLists.remove(a.ref)},this._onUpdateSeparators=(a,l)=>{a.forEach(u=>{var c=u!=null&&this._cellRefs[u];c&&c.updateSeparatorProps(l)})},this._getSpacerKey=a=>a?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new az,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=a=>{this._scrollRef=a},this._defaultRenderScrollComponent=a=>{var l=a.onRefresh;if(this._isNestedWithSameOrientation())return I.createElement(X,a);if(l){var u;return ge(typeof a.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((u=a.refreshing)!==null&&u!==void 0?u:"undefined")+"`"),I.createElement(Dr,ln({},a,{refreshControl:a.refreshControl==null?I.createElement(F5,{refreshing:a.refreshing,onRefresh:l,progressViewOffset:a.progressViewOffset}):a.refreshControl}))}else return I.createElement(Dr,a)},this._onCellLayout=(a,l,u)=>{var c=a.nativeEvent.layout,d={offset:this._selectOffset(c),length:this._selectLength(c),index:u,inLayout:!0},f=this._frames[l];!f||d.offset!==f.offset||d.length!==f.length||u!==f.index?(this._totalCellLength+=d.length-(f?f.length:0),this._totalCellsMeasured+=f?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[l]=d,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,u),this._scheduleCellsToRenderUpdate()):this._frames[l].inLayout=!0,this._triggerRemeasureForChildListsInCell(l),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=a=>{delete this._cellRefs[a];var l=this._frames[a];l&&(this._frames[a]=ye(ye({},l),{},{inLayout:!1}))},this._onLayout=a=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(a.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(a),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=a=>{this.props.onLayout&&this.props.onLayout(a)},this._onLayoutFooter=a=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(a.nativeEvent.layout)},this._onLayoutHeader=a=>{this._headerLength=this._selectLength(a.nativeEvent.layout)},this._onContentSizeChange=(a,l)=>{a>0&&l>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:_z(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(a,l),this._scrollMetrics.contentLength=this._selectLength({height:l,width:a}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=a=>{var l=a.offset-this._offsetFromParentVirtualizedList,u=a.visibleLength,c=l-this._scrollMetrics.offset,d=this._scrollMetrics.contentLength;return{visibleLength:u,contentLength:d,offset:l,dOffset:c}},this._onScroll=a=>{this._nestedChildLists.forEach(v=>{v._onScroll(a)}),this.props.onScroll&&this.props.onScroll(a);var l=a.timeStamp,u=this._selectLength(a.nativeEvent.layoutMeasurement),c=this._selectLength(a.nativeEvent.contentSize),d=this._selectOffset(a.nativeEvent.contentOffset),f=d-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var p=this._convertParentScrollMetrics({visibleLength:u,offset:d});u=p.visibleLength,c=p.contentLength,d=p.offset,f=p.dOffset}var y=this._scrollMetrics.timestamp?Math.max(1,l-this._scrollMetrics.timestamp):1,S=f/y;y>500&&this._scrollMetrics.dt>500&&c>5*u&&!this._hasWarned.perf&&(sz("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:y,prevDt:this._scrollMetrics.dt,contentLength:c}),this._hasWarned.perf=!0);var T=a.nativeEvent.zoomScale<0?1:a.nativeEvent.zoomScale;this._scrollMetrics={contentLength:c,dt:y,dOffset:f,offset:d,timestamp:l,velocity:S,visibleLength:u,zoomScale:T},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),S!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=a=>{this._nestedChildLists.forEach(l=>{l._onScrollBeginDrag(a)}),this._viewabilityTuples.forEach(l=>{l.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(a)},this._onScrollEndDrag=a=>{this._nestedChildLists.forEach(u=>{u._onScrollEndDrag(a)});var l=a.nativeEvent.velocity;l&&(this._scrollMetrics.velocity=this._selectOffset(l)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(a)},this._onMomentumScrollBegin=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollBegin(a)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(a)},this._onMomentumScrollEnd=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollEnd(a)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(a)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((a,l)=>{var u=this._adjustCellsAroundViewport(l,a.cellsAroundViewport),c=Zn._createRenderMask(l,u,this._getNonViewportRenderRegions(l));return u.first===a.cellsAroundViewport.first&&u.last===a.cellsAroundViewport.last&&c.equals(a.renderMask)?null:{cellsAroundViewport:u,renderMask:c}})},this._createViewToken=(a,l,u)=>{var c=u.data,d=u.getItem,f=d(c,a);return{index:a,item:f,key:this._keyExtractor(f,a,u),isViewable:l}},this._getOffsetApprox=(a,l)=>{if(Number.isInteger(a))return this.__getFrameMetricsApprox(a,l).offset;var u=this.__getFrameMetricsApprox(Math.floor(a),l),c=a-Math.floor(a);return u.offset+c*u.length},this.__getFrameMetricsApprox=(a,l)=>{var u=this._getFrameMetrics(a,l);if(u&&u.index===a)return u;var c=l.data,d=l.getItemCount,f=l.getItemLayout;return ge(a>=0&&a<d(c),"Tried to get frame for out of range index "+a),ge(!f,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*a}},this._getFrameMetrics=(a,l)=>{var u=l.data,c=l.getItem,d=l.getItemCount,f=l.getItemLayout;ge(a>=0&&a<d(u),"Tried to get frame for out of range index "+a);var p=c(u,a),y=this._frames[this._keyExtractor(p,a,l)];return(!y||y.index!==a)&&f?f(u,a):y},this._getNonViewportRenderRegions=a=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var l=this._cellRefs[this._lastFocusedCellKey],u=l.props.index,c=a.getItemCount(a.data);if(u>=c||this._keyExtractor(a.getItem(a.data,u),u,a)!==this._lastFocusedCellKey)return[];for(var d=u,f=0,p=d-1;p>=0&&f<this._scrollMetrics.visibleLength;p--)d--,f+=this.__getFrameMetricsApprox(p,a).length;for(var y=u,S=0,T=y+1;T<c&&S<this._scrollMetrics.visibleLength;T++)y++,S+=this.__getFrameMetricsApprox(T,a).length;return[{first:d,last:y}]},this._checkProps(e),this._fillRateHelper=new lz(this._getFrameMetrics),this._updateCellsToRenderBatcher=new iz(this._updateCellsToRender,(n=this.props.updateCellsBatchingPeriod)!==null&&n!==void 0?n:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(a=>({viewabilityHelper:new dC(a.viewabilityConfig),onViewableItemsChanged:a.onViewableItemsChanged}));else{var r=this.props,i=r.onViewableItemsChanged,s=r.viewabilityConfig;i&&this._viewabilityTuples.push({viewabilityHelper:new dC(s),onViewableItemsChanged:i})}var o=Zn._initialRenderRegion(e);this.state={cellsAroundViewport:o,renderMask:Zn._createRenderMask(e,o)},this.invertedWheelEventHandler=a=>{var l=this.props.horizontal?a.target.scrollLeft:a.target.scrollTop,u=this.props.horizontal?a.target.scrollWidth:a.target.scrollHeight,c=this.props.horizontal?a.target.clientWidth:a.target.clientHeight,d=u>c,f=this.props.horizontal?a.deltaX||a.wheelDeltaX:a.deltaY||a.wheelDeltaY,p=f;d&&(p=f<0?Math.min(f+l,0):Math.max(f-(u-c-l),0));var y=f-p;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var S=this._scrollRef.getScrollableNode();if(this.props.horizontal){a.target.scrollLeft+=y;var T=S.scrollLeft-p;S.scrollLeft=this.props.getItemLayout?T:Math.min(T,this._totalCellLength)}else{a.target.scrollTop+=y;var v=S.scrollTop-p;S.scrollTop=this.props.getItemLayout?v:Math.min(v,this._totalCellLength)}a.preventDefault()}}}_checkProps(e){var n=e.onScroll,r=e.windowSize,i=e.getItemCount,s=e.data,o=e.initialScrollIndex;ge(!n||!n.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),ge(gC(r)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),ge(i,'VirtualizedList: The "getItemCount" prop must be provided');var a=i(s);o!=null&&!this._hasTriggeredInitialScrollToIndex&&(o<0||a>0&&o>=a)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+o+'" is not valid (list has '+a+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,n,r){var i=e.getItemCount(e.data);ge(n.first>=0&&n.last>=n.first-1&&n.last<i,'Invalid cells around viewport "['+n.first+", "+n.last+']" was passed to VirtualizedList._createRenderMask');var s=new oz(i);if(i>0){for(var o=[n,...r??[]],a=0,l=o;a<l.length;a++){var u=l[a];s.addCells(u)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var c=Zn._initialRenderRegion(e);s.addCells(c)}var d=new Set(e.stickyHeaderIndices);Zn._ensureClosestStickyHeader(e,d,s,n.first)}return s}static _initialRenderRegion(e){var n,r=e.getItemCount(e.data),i=Math.max(0,Math.min(r-1,Math.floor((n=e.initialScrollIndex)!==null&&n!==void 0?n:0))),s=Math.min(r,i+wz(e.initialNumToRender))-1;return{first:i,last:s}}static _ensureClosestStickyHeader(e,n,r,i){for(var s=e.ListHeaderComponent?1:0,o=i-1;o>=0;o--)if(n.has(o+s)){r.addCells({first:o,last:o});break}}_adjustCellsAroundViewport(e,n){var r=e.data,i=e.getItemCount,s=pC(e.onEndReachedThreshold),o=this._scrollMetrics,a=o.contentLength,l=o.offset,u=o.visibleLength,c=a-u-l;if(u<=0||a<=0)return n.last>=i(r)?Zn._constrainToItemCount(n,e):n;var d;if(e.disableVirtualization){var f=c<s*u?qv(e.maxToRenderPerBatch):0;d={first:0,last:Math.min(n.last+f,i(r)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(c)>=Number.EPSILON)return n.last>=i(r)?Zn._constrainToItemCount(n,e):n;d=yz(e,qv(e.maxToRenderPerBatch),gC(e.windowSize),n,this.__getFrameMetricsApprox,this._scrollMetrics),ge(d.last<i(r),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var p=this._findFirstChildWithMore(d.first,d.last);d.last=p??d.last}return d}_findFirstChildWithMore(e,n){for(var r=e;r<=n;r++){var i=this._indicesToKeys.get(r);if(i!=null&&this._nestedChildLists.anyInCell(i,s=>s.hasMore()))return r}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,n){var r=e.getItemCount(e.data);if(r===n.renderMask.numCells())return n;var i=Zn._constrainToItemCount(n.cellsAroundViewport,e);return{cellsAroundViewport:i,renderMask:Zn._createRenderMask(e,i)}}_pushCells(e,n,r,i,s,o){var a=this,l=this.props,u=l.CellRendererComponent,c=l.ItemSeparatorComponent,d=l.ListHeaderComponent,f=l.ListItemComponent,p=l.data,y=l.debug,S=l.getItem,T=l.getItemCount,v=l.getItemLayout,g=l.horizontal,w=l.renderItem,x=d?1:0,O=T(p)-1,D;s=Math.min(O,s);for(var b=function(){var C=S(p,E),P=a._keyExtractor(C,E,a.props);a._indicesToKeys.set(E,P),r.has(E+x)&&n.push(e.length);var L=v==null||y||a._fillRateHelper.enabled();e.push(I.createElement(pz,ln({CellRendererComponent:u,ItemSeparatorComponent:E<O?c:void 0,ListItemComponent:f,cellKey:P,horizontal:g,index:E,inversionStyle:o,item:C,key:P,prevCellKey:D,onUpdateSeparators:a._onUpdateSeparators,onCellFocusCapture:k=>a._onCellFocusCapture(P),onUnmount:a._onCellUnmount,ref:k=>{a._cellRefs[P]=k},renderItem:w},L&&{onCellLayout:a._onCellLayout}))),D=P},E=i;E<=s;E++)b()}static _constrainToItemCount(e,n){var r=n.getItemCount(n.data),i=Math.min(r-1,e.last),s=qv(n.maxToRenderPerBatch);return{first:uC(0,r-1-s,e.first),last:i}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===Vo(this.props.horizontal))}_keyExtractor(e,n,r){if(r.keyExtractor!=null)return r.keyExtractor(e,n);var i=sS(e,n);return i===String(n)&&(Hv=!0,e.type&&e.type.displayName&&(Kv=e.type.displayName)),i}render(){this._checkProps(this.props);var e=this.props,n=e.ListEmptyComponent,r=e.ListFooterComponent,i=e.ListHeaderComponent,s=this.props,o=s.data,a=s.horizontal,l=this.props.inverted?Vo(this.props.horizontal)?Tr.horizontallyInverted:Tr.verticallyInverted:null,u=[],c=new Set(this.props.stickyHeaderIndices),d=[];if(i){c.has(0)&&d.push(0);var f=I.isValidElement(i)?i:I.createElement(i,null);u.push(I.createElement(Mp,{cellKey:this._getCellKey()+"-header",key:"$header"},I.createElement(X,{onLayout:this._onLayoutHeader,style:[l,this.props.ListHeaderComponentStyle]},f)))}var p=this.props.getItemCount(o);if(p===0&&n){var y=I.isValidElement(n)?n:I.createElement(n,null);u.push(I.createElement(Mp,{cellKey:this._getCellKey()+"-empty",key:"$empty"},I.cloneElement(y,{onLayout:fe=>{this._onLayoutEmpty(fe),y.props.onLayout&&y.props.onLayout(fe)},style:[l,y.props.style]})))}if(p>0){Hv=!1,Kv="";for(var S=this._getSpacerKey(!a),T=this.state.renderMask.enumerateRegions(),v=Tz(T,fe=>fe.isSpacer),g=ra(T),w;!(w=g()).done;){var x=w.value;if(x.isSpacer){if(this.props.disableVirtualization)continue;var O=x===v,D=O&&!this.props.getItemLayout,b=D?uC(x.first-1,x.last,this._highestMeasuredFrameIndex):x.last,E=this.__getFrameMetricsApprox(x.first,this.props),R=this.__getFrameMetricsApprox(b,this.props),C=R.offset+R.length-E.offset;u.push(I.createElement(X,{key:"$spacer-"+x.first,style:{[S]:C}}))}else this._pushCells(u,d,c,x.first,x.last,l)}!this._hasWarned.keys&&Hv&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",Kv),this._hasWarned.keys=!0)}if(r){var P=I.isValidElement(r)?r:I.createElement(r,null);u.push(I.createElement(Mp,{cellKey:this._getFooterCellKey(),key:"$footer"},I.createElement(X,{onLayout:this._onLayoutFooter,style:[l,this.props.ListFooterComponentStyle]},P)))}var L=ye(ye({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:Ez(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:d,style:l?[l,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<p-1;var k=I.createElement(fz,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:Vo(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},I.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(L),{ref:this._captureScrollRef},u)),ce=k;return this.props.debug?I.createElement(X,{style:Tr.debug},ce,this._renderDebugOverlay()):ce}componentDidUpdate(e){var n=this.props,r=n.data,i=n.extraData;(r!==e.data||i!==e.extraData)&&this._viewabilityTuples.forEach(o=>{o.viewabilityHelper.resetViewableIndices()});var s=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),s&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,n=>{n.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,n,r,i)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:n}),this._scrollMetrics.contentLength=this._selectLength({width:r,height:i});var s=this._convertParentScrollMetrics(this.context.getScrollMetrics()),o=this._scrollMetrics.visibleLength!==s.visibleLength||this._scrollMetrics.offset!==s.offset;o&&(this._scrollMetrics.visibleLength=s.visibleLength,this._scrollMetrics.offset=s.offset,this._nestedChildLists.forEach(a=>{a.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),n=[],r=this.props.getItemCount(this.props.data),i=0;i<r;i++){var s=this.__getFrameMetricsApprox(i,this.props);s.inLayout&&n.push(s)}var o=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,a=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),l=a.offset+a.length-o,u=this._scrollMetrics.offset,c=this._scrollMetrics.visibleLength;return I.createElement(X,{style:[Tr.debugOverlayBase,Tr.debugOverlay]},n.map((d,f)=>I.createElement(X,{key:"f"+f,style:[Tr.debugOverlayBase,Tr.debugOverlayFrame,{top:d.offset*e,height:d.length*e}]})),I.createElement(X,{style:[Tr.debugOverlayBase,Tr.debugOverlayFrameLast,{top:o*e,height:l*e}]}),I.createElement(X,{style:[Tr.debugOverlayBase,Tr.debugOverlayFrameVis,{top:u*e,height:c*e}]}))}_selectLength(e){return Vo(this.props.horizontal)?e.width:e.height}_selectOffset(e){return Vo(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,n=e.data,r=e.getItemCount,i=e.onStartReached,s=e.onStartReachedThreshold,o=e.onEndReached,a=e.onEndReachedThreshold,l=e.initialScrollIndex,u=this._scrollMetrics,c=u.contentLength,d=u.visibleLength,f=u.offset,p=f,y=c-d-f;p<fC&&(p=0),y<fC&&(y=0);var S=2,T=s!=null?s*d:S,v=a!=null?a*d:S,g=p<=T,w=y<=v;o&&this.state.cellsAroundViewport.last===r(n)-1&&w&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,o({distanceFromEnd:y})):i!=null&&this.state.cellsAroundViewport.first===0&&g&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!l||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,i({distanceFromStart:p})):(this._sentStartForContentLength=g?this._sentStartForContentLength:0,this._sentEndForContentLength=w?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,n=e.first,r=e.last,i=this._scrollMetrics,s=i.offset,o=i.visibleLength,a=i.velocity,l=this.props.getItemCount(this.props.data),u=!1,c=Sz(this.props.onStartReachedThreshold),d=pC(this.props.onEndReachedThreshold);if(n>0){var f=s-this.__getFrameMetricsApprox(n,this.props).offset;u=f<0||a<-2&&f<mC(c,o)}if(!u&&r>=0&&r<l-1){var p=this.__getFrameMetricsApprox(r,this.props).offset-(s+o);u=p<0||a>2&&p<mC(d,o)}if(u&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,n){this._viewabilityTuples.forEach(r=>{r.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,r.onViewableItemsChanged,n)})}}Zn.contextType=qm;var Tr=ke.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),yC=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function bz(t,e){return!!(t===e||yC(t)&&yC(e))}function Iz(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!bz(t[n],e[n]))return!1;return!0}function Rz(t,e){e===void 0&&(e=Iz);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var Cz=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function xz(t){return t??V6.OS==="android"}function Fo(t){return t??1}function Az(t){return typeof Object(t).length=="number"}class Pz extends I.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=n=>{this._listRef=n},this._getItem=(n,r)=>{var i=Fo(this.props.numColumns);if(i>1){for(var s=[],o=0;o<i;o++){var a=r*i+o;if(a<n.length){var l=n[a];s.push(l)}}return s}else return n[r]},this._getItemCount=n=>{if(n!=null&&Az(n)){var r=Fo(this.props.numColumns);return r>1?Math.ceil(n.length/r):n.length}else return 0},this._keyExtractor=(n,r)=>{var i,s=Fo(this.props.numColumns),o=(i=this.props.keyExtractor)!==null&&i!==void 0?i:sS;return s>1?(ge(Array.isArray(n),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",s),n.map((a,l)=>o(a,r*s+l)).join(":")):o(n,r)},this._renderer=(n,r,i,s,o)=>{var a=Fo(s),l=c=>n?I.createElement(n,c):r?r(c):null,u=c=>{if(a>1){var d=c.item,f=c.index;return ge(Array.isArray(d),"Expected array of items with numColumns > 1"),I.createElement(X,{style:[kz.row,i]},d.map((p,y)=>{var S=l({item:p,index:f*a+y,separators:c.separators});return S!=null?I.createElement(I.Fragment,{key:y},S):null}))}else return l(c)};return n?{ListItemComponent:u}:{renderItem:u}},this._memoizedRenderer=Rz(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(n=>({viewabilityConfig:n.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(n.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){ge(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),ge(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),ge(!O5(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),ge(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var n=e.getItem,r=e.getItemCount,i=e.horizontal,s=e.columnWrapperStyle,o=e.onViewableItemsChanged,a=e.viewabilityConfigCallbackPairs,l=Fo(this.props.numColumns);ge(!n&&!r,"FlatList does not support custom data formats."),l>1?ge(!i,"numColumns does not support horizontal."):ge(!s,"columnWrapperStyle not supported for single column lists"),ge(!(o&&a),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,n){var r,i=Fo(this.props.numColumns),s=(r=this.props.keyExtractor)!==null&&r!==void 0?r:sS;n.item.forEach((o,a)=>{ge(n.index!=null,"Missing index!");var l=n.index*i+a;e.push(ye(ye({},n),{},{item:o,key:s(o,l),index:l}))})}_createOnViewableItemsChanged(e){return n=>{var r=Fo(this.props.numColumns);if(e)if(r>1){var i=[],s=[];n.viewableItems.forEach(o=>this._pushMultiColumnViewable(s,o)),n.changed.forEach(o=>this._pushMultiColumnViewable(i,o)),e({viewableItems:s,changed:i})}else e(n)}}render(){var e=this.props,n=e.numColumns,r=e.columnWrapperStyle,i=e.removeClippedSubviews,s=e.strictMode,o=s===void 0?!1:s,a=An(e,Cz),l=o?this._memoizedRenderer:this._renderer;return I.createElement(Zn,ln({},a,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:xz(i)},l(this.props.ListItemComponent,this.props.renderItem,r,n,this.props.extraData)))}}var kz=ke.create({row:{flexDirection:"row"}}),Dz=[];function FO(t){return Dz[t-1]}var Oz=/^data:/;class jn{static has(e){var n=jn._entries,r=Oz.test(e);return r||!!n[e]}static add(e){var n=jn._entries,r=Date.now();n[e]?(n[e].lastUsedTimestamp=r,n[e].refCount+=1):n[e]={lastUsedTimestamp:r,refCount:1}}static remove(e){var n=jn._entries;n[e]&&(n[e].refCount-=1),jn._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var e=jn._entries,n=Object.keys(e);if(n.length+1>jn._maximumEntries){var r,i;n.forEach(s=>{var o=e[s];(!i||o.lastUsedTimestamp<i.lastUsedTimestamp)&&o.refCount===0&&(r=s,i=o)}),r&&delete e[r]}}}jn._maximumEntries=256;jn._entries={};var Gv=0,Qf={},ri={abort(t){var e=Qf[""+t];e&&(e.onerror=null,e.onload=null,e=null,delete Qf[""+t])},getSize(t,e,n){var r=!1,i=setInterval(o,16),s=ri.load(t,o,a);function o(){var l=Qf[""+s];if(l){var u=l.naturalHeight,c=l.naturalWidth;u&&c&&(e(c,u),r=!0)}r&&(ri.abort(s),clearInterval(i))}function a(){typeof n=="function"&&n(),ri.abort(s),clearInterval(i)}},has(t){return jn.has(t)},load(t,e,n){Gv+=1;var r=new window.Image;return r.onerror=n,r.onload=i=>{var s=()=>e({nativeEvent:i});typeof r.decode=="function"?r.decode().then(s,s):setTimeout(s,0)},r.src=t,Qf[""+Gv]=r,Gv},prefetch(t){return new Promise((e,n)=>{ri.load(t,()=>{jn.add(t),jn.remove(t),e()},n)})},queryCache(t){var e={};return t.forEach(n=>{jn.has(n)&&(e[n]="disk/memory")}),Promise.resolve(e)}};class gh{static get(){return Um.get("window").scale}static getFontScale(){return Um.get("window").fontScale||gh.get()}static getPixelSizeForLayoutSize(e){return Math.round(e*gh.get())}static roundToNearestPixel(e){var n=gh.get();return Math.round(e*n)/n}}var Mz=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],Lz="ERRORED",Xv="LOADED",vC="LOADING",Nz="IDLE",Vz=0,Fz=/^(data:image\/svg\+xml;utf8,)(.*)/;function Bz(t,e){return t&&e!=null?I.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},I.createElement("defs",null,I.createElement("filter",{id:"tint-"+e,suppressHydrationWarning:!0},I.createElement("feFlood",{floodColor:""+t,key:t}),I.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function jz(t,e,n,r){var i=ke.flatten(t),s=i.filter,o=i.resizeMode,a=i.shadowOffset,l=i.tintColor;i.resizeMode,i.tintColor;var u=[],c=null;if(s&&u.push(s),e&&u.push("blur("+e+"px)"),a){var d=gO(i);d&&u.push("drop-shadow("+d+")")}return(r||l)&&n!=null&&u.push("url(#tint-"+n+")"),u.length>0&&(c=u.join(" ")),[o,c,l]}function $z(t){if(typeof t=="number"){var e=FO(t),n=e.height,r=e.width;return{height:n,width:r}}else if(t!=null&&!Array.isArray(t)&&typeof t=="object"){var i=t.height,s=t.width;return{height:i,width:s}}}function Qv(t){var e=null;if(typeof t=="number"){var n=FO(t);if(n==null)throw new Error('Image: asset with ID "'+t+'" could not be found. Please check the image source or packager.');var r=n.scales[0];if(n.scales.length>1){var i=gh.get();r=n.scales.reduce((c,d)=>Math.abs(d-i)<Math.abs(c-i)?d:c)}var s=r!==1?"@"+r+"x":"";e=n?n.httpServerLocation+"/"+n.name+s+"."+n.type:""}else typeof t=="string"?e=t:t&&typeof t.uri=="string"&&(e=t.uri);if(e){var o=e.match(Fz);if(o){var a=o[1],l=o[2],u=encodeURIComponent(l);return""+a+u}}return e}var BO=I.forwardRef((t,e)=>{var n=t["aria-label"],r=t.accessibilityLabel,i=t.blurRadius,s=t.defaultSource,o=t.draggable,a=t.onError,l=t.onLayout,u=t.onLoad,c=t.onLoadEnd,d=t.onLoadStart,f=t.pointerEvents,p=t.source,y=t.style,S=An(t,Mz),T=n||r,v=I.useState(()=>{var He=Qv(p);if(He!=null){var kt=ri.has(He);if(kt)return Xv}return Nz}),g=v[0],w=v[1],x=I.useState({}),O=x[0],D=x[1],b=I.useContext($m),E=I.useRef(null),R=I.useRef(Vz++),C=I.useRef(null),P=g===Xv||g===vC&&s==null,L=jz(y,i,R.current,t.tintColor),k=L[0],ce=L[1],fe=L[2],je=t.resizeMode||k||"cover",Re=t.tintColor||fe,$=P?p:s,Y=Qv($),re=$z($),we=Y?'url("'+Y+'")':null,Ae=at(),un=Y?Mu("img",{alt:T||"",style:Rc.accessibilityImage$raw,draggable:o||!1,ref:E,src:Y}):null;function at(){if(E.current!=null&&(je==="center"||je==="repeat")){var He=E.current,kt=He.naturalHeight,Pn=He.naturalWidth,vi=O.height,os=O.width;if(kt&&Pn&&vi&&os){var gr=Math.min(1,os/Pn,vi/kt),jr=Math.ceil(gr*Pn),Xn=Math.ceil(gr*kt);return jr+"px "+Xn+"px"}}}function jt(He){if(je==="center"||je==="repeat"||l){var kt=He.nativeEvent.layout;l&&l(He),D(kt)}}var dt=Qv(p);return I.useEffect(()=>{He(),dt!=null&&(w(vC),d&&d(),C.current=ri.load(dt,function(Pn){w(Xv),u&&u(Pn),c&&c()},function(){w(Lz),a&&a({nativeEvent:{error:"Failed to load resource "+dt}}),c&&c()}));function He(){C.current!=null&&(ri.abort(C.current),C.current=null)}return He},[dt,C,w,a,u,c,d]),I.createElement(X,ln({},S,{"aria-label":T,onLayout:jt,pointerEvents:f,ref:e,style:[Rc.root,b&&Rc.inline,re,y,Rc.undo,{boxShadow:null}]}),I.createElement(X,{style:[Rc.image,Uz[je],{backgroundImage:we,filter:ce},Ae!=null&&{backgroundSize:Ae}],suppressHydrationWarning:!0}),un,Bz(Re,R.current))});BO.displayName="Image";var Vr=BO;Vr.getSize=function(t,e,n){ri.getSize(t,e,n)};Vr.prefetch=function(t){return ri.prefetch(t)};Vr.queryCache=function(t){return ri.queryCache(t)};var Rc=ke.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:ye(ye({},ke.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:ye(ye({},ke.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),Uz=ke.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}}),zz=["hrefAttrs","numberOfLines","onClick","onLayout","onPress","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture","selectable"],Wz=Object.assign({},DE,OE,ME,LE,NE,VE,FE,BE,{href:!0,lang:!0,pointerEvents:!0}),Hz=t=>jE(t,Wz),G=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.numberOfLines,i=t.onClick,s=t.onLayout,o=t.onPress,a=t.onMoveShouldSetResponder,l=t.onMoveShouldSetResponderCapture,u=t.onResponderEnd,c=t.onResponderGrant,d=t.onResponderMove,f=t.onResponderReject,p=t.onResponderRelease,y=t.onResponderStart,S=t.onResponderTerminate,T=t.onResponderTerminationRequest,v=t.onScrollShouldSetResponder,g=t.onScrollShouldSetResponderCapture,w=t.onSelectionChangeShouldSetResponder,x=t.onSelectionChangeShouldSetResponderCapture,O=t.onStartShouldSetResponder,D=t.onStartShouldSetResponderCapture,b=t.selectable,E=An(t,zz),R=I.useContext($m),C=I.useRef(null),P=kE(),L=P.direction;$E(C,s),WE(C,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:l,onResponderEnd:u,onResponderGrant:c,onResponderMove:d,onResponderReject:f,onResponderRelease:p,onResponderStart:y,onResponderTerminate:S,onResponderTerminationRequest:T,onScrollShouldSetResponder:v,onScrollShouldSetResponderCapture:g,onSelectionChangeShouldSetResponder:w,onSelectionChangeShouldSetResponderCapture:x,onStartShouldSetResponder:O,onStartShouldSetResponderCapture:D});var k=I.useCallback(jt=>{i!=null?i(jt):o!=null&&(jt.stopPropagation(),o(jt))},[i,o]),ce=R?"span":"div",fe=t.lang!=null?ry(t.lang):null,je=t.dir||fe,Re=je||L,$=Hz(E);if($.dir=je,R||($.dir=je??"auto"),(i||o)&&($.onClick=k),$.style=[r!=null&&r>1&&{WebkitLineClamp:r},R===!0?Bo.textHasAncestor$raw:Bo.text$raw,r===1&&Bo.textOneLine,r!=null&&r>1&&Bo.textMultiLine,t.style,b===!0&&Bo.selectable,b===!1&&Bo.notSelectable,o&&Bo.pressable],t.href!=null&&(ce="a",n!=null)){var Y=n.download,re=n.rel,we=n.target;Y!=null&&($.download=Y),re!=null&&($.rel=re),typeof we=="string"&&($.target=we.charAt(0)!=="_"?"_"+we:we)}var Ae=UE($),un=Pd(C,Ae,e);$.ref=un;var at=Mu(ce,$,{writingDirection:Re});return R?at:I.createElement($m.Provider,{value:!0},at)});G.displayName="Text";var _C={backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",listStyle:"none",margin:0,padding:0,position:"relative",textAlign:"start",textDecoration:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},Bo=ke.create({text$raw:_C,textHasAncestor$raw:ye(ye({},_C),{},{color:"inherit",font:"inherit",textAlign:"inherit",whiteSpace:"inherit"}),textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}}),Kz=["animating","color","hidesWhenStopped","size","style"],wC=t=>I.createElement("circle",{cx:"16",cy:"16",fill:"none",r:"14",strokeWidth:"4",style:t}),kd=I.forwardRef((t,e)=>{var n=t.animating,r=n===void 0?!0:n,i=t.color,s=i===void 0?"#1976D2":i,o=t.hidesWhenStopped,a=o===void 0?!0:o,l=t.size,u=l===void 0?"small":l,c=t.style,d=An(t,Kz),f=I.createElement("svg",{height:"100%",viewBox:"0 0 32 32",width:"100%"},wC({stroke:s,opacity:.2}),wC({stroke:s,strokeDasharray:80,strokeDashoffset:60}));return I.createElement(X,ln({},d,{"aria-valuemax":1,"aria-valuemin":0,ref:e,role:"progressbar",style:[Yf.container,c]}),I.createElement(X,{children:f,style:[typeof u=="number"?{height:u,width:u}:qz[u],Yf.animation,!r&&Yf.animationPause,!r&&a&&Yf.hidesWhenStopped]}))});kd.displayName="ActivityIndicator";var Yf=ke.create({container:{alignItems:"center",justifyContent:"center"},hidesWhenStopped:{visibility:"hidden"},animation:{animationDuration:"0.75s",animationKeyframes:[{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}],animationTimingFunction:"linear",animationIterationCount:"infinite"},animationPause:{animationPlayState:"paused"}}),qz=ke.create({small:{width:20,height:20},large:{width:36,height:36}}),SC="DELAY",Ir="ERROR",EC="LONG_PRESS_DETECTED",hn="NOT_RESPONDER",fu="RESPONDER_ACTIVE_LONG_PRESS_START",oy="RESPONDER_ACTIVE_PRESS_START",oS="RESPONDER_INACTIVE_PRESS_START",Gz="RESPONDER_GRANT",Lp="RESPONDER_RELEASE",jO="RESPONDER_TERMINATED",TC=Object.freeze({NOT_RESPONDER:{DELAY:Ir,RESPONDER_GRANT:oS,RESPONDER_RELEASE:Ir,RESPONDER_TERMINATED:Ir,LONG_PRESS_DETECTED:Ir},RESPONDER_INACTIVE_PRESS_START:{DELAY:oy,RESPONDER_GRANT:Ir,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:Ir},RESPONDER_ACTIVE_PRESS_START:{DELAY:Ir,RESPONDER_GRANT:Ir,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:fu},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:Ir,RESPONDER_GRANT:Ir,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:fu},ERROR:{DELAY:hn,RESPONDER_GRANT:oS,RESPONDER_RELEASE:hn,RESPONDER_TERMINATED:hn,LONG_PRESS_DETECTED:hn}}),$O=t=>t.getAttribute("role"),aS=t=>t.tagName.toLowerCase(),bC=t=>t===oy||t===fu,Np=t=>$O(t)==="button",IC=t=>t===oS||t===oy||t===fu,Xz=t=>t===jO||t===Lp,RC=t=>{var e=t.key,n=t.target,r=e===" "||e==="Spacebar",i=aS(n)==="button"||Np(n);return e==="Enter"||r&&i},Qz=450,Yz=50;class Jz{constructor(e){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=hn,this._responderElement=null,this.configure(e)}configure(e){this._config=e}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var e=(i,s)=>{i.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=hn,this._isPointerTouch=i.nativeEvent.type==="touchstart",this._receiveSignal(Gz,i);var o=Yv(this._config.delayPressStart,0,Yz);s!==!1&&o>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(SC,i)},o):this._receiveSignal(SC,i);var a=Yv(this._config.delayLongPress,10,Qz);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(i)},a+o)},n=i=>{this._receiveSignal(Lp,i)},r=i=>{var s=this._config.onPress,o=i.target;if(this._touchState!==hn&&RC(i)){n(i),document.removeEventListener("keyup",r);var a=o.getAttribute("role"),l=aS(o),u=a==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea",c=this._responderElement===o;s!=null&&!u&&c&&s(i),this._responderElement=null}};return{onStartShouldSetResponder:i=>{var s=this._config.disabled;return s&&Np(i.currentTarget)&&i.stopPropagation(),s==null?!0:!s},onKeyDown:i=>{var s=this._config.disabled,o=i.key,a=i.target;if(!s&&RC(i)){this._touchState===hn&&(e(i,!1),this._responderElement=a,document.addEventListener("keyup",r));var l=o===" "||o==="Spacebar",u=$O(a),c=u==="button"||u==="menuitem";l&&c&&aS(a)!=="button"&&i.preventDefault(),i.stopPropagation()}},onResponderGrant:i=>e(i),onResponderMove:i=>{this._config.onPressMove!=null&&this._config.onPressMove(i);var s=CC(i);if(this._touchActivatePosition!=null){var o=this._touchActivatePosition.pageX-s.pageX,a=this._touchActivatePosition.pageY-s.pageY;Math.hypot(o,a)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:i=>n(i),onResponderTerminate:i=>{i.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(jO,i)},onResponderTerminationRequest:i=>{var s=this._config,o=s.cancelable,a=s.disabled,l=s.onLongPress;return!a&&l!=null&&this._isPointerTouch&&i.nativeEvent.type==="contextmenu"?!1:o??!0},onClick:i=>{var s=this._config,o=s.disabled,a=s.onPress;o?Np(i.currentTarget)&&i.stopPropagation():(i.stopPropagation(),this._longPressDispatched||this._selectionTerminated?i.preventDefault():a!=null&&i.altKey===!1&&a(i))},onContextMenu:i=>{var s=this._config,o=s.disabled,a=s.onLongPress;o?Np(i.currentTarget)&&i.stopPropagation():a!=null&&this._isPointerTouch&&!i.defaultPrevented&&(i.preventDefault(),i.stopPropagation())}}}_receiveSignal(e,n){var r=this._touchState,i=null;TC[r]!=null&&(i=TC[r][e]),!(this._touchState===hn&&e===Lp)&&(i==null||i===Ir?console.error("PressResponder: Invalid signal "+e+" for state "+r+" on responder"):r!==i&&(this._performTransitionSideEffects(r,i,e,n),this._touchState=i))}_performTransitionSideEffects(e,n,r,i){if(Xz(r)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),IC(e)&&r===EC){var s=this._config.onLongPress;s!=null&&i.nativeEvent.key==null&&(s(i),this._longPressDispatched=!0)}var o=bC(e),a=bC(n);if(!o&&a?this._activate(i):o&&!a&&this._deactivate(i),IC(e)&&r===Lp){var l=this._config,u=l.onLongPress,c=l.onPress;if(c!=null){var d=u!=null&&e===fu;d||!a&&!o&&(this._activate(i),this._deactivate(i))}}this._cancelPressDelayTimeout()}_activate(e){var n=this._config,r=n.onPressChange,i=n.onPressStart,s=CC(e);this._touchActivatePosition={pageX:s.pageX,pageY:s.pageY},i!=null&&i(e),r!=null&&r(!0)}_deactivate(e){var n=this._config,r=n.onPressChange,i=n.onPressEnd;function s(){i!=null&&i(e),r!=null&&r(!1)}var o=Yv(this._config.delayPressEnd);o>0?this._pressOutDelayTimeout=setTimeout(()=>{s()},o):s()}_handleLongPress(e){(this._touchState===oy||this._touchState===fu)&&this._receiveSignal(EC,e)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function Yv(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Math.max(e,t??n)}function CC(t){var e=t.nativeEvent,n=e.changedTouches,r=e.touches;return r!=null&&r.length>0?r[0]:n!=null&&n.length>0?n[0]:t.nativeEvent}function Zz(t,e){var n=I.useRef(null);n.current==null&&(n.current=new Jz(e));var r=n.current;return I.useEffect(()=>{r.configure(e)},[e,r]),I.useEffect(()=>()=>{r.reset()},[r]),I.useDebugValue(e),r.getEventHandlers()}var e9=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function t9(t,e){var n=t.activeOpacity,r=t.delayPressIn,i=t.delayPressOut,s=t.delayLongPress,o=t.disabled,a=t.focusable,l=t.onLongPress,u=t.onPress,c=t.onPressIn,d=t.onPressOut,f=t.rejectResponderTermination,p=t.style,y=An(t,e9),S=I.useRef(null),T=Pd(e,S),v=I.useState("0s"),g=v[0],w=v[1],x=I.useState(null),O=x[0],D=x[1],b=I.useCallback((L,k)=>{D(L),w(k?k/1e3+"s":"0s")},[D,w]),E=I.useCallback(L=>{b(n??.2,L)},[n,b]),R=I.useCallback(L=>{b(null,L)},[b]),C=I.useMemo(()=>({cancelable:!f,disabled:o,delayLongPress:s,delayPressStart:r,delayPressEnd:i,onLongPress:l,onPress:u,onPressStart(L){var k=L.dispatchConfig!=null?L.dispatchConfig.registrationName==="onResponderGrant":L.type==="keydown";E(k?0:150),c!=null&&c(L)},onPressEnd(L){R(250),d!=null&&d(L)}}),[s,r,i,o,l,u,c,d,f,E,R]),P=Zz(S,C);return I.createElement(X,ln({},y,P,{accessibilityDisabled:o,focusable:!o&&a!==!1,pointerEvents:o?"box-none":void 0,ref:T,style:[xC.root,!o&&xC.actionable,p,O!=null&&{opacity:O},{transitionDuration:g}]}))}var xC=ke.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),Ce=I.memo(I.forwardRef(t9));Ce.displayName="TouchableOpacity";function n9(t){var e=t.children,n=I.useRef(null);if(xt&&!n.current){var r=document.createElement("div");r&&document.body&&(document.body.appendChild(r),n.current=r)}return I.useEffect(()=>{if(xt)return()=>{document.body&&n.current&&(document.body.removeChild(n.current),n.current=null)}},[]),n.current&&xt?E$.createPortal(e,n.current):null}var AC=300;function r9(t,e){return t==="slide"?e?s9:o9:t==="fade"?e?a9:l9:e?gn.container:gn.hidden}function i9(t){var e=t.animationType,n=t.children,r=t.onDismiss,i=t.onShow,s=t.visible,o=I.useState(!1),a=o[0],l=o[1],u=I.useRef(!1),c=I.useRef(!1),d=e&&e!=="none",f=I.useCallback(p=>{p&&p.currentTarget!==p.target||(s?i&&i():l(!1))},[i,s]);return I.useEffect(()=>{c.current&&!a&&r&&r(),c.current=a},[a,r]),I.useEffect(()=>{s&&l(!0),s!==u.current&&!d&&f(),u.current=s},[d,s,f]),a||s?Mu("div",{style:a?r9(e,s):gn.hidden,onAnimationEnd:f,children:n}):null}var gn=ke.create({container:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:9999},animatedIn:{animationDuration:AC+"ms",animationTimingFunction:"ease-in"},animatedOut:{pointerEvents:"none",animationDuration:AC+"ms",animationTimingFunction:"ease-out"},fadeIn:{opacity:1,animationKeyframes:{"0%":{opacity:0},"100%":{opacity:1}}},fadeOut:{opacity:0,animationKeyframes:{"0%":{opacity:1},"100%":{opacity:0}}},slideIn:{transform:"translateY(0%)",animationKeyframes:{"0%":{transform:"translateY(100%)"},"100%":{transform:"translateY(0%)"}}},slideOut:{transform:"translateY(100%)",animationKeyframes:{"0%":{transform:"translateY(0%)"},"100%":{transform:"translateY(100%)"}}},hidden:{opacity:0}}),s9=[gn.container,gn.animatedIn,gn.slideIn],o9=[gn.container,gn.animatedOut,gn.slideOut],a9=[gn.container,gn.animatedIn,gn.fadeIn],l9=[gn.container,gn.animatedOut,gn.fadeOut],u9=["active","children","onRequestClose","transparent"],c9=I.forwardRef((t,e)=>{var n=t.active,r=t.children,i=t.onRequestClose,s=t.transparent,o=An(t,u9);I.useEffect(()=>{if(xt){var l=u=>{n&&u.key==="Escape"&&(u.stopPropagation(),i&&i())};return document.addEventListener("keyup",l,!1),()=>document.removeEventListener("keyup",l,!1)}},[n,i]);var a=I.useMemo(()=>[Jf.modal,s?Jf.modalTransparent:Jf.modalOpaque],[s]);return I.createElement(X,ln({},o,{"aria-modal":!0,ref:e,role:n?"dialog":null,style:a}),I.createElement(X,{style:Jf.container},r))}),Jf=ke.create({modal:{position:"fixed",top:0,right:0,bottom:0,left:0},modalTransparent:{backgroundColor:"transparent"},modalOpaque:{backgroundColor:"white"},container:{top:0,flex:1}}),PC=()=>Mu("div",{role:"none",tabIndex:0,style:d9.focusBracket});function UO(t){if(!xt)return!1;try{t.focus()}catch{}return document.activeElement===t}function zO(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(UO(n)||zO(n))return!0}return!1}function WO(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(UO(n)||WO(n))return!0}return!1}var h9=t=>{var e=t.active,n=t.children,r=I.useRef(),i=I.useRef({trapFocusInProgress:!1,lastFocusedElement:null});return I.useEffect(()=>{if(xt){var s=()=>{if(!(r.current==null||i.current.trapFocusInProgress||!e)){try{if(i.current.trapFocusInProgress=!0,document.activeElement instanceof Node&&!r.current.contains(document.activeElement)){var o=zO(r.current);i.current.lastFocusedElement===document.activeElement&&(o=WO(r.current)),!o&&r.current!=null&&document.activeElement&&Vi.focus(r.current)}}finally{i.current.trapFocusInProgress=!1}i.current.lastFocusedElement=document.activeElement}};return s(),document.addEventListener("focus",s,!0),()=>document.removeEventListener("focus",s,!0)}},[e]),I.useEffect(function(){if(xt){var s=document.activeElement;return function(){s&&document.contains(s)&&Vi.focus(s)}}},[]),I.createElement(I.Fragment,null,I.createElement(PC,null),I.createElement(X,{ref:r},n),I.createElement(PC,null))},d9=ke.create({focusBracket:{outlineStyle:"none"}}),f9=["animationType","children","onDismiss","onRequestClose","onShow","transparent","visible"],p9=0,sa=[],Zl={};function HO(){if(sa.length!==0){var t=sa[sa.length-1];sa.forEach(e=>{e in Zl&&Zl[e](e===t)})}}function lS(t){t in Zl&&(Zl[t](!1),delete Zl[t]);var e=sa.indexOf(t);e!==-1&&(sa.splice(e,1),HO())}function m9(t,e){lS(t),sa.push(t),Zl[t]=e,HO()}var td=I.forwardRef((t,e)=>{var n=t.animationType,r=t.children,i=t.onDismiss,s=t.onRequestClose,o=t.onShow,a=t.transparent,l=t.visible,u=l===void 0?!0:l,c=An(t,f9),d=I.useMemo(()=>p9++,[]),f=I.useState(!1),p=f[0],y=f[1],S=I.useCallback(()=>{lS(d),i&&i()},[d,i]),T=I.useCallback(()=>{m9(d,y),o&&o()},[d,o]);return I.useEffect(()=>()=>lS(d),[d]),I.createElement(n9,null,I.createElement(i9,{animationType:n,onDismiss:S,onShow:T,visible:u},I.createElement(h9,{active:p},I.createElement(c9,ln({},c,{active:p,onRequestClose:s,ref:e,transparent:a}),r))))}),g9=(t,e)=>{var n=t.selectionEnd,r=t.selectionStart,i=e.start,s=e.end;return i!==r||s!==n},kC=(t,e)=>{if(g9(t,e)){var n=e.start,r=e.end;try{t.setSelectionRange(n,r||n)}catch{}}},y9=Object.assign({},DE,OE,ME,LE,NE,VE,FE,BE,{autoCapitalize:!0,autoComplete:!0,autoCorrect:!0,autoFocus:!0,defaultValue:!0,disabled:!0,lang:!0,maxLength:!0,onChange:!0,onScroll:!0,placeholder:!0,pointerEvents:!0,readOnly:!0,rows:!0,spellCheck:!0,value:!0,type:!0}),v9=t=>jE(t,y9);function _9(t){return t.isComposing||t.keyCode===229}var Jv=null,Wn=I.forwardRef((t,e)=>{var n=t.autoCapitalize,r=n===void 0?"sentences":n,i=t.autoComplete,s=t.autoCompleteType,o=t.autoCorrect,a=o===void 0?!0:o,l=t.blurOnSubmit,u=t.caretHidden,c=t.clearTextOnFocus,d=t.dir,f=t.editable,p=t.enterKeyHint,y=t.inputMode,S=t.keyboardType,T=t.multiline,v=T===void 0?!1:T,g=t.numberOfLines,w=t.onBlur,x=t.onChange,O=t.onChangeText,D=t.onContentSizeChange,b=t.onFocus,E=t.onKeyPress,R=t.onLayout,C=t.onMoveShouldSetResponder,P=t.onMoveShouldSetResponderCapture,L=t.onResponderEnd,k=t.onResponderGrant,ce=t.onResponderMove,fe=t.onResponderReject,je=t.onResponderRelease,Re=t.onResponderStart,$=t.onResponderTerminate,Y=t.onResponderTerminationRequest,re=t.onScrollShouldSetResponder,we=t.onScrollShouldSetResponderCapture,Ae=t.onSelectionChange,un=t.onSelectionChangeShouldSetResponder,at=t.onSelectionChangeShouldSetResponderCapture,jt=t.onStartShouldSetResponder,dt=t.onStartShouldSetResponderCapture,He=t.onSubmitEditing,kt=t.placeholderTextColor,Pn=t.readOnly,vi=Pn===void 0?!1:Pn,os=t.returnKeyType,gr=t.rows,jr=t.secureTextEntry,Xn=jr===void 0?!1:jr,bo=t.selection,as=t.selectTextOnFocus,Io=t.showSoftInputOnFocus,ls=t.spellCheck,De,et;if(y!=null)et=y,y==="email"?De="email":y==="tel"?De="tel":y==="search"?De="search":y==="url"?De="url":De="text";else if(S!=null)switch(S){case"email-address":De="email";break;case"number-pad":case"numeric":et="numeric";break;case"decimal-pad":et="decimal";break;case"phone-pad":De="tel";break;case"search":case"web-search":De="search";break;case"url":De="url";break;default:De="text"}Xn&&(De="password");var kn=I.useRef({height:null,width:null}),Qn=I.useRef(null),us=I.useRef(null),Ro=I.useRef(!1);I.useEffect(()=>{Qn.current&&us.current&&kC(Qn.current,us.current),Ro.current=Xn},[Xn]);var yr=I.useCallback(Z=>{if(v&&D&&Z!=null){var Xe=Z.scrollHeight,Dt=Z.scrollWidth;(Xe!==kn.current.height||Dt!==kn.current.width)&&(kn.current.height=Xe,kn.current.width=Dt,D({nativeEvent:{contentSize:{height:kn.current.height,width:kn.current.width}}}))}},[v,D]),Co=I.useMemo(()=>Z=>{Z!=null&&(Z.clear=function(){Z!=null&&(Z.value="")},Z.isFocused=function(){return Z!=null&&Di.currentlyFocusedField()===Z},yr(Z))},[yr]);function za(Z){Di._currentlyFocusedNode=null,w&&(Z.nativeEvent.text=Z.target.value,w(Z))}function cs(Z){var Xe=Z.target,Dt=Xe.value;Z.nativeEvent.text=Dt,yr(Xe),x&&x(Z),O&&O(Dt)}function Yu(Z){var Xe=Z.target;b&&(Z.nativeEvent.text=Xe.value,b(Z)),Xe!=null&&(Di._currentlyFocusedNode=Xe,c&&(Xe.value=""),as&&(Jv!=null&&clearTimeout(Jv),Jv=setTimeout(()=>{Xe!=null&&document.activeElement===Xe&&Xe.select()},0)))}function Wa(Z){var Xe=Z.target;Z.stopPropagation();var Dt=!v,vr=l??Dt,Ur=Z.nativeEvent,Xa=_9(Ur);E&&E(Z),Z.key==="Enter"&&!Z.shiftKey&&!Xa&&!Z.isDefaultPrevented()&&((l||!v)&&He&&(Z.preventDefault(),Ur.text=Z.target.value,He(Z)),vr&&Xe!=null&&setTimeout(()=>Xe.blur(),0))}function Ha(Z){try{var Xe=Z.target,Dt=Xe.selectionStart,vr=Xe.selectionEnd,Ur={start:Dt,end:vr};Ae&&(Z.nativeEvent.selection=Ur,Z.nativeEvent.text=Z.target.value,Ae(Z)),Ro.current===Xn&&(us.current=Ur)}catch{}}Zw(()=>{var Z=Qn.current;Z!=null&&bo!=null&&kC(Z,bo),document.activeElement===Z&&(Di._currentlyFocusedNode=Z)},[Qn,bo]);var xo=v?"textarea":"input";$E(Qn,R),WE(Qn,{onMoveShouldSetResponder:C,onMoveShouldSetResponderCapture:P,onResponderEnd:L,onResponderGrant:k,onResponderMove:ce,onResponderReject:fe,onResponderRelease:je,onResponderStart:Re,onResponderTerminate:$,onResponderTerminationRequest:Y,onScrollShouldSetResponder:re,onScrollShouldSetResponderCapture:we,onSelectionChangeShouldSetResponder:un,onSelectionChangeShouldSetResponderCapture:at,onStartShouldSetResponder:jt,onStartShouldSetResponderCapture:dt});var _i=kE(),hs=_i.direction,$e=v9(t);$e.autoCapitalize=r,$e.autoComplete=i||s||"on",$e.autoCorrect=a?"on":"off",$e.dir=d!==void 0?d:"auto",$e.enterKeyHint=p||os,$e.inputMode=et,$e.onBlur=za,$e.onChange=cs,$e.onFocus=Yu,$e.onKeyDown=Wa,$e.onSelect=Ha,$e.readOnly=vi===!0||f===!1,$e.rows=v?gr??g:1,$e.spellCheck=ls??a,$e.style=[{"--placeholderTextColor":kt},Zv.textinput$raw,Zv.placeholder,t.style,u&&Zv.caretHidden],$e.type=v?void 0:De,$e.virtualkeyboardpolicy=Io===!1?"manual":"auto";var Yn=UE($e),Ka=Pd(Qn,Yn,Co,e);$e.ref=Ka;var wi=t.lang!=null?ry(t.lang):null,qa=t.dir||wi,$r=qa||hs,Ga=Mu(xo,$e,{writingDirection:$r});return Ga});Wn.displayName="TextInput";Wn.State=Di;var Zv=ke.create({textinput$raw:{MozAppearance:"textfield",WebkitAppearance:"none",backgroundColor:"transparent",border:"0 solid black",borderRadius:0,boxSizing:"border-box",font:"14px System",margin:0,padding:0,resize:"none"},placeholder:{placeholderTextColor:"var(--placeholderTextColor)"},caretHidden:{caretColor:"transparent"}});/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DC="popstate";function w9(t={}){function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ja(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),uS("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:nd(s))}function r(i,s){pr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return E9(e,n,r,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S9(){return Math.random().toString(36).substring(2,10)}function OC(t,e){return{usr:t.state,key:t.key,idx:e}}function uS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ja(e):e,state:n,key:e&&e.key||r||S9()}}function nd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ja(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function E9(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let T=c(),v=T==null?null:T-u;u=T,l&&l({action:a,location:S.location,delta:v})}function f(T,v){a="PUSH";let g=uS(S.location,T,v);n&&n(g,T),u=c()+1;let w=OC(g,u),x=S.createHref(g);try{o.pushState(w,"",x)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(x)}s&&l&&l({action:a,location:S.location,delta:1})}function p(T,v){a="REPLACE";let g=uS(S.location,T,v);n&&n(g,T),u=c();let w=OC(g,u),x=S.createHref(g);o.replaceState(w,"",x),s&&l&&l({action:a,location:S.location,delta:0})}function y(T){return T9(T)}let S={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(DC,d),l=T,()=>{i.removeEventListener(DC,d),l=null}},createHref(T){return e(i,T)},createURL:y,encodeLocation(T){let v=y(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(T){return o.go(T)}};return S}function T9(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),st(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:nd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function KO(t,e,n="/"){return b9(t,e,n,!1)}function b9(t,e,n,r){let i=typeof e=="string"?ja(e):e,s=Wi(i.pathname||"/",n);if(s==null)return null;let o=qO(t);I9(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=N9(s);a=M9(o[l],u,r)}return a}function qO(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;st(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=Fi([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(st(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),qO(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:D9(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of GO(o.path))s(o,a,!0,u)}),e}function GO(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=GO(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function I9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:O9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var R9=/^:[\w-]+$/,C9=3,x9=2,A9=1,P9=10,k9=-2,MC=t=>t==="*";function D9(t,e){let n=t.split("/"),r=n.length;return n.some(MC)&&(r+=k9),e&&(r+=x9),n.filter(i=>!MC(i)).reduce((i,s)=>i+(R9.test(s)?C9:s===""?A9:P9),r)}function O9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function M9(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=Gm({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Gm({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Fi([s,d.pathname]),pathnameBase:$9(Fi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Fi([s,d.pathnameBase]))}return o}function Gm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=L9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let y=a[f]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function L9(t,e=!1,n=!0){pr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function N9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Wi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var V9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F9=t=>V9.test(t);function B9(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ja(t):t,s;if(n)if(F9(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),pr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=LC(n.substring(1),"/"):s=LC(n,e)}else s=e;return{pathname:s,search:U9(r),hash:z9(i)}}function LC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function e_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function XO(t){let e=j9(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function QO(t,e,n,r=!1){let i;typeof t=="string"?i=ja(t):(i={...t},st(!i.pathname||!i.pathname.includes("?"),e_("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),e_("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),e_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=B9(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Fi=t=>t.join("/").replace(/\/\/+/g,"/"),$9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,z9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function W9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function H9(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YO=["POST","PUT","PATCH","DELETE"];new Set(YO);var K9=["GET",...YO];new Set(K9);var Lu=I.createContext(null);Lu.displayName="DataRouter";var ay=I.createContext(null);ay.displayName="DataRouterState";I.createContext(!1);var JO=I.createContext({isTransitioning:!1});JO.displayName="ViewTransition";var q9=I.createContext(new Map);q9.displayName="Fetchers";var G9=I.createContext(null);G9.displayName="Await";var Br=I.createContext(null);Br.displayName="Navigation";var Dd=I.createContext(null);Dd.displayName="Location";var Zi=I.createContext({outlet:null,matches:[],isDataRoute:!1});Zi.displayName="Route";var HE=I.createContext(null);HE.displayName="RouteError";function X9(t,{relative:e}={}){st(Od(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(Br),{hash:i,pathname:s,search:o}=Md(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Fi([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Od(){return I.useContext(Dd)!=null}function yi(){return st(Od(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Dd).location}var ZO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eM(t){I.useContext(Br).static||I.useLayoutEffect(t)}function Nu(){let{isDataRoute:t}=I.useContext(Zi);return t?lW():Q9()}function Q9(){st(Od(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(Lu),{basename:e,navigator:n}=I.useContext(Br),{matches:r}=I.useContext(Zi),{pathname:i}=yi(),s=JSON.stringify(XO(r)),o=I.useRef(!1);return eM(()=>{o.current=!0}),I.useCallback((l,u={})=>{if(pr(o.current,ZO),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=QO(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Fi([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}I.createContext(null);function Md(t,{relative:e}={}){let{matches:n}=I.useContext(Zi),{pathname:r}=yi(),i=JSON.stringify(XO(n));return I.useMemo(()=>QO(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Y9(t,e){return tM(t,e)}function tM(t,e,n,r,i){var g;st(Od(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I.useContext(Br),{matches:o}=I.useContext(Zi),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";nM(u,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=yi(),p;if(e){let w=typeof e=="string"?ja(e):e;st(c==="/"||((g=w.pathname)==null?void 0:g.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),p=w}else p=f;let y=p.pathname||"/",S=y;if(c!=="/"){let w=c.replace(/^\//,"").split("/");S="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let T=KO(t,{pathname:S});pr(d||T!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),pr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=nW(T&&T.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Fi([c,s.encodeLocation?s.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Fi([c,s.encodeLocation?s.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,i);return e&&v?I.createElement(Dd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function J9(){let t=aW(),e=W9(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:s},"ErrorBoundary")," or"," ",I.createElement("code",{style:s},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,o)}var Z9=I.createElement(J9,null),eW=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?I.createElement(Zi.Provider,{value:this.props.routeContext},I.createElement(HE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tW({routeContext:t,match:e,children:n}){let r=I.useContext(Lu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Zi.Provider,{value:t},n)}function nW(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);st(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,y=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&r?(c,d)=>{var f,p;r(c,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:H9(n.matches),errorInfo:d})}:void 0;return s.reduceRight((c,d,f)=>{let p,y=!1,S=null,T=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,S=d.route.errorElement||Z9,a&&(l<0&&f===0?(nM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,T=null):l===f&&(y=!0,T=d.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,f+1)),g=()=>{let w;return p?w=S:y?w=T:d.route.Component?w=I.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,I.createElement(tW,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?I.createElement(eW,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):g()},null)}function KE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rW(t){let e=I.useContext(Lu);return st(e,KE(t)),e}function iW(t){let e=I.useContext(ay);return st(e,KE(t)),e}function sW(t){let e=I.useContext(Zi);return st(e,KE(t)),e}function qE(t){let e=sW(t),n=e.matches[e.matches.length-1];return st(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function oW(){return qE("useRouteId")}function aW(){var r;let t=I.useContext(HE),e=iW("useRouteError"),n=qE("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function lW(){let{router:t}=rW("useNavigate"),e=qE("useNavigate"),n=I.useRef(!1);return eM(()=>{n.current=!0}),I.useCallback(async(i,s={})=>{pr(n.current,ZO),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var NC={};function nM(t,e,n){!e&&!NC[t]&&(NC[t]=!0,pr(!1,n))}I.memo(uW);function uW({routes:t,future:e,state:n,unstable_onError:r}){return tM(t,void 0,n,r,e)}function yl(t){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cW({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){st(!Od(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=ja(n));let{pathname:u="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,y=I.useMemo(()=>{let S=Wi(u,a);return S==null?null:{location:{pathname:S,search:c,hash:d,state:f,key:p},navigationType:r}},[a,u,c,d,f,p,r]);return pr(y!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:I.createElement(Br.Provider,{value:l},I.createElement(Dd.Provider,{children:e,value:y}))}function hW({children:t,location:e}){return Y9(cS(t),e)}function cS(t,e=[]){let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,cS(r.props.children,s));return}st(r.type===yl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=cS(r.props.children,s)),n.push(o)}),n}var Vp="get",Fp="application/x-www-form-urlencoded";function ly(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function dW(t){return ly(t)&&t.tagName.toLowerCase()==="button"}function fW(t){return ly(t)&&t.tagName.toLowerCase()==="form"}function pW(t){return ly(t)&&t.tagName.toLowerCase()==="input"}function mW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gW(t,e){return t.button===0&&(!e||e==="_self")&&!mW(t)}var Zf=null;function yW(){if(Zf===null)try{new FormData(document.createElement("form"),0),Zf=!1}catch{Zf=!0}return Zf}var vW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t_(t){return t!=null&&!vW.has(t)?(pr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fp}"`),null):t}function _W(t,e){let n,r,i,s,o;if(fW(t)){let a=t.getAttribute("action");r=a?Wi(a,e):null,n=t.getAttribute("method")||Vp,i=t_(t.getAttribute("enctype"))||Fp,s=new FormData(t)}else if(dW(t)||pW(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Wi(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Vp,i=t_(t.getAttribute("formenctype"))||t_(a.getAttribute("enctype"))||Fp,s=new FormData(a,t),!yW()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(ly(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Vp,r=null,i=Fp,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function GE(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wW(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Wi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function SW(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EW(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function TW(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await SW(s,n);return o.links?o.links():[]}return[]}));return CW(r.flat(1).filter(EW).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function VC(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function bW(t,e,{includeHydrateFallback:n}={}){return IW(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function IW(t){return[...new Set(t)]}function RW(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function CW(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(RW(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function rM(){let t=I.useContext(Lu);return GE(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function xW(){let t=I.useContext(ay);return GE(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var XE=I.createContext(void 0);XE.displayName="FrameworkContext";function iM(){let t=I.useContext(XE);return GE(t,"You must render this element inside a <HydratedRouter> element"),t}function AW(t,e){let n=I.useContext(XE),[r,i]=I.useState(!1),[s,o]=I.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=I.useRef(null);I.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=v=>{v.forEach(g=>{o(g.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return f.current&&T.observe(f.current),()=>{T.disconnect()}}},[t]),I.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let p=()=>{i(!0)},y=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Cc(a,p),onBlur:Cc(l,y),onMouseEnter:Cc(u,p),onMouseLeave:Cc(c,y),onTouchStart:Cc(d,p)}]:[!1,f,{}]}function Cc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function PW({page:t,...e}){let{router:n}=rM(),r=I.useMemo(()=>KO(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?I.createElement(DW,{page:t,matches:r,...e}):null}function kW(t){let{manifest:e,routeModules:n}=iM(),[r,i]=I.useState([]);return I.useEffect(()=>{let s=!1;return TW(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function DW({page:t,matches:e,...n}){let r=yi(),{manifest:i,routeModules:s}=iM(),{basename:o}=rM(),{loaderData:a,matches:l}=xW(),u=I.useMemo(()=>VC(t,e,l,i,r,"data"),[t,e,l,i,r]),c=I.useMemo(()=>VC(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=I.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,S=!1;if(e.forEach(v=>{var w;let g=i.routes[v.route.id];!g||!g.hasLoader||(!u.some(x=>x.route.id===v.route.id)&&v.route.id in a&&((w=s[v.route.id])!=null&&w.shouldRevalidate)||g.hasClientLoader?S=!0:y.add(v.route.id))}),y.size===0)return[];let T=wW(t,o,"data");return S&&y.size>0&&T.searchParams.set("_routes",e.filter(v=>y.has(v.route.id)).map(v=>v.route.id).join(",")),[T.pathname+T.search]},[o,a,r,i,u,e,t,s]),f=I.useMemo(()=>bW(c,i),[c,i]),p=kW(c);return I.createElement(I.Fragment,null,d.map(y=>I.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),f.map(y=>I.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),p.map(({key:y,link:S})=>I.createElement("link",{key:y,nonce:n.nonce,...S})))}function OW(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var sM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sM&&(window.__reactRouterVersion="7.10.1")}catch{}function MW({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=I.useRef();i.current==null&&(i.current=w9({window:r,v5Compat:!0}));let s=i.current,[o,a]=I.useState({action:s.action,location:s.location}),l=I.useCallback(u=>{n===!1?a(u):I.startTransition(()=>a(u))},[n]);return I.useLayoutEffect(()=>s.listen(l),[s,l]),I.createElement(cW,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n===!0})}var oM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aM=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},p){let{basename:y,unstable_useTransitions:S}=I.useContext(Br),T=typeof u=="string"&&oM.test(u),v,g=!1;if(typeof u=="string"&&T&&(v=u,sM))try{let C=new URL(window.location.href),P=u.startsWith("//")?new URL(C.protocol+u):new URL(u),L=Wi(P.pathname,y);P.origin===C.origin&&L!=null?u=L+P.search+P.hash:g=!0}catch{pr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=X9(u,{relative:i}),[x,O,D]=AW(r,f),b=FW(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d,unstable_useTransitions:S});function E(C){e&&e(C),C.defaultPrevented||b(C)}let R=I.createElement("a",{...f,...D,href:v||w,onClick:g||s?e:E,ref:OW(p,O),target:l,"data-discover":!T&&n==="render"?"true":void 0});return x&&!T?I.createElement(I.Fragment,null,R,I.createElement(PW,{page:w})):R});aM.displayName="Link";var LW=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=Md(o,{relative:u.relative}),f=yi(),p=I.useContext(ay),{navigator:y,basename:S}=I.useContext(Br),T=p!=null&&zW(d)&&a===!0,v=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,g=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(g=g.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&S&&(w=Wi(w,S)||w);const x=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=g===v||!i&&g.startsWith(v)&&g.charAt(x)==="/",D=w!=null&&(w===v||!i&&w.startsWith(v)&&w.charAt(v.length)==="/"),b={isActive:O,isPending:D,isTransitioning:T},E=O?e:void 0,R;typeof r=="function"?R=r(b):R=[r,O?"active":null,D?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(b):s;return I.createElement(aM,{...u,"aria-current":E,className:R,ref:c,style:C,to:o,viewTransition:a},typeof l=="function"?l(b):l)});LW.displayName="NavLink";var NW=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Vp,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},p)=>{let{unstable_useTransitions:y}=I.useContext(Br),S=$W(),T=UW(a,{relative:u}),v=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&oM.test(a),w=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let O=x.nativeEvent.submitter,D=(O==null?void 0:O.getAttribute("formmethod"))||o,b=()=>S(O||x.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d});y&&n!==!1?I.startTransition(()=>b()):b()};return I.createElement("form",{ref:p,method:v,action:T,onSubmit:r?l:w,...f,"data-discover":!g&&t==="render"?"true":void 0})});NW.displayName="Form";function VW(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lM(t){let e=I.useContext(Lu);return st(e,VW(t)),e}function FW(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_useTransitions:a}={}){let l=Nu(),u=yi(),c=Md(t,{relative:s});return I.useCallback(d=>{if(gW(d,e)){d.preventDefault();let f=n!==void 0?n:nd(u)===nd(c),p=()=>l(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o});a?I.startTransition(()=>p()):p()}},[u,l,c,n,r,e,t,i,s,o,a])}var BW=0,jW=()=>`__${String(++BW)}__`;function $W(){let{router:t}=lM("useSubmit"),{basename:e}=I.useContext(Br),n=oW(),r=t.fetch,i=t.navigate;return I.useCallback(async(s,o={})=>{let{action:a,method:l,encType:u,formData:c,body:d}=_W(s,e);if(o.navigate===!1){let f=o.fetcherKey||jW();await r(f,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function UW(t,{relative:e}={}){let{basename:n}=I.useContext(Br),r=I.useContext(Zi);st(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Md(t||".",{relative:e})},o=yi();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Fi([n,s.pathname])),nd(s)}function zW(t,{relative:e}={}){let n=I.useContext(JO);st(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lM("useViewTransitionState"),i=Md(t,{relative:e});if(!n.isTransitioning)return!1;let s=Wi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Wi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gm(i.pathname,o)!=null||Gm(i.pathname,s)!=null}const WW=()=>{};var FC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HW=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},cM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[c],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HW(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new KW;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const y=u<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qW=function(t){const e=uM(t);return cM.encodeByteArray(e,!0)},Xm=function(t){return qW(t).replace(/\./g,"")},hM=function(t){try{return cM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=()=>dM().__FIREBASE_DEFAULTS__,XW=()=>{if(typeof process>"u"||typeof FC>"u")return;const t=FC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QW=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hM(t[1]);return e&&JSON.parse(e)},uy=()=>{try{return WW()||GW()||XW()||QW()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fM=t=>{var e,n;return(n=(e=uy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},YW=t=>{const e=fM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pM=()=>{var t;return(t=uy())==null?void 0:t.config},mM=t=>{var e;return(e=uy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gM(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZW(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xm(JSON.stringify(n)),Xm(JSON.stringify(o)),""].join(".")}const yh={};function e8(){const t={prod:[],emulator:[]};for(const e of Object.keys(yh))yh[e]?t.emulator.push(e):t.prod.push(e);return t}function t8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let BC=!1;function yM(t,e){if(typeof window>"u"||typeof document>"u"||!Vu(window.location.host)||yh[t]===e||yh[t]||BC)return;yh[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=e8().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{BC=!0,o()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=t8(r),p=n("text"),y=document.getElementById(p)||document.createElement("span"),S=n("learnmore"),T=document.getElementById(S)||document.createElement("a"),v=n("preprendIcon"),g=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),c(T,S);const x=u();l(g,v),w.append(g,y,T,x),document.body.appendChild(w)}s?(y.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function vM(){var e;const t=(e=uy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function s8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o8(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _M(){return!vM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wM(){return!vM()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function SM(){try{return typeof indexedDB=="object"}catch{return!1}}function a8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8="FirebaseError";class es extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=l8,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ld.prototype.create)}}class Ld{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?u8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new es(i,a,r)}}function u8(t,e){return t.replace(c8,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const c8=/\{\$([^}]+)}/g;function h8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(jC(s)&&jC(o)){if(!ba(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $c(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Uc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function d8(t,e){const n=new f8(t,e);return n.subscribe.bind(n)}class f8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");p8(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=n_),i.error===void 0&&(i.error=n_),i.complete===void 0&&(i.complete=n_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function n_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class Ia{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JW;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y8(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g8(t){return t===Wo?void 0:t}function y8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const _8={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},w8=Ee.INFO,S8={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},E8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=S8[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class QE{constructor(e){this.name=e,this._logLevel=w8,this._logHandler=E8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const T8=(t,e)=>e.some(n=>t instanceof n);let $C,UC;function b8(){return $C||($C=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I8(){return UC||(UC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EM=new WeakMap,hS=new WeakMap,TM=new WeakMap,r_=new WeakMap,YE=new WeakMap;function R8(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(to(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&EM.set(n,t)}).catch(()=>{}),YE.set(e,t),e}function C8(t){if(hS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hS.set(t,e)}let dS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return to(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x8(t){dS=t(dS)}function A8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(i_(this),e,...n);return TM.set(r,e.sort?e.sort():[e]),to(r)}:I8().includes(t)?function(...e){return t.apply(i_(this),e),to(EM.get(this))}:function(...e){return to(t.apply(i_(this),e))}}function P8(t){return typeof t=="function"?A8(t):(t instanceof IDBTransaction&&C8(t),T8(t,b8())?new Proxy(t,dS):t)}function to(t){if(t instanceof IDBRequest)return R8(t);if(r_.has(t))return r_.get(t);const e=P8(t);return e!==t&&(r_.set(t,e),YE.set(e,t)),e}const i_=t=>YE.get(t);function k8(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=to(o);return r&&o.addEventListener("upgradeneeded",l=>{r(to(o.result),l.oldVersion,l.newVersion,to(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const D8=["get","getKey","getAll","getAllKeys","count"],O8=["put","add","delete","clear"],s_=new Map;function zC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(s_.get(e))return s_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=O8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||D8.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return s_.set(e,s),s}x8(t=>({...t,get:(e,n,r)=>zC(e,n)||t.get(e,n,r),has:(e,n)=>!!zC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(L8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function L8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fS="@firebase/app",WC="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new QE("@firebase/app"),N8="@firebase/app-compat",V8="@firebase/analytics-compat",F8="@firebase/analytics",B8="@firebase/app-check-compat",j8="@firebase/app-check",$8="@firebase/auth",U8="@firebase/auth-compat",z8="@firebase/database",W8="@firebase/data-connect",H8="@firebase/database-compat",K8="@firebase/functions",q8="@firebase/functions-compat",G8="@firebase/installations",X8="@firebase/installations-compat",Q8="@firebase/messaging",Y8="@firebase/messaging-compat",J8="@firebase/performance",Z8="@firebase/performance-compat",eH="@firebase/remote-config",tH="@firebase/remote-config-compat",nH="@firebase/storage",rH="@firebase/storage-compat",iH="@firebase/firestore",sH="@firebase/ai",oH="@firebase/firestore-compat",aH="firebase",lH="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="[DEFAULT]",uH={[fS]:"fire-core",[N8]:"fire-core-compat",[F8]:"fire-analytics",[V8]:"fire-analytics-compat",[j8]:"fire-app-check",[B8]:"fire-app-check-compat",[$8]:"fire-auth",[U8]:"fire-auth-compat",[z8]:"fire-rtdb",[W8]:"fire-data-connect",[H8]:"fire-rtdb-compat",[K8]:"fire-fn",[q8]:"fire-fn-compat",[G8]:"fire-iid",[X8]:"fire-iid-compat",[Q8]:"fire-fcm",[Y8]:"fire-fcm-compat",[J8]:"fire-perf",[Z8]:"fire-perf-compat",[eH]:"fire-rc",[tH]:"fire-rc-compat",[nH]:"fire-gcs",[rH]:"fire-gcs-compat",[iH]:"fire-fst",[oH]:"fire-fst-compat",[sH]:"fire-vertex","fire-js":"fire-js",[aH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=new Map,cH=new Map,mS=new Map;function HC(t,e){try{t.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pu(t){const e=t.name;if(mS.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;mS.set(e,t);for(const n of Qm.values())HC(n,t);for(const n of cH.values())HC(n,t);return!0}function JE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new Ld("app","Firebase",hH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=lH;function bM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:pS,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw no.create("bad-app-name",{appName:String(i)});if(n||(n=pM()),!n)throw no.create("no-options");const s=Qm.get(i);if(s){if(ba(n,s.options)&&ba(r,s.config))return s;throw no.create("duplicate-app",{appName:i})}const o=new v8(i);for(const l of mS.values())o.addComponent(l);const a=new dH(n,r,o);return Qm.set(i,a),a}function IM(t=pS){const e=Qm.get(t);if(!e&&t===pS&&pM())return bM();if(!e)throw no.create("no-app",{appName:t});return e}function ro(t,e,n){let r=uH[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(o.join(" "));return}pu(new Ia(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH="firebase-heartbeat-database",pH=1,rd="firebase-heartbeat-store";let o_=null;function RM(){return o_||(o_=k8(fH,pH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rd)}catch(n){console.warn(n)}}}}).catch(t=>{throw no.create("idb-open",{originalErrorMessage:t.message})})),o_}async function mH(t){try{const n=(await RM()).transaction(rd),r=await n.objectStore(rd).get(CM(t));return await n.done,r}catch(e){if(e instanceof es)Hi.warn(e.message);else{const n=no.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(n.message)}}}async function KC(t,e){try{const r=(await RM()).transaction(rd,"readwrite");await r.objectStore(rd).put(e,CM(t)),await r.done}catch(n){if(n instanceof es)Hi.warn(n.message);else{const r=no.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(r.message)}}}function CM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=1024,yH=30;class vH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qC();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>yH){const o=SH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qC(),{heartbeatsToSend:r,unsentEntries:i}=_H(this._heartbeatsCache.heartbeats),s=Xm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hi.warn(n),""}}}function qC(){return new Date().toISOString().substring(0,10)}function _H(t,e=gH){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),GC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SM()?a8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mH(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return KC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return KC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function GC(t){return Xm(JSON.stringify({version:2,heartbeats:t})).length}function SH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EH(t){pu(new Ia("platform-logger",e=>new M8(e),"PRIVATE")),pu(new Ia("heartbeat",e=>new vH(e),"PRIVATE")),ro(fS,WC,t),ro(fS,WC,"esm2020"),ro("fire-js","")}EH("");var TH="firebase",bH="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ro(TH,bH,"app");var XC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,xM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,E){function R(){}R.prototype=E.prototype,b.F=E.prototype,b.prototype=new R,b.prototype.constructor=b,b.D=function(C,P,L){for(var k=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)k[ce-2]=arguments[ce];return E.prototype[P].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,E,R){R||(R=0);const C=Array(16);if(typeof E=="string")for(var P=0;P<16;++P)C[P]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(P=0;P<16;++P)C[P]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=b.g[0],R=b.g[1],P=b.g[2];let L=b.g[3],k;k=E+(L^R&(P^L))+C[0]+3614090360&4294967295,E=R+(k<<7&4294967295|k>>>25),k=L+(P^E&(R^P))+C[1]+3905402710&4294967295,L=E+(k<<12&4294967295|k>>>20),k=P+(R^L&(E^R))+C[2]+606105819&4294967295,P=L+(k<<17&4294967295|k>>>15),k=R+(E^P&(L^E))+C[3]+3250441966&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(L^R&(P^L))+C[4]+4118548399&4294967295,E=R+(k<<7&4294967295|k>>>25),k=L+(P^E&(R^P))+C[5]+1200080426&4294967295,L=E+(k<<12&4294967295|k>>>20),k=P+(R^L&(E^R))+C[6]+2821735955&4294967295,P=L+(k<<17&4294967295|k>>>15),k=R+(E^P&(L^E))+C[7]+4249261313&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(L^R&(P^L))+C[8]+1770035416&4294967295,E=R+(k<<7&4294967295|k>>>25),k=L+(P^E&(R^P))+C[9]+2336552879&4294967295,L=E+(k<<12&4294967295|k>>>20),k=P+(R^L&(E^R))+C[10]+4294925233&4294967295,P=L+(k<<17&4294967295|k>>>15),k=R+(E^P&(L^E))+C[11]+2304563134&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(L^R&(P^L))+C[12]+1804603682&4294967295,E=R+(k<<7&4294967295|k>>>25),k=L+(P^E&(R^P))+C[13]+4254626195&4294967295,L=E+(k<<12&4294967295|k>>>20),k=P+(R^L&(E^R))+C[14]+2792965006&4294967295,P=L+(k<<17&4294967295|k>>>15),k=R+(E^P&(L^E))+C[15]+1236535329&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(P^L&(R^P))+C[1]+4129170786&4294967295,E=R+(k<<5&4294967295|k>>>27),k=L+(R^P&(E^R))+C[6]+3225465664&4294967295,L=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(L^E))+C[11]+643717713&4294967295,P=L+(k<<14&4294967295|k>>>18),k=R+(L^E&(P^L))+C[0]+3921069994&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(P^L&(R^P))+C[5]+3593408605&4294967295,E=R+(k<<5&4294967295|k>>>27),k=L+(R^P&(E^R))+C[10]+38016083&4294967295,L=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(L^E))+C[15]+3634488961&4294967295,P=L+(k<<14&4294967295|k>>>18),k=R+(L^E&(P^L))+C[4]+3889429448&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(P^L&(R^P))+C[9]+568446438&4294967295,E=R+(k<<5&4294967295|k>>>27),k=L+(R^P&(E^R))+C[14]+3275163606&4294967295,L=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(L^E))+C[3]+4107603335&4294967295,P=L+(k<<14&4294967295|k>>>18),k=R+(L^E&(P^L))+C[8]+1163531501&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(P^L&(R^P))+C[13]+2850285829&4294967295,E=R+(k<<5&4294967295|k>>>27),k=L+(R^P&(E^R))+C[2]+4243563512&4294967295,L=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(L^E))+C[7]+1735328473&4294967295,P=L+(k<<14&4294967295|k>>>18),k=R+(L^E&(P^L))+C[12]+2368359562&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(R^P^L)+C[5]+4294588738&4294967295,E=R+(k<<4&4294967295|k>>>28),k=L+(E^R^P)+C[8]+2272392833&4294967295,L=E+(k<<11&4294967295|k>>>21),k=P+(L^E^R)+C[11]+1839030562&4294967295,P=L+(k<<16&4294967295|k>>>16),k=R+(P^L^E)+C[14]+4259657740&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(R^P^L)+C[1]+2763975236&4294967295,E=R+(k<<4&4294967295|k>>>28),k=L+(E^R^P)+C[4]+1272893353&4294967295,L=E+(k<<11&4294967295|k>>>21),k=P+(L^E^R)+C[7]+4139469664&4294967295,P=L+(k<<16&4294967295|k>>>16),k=R+(P^L^E)+C[10]+3200236656&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(R^P^L)+C[13]+681279174&4294967295,E=R+(k<<4&4294967295|k>>>28),k=L+(E^R^P)+C[0]+3936430074&4294967295,L=E+(k<<11&4294967295|k>>>21),k=P+(L^E^R)+C[3]+3572445317&4294967295,P=L+(k<<16&4294967295|k>>>16),k=R+(P^L^E)+C[6]+76029189&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(R^P^L)+C[9]+3654602809&4294967295,E=R+(k<<4&4294967295|k>>>28),k=L+(E^R^P)+C[12]+3873151461&4294967295,L=E+(k<<11&4294967295|k>>>21),k=P+(L^E^R)+C[15]+530742520&4294967295,P=L+(k<<16&4294967295|k>>>16),k=R+(P^L^E)+C[2]+3299628645&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(P^(R|~L))+C[0]+4096336452&4294967295,E=R+(k<<6&4294967295|k>>>26),k=L+(R^(E|~P))+C[7]+1126891415&4294967295,L=E+(k<<10&4294967295|k>>>22),k=P+(E^(L|~R))+C[14]+2878612391&4294967295,P=L+(k<<15&4294967295|k>>>17),k=R+(L^(P|~E))+C[5]+4237533241&4294967295,R=P+(k<<21&4294967295|k>>>11),k=E+(P^(R|~L))+C[12]+1700485571&4294967295,E=R+(k<<6&4294967295|k>>>26),k=L+(R^(E|~P))+C[3]+2399980690&4294967295,L=E+(k<<10&4294967295|k>>>22),k=P+(E^(L|~R))+C[10]+4293915773&4294967295,P=L+(k<<15&4294967295|k>>>17),k=R+(L^(P|~E))+C[1]+2240044497&4294967295,R=P+(k<<21&4294967295|k>>>11),k=E+(P^(R|~L))+C[8]+1873313359&4294967295,E=R+(k<<6&4294967295|k>>>26),k=L+(R^(E|~P))+C[15]+4264355552&4294967295,L=E+(k<<10&4294967295|k>>>22),k=P+(E^(L|~R))+C[6]+2734768916&4294967295,P=L+(k<<15&4294967295|k>>>17),k=R+(L^(P|~E))+C[13]+1309151649&4294967295,R=P+(k<<21&4294967295|k>>>11),k=E+(P^(R|~L))+C[4]+4149444226&4294967295,E=R+(k<<6&4294967295|k>>>26),k=L+(R^(E|~P))+C[11]+3174756917&4294967295,L=E+(k<<10&4294967295|k>>>22),k=P+(E^(L|~R))+C[2]+718787259&4294967295,P=L+(k<<15&4294967295|k>>>17),k=R+(L^(P|~E))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+E&4294967295,b.g[1]=b.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+L&4294967295}r.prototype.v=function(b,E){E===void 0&&(E=b.length);const R=E-this.blockSize,C=this.C;let P=this.h,L=0;for(;L<E;){if(P==0)for(;L<=R;)i(this,b,L),L+=this.blockSize;if(typeof b=="string"){for(;L<E;)if(C[P++]=b.charCodeAt(L++),P==this.blockSize){i(this,C),P=0;break}}else for(;L<E;)if(C[P++]=b[L++],P==this.blockSize){i(this,C),P=0;break}}this.h=P,this.o+=E},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var E=1;E<b.length-8;++E)b[E]=0;E=this.o*8;for(var R=b.length-8;R<b.length;++R)b[R]=E&255,E/=256;for(this.v(b),b=Array(16),E=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)b[E++]=this.g[R]>>>C&255;return b};function s(b,E){var R=a;return Object.prototype.hasOwnProperty.call(R,b)?R[b]:R[b]=E(b)}function o(b,E){this.h=E;const R=[];let C=!0;for(let P=b.length-1;P>=0;P--){const L=b[P]|0;C&&L==E||(R[P]=L,C=!1)}this.g=R}var a={};function l(b){return-128<=b&&b<128?s(b,function(E){return new o([E|0],E<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return T(u(-b));const E=[];let R=1;for(let C=0;b>=R;C++)E[C]=b/R|0,R*=4294967296;return new o(E,0)}function c(b,E){if(b.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b.charAt(0)=="-")return T(c(b.substring(1),E));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(E,8));let C=d;for(let L=0;L<b.length;L+=8){var P=Math.min(8,b.length-L);const k=parseInt(b.substring(L,L+P),E);P<8?(P=u(Math.pow(E,P)),C=C.j(P).add(u(k))):(C=C.j(R),C=C.add(u(k)))}return C}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-T(this).m();let b=0,E=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);b+=(C>=0?C:4294967296+C)*E,E*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(y(this))return"0";if(S(this))return"-"+T(this).toString(b);const E=u(Math.pow(b,6));var R=this;let C="";for(;;){const P=x(R,E).g;R=v(R,P.j(E));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(b);if(R=P,y(R))return L+C;for(;L.length<6;)L="0"+L;C=L+C}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function y(b){if(b.h!=0)return!1;for(let E=0;E<b.g.length;E++)if(b.g[E]!=0)return!1;return!0}function S(b){return b.h==-1}t.l=function(b){return b=v(this,b),S(b)?-1:y(b)?0:1};function T(b){const E=b.g.length,R=[];for(let C=0;C<E;C++)R[C]=~b.g[C];return new o(R,~b.h).add(f)}t.abs=function(){return S(this)?T(this):this},t.add=function(b){const E=Math.max(this.g.length,b.g.length),R=[];let C=0;for(let P=0;P<=E;P++){let L=C+(this.i(P)&65535)+(b.i(P)&65535),k=(L>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);C=k>>>16,L&=65535,k&=65535,R[P]=k<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function v(b,E){return b.add(T(E))}t.j=function(b){if(y(this)||y(b))return d;if(S(this))return S(b)?T(this).j(T(b)):T(T(this).j(b));if(S(b))return T(this.j(T(b)));if(this.l(p)<0&&b.l(p)<0)return u(this.m()*b.m());const E=this.g.length+b.g.length,R=[];for(var C=0;C<2*E;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let P=0;P<b.g.length;P++){const L=this.i(C)>>>16,k=this.i(C)&65535,ce=b.i(P)>>>16,fe=b.i(P)&65535;R[2*C+2*P]+=k*fe,g(R,2*C+2*P),R[2*C+2*P+1]+=L*fe,g(R,2*C+2*P+1),R[2*C+2*P+1]+=k*ce,g(R,2*C+2*P+1),R[2*C+2*P+2]+=L*ce,g(R,2*C+2*P+2)}for(b=0;b<E;b++)R[b]=R[2*b+1]<<16|R[2*b];for(b=E;b<2*E;b++)R[b]=0;return new o(R,0)};function g(b,E){for(;(b[E]&65535)!=b[E];)b[E+1]+=b[E]>>>16,b[E]&=65535,E++}function w(b,E){this.g=b,this.h=E}function x(b,E){if(y(E))throw Error("division by zero");if(y(b))return new w(d,d);if(S(b))return E=x(T(b),E),new w(T(E.g),T(E.h));if(S(E))return E=x(b,T(E)),new w(T(E.g),E.h);if(b.g.length>30){if(S(b)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=E;C.l(b)<=0;)R=O(R),C=O(C);var P=D(R,1),L=D(C,1);for(C=D(C,2),R=D(R,2);!y(C);){var k=L.add(C);k.l(b)<=0&&(P=P.add(R),L=k),C=D(C,1),R=D(R,1)}return E=v(b,P.j(E)),new w(P,E)}for(P=d;b.l(E)>=0;){for(R=Math.max(1,Math.floor(b.m()/E.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),L=u(R),k=L.j(E);S(k)||k.l(b)>0;)R-=C,L=u(R),k=L.j(E);y(L)&&(L=f),P=P.add(L),b=v(b,k)}return new w(P,b)}t.B=function(b){return x(this,b).h},t.and=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let C=0;C<E;C++)R[C]=this.i(C)&b.i(C);return new o(R,this.h&b.h)},t.or=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let C=0;C<E;C++)R[C]=this.i(C)|b.i(C);return new o(R,this.h|b.h)},t.xor=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let C=0;C<E;C++)R[C]=this.i(C)^b.i(C);return new o(R,this.h^b.h)};function O(b){const E=b.g.length+1,R=[];for(let C=0;C<E;C++)R[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(R,b.h)}function D(b,E){const R=E>>5;E%=32;const C=b.g.length-R,P=[];for(let L=0;L<C;L++)P[L]=E>0?b.i(L+R)>>>E|b.i(L+R+1)<<32-E:b.i(L+R);return new o(P,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xM=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,io=o}).apply(typeof XC<"u"?XC:typeof self<"u"?self:typeof window<"u"?window:{});var ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AM,zc,PM,Bp,gS,kM,DM,OM;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ep=="object"&&ep];for(var m=0;m<h.length;++m){var _=h[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(h,m){if(m)e:{var _=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var V=h[A];if(!(V in _))break e;_=_[V]}h=h[h.length-1],A=_[h],m=m(A),m!=A&&m!=null&&e(_,h,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(m){var _=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&_.push([A,m[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(h){var m=typeof h;return m=="object"&&h!=null||m=="function"}function l(h,m,_){return h.call.apply(h.bind,arguments)}function u(h,m,_){return u=l,u.apply(null,arguments)}function c(h,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function d(h,m){function _(){}_.prototype=m.prototype,h.Z=m.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(A,V,B){for(var K=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)K[pe-2]=arguments[pe];return m.prototype[V].apply(A,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function p(h){const m=h.length;if(m>0){const _=Array(m);for(let A=0;A<m;A++)_[A]=h[A];return _}return[]}function y(h,m){for(let A=1;A<arguments.length;A++){const V=arguments[A];var _=typeof V;if(_=_!="object"?_:V?Array.isArray(V)?"array":_:"null",_=="array"||_=="object"&&typeof V.length=="number"){_=h.length||0;const B=V.length||0;h.length=_+B;for(let K=0;K<B;K++)h[_+K]=V[K]}else h.push(V)}}class S{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function T(h){o.setTimeout(()=>{throw h},0)}function v(){var h=b;let m=null;return h.g&&(m=h.g,h.g=h.g.next,h.g||(h.h=null),m.next=null),m}class g{constructor(){this.h=this.g=null}add(m,_){const A=w.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var w=new S(()=>new x,h=>h.reset());class x{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let O,D=!1,b=new g,E=()=>{const h=Promise.resolve(void 0);O=()=>{h.then(R)}};function R(){for(var h;h=v();){try{h.h.call(h.g)}catch(_){T(_)}var m=w;m.j(h),m.h<100&&(m.h++,h.next=m.g,m.g=h)}D=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,m){this.type=h,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,m=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};o.addEventListener("test",_,m),o.removeEventListener("test",_,m)}catch{}return h}();function k(h){return/^[\s\xa0]*$/.test(h)}function ce(h,m){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,m)}d(ce,P),ce.prototype.init=function(h,m){const _=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=m,m=h.relatedTarget,m||(_=="mouseover"?m=h.fromElement:_=="mouseout"&&(m=h.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),je=0;function Re(h,m,_,A,V){this.listener=h,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=V,this.key=++je,this.da=this.fa=!1}function $(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Y(h,m,_){for(const A in h)m.call(_,h[A],A,h)}function re(h,m){for(const _ in h)m.call(void 0,h[_],_,h)}function we(h){const m={};for(const _ in h)m[_]=h[_];return m}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function un(h,m){let _,A;for(let V=1;V<arguments.length;V++){A=arguments[V];for(_ in A)h[_]=A[_];for(let B=0;B<Ae.length;B++)_=Ae[B],Object.prototype.hasOwnProperty.call(A,_)&&(h[_]=A[_])}}function at(h){this.src=h,this.g={},this.h=0}at.prototype.add=function(h,m,_,A,V){const B=h.toString();h=this.g[B],h||(h=this.g[B]=[],this.h++);const K=dt(h,m,A,V);return K>-1?(m=h[K],_||(m.fa=!1)):(m=new Re(m,this.src,B,!!A,V),m.fa=_,h.push(m)),m};function jt(h,m){const _=m.type;if(_ in h.g){var A=h.g[_],V=Array.prototype.indexOf.call(A,m,void 0),B;(B=V>=0)&&Array.prototype.splice.call(A,V,1),B&&($(m),h.g[_].length==0&&(delete h.g[_],h.h--))}}function dt(h,m,_,A){for(let V=0;V<h.length;++V){const B=h[V];if(!B.da&&B.listener==m&&B.capture==!!_&&B.ha==A)return V}return-1}var He="closure_lm_"+(Math.random()*1e6|0),kt={};function Pn(h,m,_,A,V){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Pn(h,m[B],_,A,V);return null}return _=ls(_),h&&h[fe]?h.J(m,_,a(A)?!!A.capture:!1,V):vi(h,m,_,!1,A,V)}function vi(h,m,_,A,V,B){if(!m)throw Error("Invalid event type");const K=a(V)?!!V.capture:!!V;let pe=as(h);if(pe||(h[He]=pe=new at(h)),_=pe.add(m,_,A,K,B),_.proxy)return _;if(A=os(),_.proxy=A,A.src=h,A.listener=_,h.addEventListener)L||(V=K),V===void 0&&(V=!1),h.addEventListener(m.toString(),A,V);else if(h.attachEvent)h.attachEvent(Xn(m.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function os(){function h(_){return m.call(h.src,h.listener,_)}const m=bo;return h}function gr(h,m,_,A,V){if(Array.isArray(m))for(var B=0;B<m.length;B++)gr(h,m[B],_,A,V);else A=a(A)?!!A.capture:!!A,_=ls(_),h&&h[fe]?(h=h.i,B=String(m).toString(),B in h.g&&(m=h.g[B],_=dt(m,_,A,V),_>-1&&($(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete h.g[B],h.h--)))):h&&(h=as(h))&&(m=h.g[m.toString()],h=-1,m&&(h=dt(m,_,A,V)),(_=h>-1?m[h]:null)&&jr(_))}function jr(h){if(typeof h!="number"&&h&&!h.da){var m=h.src;if(m&&m[fe])jt(m.i,h);else{var _=h.type,A=h.proxy;m.removeEventListener?m.removeEventListener(_,A,h.capture):m.detachEvent?m.detachEvent(Xn(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=as(m))?(jt(_,h),_.h==0&&(_.src=null,m[He]=null)):$(h)}}}function Xn(h){return h in kt?kt[h]:kt[h]="on"+h}function bo(h,m){if(h.da)h=!0;else{m=new ce(m,this);const _=h.listener,A=h.ha||h.src;h.fa&&jr(h),h=_.call(A,m)}return h}function as(h){return h=h[He],h instanceof at?h:null}var Io="__closure_events_fn_"+(Math.random()*1e9>>>0);function ls(h){return typeof h=="function"?h:(h[Io]||(h[Io]=function(m){return h.handleEvent(m)}),h[Io])}function De(){C.call(this),this.i=new at(this),this.M=this,this.G=null}d(De,C),De.prototype[fe]=!0,De.prototype.removeEventListener=function(h,m,_,A){gr(this,h,m,_,A)};function et(h,m){var _,A=h.G;if(A)for(_=[];A;A=A.G)_.push(A);if(h=h.M,A=m.type||m,typeof m=="string")m=new P(m,h);else if(m instanceof P)m.target=m.target||h;else{var V=m;m=new P(A,h),un(m,V)}V=!0;let B,K;if(_)for(K=_.length-1;K>=0;K--)B=m.g=_[K],V=kn(B,A,!0,m)&&V;if(B=m.g=h,V=kn(B,A,!0,m)&&V,V=kn(B,A,!1,m)&&V,_)for(K=0;K<_.length;K++)B=m.g=_[K],V=kn(B,A,!1,m)&&V}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var h=this.i;for(const m in h.g){const _=h.g[m];for(let A=0;A<_.length;A++)$(_[A]);delete h.g[m],h.h--}}this.G=null},De.prototype.J=function(h,m,_,A){return this.i.add(String(h),m,!1,_,A)},De.prototype.K=function(h,m,_,A){return this.i.add(String(h),m,!0,_,A)};function kn(h,m,_,A){if(m=h.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let B=0;B<m.length;++B){const K=m[B];if(K&&!K.da&&K.capture==_){const pe=K.listener,Et=K.ha||K.src;K.fa&&jt(h.i,K),V=pe.call(Et,A)!==!1&&V}}return V&&!A.defaultPrevented}function Qn(h,m){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(h,m||0)}function us(h){h.g=Qn(()=>{h.g=null,h.i&&(h.i=!1,us(h))},h.l);const m=h.h;h.h=null,h.m.apply(null,m)}class Ro extends C{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:us(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(h){C.call(this),this.h=h,this.g={}}d(yr,C);var Co=[];function za(h){Y(h.g,function(m,_){this.g.hasOwnProperty(_)&&jr(m)},h),h.g={}}yr.prototype.N=function(){yr.Z.N.call(this),za(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=o.JSON.stringify,Yu=o.JSON.parse,Wa=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Ha(){}function xo(){}var _i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hs(){P.call(this,"d")}d(hs,P);function $e(){P.call(this,"c")}d($e,P);var Yn={},Ka=null;function wi(){return Ka=Ka||new De}Yn.Ia="serverreachability";function qa(h){P.call(this,Yn.Ia,h)}d(qa,P);function $r(h){const m=wi();et(m,new qa(m))}Yn.STAT_EVENT="statevent";function Ga(h,m){P.call(this,Yn.STAT_EVENT,h),this.stat=m}d(Ga,P);function Z(h){const m=wi();et(m,new Ga(m,h))}Yn.Ja="timingevent";function Xe(h,m){P.call(this,Yn.Ja,h),this.size=m}d(Xe,P);function Dt(h,m){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},m)}function vr(){this.g=!0}vr.prototype.ua=function(){this.g=!1};function Ur(h,m,_,A,V,B){h.info(function(){if(h.g)if(B){var K="",pe=B.split("&");for(let Ue=0;Ue<pe.length;Ue++){var Et=pe[Ue].split("=");if(Et.length>1){const Ot=Et[0];Et=Et[1];const Kr=Ot.split("_");K=Kr.length>=2&&Kr[1]=="type"?K+(Ot+"="+Et+"&"):K+(Ot+"=redacted&")}}}else K=null;else K=B;return"XMLHTTP REQ ("+A+") [attempt "+V+"]: "+m+`
`+_+`
`+K})}function Xa(h,m,_,A,V,B,K){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+V+"]: "+m+`
`+_+`
`+B+" "+K})}function Si(h,m,_,A){h.info(function(){return"XMLHTTP TEXT ("+m+"): "+sf(h,_)+(A?" "+A:"")})}function Jy(h,m){h.info(function(){return"TIMEOUT: "+m})}vr.prototype.info=function(){};function sf(h,m){if(!h.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(h=0;h<B.length;h++)if(Array.isArray(B[h])){var _=B[h];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var V=A[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return cs(B)}catch{return m}}var Qa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ju={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},of;function Ya(){}d(Ya,Ha),Ya.prototype.g=function(){return new XMLHttpRequest},of=new Ya;function Ao(h){return encodeURIComponent(String(h))}function af(h){var m=1;h=h.split(":");const _=[];for(;m>0&&h.length;)_.push(h.shift()),m--;return h.length&&_.push(h.join(":")),_}function zr(h,m,_,A){this.j=h,this.i=m,this.l=_,this.S=A||1,this.V=new yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Po}function Po(){this.i=null,this.g="",this.h=!1}var ko={},Ja={};function Zu(h,m,_){h.M=1,h.A=Do(On(m)),h.u=_,h.R=!0,ec(h,null)}function ec(h,m){h.F=Date.now(),Q(h),h.B=On(h.A);var _=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),dc(_.i,"t",A),h.C=0,_=h.j.L,h.h=new Po,h.g=dI(h.j,_?m:null,!h.u),h.P>0&&(h.O=new Ro(u(h.Y,h,h.g),h.P)),m=h.V,_=h.g,A=h.ba;var V="readystatechange";Array.isArray(V)||(V&&(Co[0]=V.toString()),V=Co);for(let B=0;B<V.length;B++){const K=Pn(_,V[B],A||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=h.J?we(h.J):{},h.u?(h.v||(h.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,m)):(h.v="GET",h.g.ea(h.B,h.v,null,m)),$r(),Ur(h.i,h.v,h.B,h.l,h.S,h.u)}zr.prototype.ba=function(h){h=h.target;const m=this.O;m&&_s(h)==3?m.j():this.Y(h)},zr.prototype.Y=function(h){try{if(h==this.g)e:{const pe=_s(this.g),Et=this.g.ya(),Ue=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||tI(this.g)))){this.K||pe!=4||Et==7||(Et==8||Ue<=0?$r(3):$r(2)),Dn(this);var m=this.g.ca();this.X=m;var _=Zy(this);if(this.o=m==200,Xa(this.i,this.v,this.B,this.l,this.S,pe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var A,V=this.g;if((A=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(A)){var B=A;break t}}B=null}if(h=B)Si(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Za(this,h);else{this.o=!1,this.m=3,Z(12),Wr(this),fs(this);break e}}if(this.R){h=!0;let Ot;for(;!this.K&&this.C<_.length;)if(Ot=lf(this,_),Ot==Ja){pe==4&&(this.m=4,Z(14),h=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==ko){this.m=4,Z(15),Si(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Si(this.i,this.l,Ot,null),Za(this,Ot);if(ds(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||_.length!=0||this.h.h||(this.m=1,Z(16),h=!1),this.o=this.o&&h,!h)Si(this.i,this.l,_,"[Invalid Chunked Response]"),Wr(this),fs(this);else if(_.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),nv(K),K.P=!0,Z(11))}}else Si(this.i,this.l,_,null),Za(this,_);pe==4&&Wr(this),this.o&&!this.K&&(pe==4?lI(this.j,this):(this.o=!1,Q(this)))}else XB(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,Z(12)):(this.m=0,Z(13)),Wr(this),fs(this)}}}catch{}finally{}};function Zy(h){if(!ds(h))return h.g.la();const m=tI(h.g);if(m==="")return"";let _="";const A=m.length,V=_s(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Wr(h),fs(h),"";h.h.i=new o.TextDecoder}for(let B=0;B<A;B++)h.h.h=!0,_+=h.h.i.decode(m[B],{stream:!(V&&B==A-1)});return m.length=0,h.h.g+=_,h.C=0,h.h.g}function ds(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function lf(h,m){var _=h.C,A=m.indexOf(`
`,_);return A==-1?Ja:(_=Number(m.substring(_,A)),isNaN(_)?ko:(A+=1,A+_>m.length?Ja:(m=m.slice(A,A+_),h.C=A+_,m)))}zr.prototype.cancel=function(){this.K=!0,Wr(this)};function Q(h){h.T=Date.now()+h.H,uf(h,h.H)}function uf(h,m){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Dt(u(h.aa,h),m)}function Dn(h){h.D&&(o.clearTimeout(h.D),h.D=null)}zr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Jy(this.i,this.B),this.M!=2&&($r(),Z(17)),Wr(this),this.m=2,fs(this)):uf(this,this.T-h)};function fs(h){h.j.I==0||h.K||lI(h.j,h)}function Wr(h){Dn(h);var m=h.O;m&&typeof m.dispose=="function"&&m.dispose(),h.O=null,za(h.V),h.g&&(m=h.g,h.g=null,m.abort(),m.dispose())}function Za(h,m){try{var _=h.j;if(_.I!=0&&(_.g==h||el(_.h,h))){if(!h.L&&el(_.h,h)&&_.I==3){try{var A=_.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var V=A;if(V[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)If(_),Tf(_);else break e;tv(_),Z(18)}}else _.xa=V[1],0<_.xa-_.K&&V[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Dt(u(_.Va,_),6e3));rc(_.h)<=1&&_.ta&&(_.ta=void 0)}else Lo(_,11)}else if((h.L||_.g==h)&&If(_),!k(m))for(V=_.Ba.g.parse(m),m=0;m<V.length;m++){let Ue=V[m];const Ot=Ue[0];if(!(Ot<=_.K))if(_.K=Ot,Ue=Ue[1],_.I==2)if(Ue[0]=="c"){_.M=Ue[1],_.ba=Ue[2];const Kr=Ue[3];Kr!=null&&(_.ka=Kr,_.j.info("VER="+_.ka));const No=Ue[4];No!=null&&(_.za=No,_.j.info("SVER="+_.za));const ws=Ue[5];ws!=null&&typeof ws=="number"&&ws>0&&(A=1.5*ws,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Ss=h.g;if(Ss){const Cf=Ss.g?Ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cf){var B=A.h;B.g||Cf.indexOf("spdy")==-1&&Cf.indexOf("quic")==-1&&Cf.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(tl(B,B.h),B.h=null))}if(A.G){const rv=Ss.g?Ss.g.getResponseHeader("X-HTTP-Session-Id"):null;rv&&(A.wa=rv,Be(A.J,A.G,rv))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var K=h;if(A.na=hI(A,A.L?A.ba:null,A.W),K.L){ic(A.h,K);var pe=K,Et=A.O;Et&&(pe.H=Et),pe.D&&(Dn(pe),Q(pe)),A.g=K}else oI(A);_.i.length>0&&bf(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Lo(_,7);else _.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Lo(_,7):ev(_):Ue[0]!="noop"&&_.l&&_.l.qa(Ue),_.A=0)}}$r(4)}catch{}}var cf=class{constructor(h,m){this.g=h,this.map=m}};function tc(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function rc(h){return h.h?1:h.g?h.g.size:0}function el(h,m){return h.h?h.h==m:h.g?h.g.has(m):!1}function tl(h,m){h.g?h.g.add(m):h.h=m}function ic(h,m){h.h&&h.h==m?h.h=null:h.g&&h.g.has(m)&&h.g.delete(m)}tc.prototype.cancel=function(){if(this.i=sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function sc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let m=h.i;for(const _ of h.g.values())m=m.concat(_.G);return m}return p(h.i)}var oc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hf(h,m){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const A=h[_].indexOf("=");let V,B=null;A>=0?(V=h[_].substring(0,A),B=h[_].substring(A+1)):V=h[_],m(V,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function _r(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;h instanceof _r?(this.l=h.l,ps(this,h.j),this.o=h.o,this.g=h.g,ms(this,h.u),this.h=h.h,nl(this,fc(h.i)),this.m=h.m):h&&(m=String(h).match(oc))?(this.l=!1,ps(this,m[1]||"",!0),this.o=gs(m[2]||""),this.g=gs(m[3]||"",!0),ms(this,m[4]),this.h=gs(m[5]||"",!0),nl(this,m[6]||"",!0),this.m=gs(m[7]||"")):(this.l=!1,this.i=new vs(null,this.l))}_r.prototype.toString=function(){const h=[];var m=this.j;m&&h.push(ys(m,lc,!0),":");var _=this.g;return(_||m=="file")&&(h.push("//"),(m=this.o)&&h.push(ys(m,lc,!0),"@"),h.push(Ao(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(ys(_,_.charAt(0)=="/"?ff:df,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",ys(_,mf)),h.join("")},_r.prototype.resolve=function(h){const m=On(this);let _=!!h.j;_?ps(m,h.j):_=!!h.o,_?m.o=h.o:_=!!h.g,_?m.g=h.g:_=h.u!=null;var A=h.h;if(_)ms(m,h.u);else if(_=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var V=m.h.lastIndexOf("/");V!=-1&&(A=m.h.slice(0,V+1)+A)}if(V=A,V==".."||V==".")A="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){A=V.lastIndexOf("/",0)==0,V=V.split("/");const B=[];for(let K=0;K<V.length;){const pe=V[K++];pe=="."?A&&K==V.length&&B.push(""):pe==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&K==V.length&&B.push("")):(B.push(pe),A=!0)}A=B.join("/")}else A=V}return _?m.h=A:_=h.i.toString()!=="",_?nl(m,fc(h.i)):_=!!h.m,_&&(m.m=h.m),m};function On(h){return new _r(h)}function ps(h,m,_){h.j=_?gs(m,!0):m,h.j&&(h.j=h.j.replace(/:$/,""))}function ms(h,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);h.u=m}else h.u=null}function nl(h,m,_){m instanceof vs?(h.i=m,gf(h.i,h.l)):(_||(m=ys(m,pf)),h.i=new vs(m,h.l))}function Be(h,m,_){h.i.set(m,_)}function Do(h){return Be(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function gs(h,m){return h?m?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ys(h,m,_){return typeof h=="string"?(h=encodeURI(h).replace(m,ac),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ac(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var lc=/[#\/\?@]/g,df=/[#\?:]/g,ff=/[#\?]/g,pf=/[#\?@]/g,mf=/#/g;function vs(h,m){this.h=this.g=null,this.i=h||null,this.j=!!m}function Hr(h){h.g||(h.g=new Map,h.h=0,h.i&&hf(h.i,function(m,_){h.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=vs.prototype,t.add=function(h,m){Hr(this),this.i=null,h=Ei(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(m),this.h+=1,this};function uc(h,m){Hr(h),m=Ei(h,m),h.g.has(m)&&(h.i=null,h.h-=h.g.get(m).length,h.g.delete(m))}function cc(h,m){return Hr(h),m=Ei(h,m),h.g.has(m)}t.forEach=function(h,m){Hr(this),this.g.forEach(function(_,A){_.forEach(function(V){h.call(m,V,A,this)},this)},this)};function hc(h,m){Hr(h);let _=[];if(typeof m=="string")cc(h,m)&&(_=_.concat(h.g.get(Ei(h,m))));else for(h=Array.from(h.g.values()),m=0;m<h.length;m++)_=_.concat(h[m]);return _}t.set=function(h,m){return Hr(this),this.i=null,h=Ei(this,h),cc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[m]),this.h+=1,this},t.get=function(h,m){return h?(h=hc(this,h),h.length>0?String(h[0]):m):m};function dc(h,m,_){uc(h,m),_.length>0&&(h.i=null,h.g.set(Ei(h,m),p(_)),h.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var _=m[A];const V=Ao(_);_=hc(this,_);for(let B=0;B<_.length;B++){let K=V;_[B]!==""&&(K+="="+Ao(_[B])),h.push(K)}}return this.i=h.join("&")};function fc(h){const m=new vs;return m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),m}function Ei(h,m){return m=String(m),h.j&&(m=m.toLowerCase()),m}function gf(h,m){m&&!h.j&&(Hr(h),h.i=null,h.g.forEach(function(_,A){const V=A.toLowerCase();A!=V&&(uc(this,A),dc(this,V,_))},h)),h.j=m}function yf(h,m){const _=new vr;if(o.Image){const A=new Image;A.onload=c(wr,_,"TestLoadImage: loaded",!0,m,A),A.onerror=c(wr,_,"TestLoadImage: error",!1,m,A),A.onabort=c(wr,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=c(wr,_,"TestLoadImage: timeout",!1,m,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else m(!1)}function vf(h,m){const _=new vr,A=new AbortController,V=setTimeout(()=>{A.abort(),wr(_,"TestPingServer: timeout",!1,m)},1e4);fetch(h,{signal:A.signal}).then(B=>{clearTimeout(V),B.ok?wr(_,"TestPingServer: ok",!0,m):wr(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),wr(_,"TestPingServer: error",!1,m)})}function wr(h,m,_,A,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),A(_)}catch{}}function _f(){this.g=new Wa}function rl(h){this.i=h.Sb||null,this.h=h.ab||!1}d(rl,Ha),rl.prototype.g=function(){return new Oo(this.i,this.h)};function Oo(h,m){De.call(this),this.H=h,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Oo,De),t=Oo.prototype,t.open=function(h,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=m,this.readyState=1,Mo(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(m.body=h),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Mo(this)),this.g&&(this.readyState=3,Mo(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pc(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function pc(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var m=h.value?h.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!h.done}))&&(this.response=this.responseText+=m)}h.done?Ti(this):Mo(this),this.readyState==3&&pc(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Ti(this))},t.Na=function(h){this.g&&(this.response=h,Ti(this))},t.ga=function(){this.g&&Ti(this)};function Ti(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Mo(h)}t.setRequestHeader=function(h,m){this.A.append(h,m)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=m.next();return h.join(`\r
`)};function Mo(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function mc(h){let m="";return Y(h,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function il(h,m,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=mc(_),typeof h=="string"?_!=null&&Ao(_):Be(h,m,_))}function Ke(h){De.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Ke,De);var wf=/^https?$/i,Sf=["POST","PUT"];t=Ke.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);m=m?m.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():of.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(h),!0),this.B=!1}catch(B){Jb(this,B);return}if(h=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var V in A)_.set(V,A[V]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())_.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),V=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(Sf,m,void 0)>=0)||A||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of _)this.g.setRequestHeader(B,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(B){Jb(this,B)}};function Jb(h,m){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=m,h.o=5,Zb(h),Ef(h)}function Zb(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,et(this,"complete"),et(this,"abort"),Ef(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ef(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?eI(this):this.Xa())},t.Xa=function(){eI(this)};function eI(h){if(h.h&&typeof s<"u"){if(h.v&&_s(h)==4)setTimeout(h.Ca.bind(h),0);else if(et(h,"readystatechange"),_s(h)==4){h.h=!1;try{const B=h.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var A;if(A=B===0){let K=String(h.D).match(oc)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!wf.test(K?K.toLowerCase():"")}_=A}if(_)et(h,"complete"),et(h,"success");else{h.o=6;try{var V=_s(h)>2?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.ca()+"]",Zb(h)}}finally{Ef(h)}}}}function Ef(h,m){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,m||et(h,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function _s(h){return h.g?h.g.readyState:0}t.ca=function(){try{return _s(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var m=this.g.responseText;return h&&m.indexOf(h)==0&&(m=m.substring(h.length)),Yu(m)}};function tI(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function XB(h){const m={};h=(h.g&&_s(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(k(h[A]))continue;var _=af(h[A]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=m[V]||[];m[V]=B,B.push(_)}re(m,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gc(h,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||m}function nI(h){this.za=0,this.i=[],this.j=new vr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gc("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gc("baseRetryDelayMs",5e3,h),this.Za=gc("retryDelaySeedMs",1e4,h),this.Ta=gc("forwardChannelMaxRetries",2,h),this.va=gc("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new tc(h&&h.concurrentRequestLimit),this.Ba=new _f,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=nI.prototype,t.ka=8,t.I=1,t.connect=function(h,m,_,A){Z(0),this.W=h,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=hI(this,null,this.W),bf(this)};function ev(h){if(rI(h),h.I==3){var m=h.V++,_=On(h.J);if(Be(_,"SID",h.M),Be(_,"RID",m),Be(_,"TYPE","terminate"),yc(h,_),m=new zr(h,h.j,m),m.M=2,m.A=Do(On(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=m.A,_=!0),_||(m.g=dI(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Q(m)}cI(h)}function Tf(h){h.g&&(nv(h),h.g.cancel(),h.g=null)}function rI(h){Tf(h),h.v&&(o.clearTimeout(h.v),h.v=null),If(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function bf(h){if(!nc(h.h)&&!h.m){h.m=!0;var m=h.Ea;O||E(),D||(O(),D=!0),b.add(m,h),h.D=0}}function QB(h,m){return rc(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=m.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Dt(u(h.Ea,h,m),uI(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const V=new zr(this,this.j,h);let B=this.o;if(this.U&&(B?(B=we(B),un(B,this.U)):B=this.U),this.u!==null||this.R||(V.J=B,B=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=sI(this,V,m),_=On(this.J),Be(_,"RID",h),Be(_,"CVER",22),this.G&&Be(_,"X-HTTP-Session-Id",this.G),yc(this,_),B&&(this.R?m="headers="+Ao(mc(B))+"&"+m:this.u&&il(_,this.u,B)),tl(this.h,V),this.Ra&&Be(_,"TYPE","init"),this.S?(Be(_,"$req",m),Be(_,"SID","null"),V.U=!0,Zu(V,_,null)):Zu(V,_,m),this.I=2}}else this.I==3&&(h?iI(this,h):this.i.length==0||nc(this.h)||iI(this))};function iI(h,m){var _;m?_=m.l:_=h.V++;const A=On(h.J);Be(A,"SID",h.M),Be(A,"RID",_),Be(A,"AID",h.K),yc(h,A),h.u&&h.o&&il(A,h.u,h.o),_=new zr(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),m&&(h.i=m.G.concat(h.i)),m=sI(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tl(h.h,_),Zu(_,A,m)}function yc(h,m){h.H&&Y(h.H,function(_,A){Be(m,A,_)}),h.l&&Y({},function(_,A){Be(m,A,_)})}function sI(h,m,_){_=Math.min(h.i.length,_);const A=h.l?u(h.l.Ka,h.l,h):null;e:{var V=h.i;let pe=-1;for(;;){const Et=["count="+_];pe==-1?_>0?(pe=V[0].g,Et.push("ofs="+pe)):pe=0:Et.push("ofs="+pe);let Ue=!0;for(let Ot=0;Ot<_;Ot++){var B=V[Ot].g;const Kr=V[Ot].map;if(B-=pe,B<0)pe=Math.max(0,V[Ot].g-100),Ue=!1;else try{B="req"+B+"_"||"";try{var K=Kr instanceof Map?Kr:Object.entries(Kr);for(const[No,ws]of K){let Ss=ws;a(ws)&&(Ss=cs(ws)),Et.push(B+No+"="+encodeURIComponent(Ss))}}catch(No){throw Et.push(B+"type="+encodeURIComponent("_badmap")),No}}catch{A&&A(Kr)}}if(Ue){K=Et.join("&");break e}}K=void 0}return h=h.i.splice(0,_),m.G=h,K}function oI(h){if(!h.g&&!h.v){h.Y=1;var m=h.Da;O||E(),D||(O(),D=!0),b.add(m,h),h.A=0}}function tv(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Dt(u(h.Da,h),uI(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,aI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Dt(u(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Z(10),Tf(this),aI(this))};function nv(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function aI(h){h.g=new zr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var m=On(h.na);Be(m,"RID","rpc"),Be(m,"SID",h.M),Be(m,"AID",h.K),Be(m,"CI",h.F?"0":"1"),!h.F&&h.ia&&Be(m,"TO",h.ia),Be(m,"TYPE","xmlhttp"),yc(h,m),h.u&&h.o&&il(m,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Do(On(m)),_.u=null,_.R=!0,ec(_,h)}t.Va=function(){this.C!=null&&(this.C=null,Tf(this),tv(this),Z(19))};function If(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function lI(h,m){var _=null;if(h.g==m){If(h),nv(h),h.g=null;var A=2}else if(el(h.h,m))_=m.G,ic(h.h,m),A=1;else return;if(h.I!=0){if(m.o)if(A==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var V=h.D;A=wi(),et(A,new Xe(A,_)),bf(h)}else oI(h);else if(V=m.m,V==3||V==0&&m.X>0||!(A==1&&QB(h,m)||A==2&&tv(h)))switch(_&&_.length>0&&(m=h.h,m.i=m.i.concat(_)),V){case 1:Lo(h,5);break;case 4:Lo(h,10);break;case 3:Lo(h,6);break;default:Lo(h,2)}}}function uI(h,m){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*m}function Lo(h,m){if(h.j.info("Error code "+m),m==2){var _=u(h.bb,h),A=h.Ua;const V=!A;A=new _r(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ps(A,"https"),Do(A),V?yf(A.toString(),_):vf(A.toString(),_)}else Z(2);h.I=0,h.l&&h.l.pa(m),cI(h),rI(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function cI(h){if(h.I=0,h.ja=[],h.l){const m=sc(h.h);(m.length!=0||h.i.length!=0)&&(y(h.ja,m),y(h.ja,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.oa()}}function hI(h,m,_){var A=_ instanceof _r?On(_):new _r(_);if(A.g!="")m&&(A.g=m+"."+A.g),ms(A,A.u);else{var V=o.location;A=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const B=new _r(null);A&&ps(B,A),m&&(B.g=m),V&&ms(B,V),_&&(B.h=_),A=B}return _=h.G,m=h.wa,_&&m&&Be(A,_,m),Be(A,"VER",h.ka),yc(h,A),A}function dI(h,m,_){if(m&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=h.Aa&&!h.ma?new Ke(new rl({ab:_})):new Ke(h.ma),m.Fa(h.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fI(){}t=fI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Rf(){}Rf.prototype.g=function(h,m){return new Mn(h,m)};function Mn(h,m){De.call(this),this.g=new nI(m),this.l=h,this.h=m&&m.messageUrlParams||null,h=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(h?h["X-WebChannel-Content-Type"]=m.messageContentType:h={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(h?h["X-WebChannel-Client-Profile"]=m.sa:h={"X-WebChannel-Client-Profile":m.sa}),this.g.U=h,(h=m&&m.Qb)&&!k(h)&&(this.g.u=h),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,h=this.h,h!==null&&m in h&&(h=this.h,m in h&&delete h[m])),this.j=new sl(this)}d(Mn,De),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){ev(this.g)},Mn.prototype.o=function(h){var m=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=cs(h),h=_);m.i.push(new cf(m.Ya++,h)),m.I==3&&bf(m)},Mn.prototype.N=function(){this.g.l=null,delete this.j,ev(this.g),delete this.g,Mn.Z.N.call(this)};function pI(h){hs.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var m=h.__sm__;if(m){e:{for(const _ in m){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,m=m!==null&&h in m?m[h]:void 0),this.data=m}else this.data=h}d(pI,hs);function mI(){$e.call(this),this.status=1}d(mI,$e);function sl(h){this.g=h}d(sl,fI),sl.prototype.ra=function(){et(this.g,"a")},sl.prototype.qa=function(h){et(this.g,new pI(h))},sl.prototype.pa=function(h){et(this.g,new mI)},sl.prototype.oa=function(){et(this.g,"b")},Rf.prototype.createWebChannel=Rf.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,OM=function(){return new Rf},DM=function(){return wi()},kM=Yn,gS={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,Bp=Qa,Ju.COMPLETE="complete",PM=Ju,xo.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",De.prototype.listen=De.prototype.J,zc=xo,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,AM=Ke}).apply(typeof ep<"u"?ep:typeof self<"u"?self:typeof window<"u"?window:{});const QC="@firebase/firestore",YC="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new QE("@firebase/firestore");function vl(){return Ra.logLevel}function z(t,...e){if(Ra.logLevel<=Ee.DEBUG){const n=e.map(ZE);Ra.debug(`Firestore (${Bu}): ${t}`,...n)}}function fn(t,...e){if(Ra.logLevel<=Ee.ERROR){const n=e.map(ZE);Ra.error(`Firestore (${Bu}): ${t}`,...n)}}function Ca(t,...e){if(Ra.logLevel<=Ee.WARN){const n=e.map(ZE);Ra.warn(`Firestore (${Bu}): ${t}`,...n)}}function ZE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,MM(t,r,n)}function MM(t,e,n){let r=`FIRESTORE (${Bu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fn(r),new Error(r)}function ne(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||MM(e,i,r)}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class RH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CH{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ne(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ui,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ui)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new LM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class xH{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AH{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new xH(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ne(this.o===void 0,3512);const r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new JC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=kH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function yS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return a_(i)===a_(s)?he(i,s):a_(i)?1:-1}return he(t.length,e.length)}const DH=55296,OH=57343;function a_(t){const e=t.charCodeAt(0);return e>=DH&&e<=OH}function mu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function NM(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="__name__";class Yr{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Yr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=Yr.isNumericId(e),i=Yr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Yr.extractNumericId(e).compare(Yr.extractNumericId(n)):yS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class Oe extends Yr{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const MH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Yr{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return MH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ZC}static keyField(){return new nt([ZC])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(Oe.fromString(e))}static fromName(e){return new q(Oe.fromString(e).popFirst(5))}static empty(){return new q(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LH(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ex(t){if(!q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tx(t){if(q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cy(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vd(t,e){if(!FM(t))throw new H(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new H(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=-62135596800,rx=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rx);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nx)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rx}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vd(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:_t("string",Le._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Le(0,0))}static max(){return new oe(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=-1;class Ym{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function vS(t){return t.fields.find(e=>e.kind===2)}function Ho(t){return t.fields.filter(e=>e.kind!==2)}Ym.UNKNOWN_ID=-1;class jp{constructor(e,n){this.fieldPath=e,this.kind=n}}class sd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new sd(0,Kn.min())}}function NH(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Kn(i,q.empty(),e)}function BM(t){return new Kn(t.readTime,t.key,id)}class Kn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kn(oe.min(),q.empty(),id)}static max(){return new Kn(oe.max(),q.empty(),id)}}function tT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $M{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==jM)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="SimpleDb";class hy{static open(e,n,r,i){try{return new hy(n,e.transaction(i,r))}catch(s){throw new vh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ui,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new vh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=nT(r.target.error);this.S.reject(new vh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(z(Bn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new FH(n)}}class so{static delete(e){return z(Bn,"Removing database:",e),Xo(dM().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!SM())return!1;if(so.F())return!0;const e=At(),n=so.M(e),r=0<n&&n<10,i=UM(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,so.M(At())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(z(Bn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new vh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new vh(e,o))},i.onupgradeneeded=s=>{z(Bn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{z(Bn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=hy.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),N.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(z(Bn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function UM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class VH{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Xo(this.U.delete())}}class vh extends H{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _o(t){return t.name==="IndexedDbTransactionError"}class FH{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(z(Bn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(z(Bn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xo(r)}add(e){return z(Bn,"ADD",this.store.name,e,e),Xo(this.store.add(e))}get(e){return Xo(this.store.get(e)).next(n=>(n===void 0&&(n=null),z(Bn,"GET",this.store.name,e,n),n))}delete(e){return z(Bn,"DELETE",this.store.name,e),Xo(this.store.delete(e))}count(){return z(Bn,"COUNT",this.store.name),Xo(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new N((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){z(Bn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=nT(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new VH(a),u=n(a.primaryKey,a.value,l);if(u instanceof N){const c=u.catch(d=>(l.done(),N.reject(d)));r.push(c)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Xo(t){return new N((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=nT(r.target.error);n(i)}})}let ix=!1;function nT(t){const e=so.M(At());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ix||(ix=!0,setTimeout(()=>{throw r},0)),r}}return t}const _h="IndexBackfiller";class BH{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){z(_h,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();z(_h,`Documents written: ${n}`)}catch(n){_o(n)?z(_h,"Ignoring IndexedDB error during index backfill: ",n):await $a(n)}await this.re(6e4)})}}class jH{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z(_h,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(z(_h,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=BM(s);tT(o,r)>0&&(r=o)}),new Kn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=-1;function dy(t){return t==null}function od(t){return t===0&&1/t==-1/0}function $H(t){return typeof t=="number"&&Number.isInteger(t)&&!od(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="";function on(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sx(e)),e=UH(t.get(n),e);return sx(e)}function UH(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Jm:n+="";break;default:n+=s}}return n}function sx(t){return t+Jm+""}function ii(t){const e=t.length;if(ne(e>=2,64408,{path:t}),e===2)return ne(t.charAt(0)===Jm&&t.charAt(1)==="",56145,{path:t}),Oe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Jm,s);switch((o<0||o>n)&&te(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:te(61167,{path:t})}s=o+2}return new Oe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="remoteDocuments",Fd="owner",ll="owner",ad="mutationQueues",zH="userId",Pr="mutations",ox="batchId",oa="userMutationsIndex",ax=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){return[t,on(e)]}function zM(t,e,n){return[t,on(e),n]}const WH={},gu="documentMutations",Zm="remoteDocumentsV14",HH=["prefixPath","collectionGroup","readTime","documentId"],Up="documentKeyIndex",KH=["prefixPath","collectionGroup","documentId"],WM="collectionGroupIndex",qH=["collectionGroup","readTime","prefixPath","documentId"],ld="remoteDocumentGlobal",_S="remoteDocumentGlobalKey",yu="targets",HM="queryTargetsIndex",GH=["canonicalId","targetId"],vu="targetDocuments",XH=["targetId","path"],rT="documentTargetsIndex",QH=["path","targetId"],eg="targetGlobalKey",pa="targetGlobal",ud="collectionParents",YH=["collectionId","parent"],_u="clientMetadata",JH="clientId",fy="bundles",ZH="bundleId",py="namedQueries",eK="name",iT="indexConfiguration",tK="indexId",wS="collectionGroupIndex",nK="collectionGroup",wh="indexState",rK=["indexId","uid"],KM="sequenceNumberIndex",iK=["uid","sequenceNumber"],Sh="indexEntries",sK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qM="documentKeyIndex",oK=["indexId","uid","orderedDocumentKey"],my="documentOverlays",aK=["userId","collectionPath","documentId"],SS="collectionPathOverlayIndex",lK=["userId","collectionPath","largestBatchId"],GM="collectionGroupOverlayIndex",uK=["userId","collectionGroup","largestBatchId"],sT="globals",cK="name",XM=[ad,Pr,gu,Ko,yu,Fd,pa,vu,_u,ld,ud,fy,py],hK=[...XM,my],QM=[ad,Pr,gu,Zm,yu,Fd,pa,vu,_u,ld,ud,fy,py,my],YM=QM,oT=[...YM,iT,wh,Sh],dK=oT,JM=[...oT,sT],fK=JM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends $M{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Pt(t,e){const n=de(t);return so.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tp(this.root,e,this.comparator,!1)}getReverseIterator(){return new tp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tp(this.root,e,this.comparator,!0)}}class tp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=i??Kt.EMPTY,this.right=s??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ux(this.data.getIterator())}getIteratorFrom(e){return new ux(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class ux{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ul(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Fe(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new eL("Invalid base64 string: "+s):s}}(e);return new wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const pK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(t){if(ne(!!t,39018),typeof t=="string"){let e=0;const n=pK.exec(t);if(ne(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qi(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="server_timestamp",nL="__type__",rL="__previous_value__",iL="__local_write_time__";function aT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[nL])==null?void 0:r.stringValue)===tL}function gy(t){const e=t.mapValue.fields[rL];return aT(e)?gy(e):e}function cd(t){const e=Ki(t.mapValue.fields[iL].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const tg="(default)";class xa{constructor(e,n){this.projectId=e,this.database=n||tg}static empty(){return new xa("","")}get isDefaultDatabase(){return this.database===tg}isEqual(e){return e instanceof xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="__type__",sL="__max__",Ks={mapValue:{fields:{__type__:{stringValue:sL}}}},uT="__vector__",wu="value",zp={nullValue:"NULL_VALUE"};function uo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?aT(t)?4:oL(t)?9007199254740991:yy(t)?10:11:te(28295,{value:t})}function gi(t,e){if(t===e)return!0;const n=uo(t);if(n!==uo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cd(t).isEqual(cd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ki(i.timestampValue),a=Ki(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return qi(i.bytesValue).isEqual(qi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?od(o)===od(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return mu(t.arrayValue.values||[],e.arrayValue.values||[],gi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(lx(o)!==lx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!gi(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function hd(t,e){return(t.values||[]).find(n=>gi(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=uo(t),r=uo(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Qe(s.integerValue||s.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cx(t.timestampValue,e.timestampValue);case 4:return cx(cd(t),cd(e));case 5:return yS(t.stringValue,e.stringValue);case 6:return function(s,o){const a=qi(s),l=qi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=he(a[u],l[u]);if(c!==0)return c}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Qe(s.latitude),Qe(o.latitude));return a!==0?a:he(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,p,y,S;const a=s.fields||{},l=o.fields||{},u=(f=a[wu])==null?void 0:f.arrayValue,c=(p=l[wu])==null?void 0:p.arrayValue,d=he(((y=u==null?void 0:u.values)==null?void 0:y.length)||0,((S=c==null?void 0:c.values)==null?void 0:S.length)||0);return d!==0?d:hx(u,c)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ks.mapValue&&o===Ks.mapValue)return 0;if(s===Ks.mapValue)return 1;if(o===Ks.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=yS(l[d],c[d]);if(f!==0)return f;const p=co(a[l[d]],u[c[d]]);if(p!==0)return p}return he(l.length,c.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function cx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Ki(t),r=Ki(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function hx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=co(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Su(t){return TS(t)}function TS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=TS(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${TS(n.fields[o])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function Wp(t){switch(uo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gy(t);return e?16+Wp(e):16;case 5:return 2*t.stringValue.length;case 6:return qi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Wp(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return wo(r.fields,(s,o)=>{i+=s.length+Wp(o)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function dd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bS(t){return!!t&&"integerValue"in t}function fd(t){return!!t&&"arrayValue"in t}function dx(t){return!!t&&"nullValue"in t}function fx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hp(t){return!!t&&"mapValue"in t}function yy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lT])==null?void 0:r.stringValue)===uT}function Eh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eh(t.arrayValue.values[n]);return e}return{...t}}function oL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===sL}const aL={mapValue:{fields:{[lT]:{stringValue:uT},[wu]:{arrayValue:{}}}}};function gK(t){return"nullValue"in t?zp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?dd(xa.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?yy(t)?aL:{mapValue:{}}:te(35942,{value:t})}function yK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?dd(xa.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?aL:"mapValue"in t?yy(t)?{mapValue:{}}:Ks:te(61959,{value:t})}function px(t,e){const n=co(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function mx(t,e){const n=co(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eh(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Eh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Hp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Hp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nn(Eh(this.value))}}function lL(t){const e=[];return wo(t.fields,(n,r)=>{const i=new nt([n]);if(Hp(r)){const s=lL(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ht(e,0,oe.min(),oe.min(),oe.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new ht(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new ht(e,2,n,oe.min(),oe.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,oe.min(),oe.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.position=e,this.inclusive=n}}function gx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=co(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n="asc"){this.field=e,this.dir=n}}function vK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{}class Te extends uL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _K(e,n,r):n==="array-contains"?new EK(e,r):n==="in"?new mL(e,r):n==="not-in"?new TK(e,r):n==="array-contains-any"?new bK(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wK(e,r):new SK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&uo(this.value)===uo(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends uL{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ne(e,n)}matches(e){return Tu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tu(t){return t.op==="and"}function IS(t){return t.op==="or"}function cT(t){return cL(t)&&Tu(t)}function cL(t){for(const e of t.filters)if(e instanceof Ne)return!1;return!0}function RS(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+Su(t.value);if(cT(t))return t.filters.map(e=>RS(e)).join(",");{const e=t.filters.map(n=>RS(n)).join(",");return`${t.op}(${e})`}}function hL(t,e){return t instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&gi(r.value,i.value)}(t,e):t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&hL(o,i.filters[a]),!0):!1}(t,e):void te(19439)}function dL(t,e){const n=t.filters.concat(e);return Ne.create(n,t.op)}function fL(t){return t instanceof Te?function(n){return`${n.field.canonicalString()} ${n.op} ${Su(n.value)}`}(t):t instanceof Ne?function(n){return n.op.toString()+" {"+n.getFilters().map(fL).join(" ,")+"}"}(t):"Filter"}class _K extends Te{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class wK extends Te{constructor(e,n){super(e,"in",n),this.keys=pL("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SK extends Te{constructor(e,n){super(e,"not-in",n),this.keys=pL("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pL(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class EK extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fd(n)&&hd(n.arrayValue,this.value)}}class mL extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hd(this.value.arrayValue,n)}}class TK extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hd(this.value.arrayValue,n)}}class bK extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function CS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new IK(t,e,n,r,i,s,o)}function Aa(t){const e=de(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>RS(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Su(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Su(r)).join(",")),e.Te=n}return e.Te}function Bd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yx(t.startAt,e.startAt)&&yx(t.endAt,e.endAt)}function rg(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ig(t,e){return t.filters.filter(n=>n instanceof Te&&n.field.isEqual(e))}function vx(t,e,n){let r=zp,i=!0;for(const s of ig(t,e)){let o=zp,a=!0;switch(s.op){case"<":case"<=":o=gK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=zp}px({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];px({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function _x(t,e,n){let r=Ks,i=!0;for(const s of ig(t,e)){let o=Ks,a=!0;switch(s.op){case">=":case">":o=yK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ks}mx({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];mx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RK(t,e,n,r,i,s,o,a){return new jd(t,e,n,r,i,s,o,a)}function vy(t){return new jd(t)}function wx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gL(t){return t.collectionGroup!==null}function Th(t){const e=de(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ng(s,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new ng(nt.keyField(),r))}return e.Ie}function cr(t){const e=de(t);return e.Ee||(e.Ee=CK(e,Th(t))),e.Ee}function CK(t,e){if(t.limitType==="F")return CS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ng(i.field,s)});const n=t.endAt?new Eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Eu(t.startAt.position,t.startAt.inclusive):null;return CS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xS(t,e){const n=t.filters.concat([e]);return new jd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function AS(t,e,n){return new jd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _y(t,e){return Bd(cr(t),cr(e))&&t.limitType===e.limitType}function yL(t){return`${Aa(cr(t))}|lt:${t.limitType}`}function _l(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fL(i)).join(", ")}]`),dy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Su(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Su(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function $d(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Th(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=gx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Th(r),i)||r.endAt&&!function(o,a,l){const u=gx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Th(r),i))}(t,e)}function xK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vL(t){return(e,n)=>{let r=!1;for(const i of Th(t)){const s=AK(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function AK(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?co(l,u):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ZM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PK=new Ze(q.comparator);function Un(){return PK}const _L=new Ze(q.comparator);function Wc(...t){let e=_L;for(const n of t)e=e.insert(n.key,n);return e}function wL(t){let e=_L;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function si(){return bh()}function SL(){return bh()}function bh(){return new ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const kK=new Ze(q.comparator),DK=new Fe(q.comparator);function _e(...t){let e=DK;for(const n of t)e=e.add(n);return e}const OK=new Fe(he);function MK(){return OK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function EL(t){return{integerValue:""+t}}function LK(t,e){return $H(e)?EL(e):hT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this._=void 0}}function NK(t,e,n){return t instanceof pd?function(i,s){const o={fields:{[nL]:{stringValue:tL},[iL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&aT(s)&&(s=gy(s)),s&&(o.fields[rL]=s),{mapValue:o}}(n,e):t instanceof bu?bL(t,e):t instanceof Iu?IL(t,e):function(i,s){const o=TL(i,s),a=Sx(o)+Sx(i.Ae);return bS(o)&&bS(i.Ae)?EL(a):hT(i.serializer,a)}(t,e)}function VK(t,e,n){return t instanceof bu?bL(t,e):t instanceof Iu?IL(t,e):n}function TL(t,e){return t instanceof md?function(r){return bS(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class pd extends wy{}class bu extends wy{constructor(e){super(),this.elements=e}}function bL(t,e){const n=RL(e);for(const r of t.elements)n.some(i=>gi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Iu extends wy{constructor(e){super(),this.elements=e}}function IL(t,e){let n=RL(e);for(const r of t.elements)n=n.filter(i=>!gi(i,r));return{arrayValue:{values:n}}}class md extends wy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sx(t){return Qe(t.integerValue||t.doubleValue)}function RL(t){return fd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,n){this.field=e,this.transform=n}}function BK(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof bu&&i instanceof bu||r instanceof Iu&&i instanceof Iu?mu(r.elements,i.elements,gi):r instanceof md&&i instanceof md?gi(r.Ae,i.Ae):r instanceof pd&&i instanceof pd}(t.transform,e.transform)}class jK{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sy{}function CL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ey(t.key,rn.none()):new ju(t.key,t.data,rn.none());{const n=t.data,r=nn.empty();let i=new Fe(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ns(t.key,r,new bn(i.toArray()),rn.none())}}function $K(t,e,n){t instanceof ju?function(i,s,o){const a=i.value.clone(),l=Tx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(i,s,o){if(!Kp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Tx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(xL(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ih(t,e,n,r){return t instanceof ju?function(s,o,a,l){if(!Kp(s.precondition,o))return a;const u=s.value.clone(),c=bx(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ns?function(s,o,a,l){if(!Kp(s.precondition,o))return a;const u=bx(s.fieldTransforms,l,o),c=o.data;return c.setAll(xL(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Kp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function UK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=TL(r.transform,i||null);s!=null&&(n===null&&(n=nn.empty()),n.set(r.field,s))}return n||null}function Ex(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mu(r,i,(s,o)=>BK(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ju extends Sy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ns extends Sy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Tx(t,e,n){const r=new Map;ne(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,VK(o,a,n[i]))}return r}function bx(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,NK(s,o,e))}return r}class Ey extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AL extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$K(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ih(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ih(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=SL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=CL(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&mu(this.mutations,e.mutations,(n,r)=>Ex(n,r))&&mu(this.baseMutations,e.baseMutations,(n,r)=>Ex(n,r))}}class fT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return kK}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,be;function WK(t){switch(t){case j.OK:return te(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function PL(t){if(t===void 0)return fn("GRPC error has no .code"),j.UNKNOWN;switch(t){case mt.OK:return j.OK;case mt.CANCELLED:return j.CANCELLED;case mt.UNKNOWN:return j.UNKNOWN;case mt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case mt.INTERNAL:return j.INTERNAL;case mt.UNAVAILABLE:return j.UNAVAILABLE;case mt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case mt.NOT_FOUND:return j.NOT_FOUND;case mt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case mt.ABORTED:return j.ABORTED;case mt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case mt.DATA_LOSS:return j.DATA_LOSS;default:return te(39323,{code:t})}}(be=mt||(mt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=new io([4294967295,4294967295],0);function Ix(t){const e=HK().encode(t),n=new xM;return n.update(e),new Uint8Array(n.digest())}function Rx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new io([n,r],0),new io([i,s],0)]}class mT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hc(`Invalid padding: ${n}`);if(r<0)throw new Hc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=io.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(io.fromNumber(r)));return i.compare(KK)===1&&(i=new io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ix(e),[r,i]=Rx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new mT(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Ix(e),[r,i]=Rx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ud.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ty(oe.min(),i,new Ze(he),Un(),_e())}}class Ud{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ud(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class kL{constructor(e,n){this.targetId=e,this.Ce=n}}class DL{constructor(e,n,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Cx{constructor(){this.ve=0,this.Fe=xx(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new Ud(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=xx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qK{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=np(),this.He=np(),this.Ye=new Ze(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(rg(s))if(r===0){const o=new q(s.path);this.et(n,o,ht.newNoDocument(o,oe.min()))}else ne(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=qi(r).toUint8Array()}catch(l){if(l instanceof eL)return Ca("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mT(o,i,s)}catch(l){return Ca(l instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&rg(a.target)){const l=new q(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ht.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=_e();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ty(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=np(),this.He=np(),this.Ye=new Ze(he),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function np(){return new Ze(q.comparator)}function xx(){return new Ze(q.comparator)}const GK={asc:"ASCENDING",desc:"DESCENDING"},XK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QK={and:"AND",or:"OR"};class YK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function PS(t,e){return t.useProto3Json||dy(e)?e:{value:e}}function Ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JK(t,e){return Ru(t,e.toTimestamp())}function yn(t){return ne(!!t,49232),oe.fromTimestamp(function(n){const r=Ki(n);return new Le(r.seconds,r.nanos)}(t))}function gT(t,e){return kS(t,e).canonicalString()}function kS(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ML(t){const e=Oe.fromString(t);return ne(zL(e),10190,{key:e.toString()}),e}function sg(t,e){return gT(t.databaseId,e.path)}function ma(t,e){const n=ML(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(VL(n))}function LL(t,e){return gT(t.databaseId,e)}function NL(t){const e=ML(t);return e.length===4?Oe.emptyPath():VL(e)}function DS(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VL(t){return ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ax(t,e,n){return{name:sg(t,e),fields:n.value.mapValue.fields}}function ZK(t,e,n){const r=ma(t,e.name),i=yn(e.updateTime),s=e.createTime?yn(e.createTime):oe.min(),o=new nn({mapValue:{fields:e.fields}}),a=ht.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function eq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ne(c===void 0||typeof c=="string",58123),wt.fromBase64String(c||"")):(ne(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),wt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?j.UNKNOWN:PL(u.code);return new H(c,u.message||"")}(o);n=new DL(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ma(t,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):oe.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=ht.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new qp(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ma(t,r.document),s=r.readTime?yn(r.readTime):oe.min(),o=ht.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ma(t,r.document),s=r.removedTargetIds||[];n=new qp([],s,i,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new zK(i,s),a=r.targetId;n=new kL(a,o)}}return n}function og(t,e){let n;if(e instanceof ju)n={update:Ax(t,e.key,e.value)};else if(e instanceof Ey)n={delete:sg(t,e.key)};else if(e instanceof ns)n={update:Ax(t,e.key,e.data),updateMask:oq(e.fieldMask)};else{if(!(e instanceof AL))return te(16599,{Vt:e.type});n={verify:sg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof pd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Iu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof md)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function OS(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?rn.updateTime(yn(s.updateTime)):s.exists!==void 0?rn.exists(s.exists):rn.none()}(e.currentDocument):rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new pd;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new bu(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new Iu(c)}else"increment"in a?l=new md(o,a.increment):te(16584,{proto:a});const u=nt.fromServerFormat(a.fieldPath);return new FK(u,l)}(t,i)):[];if(e.update){e.update.name;const i=ma(t,e.update.name),s=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new bn(u.map(c=>nt.fromServerFormat(c)))}(e.updateMask);return new ns(i,s,o,n,r)}return new ju(i,s,n,r)}if(e.delete){const i=ma(t,e.delete);return new Ey(i,n)}if(e.verify){const i=ma(t,e.verify);return new AL(i,n)}return te(1463,{proto:e})}function tq(t,e){return t&&t.length>0?(ne(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?yn(i.updateTime):yn(s);return o.isEqual(oe.min())&&(o=yn(s)),new jK(o,i.transformResults||[])}(n,e))):[]}function FL(t,e){return{documents:[LL(t,e.path)]}}function BL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LL(t,i);const s=function(u){if(u.length!==0)return UL(Ne.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:wl(f.field),direction:rq(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=PS(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function jL(t){let e=NL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ne(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=$L(d);return f instanceof Ne&&cT(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new ng(Sl(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,dy(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Eu(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,p=d.values||[];return new Eu(p,f)}(n.endAt)),RK(e,i,o,s,a,"F",l,u)}function nq(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $L(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Sl(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sl(n.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sl(n.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sl(n.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Te.create(Sl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ne.create(n.compositeFilter.filters.map(r=>$L(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function rq(t){return GK[t]}function iq(t){return XK[t]}function sq(t){return QK[t]}function wl(t){return{fieldPath:t.canonicalString()}}function Sl(t){return nt.fromServerFormat(t.fieldPath)}function UL(t){return t instanceof Te?function(n){if(n.op==="=="){if(fx(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(dx(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fx(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(dx(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:iq(n.op),value:n.value}}}(t):t instanceof Ne?function(n){const r=n.getFilters().map(i=>UL(i));return r.length===1?r[0]:{compositeFilter:{op:sq(n.op),filters:r}}}(t):te(54877,{filter:t})}function oq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,r,i,s=oe.min(),o=oe.min(),a=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.yt=e}}function aq(t,e){let n;if(e.document)n=ZK(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),i=ka(e.noDocument.readTime);n=ht.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te(56709);{const r=q.fromSegments(e.unknownDocument.path),i=ka(e.unknownDocument.version);n=ht.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Le(i[0],i[1]);return oe.fromTimestamp(s)}(e.readTime)),n}function Px(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ag(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:sg(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ru(s,o.version.toTimestamp()),createTime:Ru(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pa(e.version)};else{if(!e.isUnknownDocument())return te(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Pa(e.version)}}return r}function ag(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Pa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ka(t){const e=new Le(t.seconds,t.nanoseconds);return oe.fromTimestamp(e)}function Qo(t,e){const n=(e.baseMutations||[]).map(s=>OS(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>OS(t.yt,s)),i=Le.fromMillis(e.localWriteTimeMs);return new dT(e.batchId,i,n,r)}function Kc(t){const e=ka(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ka(t.lastLimboFreeSnapshotVersion):oe.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return ne(o===1,1966,{count:o}),cr(vy(NL(s.documents[0])))}(t.query):function(s){return cr(jL(s))}(t.query),new Oi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wt.fromBase64String(t.resumeToken))}function HL(t,e){const n=Pa(e.snapshotVersion),r=Pa(e.lastLimboFreeSnapshotVersion);let i;i=rg(e.target)?FL(t.yt,e.target):BL(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KL(t){const e=jL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?AS(e,e.limit,"L"):e}function l_(t,e){return new pT(e.largestBatchId,OS(t.yt,e.overlayMutation))}function kx(t,e){const n=e.path.lastSegment();return[t,on(e.path.popLast()),n]}function Dx(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Pa(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{getBundleMetadata(e,n){return Ox(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ka(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return Ox(e).put(function(i){return{bundleId:i.id,createTime:Pa(yn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Mx(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:KL(s.bundledQuery),readTime:ka(s.readTime)}}(r)})}saveNamedQuery(e,n){return Mx(e).put(function(i){return{name:i.name,readTime:Pa(yn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function Ox(t){return Pt(t,fy)}function Mx(t){return Pt(t,py)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new by(e,r)}getOverlay(e,n){return xc(e).get(kx(this.userId,n)).next(r=>r?l_(this.serializer,r):null)}getOverlays(e,n){const r=si();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new pT(n,o);i.push(this.St(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(on(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xc(e).Z(SS,a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=si(),s=on(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xc(e).J(SS,o).next(a=>{for(const l of a){const u=l_(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=si();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xc(e).ee({index:GM,range:a},(l,u,c)=>{const d=l_(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}St(e,n){return xc(e).put(function(i,s,o){const[a,l,u]=kx(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:og(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function xc(t){return Pt(t,my)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{bt(e){return Pt(e,sT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Qe(e.integerValue));else if("doubleValue"in e){const r=Qe(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),od(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ki(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(qi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?oL(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):yy(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):te(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=wu,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Qe(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),q.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Yo.Kt=new Yo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=255;function cq(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Lx(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=cq(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class hq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=Lx(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=Lx(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(cl),this.sn(255)}_n(){this.an(cl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===cl?(this.sn(cl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===cl?(this.an(cl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dq{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class fq{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ac{constructor(){this.cn=new hq,this.ln=new dq(this.cn),this.hn=new fq(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Jo(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Gp(this.En),directionalValue:Gp(this.dn),orderedDocumentKey:Gp(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Rs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Nx(t.En,e.En),n!==0?n:(n=Nx(t.dn,e.dn),n!==0?n:q.comparator(t.In,e.In)))}function Nx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Gp(t){return wM()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function Vx(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class Fx{constructor(e){this.mn=new Fe((n,r)=>nt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ne(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=vS(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ho(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Fe(nt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new jp(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new jp(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new jp(r.field,r.dir==="asc"?0:1)));return new Ym(Ym.UNKNOWN_ID,this.collectionId,n,sd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){var n,r;if(ne(t instanceof Te||t instanceof Ne,20012),t instanceof Te){if(t instanceof mL){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>Te.create(t.field,"==",s)))||[];return Ne.create(i,"or")}return t}const e=t.filters.map(i=>qL(i));return Ne.create(e,t.op)}function pq(t){if(t.getFilters().length===0)return[];const e=NS(qL(t));return ne(GL(e),7391),MS(e)||LS(e)?[e]:e.getFilters()}function MS(t){return t instanceof Te}function LS(t){return t instanceof Ne&&cT(t)}function GL(t){return MS(t)||LS(t)||function(n){if(n instanceof Ne&&IS(n)){for(const r of n.getFilters())if(!MS(r)&&!LS(r))return!1;return!0}return!1}(t)}function NS(t){if(ne(t instanceof Te||t instanceof Ne,34018),t instanceof Te)return t;if(t.filters.length===1)return NS(t.filters[0]);const e=t.filters.map(r=>NS(r));let n=Ne.create(e,t.op);return n=lg(n),GL(n)?n:(ne(n instanceof Ne,64498),ne(Tu(n),40251),ne(n.filters.length>1,57927),n.filters.reduce((r,i)=>yT(r,i)))}function yT(t,e){let n;return ne(t instanceof Te||t instanceof Ne,38388),ne(e instanceof Te||e instanceof Ne,25473),n=t instanceof Te?e instanceof Te?function(i,s){return Ne.create([i,s],"and")}(t,e):Bx(t,e):e instanceof Te?Bx(e,t):function(i,s){if(ne(i.filters.length>0&&s.filters.length>0,48005),Tu(i)&&Tu(s))return dL(i,s.getFilters());const o=IS(i)?i:s,a=IS(i)?s:i,l=o.filters.map(u=>yT(u,a));return Ne.create(l,"or")}(t,e),lg(n)}function Bx(t,e){if(Tu(e))return dL(e,t.getFilters());{const n=e.filters.map(r=>yT(t,r));return Ne.create(n,"or")}}function lg(t){if(ne(t instanceof Te||t instanceof Ne,11850),t instanceof Te)return t;const e=t.getFilters();if(e.length===1)return lg(e[0]);if(cL(t))return t;const n=e.map(i=>lg(i)),r=[];return n.forEach(i=>{i instanceof Te?r.push(i):i instanceof Ne&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ne.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(){this.Cn=new vT}addToCollectionParentIndex(e,n){return this.Cn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Kn.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class vT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="IndexedDbIndexManager",rp=new Uint8Array(0);class gq{constructor(e,n){this.databaseId=n,this.vn=new vT,this.Fn=new ts(r=>Aa(r),(r,i)=>Bd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:on(i)};return $x(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[NM(n),""],!1,!0);return $x(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ii(o.parent))}return r})}addFieldIndex(e,n){const r=Pc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=dl(e);return s.next(a=>{o.put(Dx(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Pc(e),i=dl(e),s=hl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Pc(e),r=hl(e),i=dl(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return N.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new Fx(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=hl(e);let i=!0;const s=new Map;return N.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_e();const a=[];return N.forEach(s,(l,u)=>{z(jx,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${Aa(n)}`);const c=function(w,x){const O=vS(x);if(O===void 0)return null;for(const D of ig(w,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(u,l),d=function(w,x){const O=new Map;for(const D of Ho(x))for(const b of ig(w,D.fieldPath))switch(b.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),b.value),Array.from(O.values())}return null}(u,l),f=function(w,x){const O=[];let D=!0;for(const b of Ho(x)){const E=b.kind===0?vx(w,b.fieldPath,w.startAt):_x(w,b.fieldPath,w.startAt);O.push(E.value),D&&(D=E.inclusive)}return new Eu(O,D)}(u,l),p=function(w,x){const O=[];let D=!0;for(const b of Ho(x)){const E=b.kind===0?_x(w,b.fieldPath,w.endAt):vx(w,b.fieldPath,w.endAt);O.push(E.value),D&&(D=E.inclusive)}return new Eu(O,D)}(u,l),y=this.On(l,u,f),S=this.On(l,u,p),T=this.Nn(l,u,d),v=this.Bn(l.indexId,c,y,f.inclusive,S,p.inclusive,T);return N.forEach(v,g=>r.Y(g,n.limit).next(w=>{w.forEach(x=>{const O=q.fromSegments(x.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return N.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=pq(Ne.create(e.filters,"and")).map(r=>CS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/u]):rp,p=this.kn(e,f,r[d%u],i),y=this.qn(e,f,s[d%u],o),S=a.map(T=>this.kn(e,f,T,!0));c.push(...this.createRange(p,y,S))}return c}kn(e,n,r,i){const s=new Jo(e,q.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Jo(e,q.empty(),n,r);return i?s.An():s}xn(e,n){const r=new Fx(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return N.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Fe(nt.comparator),c=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Ac;for(const i of Ho(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);Yo.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Ac;return Yo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Ac;return Yo.Kt.Dt(dd(this.databaseId,n),r.Pn(function(s){const o=Ho(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Ac);let s=0;for(const o of Ho(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&fd(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);Yo.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ac;l.seed(a.un()),Yo.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Pc(e),i=dl(e);return(n?r.J(wS,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const f=d?new sd(d.sequenceNumber,new Kn(ka(d.readTime),new q(ii(d.documentKey)),d.largestBatchId)):sd.empty(),p=c.fields.map(([y,S])=>new jp(nt.fromServerFormat(y),S));return new Ym(c.indexId,c.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Pc(e),s=dl(e);return this.Gn(e).next(o=>i.J(wS,IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,l=>s.put(Dx(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,l=>this.zn(e,i,l).next(u=>{const c=this.jn(s,l);return u.isEqual(c)?N.resolve():this.Jn(e,s,l,u,c)}))))})}Hn(e,n,r,i){return hl(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return hl(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=hl(e);let s=new Fe(Rs);return i.ee({index:qM,range:IDBKeyRange.only([r.indexId,this.uid,Gp(this.$n(r,n))])},(o,a)=>{s=s.add(new Jo(r.indexId,n,Vx(a.arrayValue),Vx(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Fe(Rs);const i=this.Qn(n,e);if(i==null)return r;const s=vS(n);if(s!=null){const o=e.data.field(s.fieldPath);if(fd(o))for(const a of o.arrayValue.values||[])r=r.add(new Jo(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Jo(n.indexId,e.key,rp,i));return r}Jn(e,n,r,i,s){z(jx,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,f){const p=l.getIterator(),y=u.getIterator();let S=ul(p),T=ul(y);for(;S||T;){let v=!1,g=!1;if(S&&T){const w=c(S,T);w<0?g=!0:w>0&&(v=!0)}else S!=null?g=!0:v=!0;v?(d(T),T=ul(y)):g?(f(S),S=ul(p)):(S=ul(p),T=ul(y))}}(i,s,Rs,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),N.waitFor(o)}Gn(e){let n=1;return dl(e).ee({index:KM,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Rs(o,a)).filter((o,a,l)=>!a||Rs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Rs(o,e),l=Rs(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,rp,q.empty()),l=i[o+1].Vn(this.uid,rp,q.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Rs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ux)}getMinOffset(e,n){return N.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||te(44426))).next(Ux)}}function $x(t){return Pt(t,ud)}function hl(t){return Pt(t,Sh)}function Pc(t){return Pt(t,iT)}function dl(t){return Pt(t,wh)}function Ux(t){ne(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;tT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XL=41943040;class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t,e,n){const r=t.store(Pr),i=t.store(gu),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(c,d,f)=>(a++,f.delete()));s.push(l.next(()=>{ne(a===1,47070,{batchId:n.batchId})}));const u=[];for(const c of n.mutations){const d=zM(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return N.waitFor(s).next(()=>u)}function ug(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(XL,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);class Iy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ne(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Iy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cs(e).ee({index:oa,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=El(e),o=Cs(e);return o.add({}).next(a=>{ne(typeof a=="number",49019);const l=new dT(a,n,r,i),u=function(p,y,S){const T=S.baseMutations.map(g=>og(p.yt,g)),v=S.mutations.map(g=>og(p.yt,g));return{userId:y,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:T,mutations:v}}(this.serializer,this.userId,l),c=[];let d=new Fe((f,p)=>he(f.canonicalString(),p.canonicalString()));for(const f of i){const p=zM(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),c.push(o.put(u)),c.push(s.put(p,WH))}return d.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),N.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Cs(e).get(n).next(r=>r?(ne(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Qo(this.serializer,r)):null)}er(e,n){return this.Xn[n]?N.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Cs(e).ee({index:oa,range:i},(o,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=r,47524,{tr:r}),s=Qo(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fa;return Cs(e).ee({index:oa,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,fa],[this.userId,Number.POSITIVE_INFINITY]);return Cs(e).J(oa,n).next(r=>r.map(i=>Qo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=$p(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return El(e).ee({range:i},(o,a,l)=>{const[u,c,d]=o,f=ii(c);if(u===this.userId&&n.path.isEqual(f))return Cs(e).get(d).next(p=>{if(!p)throw te(61480,{nr:o,batchId:d});ne(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(Qo(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);const i=[];return n.forEach(s=>{const o=$p(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=El(e).ee({range:a},(u,c,d)=>{const[f,p,y]=u,S=ii(p);f===this.userId&&s.path.isEqual(S)?r=r.add(y):d.done()});i.push(l)}),N.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=$p(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Fe(he);return El(e).ee({range:o},(l,u,c)=>{const[d,f,p]=l,y=ii(f);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(p)):c.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Cs(e).get(s).next(o=>{if(o===null)throw te(35274,{batchId:s});ne(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Qo(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return QL(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return El(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ii(s[1]);i.push(l)}else a.done()}).next(()=>{ne(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return YL(e,this.userId,n)}_r(e){return JL(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:fa,lastStreamToken:""})}}function YL(t,e,n){const r=$p(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return El(t).ee({range:s,X:!0},(a,l,u)=>{const[c,d,f]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Cs(t){return Pt(t,Pr)}function El(t){return Pt(t,gu)}function JL(t){return Pt(t,ad)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Da(0)}static cr(){return new Da(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Da(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>oe.fromTimestamp(new Le(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ne(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return fl(e).ee((o,a)=>{const l=Kc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return fl(e).ee((r,i)=>{const s=Kc(i);n(s)})}lr(e){return Wx(e).get(eg).next(n=>(ne(n!==null,2888),n))}hr(e,n){return Wx(e).put(eg,n)}Pr(e,n){return fl(e).put(HL(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Aa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return fl(e).ee({range:i,index:HM},(o,a,l)=>{const u=Kc(a);Bd(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Bs(e);return n.forEach(o=>{const a=on(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=Bs(e);return N.forEach(n,s=>{const o=on(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Bs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Bs(e);let s=_e();return i.ee({range:r,X:!0},(o,a,l)=>{const u=ii(o[1]),c=new q(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=on(n.path),i=IDBKeyRange.bound([r],[NM(r)],!1,!0);let s=0;return Bs(e).ee({index:rT,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return fl(e).get(n).next(r=>r?Kc(r):null)}}function fl(t){return Pt(t,yu)}function Wx(t){return Pt(t,pa)}function Bs(t){return Pt(t,vu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LruGarbageCollector",vq=1048576;function Kx([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class _q{constructor(e){this.Ir=e,this.buffer=new Fe(Kx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){z(Hx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_o(n)?z(Hx,"Ignoring IndexedDB error during garbage collection: ",n):await $a(n)}await this.Vr(3e5)})}}class wq{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(sr.ce);const r=new _q(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(zx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),vl()<=Ee.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function eN(t,e){return new wq(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e,n){this.db=e,this.garbageCollector=eN(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return ip(e,r)}removeReference(e,n,r){return ip(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ip(e,n)}br(e,n){return function(i,s){let o=!1;return JL(i).te(a=>YL(i,a,s).next(l=>(l&&(o=!0),N.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,oe.min()),Bs(e).delete(function(d){return[0,on(d.path)]}(o))))});i.push(l)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ip(e,n)}Sr(e,n){const r=Bs(e);let i,s=sr.ce;return r.ee({index:rT},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==sr.ce&&n(new q(ii(i)),s),s=u,i=l):s=sr.ce}).next(()=>{s!==sr.ce&&n(new q(ii(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ip(t,e){return Bs(t).put(function(r,i){return{targetId:0,path:on(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.changes=new ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return jo(e).put(r)}removeEntry(e,n,r){return jo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ag(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=ht.newInvalidDocument(n);return jo(e).ee({index:Up,range:IDBKeyRange.only(kc(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:ht.newInvalidDocument(n)};return jo(e).ee({index:Up,range:IDBKeyRange.only(kc(n))},(i,s)=>{r={document:this.Cr(n,s),size:ug(s)}}).next(()=>r)}getEntries(e,n){let r=Un();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Un(),i=new Ze(q.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,ug(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return N.resolve();let i=new Fe(Xx);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(kc(i.first()),kc(i.last())),o=i.getIterator();let a=o.getNext();return jo(e).ee({index:Up,range:s},(l,u,c)=>{const d=q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Xx(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j(kc(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ag(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=Un();for(const d of u){const f=this.Cr(q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&($d(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=Un();const o=Gx(n,r),a=Gx(n,Kn.max());return jo(e).ee({index:WM,range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.Cr(q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new Tq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return qx(e).get(_S).next(n=>(ne(!!n,20021),n))}Dr(e,n){return qx(e).put(_S,n)}Cr(e,n){if(n){const r=aq(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(oe.min())))return r}return ht.newInvalidDocument(e)}}function nN(t){return new Eq(t)}class Tq extends tN{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ts(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Fe((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=Px(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=ug(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=Px(this.Nr.serializer,o.convertToNoDocument(oe.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function qx(t){return Pt(t,ld)}function jo(t){return Pt(t,Zm)}function kc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gx(t,e){const n=e.documentKey.path.toArray();return[t,ag(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Xx(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ih(r.mutation,i,bn.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=si();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Wc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Un();const o=bh(),a=function(){return bh()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ns)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Ih(c.mutation,u,c.mutation.getFieldMask(),Le.now())):o.set(u.key,bn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>a.set(u,new bq(c,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=bh();let i=new Ze((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||bn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=SL();c.forEach(f=>{if(!s.has(f)){const p=CL(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(si());let a=id,l=s;return o.next(u=>N.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?N.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(c=>({batchId:a,changes:wL(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Wc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Wc();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,l=>{const u=function(d,f){return new jd(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,ht.newInvalidDocument(c)))});let a=Wc();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Ih(c.mutation,u,bn.empty(),Le.now()),$d(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return N.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:KL(i.bundledQuery),readTime:yn(i.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(){this.overlays=new Ze(q.comparator),this.qr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=si();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=si(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ze((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=si(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=si(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return N.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pT(n,r));let s=this.qr.get(n);s===void 0&&(s=_e(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,N.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.Qr=new Fe(Nt.$r),this.Ur=new Fe(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new q(new Oe([])),r=new Nt(n,e),i=new Nt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new q(new Oe([])),r=new Nt(n,e),i=new Nt(n,e+1);let s=_e();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(Nt.$r)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?fa:this.tr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),i=new Nt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);return n.forEach(i=>{const s=new Nt(i,0),o=new Nt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),N.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new Nt(new q(s),0);let a=new Fe(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),N.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return N.forEach(n.mutations,i=>{const s=new Nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),i=this.Zr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e){this.ri=e,this.docs=function(){return new Ze(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ht.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Un();const o=n.path,a=new q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||tT(BM(c),r)<=0||(i.has(c.key)||$d(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ii(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Pq(this)}getSize(e){return N.resolve(this.size)}}class Pq extends tN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(e){this.persistence=e,this.si=new ts(n=>Aa(n),Bd),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new _T,this.targetCount=0,this.ai=Da.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),N.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Da(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Pr(n),N.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.ui={},this.overlays={},this.ci=new sr(0),this.li=!1,this.li=!0,this.hi=new Cq,this.referenceDelegate=e(this),this.Pi=new kq(this),this.indexManager=new mq,this.remoteDocumentCache=function(i){return new Aq(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new WL(n),this.Ii=new Iq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new xq(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const i=new Dq(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return N.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Dq extends $M{constructor(e){super(),this.currentSequenceNumber=e}}class Ry{constructor(e){this.persistence=e,this.Ri=new _T,this.Vi=null}static mi(e){return new Ry(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),N.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.fi,r=>{const i=q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return N.or([()=>N.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class cg{constructor(e,n){this.persistence=e,this.pi=new ts(r=>on(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=eN(this,n)}static mi(e,n){return new cg(e,n)}Ei(){}di(e){return N.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return N.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?N.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,oe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),N.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),N.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wp(e.data.value)),n}br(e,n,r){return N.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e){this.serializer=e}k(e,n,r,i){const s=new hy("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(Fd)}(e),function(l){l.createObjectStore(ad,{keyPath:zH}),l.createObjectStore(Pr,{keyPath:ox,autoIncrement:!0}).createIndex(oa,ax,{unique:!0}),l.createObjectStore(gu)}(e),Qx(e),function(l){l.createObjectStore(Ko)}(e));let o=N.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(vu),l.deleteObjectStore(yu),l.deleteObjectStore(pa)}(e),Qx(e)),o=o.next(()=>function(l){const u=l.store(pa),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return u.put(eg,c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Pr).J().next(d=>{l.deleteObjectStore(Pr),l.createObjectStore(Pr,{keyPath:ox,autoIncrement:!0}).createIndex(oa,ax,{unique:!0});const f=u.store(Pr),p=d.map(y=>f.put(y));return N.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(_u,{keyPath:JH})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(ld)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(fy,{keyPath:ZH})})(e),function(l){l.createObjectStore(py,{keyPath:eK})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(my,{keyPath:aK});u.createIndex(SS,lK,{unique:!1}),u.createIndex(GM,uK,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Zm,{keyPath:HH});u.createIndex(Up,KH),u.createIndex(WM,qH)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Ko))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(iT,{keyPath:tK,autoIncrement:!0}).createIndex(wS,nK,{unique:!1}),l.createObjectStore(wh,{keyPath:rK}).createIndex(KM,iK,{unique:!1}),l.createObjectStore(Sh,{keyPath:sK}).createIndex(qM,oK,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(wh).clear()}).next(()=>{n.objectStore(Sh).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(sT,{keyPath:cK})})(e)})),r<18&&i>=18&&wM()&&(o=o.next(()=>{n.objectStore(wh).clear()}).next(()=>{n.objectStore(Sh).clear()})),o}wi(e){let n=0;return e.store(Ko).ee((r,i)=>{n+=ug(i)}).next(()=>{const r={byteSize:n};return e.store(ld).put(_S,r)})}yi(e){const n=e.store(ad),r=e.store(Pr);return n.J().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,fa],[s.userId,s.lastAcknowledgedBatchId]);return r.J(oa,o).next(a=>N.forEach(a,l=>{ne(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=Qo(this.serializer,l);return QL(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(vu),r=e.store(Ko);return e.store(pa).get(eg).next(i=>{const s=[];return r.ee((o,a)=>{const l=new Oe(o),u=function(d){return[0,on(d)]}(l);s.push(n.get(u).next(c=>c?N.resolve():(d=>n.put({targetId:0,path:on(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>N.waitFor(s))})}bi(e,n){e.createObjectStore(ud,{keyPath:YH});const r=n.store(ud),i=new vT,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:on(l)})}};return n.store(Ko).ee({X:!0},(o,a)=>{const l=new Oe(o);return s(l.popLast())}).next(()=>n.store(gu).ee({X:!0},([o,a,l],u)=>{const c=ii(a);return s(c.popLast())}))}Di(e){const n=e.store(yu);return n.ee((r,i)=>{const s=Kc(i),o=HL(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(Ko),i=[];return r.ee((s,o)=>{const a=n.store(Zm),l=function(d){return d.document?new q(Oe.fromString(d.document.name).popFirst(5)):d.noDocument?q.fromSegments(d.noDocument.path):d.unknownDocument?q.fromSegments(d.unknownDocument.path):te(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>N.waitFor(i))}Fi(e,n){const r=n.store(Pr),i=nN(this.serializer),s=new wT(Ry.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??_e();Qo(this.serializer,l).keys().forEach(c=>u=u.add(c)),a.set(l.userId,u)}),N.forEach(a,(l,u)=>{const c=new Ht(u),d=by.wt(this.serializer,c),f=s.getIndexManager(c),p=Iy.wt(c,this.serializer,f,s.referenceDelegate);return new rN(i,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new ES(n,sr.ce),l).next()})})}}function Qx(t){t.createObjectStore(vu,{keyPath:XH}).createIndex(rT,QH,{unique:!0}),t.createObjectStore(yu,{keyPath:"targetId"}).createIndex(HM,GH,{unique:!0}),t.createObjectStore(pa)}const xs="IndexedDbPersistence",u_=18e5,c_=5e3,h_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mq="main";class ST{constructor(e,n,r,i,s,o,a,l,u,c,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=c,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!ST.v())throw new H(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sq(this,i),this.$i=n+Mq,this.serializer=new WL(l),this.Ui=new so(this.$i,this.Ni,new Oq(this.serializer)),this.hi=new uq,this.Pi=new yq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nN(this.serializer),this.Ii=new lq,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,c===!1&&fn(xs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,h_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new sr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(_o(e))return z(xs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z(xs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Dc(e).get(ll).next(n=>N.resolve(this.es(n)))}ts(e){return sp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,u_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Pt(n,_u);return r.J().next(i=>{const s=this.ss(i,u_),o=i.filter(a=>s.indexOf(a)===-1);return N.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?N.resolve(!0):Dc(e).get(ll).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,c_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,h_);return!1}}return!(!this.networkEnabled||!this.inForeground)||sp(e).J().next(r=>this.ss(r,c_).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&z(xs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Fd,_u],e=>{const n=new ES(e,sr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>sp(e).J().next(n=>this.ss(n,u_).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Iy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gq(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return by.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){z(xs,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?fK:l===17?JM:l===16?dK:l===15?oT:l===14?YM:l===13?QM:l===12?hK:l===11?XM:void te(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new ES(a,this.ci?this.ci.next():sr.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new H(j.FAILED_PRECONDITION,jM);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Dc(e).get(ll).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,c_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(j.FAILED_PRECONDITION,h_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dc(e).put(ll,n)}static v(){return so.v()}Zi(e){const n=Dc(e);return n.get(ll).next(r=>this.es(r)?(z(xs,"Releasing primary lease."),n.delete(ll)):N.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(fn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;_M()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return z(xs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fn(xs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dc(t){return Pt(t,Fd)}function sp(t){return Pt(t,_u)}function Lq(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ET(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _M()?8:UM(At())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Nq;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(vl()<=Ee.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),N.resolve()):(vl()<=Ee.DEBUG&&z("QueryEngine","Query:",_l(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(vl()<=Ee.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):N.resolve())}ys(e,n){if(wx(n))return N.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=AS(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,AS(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return wx(n)||i.isEqual(oe.min())?N.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?N.resolve(null):(vl()<=Ee.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_l(n)),this.vs(e,o,n,NH(i,id)).next(a=>a))})}Ds(e,n){let r=new Fe(vL(e));return n.forEach((i,s)=>{$d(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return vl()<=Ee.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",_l(n)),this.ps.getDocumentsMatchingQuery(e,n,Kn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="LocalStore",Vq=3e8;class Fq{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ze(he),this.xs=new ts(s=>Aa(s),Bd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function sN(t,e,n,r){return new Fq(t,e,n,r)}async function oN(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function Bq(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let p=N.resolve();return f.forEach(y=>{p=p.next(()=>c.getEntry(l,y)).next(S=>{const T=u.docVersions.get(y);ne(T!==null,48541),S.version.compareTo(T)<0&&(d.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),c.addEntry(S)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function aN(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jq(t,e){const n=de(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(wt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(d,p),function(S,T,v){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=Vq?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,p,c)&&a.push(n.Pi.updateTargetData(s,p))});let l=Un(),u=_e();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push($q(s,o,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!r.isEqual(oe.min())){const c=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function $q(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Un();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z(TT,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function Uq(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fa),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zq(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Oi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function VS(t,e,n){const r=de(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!_o(o))throw o;z(TT,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Yx(t,e,n){const r=de(t);let i=oe.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=de(l),f=d.xs.get(c);return f!==void 0?N.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,c)}(r,o,cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:oe.min(),n?s:_e())).next(a=>(Wq(r,xK(e),a),{documents:a,Qs:s})))}function Wq(t,e,n){let r=t.Os.get(e)||oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Jx{constructor(){this.activeTargetIds=MK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lN{constructor(){this.Mo=new Jx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="ConnectivityMonitor";class eA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){z(Zx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){z(Zx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op=null;function FS(){return op===null?op=function(){return 268435456+Math.round(2147483648*Math.random())}():op++,"0x"+op.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="RestConnection",Kq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===tg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=FS(),a=this.zo(e,n.toUriEncodedString());z(d_,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),c=Vu(u);return this.Jo(e,a,l,r,c).then(d=>(z(d_,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Ca(d_,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Kq[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class Xq extends qq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=FS();return new Promise((a,l)=>{const u=new AM;u.setWithCredentials(!0),u.listenOnce(PM.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Bp.NO_ERROR:const d=u.getResponseJson();z(Jt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Bp.TIMEOUT:z(Jt,`RPC '${e}' ${o} timed out`),l(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case Bp.HTTP_ERROR:const f=u.getStatus();if(z(Jt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const S=function(v){const g=v.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(g)>=0?g:j.UNKNOWN}(y.status);l(new H(S,y.message))}else l(new H(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(j.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{z(Jt,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);z(Jt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}T_(e,n,r){const i=FS(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OM(),a=DM(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");z(Jt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.I_(d);let f=!1,p=!1;const y=new Gq({Yo:T=>{p?z(Jt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(z(Jt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),z(Jt,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},Zo:()=>d.close()}),S=(T,v,g)=>{T.listen(v,w=>{try{g(w)}catch(x){setTimeout(()=>{throw x},0)}})};return S(d,zc.EventType.OPEN,()=>{p||(z(Jt,`RPC '${e}' stream ${i} transport opened.`),y.o_())}),S(d,zc.EventType.CLOSE,()=>{p||(p=!0,z(Jt,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(d))}),S(d,zc.EventType.ERROR,T=>{p||(p=!0,Ca(Jt,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),y.a_(new H(j.UNAVAILABLE,"The operation could not be completed")))}),S(d,zc.EventType.MESSAGE,T=>{var v;if(!p){const g=T.data[0];ne(!!g,16349);const w=g,x=(w==null?void 0:w.error)||((v=w[0])==null?void 0:v.error);if(x){z(Jt,`RPC '${e}' stream ${i} received error:`,x);const O=x.status;let D=function(R){const C=mt[R];if(C!==void 0)return PL(C)}(O),b=x.message;D===void 0&&(D=j.INTERNAL,b="Unknown error status: "+O+" with message "+x.message),p=!0,y.a_(new H(D,b)),d.close()}else z(Jt,`RPC '${e}' stream ${i} received:`,g),y.u_(g)}}),S(a,kM.STAT_EVENT,T=>{T.stat===gS.PROXY?z(Jt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===gS.NOPROXY&&z(Jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(){return typeof window<"u"?window:null}function Xp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){return new YK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="PersistentStream";class cN{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(fn(n.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return z(tA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(z(tA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yq extends cN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eq(this.serializer,e),r=function(s){if(!("targetChange"in s))return oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?yn(o.readTime):oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=DS(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=rg(l)?{documents:FL(s,l)}:{query:BL(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OL(s,o.resumeToken);const u=PS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Ru(s,o.snapshotVersion.toTimestamp());const u=PS(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=nq(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=DS(this.serializer),n.removeTarget=e,this.q_(n)}}class Jq extends cN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=tq(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=DS(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>og(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{}class e7 extends Zq{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,kS(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,kS(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class t7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fn(n),this.aa=!1):z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="RemoteStore";class n7{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ua(this)&&(z(Oa,"Restarting streams for network reachability change."),await async function(l){const u=de(l);u.Ea.add(4),await zd(u),u.Ra.set("Unknown"),u.Ea.delete(4),await xy(u)}(this))})}),this.Ra=new t7(r,i)}}async function xy(t){if(Ua(t))for(const e of t.da)await e(!0)}async function zd(t){for(const e of t.da)await e(!1)}function hN(t,e){const n=de(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),CT(n)?RT(n):$u(n).O_()&&IT(n,e))}function bT(t,e){const n=de(t),r=$u(n);n.Ia.delete(e),r.O_()&&dN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ua(n)&&n.Ra.set("Unknown"))}function IT(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$u(t).Y_(e)}function dN(t,e){t.Va.Ue(e),$u(t).Z_(e)}function RT(t){t.Va=new qK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$u(t).start(),t.Ra.ua()}function CT(t){return Ua(t)&&!$u(t).x_()&&t.Ia.size>0}function Ua(t){return de(t).Ea.size===0}function fN(t){t.Va=void 0}async function r7(t){t.Ra.set("Online")}async function i7(t){t.Ia.forEach((e,n)=>{IT(t,e)})}async function s7(t,e){fN(t),CT(t)?(t.Ra.ha(e),RT(t)):t.Ra.set("Unknown")}async function o7(t,e,n){if(t.Ra.set("Online"),e instanceof DL&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){z(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hg(t,r)}else if(e instanceof qp?t.Va.Ze(e):e instanceof kL?t.Va.st(e):t.Va.tt(e),!n.isEqual(oe.min()))try{const r=await aN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(wt.EMPTY_BYTE_STRING,c.snapshotVersion)),dN(s,l);const d=new Oi(c.target,l,u,c.sequenceNumber);IT(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){z(Oa,"Failed to raise snapshot:",r),await hg(t,r)}}async function hg(t,e,n){if(!_o(e))throw e;t.Ea.add(1),await zd(t),t.Ra.set("Offline"),n||(n=()=>aN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z(Oa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xy(t)})}function pN(t,e){return e().catch(n=>hg(t,n,e))}async function Wd(t){const e=de(t),n=ho(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fa;for(;a7(e);)try{const i=await Uq(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,l7(e,i)}catch(i){await hg(e,i)}mN(e)&&gN(e)}function a7(t){return Ua(t)&&t.Ta.length<10}function l7(t,e){t.Ta.push(e);const n=ho(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mN(t){return Ua(t)&&!ho(t).x_()&&t.Ta.length>0}function gN(t){ho(t).start()}async function u7(t){ho(t).ra()}async function c7(t){const e=ho(t);for(const n of t.Ta)e.ea(n.mutations)}async function h7(t,e,n){const r=t.Ta.shift(),i=fT.from(r,e,n);await pN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Wd(t)}async function d7(t,e){e&&ho(t).X_&&await async function(r,i){if(function(o){return WK(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();ho(r).B_(),await pN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Wd(r)}}(t,e),mN(t)&&gN(t)}async function nA(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),z(Oa,"RemoteStore received new credentials");const r=Ua(n);n.Ea.add(3),await zd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xy(n)}async function f7(t,e){const n=de(t);e?(n.Ea.delete(2),await xy(n)):e||(n.Ea.add(2),await zd(n),n.Ra.set("Unknown"))}function $u(t){return t.ma||(t.ma=function(n,r,i){const s=de(n);return s.sa(),new Yq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:r7.bind(null,t),t_:i7.bind(null,t),r_:s7.bind(null,t),H_:o7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),CT(t)?RT(t):t.Ra.set("Unknown")):(await t.ma.stop(),fN(t))})),t.ma}function ho(t){return t.fa||(t.fa=function(n,r,i){const s=de(n);return s.sa(),new Jq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:u7.bind(null,t),r_:d7.bind(null,t),ta:c7.bind(null,t),na:h7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wd(t)):(await t.fa.stop(),t.Ta.length>0&&(z(Oa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new xT(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function AT(t,e){if(fn("AsyncQueue",`${e}: ${t}`),_o(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{static emptySet(e){return new eu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Wc(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.ga=new Ze(q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cu{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Cu(e,n,eu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_y(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class m7{constructor(){this.queries=iA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=de(n),s=i.queries;i.queries=iA(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function iA(){return new ts(t=>yL(t),_y)}async function yN(t,e){const n=de(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new p7,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=AT(o,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&PT(n)}async function vN(t,e){const n=de(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function g7(t,e){const n=de(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&PT(n)}function y7(t,e,n){const r=de(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function PT(t){t.Ca.forEach(e=>{e.next()})}var BS,sA;(sA=BS||(BS={})).Ma="default",sA.Cache="cache";class _N{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Cu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==BS.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.key=e}}class SN{constructor(e){this.key=e}}class v7{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=vL(e),this.tu=new eu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new rA,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=$d(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),S=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let T=!1;f&&p?f.data.isEqual(p.data)?y!==S&&(r.track({type:3,doc:p}),T=!0):this.su(f,p)||(r.track({type:2,doc:p}),T=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),T=!0):f&&!p&&(r.track({type:1,doc:f}),T=!0,(l||u)&&(a=!0)),T&&(p?(o=o.add(p),s=S?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((c,d)=>function(p,y){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:T})}};return S(p)-S(y)}(c.type,d.type)||this.eu(c.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Cu(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new SN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new wN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Cu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kT="SyncEngine";class _7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class w7{constructor(e){this.key=e,this.hu=!1}}class S7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ts(a=>yL(a),_y),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(q.comparator),this.Au=new Map,this.Ru=new _T,this.Vu={},this.mu=new Map,this.fu=Da.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E7(t,e,n=!0){const r=CN(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await EN(r,e,n,!0),i}async function T7(t,e){const n=CN(t);await EN(n,e,!0,!1)}async function EN(t,e,n,r){const i=await zq(t.localStore,cr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await b7(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&hN(t.remoteStore,i),a}async function b7(t,e,n,r,i){t.pu=(d,f,p)=>async function(S,T,v,g){let w=T.view.ru(v);w.Cs&&(w=await Yx(S.localStore,T.query,!1).then(({documents:b})=>T.view.ru(b,w)));const x=g&&g.targetChanges.get(T.targetId),O=g&&g.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(w,S.isPrimaryClient,x,O);return aA(S,T.targetId,D.au),D.snapshot}(t,d,f,p);const s=await Yx(t.localStore,e,!0),o=new v7(e,s.Qs),a=o.ru(s.documents),l=Ud.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);aA(t,n,u.au);const c=new _7(e,n,o);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function I7(t,e,n){const r=de(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!_y(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await VS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bT(r.remoteStore,i.targetId),jS(r,i.targetId)}).catch($a)):(jS(r,i.targetId),await VS(r.localStore,i.targetId,!0))}async function R7(t,e){const n=de(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bT(n.remoteStore,r.targetId))}async function C7(t,e,n){const r=xN(t);try{const i=await function(o,a){const l=de(o),u=Le.now(),c=a.reduce((p,y)=>p.add(y.key),_e());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Un(),S=_e();return l.Ns.getEntries(p,c).next(T=>{y=T,y.forEach((v,g)=>{g.isValidDocument()||(S=S.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(T=>{d=T;const v=[];for(const g of a){const w=UK(g,d.get(g.key).overlayedDocument);w!=null&&v.push(new ns(g.key,w,lL(w.value.mapValue),rn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,v,a)}).next(T=>{f=T;const v=T.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(p,T.batchId,v)})}).then(()=>({batchId:f.batchId,changes:wL(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ze(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Hd(r,i.changes),await Wd(r.remoteStore)}catch(i){const s=AT(i,"Failed to persist write");n.reject(s)}}async function TN(t,e){const n=de(t);try{const r=await jq(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ne(o.hu,14607):i.removedDocuments.size>0&&(ne(o.hu,42227),o.hu=!1))}),await Hd(n,r,e)}catch(r){await $a(r)}}function oA(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&PT(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x7(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ze(q.comparator);o=o.insert(s,ht.newNoDocument(s,oe.min()));const a=_e().add(s),l=new Ty(oe.min(),new Map,new Ze(he),o,a);await TN(r,l),r.du=r.du.remove(s),r.Au.delete(e),DT(r)}else await VS(r.localStore,e,!1).then(()=>jS(r,e,n)).catch($a)}async function A7(t,e){const n=de(t),r=e.batch.batchId;try{const i=await Bq(n.localStore,e);IN(n,r,null),bN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hd(n,i)}catch(i){await $a(i)}}async function P7(t,e,n){const r=de(t);try{const i=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(ne(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);IN(r,e,n),bN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hd(r,i)}catch(i){await $a(i)}}function bN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function IN(t,e,n){const r=de(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function jS(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||RN(t,r)})}function RN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bT(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),DT(t))}function aA(t,e,n){for(const r of n)r instanceof wN?(t.Ru.addReference(r.key,e),k7(t,r)):r instanceof SN?(z(kT,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||RN(t,r.key)):te(19791,{wu:r})}function k7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(z(kT,"New document in limbo: "+n),t.Eu.add(r),DT(t))}function DT(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(Oe.fromString(e)),r=t.fu.next();t.Au.set(r,new w7(n)),t.du=t.du.insert(n,r),hN(t.remoteStore,new Oi(cr(vy(n.path)),r,"TargetPurposeLimboResolution",sr.ce))}}async function Hd(t,e,n){const r=de(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=ET.As(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const c=de(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(u,f=>N.forEach(f.Es,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>N.forEach(f.ds,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!_o(d))throw d;z(TT,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const p=c.Ms.get(f),y=p.snapshotVersion,S=p.withLastLimboFreeSnapshotVersion(y);c.Ms=c.Ms.insert(f,S)}}}(r.localStore,s))}async function D7(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){z(kT,"User change. New user:",e.toKey());const r=await oN(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new H(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hd(n,r.Ls)}}function O7(t,e){const n=de(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function CN(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x7.bind(null,e),e.Pu.H_=g7.bind(null,e.eventManager),e.Pu.yu=y7.bind(null,e.eventManager),e}function xN(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P7.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sN(this.persistence,new iN,e.initialUser,this.serializer)}Cu(e){return new wT(Ry.mi,this.serializer)}Du(e){return new lN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class M7 extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ne(this.persistence.referenceDelegate instanceof cg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZL(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new wT(r=>cg.mi(r,n),this.serializer)}}class L7 extends gd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await xN(this.xu.syncEngine),await Wd(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return sN(this.persistence,new iN,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new ZL(r,e.asyncQueue,n)}Mu(e,n){const r=new jH(n,this.persistence);return new BH(e.asyncQueue,r)}Cu(e){const n=Lq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new ST(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Qq(),Xp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new lN}}class dg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D7.bind(null,this.syncEngine),await f7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m7}()}createDatastore(e){const n=Cy(e.databaseInfo.databaseId),r=function(s){return new Xq(s)}(e.databaseInfo);return function(s,o,a,l){return new e7(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new n7(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>oA(this.syncEngine,n,0),function(){return eA.v()?new eA:new Hq}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new S7(i,s,o,a,l,u);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=de(i);z(Oa,"RemoteStore shutting down."),s.Ea.add(5),await zd(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}dg.provider={build:()=>new dg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="FirestoreClient";class N7{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ht.UNAUTHENTICATED,this.clientId=eT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{z(fo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(z(fo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=AT(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function f_(t,e){t.asyncQueue.verifyOperationInProgress(),z(fo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await V7(t);z(fo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>nA(e.remoteStore,i)),t._onlineComponents=e}async function V7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z(fo,"Using user provided OfflineComponentProvider");try{await f_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ca("Error using user provided cache. Falling back to memory cache: "+n),await f_(t,new gd)}}else z(fo,"Using default OfflineComponentProvider"),await f_(t,new M7(void 0));return t._offlineComponents}async function PN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z(fo,"Using user provided OnlineComponentProvider"),await lA(t,t._uninitializedComponentsProvider._online)):(z(fo,"Using default OnlineComponentProvider"),await lA(t,new dg))),t._onlineComponents}function F7(t){return PN(t).then(e=>e.syncEngine)}async function kN(t){const e=await PN(t),n=e.eventManager;return n.onListen=E7.bind(null,e.syncEngine),n.onUnlisten=I7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=R7.bind(null,e.syncEngine),n}function B7(t,e,n={}){const r=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new AN({next:f=>{c.Nu(),o.enqueueAndForget(()=>vN(s,d));const p=f.docs.has(a);!p&&f.fromCache?u.reject(new H(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?u.reject(new H(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new _N(vy(a.path),c,{includeMetadataChanges:!0,qa:!0});return yN(s,d)}(await kN(t),t.asyncQueue,e,n,r)),r.promise}function j7(t,e,n={}){const r=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new AN({next:f=>{c.Nu(),o.enqueueAndForget(()=>vN(s,d)),f.fromCache&&l.source==="server"?u.reject(new H(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new _N(a,c,{includeMetadataChanges:!0,qa:!0});return yN(s,d)}(await kN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="firestore.googleapis.com",cA=!0;class hA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ON,this.ssl=cA}else this.host=e.host,this.ssl=e.ssl??cA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vq)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new IH;switch(r.type){case"firstParty":return new AH(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uA.get(n);r&&(z("ComponentProvider","Removing Datastore"),uA.delete(n),r.terminate())}(this),Promise.resolve()}}function $7(t,e,n,r={}){var u;t=mr(t,Ay);const i=Vu(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(gM(`https://${a}`),yM("Firestore",!0)),s.host!==ON&&s.host!==a&&Ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!ba(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=Ht.MOCK_USER;else{c=ZW(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new H(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ht(f)}t._authCredentials=new RH(new LM(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uu(this.firestore,e,this._query)}}class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vd(n,pt._jsonSchema))return new pt(e,r||null,new q(Oe.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:_t("string",pt._jsonSchemaVersion),referencePath:_t("string")};class oo extends Uu{constructor(e,n,r){super(e,n,vy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new q(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function OT(t,e,...n){if(t=Bt(t),VM("collection","path",e),t instanceof Ay){const r=Oe.fromString(e,...n);return tx(r),new oo(t,null,r)}{if(!(t instanceof pt||t instanceof oo))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return tx(r),new oo(t.firestore,null,r)}}function zu(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=eT.newId()),VM("doc","path",e),t instanceof Ay){const r=Oe.fromString(e,...n);return ex(r),new pt(t,null,new q(r))}{if(!(t instanceof pt||t instanceof oo))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return ex(r),new pt(t.firestore,t instanceof oo?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="AsyncQueue";class fA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uN(this,"async_queue_retry"),this._c=()=>{const r=Xp();r&&z(dA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Xp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ui;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_o(e))throw e;z(dA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,fn("INTERNAL UNHANDLED ERROR: ",pA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=xT.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:pA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class So extends Ay{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fA(e),this._firestoreClient=void 0,await e}}}function U7(t,e){const n=typeof t=="object"?t:IM(),r=typeof t=="string"?t:tg,i=JE(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=YW("firestore");s&&$7(i,...s)}return i}function MT(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MN(t),t._firestoreClient}function MN(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,c){return new mK(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,DN(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new N7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function z7(t,e){Ca("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return W7(t,dg.provider,{build:r=>new L7(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function W7(t,e,n){if((t=mr(t,So))._firestoreClient||t._terminated)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new H(j.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},MN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rr(wt.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rr(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vd(e,rr._jsonSchema))return rr.fromBase64String(e.bytes)}}rr._jsonSchemaVersion="firestore/bytes/1.0",rr._jsonSchema={type:_t("string",rr._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(Vd(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:_t("string",ci._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vd(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new hi(e.vectorValues);throw new H(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:_t("string",hi._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=/^__.*__$/;class K7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class LN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class NT{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new NT({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NN(this.Ac)&&H7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cy(e)}Cc(e,n,r,i=!1){return new NT({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ky(t){const e=t._freezeSettings(),n=Cy(t._databaseId);return new q7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VN(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);VT("Data must be an object, but it was:",o,r);const a=FN(r,o);let l,u;if(s.merge)l=new bn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=$S(e,d,n);if(!o.contains(f))throw new H(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);jN(c,f)||c.push(f)}l=new bn(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new K7(new nn(a),l,u)}class Dy extends LT{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dy}}function G7(t,e,n,r){const i=t.Cc(1,e,n);VT("Data must be an object, but it was:",i,r);const s=[],o=nn.empty();wo(r,(l,u)=>{const c=FT(e,l,n);u=Bt(u);const d=i.yc(c);if(u instanceof Dy)s.push(c);else{const f=Kd(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new bn(s);return new LN(o,a,i.fieldTransforms)}function X7(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[$S(e,r,n)],l=[i];if(s.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push($S(e,s[f])),l.push(s[f+1]);const u=[],c=nn.empty();for(let f=a.length-1;f>=0;--f)if(!jN(u,a[f])){const p=a[f];let y=l[f];y=Bt(y);const S=o.yc(p);if(y instanceof Dy)u.push(p);else{const T=Kd(y,S);T!=null&&(u.push(p),c.set(p,T))}}const d=new bn(u);return new LN(c,d,o.fieldTransforms)}function Q7(t,e,n,r=!1){return Kd(n,t.Cc(r?4:3,e))}function Kd(t,e){if(BN(t=Bt(t)))return VT("Unsupported field value:",e,t),FN(t,e);if(t instanceof LT)return function(r,i){if(!NN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Kd(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Le.fromDate(r);return{timestampValue:Ru(i.serializer,s)}}if(r instanceof Le){const s=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ru(i.serializer,s)}}if(r instanceof ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rr)return{bytesValue:OL(i.serializer,r._byteString)};if(r instanceof pt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hi)return function(o,a){return{mapValue:{fields:{[lT]:{stringValue:uT},[wu]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return hT(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${cy(r)}`)}(t,e)}function FN(t,e){const n={};return ZM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,(r,i)=>{const s=Kd(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function BN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof ci||t instanceof rr||t instanceof pt||t instanceof LT||t instanceof hi)}function VT(t,e,n){if(!BN(n)||!FM(n)){const r=cy(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function $S(t,e,n){if((e=Bt(e))instanceof Py)return e._internalPath;if(typeof e=="string")return FT(t,e);throw fg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Y7=new RegExp("[~\\*/\\[\\]]");function FT(t,e,n){if(e.search(Y7)>=0)throw fg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Py(...e.split("."))._internalPath}catch{throw fg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(j.INVALID_ARGUMENT,a+t+l)}function jN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(UN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J7 extends $N{data(){return super.data()}}function UN(t,e){return typeof e=="string"?FT(t,e):e instanceof Py?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BT{}class eG extends BT{}function zN(t,e,...n){let r=[];e instanceof BT&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof $T).length,a=s.filter(l=>l instanceof jT).length;if(o>1||o>0&&a>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jT extends eG{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jT(e,n,r)}_apply(e){const n=this._parse(e);return WN(e._query,n),new Uu(e.firestore,e.converter,xS(e._query,n))}_parse(e){const n=ky(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){gA(d,c);const y=[];for(const S of d)y.push(mA(l,s,S));f={arrayValue:{values:y}}}else f=mA(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||gA(d,c),f=Q7(a,o,d,c==="in"||c==="not-in");return Te.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class $T extends BT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $T(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ne.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)WN(o,l),o=xS(o,l)}(e._query,n),new Uu(e.firestore,e.converter,xS(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function mA(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gL(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!q.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dd(t,new q(r))}if(n instanceof pt)return dd(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cy(n)}.`)}function gA(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tG{convertValue(e,n="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[wu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Qe(o.doubleValue));return new hi(n)}convertGeoPoint(e){return new ci(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cd(e));default:return null}}convertTimestamp(e){const n=Ki(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);ne(zL(r),9688,{name:e});const i=new xa(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||fn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends $N{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(UN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:_t("string",ga._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class Qp extends ga{data(e={}){return super.data(e)}}class tu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qp(this._firestore,this._userDataWriter,r.key,r,new qc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Qp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Qp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:nG(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(t){t=mr(t,pt);const e=mr(t.firestore,So);return B7(MT(e),t._key).then(n=>aG(e,t,n))}tu._jsonSchemaVersion="firestore/querySnapshot/1.0",tu._jsonSchema={type:_t("string",tu._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class KN extends tG{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function qN(t){t=mr(t,Uu);const e=mr(t.firestore,So),n=MT(e),r=new KN(e);return Z7(t._query),j7(n,t._query).then(i=>new tu(e,r,t,i))}function GN(t,e,n){t=mr(t,pt);const r=mr(t.firestore,So),i=HN(t.converter,e,n);return Oy(r,[VN(ky(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,rn.none())])}function iG(t,e,n,...r){t=mr(t,pt);const i=mr(t.firestore,So),s=ky(i);let o;return o=typeof(e=Bt(e))=="string"||e instanceof Py?X7(s,"updateDoc",t._key,e,n,r):G7(s,"updateDoc",t._key,e),Oy(i,[o.toMutation(t._key,rn.exists(!0))])}function sG(t){return Oy(mr(t.firestore,So),[new Ey(t._key,rn.none())])}function oG(t,e){const n=mr(t.firestore,So),r=zu(t),i=HN(t.converter,e);return Oy(n,[VN(ky(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function Oy(t,e){return function(r,i){const s=new ui;return r.asyncQueue.enqueueAndForget(async()=>C7(await F7(r),i,s)),s.promise}(MT(t),e)}function aG(t,e,n){const r=n.docs.get(e._key),i=new KN(t);return new ga(t,i,e._key,r,new qc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Bu=i})(Fu),pu(new Ia("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new So(new CH(r.getProvider("auth-internal")),new PH(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(u.options.projectId,c)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ro(QC,YC,e),ro(QC,YC,"esm2020")})();function XN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lG=XN,QN=new Ld("auth","Firebase",XN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=new QE("@firebase/auth");function uG(t,...e){pg.logLevel<=Ee.WARN&&pg.warn(`Auth (${Fu}): ${t}`,...e)}function Yp(t,...e){pg.logLevel<=Ee.ERROR&&pg.error(`Auth (${Fu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw UT(t,...e)}function di(t,...e){return UT(t,...e)}function YN(t,e,n){const r={...lG(),[e]:n};return new Ld("auth","Firebase",r).create(e,{appName:t.name})}function Bi(t){return YN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QN.create(t,...e)}function ae(t,e,...n){if(!t)throw UT(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yp(e),new Error(e)}function Gi(t,e){t||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function cG(){return yA()==="http:"||yA()==="https:"}function yA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cG()||i8()||"connection"in navigator)?navigator.onLine:!0}function dG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gi(n>e,"Short delay should be less than long delay!"),this.isMobile=n8()||s8()}get(){return hG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t,e){Gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mG=new qd(3e4,6e4);function rs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function is(t,e,n,r,i={}){return ZN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Nd({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return r8()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Vu(t.emulatorConfig.host)&&(u.credentials="include"),JN.fetch()(await eV(t,t.config.apiHost,n,a),u)})}async function ZN(t,e,n){t._canInitEmulator=!1;const r={...fG,...e};try{const i=new yG(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ap(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ap(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ap(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ap(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw YN(t,c,u);Fr(t,c)}}catch(i){if(i instanceof es)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function Gd(t,e,n,r,i={}){const s=await is(t,e,n,r,i);return"mfaPendingCredential"in s&&Fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function eV(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?zT(t.config,i):`${t.config.apiScheme}://${i}`;return pG.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function gG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),mG.get())})}}function ap(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=di(t,e,r);return i.customData._tokenResponse=n,i}function vA(t){return t!==void 0&&t.enterprise!==void 0}class vG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _G(t,e){return is(t,"GET","/v2/recaptchaConfig",rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(t,e){return is(t,"POST","/v1/accounts:delete",e)}async function mg(t,e){return is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SG(t,e=!1){const n=Bt(t),r=await n.getIdToken(e),i=WT(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Rh(p_(i.auth_time)),issuedAtTime:Rh(p_(i.iat)),expirationTime:Rh(p_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function p_(t){return Number(t)*1e3}function WT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yp("JWT malformed, contained fewer than 3 sections"),null;try{const i=hM(n);return i?JSON.parse(i):(Yp("Failed to decode base64 JWT payload"),null)}catch(i){return Yp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _A(t){const e=WT(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof es&&EG(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rh(this.lastLoginAt),this.creationTime=Rh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(t){var d;const e=t.auth,n=await t.getIdToken(),r=await yd(t,mg(e,{idToken:n}));ae(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?tV(i.providerUserInfo):[],o=IG(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new zS(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function bG(t){const e=Bt(t);await gg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IG(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tV(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RG(t,e){const n=await ZN(t,{},async()=>{const r=Nd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await eV(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Vu(t.emulatorConfig.host)&&(l.credentials="include"),JN.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CG(t,e){return is(t,"POST","/v2/accounts:revokeToken",rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_A(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=_A(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await RG(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new nu;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nu,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Or{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new TG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await yd(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SG(this,e)}reload(){return bG(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Bi(this.auth));const e=await this.getIdToken();return await yd(this,wG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:y,stsTokenManager:S}=n;ae(d&&S,e,"internal-error");const T=nu.fromJSON(this.name,S);ae(typeof d=="string",e,"internal-error"),As(r,e.name),As(i,e.name),ae(typeof f=="boolean",e,"internal-error"),ae(typeof p=="boolean",e,"internal-error"),As(s,e.name),As(o,e.name),As(a,e.name),As(l,e.name),As(u,e.name),As(c,e.name);const v=new Or({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:T,createdAt:u,lastLoginAt:c});return y&&Array.isArray(y)&&(v.providerData=y.map(g=>({...g}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,n,r=!1){const i=new nu;i.updateFromServerResponse(n);const s=new Or({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?tV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new nu;a.updateFromIdToken(r);const l=new Or({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new zS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Map;function Li(t){Gi(t instanceof Function,"Expected a class definition");let e=wA.get(t);return e?(Gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nV.type="NONE";const SA=nV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e,n){return`firebase:${t}:${e}:${n}`}class ru{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await mg(this.auth,{idToken:e}).catch(()=>{});return n?Or._fromGetAccountInfoResponse(this.auth,n,e):null}return Or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ru(Li(SA),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Li(SA);const o=Jp(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await mg(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Or._fromGetAccountInfoResponse(e,f,c)}else d=Or._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ru(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ru(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lV(e))return"Blackberry";if(uV(e))return"Webos";if(iV(e))return"Safari";if((e.includes("chrome/")||sV(e))&&!e.includes("edge/"))return"Chrome";if(aV(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rV(t=At()){return/firefox\//i.test(t)}function iV(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sV(t=At()){return/crios\//i.test(t)}function oV(t=At()){return/iemobile/i.test(t)}function aV(t=At()){return/android/i.test(t)}function lV(t=At()){return/blackberry/i.test(t)}function uV(t=At()){return/webos/i.test(t)}function HT(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xG(t=At()){var e;return HT(t)&&!!((e=window.navigator)!=null&&e.standalone)}function AG(){return o8()&&document.documentMode===10}function cV(t=At()){return HT(t)||aV(t)||uV(t)||lV(t)||/windows phone/i.test(t)||oV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t,e=[]){let n;switch(t){case"Browser":n=EA(At());break;case"Worker":n=`${EA(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kG(t,e={}){return is(t,"GET","/v2/passwordPolicy",rs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=6;class OG{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??DG,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TA(this),this.idTokenSubscription=new TA(this),this.beforeStateQueue=new PG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Li(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ru.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mg(this,{idToken:e}),r=await Or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(nr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Bi(this));const n=e?Bt(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kG(this),n=new OG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ld("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CG(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Li(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await ru.create(this,[Li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&uG(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Eo(t){return Bt(t)}class TA{constructor(e){this.auth=e,this.observer=null,this.addObserver=d8(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let My={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LG(t){My=t}function dV(t){return My.loadJS(t)}function NG(){return My.recaptchaEnterpriseScript}function VG(){return My.gapiScript}function FG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class BG{constructor(){this.enterprise=new jG}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jG{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $G="recaptcha-enterprise",fV="NO_RECAPTCHA";class UG{constructor(e){this.type=$G,this.auth=Eo(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{_G(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new vG(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;vA(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(fV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BG().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&vA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=NG();l.length!==0&&(l+=a),dV(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function bA(t,e,n,r=!1,i=!1){const s=new UG(t);let o;if(i)o=fV;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yg(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await bA(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await bA(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(t,e){const n=JE(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ba(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function WG(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function HG(t,e,n){const r=Eo(t);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=pV(e),{host:o,port:a}=KG(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(ba(u,r.config.emulator)&&ba(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Vu(o)?(gM(`${s}//${o}${l}`),yM("Auth",!0)):qG()}function pV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KG(t){const e=pV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:IA(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:IA(o)}}}function IA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qG(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}async function GG(t,e){return is(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XG(t,e){return Gd(t,"POST","/v1/accounts:signInWithPassword",rs(t,e))}async function QG(t,e){return is(t,"POST","/v1/accounts:sendOobCode",rs(t,e))}async function YG(t,e){return QG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JG(t,e){return Gd(t,"POST","/v1/accounts:signInWithEmailLink",rs(t,e))}async function ZG(t,e){return Gd(t,"POST","/v1/accounts:signInWithEmailLink",rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends KT{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new vd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new vd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,n,"signInWithPassword",XG);case"emailLink":return JG(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,r,"signUpPassword",GG);case"emailLink":return ZG(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t,e){return Gd(t,"POST","/v1/accounts:signInWithIdp",rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eX="http://localhost";class Ma extends KT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Ma(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return iu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,iu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,iu(e,n)}buildRequest(){const e={requestUri:eX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tX(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nX(t){const e=$c(Uc(t)).link,n=e?$c(Uc(e)).deep_link_id:null,r=$c(Uc(t)).deep_link_id;return(r?$c(Uc(r)).link:null)||r||n||e||t}class qT{constructor(e){const n=$c(Uc(e)),r=n.apiKey??null,i=n.oobCode??null,s=tX(n.mode??null);ae(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nX(e);try{return new qT(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.providerId=Wu.PROVIDER_ID}static credential(e,n){return vd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qT.parseLink(n);return ae(r,"argument-error"),vd._fromEmailAndCode(e,r.code,r.tenantId)}}Wu.PROVIDER_ID="password";Wu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends mV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Xd{constructor(){super("facebook.com")}static credential(e){return Ma._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Xd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ma._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $s.credential(n,r)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Xd{constructor(){super("github.com")}static credential(e){return Ma._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com";Us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Xd{constructor(){super("twitter.com")}static credential(e,n){return Ma._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zs.credential(n,r)}catch{return null}}}zs.TWITTER_SIGN_IN_METHOD="twitter.com";zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rX(t,e){return Gd(t,"POST","/v1/accounts:signUp",rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Or._fromIdTokenResponse(e,r,i),o=RA(r);return new La({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RA(r);return new La({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends es{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new vg(e,n,r,i)}}function gV(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vg._fromErrorAndOperation(t,s,e,r):s})}async function iX(t,e,n=!1){const r=await yd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return La._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sX(t,e,n=!1){const{auth:r}=t;if(nr(r.app))return Promise.reject(Bi(r));const i="reauthenticate";try{const s=await yd(t,gV(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=WT(s.idToken);ae(o,r,"internal-error");const{sub:a}=o;return ae(t.uid===a,r,"user-mismatch"),La._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e,n=!1){if(nr(t.app))return Promise.reject(Bi(t));const r="signIn",i=await gV(t,r,e),s=await La._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function oX(t,e){return yV(Eo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(t){const e=Eo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aX(t,e,n){const r=Eo(t);await yg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",YG)}async function lX(t,e,n){if(nr(t.app))return Promise.reject(Bi(t));const r=Eo(t),o=await yg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rX).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vV(t),l}),a=await La._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function uX(t,e,n){return nr(t.app)?Promise.reject(Bi(t)):oX(Bt(t),Wu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vV(t),r})}function cX(t,e,n,r){return Bt(t).onIdTokenChanged(e,n,r)}function hX(t,e,n){return Bt(t).beforeAuthStateChanged(e,n)}function dX(t,e,n,r){return Bt(t).onAuthStateChanged(e,n,r)}function fX(t){return Bt(t).signOut()}const _g="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_g,"1"),this.storage.removeItem(_g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX=1e3,mX=10;class wV extends _V{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);AG()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mX):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wV.type="LOCAL";const gX=wV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV extends _V{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SV.type="SESSION";const EV=SV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ly(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await yX(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ly.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vX{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=GT("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function _X(t){fi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function wX(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SX(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function EX(){return TV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="firebaseLocalStorageDb",TX=1,wg="firebaseLocalStorage",IV="fbase_key";class Qd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ny(t,e){return t.transaction([wg],e?"readwrite":"readonly").objectStore(wg)}function bX(){const t=indexedDB.deleteDatabase(bV);return new Qd(t).toPromise()}function WS(){const t=indexedDB.open(bV,TX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wg,{keyPath:IV})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wg)?e(r):(r.close(),await bX(),e(await WS()))})})}async function CA(t,e,n){const r=Ny(t,!0).put({[IV]:e,value:n});return new Qd(r).toPromise()}async function IX(t,e){const n=Ny(t,!1).get(e),r=await new Qd(n).toPromise();return r===void 0?null:r.value}function xA(t,e){const n=Ny(t,!0).delete(e);return new Qd(n).toPromise()}const RX=800,CX=3;class RV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await WS(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ly._getInstance(EX()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await wX(),!this.activeServiceWorker)return;this.sender=new vX(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await WS();return await CA(e,_g,"1"),await xA(e,_g),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>CA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>IX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ny(i,!1).getAll();return new Qd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RV.type="LOCAL";const xX=RV;new qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(t,e){return e?Li(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT extends KT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return iu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return iu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PX(t){return yV(t.auth,new XT(t),t.bypassAuthState)}function kX(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),sX(n,new XT(t),t.bypassAuthState)}async function DX(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),iX(n,new XT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PX;case"linkViaPopup":case"linkViaRedirect":return DX;case"reauthViaPopup":case"reauthViaRedirect":return kX;default:Fr(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX=new qd(2e3,1e4);class Fl extends CV{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fl.currentPopupAction&&Fl.currentPopupAction.cancel(),Fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=GT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OX.get())};e()}}Fl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MX="pendingRedirect",Zp=new Map;class LX extends CV{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zp.get(this.auth._key());if(!e){try{const r=await NX(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zp.set(this.auth._key(),e)}return this.bypassAuthState||Zp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NX(t,e){const n=BX(e),r=FX(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function VX(t,e){Zp.set(t._key(),e)}function FX(t){return Li(t._redirectPersistence)}function BX(t){return Jp(MX,t.config.apiKey,t.name)}async function jX(t,e,n=!1){if(nr(t.app))return Promise.reject(Bi(t));const r=Eo(t),i=AX(r,e),o=await new LX(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $X=10*60*1e3;class UX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zX(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xV(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(di(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$X&&this.cachedEventUids.clear(),this.cachedEventUids.has(AA(e))}saveEventToCache(e){this.cachedEventUids.add(AA(e)),this.lastProcessedEventTime=Date.now()}}function AA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zX(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WX(t,e={}){return is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KX=/^https?/;async function qX(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WX(t);for(const n of e)try{if(GX(n))return}catch{}Fr(t,"unauthorized-domain")}function GX(t){const e=US(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KX.test(n))return!1;if(HX.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XX=new qd(3e4,6e4);function PA(){const t=fi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QX(t){return new Promise((e,n)=>{var i,s,o;function r(){PA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PA(),n(di(t,"network-request-failed"))},timeout:XX.get()})}if((s=(i=fi().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=fi().gapi)!=null&&o.load)r();else{const a=FG("iframefcb");return fi()[a]=()=>{gapi.load?r():n(di(t,"network-request-failed"))},dV(`${VG()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw em=null,e})}let em=null;function YX(t){return em=em||QX(t),em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JX=new qd(5e3,15e3),ZX="__/auth/iframe",eQ="emulator/auth/iframe",tQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rQ(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zT(e,eQ):`https://${t.config.authDomain}/${ZX}`,r={apiKey:e.apiKey,appName:t.name,v:Fu},i=nQ.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Nd(r).slice(1)}`}async function iQ(t){const e=await YX(t),n=fi().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:rQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tQ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=di(t,"network-request-failed"),a=fi().setTimeout(()=>{s(o)},JX.get());function l(){fi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oQ=500,aQ=600,lQ="_blank",uQ="http://localhost";class kA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cQ(t,e,n,r=oQ,i=aQ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...sQ,width:r.toString(),height:i.toString(),top:s,left:o},u=At().toLowerCase();n&&(a=sV(u)?lQ:n),rV(u)&&(e=e||uQ,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(xG(u)&&a!=="_self")return hQ(e||"",a),new kA(null);const d=window.open(e||"",a,c);ae(d,t,"popup-blocked");try{d.focus()}catch{}return new kA(d)}function hQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ="__/auth/handler",fQ="emulator/auth/handler",pQ=encodeURIComponent("fac");async function DA(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fu,eventId:i};if(e instanceof mV){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",h8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof Xd){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${pQ}=${encodeURIComponent(l)}`:"";return`${mQ(t)}?${Nd(a).slice(1)}${u}`}function mQ({config:t}){return t.emulator?zT(t,fQ):`https://${t.authDomain}/${dQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="webStorageSupport";class gQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EV,this._completeRedirectFn=jX,this._overrideRedirectResult=VX}async _openPopup(e,n,r,i){var o;Gi((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await DA(e,n,r,US(),i);return cQ(e,s,GT())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await DA(e,n,r,US(),i);return _X(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iQ(e),r=new UX(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(m_,{type:m_},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[m_];s!==void 0&&n(!!s),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qX(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cV()||iV()||HT()}}const yQ=gQ;var OA="@firebase/auth",MA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Q(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wQ(t){pu(new Ia("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hV(t)},u=new MG(r,i,s,l);return WG(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),pu(new Ia("auth-internal",e=>{const n=Eo(e.getProvider("auth").getImmediate());return(r=>new vQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(OA,MA,_Q(t)),ro(OA,MA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ=5*60,EQ=mM("authIdTokenMaxAge")||SQ;let LA=null;const TQ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>EQ)return;const i=n==null?void 0:n.token;LA!==i&&(LA=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bQ(t=IM()){const e=JE(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zG(t,{popupRedirectResolver:yQ,persistence:[xX,gX,EV]}),r=mM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=TQ(s.toString());hX(n,o,()=>o(n.currentUser)),cX(n,a=>o(a))}}const i=fM("auth");return i&&HG(n,`http://${i}`),n}function IQ(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}LG({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=di("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",IQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wQ("Browser");const RQ={apiKey:"AIzaSyBbUnVpOyU1eSSFrQi79ztijFjT0bvMosc",authDomain:"pocket-stylist-3c0fe.firebaseapp.com",projectId:"pocket-stylist-3c0fe",storageBucket:"pocket-stylist-3c0fe.firebasestorage.app",messagingSenderId:"274246899324",appId:"1:274246899324:web:845c91cdaab06299df1bf9"},AV=bM(RQ),Hu=bQ(AV),ss=U7(AV);z7(ss).then(()=>{console.log("Persistence enabled successfully")}).catch(t=>{t.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):t.code=="unimplemented"&&console.warn("Persistence failed: Browser not supported")});const CQ=(t,e)=>uX(Hu,t,e),xQ=(t,e)=>lX(Hu,t,e),AQ=()=>fX(Hu),PQ=t=>aX(Hu,t),PV=I.createContext();function kV(){return I.useContext(PV)}function kQ({children:t}){const[e,n]=I.useState(null),[r,i]=I.useState(!0);I.useEffect(()=>dX(Hu,a=>{n(a),i(!1)}),[]);const s={currentUser:e,loading:r};return M.jsx(PV.Provider,{value:s,children:!r&&t})}const DQ="Left",OQ="Right",MQ="Up",LQ="Down",Bl={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},HS={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},NA="mousemove",VA="mouseup",NQ="touchend",VQ="touchmove",FQ="touchstart";function BQ(t,e,n,r){return t>e?n>0?OQ:DQ:r>0?LQ:MQ}function FA(t,e){if(e===0)return t;const n=Math.PI/180*e,r=t[0]*Math.cos(n)+t[1]*Math.sin(n),i=t[1]*Math.cos(n)-t[0]*Math.sin(n);return[r,i]}function jQ(t,e){const n=c=>{const d="touches"in c;d&&c.touches.length>1||t((f,p)=>{p.trackMouse&&!d&&(document.addEventListener(NA,r),document.addEventListener(VA,o));const{clientX:y,clientY:S}=d?c.touches[0]:c,T=FA([y,S],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},f),HS),{initial:T.slice(),xy:T,start:c.timeStamp||0})})},r=c=>{t((d,f)=>{const p="touches"in c;if(p&&c.touches.length>1)return d;if(c.timeStamp-d.start>f.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:y,clientY:S}=p?c.touches[0]:c,[T,v]=FA([y,S],f.rotationAngle),g=T-d.xy[0],w=v-d.xy[1],x=Math.abs(g),O=Math.abs(w),D=(c.timeStamp||0)-d.start,b=Math.sqrt(x*x+O*O)/(D||1),E=[g/(D||1),w/(D||1)],R=BQ(x,O,g,w),C=typeof f.delta=="number"?f.delta:f.delta[R.toLowerCase()]||Bl.delta;if(x<C&&O<C&&!d.swiping)return d;const P={absX:x,absY:O,deltaX:g,deltaY:w,dir:R,event:c,first:d.first,initial:d.initial,velocity:b,vxvy:E};P.first&&f.onSwipeStart&&f.onSwipeStart(P),f.onSwiping&&f.onSwiping(P);let L=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${R}`])&&(L=!0),L&&f.preventScrollOnSwipe&&f.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:P,swiping:!0})})},i=c=>{t((d,f)=>{let p;if(d.swiping&&d.eventData){if(c.timeStamp-d.start<f.swipeDuration){p=Object.assign(Object.assign({},d.eventData),{event:c}),f.onSwiped&&f.onSwiped(p);const y=f[`onSwiped${p.dir}`];y&&y(p)}}else f.onTap&&f.onTap({event:c});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},d),HS),{eventData:p})})},s=()=>{document.removeEventListener(NA,r),document.removeEventListener(VA,o)},o=c=>{s(),i(c)},a=(c,d)=>{let f=()=>{};if(c&&c.addEventListener){const p=Object.assign(Object.assign({},Bl.touchEventOptions),d.touchEventOptions),y=[[FQ,n,p],[VQ,r,Object.assign(Object.assign({},p),d.preventScrollOnSwipe?{passive:!1}:{})],[NQ,i,p]];y.forEach(([S,T,v])=>c.addEventListener(S,T,v)),f=()=>y.forEach(([S,T])=>c.removeEventListener(S,T))}return f},u={ref:c=>{c!==null&&t((d,f)=>{if(d.el===c)return d;const p={};return d.el&&d.el!==c&&d.cleanUpTouch&&(d.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&c&&(p.cleanUpTouch=a(c,f)),Object.assign(Object.assign(Object.assign({},d),{el:c}),p)})}};return e.trackMouse&&(u.onMouseDown=n),[u,a]}function $Q(t,e,n,r){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==n.preventScrollOnSwipe||e.touchEventOptions.passive!==n.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})}function UQ(t){const{trackMouse:e}=t,n=I.useRef(Object.assign({},HS)),r=I.useRef(Object.assign({},Bl)),i=I.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Bl),t);let s;for(s in Bl)r.current[s]===void 0&&(r.current[s]=Bl[s]);const[o,a]=I.useMemo(()=>jQ(l=>n.current=l(n.current,r.current),{trackMouse:e}),[e]);return n.current=$Q(n.current,r.current,i.current,a),o}var DV={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},BA=yt.createContext&&yt.createContext(DV),zQ=["attr","size","title"];function WQ(t,e){if(t==null)return{};var n=HQ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Sg(){return Sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sg.apply(this,arguments)}function jA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jA(Object(n),!0).forEach(function(r){KQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KQ(t,e,n){return e=qQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qQ(t){var e=GQ(t,"string");return typeof e=="symbol"?e:e+""}function GQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OV(t){return t&&t.map((e,n)=>yt.createElement(e.tag,Eg({key:n},e.attr),OV(e.child)))}function XQ(t){return e=>yt.createElement(QQ,Sg({attr:Eg({},t.attr)},e),OV(t.child))}function QQ(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=WQ(t,zQ),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),yt.createElement("svg",Sg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Eg(Eg({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&yt.createElement("title",null,s),t.children)};return BA!==void 0?yt.createElement(BA.Consumer,null,n=>e(n)):e(DV)}function YQ(t){return XQ({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}const QT=I.createContext({});function YT(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const JT=typeof window<"u",MV=JT?I.useLayoutEffect:I.useEffect,Vy=I.createContext(null);function ZT(t,e){t.indexOf(e)===-1&&t.push(e)}function eb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Xi=(t,e,n)=>n>e?e:n<t?t:n;let tb=()=>{};const Qi={},LV=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function NV(t){return typeof t=="object"&&t!==null}const VV=t=>/^0[^.\s]+$/u.test(t);function nb(t){let e;return()=>(e===void 0&&(e=t()),e)}const hr=t=>t,JQ=(t,e)=>n=>e(t(n)),Yd=(...t)=>t.reduce(JQ),_d=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class rb{constructor(){this.subscriptions=[]}add(e){return ZT(this.subscriptions,e),()=>eb(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pi=t=>t*1e3,or=t=>t/1e3;function FV(t,e){return e?t*(1e3/e):0}const BV=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ZQ=1e-7,eY=12;function tY(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=BV(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>ZQ&&++a<eY);return o}function Jd(t,e,n,r){if(t===e&&n===r)return hr;const i=s=>tY(s,0,1,t,n);return s=>s===0||s===1?s:BV(i(s),e,r)}const jV=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$V=t=>e=>1-t(1-e),UV=Jd(.33,1.53,.69,.99),ib=$V(UV),zV=jV(ib),WV=t=>(t*=2)<1?.5*ib(t):.5*(2-Math.pow(2,-10*(t-1))),sb=t=>1-Math.sin(Math.acos(t)),HV=$V(sb),KV=jV(sb),nY=Jd(.42,0,1,1),rY=Jd(0,0,.58,1),qV=Jd(.42,0,.58,1),iY=t=>Array.isArray(t)&&typeof t[0]!="number",GV=t=>Array.isArray(t)&&typeof t[0]=="number",sY={linear:hr,easeIn:nY,easeInOut:qV,easeOut:rY,circIn:sb,circInOut:KV,circOut:HV,backIn:ib,backInOut:zV,backOut:UV,anticipate:WV},oY=t=>typeof t=="string",$A=t=>{if(GV(t)){tb(t.length===4);const[e,n,r,i]=t;return Jd(e,n,r,i)}else if(oY(t))return sY[t];return t},lp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aY(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),t()),c(a)}const u={schedule:(c,d=!1,f=!1)=>{const y=f&&i?n:r;return d&&o.add(c),y.has(c)||y.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const lY=40;function XV(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=lp.reduce((w,x)=>(w[x]=aY(s),w),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:f,render:p,postRender:y}=o,S=()=>{const w=Qi.useManualTiming?i.timestamp:performance.now();n=!1,Qi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,lY),1)),i.timestamp=w,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),p.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},T=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:lp.reduce((w,x)=>{const O=o[x];return w[x]=(D,b=!1,E=!1)=>(n||T(),O.schedule(D,b,E)),w},{}),cancel:w=>{for(let x=0;x<lp.length;x++)o[lp[x]].cancel(w)},state:i,steps:o}}const{schedule:Je,cancel:po,state:Ut,steps:g_}=XV(typeof requestAnimationFrame<"u"?requestAnimationFrame:hr,!0);let tm;function uY(){tm=void 0}const In={now:()=>(tm===void 0&&In.set(Ut.isProcessing||Qi.useManualTiming?Ut.timestamp:performance.now()),tm),set:t=>{tm=t,queueMicrotask(uY)}},QV=t=>e=>typeof e=="string"&&e.startsWith(t),YV=QV("--"),cY=QV("var(--"),ob=t=>cY(t)?hY.test(t.split("/*")[0].trim()):!1,hY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ku={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wd={...Ku,transform:t=>Xi(0,1,t)},up={...Ku,default:1},Ch=t=>Math.round(t*1e5)/1e5,ab=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dY(t){return t==null}const fY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lb=(t,e)=>n=>!!(typeof n=="string"&&fY.test(n)&&n.startsWith(t)||e&&!dY(n)&&Object.prototype.hasOwnProperty.call(n,e)),JV=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(ab);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},pY=t=>Xi(0,255,t),y_={...Ku,transform:t=>Math.round(pY(t))},aa={test:lb("rgb","red"),parse:JV("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+y_.transform(t)+", "+y_.transform(e)+", "+y_.transform(n)+", "+Ch(wd.transform(r))+")"};function mY(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const KS={test:lb("#"),parse:mY,transform:aa.transform},Zd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Os=Zd("deg"),mi=Zd("%"),le=Zd("px"),gY=Zd("vh"),yY=Zd("vw"),UA={...mi,parse:t=>mi.parse(t)/100,transform:t=>mi.transform(t*100)},jl={test:lb("hsl","hue"),parse:JV("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+mi.transform(Ch(e))+", "+mi.transform(Ch(n))+", "+Ch(wd.transform(r))+")"},gt={test:t=>aa.test(t)||KS.test(t)||jl.test(t),parse:t=>aa.test(t)?aa.parse(t):jl.test(t)?jl.parse(t):KS.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?aa.transform(t):jl.transform(t),getAnimatableNone:t=>{const e=gt.parse(t);return e.alpha=0,gt.transform(e)}},vY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _Y(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ab))==null?void 0:e.length)||0)+(((n=t.match(vY))==null?void 0:n.length)||0)>0}const ZV="number",e2="color",wY="var",SY="var(",zA="${}",EY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(EY,l=>(gt.test(l)?(r.color.push(s),i.push(e2),n.push(gt.parse(l))):l.startsWith(SY)?(r.var.push(s),i.push(wY),n.push(l)):(r.number.push(s),i.push(ZV),n.push(parseFloat(l))),++s,zA)).split(zA);return{values:n,split:a,indexes:r,types:i}}function t2(t){return Sd(t).values}function n2(t){const{split:e,types:n}=Sd(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===ZV?s+=Ch(i[o]):a===e2?s+=gt.transform(i[o]):s+=i[o]}return s}}const TY=t=>typeof t=="number"?0:gt.test(t)?gt.getAnimatableNone(t):t;function bY(t){const e=t2(t);return n2(t)(e.map(TY))}const mo={test:_Y,parse:t2,createTransformer:n2,getAnimatableNone:bY};function v_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function IY({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=v_(l,a,t+1/3),s=v_(l,a,t),o=v_(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Tg(t,e){return n=>n>0?e:t}const rt=(t,e,n)=>t+(e-t)*n,__=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},RY=[KS,aa,jl],CY=t=>RY.find(e=>e.test(t));function WA(t){const e=CY(t);if(!e)return!1;let n=e.parse(t);return e===jl&&(n=IY(n)),n}const HA=(t,e)=>{const n=WA(t),r=WA(e);if(!n||!r)return Tg(t,e);const i={...n};return s=>(i.red=__(n.red,r.red,s),i.green=__(n.green,r.green,s),i.blue=__(n.blue,r.blue,s),i.alpha=rt(n.alpha,r.alpha,s),aa.transform(i))},qS=new Set(["none","hidden"]);function xY(t,e){return qS.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function AY(t,e){return n=>rt(t,e,n)}function ub(t){return typeof t=="number"?AY:typeof t=="string"?ob(t)?Tg:gt.test(t)?HA:DY:Array.isArray(t)?r2:typeof t=="object"?gt.test(t)?HA:PY:Tg}function r2(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>ub(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function PY(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ub(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function kY(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const DY=(t,e)=>{const n=mo.createTransformer(e),r=Sd(t),i=Sd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?qS.has(t)&&!i.values.length||qS.has(e)&&!r.values.length?xY(t,e):Yd(r2(kY(r,i),i.values),n):Tg(t,e)};function i2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rt(t,e,n):ub(t)(t,e)}const OY=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Je.update(e,n),stop:()=>po(e),now:()=>Ut.isProcessing?Ut.timestamp:In.now()}},s2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},bg=2e4;function cb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<bg;)e+=n,r=t.next(e);return e>=bg?1/0:e}function MY(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(cb(r),bg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:or(i)}}const LY=5;function o2(t,e,n){const r=Math.max(e-LY,0);return FV(n-t(r),e-r)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},w_=.001;function NY({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:r=ut.mass}){let i,s,o=1-e;o=Xi(ut.minDamping,ut.maxDamping,o),t=Xi(ut.minDuration,ut.maxDuration,or(t)),o<1?(i=u=>{const c=u*o,d=c*t,f=c-n,p=GS(u,o),y=Math.exp(-d);return w_-f/p*y},s=u=>{const d=u*o*t,f=d*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-d),S=GS(Math.pow(u,2),o);return(-i(u)+w_>0?-1:1)*((f-p)*y)/S}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-w_+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=FY(i,s,a);if(t=pi(t),isNaN(l))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const VY=12;function FY(t,e,n){let r=n;for(let i=1;i<VY;i++)r=r-t(r)/e(r);return r}function GS(t,e){return t*Math.sqrt(1-e*e)}const BY=["duration","bounce"],jY=["stiffness","damping","mass"];function KA(t,e){return e.some(n=>t[n]!==void 0)}function $Y(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!KA(t,jY)&&KA(t,BY))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Xi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ut.mass,stiffness:i,damping:s}}else{const n=NY(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function Ig(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=$Y({...n,velocity:-or(n.velocity||0)}),y=f||0,S=u/(2*Math.sqrt(l*c)),T=o-s,v=or(Math.sqrt(l/c)),g=Math.abs(T)<5;r||(r=g?ut.restSpeed.granular:ut.restSpeed.default),i||(i=g?ut.restDelta.granular:ut.restDelta.default);let w;if(S<1){const O=GS(v,S);w=D=>{const b=Math.exp(-S*v*D);return o-b*((y+S*v*T)/O*Math.sin(O*D)+T*Math.cos(O*D))}}else if(S===1)w=O=>o-Math.exp(-v*O)*(T+(y+v*T)*O);else{const O=v*Math.sqrt(S*S-1);w=D=>{const b=Math.exp(-S*v*D),E=Math.min(O*D,300);return o-b*((y+S*v*T)*Math.sinh(E)+O*T*Math.cosh(E))/O}}const x={calculatedDuration:p&&d||null,next:O=>{const D=w(O);if(p)a.done=O>=d;else{let b=O===0?y:0;S<1&&(b=O===0?pi(y):o2(w,O,D));const E=Math.abs(b)<=r,R=Math.abs(o-D)<=i;a.done=E&&R}return a.value=a.done?o:D,a},toString:()=>{const O=Math.min(cb(x),bg),D=s2(b=>x.next(O*b).value,O,30);return O+"ms "+D},toTransition:()=>{}};return x}Ig.applyToOptions=t=>{const e=MY(t,100,Ig);return t.ease=e.ease,t.duration=pi(e.duration),t.type="keyframes",t};function XS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,y=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let S=n*e;const T=d+S,v=o===void 0?T:o(T);v!==T&&(S=v-d);const g=E=>-S*Math.exp(-E/r),w=E=>v+g(E),x=E=>{const R=g(E),C=w(E);f.done=Math.abs(R)<=u,f.value=f.done?v:C};let O,D;const b=E=>{p(f.value)&&(O=E,D=Ig({keyframes:[f.value,y(f.value)],velocity:o2(w,E,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return b(0),{calculatedDuration:null,next:E=>{let R=!1;return!D&&O===void 0&&(R=!0,x(E),b(E)),O!==void 0&&E>=O?D.next(E-O):(!R&&x(E),f)}}}function UY(t,e,n){const r=[],i=n||Qi.mix||i2,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||hr:e;a=Yd(l,a)}r.push(a)}return r}function zY(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(tb(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=UY(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const f=_d(t[d],t[d+1],c);return a[d](f)};return n?c=>u(Xi(t[0],t[s-1],c)):u}function WY(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=_d(0,e,r);t.push(rt(n,1,i))}}function HY(t){const e=[0];return WY(e,t.length-1),e}function KY(t,e){return t.map(n=>n*e)}function qY(t,e){return t.map(()=>e||qV).splice(0,t.length-1)}function xh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=iY(r)?r.map($A):$A(r),s={done:!1,value:e[0]},o=KY(n&&n.length===e.length?n:HY(e),t),a=zY(o,e,{ease:Array.isArray(i)?i:qY(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const GY=t=>t!==null;function hb(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(GY),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const XY={decay:XS,inertia:XS,tween:xh,keyframes:xh,spring:Ig};function a2(t){typeof t.type=="string"&&(t.type=XY[t.type])}class db{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const QY=t=>t/100;class fb extends db{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==In.now()&&this.tick(In.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;a2(e);const{type:n=xh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||xh;l!==xh&&typeof a[0]!="number"&&(this.mixKeyframes=Yd(QY,i2(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=cb(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:f,repeatDelay:p,type:y,onUpdate:S,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,x=r;if(d){const E=Math.min(this.currentTime,i)/a;let R=Math.floor(E),C=E%1;!C&&E>=1&&(C=1),C===1&&R--,R=Math.min(R,d+1),!!(R%2)&&(f==="reverse"?(C=1-C,p&&(C-=p/a)):f==="mirror"&&(x=o)),w=Xi(0,1,C)*a}const O=g?{done:!1,value:c[0]}:x.next(w);s&&(O.value=s(O.value));let{done:D}=O;!g&&l!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return b&&y!==XS&&(O.value=hb(c,this.options,T,this.speed)),S&&S(O.value),b&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return or(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+or(e)}get time(){return or(this.currentTime)}set time(e){var n;e=pi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(In.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=or(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=OY,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(In.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function YY(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const la=t=>t*180/Math.PI,QS=t=>{const e=la(Math.atan2(t[1],t[0]));return YS(e)},JY={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:QS,rotateZ:QS,skewX:t=>la(Math.atan(t[1])),skewY:t=>la(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},YS=t=>(t=t%360,t<0&&(t+=360),t),qA=QS,GA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),XA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ZY={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:GA,scaleY:XA,scale:t=>(GA(t)+XA(t))/2,rotateX:t=>YS(la(Math.atan2(t[6],t[5]))),rotateY:t=>YS(la(Math.atan2(-t[2],t[0]))),rotateZ:qA,rotate:qA,skewX:t=>la(Math.atan(t[4])),skewY:t=>la(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function JS(t){return t.includes("scale")?1:0}function ZS(t,e){if(!t||t==="none")return JS(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=ZY,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=JY,i=a}if(!i)return JS(e);const s=r[e],o=i[1].split(",").map(tJ);return typeof s=="function"?s(o):o[s]}const eJ=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ZS(n,e)};function tJ(t){return parseFloat(t.trim())}const qu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gu=new Set(qu),QA=t=>t===Ku||t===le,nJ=new Set(["x","y","z"]),rJ=qu.filter(t=>!nJ.has(t));function iJ(t){const e=[];return rJ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ya={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ZS(e,"x"),y:(t,{transform:e})=>ZS(e,"y")};ya.translateX=ya.x;ya.translateY=ya.y;const va=new Set;let e0=!1,t0=!1,n0=!1;function l2(){if(t0){const t=Array.from(va).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=iJ(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}t0=!1,e0=!1,va.forEach(t=>t.complete(n0)),va.clear()}function u2(){va.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(t0=!0)})}function sJ(){n0=!0,u2(),l2(),n0=!1}class pb{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(va.add(this),e0||(e0=!0,Je.read(u2),Je.resolveKeyframes(l2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}YY(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),va.delete(this)}cancel(){this.state==="scheduled"&&(va.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oJ=t=>t.startsWith("--");function aJ(t,e,n){oJ(e)?t.style.setProperty(e,n):t.style[e]=n}const lJ=nb(()=>window.ScrollTimeline!==void 0),uJ={};function cJ(t,e){const n=nb(t);return()=>uJ[e]??n()}const c2=cJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,YA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gc([0,.65,.55,1]),circOut:Gc([.55,0,1,.45]),backIn:Gc([.31,.01,.66,-.59]),backOut:Gc([.33,1.53,.69,.99])};function h2(t,e){if(t)return typeof t=="function"?c2()?s2(t,e):"ease-out":GV(t)?Gc(t):Array.isArray(t)?t.map(n=>h2(n,e)||YA.easeOut):YA[t]}function hJ(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:n};l&&(c.offset=l);const d=h2(a,i);Array.isArray(d)&&(c.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(c,f)}function d2(t){return typeof t=="function"&&"applyToOptions"in t}function dJ({type:t,...e}){return d2(t)&&c2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class fJ extends db{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,tb(typeof e.type!="string");const u=dJ(e);this.animation=hJ(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=hb(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):aJ(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return or(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+or(e)}get time(){return or(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&lJ()?(this.animation.timeline=e,hr):n(this)}}const f2={anticipate:WV,backInOut:zV,circInOut:KV};function pJ(t){return t in f2}function mJ(t){typeof t.ease=="string"&&pJ(t.ease)&&(t.ease=f2[t.ease])}const JA=10;class gJ extends fJ{constructor(e){mJ(e),a2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new fb({...o,autoplay:!1}),l=pi(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-JA).value,a.sample(l).value,JA),a.stop()}}const ZA=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mo.test(t)||t==="0")&&!t.startsWith("url("));function yJ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function vJ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=ZA(i,e),a=ZA(s,e);return!o||!a?!1:yJ(t)||(n==="spring"||d2(n))&&r}function r0(t){t.duration=0,t.type="keyframes"}const _J=new Set(["opacity","clipPath","filter","transform"]),wJ=nb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function SJ(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return wJ()&&n&&_J.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const EJ=40;class TJ extends db{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var y;super(),this.stop=()=>{var S,T;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=In.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},p=(c==null?void 0:c.KeyframeResolver)||pb;this.keyframeResolver=new p(a,(S,T,v)=>this.onKeyframesResolved(S,T,f,!v),l,u,c),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=In.now(),vJ(e,s,o,a)||((Qi.instantAnimations||!l)&&(c==null||c(hb(e,r,n))),e[0]=e[e.length-1],r0(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>EJ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&SJ(f)?new gJ({...f,element:f.motionValue.owner.current}):new fb(f);p.finished.then(()=>this.notifyFinished()).catch(hr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),sJ()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const bJ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IJ(t){const e=bJ.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function p2(t,e,n=1){const[r,i]=IJ(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return LV(o)?parseFloat(o):o}return ob(i)?p2(i,e,n+1):i}function mb(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const m2=new Set(["width","height","top","left","right","bottom",...qu]),RJ={test:t=>t==="auto",parse:t=>t},g2=t=>e=>e.test(t),y2=[Ku,le,mi,Os,yY,gY,RJ],eP=t=>y2.find(g2(t));function CJ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||VV(t):!0}const xJ=new Set(["brightness","contrast","saturate","opacity"]);function AJ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ab)||[];if(!r)return t;const i=n.replace(r,"");let s=xJ.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const PJ=/\b([a-z-]*)\(.*?\)/gu,i0={...mo,getAnimatableNone:t=>{const e=t.match(PJ);return e?e.map(AJ).join(" "):t}},tP={...Ku,transform:Math.round},kJ={rotate:Os,rotateX:Os,rotateY:Os,rotateZ:Os,scale:up,scaleX:up,scaleY:up,scaleZ:up,skew:Os,skewX:Os,skewY:Os,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:wd,originX:UA,originY:UA,originZ:le},gb={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...kJ,zIndex:tP,fillOpacity:wd,strokeOpacity:wd,numOctaves:tP},DJ={...gb,color:gt,backgroundColor:gt,outlineColor:gt,fill:gt,stroke:gt,borderColor:gt,borderTopColor:gt,borderRightColor:gt,borderBottomColor:gt,borderLeftColor:gt,filter:i0,WebkitFilter:i0},v2=t=>DJ[t];function _2(t,e){let n=v2(t);return n!==i0&&(n=mo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const OJ=new Set(["auto","none","0"]);function MJ(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!OJ.has(s)&&Sd(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=_2(n,i)}class LJ extends pb{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),ob(u))){const c=p2(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!m2.has(r)||e.length!==2)return;const[i,s]=e,o=eP(i),a=eP(s);if(o!==a)if(QA(o)&&QA(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else ya[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||CJ(e[i]))&&r.push(i);r.length&&MJ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ya[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=ya[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function NJ(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const w2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function S2(t){return NV(t)&&"offsetHeight"in t}const nP=30,VJ=t=>!isNaN(parseFloat(t));class FJ{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=In.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=In.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=VJ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new rb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=In.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>nP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,nP);return FV(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xu(t,e){return new FJ(t,e)}const{schedule:yb}=XV(queueMicrotask,!1),Rr={x:!1,y:!1};function E2(){return Rr.x||Rr.y}function BJ(t){return t==="x"||t==="y"?Rr[t]?null:(Rr[t]=!0,()=>{Rr[t]=!1}):Rr.x||Rr.y?null:(Rr.x=Rr.y=!0,()=>{Rr.x=Rr.y=!1})}function T2(t,e){const n=NJ(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function rP(t){return!(t.pointerType==="touch"||E2())}function jJ(t,e,n={}){const[r,i,s]=T2(t,n),o=a=>{if(!rP(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{rP(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const b2=(t,e)=>e?t===e?!0:b2(t,e.parentElement):!1,vb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$J=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function UJ(t){return $J.has(t.tagName)||t.tabIndex!==-1}const nm=new WeakSet;function iP(t){return e=>{e.key==="Enter"&&t(e)}}function S_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zJ=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=iP(()=>{if(nm.has(n))return;S_(n,"down");const i=iP(()=>{S_(n,"up")}),s=()=>S_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function sP(t){return vb(t)&&!E2()}function WJ(t,e,n={}){const[r,i,s]=T2(t,n),o=a=>{const l=a.currentTarget;if(!sP(a))return;nm.add(l);const u=e(l,a),c=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),nm.has(l)&&nm.delete(l),sP(p)&&typeof u=="function"&&u(p,{success:y})},d=p=>{c(p,l===window||l===document||n.useGlobalTarget||b2(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),S2(a)&&(a.addEventListener("focus",u=>zJ(u,i)),!UJ(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function I2(t){return NV(t)&&"ownerSVGElement"in t}function HJ(t){return I2(t)&&t.tagName==="svg"}const sn=t=>!!(t&&t.getVelocity),KJ=[...y2,gt,mo],qJ=t=>KJ.find(g2(t)),_b=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function oP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function GJ(...t){return e=>{let n=!1;const r=t.map(i=>{const s=oP(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():oP(t[i],null)}}}}function XJ(...t){return I.useCallback(GJ(...t),t)}class QJ extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=S2(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function YJ({children:t,isPresent:e,anchorX:n,root:r}){const i=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=I.useContext(_b),l=XJ(s,t==null?void 0:t.ref);return I.useInsertionEffect(()=>{const{width:u,height:c,top:d,left:f,right:p}=o.current;if(e||!s.current||!u||!c)return;const y=n==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");a&&(S.nonce=a);const T=r??document.head;return T.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${y}px !important;
            top: ${d}px !important;
          }
        `),()=>{T.contains(S)&&T.removeChild(S)}},[e]),M.jsx(QJ,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(t,{ref:l})})}const JJ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=YT(ZJ),c=I.useId();let d=!0,f=I.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:i,onExitComplete:p=>{u.set(p,!0);for(const y of u.values())if(!y)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return s&&d&&(f={...f}),I.useMemo(()=>{u.forEach((p,y)=>u.set(y,!1))},[n]),I.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=M.jsx(YJ,{isPresent:n,anchorX:a,root:l,children:t})),M.jsx(Vy.Provider,{value:f,children:t})};function ZJ(){return new Map}function R2(t=!0){const e=I.useContext(Vy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=I.useId();I.useEffect(()=>{if(t)return i(s)},[t]);const o=I.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const cp=t=>t.key||"";function aP(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const eZ=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=R2(o),d=I.useMemo(()=>aP(t),[t]),f=o&&!u?[]:d.map(cp),p=I.useRef(!0),y=I.useRef(d),S=YT(()=>new Map),[T,v]=I.useState(d),[g,w]=I.useState(d);MV(()=>{p.current=!1,y.current=d;for(let D=0;D<g.length;D++){const b=cp(g[D]);f.includes(b)?S.delete(b):S.get(b)!==!0&&S.set(b,!1)}},[g,f.length,f.join("-")]);const x=[];if(d!==T){let D=[...d];for(let b=0;b<g.length;b++){const E=g[b],R=cp(E);f.includes(R)||(D.splice(b,0,E),x.push(E))}return s==="wait"&&x.length&&(D=x),w(aP(D)),v(d),null}const{forceRender:O}=I.useContext(QT);return M.jsx(M.Fragment,{children:g.map(D=>{const b=cp(D),E=o&&!u?!1:d===g||f.includes(b),R=()=>{if(S.has(b))S.set(b,!0);else return;let C=!0;S.forEach(P=>{P||(C=!1)}),C&&(O==null||O(),w(y.current),o&&(c==null||c()),r&&r())};return M.jsx(JJ,{isPresent:E,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:E?void 0:R,anchorX:a,children:D},b)})})},C2=I.createContext({strict:!1}),lP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Au={};for(const t in lP)Au[t]={isEnabled:e=>lP[t].some(n=>!!e[n])};function tZ(t){for(const e in t)Au[e]={...Au[e],...t[e]}}const nZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nZ.has(t)}let x2=t=>!Rg(t);function rZ(t){typeof t=="function"&&(x2=e=>e.startsWith("on")?!Rg(e):t(e))}try{rZ(require("@emotion/is-prop-valid").default)}catch{}function iZ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(x2(i)||n===!0&&Rg(i)||!e&&!Rg(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Fy=I.createContext({});function By(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ed(t){return typeof t=="string"||Array.isArray(t)}const wb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sb=["initial",...wb];function jy(t){return By(t.animate)||Sb.some(e=>Ed(t[e]))}function A2(t){return!!(jy(t)||t.variants)}function sZ(t,e){if(jy(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ed(n)?n:void 0,animate:Ed(r)?r:void 0}}return t.inherit!==!1?e:{}}function oZ(t){const{initial:e,animate:n}=sZ(t,I.useContext(Fy));return I.useMemo(()=>({initial:e,animate:n}),[uP(e),uP(n)])}function uP(t){return Array.isArray(t)?t.join(" "):t}function cP(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Oc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=cP(t,e.target.x),r=cP(t,e.target.y);return`${n}% ${r}%`}},aZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=mo.parse(t);if(i.length>5)return r;const s=mo.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=rt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},s0={borderRadius:{...Oc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oc,borderTopRightRadius:Oc,borderBottomLeftRadius:Oc,borderBottomRightRadius:Oc,boxShadow:aZ};function P2(t,{layout:e,layoutId:n}){return Gu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!s0[t]||t==="opacity")}const lZ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uZ=qu.length;function cZ(t,e,n){let r="",i=!0;for(let s=0;s<uZ;s++){const o=qu[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=w2(a,gb[o]);if(!l){i=!1;const c=lZ[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Eb(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Gu.has(l)){o=!0;continue}else if(YV(l)){i[l]=u;continue}else{const c=w2(u,gb[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=cZ(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const Tb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function k2(t,e,n){for(const r in e)!sn(e[r])&&!P2(r,n)&&(t[r]=e[r])}function hZ({transformTemplate:t},e){return I.useMemo(()=>{const n=Tb();return Eb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function dZ(t,e){const n=t.style||{},r={};return k2(r,n,t),Object.assign(r,hZ(t,e)),r}function fZ(t,e){const n={},r=dZ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const pZ={offset:"stroke-dashoffset",array:"stroke-dasharray"},mZ={offset:"strokeDashoffset",array:"strokeDasharray"};function gZ(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?pZ:mZ;t[s.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[s.array]=`${o} ${a}`}function D2(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(Eb(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f}=t;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&gZ(d,i,s,o,!1)}const O2=()=>({...Tb(),attrs:{}}),M2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yZ(t,e,n,r){const i=I.useMemo(()=>{const s=O2();return D2(s,e,M2(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};k2(s,t.style,t),i.style={...s,...i.style}}return i}const vZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bb(t){return typeof t!="string"||t.includes("-")?!1:!!(vZ.indexOf(t)>-1||/[A-Z]/u.test(t))}function _Z(t,e,n,{latestValues:r},i,s=!1){const a=(bb(t)?yZ:fZ)(e,r,i,t),l=iZ(e,typeof t=="string",s),u=t!==I.Fragment?{...l,...a,ref:n}:{},{children:c}=e,d=I.useMemo(()=>sn(c)?c.get():c,[c]);return I.createElement(t,{...u,children:d})}function hP(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ib(t,e,n,r){if(typeof e=="function"){const[i,s]=hP(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=hP(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function rm(t){return sn(t)?t.get():t}function wZ({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:SZ(n,r,i,t),renderState:e()}}function SZ(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=rm(s[f]);let{initial:o,animate:a}=t;const l=jy(t),u=A2(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!By(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const y=Ib(t,f[p]);if(y){const{transitionEnd:S,transition:T,...v}=y;for(const g in v){let w=v[g];if(Array.isArray(w)){const x=c?w.length-1:0;w=w[x]}w!==null&&(i[g]=w)}for(const g in S)i[g]=S[g]}}}return i}const L2=t=>(e,n)=>{const r=I.useContext(Fy),i=I.useContext(Vy),s=()=>wZ(t,e,r,i);return n?s():YT(s)};function Rb(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(sn(r[o])||e.style&&sn(e.style[o])||P2(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const EZ=L2({scrapeMotionValuesFromProps:Rb,createRenderState:Tb});function N2(t,e,n){const r=Rb(t,e,n);for(const i in t)if(sn(t[i])||sn(e[i])){const s=qu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const TZ=L2({scrapeMotionValuesFromProps:N2,createRenderState:O2}),bZ=Symbol.for("motionComponentSymbol");function $l(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function IZ(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):$l(n)&&(n.current=r))},[e])}const Cb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),RZ="framerAppearId",V2="data-"+Cb(RZ),F2=I.createContext({});function CZ(t,e,n,r,i){var S,T;const{visualElement:s}=I.useContext(Fy),o=I.useContext(C2),a=I.useContext(Vy),l=I.useContext(_b).reducedMotion,u=I.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=I.useContext(F2);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&xZ(u.current,n,i,d);const f=I.useRef(!1);I.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const p=n[V2],y=I.useRef(!!p&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,p))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,p)));return MV(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),y.current&&c.animationState&&c.animationState.animateChanges())}),I.useEffect(()=>{c&&(!y.current&&c.animationState&&c.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,p)}),y.current=!1),c.enteringChildren=void 0)}),c}function xZ(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:B2(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&$l(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function B2(t){if(t)return t.options.allowProjection!==!1?t.projection:B2(t.parent)}function E_(t,{forwardMotionProps:e=!1}={},n,r){n&&tZ(n);const i=bb(t)?TZ:EZ;function s(a,l){let u;const c={...I.useContext(_b),...a,layoutId:AZ(a)},{isStatic:d}=c,f=oZ(a),p=i(a,d);if(!d&&JT){PZ();const y=kZ(c);u=y.MeasureLayout,f.visualElement=CZ(t,p,c,r,y.ProjectionNode)}return M.jsxs(Fy.Provider,{value:f,children:[u&&f.visualElement?M.jsx(u,{visualElement:f.visualElement,...c}):null,_Z(t,a,IZ(p,f.visualElement,l),p,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=I.forwardRef(s);return o[bZ]=t,o}function AZ({layoutId:t}){const e=I.useContext(QT).id;return e&&t!==void 0?e+"-"+t:t}function PZ(t,e){I.useContext(C2).strict}function kZ(t){const{drag:e,layout:n}=Au;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function DZ(t,e){if(typeof Proxy>"u")return E_;const n=new Map,r=(s,o)=>E_(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,E_(o,void 0,t,e)),n.get(o))})}function j2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function OZ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function MZ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function T_(t){return t===void 0||t===1}function o0({scale:t,scaleX:e,scaleY:n}){return!T_(t)||!T_(e)||!T_(n)}function qo(t){return o0(t)||$2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $2(t){return dP(t.x)||dP(t.y)}function dP(t){return t&&t!=="0%"}function Cg(t,e,n){const r=t-n,i=e*r;return n+i}function fP(t,e,n,r,i){return i!==void 0&&(t=Cg(t,i,r)),Cg(t,n,r)+e}function a0(t,e=0,n=1,r,i){t.min=fP(t.min,e,n,r,i),t.max=fP(t.max,e,n,r,i)}function U2(t,{x:e,y:n}){a0(t.x,e.translate,e.scale,e.originPoint),a0(t.y,n.translate,n.scale,n.originPoint)}const pP=.999999999999,mP=1.0000000000001;function LZ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,U2(t,o)),r&&qo(s.latestValues)&&zl(t,s.latestValues))}e.x<mP&&e.x>pP&&(e.x=1),e.y<mP&&e.y>pP&&(e.y=1)}function Ul(t,e){t.min=t.min+e,t.max=t.max+e}function gP(t,e,n,r,i=.5){const s=rt(t.min,t.max,i);a0(t,e,n,s,r)}function zl(t,e){gP(t.x,e.x,e.scaleX,e.scale,e.originX),gP(t.y,e.y,e.scaleY,e.scale,e.originY)}function z2(t,e){return j2(MZ(t.getBoundingClientRect(),e))}function NZ(t,e,n){const r=z2(t,n),{scroll:i}=e;return i&&(Ul(r.x,i.offset.x),Ul(r.y,i.offset.y)),r}const yP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wl=()=>({x:yP(),y:yP()}),vP=()=>({min:0,max:0}),It=()=>({x:vP(),y:vP()}),l0={current:null},W2={current:!1};function VZ(){if(W2.current=!0,!!JT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>l0.current=t.matches;t.addEventListener("change",e),e()}else l0.current=!1}const FZ=new WeakMap;function BZ(t,e,n){for(const r in e){const i=e[r],s=n[r];if(sn(i))t.addValue(r,i);else if(sn(s))t.addValue(r,xu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,xu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const _P=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jZ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=In.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Je.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=jy(n),this.isVariantNode=A2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&sn(p)&&p.set(l[f])}}mount(e){var n;this.current=e,FZ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),W2.current||VZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:l0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),po(this.notifyUpdate),po(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Gu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Je.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Au){const n=Au[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<_P.length;r++){const i=_P[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=BZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=xu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(LV(r)||VV(r))?r=parseFloat(r):!qJ(r)&&mo.test(n)&&(r=_2(e,n)),this.setBaseTarget(e,sn(r)?r.get():r)),sn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Ib(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!sn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new rb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){yb.render(this.render)}}class H2 extends jZ{constructor(){super(...arguments),this.KeyframeResolver=LJ}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function K2(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function $Z(t){return window.getComputedStyle(t)}class UZ extends H2{constructor(){super(...arguments),this.type="html",this.renderInstance=K2}readValueFromInstance(e,n){var r;if(Gu.has(n))return(r=this.projection)!=null&&r.isProjecting?JS(n):eJ(e,n);{const i=$Z(e),s=(YV(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return z2(e,n)}build(e,n,r){Eb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Rb(e,n,r)}}const q2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zZ(t,e,n,r){K2(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(q2.has(i)?i:Cb(i),e.attrs[i])}class WZ extends H2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=It}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Gu.has(n)){const r=v2(n);return r&&r.default||0}return n=q2.has(n)?n:Cb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return N2(e,n,r)}build(e,n,r){D2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){zZ(e,n,r,i)}mount(e){this.isSVGTag=M2(e.tagName),super.mount(e)}}const HZ=(t,e)=>bb(t)?new WZ(e):new UZ(e,{allowProjection:t!==I.Fragment});function su(t,e,n){const r=t.getProps();return Ib(r,e,n!==void 0?n:r.custom,t)}const u0=t=>Array.isArray(t);function KZ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,xu(n))}function qZ(t){return u0(t)?t[t.length-1]||0:t}function GZ(t,e){const n=su(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=qZ(s[o]);KZ(t,o,a)}}function XZ(t){return!!(sn(t)&&t.add)}function c0(t,e){const n=t.getValue("willChange");if(XZ(n))return n.add(e);if(!n&&Qi.WillChange){const r=new Qi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function G2(t){return t.props[V2]}const QZ=t=>t!==null;function YZ(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(QZ),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const JZ={type:"spring",stiffness:500,damping:25,restSpeed:10},ZZ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),eee={type:"keyframes",duration:.8},tee={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nee=(t,{keyframes:e})=>e.length>2?eee:Gu.has(t)?t.startsWith("scale")?ZZ(e[1]):JZ:tee;function ree({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const xb=(t,e,n,r={},i,s)=>o=>{const a=mb(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-pi(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};ree(a)||Object.assign(c,nee(t,c)),c.duration&&(c.duration=pi(c.duration)),c.repeatDelay&&(c.repeatDelay=pi(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(r0(c),c.delay===0&&(d=!0)),(Qi.instantAnimations||Qi.skipAnimations)&&(d=!0,r0(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const f=YZ(c.keyframes,a);if(f!==void 0){Je.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new fb(c):new TJ(c)};function iee({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function X2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const d=t.getValue(c,t.latestValues[c]??null),f=a[c];if(f===void 0||u&&iee(u,c))continue;const p={delay:n,...mb(s||{},c)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===y&&!p.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const v=G2(t);if(v){const g=window.MotionHandoffAnimation(v,c,Je);g!==null&&(p.startTime=g,S=!0)}}c0(t,c),d.start(xb(c,d,f,t.shouldReduceMotion&&m2.has(c)?{type:!1}:p,t,S));const T=d.animation;T&&l.push(T)}return o&&Promise.all(l).then(()=>{Je.update(()=>{o&&GZ(t,o)})}),l}function Q2(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function h0(t,e,n={}){var l;const r=su(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(X2(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return see(t,e,u,c,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function see(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(h0(l,e,{...o,delay:n+(typeof r=="function"?0:r)+Q2(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function oee(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>h0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=h0(t,e,n);else{const i=typeof e=="function"?su(t,e,n.custom):e;r=Promise.all(X2(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Y2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const aee=Sb.length;function J2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?J2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<aee;n++){const r=Sb[n],i=t.props[r];(Ed(i)||i===!1)&&(e[r]=i)}return e}const lee=[...wb].reverse(),uee=wb.length;function cee(t){return e=>Promise.all(e.map(({animation:n,options:r})=>oee(t,n,r)))}function hee(t){let e=cee(t),n=wP(),r=!0;const i=l=>(u,c)=>{var f;const d=su(t,c,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:y,...S}=d;u={...u,...S,...y}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=J2(t.parent)||{},d=[],f=new Set;let p={},y=1/0;for(let T=0;T<uee;T++){const v=lee[T],g=n[v],w=u[v]!==void 0?u[v]:c[v],x=Ed(w),O=v===l?g.isActive:null;O===!1&&(y=T);let D=w===c[v]&&w!==u[v]&&x;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),g.protectedKeys={...p},!g.isActive&&O===null||!w&&!g.prevProp||By(w)||typeof w=="boolean")continue;const b=dee(g.prevProp,w);let E=b||v===l&&g.isActive&&!D&&x||T>y&&x,R=!1;const C=Array.isArray(w)?w:[w];let P=C.reduce(i(v),{});O===!1&&(P={});const{prevResolvedValues:L={}}=g,k={...L,...P},ce=Re=>{E=!0,f.has(Re)&&(R=!0,f.delete(Re)),g.needsAnimating[Re]=!0;const $=t.getValue(Re);$&&($.liveStyle=!1)};for(const Re in k){const $=P[Re],Y=L[Re];if(p.hasOwnProperty(Re))continue;let re=!1;u0($)&&u0(Y)?re=!Y2($,Y):re=$!==Y,re?$!=null?ce(Re):f.add(Re):$!==void 0&&f.has(Re)?ce(Re):g.protectedKeys[Re]=!0}g.prevProp=w,g.prevResolvedValues=P,g.isActive&&(p={...p,...P}),r&&t.blockInitialAnimation&&(E=!1);const fe=D&&b;E&&(!fe||R)&&d.push(...C.map(Re=>{const $={type:v};if(typeof Re=="string"&&r&&!fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,re=su(Y,Re);if(Y.enteringChildren&&re){const{delayChildren:we}=re.transition||{};$.delay=Q2(Y.enteringChildren,t,we)}}return{animation:Re,options:$}}))}if(f.size){const T={};if(typeof u.initial!="boolean"){const v=su(t,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(T.transition=v.transition)}f.forEach(v=>{const g=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),T[v]=g??null}),d.push({animation:T})}let S=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=wP()}}}function dee(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Y2(e,t):!1}function $o(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wP(){return{animate:$o(!0),whileInView:$o(),whileHover:$o(),whileTap:$o(),whileDrag:$o(),whileFocus:$o(),exit:$o()}}class To{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fee extends To{constructor(e){super(e),e.animationState||(e.animationState=hee(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();By(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let pee=0;class mee extends To{constructor(){super(...arguments),this.id=pee++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const gee={animation:{Feature:fee},exit:{Feature:mee}};function Td(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ef(t){return{point:{x:t.pageX,y:t.pageY}}}const yee=t=>e=>vb(e)&&t(e,ef(e));function Ah(t,e,n,r){return Td(t,e,yee(n),r)}const Z2=1e-4,vee=1-Z2,_ee=1+Z2,eF=.01,wee=0-eF,See=0+eF;function pn(t){return t.max-t.min}function Eee(t,e,n){return Math.abs(t-e)<=n}function SP(t,e,n,r=.5){t.origin=r,t.originPoint=rt(e.min,e.max,t.origin),t.scale=pn(n)/pn(e),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=vee&&t.scale<=_ee||isNaN(t.scale))&&(t.scale=1),(t.translate>=wee&&t.translate<=See||isNaN(t.translate))&&(t.translate=0)}function Ph(t,e,n,r){SP(t.x,e.x,n.x,r?r.originX:void 0),SP(t.y,e.y,n.y,r?r.originY:void 0)}function EP(t,e,n){t.min=n.min+e.min,t.max=t.min+pn(e)}function Tee(t,e,n){EP(t.x,e.x,n.x),EP(t.y,e.y,n.y)}function TP(t,e,n){t.min=e.min-n.min,t.max=t.min+pn(e)}function xg(t,e,n){TP(t.x,e.x,n.x),TP(t.y,e.y,n.y)}function Jn(t){return[t("x"),t("y")]}const tF=({current:t})=>t?t.ownerDocument.defaultView:null,bP=(t,e)=>Math.abs(t-e);function bee(t,e){const n=bP(t.x,e.x),r=bP(t.y,e.y);return Math.sqrt(n**2+r**2)}class nF{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=I_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=bee(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:S}=f,{timestamp:T}=Ut;this.history.push({...S,timestamp:T});const{onStart:v,onMove:g}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=b_(p,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:y,onSessionEnd:S,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=I_(f.type==="pointercancel"?this.lastMoveEventInfo:b_(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,v),S&&S(f,v)},!vb(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=ef(e),l=b_(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Ut;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,I_(l,this.history)),this.removeListeners=Yd(Ah(this.contextWindow,"pointermove",this.handlePointerMove),Ah(this.contextWindow,"pointerup",this.handlePointerUp),Ah(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),po(this.updatePoint)}}function b_(t,e){return e?{point:e(t.point)}:t}function IP(t,e){return{x:t.x-e.x,y:t.y-e.y}}function I_({point:t},e){return{point:t,delta:IP(t,rF(e)),offset:IP(t,Iee(e)),velocity:Ree(e,.1)}}function Iee(t){return t[0]}function rF(t){return t[t.length-1]}function Ree(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=rF(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>pi(e)));)n--;if(!r)return{x:0,y:0};const s=or(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Cee(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?rt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?rt(n,t,r.max):Math.min(t,n)),t}function RP(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xee(t,{top:e,left:n,bottom:r,right:i}){return{x:RP(t.x,n,i),y:RP(t.y,e,r)}}function CP(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Aee(t,e){return{x:CP(t.x,e.x),y:CP(t.y,e.y)}}function Pee(t,e){let n=.5;const r=pn(t),i=pn(e);return i>r?n=_d(e.min,e.max-r,t.min):r>i&&(n=_d(t.min,t.max-i,e.min)),Xi(0,1,n)}function kee(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const d0=.35;function Dee(t=d0){return t===!1?t=0:t===!0&&(t=d0),{x:xP(t,"left","right"),y:xP(t,"top","bottom")}}function xP(t,e,n){return{min:AP(t,e),max:AP(t,n)}}function AP(t,e){return typeof t=="number"?t:t[e]||0}const Oee=new WeakMap;class Mee{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ef(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:y,onDragStart:S}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=BJ(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jn(v=>{let g=this.getAxisMotionValue(v).get()||0;if(mi.test(g)){const{projection:w}=this.visualElement;if(w&&w.layout){const x=w.layout.layoutBox[v];x&&(g=pn(x)*(parseFloat(g)/100))}}this.originPoint[v]=g}),S&&Je.postRender(()=>S(d,f)),c0(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:S,onDrag:T}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=f;if(y&&this.currentDirection===null){this.currentDirection=Lee(v),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),T&&T(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Jn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new nF(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:tF(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Je.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!hp(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Cee(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&$l(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=xee(r.layoutBox,e):this.constraints=!1,this.elastic=Dee(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Jn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=kee(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!$l(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=NZ(r,i.root,this.visualElement.getTransformPagePoint());let o=Aee(i.layout.layoutBox,s);if(n){const a=n(OZ(o));this.hasMutatedConstraints=!!a,a&&(o=j2(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Jn(c=>{if(!hp(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return c0(this.visualElement,e),r.start(xb(e,r,0,n,this.visualElement,!1))}stopAnimation(){Jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Jn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Jn(n=>{const{drag:r}=this.getProps();if(!hp(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-rt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!$l(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Jn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Pee({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Jn(o=>{if(!hp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(rt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Oee.set(this.visualElement,this);const e=this.visualElement.current,n=Ah(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();$l(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Je.read(r);const o=Td(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Jn(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=d0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function hp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Lee(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Nee extends To{constructor(e){super(e),this.removeGroupControls=hr,this.removeListeners=hr,this.controls=new Mee(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const PP=t=>(e,n)=>{t&&Je.postRender(()=>t(e,n))};class Vee extends To{constructor(){super(...arguments),this.removePointerDownListener=hr}onPointerDown(e){this.session=new nF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:PP(e),onStart:PP(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Je.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ah(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const im={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let R_=!1;class Fee extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),R_&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),im.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,R_=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Je.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;R_=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iF(t){const[e,n]=R2(),r=I.useContext(QT);return M.jsx(Fee,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(F2),isPresent:e,safeToRemove:n})}function Bee(t,e,n){const r=sn(t)?t:xu(t);return r.start(xb("",r,e,n)),r.animation}const jee=(t,e)=>t.depth-e.depth;class $ee{constructor(){this.children=[],this.isDirty=!1}add(e){ZT(this.children,e),this.isDirty=!0}remove(e){eb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jee),this.isDirty=!1,this.children.forEach(e)}}function Uee(t,e){const n=In.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(po(r),t(s-e))};return Je.setup(r,!0),()=>po(r)}const sF=["TopLeft","TopRight","BottomLeft","BottomRight"],zee=sF.length,kP=t=>typeof t=="string"?parseFloat(t):t,DP=t=>typeof t=="number"||le.test(t);function Wee(t,e,n,r,i,s){i?(t.opacity=rt(0,n.opacity??1,Hee(r)),t.opacityExit=rt(e.opacity??1,0,Kee(r))):s&&(t.opacity=rt(e.opacity??1,n.opacity??1,r));for(let o=0;o<zee;o++){const a=`border${sF[o]}Radius`;let l=OP(e,a),u=OP(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||DP(l)===DP(u)?(t[a]=Math.max(rt(kP(l),kP(u),r),0),(mi.test(u)||mi.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,r))}function OP(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Hee=oF(0,.5,HV),Kee=oF(.5,.95,hr);function oF(t,e,n){return r=>r<t?0:r>e?1:n(_d(t,e,r))}function MP(t,e){t.min=e.min,t.max=e.max}function br(t,e){MP(t.x,e.x),MP(t.y,e.y)}function LP(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function NP(t,e,n,r,i){return t-=e,t=Cg(t,1/n,r),i!==void 0&&(t=Cg(t,1/i,r)),t}function qee(t,e=0,n=1,r=.5,i,s=t,o=t){if(mi.test(e)&&(e=parseFloat(e),e=rt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=rt(s.min,s.max,r);t===s&&(a-=e),t.min=NP(t.min,e,n,a,i),t.max=NP(t.max,e,n,a,i)}function VP(t,e,[n,r,i],s,o){qee(t,e[n],e[r],e[i],e.scale,s,o)}const Gee=["x","scaleX","originX"],Xee=["y","scaleY","originY"];function FP(t,e,n,r){VP(t.x,e,Gee,n?n.x:void 0,r?r.x:void 0),VP(t.y,e,Xee,n?n.y:void 0,r?r.y:void 0)}function BP(t){return t.translate===0&&t.scale===1}function aF(t){return BP(t.x)&&BP(t.y)}function jP(t,e){return t.min===e.min&&t.max===e.max}function Qee(t,e){return jP(t.x,e.x)&&jP(t.y,e.y)}function $P(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lF(t,e){return $P(t.x,e.x)&&$P(t.y,e.y)}function UP(t){return pn(t.x)/pn(t.y)}function zP(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Yee{constructor(){this.members=[]}add(e){ZT(this.members,e),e.scheduleRender()}remove(e){if(eb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jee(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:p,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const C_=["","X","Y","Z"],Zee=1e3;let ete=0;function x_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function uF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=G2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Je,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&uF(r)}function cF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=ete++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rte),this.nodes.forEach(ate),this.nodes.forEach(lte),this.nodes.forEach(ite)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $ee)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=I2(o)&&!HJ(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c,d=0;const f=()=>this.root.updateBlockedByResize=!1;Je.read(()=>{d=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,c&&c(),c=Uee(f,250),im.hasAnimatedSinceResize&&(im.hasAnimatedSinceResize=!1,this.nodes.forEach(KP)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||fte,{onLayoutAnimationStart:S,onLayoutAnimationComplete:T}=u.getProps(),v=!this.targetLayout||!lF(this.targetLayout,p),g=!d&&f;if(this.options.layoutRoot||this.resumeFrom||g||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...mb(y,"layout"),onPlay:S,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,g)}else d||KP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),po(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ute),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WP);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(HP);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ote),this.nodes.forEach(tte),this.nodes.forEach(nte)):this.nodes.forEach(HP),this.clearAllSnapshots();const a=In.now();Ut.delta=Xi(0,1e3/60,a-Ut.timestamp),Ut.timestamp=a,Ut.isProcessing=!0,g_.update.process(Ut),g_.preRender.process(Ut),g_.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ste),this.sharedNodes.forEach(cte)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pn(this.snapshot.measuredBox.x)&&!pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!aF(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||qo(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),pte(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return It();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(mte))){const{scroll:c}=this.root;c&&(Ul(a.x,c.offset.x),Ul(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=It();if(br(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&br(a,o),Ul(a.x,d.offset.x),Ul(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=It();br(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&zl(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),qo(c.latestValues)&&zl(l,c.latestValues)}return qo(this.latestValues)&&zl(l,this.latestValues),l}removeTransform(o){const a=It();br(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!qo(u.latestValues))continue;o0(u.latestValues)&&u.updateSnapshot();const c=It(),d=u.measurePageBox();br(c,d),FP(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return qo(this.latestValues)&&FP(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!this.layout||!(c||d))return;this.resolvedRelativeTargetAt=Ut.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Tee(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):br(this.target,this.layout.layoutBox),U2(this.target,this.targetDelta)):br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||o0(this.parent.latestValues)||$2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),xg(this.relativeTargetOrigin,a,l),br(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;br(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;LZ(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=It());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LP(this.prevProjectionDelta.x,this.projectionDelta.x),LP(this.prevProjectionDelta.y,this.projectionDelta.y)),Ph(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!zP(this.projectionDelta.x,this.prevProjectionDelta.x)||!zP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wl(),this.projectionDelta=Wl(),this.projectionDeltaWithTransform=Wl()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=It(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,S=p!==y,T=this.getStack(),v=!T||T.members.length<=1,g=!!(S&&!v&&this.options.crossfade===!0&&!this.path.some(dte));this.animationProgress=0;let w;this.mixTargetDelta=x=>{const O=x/1e3;qP(d.x,o.x,O),qP(d.y,o.y,O),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xg(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hte(this.relativeTarget,this.relativeTargetOrigin,f,O),w&&Qee(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=It()),br(w,this.relativeTarget)),S&&(this.animationValues=c,Wee(c,u,this.latestValues,O,g,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(po(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{im.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xu(0)),this.currentAnimation=Bee(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zee),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&hF(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||It();const d=pn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=pn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}br(a,l),zl(a,c),Ph(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Yee),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&x_("z",o,u,this.animationValues);for(let c=0;c<C_.length;c++)x_(`rotate${C_[c]}`,o,u,this.animationValues),x_(`skew${C_[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=rm(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=rm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!qo(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Jee(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const y in s0){if(c[y]===void 0)continue;const{correct:S,applyTo:T,isCSSVariable:v}=s0[y],g=d==="none"?c[y]:S(c[y],u);if(T){const w=T.length;for(let x=0;x<w;x++)o[T[x]]=g}else v?this.options.visualElement.renderState.vars[y]=g:o[y]=g}this.options.layoutId&&(o.pointerEvents=u===this?rm(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(WP),this.root.sharedNodes.clear()}}}function tte(t){t.updateLayout()}function nte(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Jn(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=pn(f);f.min=r[d].min,f.max=f.min+p}):hF(s,e.layoutBox,r)&&Jn(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=pn(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Wl();Ph(a,r,e.layoutBox);const l=Wl();o?Ph(l,t.applyTransform(i,!0),e.measuredBox):Ph(l,r,e.layoutBox);const u=!aF(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const y=It();xg(y,e.layoutBox,f.layoutBox);const S=It();xg(S,r,p.layoutBox),lF(y,S)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function rte(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ite(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ste(t){t.clearSnapshot()}function WP(t){t.clearMeasurements()}function HP(t){t.isLayoutDirty=!1}function ote(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function KP(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ate(t){t.resolveTargetDelta()}function lte(t){t.calcProjection()}function ute(t){t.resetSkewAndRotation()}function cte(t){t.removeLeadSnapshot()}function qP(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function GP(t,e,n,r){t.min=rt(e.min,n.min,r),t.max=rt(e.max,n.max,r)}function hte(t,e,n,r){GP(t.x,e.x,n.x,r),GP(t.y,e.y,n.y,r)}function dte(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const fte={duration:.45,ease:[.4,0,.1,1]},XP=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),QP=XP("applewebkit/")&&!XP("chrome/")?Math.round:hr;function YP(t){t.min=QP(t.min),t.max=QP(t.max)}function pte(t){YP(t.x),YP(t.y)}function hF(t,e,n){return t==="position"||t==="preserve-aspect"&&!Eee(UP(e),UP(n),.2)}function mte(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const gte=cF({attachResizeListener:(t,e)=>Td(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),A_={current:void 0},dF=cF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!A_.current){const t=new gte({});t.mount(window),t.setOptions({layoutScroll:!0}),A_.current=t}return A_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yte={pan:{Feature:Vee},drag:{Feature:Nee,ProjectionNode:dF,MeasureLayout:iF}};function JP(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Je.postRender(()=>s(e,ef(e)))}class vte extends To{mount(){const{current:e}=this.node;e&&(this.unmount=jJ(e,(n,r)=>(JP(this.node,r,"Start"),i=>JP(this.node,i,"End"))))}unmount(){}}class _te extends To{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yd(Td(this.node.current,"focus",()=>this.onFocus()),Td(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ZP(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Je.postRender(()=>s(e,ef(e)))}class wte extends To{mount(){const{current:e}=this.node;e&&(this.unmount=WJ(e,(n,r)=>(ZP(this.node,r,"Start"),(i,{success:s})=>ZP(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const f0=new WeakMap,P_=new WeakMap,Ste=t=>{const e=f0.get(t.target);e&&e(t)},Ete=t=>{t.forEach(Ste)};function Tte({root:t,...e}){const n=t||document;P_.has(n)||P_.set(n,{});const r=P_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Ete,{root:t,...e})),r[i]}function bte(t,e,n){const r=Tte(e);return f0.set(t,n),r.observe(t),()=>{f0.delete(t),r.unobserve(t)}}const Ite={some:0,all:1};class Rte extends To{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Ite[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return bte(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Cte(e,n))&&this.startObserver()}unmount(){}}function Cte({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xte={inView:{Feature:Rte},tap:{Feature:wte},focus:{Feature:_te},hover:{Feature:vte}},Ate={layout:{ProjectionNode:dF,MeasureLayout:iF}},Pte={...gee,...xte,...yte,...Ate},kte=DZ(Pte,HZ),Dte=""+new URL("banner-CuJgjCV8.png",import.meta.url).href,ti={colors:{background:"#fff9ec",highlight:"#ff8e52",text:"#00202b",secondaryText:"#666666",border:"#eee"}};function Ote(){return M.jsxs(X,{style:e1.container,children:[M.jsx(G,{style:e1.title,children:"Pocket Stylist"}),M.jsx(G,{children:"Welcome to your personal style assistant."})]})}const e1=ke.create({container:{flex:1,padding:20,alignItems:"center",justifyContent:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:10}}),Mte=async(t,e)=>{const n=zu(ss,"users",t);await GN(n,e,{merge:!0})},Lte=async t=>{const e=zu(ss,"users",t),n=rG(e);return(await n).exists()?(await n).data():null},Nte=async(t,e)=>{console.log("addItemToDb called for user:",t);try{const n=OT(ss,"users",t,"closet");console.log("Adding document to Firestore...");const r=await oG(n,e);return console.log("Document added with ID:",r.id),{...e,id:r.id}}catch(n){throw console.error("Error in addItemToDb:",n),n}},Vte=async t=>{const e=OT(ss,"users",t,"closet"),n=zN(e);return(await qN(n)).docs.map(i=>({id:i.id,...i.data()}))},t1=async(t,e,n)=>{const r=zu(ss,"users",t,"closet",e);await iG(r,n)},Fte=async(t,e)=>{const n=zu(ss,"users",t,"closet",e);await sG(n)},Bte=async(t,e,n)=>{const r=zu(ss,"users",t,"schedule",e);await GN(r,{date:e,...n},{merge:!0})},jte=async t=>{const e=OT(ss,"users",t,"schedule"),n=zN(e),r=await qN(n),i={};return r.forEach(s=>{i[s.id]=s.data()}),i},fF=I.createContext();function $y(){return I.useContext(fF)}function $te({children:t}){const{currentUser:e}=kV(),[n,r]=I.useState([]),[i,s]=I.useState({}),[o,a]=I.useState(!0);I.useEffect(()=>{e?(async()=>{try{const T=await Vte(e.uid);r(T);const v=await jte(e.uid);s(v)}catch(T){console.error("Error fetching data:",T)}finally{a(!1)}})():(r([]),s({}),a(!1))},[e]);const y={items:n,schedule:i,loading:o,addItem:async S=>{if(!e)throw new Error("User not authenticated");try{const T=await Nte(e.uid,{...S,rating:3,wearCount:0,createdAt:new Date().toISOString()});return r(v=>[...v,T]),T}catch(T){throw console.error("Error adding item:",T),T}},updateItem:async(S,T)=>{if(e)try{await t1(e.uid,S,T),r(v=>v.map(g=>g.id===S?{...g,...T}:g))}catch(v){console.error("Error updating item:",v)}},deleteItem:async S=>{if(e)try{await Fte(e.uid,S),r(T=>T.filter(v=>v.id!==S))}catch(T){console.error("Error deleting item:",T)}},addToSchedule:async(S,T)=>{if(e)try{await Bte(e.uid,S,T),s(v=>({...v,[S]:T}))}catch(v){console.error("Error saving schedule:",v)}},markAsWorn:async(S,T=new Date)=>{if(!e)return;const v=new Date(T).toISOString();r(g=>g.map(w=>S.includes(w.id)?{...w,lastWorn:v,wearCount:(w.wearCount||0)+1}:w));for(const g of S){const w=n.find(x=>x.id===g);w&&await t1(e.uid,g,{lastWorn:v,wearCount:(w.wearCount||0)+1})}},isItemAvailable:S=>{if(!S.lastWorn)return!0;const T=new Date(S.lastWorn),v=new Date(T);return v.setDate(T.getDate()+(S.refreshCycle||1)),new Date>=v}};return M.jsx(fF.Provider,{value:y,children:t})}const pF=2,Ute=Um.get("window").width,zte=(Ute-40)/pF;function Wte(){const{items:t,isItemAvailable:e,deleteItem:n,updateItem:r}=$y(),i=Nu(),[s,o]=I.useState(!1),[a,l]=I.useState(!1),[u,c]=I.useState(null),d=I.useRef(null),f=I.useRef(null),p=g=>{const w=g.target.files[0];if(w){o(!1);const x=new FileReader;x.onloadend=()=>{i("/camera",{state:{image:x.result}})},x.readAsDataURL(w)}},y=g=>{c(g),l(!0)},S=async()=>{confirm("Are you sure you want to delete this item?")&&(await n(u.id),l(!1))},T=async g=>{await r(u.id,{rating:g}),c(w=>({...w,rating:g}))},v=({item:g})=>{const w=e(g);return M.jsx(Ce,{onPress:()=>y(g),children:M.jsxs(X,{style:[me.itemContainer,!w&&me.unavailableItem],children:[M.jsx(Vr,{source:{uri:g.imageUri||g.image},style:me.image,resizeMode:"cover"}),M.jsxs(X,{style:me.infoContainer,children:[M.jsx(G,{style:me.itemType,children:g.type}),!w&&M.jsx(G,{style:me.unavailableText,children:"In Wash"})]})]})})};return M.jsxs(X,{style:me.container,children:[M.jsxs(X,{style:me.header,children:[M.jsx(G,{style:me.title,children:"Virtual Closet"}),M.jsx(Ce,{style:me.addButton,onPress:()=>o(!0),children:M.jsx(G,{style:me.addButtonText,children:"+ Add"})}),M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:d,style:{display:"none"},onChange:p}),M.jsx("input",{type:"file",accept:"image/*",ref:f,style:{display:"none"},onChange:p})]}),M.jsx(Pz,{data:t,renderItem:v,keyExtractor:g=>g.id,numColumns:pF,contentContainerStyle:me.listContent,ListEmptyComponent:M.jsx(G,{style:me.emptyText,children:"No items in closet. Add some!"})}),M.jsx(td,{animationType:"fade",transparent:!0,visible:s,onRequestClose:()=>o(!1),children:M.jsxs(X,{style:me.modalOverlay,children:[M.jsx(Ce,{style:me.modalBackdrop,onPress:()=>o(!1)}),M.jsxs(X,{style:me.modalContent,children:[M.jsx(G,{style:me.modalTitle,children:"Add New Item"}),M.jsx(Ce,{style:me.modalButton,onPress:()=>{o(!1),d.current.click()},children:M.jsx(G,{style:me.modalButtonText,children:"Take Photo"})}),M.jsx(Ce,{style:me.modalButton,onPress:()=>{o(!1),f.current.click()},children:M.jsx(G,{style:me.modalButtonText,children:"Choose from Library"})}),M.jsx(Ce,{style:[me.modalButton,me.cancelButton],onPress:()=>o(!1),children:M.jsx(G,{style:me.cancelButtonText,children:"Cancel"})})]})]})}),M.jsx(td,{animationType:"slide",visible:a,onRequestClose:()=>l(!1),children:M.jsx(X,{style:me.detailContainer,children:u&&M.jsxs(Dr,{children:[M.jsx(Vr,{source:{uri:u.imageUri},style:me.detailImage,resizeMode:"contain"}),M.jsxs(X,{style:me.detailInfo,children:[M.jsx(G,{style:me.detailTitle,children:u.type}),M.jsxs(G,{style:me.detailText,children:["Color: ",u.color]}),M.jsxs(G,{style:me.detailText,children:["Style: ",u.style]}),M.jsxs(G,{style:me.detailText,children:["Worn: ",u.wearCount||0," times"]}),M.jsx(G,{style:me.sectionTitle,children:"Rating"}),M.jsx(X,{style:me.ratingContainer,children:[1,2,3,4,5].map(g=>M.jsx(Ce,{onPress:()=>T(g),children:M.jsx(G,{style:[me.star,(u.rating||0)>=g?me.starFilled:me.starEmpty],children:""})},g))}),M.jsx(Ce,{style:me.deleteButton,onPress:S,children:M.jsx(G,{style:me.deleteButtonText,children:"Delete Item"})}),M.jsx(Ce,{style:me.closeDetailButton,onPress:()=>l(!1),children:M.jsx(G,{style:me.closeDetailButtonText,children:"Close"})})]})]})})})]})}const me=ke.create({container:{flex:1,padding:10,backgroundColor:"#fff"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingHorizontal:10},title:{fontSize:24,fontWeight:"bold"},addButton:{backgroundColor:"#007AFF",paddingVertical:8,paddingHorizontal:15,borderRadius:20},addButtonText:{color:"#fff",fontWeight:"bold"},listContent:{paddingBottom:20},itemContainer:{width:zte,margin:5,backgroundColor:"#f9f9f9",borderRadius:10,overflow:"hidden",elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41},unavailableItem:{opacity:.5,backgroundColor:"#eee"},image:{width:"100%",height:150},infoContainer:{padding:10},itemType:{textTransform:"capitalize",fontWeight:"bold"},unavailableText:{color:"red",fontSize:12,marginTop:5},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalBackdrop:{...ke.absoluteFillObject},modalContent:{width:"80%",maxWidth:300,backgroundColor:"white",borderRadius:20,padding:20,alignItems:"center",elevation:5},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},modalButton:{width:"100%",padding:15,backgroundColor:"#f0f0f0",borderRadius:10,marginBottom:10,alignItems:"center"},modalButtonText:{fontSize:16,color:"#007AFF"},cancelButton:{backgroundColor:"transparent",marginTop:5},cancelButtonText:{fontSize:16,color:"#FF3B30",fontWeight:"bold"},detailContainer:{flex:1,backgroundColor:"#fff"},detailImage:{width:"100%",height:400,backgroundColor:"#f0f0f0"},detailInfo:{padding:20},detailTitle:{fontSize:28,fontWeight:"bold",marginBottom:10,textTransform:"capitalize"},detailText:{fontSize:16,marginBottom:5,color:"#333"},sectionTitle:{fontSize:18,fontWeight:"bold",marginTop:20,marginBottom:10},ratingContainer:{flexDirection:"row",marginBottom:20},star:{fontSize:30,marginRight:5},starFilled:{color:"#FFD700"},starEmpty:{color:"#ddd"},deleteButton:{backgroundColor:"#FF3B30",padding:15,borderRadius:10,alignItems:"center",marginTop:20},deleteButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},closeDetailButton:{padding:15,alignItems:"center",marginTop:10},closeDetailButtonText:{color:"#007AFF",fontSize:16},emptyText:{textAlign:"center",marginTop:50,fontSize:18,color:"#999"}});function ue(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function F(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let mF=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return mF=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function p0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const m0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class se extends Error{}class Xt extends se{constructor(e,n,r,i){super(`${Xt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Uy({message:r,cause:m0(n)});const s=n==null?void 0:n.error;return e===400?new gF(e,s,r,i):e===401?new yF(e,s,r,i):e===403?new vF(e,s,r,i):e===404?new _F(e,s,r,i):e===409?new wF(e,s,r,i):e===422?new SF(e,s,r,i):e===429?new EF(e,s,r,i):e>=500?new TF(e,s,r,i):new Xt(e,s,r,i)}}class ar extends Xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Uy extends Xt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Ab extends Uy{constructor({message:e}={}){super({message:e??"Request timed out."})}}class gF extends Xt{}class yF extends Xt{}class vF extends Xt{}class _F extends Xt{}class wF extends Xt{}class SF extends Xt{}class EF extends Xt{}class TF extends Xt{}class bF extends se{constructor(){super("Could not parse response content as the length limit was reached")}}class IF extends se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Xc extends Error{constructor(e){super(e)}}const Hte=/^[a-z][a-z0-9+.-]*:/i,Kte=t=>Hte.test(t);let Sn=t=>(Sn=Array.isArray,Sn(t)),n1=Sn;function RF(t){return typeof t!="object"?{}:t??{}}function qte(t){if(!t)return!0;for(const e in t)return!1;return!0}function Gte(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k_(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Xte=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new se(`${t} must be an integer`);if(e<0)throw new se(`${t} must be a positive integer`);return e},Qte=t=>{try{return JSON.parse(t)}catch{return}},tf=t=>new Promise(e=>setTimeout(e,t)),Tl="6.10.0",Yte=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Jte(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Zte=()=>{var n;const t=Jte();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":i1(Deno.build.os),"X-Stainless-Arch":r1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":i1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":r1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=ene();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ene(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const r1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",i1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let s1;const tne=()=>s1??(s1=Zte());function nne(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function CF(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function xF(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return CF({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function AF(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rne(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const ine=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),PF="RFC3986",kF=t=>String(t),o1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:kF},sne="RFC1738";let g0=(t,e)=>(g0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),g0(t,e));const Gr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),D_=1024,one=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=D_){const l=s.length>=D_?s.slice(a,a+D_):s,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===sne&&(d===40||d===41)){u[u.length]=l.charAt(c);continue}if(d<128){u[u.length]=Gr[d];continue}if(d<2048){u[u.length]=Gr[192|d>>6]+Gr[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Gr[224|d>>12]+Gr[128|d>>6&63]+Gr[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=Gr[240|d>>18]+Gr[128|d>>12&63]+Gr[128|d>>6&63]+Gr[128|d&63]}o+=u.join("")}return o};function ane(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function a1(t,e){if(Sn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const DF={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},OF=function(t,e){Array.prototype.push.apply(t,Sn(e)?e:[e])};let l1;const bt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:one,encodeValuesOnly:!1,format:PF,formatter:kF,indices:!1,serializeDate(t){return(l1??(l1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function lne(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const O_={};function MF(t,e,n,r,i,s,o,a,l,u,c,d,f,p,y,S,T,v){let g=t,w=v,x=0,O=!1;for(;(w=w.get(O_))!==void 0&&!O;){const C=w.get(t);if(x+=1,typeof C<"u"){if(C===x)throw new RangeError("Cyclic object value");O=!0}typeof w.get(O_)>"u"&&(x=0)}if(typeof u=="function"?g=u(e,g):g instanceof Date?g=f==null?void 0:f(g):n==="comma"&&Sn(g)&&(g=a1(g,function(C){return C instanceof Date?f==null?void 0:f(C):C})),g===null){if(s)return l&&!S?l(e,bt.encoder,T,"key",p):e;g=""}if(lne(g)||ane(g)){if(l){const C=S?e:l(e,bt.encoder,T,"key",p);return[(y==null?void 0:y(C))+"="+(y==null?void 0:y(l(g,bt.encoder,T,"value",p)))]}return[(y==null?void 0:y(e))+"="+(y==null?void 0:y(String(g)))]}const D=[];if(typeof g>"u")return D;let b;if(n==="comma"&&Sn(g))S&&l&&(g=a1(g,l)),b=[{value:g.length>0?g.join(",")||null:void 0}];else if(Sn(u))b=u;else{const C=Object.keys(g);b=c?C.sort(c):C}const E=a?String(e).replace(/\./g,"%2E"):String(e),R=r&&Sn(g)&&g.length===1?E+"[]":E;if(i&&Sn(g)&&g.length===0)return R+"[]";for(let C=0;C<b.length;++C){const P=b[C],L=typeof P=="object"&&typeof P.value<"u"?P.value:g[P];if(o&&L===null)continue;const k=d&&a?P.replace(/\./g,"%2E"):P,ce=Sn(g)?typeof n=="function"?n(R,k):R:R+(d?"."+k:"["+k+"]");v.set(t,x);const fe=new WeakMap;fe.set(O_,v),OF(D,MF(L,ce,n,r,i,s,o,a,n==="comma"&&S&&Sn(g)?null:l,u,c,d,f,p,y,S,T,fe))}return D}function une(t=bt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||bt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=PF;if(typeof t.format<"u"){if(!g0(o1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=o1[n];let i=bt.filter;(typeof t.filter=="function"||Sn(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in DF?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=bt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:bt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:bt.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:bt.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:bt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?bt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:bt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:bt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:bt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:bt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:bt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:bt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:bt.strictNullHandling}}function cne(t,e={}){let n=t;const r=une(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Sn(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=DF[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const p=i[f];r.skipNulls&&n[p]===null||OF(o,MF(n[p],p,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}function hne(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let u1;function Pb(t){let e;return(u1??(e=new globalThis.TextEncoder,u1=e.encode.bind(e)))(t)}let c1;function h1(t){let e;return(c1??(e=new globalThis.TextDecoder,c1=e.decode.bind(e)))(t)}var Ln,Nn;class zy{constructor(){Ln.set(this,void 0),Nn.set(this,void 0),ue(this,Ln,new Uint8Array),ue(this,Nn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Pb(e):e;ue(this,Ln,hne([F(this,Ln,"f"),n]));const r=[];let i;for(;(i=dne(F(this,Ln,"f"),F(this,Nn,"f")))!=null;){if(i.carriage&&F(this,Nn,"f")==null){ue(this,Nn,i.index);continue}if(F(this,Nn,"f")!=null&&(i.index!==F(this,Nn,"f")+1||i.carriage)){r.push(h1(F(this,Ln,"f").subarray(0,F(this,Nn,"f")-1))),ue(this,Ln,F(this,Ln,"f").subarray(F(this,Nn,"f"))),ue(this,Nn,null);continue}const s=F(this,Nn,"f")!==null?i.preceding-1:i.preceding,o=h1(F(this,Ln,"f").subarray(0,s));r.push(o),ue(this,Ln,F(this,Ln,"f").subarray(i.index)),ue(this,Nn,null)}return r}flush(){return F(this,Ln,"f").length?this.decode(`
`):[]}}Ln=new WeakMap,Nn=new WeakMap;zy.NEWLINE_CHARS=new Set([`
`,"\r"]);zy.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dne(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function fne(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Ag={off:0,error:200,warn:300,info:400,debug:500},d1=(t,e,n)=>{if(t){if(Gte(Ag,t))return t;zt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ag))}`)}};function Qc(){}function dp(t,e,n){return!e||Ag[t]>Ag[n]?Qc:e[t].bind(e)}const pne={error:Qc,warn:Qc,info:Qc,debug:Qc};let f1=new WeakMap;function zt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return pne;const r=f1.get(e);if(r&&r[0]===n)return r[1];const i={error:dp("error",e,n),warn:dp("warn",e,n),info:dp("info",e,n),debug:dp("debug",e,n)};return f1.set(e,[n,i]),i}const Go=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Mc;class oi{constructor(e,n,r){this.iterator=e,Mc.set(this,void 0),this.controller=n,ue(this,Mc,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?zt(r):console;async function*o(){if(i)throw new se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of mne(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(c){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),c}if(u&&u.error)throw new Xt(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(l.event=="error")throw new Xt(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(p0(l))return;throw l}finally{a||n.abort()}}return new oi(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new zy,l=AF(e);for await(const u of l)for(const c of a.decode(u))yield c;for(const u of a.flush())yield u}async function*o(){if(i)throw new se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of s())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(p0(l))return;throw l}finally{a||n.abort()}}return new oi(o,n,r)}[(Mc=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new oi(()=>i(e),this.controller,F(this,Mc,"f")),new oi(()=>i(n),this.controller,F(this,Mc,"f"))]}toReadableStream(){const e=this;let n;return CF({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=Pb(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*mne(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new se("Attempted to iterate over a response with no body");const n=new yne,r=new zy,i=AF(t.body);for await(const s of gne(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*gne(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Pb(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=fne(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class yne{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=vne(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function vne(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function LF(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var d;if(e.options.stream)return zt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):oi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),l=(d=a==null?void 0:a.split(";")[0])==null?void 0:d.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const f=await n.json();return NF(f,n)}return await n.text()})();return zt(t).debug(`[${r}] response parsed`,Go({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function NF(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Yc;class Wy extends Promise{constructor(e,n,r=LF){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,Yc.set(this,void 0),ue(this,Yc,e)}_thenUnwrap(e){return new Wy(F(this,Yc,"f"),this.responsePromise,async(n,r)=>NF(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(F(this,Yc,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Yc=new WeakMap;var fp;class kb{constructor(e,n,r,i){fp.set(this,void 0),ue(this,fp,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await F(this,fp,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(fp=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class _ne extends Wy{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await LF(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Hy extends kb{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class St extends kb{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...RF(this.options.query),after:n}}:null}}class Pg extends kb{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...RF(this.options.query),after:e}}:null}}const VF=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function kh(t,e,n){return VF(),new File(t,e??"unknown_file",n)}function sm(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Db=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",p1=async(t,e)=>y0(t.body)?{...t,body:await FF(t.body,e)}:t,Na=async(t,e)=>({...t,body:await FF(t.body,e)}),m1=new WeakMap;function wne(t){const e=typeof t=="function"?t:t.fetch,n=m1.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return m1.set(e,r),r}const FF=async(t,e)=>{if(!await wne(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>v0(n,r,i))),n},BF=t=>t instanceof Blob&&"name"in t,Sne=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Db(t)||BF(t)),y0=t=>{if(Sne(t))return!0;if(Array.isArray(t))return t.some(y0);if(t&&typeof t=="object"){for(const e in t)if(y0(t[e]))return!0}return!1},v0=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,kh([await n.blob()],sm(n)));else if(Db(n))t.append(e,kh([await new Response(xF(n)).blob()],sm(n)));else if(BF(n))t.append(e,n,sm(n));else if(Array.isArray(n))await Promise.all(n.map(r=>v0(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>v0(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},jF=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Ene=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&jF(t),Tne=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function bne(t,e,n){if(VF(),t=await t,Ene(t))return t instanceof File?t:kh([await t.arrayBuffer()],t.name);if(Tne(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),kh(await _0(i),e,n)}const r=await _0(t);if(e||(e=sm(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return kh(r,e,n)}async function _0(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(jF(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Db(t))for await(const r of t)e.push(...await _0(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${Ine(t)}`)}return e}function Ine(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ie{constructor(e){this._client=e}}function $F(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const g1=Object.freeze(Object.create(null)),Rne=(t=$F)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((c,d,f)=>{var S;/[?#]/.test(d)&&(i=!0);const p=r[f];let y=(i?encodeURIComponent:t)(""+p);return f!==r.length&&(p==null||typeof p=="object"&&p.toString===((S=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??g1)??g1))==null?void 0:S.toString))&&(y=p+"",s.push({start:c.length+d.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),c+d+(f===r.length?"":y)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((c,d)=>c.start-d.start),s.length>0){let c=0;const d=s.reduce((f,p)=>{const y=" ".repeat(p.start-c),S="^".repeat(p.length);return c=p.start+p.length,f+y+S},"");throw new se(`Path parameters result in path with invalid segments:
${s.map(f=>f.error).join(`
`)}
${o}
${d}`)}return o},U=Rne($F);let UF=class extends ie{list(e,n={},r){return this._client.getAPIList(U`/chat/completions/${e}/messages`,St,{query:n,...r})}};function kg(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Ob(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function nf(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Cne(t,e){return!e||!zF(e)?{...t,choices:t.choices.map(n=>(WF(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Mb(t,e)}function Mb(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new bF;if(r.finish_reason==="content_filter")throw new IF;return WF(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>Ane(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?xne(e,r.message.content):null}}});return{...t,choices:n}}function xne(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Ane(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return kg(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:nf(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function Pne(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return kg(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return kg(n)&&(nf(n)||(n==null?void 0:n.function.strict)||!1)}function zF(t){var e;return Ob(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>nf(n)||n.type==="function"&&n.function.strict===!0))??!1}function WF(t){for(const e of t||[])if(e.type!=="function")throw new se(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function kne(t){for(const e of t??[]){if(e.type!=="function")throw new se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Dg=t=>(t==null?void 0:t.role)==="assistant",HF=t=>(t==null?void 0:t.role)==="tool";var w0,om,am,Jc,Zc,lm,eh,Ri,th,Og,Mg,bl,KF;class Lb{constructor(){w0.add(this),this.controller=new AbortController,om.set(this,void 0),am.set(this,()=>{}),Jc.set(this,()=>{}),Zc.set(this,void 0),lm.set(this,()=>{}),eh.set(this,()=>{}),Ri.set(this,{}),th.set(this,!1),Og.set(this,!1),Mg.set(this,!1),bl.set(this,!1),ue(this,om,new Promise((e,n)=>{ue(this,am,e,"f"),ue(this,Jc,n,"f")})),ue(this,Zc,new Promise((e,n)=>{ue(this,lm,e,"f"),ue(this,eh,n,"f")})),F(this,om,"f").catch(()=>{}),F(this,Zc,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},F(this,w0,"m",KF).bind(this))},0)}_connected(){this.ended||(F(this,am,"f").call(this),this._emit("connect"))}get ended(){return F(this,th,"f")}get errored(){return F(this,Og,"f")}get aborted(){return F(this,Mg,"f")}abort(){this.controller.abort()}on(e,n){return(F(this,Ri,"f")[e]||(F(this,Ri,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=F(this,Ri,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(F(this,Ri,"f")[e]||(F(this,Ri,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ue(this,bl,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ue(this,bl,!0),await F(this,Zc,"f")}_emit(e,...n){if(F(this,th,"f"))return;e==="end"&&(ue(this,th,!0),F(this,lm,"f").call(this));const r=F(this,Ri,"f")[e];if(r&&(F(this,Ri,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!F(this,bl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,Jc,"f").call(this,i),F(this,eh,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!F(this,bl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,Jc,"f").call(this,i),F(this,eh,"f").call(this,i),this._emit("end")}}_emitFinal(){}}om=new WeakMap,am=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,lm=new WeakMap,eh=new WeakMap,Ri=new WeakMap,th=new WeakMap,Og=new WeakMap,Mg=new WeakMap,bl=new WeakMap,w0=new WeakSet,KF=function(e){if(ue(this,Og,!0),e instanceof Error&&e.name==="AbortError"&&(e=new ar),e instanceof ar)return ue(this,Mg,!0),this._emit("abort",e);if(e instanceof se)return this._emit("error",e);if(e instanceof Error){const n=new se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new se(String(e)))};function Dne(t){return typeof t.parse=="function"}var cn,S0,Lg,E0,T0,b0,qF,GF;const One=10;class XF extends Lb{constructor(){super(...arguments),cn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),HF(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Dg(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),F(this,cn,"m",S0).call(this)}async finalMessage(){return await this.done(),F(this,cn,"m",Lg).call(this)}async finalFunctionToolCall(){return await this.done(),F(this,cn,"m",E0).call(this)}async finalFunctionToolCallResult(){return await this.done(),F(this,cn,"m",T0).call(this)}async totalUsage(){return await this.done(),F(this,cn,"m",b0).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=F(this,cn,"m",Lg).call(this);n&&this._emit("finalMessage",n);const r=F(this,cn,"m",S0).call(this);r&&this._emit("finalContent",r);const i=F(this,cn,"m",E0).call(this);i&&this._emit("finalFunctionToolCall",i);const s=F(this,cn,"m",T0).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",F(this,cn,"m",b0).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,cn,"m",qF).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Mb(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var p,y,S;const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s.type==="function"&&((p=s==null?void 0:s.function)==null?void 0:p.name),{maxChatCompletions:u=One}=r||{},c=n.tools.map(T=>{if(nf(T)){if(!T.$callback)throw new se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:T.$callback,name:T.function.name,description:T.function.description||"",parameters:T.function.parameters,parse:T.$parseRaw,strict:!0}}}return T}),d={};for(const T of c)T.type==="function"&&(d[T.function.name||T.function.function.name]=T.function);const f="tools"in n?c.map(T=>T.type==="function"?{type:"function",function:{name:T.function.name||T.function.function.name,parameters:T.function.parameters,description:T.function.description,strict:T.function.strict}}:T):void 0;for(const T of n.messages)this._addMessage(T,!1);for(let T=0;T<u;++T){const g=(y=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:f,messages:[...this.messages]},r)).choices[0])==null?void 0:y.message;if(!g)throw new se("missing message in ChatCompletion response");if(!((S=g.tool_calls)!=null&&S.length))return;for(const w of g.tool_calls){if(w.type!=="function")continue;const x=w.id,{name:O,arguments:D}=w.function,b=d[O];if(b){if(l&&l!==O){const P=`Invalid tool_call: ${JSON.stringify(O)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:P});continue}}else{const P=`Invalid tool_call: ${JSON.stringify(O)}. Available options are: ${Object.keys(d).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:P});continue}let E;try{E=Dne(b)?await b.parse(D):D}catch(P){const L=P instanceof Error?P.message:String(P);this._addMessage({role:i,tool_call_id:x,content:L});continue}const R=await b.function(E,this),C=F(this,cn,"m",GF).call(this,R);if(this._addMessage({role:i,tool_call_id:x,content:C}),l)return}}}}cn=new WeakSet,S0=function(){return F(this,cn,"m",Lg).call(this).content??null},Lg=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Dg(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new se("stream ended without producing a ChatCompletionMessage with role=assistant")},E0=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Dg(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},T0=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(HF(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},b0=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},qF=function(e){if(e.n!=null&&e.n>1)throw new se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},GF=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Nb extends XF{static runTools(e,n,r){const i=new Nb,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),Dg(e)&&e.content&&this._emit("content",e.content)}}const QF=1,YF=2,JF=4,ZF=8,eB=16,tB=32,nB=64,rB=128,iB=256,sB=rB|iB,oB=eB|tB|sB|nB,aB=QF|YF|oB,lB=JF|ZF,Mne=aB|lB,Lt={STR:QF,NUM:YF,ARR:JF,OBJ:ZF,NULL:eB,BOOL:tB,NAN:nB,INFINITY:rB,MINUS_INFINITY:iB,INF:sB,SPECIAL:oB,ATOM:aB,COLLECTION:lB,ALL:Mne};class Lne extends Error{}class Nne extends Error{}function Vne(t,e=Lt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Fne(t.trim(),e)}const Fne=(t,e)=>{const n=t.length;let r=0;const i=f=>{throw new Lne(`${f} at position ${r}`)},s=f=>{throw new Nne(`${f} at position ${r}`)},o=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||Lt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Lt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Lt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Lt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Lt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Lt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):c()),a=()=>{const f=r;let p=!1;for(r++;r<n&&(t[r]!=='"'||p&&t[r-1]==="\\");)p=t[r]==="\\"?!p:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(f,++r-Number(p)))}catch(y){s(String(y))}else if(Lt.STR&e)try{return JSON.parse(t.substring(f,r-Number(p))+'"')}catch{return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;t[r]!=="}";){if(d(),r>=n&&Lt.OBJ&e)return f;const p=a();d(),r++;try{const y=o();Object.defineProperty(f,p,{value:y,writable:!0,enumerable:!0,configurable:!0})}catch(y){if(Lt.OBJ&e)return f;throw y}d(),t[r]===","&&r++}}catch{if(Lt.OBJ&e)return f;i("Expected '}' at end of object")}return r++,f},u=()=>{r++;const f=[];try{for(;t[r]!=="]";)f.push(o()),d(),t[r]===","&&r++}catch{if(Lt.ARR&e)return f;i("Expected ']' at end of array")}return r++,f},c=()=>{if(r===0){t==="-"&&Lt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(Lt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(p))}}const f=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Lt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(f,r))}catch{t.substring(f,r)==="-"&&Lt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(y){s(String(y))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},y1=t=>Vne(t,Lt.ALL^Lt.NUM);var Tt,Ii,pl,Ps,M_,pp,L_,N_,V_,mp,F_,v1;class bd extends XF{constructor(e){super(),Tt.add(this),Ii.set(this,void 0),pl.set(this,void 0),Ps.set(this,void 0),ue(this,Ii,e),ue(this,pl,[])}get currentChatCompletionSnapshot(){return F(this,Ps,"f")}static fromReadableStream(e){const n=new bd(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new bd(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,Tt,"m",M_).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)F(this,Tt,"m",L_).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new ar;return this._addChatCompletion(F(this,Tt,"m",mp).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),F(this,Tt,"m",M_).call(this),this._connected();const i=oi.fromReadableStream(e,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(F(this,Tt,"m",mp).call(this)),F(this,Tt,"m",L_).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new ar;return this._addChatCompletion(F(this,Tt,"m",mp).call(this))}[(Ii=new WeakMap,pl=new WeakMap,Ps=new WeakMap,Tt=new WeakSet,M_=function(){this.ended||ue(this,Ps,void 0)},pp=function(n){let r=F(this,pl,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},F(this,pl,"f")[n.index]=r,r)},L_=function(n){var i,s,o,a,l,u,c,d,f,p,y,S,T,v,g;if(this.ended)return;const r=F(this,Tt,"m",v1).call(this,n);this._emit("chunk",n,r);for(const w of n.choices){const x=r.choices[w.index];w.delta.content!=null&&((i=x.message)==null?void 0:i.role)==="assistant"&&((s=x.message)!=null&&s.content)&&(this._emit("content",w.delta.content,x.message.content),this._emit("content.delta",{delta:w.delta.content,snapshot:x.message.content,parsed:x.message.parsed})),w.delta.refusal!=null&&((o=x.message)==null?void 0:o.role)==="assistant"&&((a=x.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:w.delta.refusal,snapshot:x.message.refusal}),((l=w.logprobs)==null?void 0:l.content)!=null&&((u=x.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=w.logprobs)==null?void 0:c.content,snapshot:((d=x.logprobs)==null?void 0:d.content)??[]}),((f=w.logprobs)==null?void 0:f.refusal)!=null&&((p=x.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(y=w.logprobs)==null?void 0:y.refusal,snapshot:((S=x.logprobs)==null?void 0:S.refusal)??[]});const O=F(this,Tt,"m",pp).call(this,x);x.finish_reason&&(F(this,Tt,"m",V_).call(this,x),O.current_tool_call_index!=null&&F(this,Tt,"m",N_).call(this,x,O.current_tool_call_index));for(const D of w.delta.tool_calls??[])O.current_tool_call_index!==D.index&&(F(this,Tt,"m",V_).call(this,x),O.current_tool_call_index!=null&&F(this,Tt,"m",N_).call(this,x,O.current_tool_call_index)),O.current_tool_call_index=D.index;for(const D of w.delta.tool_calls??[]){const b=(T=x.message.tool_calls)==null?void 0:T[D.index];b!=null&&b.type&&((b==null?void 0:b.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(v=b.function)==null?void 0:v.name,index:D.index,arguments:b.function.arguments,parsed_arguments:b.function.parsed_arguments,arguments_delta:((g=D.function)==null?void 0:g.arguments)??""}):(b==null||b.type,void 0))}}},N_=function(n,r){var o,a,l;if(F(this,Tt,"m",pp).call(this,n).done_tool_calls.has(r))return;const s=(o=n.message.tool_calls)==null?void 0:o[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(a=F(this,Ii,"f"))==null?void 0:a.tools)==null?void 0:l.find(c=>kg(c)&&c.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:nf(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},V_=function(n){var i,s;const r=F(this,Tt,"m",pp).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=F(this,Tt,"m",F_).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},mp=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");const n=F(this,Ps,"f");if(!n)throw new se("request ended without sending any chunks");return ue(this,Ps,void 0),ue(this,pl,[]),Bne(n,F(this,Ii,"f"))},F_=function(){var r;const n=(r=F(this,Ii,"f"))==null?void 0:r.response_format;return Ob(n)?n:null},v1=function(n){var r,i,s,o;let a=F(this,Ps,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=ue(this,Ps,{...u,choices:[]});for(const{delta:c,finish_reason:d,index:f,logprobs:p=null,...y}of n.choices){let S=a.choices[f];if(S||(S=a.choices[f]={finish_reason:d,index:f,message:{},logprobs:p,...y}),p)if(!S.logprobs)S.logprobs=Object.assign({},p);else{const{content:D,refusal:b,...E}=p;Object.assign(S.logprobs,E),D&&((r=S.logprobs).content??(r.content=[]),S.logprobs.content.push(...D)),b&&((i=S.logprobs).refusal??(i.refusal=[]),S.logprobs.refusal.push(...b))}if(d&&(S.finish_reason=d,F(this,Ii,"f")&&zF(F(this,Ii,"f")))){if(d==="length")throw new bF;if(d==="content_filter")throw new IF}if(Object.assign(S,y),!c)continue;const{content:T,refusal:v,function_call:g,role:w,tool_calls:x,...O}=c;if(Object.assign(S.message,O),v&&(S.message.refusal=(S.message.refusal||"")+v),w&&(S.message.role=w),g&&(S.message.function_call?(g.name&&(S.message.function_call.name=g.name),g.arguments&&((s=S.message.function_call).arguments??(s.arguments=""),S.message.function_call.arguments+=g.arguments)):S.message.function_call=g),T&&(S.message.content=(S.message.content||"")+T,!S.message.refusal&&F(this,Tt,"m",F_).call(this)&&(S.message.parsed=y1(S.message.content))),x){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:D,id:b,type:E,function:R,...C}of x){const P=(o=S.message.tool_calls)[D]??(o[D]={});Object.assign(P,C),b&&(P.id=b),E&&(P.type=E),R&&(P.function??(P.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(P.function.name=R.name),R!=null&&R.arguments&&(P.function.arguments+=R.arguments,Pne(F(this,Ii,"f"),P)&&(P.function.parsed_arguments=y1(P.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new oi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Bne(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:f,...p})=>{if(!c)throw new se(`missing finish_reason for choice ${d}`);const{content:y=null,function_call:S,tool_calls:T,...v}=u,g=u.role;if(!g)throw new se(`missing role for choice ${d}`);if(S){const{arguments:w,name:x}=S;if(w==null)throw new se(`missing function_call.arguments for choice ${d}`);if(!x)throw new se(`missing function_call.name for choice ${d}`);return{...p,message:{content:y,function_call:{arguments:w,name:x},role:g,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}return T?{...p,index:d,finish_reason:c,logprobs:f,message:{...v,role:g,content:y,refusal:u.refusal??null,tool_calls:T.map((w,x)=>{const{function:O,type:D,id:b,...E}=w,{arguments:R,name:C,...P}=O||{};if(b==null)throw new se(`missing choices[${d}].tool_calls[${x}].id
${gp(t)}`);if(D==null)throw new se(`missing choices[${d}].tool_calls[${x}].type
${gp(t)}`);if(C==null)throw new se(`missing choices[${d}].tool_calls[${x}].function.name
${gp(t)}`);if(R==null)throw new se(`missing choices[${d}].tool_calls[${x}].function.arguments
${gp(t)}`);return{...E,id:b,type:D,function:{...P,name:C,arguments:R}}})}}:{...p,message:{...v,content:y,role:g,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Cne(l,e)}function gp(t){return JSON.stringify(t)}class Ng extends bd{static fromReadableStream(e){const n=new Ng(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new Ng(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let Vb=class extends ie{constructor(){super(...arguments),this.messages=new UF(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(U`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(U`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",St,{query:e,...n})}delete(e,n){return this._client.delete(U`/chat/completions/${e}`,n)}parse(e,n){return kne(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Mb(r,e))}runTools(e,n){return e.stream?Ng.runTools(this._client,e,n):Nb.runTools(this._client,e,n)}stream(e,n){return bd.createChatCompletion(this._client,e,n)}};Vb.Messages=UF;class Fb extends ie{constructor(){super(...arguments),this.completions=new Vb(this._client)}}Fb.Completions=Vb;const uB=Symbol("brand.privateNullableHeaders");function*jne(t){if(!t)return;if(uB in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():n1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=n1(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const ee=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of jne(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[uB]:!0,values:e,nulls:n}};class cB extends ie{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:ee([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class hB extends ie{create(e,n){return this._client.post("/audio/transcriptions",Na({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class dB extends ie{create(e,n){return this._client.post("/audio/translations",Na({body:e,...n,__metadata:{model:e.model}},this._client))}}class rf extends ie{constructor(){super(...arguments),this.transcriptions=new hB(this._client),this.translations=new dB(this._client),this.speech=new cB(this._client)}}rf.Transcriptions=hB;rf.Translations=dB;rf.Speech=cB;class fB extends ie{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(U`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",St,{query:e,...n})}cancel(e,n){return this._client.post(U`/batches/${e}/cancel`,n)}}class pB extends ie{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/assistants/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(U`/assistants/${e}`,{body:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",St,{query:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/assistants/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let mB=class extends ie{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class gB extends ie{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Ky=class extends ie{constructor(){super(...arguments),this.sessions=new mB(this._client),this.transcriptionSessions=new gB(this._client)}};Ky.Sessions=mB;Ky.TranscriptionSessions=gB;class yB extends ie{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(U`/chatkit/sessions/${e}/cancel`,{...n,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let vB=class extends ie{retrieve(e,n){return this._client.get(U`/chatkit/threads/${e}`,{...n,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Pg,{query:e,...n,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/chatkit/threads/${e}`,{...n,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(U`/chatkit/threads/${e}/items`,Pg,{query:n,...r,headers:ee([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class qy extends ie{constructor(){super(...arguments),this.sessions=new yB(this._client),this.threads=new vB(this._client)}}qy.Sessions=yB;qy.Threads=vB;class _B extends ie{create(e,n,r){return this._client.post(U`/threads/${e}/messages`,{body:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(U`/threads/${i}/messages/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(U`/threads/${i}/messages/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(U`/threads/${e}/messages`,St,{query:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(U`/threads/${i}/messages/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class wB extends ie{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(U`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(U`/threads/${i}/runs/${e}/steps`,St,{query:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const $ne=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var B_={};const ml=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=B_==null?void 0:B_[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var Wt,ua,I0,Jr,um,xr,ca,Hl,Zo,Vg,Vn,cm,hm,Dh,nh,rh,_1,w1,S1,E1,T1,b1,I1;class Oh extends Lb{constructor(){super(...arguments),Wt.add(this),I0.set(this,[]),Jr.set(this,{}),um.set(this,{}),xr.set(this,void 0),ca.set(this,void 0),Hl.set(this,void 0),Zo.set(this,void 0),Vg.set(this,void 0),Vn.set(this,void 0),cm.set(this,void 0),hm.set(this,void 0),Dh.set(this,void 0)}[(I0=new WeakMap,Jr=new WeakMap,um=new WeakMap,xr=new WeakMap,ca=new WeakMap,Hl=new WeakMap,Zo=new WeakMap,Vg=new WeakMap,Vn=new WeakMap,cm=new WeakMap,hm=new WeakMap,Dh=new WeakMap,Wt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ua;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=oi.fromReadableStream(e,this.controller);for await(const o of i)F(this,Wt,"m",nh).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new ar;return this._addRun(F(this,Wt,"m",rh).call(this))}toReadableStream(){return new oi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new ua;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,Wt,"m",nh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new ar;return this._addRun(F(this,Wt,"m",rh).call(this))}static createThreadAssistantStream(e,n,r){const i=new ua;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new ua;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return F(this,cm,"f")}currentRun(){return F(this,hm,"f")}currentMessageSnapshot(){return F(this,xr,"f")}currentRunStepSnapshot(){return F(this,Dh,"f")}async finalRunSteps(){return await this.done(),Object.values(F(this,Jr,"f"))}async finalMessages(){return await this.done(),Object.values(F(this,um,"f"))}async finalRun(){if(await this.done(),!F(this,ca,"f"))throw Error("Final run was not received.");return F(this,ca,"f")}async _createThreadAssistantStream(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of o)F(this,Wt,"m",nh).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new ar;return this._addRun(F(this,Wt,"m",rh).call(this))}async _createAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,Wt,"m",nh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new ar;return this._addRun(F(this,Wt,"m",rh).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(k_(s)&&k_(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!k_(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];l==null?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}ua=Oh,nh=function(e){if(!this.ended)switch(ue(this,cm,e),F(this,Wt,"m",S1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":F(this,Wt,"m",I1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":F(this,Wt,"m",w1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":F(this,Wt,"m",_1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},rh=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");if(!F(this,ca,"f"))throw Error("Final run has not been received");return F(this,ca,"f")},_1=function(e){const[n,r]=F(this,Wt,"m",T1).call(this,e,F(this,xr,"f"));ue(this,xr,n),F(this,um,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=F(this,Hl,"f")){if(F(this,Zo,"f"))switch(F(this,Zo,"f").type){case"text":this._emit("textDone",F(this,Zo,"f").text,F(this,xr,"f"));break;case"image_file":this._emit("imageFileDone",F(this,Zo,"f").image_file,F(this,xr,"f"));break}ue(this,Hl,i.index)}ue(this,Zo,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(F(this,Hl,"f")!==void 0){const i=e.data.content[F(this,Hl,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,F(this,xr,"f"));break;case"text":this._emit("textDone",i.text,F(this,xr,"f"));break}}F(this,xr,"f")&&this._emit("messageDone",e.data),ue(this,xr,void 0)}},w1=function(e){const n=F(this,Wt,"m",E1).call(this,e);switch(ue(this,Dh,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==F(this,Vg,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(F(this,Vn,"f")&&this._emit("toolCallDone",F(this,Vn,"f")),ue(this,Vg,s.index),ue(this,Vn,n.step_details.tool_calls[s.index]),F(this,Vn,"f")&&this._emit("toolCallCreated",F(this,Vn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ue(this,Dh,void 0),e.data.step_details.type=="tool_calls"&&F(this,Vn,"f")&&(this._emit("toolCallDone",F(this,Vn,"f")),ue(this,Vn,void 0)),this._emit("runStepDone",e.data,n);break}},S1=function(e){F(this,I0,"f").push(e),this._emit("event",e)},E1=function(e){switch(e.event){case"thread.run.step.created":return F(this,Jr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=F(this,Jr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=ua.accumulateDelta(n,r.delta);F(this,Jr,"f")[e.data.id]=i}return F(this,Jr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":F(this,Jr,"f")[e.data.id]=e.data;break}if(F(this,Jr,"f")[e.data.id])return F(this,Jr,"f")[e.data.id];throw new Error("No snapshot available")},T1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=F(this,Wt,"m",b1).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},b1=function(e,n){return ua.accumulateDelta(n,e)},I1=function(e){switch(ue(this,hm,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ue(this,ca,e.data),F(this,Vn,"f")&&(this._emit("toolCallDone",F(this,Vn,"f")),ue(this,Vn,void 0));break}};let Bb=class extends ie{constructor(){super(...arguments),this.steps=new wB(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(U`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(U`/threads/${i}/runs/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(U`/threads/${i}/runs/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(U`/threads/${e}/runs`,St,{query:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(U`/threads/${i}/runs/${e}/cancel`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return Oh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await tf(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return Oh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(U`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return Oh.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Bb.Steps=wB;class Gy extends ie{constructor(){super(...arguments),this.runs=new Bb(this._client),this.messages=new _B(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/threads/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(U`/threads/${e}`,{body:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(U`/threads/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Oh.createThreadAssistantStream(e,this._client.beta.threads,n)}}Gy.Runs=Bb;Gy.Messages=_B;class Xu extends ie{constructor(){super(...arguments),this.realtime=new Ky(this._client),this.chatkit=new qy(this._client),this.assistants=new pB(this._client),this.threads=new Gy(this._client)}}Xu.Realtime=Ky;Xu.ChatKit=qy;Xu.Assistants=pB;Xu.Threads=Gy;class SB extends ie{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class EB extends ie{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(U`/containers/${i}/files/${e}/content`,{...r,headers:ee([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let jb=class extends ie{constructor(){super(...arguments),this.content=new EB(this._client)}create(e,n,r){return this._client.post(U`/containers/${e}/files`,Na({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(U`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(U`/containers/${e}/files`,St,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(U`/containers/${i}/files/${e}`,{...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}};jb.Content=EB;class $b extends ie{constructor(){super(...arguments),this.files=new jb(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(U`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",St,{query:e,...n})}delete(e,n){return this._client.delete(U`/containers/${e}`,{...n,headers:ee([{Accept:"*/*"},n==null?void 0:n.headers])})}}$b.Files=jb;class TB extends ie{create(e,n,r){const{include:i,...s}=n;return this._client.post(U`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(U`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(U`/conversations/${e}/items`,Pg,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(U`/conversations/${i}/items/${e}`,r)}}class Ub extends ie{constructor(){super(...arguments),this.items=new TB(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(U`/conversations/${e}`,n)}update(e,n,r){return this._client.post(U`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(U`/conversations/${e}`,n)}}Ub.Items=TB;class bB extends ie{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&zt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(zt(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=$ne(l)}),o)))}}class IB extends ie{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(U`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(U`/evals/${i}/runs/${e}/output_items`,St,{query:s,...r})}}class zb extends ie{constructor(){super(...arguments),this.outputItems=new IB(this._client)}create(e,n,r){return this._client.post(U`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(U`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(U`/evals/${e}/runs`,St,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(U`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(U`/evals/${i}/runs/${e}`,r)}}zb.OutputItems=IB;class Wb extends ie{constructor(){super(...arguments),this.runs=new zb(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(U`/evals/${e}`,n)}update(e,n,r){return this._client.post(U`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",St,{query:e,...n})}delete(e,n){return this._client.delete(U`/evals/${e}`,n)}}Wb.Runs=zb;let RB=class extends ie{create(e,n){return this._client.post("/files",Na({body:e,...n},this._client))}retrieve(e,n){return this._client.get(U`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",St,{query:e,...n})}delete(e,n){return this._client.delete(U`/files/${e}`,n)}content(e,n){return this._client.get(U`/files/${e}/content`,{...n,headers:ee([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await tf(n),o=await this.retrieve(e),Date.now()-s>r)throw new Ab({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class CB extends ie{}let xB=class extends ie{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Hb extends ie{constructor(){super(...arguments),this.graders=new xB(this._client)}}Hb.Graders=xB;class AB extends ie{create(e,n,r){return this._client.getAPIList(U`/fine_tuning/checkpoints/${e}/permissions`,Hy,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(U`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(U`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let Kb=class extends ie{constructor(){super(...arguments),this.permissions=new AB(this._client)}};Kb.Permissions=AB;class PB extends ie{list(e,n={},r){return this._client.getAPIList(U`/fine_tuning/jobs/${e}/checkpoints`,St,{query:n,...r})}}class qb extends ie{constructor(){super(...arguments),this.checkpoints=new PB(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(U`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",St,{query:e,...n})}cancel(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(U`/fine_tuning/jobs/${e}/events`,St,{query:n,...r})}pause(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/resume`,n)}}qb.Checkpoints=PB;class Qu extends ie{constructor(){super(...arguments),this.methods=new CB(this._client),this.jobs=new qb(this._client),this.checkpoints=new Kb(this._client),this.alpha=new Hb(this._client)}}Qu.Methods=CB;Qu.Jobs=qb;Qu.Checkpoints=Kb;Qu.Alpha=Hb;class kB extends ie{}class Gb extends ie{constructor(){super(...arguments),this.graderModels=new kB(this._client)}}Gb.GraderModels=kB;class DB extends ie{createVariation(e,n){return this._client.post("/images/variations",Na({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Na({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class OB extends ie{retrieve(e,n){return this._client.get(U`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Hy,e)}delete(e,n){return this._client.delete(U`/models/${e}`,n)}}class MB extends ie{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class LB extends ie{accept(e,n,r){return this._client.post(U`/realtime/calls/${e}/accept`,{body:n,...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(U`/realtime/calls/${e}/hangup`,{...n,headers:ee([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(U`/realtime/calls/${e}/refer`,{body:n,...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(U`/realtime/calls/${e}/reject`,{body:n,...r,headers:ee([{Accept:"*/*"},r==null?void 0:r.headers])})}}class NB extends ie{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Xy extends ie{constructor(){super(...arguments),this.clientSecrets=new NB(this._client),this.calls=new LB(this._client)}}Xy.ClientSecrets=NB;Xy.Calls=LB;function Une(t,e){return!e||!Wne(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:VB(t,e)}function VB(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:qne(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:zne(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||R0(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function zne(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function Wne(t){var e;return!!Ob((e=t.text)==null?void 0:e.format)}function Hne(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Kne(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function qne(t,e){const n=Kne(t.tools??[],e.name);return{...e,...e,parsed_arguments:Hne(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function R0(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var gl,yp,ks,vp,R1,C1,x1,A1;class Xb extends Lb{constructor(e){super(),gl.add(this),yp.set(this,void 0),ks.set(this,void 0),vp.set(this,void 0),ue(this,yp,e)}static createResponse(e,n,r){const i=new Xb(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,gl,"m",R1).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of s)F(this,gl,"m",C1).call(this,l,o);if((a=s.controller.signal)!=null&&a.aborted)throw new ar;return F(this,gl,"m",x1).call(this)}[(yp=new WeakMap,ks=new WeakMap,vp=new WeakMap,gl=new WeakSet,R1=function(){this.ended||ue(this,ks,void 0)},C1=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=F(this,gl,"m",A1).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new se(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new se(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new se(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new se(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},x1=function(){if(this.ended)throw new se("stream has ended, this shouldn't happen");const n=F(this,ks,"f");if(!n)throw new se("request ended without sending any events");ue(this,ks,void 0);const r=Gne(n,F(this,yp,"f"));return ue(this,vp,r),r},A1=function(n){var i;let r=F(this,ks,"f");if(!r){if(n.type!=="response.created")throw new se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ue(this,ks,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new se(`missing output at index ${n.output_index}`);const o=s.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?s.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new se(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new se(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new se(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new se(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new se(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const o=(i=s.content)==null?void 0:i[n.content_index];if(!o)throw new se(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new se(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{ue(this,ks,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=F(this,vp,"f");if(!e)throw new se("stream ended without producing a ChatCompletion");return e}}function Gne(t,e){return Une(t,e)}class FB extends ie{list(e,n={},r){return this._client.getAPIList(U`/responses/${e}/input_items`,St,{query:n,...r})}}class BB extends ie{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Qy extends ie{constructor(){super(...arguments),this.inputItems=new FB(this._client),this.inputTokens=new BB(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&R0(r),r))}retrieve(e,n={},r){return this._client.get(U`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&R0(i),i))}delete(e,n){return this._client.delete(U`/responses/${e}`,{...n,headers:ee([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>VB(r,e))}stream(e,n){return Xb.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(U`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}Qy.InputItems=FB;Qy.InputTokens=BB;class jB extends ie{create(e,n,r){return this._client.post(U`/uploads/${e}/parts`,Na({body:n,...r},this._client))}}class Qb extends ie{constructor(){super(...arguments),this.parts=new jB(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(U`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(U`/uploads/${e}/complete`,{body:n,...r})}}Qb.Parts=jB;const Xne=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class $B extends ie{create(e,n,r){return this._client.post(U`/vector_stores/${e}/file_batches`,{body:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(U`/vector_stores/${i}/file_batches/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(U`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(U`/vector_stores/${i}/file_batches/${e}/files`,St,{query:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await tf(l);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(s,n.length),a=this._client,l=n.values(),u=[...r];async function c(f){for(let p of f){const y=await a.files.create({file:p,purpose:"assistants"},i);u.push(y.id)}}const d=Array(o).fill(l).map(c);return await Xne(d),await this.createAndPoll(e,{file_ids:u})}}class UB extends ie{create(e,n,r){return this._client.post(U`/vector_stores/${e}/files`,{body:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(U`/vector_stores/${i}/files/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(U`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(U`/vector_stores/${e}/files`,St,{query:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(U`/vector_stores/${i}/files/${e}`,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=ee([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),a=o.data;switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await tf(l);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(U`/vector_stores/${i}/files/${e}/content`,Hy,{...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Yy extends ie{constructor(){super(...arguments),this.files=new UB(this._client),this.fileBatches=new $B(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/vector_stores/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(U`/vector_stores/${e}`,{body:n,...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",St,{query:e,...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/vector_stores/${e}`,{...n,headers:ee([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(U`/vector_stores/${e}/search`,Hy,{body:n,method:"post",...r,headers:ee([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Yy.Files=UB;Yy.FileBatches=$B;class zB extends ie{create(e,n){return this._client.post("/videos",p1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(U`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Pg,{query:e,...n})}delete(e,n){return this._client.delete(U`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(U`/videos/${e}/content`,{query:n,...r,headers:ee([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(U`/videos/${e}/remix`,p1({body:n,...r},this._client))}}var Il,WB,dm;class HB extends ie{constructor(){super(...arguments),Il.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");F(this,Il,"m",WB).call(this,r);const s=ee([n]).values,o=F(this,Il,"m",dm).call(this,s,"webhook-signature"),a=F(this,Il,"m",dm).call(this,s,"webhook-timestamp"),l=F(this,Il,"m",dm).call(this,s,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new Xc("Invalid webhook timestamp format");const c=Math.floor(Date.now()/1e3);if(c-u>i)throw new Xc("Webhook timestamp is too old");if(u>c+i)throw new Xc("Webhook timestamp is too new");const d=o.split(" ").map(S=>S.startsWith("v1,")?S.substring(3):S),f=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),p=l?`${l}.${a}.${e}`:`${a}.${e}`,y=await crypto.subtle.importKey("raw",f,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const S of d)try{const T=Buffer.from(S,"base64");if(await crypto.subtle.verify("HMAC",y,T,new TextEncoder().encode(p)))return}catch{continue}throw new Xc("The given webhook signature does not match the expected signature")}}Il=new WeakSet,WB=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},dm=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var C0,Yb,fm,KB;class ve{constructor({baseURL:e=ml("OPENAI_BASE_URL"),apiKey:n=ml("OPENAI_API_KEY"),organization:r=ml("OPENAI_ORG_ID")??null,project:i=ml("OPENAI_PROJECT_ID")??null,webhookSecret:s=ml("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(C0.add(this),fm.set(this,void 0),this.completions=new SB(this),this.chat=new Fb(this),this.embeddings=new bB(this),this.files=new RB(this),this.images=new DB(this),this.audio=new rf(this),this.moderations=new MB(this),this.models=new OB(this),this.fineTuning=new Qu(this),this.graders=new Gb(this),this.vectorStores=new Yy(this),this.webhooks=new HB(this),this.beta=new Xu(this),this.batches=new fB(this),this.uploads=new Qb(this),this.responses=new Qy(this),this.realtime=new Xy(this),this.conversations=new Ub(this),this.evals=new Wb(this),this.containers=new $b(this),this.videos=new zB(this),n===void 0)throw new se("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Yte())throw new se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??Yb.DEFAULT_TIMEOUT,this.logger=a.logger??console;const l="warn";this.logLevel=l,this.logLevel=d1(a.logLevel,"ClientOptions.logLevel",this)??d1(ml("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??nne(),ue(this,fm,ine),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return ee([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return cne(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Tl}`}defaultIdempotencyKey(){return`stainless-node-retry-${mF()}`}makeStatusError(e,n,r,i){return Xt.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof se?r:new se(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new se(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!F(this,C0,"m",KB).call(this)&&r||this.baseURL,s=Kte(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return qte(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new Wy(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var v,g;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:l}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(zt(this).debug(`[${u}] sending request`,Go({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),(v=i.signal)!=null&&v.aborted)throw new ar;const f=new AbortController,p=await this.fetchWithTimeout(a,o,l,f).catch(m0),y=Date.now();if(p instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if((g=i.signal)!=null&&g.aborted)throw new ar;const x=p0(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return zt(this).info(`[${u}] connection ${x?"timed out":"failed"} - ${w}`),zt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (${w})`,Go({retryOfRequestLogID:r,url:a,durationMs:y-d,message:p.message})),this.retryRequest(i,n,r??u);throw zt(this).info(`[${u}] connection ${x?"timed out":"failed"} - error; no more retries left`),zt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (error; no more retries left)`,Go({retryOfRequestLogID:r,url:a,durationMs:y-d,message:p.message})),x?new Ab:new Uy({cause:p})}const S=[...p.headers.entries()].filter(([w])=>w==="x-request-id").map(([w,x])=>", "+w+": "+JSON.stringify(x)).join(""),T=`[${u}${c}${S}] ${o.method} ${a} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${y-d}ms`;if(!p.ok){const w=await this.shouldRetry(p);if(n&&w){const R=`retrying, ${n} attempts remaining`;return await rne(p.body),zt(this).info(`${T} - ${R}`),zt(this).debug(`[${u}] response error (${R})`,Go({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:y-d})),this.retryRequest(i,n,r??u,p.headers)}const x=w?"error; no more retries left":"error; not retryable";zt(this).info(`${T} - ${x}`);const O=await p.text().catch(R=>m0(R).message),D=Qte(O),b=D?void 0:O;throw zt(this).debug(`[${u}] response error (${x})`,Go({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:b,durationMs:Date.now()-d})),this.makeStatusError(p.status,D,b,p.headers)}return zt(this).info(T),zt(this).debug(`[${u}] response start`,Go({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:y-d})),{response:p,options:i,controller:f,requestLogID:u,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new _ne(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,c={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...a};o&&(c.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i==null?void 0:i.get("retry-after-ms");if(o){const l=parseFloat(o);Number.isNaN(l)||(s=l)}const a=i==null?void 0:i.get("retry-after");if(a&&!s){const l=parseFloat(a);Number.isNaN(l)?s=Date.parse(a)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,l)}return await tf(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,l=this.buildURL(s,o,a);"timeout"in r&&Xte("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:c}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=ee([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...tne(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ee([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:xF(e)}:F(this,fm,"f").call(this,{body:e,headers:r})}}Yb=ve,fm=new WeakMap,C0=new WeakSet,KB=function(){return this.baseURL!=="https://api.openai.com/v1"};ve.OpenAI=Yb;ve.DEFAULT_TIMEOUT=6e5;ve.OpenAIError=se;ve.APIError=Xt;ve.APIConnectionError=Uy;ve.APIConnectionTimeoutError=Ab;ve.APIUserAbortError=ar;ve.NotFoundError=_F;ve.ConflictError=wF;ve.RateLimitError=EF;ve.BadRequestError=gF;ve.AuthenticationError=yF;ve.InternalServerError=TF;ve.PermissionDeniedError=vF;ve.UnprocessableEntityError=SF;ve.InvalidWebhookSignatureError=Xc;ve.toFile=bne;ve.Completions=SB;ve.Chat=Fb;ve.Embeddings=bB;ve.Files=RB;ve.Images=DB;ve.Audio=rf;ve.Moderations=MB;ve.Models=OB;ve.FineTuning=Qu;ve.Graders=Gb;ve.VectorStores=Yy;ve.Webhooks=HB;ve.Beta=Xu;ve.Batches=fB;ve.Uploads=Qb;ve.Responses=Qy;ve.Realtime=Xy;ve.Conversations=Ub;ve.Evals=Wb;ve.Containers=$b;ve.Videos=zB;const Qne=()=>localStorage.getItem("openai_api_key"),qB=()=>{const t=Qne();if(!t)throw new Error("OpenAI API Key not found. Please add it in the Account settings.");return new ve({apiKey:t,dangerouslyAllowBrowser:!0})};async function Yne(t){try{const n=await qB().chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"Analyze this clothing item. Return a JSON object with the following fields: 'type' (e.g., shirt, pants, dress), 'color' (primary color), 'style' (e.g., casual, formal, sporty), 'tags' (array of 3-5 descriptive keywords), and 'refreshCycle' (suggested number of days before re-wearing, e.g., 1 for underwear, 7 for shirts, 14 for pants)."},{type:"image_url",image_url:{url:t}}]}],response_format:{type:"json_object"}});return JSON.parse(n.choices[0].message.content)}catch(e){return console.error("Error analyzing image:",e),{type:"unknown",color:"unknown",style:"unknown",tags:["manual-entry"],refreshCycle:7}}}async function GB(t,e){try{const n=t.map(a=>({id:a.id,type:a.type,color:a.color,tags:a.tags,style:a.style,rating:a.rating||3,wearCount:a.wearCount||0})),r=`
      I need 3 outfit suggestions from the following wardrobe items:
      ${JSON.stringify(n)}

      Criteria:
      - Destination: ${e.destination}
      - Temperature: ${e.temperature}
      - Style Preference: ${e.style}

      Rules:
      1. Prioritize items with higher 'rating'.
      2. Consider 'wearCount' - if an item has a high rating but low wear count, suggest it more.
      3. Ensure the outfits are appropriate for the temperature and destination.

      Please select 3 distinct outfits. For each outfit, provide:
      1. A short summary explaining why it fits the criteria.
      2. The list of item IDs used in the outfit.
      
      Return the result as a JSON object with a key "outfits" containing an array of the 3 suggestions.
    `,s=await qB().chat.completions.create({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful fashion stylist assistant."},{role:"user",content:r}],response_format:{type:"json_object"}});return JSON.parse(s.choices[0].message.content).outfits}catch(n){return console.error("Error generating outfits:",n),[]}}const P1=(t,e=400,n=400)=>new Promise(r=>{let i=new Image;i.src=t,i.onload=()=>{let s=document.createElement("canvas"),o=i.width,a=i.height;o>a?o>e&&(a*=e/o,o=e):a>n&&(o*=n/a,a=n),s.width=o,s.height=a,s.getContext("2d").drawImage(i,0,0,o,a),r(s.toDataURL("image/jpeg",.5))}});function Jne(){const[t,e]=I.useState(null),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(null),l=I.useRef(null),{addItem:u}=$y(),c=Nu(),d=yi();I.useEffect(()=>{var T;(T=d.state)!=null&&T.image&&(async()=>{const g=await P1(d.state.image);e(g),p(g)})()},[]);const f=T=>{const v=T.target.files[0];if(v){const g=new FileReader;g.onloadend=async()=>{const w=await P1(g.result);e(w),p(w)},g.readAsDataURL(v)}},p=async T=>{r(!0);try{const v=await Yne(T);a(v)}catch(v){console.error("Analysis failed",v),alert("Failed to analyze image. Please try again.")}finally{r(!1)}},y=async()=>{if(t&&o&&!i){s(!0);const v=t.length*3/4/1024;console.log(`Attempting to save image. Size: ${v.toFixed(2)} KB`);try{await u({imageUri:t,...o,lastWorn:null}),c("/closet")}catch(g){console.error("Failed to save item:",g),alert(`Failed to save item: ${g.message}.`),s(!1)}}},S=()=>{e(null),a(null),l.current&&l.current.click()};return M.jsxs(Dr,{style:{flex:1},contentContainerStyle:Me.container,children:[M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:l,style:{display:"none"},onChange:f}),M.jsx(G,{style:Me.title,children:"Add New Item"}),t?M.jsxs(X,{style:Me.previewContainer,children:[M.jsx(Vr,{source:{uri:t},style:Me.previewImage}),n?M.jsxs(X,{style:Me.loadingContainer,children:[M.jsx(kd,{size:"large",color:"#007AFF"}),M.jsx(G,{style:Me.loadingText,children:"Analyzing your item..."})]}):o?M.jsxs(X,{style:Me.formContainer,children:[M.jsxs(X,{style:Me.rowContainer,children:[M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Type"}),M.jsx(Wn,{style:Me.compactInput,value:o.type,onChangeText:T=>a({...o,type:T})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Color"}),M.jsx(Wn,{style:Me.compactInput,value:o.color,onChangeText:T=>a({...o,color:T})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Style"}),M.jsx(Wn,{style:Me.compactInput,value:o.style,onChangeText:T=>a({...o,style:T})})]})]}),M.jsx(G,{style:Me.label,children:"Tags"}),M.jsx(X,{style:Me.tagsContainer,children:o.tags.map((T,v)=>M.jsx(X,{style:Me.tagBadge,children:M.jsx(G,{style:Me.tagText,children:T})},v))}),M.jsxs(X,{style:Me.buttonGroup,children:[M.jsx(Ce,{style:[Me.button,Me.secondaryButton],onPress:S,children:M.jsx(G,{style:Me.secondaryButtonText,children:"Retake"})}),M.jsx(Ce,{style:Me.button,onPress:y,disabled:i,children:M.jsx(G,{style:Me.buttonText,children:i?"Saving...":"Save to Closet"})})]})]}):null]}):M.jsx(X,{style:Me.uploadContainer,children:M.jsx(Ce,{style:Me.button,onPress:()=>l.current.click(),children:M.jsx(G,{style:Me.buttonText,children:"Take Photo / Upload"})})})]})}const Me=ke.create({container:{flexGrow:1,padding:20,alignItems:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:20},uploadContainer:{flex:1,justifyContent:"center",alignItems:"center",width:"100%"},previewContainer:{width:"100%",alignItems:"center"},previewImage:{width:300,height:300,borderRadius:10,marginBottom:20},loadingContainer:{alignItems:"center"},loadingText:{marginTop:10,color:"#666"},formContainer:{width:"100%"},rowContainer:{flexDirection:"row",justifyContent:"space-between",marginBottom:15},inputGroup:{width:"30%"},label:{fontWeight:"600",fontSize:12,color:"#666",marginBottom:4,textTransform:"uppercase"},compactInput:{borderWidth:1,borderColor:"#eee",padding:8,borderRadius:8,backgroundColor:"#f9f9f9",fontSize:14},tagsContainer:{flexDirection:"row",flexWrap:"wrap",marginBottom:20,marginTop:5},tagBadge:{backgroundColor:"#f0f0f0",paddingHorizontal:10,paddingVertical:5,borderRadius:15,marginRight:8,marginBottom:8},tagText:{fontSize:12,color:"#333"},buttonGroup:{flexDirection:"row",justifyContent:"space-between",marginTop:20},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",flex:1,marginHorizontal:5},buttonText:{color:"#fff",fontWeight:"bold"},secondaryButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#007AFF"},secondaryButtonText:{color:"#007AFF",fontWeight:"bold"}});function Zne(){const{items:t,isItemAvailable:e,addToSchedule:n}=$y(),r=Nu(),[i,s]=I.useState(""),[o,a]=I.useState(""),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState([]),[y,S]=I.useState(null),[T,v]=I.useState(!1),[g,w]=I.useState(new Date().toISOString().split("T")[0]),x=async()=>{if(!i||!o||!l){alert("Please fill in all fields");return}d(!0);const E=t.filter(e);try{const R=await GB(E,{destination:i,temperature:o,style:l});p(R)}catch(R){console.error("Failed to generate outfits",R),alert("Failed to generate suggestions. Please try again.")}finally{d(!1)}},O=E=>{S(E),v(!0)},D=()=>{y&&g&&(n(g,y.items),v(!1),S(null),alert("Outfit scheduled!"),r("/schedule"))},b=E=>t.find(R=>R.id===E);return M.jsxs(Dr,{contentContainerStyle:Pe.container,children:[M.jsx(G,{style:Pe.title,children:"Virtual Dressing Room"}),M.jsxs(X,{style:Pe.form,children:[M.jsx(G,{style:Pe.label,children:"Destination / Occasion"}),M.jsx(Wn,{style:Pe.input,placeholder:"e.g. Work, Date Night, Gym",value:i,onChangeText:s}),M.jsx(G,{style:Pe.label,children:"Temperature"}),M.jsx(Wn,{style:Pe.input,placeholder:"e.g. 75F, Cold, Rainy",value:o,onChangeText:a}),M.jsx(G,{style:Pe.label,children:"Style Preference"}),M.jsx(Wn,{style:Pe.input,placeholder:"e.g. Casual, Chic, Edgy",value:l,onChangeText:u}),M.jsx(Ce,{style:[Pe.button,c&&Pe.disabledButton],onPress:x,disabled:c,children:c?M.jsx(kd,{color:"#fff"}):M.jsx(G,{style:Pe.buttonText,children:"Generate Outfits"})})]}),f.length>0&&M.jsxs(X,{style:Pe.results,children:[M.jsx(G,{style:Pe.subtitle,children:"Suggestions"}),f.map((E,R)=>M.jsxs(X,{style:Pe.outfitCard,children:[M.jsx(G,{style:Pe.outfitSummary,children:E.summary}),M.jsx(Dr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Pe.itemsRow,children:E.items.map(C=>{const P=b(C);return P?M.jsxs(X,{style:Pe.itemPreview,children:[M.jsx(Vr,{source:{uri:P.imageUri},style:Pe.itemImage}),M.jsx(G,{style:Pe.itemType,children:P.type})]},C):null})}),M.jsx(Ce,{style:Pe.scheduleButton,onPress:()=>O(E),children:M.jsx(G,{style:Pe.scheduleButtonText,children:"Schedule This Outfit"})})]},R))]}),M.jsx(td,{visible:T,transparent:!0,animationType:"slide",children:M.jsx(X,{style:Pe.modalContainer,children:M.jsxs(X,{style:Pe.modalContent,children:[M.jsx(G,{style:Pe.modalTitle,children:"Select Date"}),M.jsx("input",{type:"date",value:g,onChange:E=>w(E.target.value),style:Pe.dateInput}),M.jsxs(X,{style:Pe.modalButtons,children:[M.jsx(Ce,{style:[Pe.button,Pe.cancelButton],onPress:()=>v(!1),children:M.jsx(G,{style:Pe.cancelButtonText,children:"Cancel"})}),M.jsx(Ce,{style:Pe.button,onPress:D,children:M.jsx(G,{style:Pe.buttonText,children:"Confirm"})})]})]})})})]})}const Pe=ke.create({container:{flexGrow:1,padding:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},form:{backgroundColor:"#fff",padding:20,borderRadius:10,marginBottom:20,elevation:2},label:{fontWeight:"bold",marginBottom:5,color:"#333"},input:{borderWidth:1,borderColor:"#ddd",padding:10,borderRadius:5,marginBottom:15,backgroundColor:"#f9f9f9"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center"},disabledButton:{backgroundColor:"#99c9ff"},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},results:{marginTop:10,paddingBottom:40},subtitle:{fontSize:20,fontWeight:"bold",marginBottom:15},outfitCard:{backgroundColor:"#fff",padding:15,borderRadius:10,marginBottom:15,elevation:2},outfitSummary:{fontSize:16,marginBottom:10,lineHeight:22},itemsRow:{flexDirection:"row",marginTop:10,marginBottom:15},itemPreview:{marginRight:15,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:5,marginBottom:5},itemType:{fontSize:12,color:"#666",textTransform:"capitalize"},scheduleButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center"},scheduleButtonText:{color:"#fff",fontWeight:"bold"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"#fff",padding:20,borderRadius:10,width:"80%",alignItems:"center"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},dateInput:{padding:10,fontSize:16,marginBottom:20,width:"100%",border:"1px solid #ddd",borderRadius:5},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},cancelButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#ddd",marginRight:10},cancelButtonText:{color:"#333"}}),j_=async(t,e)=>{try{const r=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&daily=temperature_2m_max,temperature_2m_min,weathercode&temperature_unit=fahrenheit&timezone=auto`)).json(),i={};return r.daily.time.forEach((s,o)=>{i[s]={max:Math.round(r.daily.temperature_2m_max[o]),min:Math.round(r.daily.temperature_2m_min[o]),code:r.daily.weathercode[o]}}),i}catch(n){return console.error("Error fetching weather:",n),null}},ere=t=>({0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",95:"Thunderstorm"})[t]||"Variable";function tre(){const{schedule:t,items:e,markAsWorn:n,addToSchedule:r,isItemAvailable:i}=$y(),[s,o]=I.useState({}),[a,l]=I.useState(!1),[u,c]=I.useState(null),[d,f]=I.useState(!1),[p,y]=I.useState([]),[S,T]=I.useState({destination:"",style:"",temperature:""});I.useEffect(()=>{(async()=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async P=>{const L=await j_(P.coords.latitude,P.coords.longitude);L&&o(L)},async()=>{const P=await j_(40.7128,-74.006);P&&o(P)});else{const P=await j_(40.7128,-74.006);P&&o(P)}})()},[]);const v=()=>{const E=[];for(let R=0;R<7;R++){const C=new Date;C.setDate(C.getDate()+R),E.push(C.toISOString().split("T")[0])}return E},g=E=>e.find(R=>R.id===E),w=(E,R)=>{confirm("Mark this outfit as worn? Items will be unavailable for their refresh cycle.")&&n(R,E)},x=E=>{c(E),y([]),T({destination:"",style:"",temperature:""}),l(!0)},O=async()=>{f(!0);try{const E=s[u],R=E?`${E.max}F / ${E.min}F`:"Unknown",C=e.filter(i),P=await GB(C,{destination:S.destination,temperature:S.temperature||R,style:S.style});P&&P.outfits&&y(P.outfits)}catch(E){console.error("Generation failed",E),alert("Failed to generate outfits. Check your API key.")}finally{f(!1)}},D=E=>{r(u,E.itemIds),l(!1)},b=v();return M.jsxs(Dr,{contentContainerStyle:Ie.container,children:[M.jsx(G,{style:Ie.title,children:"Outfit Schedule"}),b.map(E=>{const R=t[E],C=new Date(E),P=C.toLocaleDateString("en-US",{weekday:"long"}),L=C.toLocaleDateString("en-US",{month:"short",day:"numeric"}),k=s[E];return M.jsxs(X,{style:Ie.dayCard,children:[M.jsxs(X,{style:Ie.dateHeader,children:[M.jsxs(X,{children:[M.jsx(G,{style:Ie.dayName,children:P}),M.jsx(G,{style:Ie.dateText,children:L})]}),k&&M.jsxs(X,{style:Ie.weatherContainer,children:[M.jsxs(G,{style:Ie.weatherTemp,children:[k.max," / ",k.min,""]}),M.jsx(G,{style:Ie.weatherDesc,children:ere(k.code)})]})]}),R?M.jsxs(X,{children:[M.jsx(Dr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Ie.itemsRow,children:R.map(ce=>{const fe=g(ce);return fe?M.jsxs(X,{style:Ie.itemPreview,children:[M.jsx(Vr,{source:{uri:fe.imageUri||fe.image},style:Ie.itemImage}),M.jsx(G,{style:Ie.itemType,children:fe.type})]},ce):null})}),M.jsx(Ce,{style:Ie.wearButton,onPress:()=>w(E,R),children:M.jsx(G,{style:Ie.wearButtonText,children:"Wear This Outfit"})})]}):M.jsx(Ce,{style:Ie.generateButton,onPress:()=>x(E),children:M.jsx(G,{style:Ie.generateButtonText,children:"+ Generate Outfit"})})]},E)}),M.jsx(td,{visible:a,animationType:"slide",onRequestClose:()=>l(!1),children:M.jsxs(X,{style:Ie.modalContainer,children:[M.jsxs(G,{style:Ie.modalTitle,children:["Plan for ",u]}),M.jsxs(Dr,{style:{flex:1},children:[M.jsxs(X,{style:{marginBottom:20},children:[M.jsx(G,{style:Ie.label,children:"Destination / Occasion"}),M.jsx(Wn,{style:Ie.input,placeholder:"e.g. Work, Date Night, Gym",value:S.destination,onChangeText:E=>T(R=>({...R,destination:E}))}),M.jsx(G,{style:Ie.label,children:"Temperature"}),M.jsx(Wn,{style:Ie.input,placeholder:"e.g. 75F, Cold, Rainy (Leave blank to use forecast)",value:S.temperature,onChangeText:E=>T(R=>({...R,temperature:E}))}),M.jsx(G,{style:Ie.label,children:"Style Preference"}),M.jsx(Wn,{style:Ie.input,placeholder:"e.g. Casual, Chic, Edgy",value:S.style,onChangeText:E=>T(R=>({...R,style:E}))})]}),M.jsx(Ce,{style:[Ie.genButton,d&&{opacity:.7}],onPress:O,disabled:d,children:d?M.jsx(kd,{color:"#fff"}):M.jsx(G,{style:Ie.genButtonText,children:"Generate Suggestions"})}),p.map((E,R)=>M.jsxs(Ce,{style:Ie.suggestionCard,onPress:()=>D(E),children:[M.jsx(G,{style:Ie.suggestionSummary,children:E.reason||E.summary}),M.jsx(Dr,{horizontal:!0,children:E.itemIds.map(C=>{const P=g(C);return P?M.jsx(Vr,{source:{uri:P.imageUri||P.image},style:Ie.smallImage},C):null})}),M.jsx(X,{style:Ie.selectButton,children:M.jsx(G,{style:Ie.selectButtonText,children:"Select This Outfit"})})]},R))]}),M.jsx(Ce,{style:Ie.closeButton,onPress:()=>l(!1),children:M.jsx(G,{style:Ie.closeButtonText,children:"Close"})})]})})]})}const Ie=ke.create({container:{flexGrow:1,padding:20,paddingBottom:80},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},dayCard:{backgroundColor:"#fff",borderRadius:10,padding:15,marginBottom:15,elevation:2},dateHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},weatherContainer:{alignItems:"flex-end"},weatherTemp:{fontSize:16,fontWeight:"bold"},weatherDesc:{fontSize:12,color:"#666"},generateButton:{backgroundColor:"#f0f0f0",padding:15,borderRadius:8,alignItems:"center",borderWidth:1,borderColor:"#ddd",borderStyle:"dashed"},generateButtonText:{color:"#007AFF",fontSize:16},modalContainer:{flex:1,padding:20,backgroundColor:"#fff"},modalTitle:{fontSize:22,fontWeight:"bold",marginBottom:10,textAlign:"center"},modalWeather:{textAlign:"center",marginBottom:20,color:"#666"},genButton:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",marginBottom:10},genButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},suggestionCard:{borderWidth:1,borderColor:"#ddd",borderRadius:10,padding:15,marginBottom:20},suggestionSummary:{marginBottom:10,fontStyle:"italic"},smallImage:{width:60,height:60,borderRadius:5,marginRight:5},selectButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center",marginTop:10},selectButtonText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:15,alignItems:"center"},closeButtonText:{color:"red"},dayName:{fontSize:18,fontWeight:"bold"},dateText:{color:"#666"},itemsRow:{flexDirection:"row",marginBottom:10},itemPreview:{marginRight:10,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:8,marginBottom:5},itemType:{fontSize:12},wearButton:{backgroundColor:"#007AFF",padding:10,borderRadius:5,alignItems:"center"},wearButtonText:{color:"#fff",fontWeight:"bold"},emptyText:{textAlign:"center",color:"#999",fontStyle:"italic",padding:10}});function nre(){const[t,e]=I.useState(""),[n,r]=I.useState(""),[i,s]=I.useState(!0),[o,a]=I.useState(!1),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState(""),y=async()=>{u(""),p(""),a(!0);try{c?(await PQ(t),p("Check your email for password reset instructions."),d(!1)):i?await CQ(t,n):await xQ(t,n)}catch(S){u(S.message.replace("Firebase: ",""))}finally{a(!1)}};return M.jsxs(X,{style:wn.container,children:[M.jsx(Vr,{source:{uri:"/pwa-192x192.png"},style:{width:100,height:100,marginBottom:20,alignSelf:"center"}}),M.jsxs(X,{style:wn.card,children:[M.jsx(G,{style:wn.title,children:c?"Reset Password":i?"Pocket Stylist Login":"Create Account"}),l?M.jsx(G,{style:wn.error,children:l}):null,f?M.jsx(G,{style:wn.success,children:f}):null,M.jsx(Wn,{style:wn.input,placeholder:"Email",value:t,onChangeText:e,autoCapitalize:"none",keyboardType:"email-address"}),!c&&M.jsx(Wn,{style:wn.input,placeholder:"Password",value:n,onChangeText:r,secureTextEntry:!0}),M.jsx(Ce,{style:wn.button,onPress:y,disabled:o,children:o?M.jsx(kd,{color:"#fff"}):M.jsx(G,{style:wn.buttonText,children:c?"Send Reset Email":i?"Log In":"Sign Up"})}),M.jsx(X,{style:wn.footer,children:c?M.jsx(Ce,{onPress:()=>d(!1),children:M.jsx(G,{style:wn.link,children:"Back to Login"})}):M.jsxs(M.Fragment,{children:[M.jsx(Ce,{onPress:()=>s(!i),children:M.jsx(G,{style:wn.link,children:i?"Need an account? Sign Up":"Have an account? Log In"})}),M.jsx(Ce,{onPress:()=>d(!0),children:M.jsx(G,{style:[wn.link,wn.forgotLink],children:"Forgot Password?"})})]})})]})]})}const wn=ke.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5",padding:20,height:"100vh"},card:{backgroundColor:"#fff",padding:30,borderRadius:15,width:"100%",maxWidth:400,elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center",color:"#333"},input:{backgroundColor:"#f9f9f9",padding:15,borderRadius:8,marginBottom:15,borderWidth:1,borderColor:"#eee"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:8,alignItems:"center",marginTop:10},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},error:{color:"red",marginBottom:15,textAlign:"center"},success:{color:"green",marginBottom:15,textAlign:"center"},footer:{marginTop:20,alignItems:"center"},link:{color:"#007AFF",marginTop:10},forgotLink:{color:"#666",fontSize:12}});function rre({onNavigate:t}){const e=Nu(),n=yi(),r=s=>{t?t(s):e(s)},i=[{name:"Home",path:"/"},{name:"Closet",path:"/closet"},{name:"Style",path:"/outfits"},{name:"Plan",path:"/schedule"}];return M.jsx(X,{style:Lc.navBar,children:i.map(s=>{const o=n.pathname===s.path;return M.jsx(Ce,{style:[Lc.tab,o&&Lc.activeTab],onPress:()=>r(s.path),children:M.jsx(G,{style:[Lc.tabText,o&&Lc.activeTabText],children:s.name})},s.name)})})}const Lc=ke.create({navBar:{flexDirection:"row",justifyContent:"space-around",backgroundColor:ti.colors.background,borderTopWidth:1,borderTopColor:ti.colors.border,paddingBottom:20,paddingTop:10,position:"absolute",bottom:0,left:0,right:0},tab:{alignItems:"center",padding:10},activeTab:{borderBottomWidth:2,borderBottomColor:ti.colors.highlight},tabText:{fontSize:16,color:ti.colors.secondaryText},activeTabText:{color:ti.colors.highlight,fontWeight:"bold"}});function ire({visible:t,onClose:e}){const n=Hu.currentUser,[r,i]=I.useState("");I.useEffect(()=>{n&&Lte(n.uid).then(a=>{if(a!=null&&a.openai_api_key)i(a.openai_api_key),localStorage.setItem("openai_api_key",a.openai_api_key);else{const l=localStorage.getItem("openai_api_key");l&&i(l)}})},[n,t]);const s=async()=>{n&&(await Mte(n.uid,{openai_api_key:r}),localStorage.setItem("openai_api_key",r),alert("API Key saved to account!"))},o=async()=>{try{await AQ(),e()}catch(a){console.error("Failed to log out",a)}};return M.jsx(td,{visible:t,transparent:!0,animationType:"fade",onRequestClose:e,children:M.jsxs(X,{style:Zt.overlay,children:[M.jsx(Ce,{style:ke.absoluteFill,activeOpacity:1,onPress:e}),M.jsxs(X,{style:Zt.modalContent,children:[M.jsx(G,{style:Zt.title,children:"Account"}),M.jsxs(X,{style:Zt.info,children:[M.jsx(G,{style:Zt.label,children:"Email"}),M.jsx(G,{style:Zt.value,children:n==null?void 0:n.email})]}),M.jsxs(X,{style:Zt.section,children:[M.jsx(G,{style:Zt.label,children:"OpenAI API Key"}),M.jsx("input",{type:"password",style:{width:"100%",padding:10,marginBottom:10,border:"1px solid #ddd",borderRadius:8,fontSize:16,boxSizing:"border-box"},placeholder:"sk-...",value:r,onChange:a=>i(a.target.value)}),M.jsx(Ce,{style:Zt.saveButton,onPress:s,children:M.jsx(G,{style:Zt.saveButtonText,children:"Save Key"})})]}),M.jsx(Ce,{style:Zt.refreshButton,onPress:()=>window.location.reload(),children:M.jsx(G,{style:Zt.refreshButtonText,children:"Refresh App"})}),M.jsx(Ce,{style:Zt.logoutButton,onPress:o,children:M.jsx(G,{style:Zt.logoutText,children:"Log Out"})}),M.jsx(Ce,{style:Zt.closeButton,onPress:e,children:M.jsx(G,{style:Zt.closeText,children:"Close"})})]})]})})}const Zt=ke.create({overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",width:"80%",maxWidth:300,borderRadius:15,padding:20,alignItems:"center",elevation:5},title:{fontSize:20,fontWeight:"bold",marginBottom:20},info:{marginBottom:20,alignItems:"center"},section:{width:"100%",marginBottom:20},label:{color:"#666",fontSize:12,marginBottom:5},value:{fontSize:16,fontWeight:"500"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:10,marginBottom:10,width:"100%"},saveButton:{backgroundColor:"#007AFF",padding:10,borderRadius:8,alignItems:"center"},saveButtonText:{color:"#fff",fontWeight:"bold"},refreshButton:{backgroundColor:"#34C759",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},refreshButtonText:{color:"#fff",fontWeight:"bold"},logoutButton:{backgroundColor:"#FF3B30",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},logoutText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:10},closeText:{color:"#007AFF"}}),sre={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:t=>({zIndex:0,x:t<0?"100%":"-100%",opacity:0})},Nc=({children:t,direction:e})=>M.jsx(kte.div,{custom:e,variants:sre,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",ease:"easeInOut",duration:.3},style:{height:"100%",width:"100%",backgroundColor:"#ffffff",overflowY:"auto",overflowX:"hidden",position:"absolute",top:0,left:0,paddingBottom:"80px"},children:t});function ore(){const{currentUser:t}=kV(),[e,n]=I.useState(!1),[r,i]=I.useState(0),s=Nu(),o=yi(),a=["/","/closet","/outfits","/schedule"],l=c=>{const d=a.indexOf(o.pathname),f=a.indexOf(c);i(f>d?1:-1),s(c)},u=UQ({onSwipedLeft:()=>{const c=a.indexOf(o.pathname);c<a.length-1&&(i(1),s(a[c+1]))},onSwipedRight:()=>{const c=a.indexOf(o.pathname);c>0&&(i(-1),s(a[c-1]))},preventScrollOnSwipe:!1,trackMouse:!0,delta:50});return t?M.jsxs(X,{style:$_.container,children:[M.jsxs(X,{style:$_.header,children:[M.jsx(X,{style:{flexDirection:"row",alignItems:"center",flex:1},children:M.jsx(Vr,{source:{uri:Dte},style:{width:260,height:52,resizeMode:"contain",marginLeft:-25}})}),M.jsx(Ce,{onPress:()=>n(!0),children:M.jsx(YQ,{size:34,color:ti.colors.highlight})})]}),M.jsx(X,{style:$_.content,...u,children:M.jsx(eZ,{mode:"popLayout",custom:r,children:M.jsxs(hW,{location:o,children:[M.jsx(yl,{path:"/",element:M.jsx(Nc,{direction:r,children:M.jsx(Ote,{})})}),M.jsx(yl,{path:"/closet",element:M.jsx(Nc,{direction:r,children:M.jsx(Wte,{})})}),M.jsx(yl,{path:"/camera",element:M.jsx(Nc,{direction:r,children:M.jsx(Jne,{})})}),M.jsx(yl,{path:"/outfits",element:M.jsx(Nc,{direction:r,children:M.jsx(Zne,{})})}),M.jsx(yl,{path:"/schedule",element:M.jsx(Nc,{direction:r,children:M.jsx(tre,{})})})]},o.pathname)})}),M.jsx(rre,{onNavigate:l}),M.jsx(ire,{visible:e,onClose:()=>n(!1)})]}):M.jsx(nre,{})}function are(){return M.jsx(MW,{children:M.jsx(ore,{})})}const $_=ke.create({container:{flex:1,height:"100vh",maxHeight:"100dvh",backgroundColor:"#ffffff",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:15,backgroundColor:ti.colors.background,borderBottomWidth:1,borderBottomColor:ti.colors.border,paddingTop:15,zIndex:10,height:70},headerTitle:{fontSize:18,fontWeight:"bold",color:ti.colors.text},accountButton:{color:ti.colors.highlight,fontWeight:"500"},content:{flex:1,paddingBottom:60,overflow:"hidden"}});U_.createRoot(document.getElementById("root")).render(M.jsx(yt.StrictMode,{children:M.jsx(kQ,{children:M.jsx($te,{children:M.jsx(are,{})})})}));
