(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function qu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Fk={exports:{}},fy={},Bk={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=Symbol.for("react.element"),wU=Symbol.for("react.portal"),SU=Symbol.for("react.fragment"),EU=Symbol.for("react.strict_mode"),TU=Symbol.for("react.profiler"),bU=Symbol.for("react.provider"),IU=Symbol.for("react.context"),RU=Symbol.for("react.forward_ref"),CU=Symbol.for("react.suspense"),xU=Symbol.for("react.memo"),AU=Symbol.for("react.lazy"),yR=Symbol.iterator;function PU(t){return t===null||typeof t!="object"?null:(t=yR&&t[yR]||t["@@iterator"],typeof t=="function"?t:null)}var jk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uk=Object.assign,$k={};function Gu(t,e,n){this.props=t,this.context=e,this.refs=$k,this.updater=n||jk}Gu.prototype.isReactComponent={};Gu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zk(){}zk.prototype=Gu.prototype;function oE(t,e,n){this.props=t,this.context=e,this.refs=$k,this.updater=n||jk}var aE=oE.prototype=new zk;aE.constructor=oE;Uk(aE,Gu.prototype);aE.isPureReactComponent=!0;var vR=Array.isArray,Wk=Object.prototype.hasOwnProperty,lE={current:null},Hk={key:!0,ref:!0,__self:!0,__source:!0};function Kk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Wk.call(e,r)&&!Hk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:qd,type:t,key:s,ref:o,props:i,_owner:lE.current}}function kU(t,e){return{$$typeof:qd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uE(t){return typeof t=="object"&&t!==null&&t.$$typeof===qd}function DU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _R=/\/+/g;function Pv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DU(""+t.key):e.toString(36)}function Hp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qd:case wU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Pv(o,0):r,vR(i)?(n="",t!=null&&(n=t.replace(_R,"$&/")+"/"),Hp(i,e,n,"",function(u){return u})):i!=null&&(uE(i)&&(i=kU(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_R,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vR(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Pv(s,a);o+=Hp(s,e,n,l,i)}else if(l=PU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Pv(s,a++),o+=Hp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jf(t,e,n){if(t==null)return t;var r=[],i=0;return Hp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function OU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sn={current:null},Kp={transition:null},MU={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:Kp,ReactCurrentOwner:lE};function qk(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Jf,forEach:function(t,e,n){Jf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jf(t,function(){e++}),e},toArray:function(t){return Jf(t,function(e){return e})||[]},only:function(t){if(!uE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Gu;Se.Fragment=SU;Se.Profiler=TU;Se.PureComponent=oE;Se.StrictMode=EU;Se.Suspense=CU;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MU;Se.act=qk;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Uk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Wk.call(e,l)&&!Hk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:qd,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:IU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bU,_context:t},t.Consumer=t};Se.createElement=Kk;Se.createFactory=function(t){var e=Kk.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:RU,render:t}};Se.isValidElement=uE;Se.lazy=function(t){return{$$typeof:AU,_payload:{_status:-1,_result:t},_init:OU}};Se.memo=function(t,e){return{$$typeof:xU,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Kp.transition;Kp.transition={};try{t()}finally{Kp.transition=e}};Se.unstable_act=qk;Se.useCallback=function(t,e){return Sn.current.useCallback(t,e)};Se.useContext=function(t){return Sn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return Sn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return Sn.current.useEffect(t,e)};Se.useId=function(){return Sn.current.useId()};Se.useImperativeHandle=function(t,e,n){return Sn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return Sn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return Sn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return Sn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return Sn.current.useReducer(t,e,n)};Se.useRef=function(t){return Sn.current.useRef(t)};Se.useState=function(t){return Sn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return Sn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return Sn.current.useTransition()};Se.version="18.3.1";Bk.exports=Se;var I=Bk.exports;const yt=qu(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NU=I,LU=Symbol.for("react.element"),VU=Symbol.for("react.fragment"),FU=Object.prototype.hasOwnProperty,BU=NU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jU={key:!0,ref:!0,__self:!0,__source:!0};function Gk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FU.call(e,r)&&!jU.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:LU,type:t,key:s,ref:o,props:i,_owner:BU.current}}fy.Fragment=VU;fy.jsx=Gk;fy.jsxs=Gk;Fk.exports=fy;var M=Fk.exports,vw={},Xk={exports:{}},tr={},Qk={exports:{}},Yk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Y){var ie=U.length;U.push(Y);e:for(;0<ie;){var we=ie-1>>>1,Pe=U[we];if(0<i(Pe,Y))U[we]=Y,U[ie]=Pe,ie=we;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],ie=U.pop();if(ie!==Y){U[0]=ie;e:for(var we=0,Pe=U.length,hn=Pe>>>1;we<hn;){var lt=2*(we+1)-1,zt=U[lt],gt=lt+1,Ke=U[gt];if(0>i(zt,ie))gt<Pe&&0>i(Ke,zt)?(U[we]=Ke,U[gt]=ie,we=gt):(U[we]=zt,U[lt]=ie,we=lt);else if(gt<Pe&&0>i(Ke,ie))U[we]=Ke,U[gt]=ie,we=gt;else break e}}return Y}function i(U,Y){var ie=U.sortIndex-Y.sortIndex;return ie!==0?ie:U.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,g=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=U)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function C(U){if(S=!1,_(U),!g)if(n(l)!==null)g=!0,je(O);else{var Y=n(u);Y!==null&&Ce(C,Y.startTime-U)}}function O(U,Y){g=!1,S&&(S=!1,v(E),E=-1),p=!0;var ie=f;try{for(_(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||U&&!x());){var we=d.callback;if(typeof we=="function"){d.callback=null,f=d.priorityLevel;var Pe=we(d.expirationTime<=Y);Y=t.unstable_now(),typeof Pe=="function"?d.callback=Pe:d===n(l)&&r(l),_(Y)}else r(l);d=n(l)}if(d!==null)var hn=!0;else{var lt=n(u);lt!==null&&Ce(C,lt.startTime-Y),hn=!1}return hn}finally{d=null,f=ie,p=!1}}var D=!1,b=null,E=-1,R=5,A=-1;function x(){return!(t.unstable_now()-A<R)}function N(){if(b!==null){var U=t.unstable_now();A=U;var Y=!0;try{Y=b(!0,U)}finally{Y?k():(D=!1,b=null)}}else D=!1}var k;if(typeof y=="function")k=function(){y(N)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,pe=de.port2;de.port1.onmessage=N,k=function(){pe.postMessage(null)}}else k=function(){T(N,0)};function je(U){b=U,D||(D=!0,k())}function Ce(U,Y){E=T(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,je(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var ie=f;f=Y;try{return U()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=f;f=U;try{return Y()}finally{f=ie}},t.unstable_scheduleCallback=function(U,Y,ie){var we=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?we+ie:we):ie=we,U){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ie+Pe,U={id:c++,callback:Y,priorityLevel:U,startTime:ie,expirationTime:Pe,sortIndex:-1},ie>we?(U.sortIndex=ie,e(u,U),n(l)===null&&U===n(u)&&(S?(v(E),E=-1):S=!0,Ce(C,ie-we))):(U.sortIndex=Pe,e(l,U),g||p||(g=!0,je(O))),U},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(U){var Y=f;return function(){var ie=f;f=Y;try{return U.apply(this,arguments)}finally{f=ie}}}})(Yk);Qk.exports=Yk;var UU=Qk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $U=I,Zn=UU;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jk=new Set,ed={};function Ya(t,e){wu(t,e),wu(t+"Capture",e)}function wu(t,e){for(ed[t]=e,t=0;t<e.length;t++)Jk.add(e[t])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_w=Object.prototype.hasOwnProperty,zU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wR={},SR={};function WU(t){return _w.call(SR,t)?!0:_w.call(wR,t)?!1:zU.test(t)?SR[t]=!0:(wR[t]=!0,!1)}function HU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KU(t,e,n,r){if(e===null||typeof e>"u"||HU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var cE=/[\-:]([a-z])/g;function hE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cE,hE);Qt[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cE,hE);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cE,hE);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function dE(t,e,n,r){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KU(e,n,i,r)&&(n=null),r||i===null?WU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ls=$U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zf=Symbol.for("react.element"),jl=Symbol.for("react.portal"),Ul=Symbol.for("react.fragment"),fE=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),Zk=Symbol.for("react.provider"),eD=Symbol.for("react.context"),pE=Symbol.for("react.forward_ref"),Sw=Symbol.for("react.suspense"),Ew=Symbol.for("react.suspense_list"),mE=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),tD=Symbol.for("react.offscreen"),ER=Symbol.iterator;function Nc(t){return t===null||typeof t!="object"?null:(t=ER&&t[ER]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,kv;function th(t){if(kv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kv=e&&e[1]||""}return`
`+kv+t}var Dv=!1;function Ov(t,e){if(!t||Dv)return"";Dv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?th(t):""}function qU(t){switch(t.tag){case 5:return th(t.type);case 16:return th("Lazy");case 13:return th("Suspense");case 19:return th("SuspenseList");case 0:case 2:case 15:return t=Ov(t.type,!1),t;case 11:return t=Ov(t.type.render,!1),t;case 1:return t=Ov(t.type,!0),t;default:return""}}function Tw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ul:return"Fragment";case jl:return"Portal";case ww:return"Profiler";case fE:return"StrictMode";case Sw:return"Suspense";case Ew:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eD:return(t.displayName||"Context")+".Consumer";case Zk:return(t._context.displayName||"Context")+".Provider";case pE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mE:return e=t.displayName||null,e!==null?e:Tw(t.type)||"Memo";case zs:e=t._payload,t=t._init;try{return Tw(t(e))}catch{}}return null}function GU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tw(e);case 8:return e===fE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function go(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XU(t){var e=nD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ep(t){t._valueTracker||(t._valueTracker=XU(t))}function rD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bw(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function TR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=go(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iD(t,e){e=e.checked,e!=null&&dE(t,"checked",e,!1)}function Iw(t,e){iD(t,e);var n=go(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rw(t,e.type,go(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rw(t,e,n){(e!=="number"||jm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nh=Array.isArray;function ou(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+go(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function IR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(nh(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:go(n)}}function sD(t,e){var n=go(e.value),r=go(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function RR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tp,aD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tp=tp||document.createElement("div"),tp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function td(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QU=["Webkit","ms","Moz","O"];Object.keys(Eh).forEach(function(t){QU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eh[e]=Eh[t]})});function lD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eh.hasOwnProperty(t)&&Eh[t]?(""+e).trim():e+"px"}function uD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var YU=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aw(t,e){if(e){if(YU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Pw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kw=null;function gE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dw=null,au=null,lu=null;function CR(t){if(t=Qd(t)){if(typeof Dw!="function")throw Error(W(280));var e=t.stateNode;e&&(e=vy(e),Dw(t.stateNode,t.type,e))}}function cD(t){au?lu?lu.push(t):lu=[t]:au=t}function hD(){if(au){var t=au,e=lu;if(lu=au=null,CR(t),e)for(t=0;t<e.length;t++)CR(e[t])}}function dD(t,e){return t(e)}function fD(){}var Mv=!1;function pD(t,e,n){if(Mv)return t(e,n);Mv=!0;try{return dD(t,e,n)}finally{Mv=!1,(au!==null||lu!==null)&&(fD(),hD())}}function nd(t,e){var n=t.stateNode;if(n===null)return null;var r=vy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Ow=!1;if(Qi)try{var Lc={};Object.defineProperty(Lc,"passive",{get:function(){Ow=!0}}),window.addEventListener("test",Lc,Lc),window.removeEventListener("test",Lc,Lc)}catch{Ow=!1}function JU(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Th=!1,Um=null,$m=!1,Mw=null,ZU={onError:function(t){Th=!0,Um=t}};function e4(t,e,n,r,i,s,o,a,l){Th=!1,Um=null,JU.apply(ZU,arguments)}function t4(t,e,n,r,i,s,o,a,l){if(e4.apply(this,arguments),Th){if(Th){var u=Um;Th=!1,Um=null}else throw Error(W(198));$m||($m=!0,Mw=u)}}function Ja(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xR(t){if(Ja(t)!==t)throw Error(W(188))}function n4(t){var e=t.alternate;if(!e){if(e=Ja(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return xR(i),t;if(s===r)return xR(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function gD(t){return t=n4(t),t!==null?yD(t):null}function yD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yD(t);if(e!==null)return e;t=t.sibling}return null}var vD=Zn.unstable_scheduleCallback,AR=Zn.unstable_cancelCallback,r4=Zn.unstable_shouldYield,i4=Zn.unstable_requestPaint,vt=Zn.unstable_now,s4=Zn.unstable_getCurrentPriorityLevel,yE=Zn.unstable_ImmediatePriority,_D=Zn.unstable_UserBlockingPriority,zm=Zn.unstable_NormalPriority,o4=Zn.unstable_LowPriority,wD=Zn.unstable_IdlePriority,py=null,pi=null;function a4(t){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(py,t,void 0,(t.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:c4,l4=Math.log,u4=Math.LN2;function c4(t){return t>>>=0,t===0?32:31-(l4(t)/u4|0)|0}var np=64,rp=4194304;function rh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=rh(a):(s&=o,s!==0&&(r=rh(s)))}else o=n&~i,o!==0?r=rh(o):s!==0&&(r=rh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Br(e),i=1<<n,r|=t[n],e&=~i;return r}function h4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Br(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=h4(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Nw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SD(){var t=np;return np<<=1,!(np&4194240)&&(np=64),t}function Nv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Br(e),t[e]=n}function f4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Br(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Br(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function ED(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TD,_E,bD,ID,RD,Lw=!1,ip=[],ro=null,io=null,so=null,rd=new Map,id=new Map,Ks=[],p4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PR(t,e){switch(t){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":io=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":rd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(e.pointerId)}}function Vc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qd(e),e!==null&&_E(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function m4(t,e,n,r,i){switch(e){case"focusin":return ro=Vc(ro,t,e,n,r,i),!0;case"dragenter":return io=Vc(io,t,e,n,r,i),!0;case"mouseover":return so=Vc(so,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return rd.set(s,Vc(rd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,id.set(s,Vc(id.get(s)||null,t,e,n,r,i)),!0}return!1}function CD(t){var e=da(t.target);if(e!==null){var n=Ja(e);if(n!==null){if(e=n.tag,e===13){if(e=mD(n),e!==null){t.blockedOn=e,RD(t.priority,function(){bD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);kw=r,n.target.dispatchEvent(r),kw=null}else return e=Qd(n),e!==null&&_E(e),t.blockedOn=n,!1;e.shift()}return!0}function kR(t,e,n){qp(t)&&n.delete(e)}function g4(){Lw=!1,ro!==null&&qp(ro)&&(ro=null),io!==null&&qp(io)&&(io=null),so!==null&&qp(so)&&(so=null),rd.forEach(kR),id.forEach(kR)}function Fc(t,e){t.blockedOn===e&&(t.blockedOn=null,Lw||(Lw=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,g4)))}function sd(t){function e(i){return Fc(i,t)}if(0<ip.length){Fc(ip[0],t);for(var n=1;n<ip.length;n++){var r=ip[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ro!==null&&Fc(ro,t),io!==null&&Fc(io,t),so!==null&&Fc(so,t),rd.forEach(e),id.forEach(e),n=0;n<Ks.length;n++)r=Ks[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ks.length&&(n=Ks[0],n.blockedOn===null);)CD(n),n.blockedOn===null&&Ks.shift()}var uu=ls.ReactCurrentBatchConfig,Hm=!0;function y4(t,e,n,r){var i=Ve,s=uu.transition;uu.transition=null;try{Ve=1,wE(t,e,n,r)}finally{Ve=i,uu.transition=s}}function v4(t,e,n,r){var i=Ve,s=uu.transition;uu.transition=null;try{Ve=4,wE(t,e,n,r)}finally{Ve=i,uu.transition=s}}function wE(t,e,n,r){if(Hm){var i=Vw(t,e,n,r);if(i===null)Hv(t,e,r,Km,n),PR(t,r);else if(m4(i,t,e,n,r))r.stopPropagation();else if(PR(t,r),e&4&&-1<p4.indexOf(t)){for(;i!==null;){var s=Qd(i);if(s!==null&&TD(s),s=Vw(t,e,n,r),s===null&&Hv(t,e,r,Km,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Hv(t,e,r,null,n)}}var Km=null;function Vw(t,e,n,r){if(Km=null,t=gE(r),t=da(t),t!==null)if(e=Ja(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Km=t,null}function xD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s4()){case yE:return 1;case _D:return 4;case zm:case o4:return 16;case wD:return 536870912;default:return 16}default:return 16}}var eo=null,SE=null,Gp=null;function AD(){if(Gp)return Gp;var t,e=SE,n=e.length,r,i="value"in eo?eo.value:eo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gp=i.slice(t,1<r?1-r:void 0)}function Xp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sp(){return!0}function DR(){return!1}function nr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sp:DR,this.isPropagationStopped=DR,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sp)},persist:function(){},isPersistent:sp}),e}var Xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},EE=nr(Xu),Xd=ot({},Xu,{view:0,detail:0}),_4=nr(Xd),Lv,Vv,Bc,my=ot({},Xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bc&&(Bc&&t.type==="mousemove"?(Lv=t.screenX-Bc.screenX,Vv=t.screenY-Bc.screenY):Vv=Lv=0,Bc=t),Lv)},movementY:function(t){return"movementY"in t?t.movementY:Vv}}),OR=nr(my),w4=ot({},my,{dataTransfer:0}),S4=nr(w4),E4=ot({},Xd,{relatedTarget:0}),Fv=nr(E4),T4=ot({},Xu,{animationName:0,elapsedTime:0,pseudoElement:0}),b4=nr(T4),I4=ot({},Xu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),R4=nr(I4),C4=ot({},Xu,{data:0}),MR=nr(C4),x4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=P4[t])?!!e[t]:!1}function TE(){return k4}var D4=ot({},Xd,{key:function(t){if(t.key){var e=x4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TE,charCode:function(t){return t.type==="keypress"?Xp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),O4=nr(D4),M4=ot({},my,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NR=nr(M4),N4=ot({},Xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TE}),L4=nr(N4),V4=ot({},Xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),F4=nr(V4),B4=ot({},my,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j4=nr(B4),U4=[9,13,27,32],bE=Qi&&"CompositionEvent"in window,bh=null;Qi&&"documentMode"in document&&(bh=document.documentMode);var $4=Qi&&"TextEvent"in window&&!bh,PD=Qi&&(!bE||bh&&8<bh&&11>=bh),LR=" ",VR=!1;function kD(t,e){switch(t){case"keyup":return U4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $l=!1;function z4(t,e){switch(t){case"compositionend":return DD(e);case"keypress":return e.which!==32?null:(VR=!0,LR);case"textInput":return t=e.data,t===LR&&VR?null:t;default:return null}}function W4(t,e){if($l)return t==="compositionend"||!bE&&kD(t,e)?(t=AD(),Gp=SE=eo=null,$l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PD&&e.locale!=="ko"?null:e.data;default:return null}}var H4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H4[t.type]:e==="textarea"}function OD(t,e,n,r){cD(r),e=qm(e,"onChange"),0<e.length&&(n=new EE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ih=null,od=null;function K4(t){WD(t,0)}function gy(t){var e=Hl(t);if(rD(e))return t}function q4(t,e){if(t==="change")return e}var MD=!1;if(Qi){var Bv;if(Qi){var jv="oninput"in document;if(!jv){var BR=document.createElement("div");BR.setAttribute("oninput","return;"),jv=typeof BR.oninput=="function"}Bv=jv}else Bv=!1;MD=Bv&&(!document.documentMode||9<document.documentMode)}function jR(){Ih&&(Ih.detachEvent("onpropertychange",ND),od=Ih=null)}function ND(t){if(t.propertyName==="value"&&gy(od)){var e=[];OD(e,od,t,gE(t)),pD(K4,e)}}function G4(t,e,n){t==="focusin"?(jR(),Ih=e,od=n,Ih.attachEvent("onpropertychange",ND)):t==="focusout"&&jR()}function X4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gy(od)}function Q4(t,e){if(t==="click")return gy(e)}function Y4(t,e){if(t==="input"||t==="change")return gy(e)}function J4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $r=typeof Object.is=="function"?Object.is:J4;function ad(t,e){if($r(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_w.call(e,i)||!$r(t[i],e[i]))return!1}return!0}function UR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $R(t,e){var n=UR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=UR(n)}}function LD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VD(){for(var t=window,e=jm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jm(t.document)}return e}function IE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Z4(t){var e=VD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LD(n.ownerDocument.documentElement,n)){if(r!==null&&IE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$R(n,s);var o=$R(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var e$=Qi&&"documentMode"in document&&11>=document.documentMode,zl=null,Fw=null,Rh=null,Bw=!1;function zR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bw||zl==null||zl!==jm(r)||(r=zl,"selectionStart"in r&&IE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rh&&ad(Rh,r)||(Rh=r,r=qm(Fw,"onSelect"),0<r.length&&(e=new EE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zl)))}function op(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wl={animationend:op("Animation","AnimationEnd"),animationiteration:op("Animation","AnimationIteration"),animationstart:op("Animation","AnimationStart"),transitionend:op("Transition","TransitionEnd")},Uv={},FD={};Qi&&(FD=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function yy(t){if(Uv[t])return Uv[t];if(!Wl[t])return t;var e=Wl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FD)return Uv[t]=e[n];return t}var BD=yy("animationend"),jD=yy("animationiteration"),UD=yy("animationstart"),$D=yy("transitionend"),zD=new Map,WR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(t,e){zD.set(t,e),Ya(e,[t])}for(var $v=0;$v<WR.length;$v++){var zv=WR[$v],t$=zv.toLowerCase(),n$=zv[0].toUpperCase()+zv.slice(1);Io(t$,"on"+n$)}Io(BD,"onAnimationEnd");Io(jD,"onAnimationIteration");Io(UD,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io($D,"onTransitionEnd");wu("onMouseEnter",["mouseout","mouseover"]);wu("onMouseLeave",["mouseout","mouseover"]);wu("onPointerEnter",["pointerout","pointerover"]);wu("onPointerLeave",["pointerout","pointerover"]);Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r$=new Set("cancel close invalid load scroll toggle".split(" ").concat(ih));function HR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,t4(r,e,void 0,t),t.currentTarget=null}function WD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;HR(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;HR(i,a,u),s=l}}}if($m)throw t=Mw,$m=!1,Mw=null,t}function Ge(t,e){var n=e[Ww];n===void 0&&(n=e[Ww]=new Set);var r=t+"__bubble";n.has(r)||(HD(e,t,2,!1),n.add(r))}function Wv(t,e,n){var r=0;e&&(r|=4),HD(n,t,r,e)}var ap="_reactListening"+Math.random().toString(36).slice(2);function ld(t){if(!t[ap]){t[ap]=!0,Jk.forEach(function(n){n!=="selectionchange"&&(r$.has(n)||Wv(n,!1,t),Wv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ap]||(e[ap]=!0,Wv("selectionchange",!1,e))}}function HD(t,e,n,r){switch(xD(e)){case 1:var i=y4;break;case 4:i=v4;break;default:i=wE}n=i.bind(null,e,n,t),i=void 0,!Ow||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hv(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=da(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}pD(function(){var u=s,c=gE(n),d=[];e:{var f=zD.get(t);if(f!==void 0){var p=EE,g=t;switch(t){case"keypress":if(Xp(n)===0)break e;case"keydown":case"keyup":p=O4;break;case"focusin":g="focus",p=Fv;break;case"focusout":g="blur",p=Fv;break;case"beforeblur":case"afterblur":p=Fv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=OR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=S4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=L4;break;case BD:case jD:case UD:p=b4;break;case $D:p=F4;break;case"scroll":p=_4;break;case"wheel":p=j4;break;case"copy":case"cut":case"paste":p=R4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=NR}var S=(e&4)!==0,T=!S&&t==="scroll",v=S?f!==null?f+"Capture":null:f;S=[];for(var y=u,_;y!==null;){_=y;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,v!==null&&(C=nd(y,v),C!=null&&S.push(ud(y,C,_)))),T)break;y=y.return}0<S.length&&(f=new p(f,g,null,n,c),d.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==kw&&(g=n.relatedTarget||n.fromElement)&&(da(g)||g[Yi]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?da(g):null,g!==null&&(T=Ja(g),g!==T||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(S=OR,C="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=NR,C="onPointerLeave",v="onPointerEnter",y="pointer"),T=p==null?f:Hl(p),_=g==null?f:Hl(g),f=new S(C,y+"leave",p,n,c),f.target=T,f.relatedTarget=_,C=null,da(c)===u&&(S=new S(v,y+"enter",g,n,c),S.target=_,S.relatedTarget=T,C=S),T=C,p&&g)t:{for(S=p,v=g,y=0,_=S;_;_=wl(_))y++;for(_=0,C=v;C;C=wl(C))_++;for(;0<y-_;)S=wl(S),y--;for(;0<_-y;)v=wl(v),_--;for(;y--;){if(S===v||v!==null&&S===v.alternate)break t;S=wl(S),v=wl(v)}S=null}else S=null;p!==null&&KR(d,f,p,S,!1),g!==null&&T!==null&&KR(d,T,g,S,!0)}}e:{if(f=u?Hl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=q4;else if(FR(f))if(MD)O=Y4;else{O=X4;var D=G4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=Q4);if(O&&(O=O(t,u))){OD(d,O,n,c);break e}D&&D(t,f,u),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Rw(f,"number",f.value)}switch(D=u?Hl(u):window,t){case"focusin":(FR(D)||D.contentEditable==="true")&&(zl=D,Fw=u,Rh=null);break;case"focusout":Rh=Fw=zl=null;break;case"mousedown":Bw=!0;break;case"contextmenu":case"mouseup":case"dragend":Bw=!1,zR(d,n,c);break;case"selectionchange":if(e$)break;case"keydown":case"keyup":zR(d,n,c)}var b;if(bE)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else $l?kD(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(PD&&n.locale!=="ko"&&($l||E!=="onCompositionStart"?E==="onCompositionEnd"&&$l&&(b=AD()):(eo=c,SE="value"in eo?eo.value:eo.textContent,$l=!0)),D=qm(u,E),0<D.length&&(E=new MR(E,t,null,n,c),d.push({event:E,listeners:D}),b?E.data=b:(b=DD(n),b!==null&&(E.data=b)))),(b=$4?z4(t,n):W4(t,n))&&(u=qm(u,"onBeforeInput"),0<u.length&&(c=new MR("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=b))}WD(d,e)})}function ud(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nd(t,n),s!=null&&r.unshift(ud(t,s,i)),s=nd(t,e),s!=null&&r.push(ud(t,s,i))),t=t.return}return r}function wl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KR(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=nd(n,s),l!=null&&o.unshift(ud(n,l,a))):i||(l=nd(n,s),l!=null&&o.push(ud(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var i$=/\r\n?/g,s$=/\u0000|\uFFFD/g;function qR(t){return(typeof t=="string"?t:""+t).replace(i$,`
`).replace(s$,"")}function lp(t,e,n){if(e=qR(e),qR(t)!==e&&n)throw Error(W(425))}function Gm(){}var jw=null,Uw=null;function $w(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zw=typeof setTimeout=="function"?setTimeout:void 0,o$=typeof clearTimeout=="function"?clearTimeout:void 0,GR=typeof Promise=="function"?Promise:void 0,a$=typeof queueMicrotask=="function"?queueMicrotask:typeof GR<"u"?function(t){return GR.resolve(null).then(t).catch(l$)}:zw;function l$(t){setTimeout(function(){throw t})}function Kv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sd(e)}function oo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function XR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qu=Math.random().toString(36).slice(2),si="__reactFiber$"+Qu,cd="__reactProps$"+Qu,Yi="__reactContainer$"+Qu,Ww="__reactEvents$"+Qu,u$="__reactListeners$"+Qu,c$="__reactHandles$"+Qu;function da(t){var e=t[si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yi]||n[si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=XR(t);t!==null;){if(n=t[si])return n;t=XR(t)}return e}t=n,n=t.parentNode}return null}function Qd(t){return t=t[si]||t[Yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function vy(t){return t[cd]||null}var Hw=[],Kl=-1;function Ro(t){return{current:t}}function Xe(t){0>Kl||(t.current=Hw[Kl],Hw[Kl]=null,Kl--)}function We(t,e){Kl++,Hw[Kl]=t.current,t.current=e}var yo={},un=Ro(yo),Pn=Ro(!1),Oa=yo;function Su(t,e){var n=t.type.contextTypes;if(!n)return yo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kn(t){return t=t.childContextTypes,t!=null}function Xm(){Xe(Pn),Xe(un)}function QR(t,e,n){if(un.current!==yo)throw Error(W(168));We(un,e),We(Pn,n)}function KD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,GU(t)||"Unknown",i));return ot({},n,r)}function Qm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yo,Oa=un.current,We(un,t),We(Pn,Pn.current),!0}function YR(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=KD(t,e,Oa),r.__reactInternalMemoizedMergedChildContext=t,Xe(Pn),Xe(un),We(un,t)):Xe(Pn),We(Pn,n)}var Bi=null,_y=!1,qv=!1;function qD(t){Bi===null?Bi=[t]:Bi.push(t)}function h$(t){_y=!0,qD(t)}function Co(){if(!qv&&Bi!==null){qv=!0;var t=0,e=Ve;try{var n=Bi;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bi=null,_y=!1}catch(i){throw Bi!==null&&(Bi=Bi.slice(t+1)),vD(yE,Co),i}finally{Ve=e,qv=!1}}return null}var ql=[],Gl=0,Ym=null,Jm=0,ur=[],cr=0,Ma=null,ji=1,Ui="";function ea(t,e){ql[Gl++]=Jm,ql[Gl++]=Ym,Ym=t,Jm=e}function GD(t,e,n){ur[cr++]=ji,ur[cr++]=Ui,ur[cr++]=Ma,Ma=t;var r=ji;t=Ui;var i=32-Br(r)-1;r&=~(1<<i),n+=1;var s=32-Br(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ji=1<<32-Br(e)+i|n<<i|r,Ui=s+t}else ji=1<<s|n<<i|r,Ui=t}function RE(t){t.return!==null&&(ea(t,1),GD(t,1,0))}function CE(t){for(;t===Ym;)Ym=ql[--Gl],ql[Gl]=null,Jm=ql[--Gl],ql[Gl]=null;for(;t===Ma;)Ma=ur[--cr],ur[cr]=null,Ui=ur[--cr],ur[cr]=null,ji=ur[--cr],ur[cr]=null}var Xn=null,Kn=null,Je=!1,Lr=null;function XD(t,e){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function JR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=oo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ma!==null?{id:ji,overflow:Ui}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Kn=null,!0):!1;default:return!1}}function Kw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qw(t){if(Je){var e=Kn;if(e){var n=e;if(!JR(t,e)){if(Kw(t))throw Error(W(418));e=oo(n.nextSibling);var r=Xn;e&&JR(t,e)?XD(r,n):(t.flags=t.flags&-4097|2,Je=!1,Xn=t)}}else{if(Kw(t))throw Error(W(418));t.flags=t.flags&-4097|2,Je=!1,Xn=t}}}function ZR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function up(t){if(t!==Xn)return!1;if(!Je)return ZR(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$w(t.type,t.memoizedProps)),e&&(e=Kn)){if(Kw(t))throw QD(),Error(W(418));for(;e;)XD(t,e),e=oo(e.nextSibling)}if(ZR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kn=oo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kn=null}}else Kn=Xn?oo(t.stateNode.nextSibling):null;return!0}function QD(){for(var t=Kn;t;)t=oo(t.nextSibling)}function Eu(){Kn=Xn=null,Je=!1}function xE(t){Lr===null?Lr=[t]:Lr.push(t)}var d$=ls.ReactCurrentBatchConfig;function jc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function cp(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function eC(t){var e=t._init;return e(t._payload)}function YD(t){function e(v,y){if(t){var _=v.deletions;_===null?(v.deletions=[y],v.flags|=16):_.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=co(v,y),v.index=0,v.sibling=null,v}function s(v,y,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<y?(v.flags|=2,y):_):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,_,C){return y===null||y.tag!==6?(y=e_(_,v.mode,C),y.return=v,y):(y=i(y,_),y.return=v,y)}function l(v,y,_,C){var O=_.type;return O===Ul?c(v,y,_.props.children,C,_.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===zs&&eC(O)===y.type)?(C=i(y,_.props),C.ref=jc(v,y,_),C.return=v,C):(C=nm(_.type,_.key,_.props,null,v.mode,C),C.ref=jc(v,y,_),C.return=v,C)}function u(v,y,_,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=t_(_,v.mode,C),y.return=v,y):(y=i(y,_.children||[]),y.return=v,y)}function c(v,y,_,C,O){return y===null||y.tag!==7?(y=ba(_,v.mode,C,O),y.return=v,y):(y=i(y,_),y.return=v,y)}function d(v,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=e_(""+y,v.mode,_),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zf:return _=nm(y.type,y.key,y.props,null,v.mode,_),_.ref=jc(v,null,y),_.return=v,_;case jl:return y=t_(y,v.mode,_),y.return=v,y;case zs:var C=y._init;return d(v,C(y._payload),_)}if(nh(y)||Nc(y))return y=ba(y,v.mode,_,null),y.return=v,y;cp(v,y)}return null}function f(v,y,_,C){var O=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return O!==null?null:a(v,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zf:return _.key===O?l(v,y,_,C):null;case jl:return _.key===O?u(v,y,_,C):null;case zs:return O=_._init,f(v,y,O(_._payload),C)}if(nh(_)||Nc(_))return O!==null?null:c(v,y,_,C,null);cp(v,_)}return null}function p(v,y,_,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(_)||null,a(y,v,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Zf:return v=v.get(C.key===null?_:C.key)||null,l(y,v,C,O);case jl:return v=v.get(C.key===null?_:C.key)||null,u(y,v,C,O);case zs:var D=C._init;return p(v,y,_,D(C._payload),O)}if(nh(C)||Nc(C))return v=v.get(_)||null,c(y,v,C,O,null);cp(y,C)}return null}function g(v,y,_,C){for(var O=null,D=null,b=y,E=y=0,R=null;b!==null&&E<_.length;E++){b.index>E?(R=b,b=null):R=b.sibling;var A=f(v,b,_[E],C);if(A===null){b===null&&(b=R);break}t&&b&&A.alternate===null&&e(v,b),y=s(A,y,E),D===null?O=A:D.sibling=A,D=A,b=R}if(E===_.length)return n(v,b),Je&&ea(v,E),O;if(b===null){for(;E<_.length;E++)b=d(v,_[E],C),b!==null&&(y=s(b,y,E),D===null?O=b:D.sibling=b,D=b);return Je&&ea(v,E),O}for(b=r(v,b);E<_.length;E++)R=p(b,v,E,_[E],C),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?E:R.key),y=s(R,y,E),D===null?O=R:D.sibling=R,D=R);return t&&b.forEach(function(x){return e(v,x)}),Je&&ea(v,E),O}function S(v,y,_,C){var O=Nc(_);if(typeof O!="function")throw Error(W(150));if(_=O.call(_),_==null)throw Error(W(151));for(var D=O=null,b=y,E=y=0,R=null,A=_.next();b!==null&&!A.done;E++,A=_.next()){b.index>E?(R=b,b=null):R=b.sibling;var x=f(v,b,A.value,C);if(x===null){b===null&&(b=R);break}t&&b&&x.alternate===null&&e(v,b),y=s(x,y,E),D===null?O=x:D.sibling=x,D=x,b=R}if(A.done)return n(v,b),Je&&ea(v,E),O;if(b===null){for(;!A.done;E++,A=_.next())A=d(v,A.value,C),A!==null&&(y=s(A,y,E),D===null?O=A:D.sibling=A,D=A);return Je&&ea(v,E),O}for(b=r(v,b);!A.done;E++,A=_.next())A=p(b,v,E,A.value,C),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?E:A.key),y=s(A,y,E),D===null?O=A:D.sibling=A,D=A);return t&&b.forEach(function(N){return e(v,N)}),Je&&ea(v,E),O}function T(v,y,_,C){if(typeof _=="object"&&_!==null&&_.type===Ul&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Zf:e:{for(var O=_.key,D=y;D!==null;){if(D.key===O){if(O=_.type,O===Ul){if(D.tag===7){n(v,D.sibling),y=i(D,_.props.children),y.return=v,v=y;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===zs&&eC(O)===D.type){n(v,D.sibling),y=i(D,_.props),y.ref=jc(v,D,_),y.return=v,v=y;break e}n(v,D);break}else e(v,D);D=D.sibling}_.type===Ul?(y=ba(_.props.children,v.mode,C,_.key),y.return=v,v=y):(C=nm(_.type,_.key,_.props,null,v.mode,C),C.ref=jc(v,y,_),C.return=v,v=C)}return o(v);case jl:e:{for(D=_.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(v,y.sibling),y=i(y,_.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=t_(_,v.mode,C),y.return=v,v=y}return o(v);case zs:return D=_._init,T(v,y,D(_._payload),C)}if(nh(_))return g(v,y,_,C);if(Nc(_))return S(v,y,_,C);cp(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,_),y.return=v,v=y):(n(v,y),y=e_(_,v.mode,C),y.return=v,v=y),o(v)):n(v,y)}return T}var Tu=YD(!0),JD=YD(!1),Zm=Ro(null),eg=null,Xl=null,AE=null;function PE(){AE=Xl=eg=null}function kE(t){var e=Zm.current;Xe(Zm),t._currentValue=e}function Gw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cu(t,e){eg=t,AE=Xl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function vr(t){var e=t._currentValue;if(AE!==t)if(t={context:t,memoizedValue:e,next:null},Xl===null){if(eg===null)throw Error(W(308));Xl=t,eg.dependencies={lanes:0,firstContext:t}}else Xl=Xl.next=t;return e}var fa=null;function DE(t){fa===null?fa=[t]:fa.push(t)}function ZD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,DE(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ji(t,r)}function Ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ws=!1;function OE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ao(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ji(t,n)}return i=r.interleaved,i===null?(e.next=e,DE(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ji(t,n)}function Qp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vE(t,n)}}function tC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tg(t,e,n,r){var i=t.updateQueue;Ws=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,S=a;switch(f=e,p=n,S.tag){case 1:if(g=S.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=ot({},d,f);break e;case 2:Ws=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);La|=o,t.lanes=o,t.memoizedState=d}}function nC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Yd={},mi=Ro(Yd),hd=Ro(Yd),dd=Ro(Yd);function pa(t){if(t===Yd)throw Error(W(174));return t}function ME(t,e){switch(We(dd,e),We(hd,t),We(mi,Yd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xw(e,t)}Xe(mi),We(mi,e)}function bu(){Xe(mi),Xe(hd),Xe(dd)}function tO(t){pa(dd.current);var e=pa(mi.current),n=xw(e,t.type);e!==n&&(We(hd,t),We(mi,n))}function NE(t){hd.current===t&&(Xe(mi),Xe(hd))}var tt=Ro(0);function ng(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gv=[];function LE(){for(var t=0;t<Gv.length;t++)Gv[t]._workInProgressVersionPrimary=null;Gv.length=0}var Yp=ls.ReactCurrentDispatcher,Xv=ls.ReactCurrentBatchConfig,Na=0,it=null,Pt=null,Ut=null,rg=!1,Ch=!1,fd=0,f$=0;function Jt(){throw Error(W(321))}function VE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$r(t[n],e[n]))return!1;return!0}function FE(t,e,n,r,i,s){if(Na=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yp.current=t===null||t.memoizedState===null?y$:v$,t=n(r,i),Ch){s=0;do{if(Ch=!1,fd=0,25<=s)throw Error(W(301));s+=1,Ut=Pt=null,e.updateQueue=null,Yp.current=_$,t=n(r,i)}while(Ch)}if(Yp.current=ig,e=Pt!==null&&Pt.next!==null,Na=0,Ut=Pt=it=null,rg=!1,e)throw Error(W(300));return t}function BE(){var t=fd!==0;return fd=0,t}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?it.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function _r(){if(Pt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Pt.next;var e=Ut===null?it.memoizedState:Ut.next;if(e!==null)Ut=e,Pt=t;else{if(t===null)throw Error(W(310));Pt=t,t={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Ut===null?it.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function pd(t,e){return typeof e=="function"?e(t):e}function Qv(t){var e=_r(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Na&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,it.lanes|=c,La|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,$r(r,e.memoizedState)||(Rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,La|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yv(t){var e=_r(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);$r(s,e.memoizedState)||(Rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function nO(){}function rO(t,e){var n=it,r=_r(),i=e(),s=!$r(r.memoizedState,i);if(s&&(r.memoizedState=i,Rn=!0),r=r.queue,jE(oO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,md(9,sO.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(W(349));Na&30||iO(n,e,i)}return i}function iO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sO(t,e,n,r){e.value=n,e.getSnapshot=r,aO(e)&&lO(t)}function oO(t,e,n){return n(function(){aO(e)&&lO(t)})}function aO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$r(t,n)}catch{return!0}}function lO(t){var e=Ji(t,1);e!==null&&jr(e,t,1,-1)}function rC(t){var e=ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pd,lastRenderedState:t},e.queue=t,t=t.dispatch=g$.bind(null,it,t),[e.memoizedState,t]}function md(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uO(){return _r().memoizedState}function Jp(t,e,n,r){var i=ti();it.flags|=t,i.memoizedState=md(1|e,n,void 0,r===void 0?null:r)}function wy(t,e,n,r){var i=_r();r=r===void 0?null:r;var s=void 0;if(Pt!==null){var o=Pt.memoizedState;if(s=o.destroy,r!==null&&VE(r,o.deps)){i.memoizedState=md(e,n,s,r);return}}it.flags|=t,i.memoizedState=md(1|e,n,s,r)}function iC(t,e){return Jp(8390656,8,t,e)}function jE(t,e){return wy(2048,8,t,e)}function cO(t,e){return wy(4,2,t,e)}function hO(t,e){return wy(4,4,t,e)}function dO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fO(t,e,n){return n=n!=null?n.concat([t]):null,wy(4,4,dO.bind(null,e,t),n)}function UE(){}function pO(t,e){var n=_r();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mO(t,e){var n=_r();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gO(t,e,n){return Na&21?($r(n,e)||(n=SD(),it.lanes|=n,La|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=n)}function p$(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Xv.transition;Xv.transition={};try{t(!1),e()}finally{Ve=n,Xv.transition=r}}function yO(){return _r().memoizedState}function m$(t,e,n){var r=uo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vO(t))_O(e,n);else if(n=ZD(t,e,n,r),n!==null){var i=vn();jr(n,t,r,i),wO(n,e,r)}}function g$(t,e,n){var r=uo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vO(t))_O(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,$r(a,o)){var l=e.interleaved;l===null?(i.next=i,DE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=ZD(t,e,i,r),n!==null&&(i=vn(),jr(n,t,r,i),wO(n,e,r))}}function vO(t){var e=t.alternate;return t===it||e!==null&&e===it}function _O(t,e){Ch=rg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vE(t,n)}}var ig={readContext:vr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},y$={readContext:vr,useCallback:function(t,e){return ti().memoizedState=[t,e===void 0?null:e],t},useContext:vr,useEffect:iC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jp(4194308,4,dO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jp(4,2,t,e)},useMemo:function(t,e){var n=ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ti();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=m$.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=ti();return t={current:t},e.memoizedState=t},useState:rC,useDebugValue:UE,useDeferredValue:function(t){return ti().memoizedState=t},useTransition:function(){var t=rC(!1),e=t[0];return t=p$.bind(null,t[1]),ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=ti();if(Je){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),$t===null)throw Error(W(349));Na&30||iO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,iC(oO.bind(null,r,s,t),[t]),r.flags|=2048,md(9,sO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ti(),e=$t.identifierPrefix;if(Je){var n=Ui,r=ji;n=(r&~(1<<32-Br(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=f$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},v$={readContext:vr,useCallback:pO,useContext:vr,useEffect:jE,useImperativeHandle:fO,useInsertionEffect:cO,useLayoutEffect:hO,useMemo:mO,useReducer:Qv,useRef:uO,useState:function(){return Qv(pd)},useDebugValue:UE,useDeferredValue:function(t){var e=_r();return gO(e,Pt.memoizedState,t)},useTransition:function(){var t=Qv(pd)[0],e=_r().memoizedState;return[t,e]},useMutableSource:nO,useSyncExternalStore:rO,useId:yO,unstable_isNewReconciler:!1},_$={readContext:vr,useCallback:pO,useContext:vr,useEffect:jE,useImperativeHandle:fO,useInsertionEffect:cO,useLayoutEffect:hO,useMemo:mO,useReducer:Yv,useRef:uO,useState:function(){return Yv(pd)},useDebugValue:UE,useDeferredValue:function(t){var e=_r();return Pt===null?e.memoizedState=t:gO(e,Pt.memoizedState,t)},useTransition:function(){var t=Yv(pd)[0],e=_r().memoizedState;return[t,e]},useMutableSource:nO,useSyncExternalStore:rO,useId:yO,unstable_isNewReconciler:!1};function Dr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sy={isMounted:function(t){return(t=t._reactInternals)?Ja(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),i=uo(t),s=Ki(r,i);s.payload=e,n!=null&&(s.callback=n),e=ao(t,s,i),e!==null&&(jr(e,t,i,r),Qp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),i=uo(t),s=Ki(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ao(t,s,i),e!==null&&(jr(e,t,i,r),Qp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=uo(t),i=Ki(n,r);i.tag=2,e!=null&&(i.callback=e),e=ao(t,i,r),e!==null&&(jr(e,t,r,n),Qp(e,t,r))}};function sC(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ad(n,r)||!ad(i,s):!0}function SO(t,e,n){var r=!1,i=yo,s=e.contextType;return typeof s=="object"&&s!==null?s=vr(s):(i=kn(e)?Oa:un.current,r=e.contextTypes,s=(r=r!=null)?Su(t,i):yo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function oC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sy.enqueueReplaceState(e,e.state,null)}function Qw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},OE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vr(s):(s=kn(e)?Oa:un.current,i.context=Su(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sy.enqueueReplaceState(i,i.state,null),tg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Iu(t,e){try{var n="",r=e;do n+=qU(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Jv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var w$=typeof WeakMap=="function"?WeakMap:Map;function EO(t,e,n){n=Ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){og||(og=!0,aS=r),Yw(t,e)},n}function TO(t,e,n){n=Ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yw(t,e),typeof r!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function aC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new w$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=M$.bind(null,t,e,n),e.then(t,t))}function lC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ki(-1,1),e.tag=2,ao(n,e,1))),n.lanes|=1),t)}var S$=ls.ReactCurrentOwner,Rn=!1;function mn(t,e,n,r){e.child=t===null?JD(e,null,n,r):Tu(e,t.child,n,r)}function cC(t,e,n,r,i){n=n.render;var s=e.ref;return cu(e,i),r=FE(t,e,n,r,s,i),n=BE(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zi(t,e,i)):(Je&&n&&RE(e),e.flags|=1,mn(t,e,r,i),e.child)}function hC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!XE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,bO(t,e,s,r,i)):(t=nm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ad,n(o,r)&&t.ref===e.ref)return Zi(t,e,i)}return e.flags|=1,t=co(s,r),t.ref=e.ref,t.return=e,e.child=t}function bO(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ad(s,r)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,Zi(t,e,i)}return Jw(t,e,n,r,i)}function IO(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Yl,$n),$n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(Yl,$n),$n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(Yl,$n),$n|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,We(Yl,$n),$n|=r;return mn(t,e,i,n),e.child}function RO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jw(t,e,n,r,i){var s=kn(n)?Oa:un.current;return s=Su(e,s),cu(e,i),n=FE(t,e,n,r,s,i),r=BE(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zi(t,e,i)):(Je&&r&&RE(e),e.flags|=1,mn(t,e,n,i),e.child)}function dC(t,e,n,r,i){if(kn(n)){var s=!0;Qm(e)}else s=!1;if(cu(e,i),e.stateNode===null)Zp(t,e),SO(e,n,r),Qw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=vr(u):(u=kn(n)?Oa:un.current,u=Su(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&oC(e,o,r,u),Ws=!1;var f=e.memoizedState;o.state=f,tg(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Pn.current||Ws?(typeof c=="function"&&(Xw(e,n,c,r),l=e.memoizedState),(a=Ws||sC(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eO(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Dr(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=vr(l):(l=kn(n)?Oa:un.current,l=Su(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&oC(e,o,r,l),Ws=!1,f=e.memoizedState,o.state=f,tg(e,r,o,i);var g=e.memoizedState;a!==d||f!==g||Pn.current||Ws?(typeof p=="function"&&(Xw(e,n,p,r),g=e.memoizedState),(u=Ws||sC(e,n,u,r,f,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Zw(t,e,n,r,s,i)}function Zw(t,e,n,r,i,s){RO(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&YR(e,n,!1),Zi(t,e,s);r=e.stateNode,S$.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tu(e,t.child,null,s),e.child=Tu(e,null,a,s)):mn(t,e,a,s),e.memoizedState=r.state,i&&YR(e,n,!0),e.child}function CO(t){var e=t.stateNode;e.pendingContext?QR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&QR(t,e.context,!1),ME(t,e.containerInfo)}function fC(t,e,n,r,i){return Eu(),xE(i),e.flags|=256,mn(t,e,n,r),e.child}var eS={dehydrated:null,treeContext:null,retryLane:0};function tS(t){return{baseLanes:t,cachePool:null,transitions:null}}function xO(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),We(tt,i&1),t===null)return qw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=by(o,r,0,null),t=ba(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=tS(n),e.memoizedState=eS,t):$E(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return E$(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=co(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=co(a,s):(s=ba(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?tS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=eS,r}return s=t.child,t=s.sibling,r=co(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $E(t,e){return e=by({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hp(t,e,n,r){return r!==null&&xE(r),Tu(e,t.child,null,n),t=$E(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function E$(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Jv(Error(W(422))),hp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=by({mode:"visible",children:r.children},i,0,null),s=ba(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Tu(e,t.child,null,o),e.child.memoizedState=tS(o),e.memoizedState=eS,s);if(!(e.mode&1))return hp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Jv(s,r,void 0),hp(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rn||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ji(t,i),jr(r,t,i,-1))}return GE(),r=Jv(Error(W(421))),hp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=N$.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kn=oo(i.nextSibling),Xn=e,Je=!0,Lr=null,t!==null&&(ur[cr++]=ji,ur[cr++]=Ui,ur[cr++]=Ma,ji=t.id,Ui=t.overflow,Ma=e),e=$E(e,r.children),e.flags|=4096,e)}function pC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gw(t.return,e,n)}function Zv(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function AO(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pC(t,n,e);else if(t.tag===19)pC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ng(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zv(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ng(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zv(e,!0,n,null,s);break;case"together":Zv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),La|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=co(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=co(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T$(t,e,n){switch(e.tag){case 3:CO(e),Eu();break;case 5:tO(e);break;case 1:kn(e.type)&&Qm(e);break;case 4:ME(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;We(Zm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?xO(t,e,n):(We(tt,tt.current&1),t=Zi(t,e,n),t!==null?t.sibling:null);We(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return AO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,IO(t,e,n)}return Zi(t,e,n)}var PO,nS,kO,DO;PO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nS=function(){};kO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pa(mi.current);var s=null;switch(n){case"input":i=bw(t,i),r=bw(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=Cw(t,i),r=Cw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gm)}Aw(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ed.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ed.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ge("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};DO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Uc(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function b$(t,e,n){var r=e.pendingProps;switch(CE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return kn(e.type)&&Xm(),Zt(e),null;case 3:return r=e.stateNode,bu(),Xe(Pn),Xe(un),LE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(up(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(cS(Lr),Lr=null))),nS(t,e),Zt(e),null;case 5:NE(e);var i=pa(dd.current);if(n=e.type,t!==null&&e.stateNode!=null)kO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Zt(e),null}if(t=pa(mi.current),up(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[si]=e,r[cd]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<ih.length;i++)Ge(ih[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":TR(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":IR(r,s),Ge("invalid",r)}Aw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&lp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lp(r.textContent,a,t),i=["children",""+a]):ed.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":ep(r),bR(r,s,!0);break;case"textarea":ep(r),RR(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[si]=e,t[cd]=r,PO(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pw(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<ih.length;i++)Ge(ih[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":TR(t,r),i=bw(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":IR(t,r),i=Cw(t,r),Ge("invalid",t);break;default:i=r}Aw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uD(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aD(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&td(t,l):typeof l=="number"&&td(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ed.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",t):l!=null&&dE(t,s,l,o))}switch(n){case"input":ep(t),bR(t,r,!1);break;case"textarea":ep(t),RR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+go(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ou(t,!!r.multiple,s,!1):r.defaultValue!=null&&ou(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)DO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=pa(dd.current),pa(mi.current),up(e)){if(r=e.stateNode,n=e.memoizedProps,r[si]=e,(s=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:lp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[si]=e,e.stateNode=r}return Zt(e),null;case 13:if(Xe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&Kn!==null&&e.mode&1&&!(e.flags&128))QD(),Eu(),e.flags|=98560,s=!1;else if(s=up(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[si]=e}else Eu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else Lr!==null&&(cS(Lr),Lr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?kt===0&&(kt=3):GE())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return bu(),nS(t,e),t===null&&ld(e.stateNode.containerInfo),Zt(e),null;case 10:return kE(e.type._context),Zt(e),null;case 17:return kn(e.type)&&Xm(),Zt(e),null;case 19:if(Xe(tt),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Uc(s,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ng(t),o!==null){for(e.flags|=128,Uc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&vt()>Ru&&(e.flags|=128,r=!0,Uc(s,!1),e.lanes=4194304)}else{if(!r)if(t=ng(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Je)return Zt(e),null}else 2*vt()-s.renderingStartTime>Ru&&n!==1073741824&&(e.flags|=128,r=!0,Uc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,n=tt.current,We(tt,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return qE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$n&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function I$(t,e){switch(CE(e),e.tag){case 1:return kn(e.type)&&Xm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bu(),Xe(Pn),Xe(un),LE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NE(e),null;case 13:if(Xe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Eu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(tt),null;case 4:return bu(),null;case 10:return kE(e.type._context),null;case 22:case 23:return qE(),null;case 24:return null;default:return null}}var dp=!1,sn=!1,R$=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ql(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function rS(t,e,n){try{n()}catch(r){ht(t,e,r)}}var mC=!1;function C$(t,e){if(jw=Hm,t=VD(),IE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uw={focusedElem:t,selectionRange:n},Hm=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var S=g.memoizedProps,T=g.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?S:Dr(e.type,S),T);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(C){ht(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return g=mC,mC=!1,g}function xh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&rS(e,n,s)}i=i.next}while(i!==r)}}function Ey(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function iS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function OO(t){var e=t.alternate;e!==null&&(t.alternate=null,OO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[si],delete e[cd],delete e[Ww],delete e[u$],delete e[c$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MO(t){return t.tag===5||t.tag===3||t.tag===4}function gC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gm));else if(r!==4&&(t=t.child,t!==null))for(sS(t,e,n),t=t.sibling;t!==null;)sS(t,e,n),t=t.sibling}function oS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oS(t,e,n),t=t.sibling;t!==null;)oS(t,e,n),t=t.sibling}var Wt=null,Mr=!1;function ks(t,e,n){for(n=n.child;n!==null;)NO(t,e,n),n=n.sibling}function NO(t,e,n){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(py,n)}catch{}switch(n.tag){case 5:sn||Ql(n,e);case 6:var r=Wt,i=Mr;Wt=null,ks(t,e,n),Wt=r,Mr=i,Wt!==null&&(Mr?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(Mr?(t=Wt,n=n.stateNode,t.nodeType===8?Kv(t.parentNode,n):t.nodeType===1&&Kv(t,n),sd(t)):Kv(Wt,n.stateNode));break;case 4:r=Wt,i=Mr,Wt=n.stateNode.containerInfo,Mr=!0,ks(t,e,n),Wt=r,Mr=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&rS(n,e,o),i=i.next}while(i!==r)}ks(t,e,n);break;case 1:if(!sn&&(Ql(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}ks(t,e,n);break;case 21:ks(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,ks(t,e,n),sn=r):ks(t,e,n);break;default:ks(t,e,n)}}function yC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new R$),e.forEach(function(r){var i=L$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wt=a.stateNode,Mr=!1;break e;case 3:Wt=a.stateNode.containerInfo,Mr=!0;break e;case 4:Wt=a.stateNode.containerInfo,Mr=!0;break e}a=a.return}if(Wt===null)throw Error(W(160));NO(s,o,i),Wt=null,Mr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ht(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LO(e,t),e=e.sibling}function LO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rr(e,t),Jr(t),r&4){try{xh(3,t,t.return),Ey(3,t)}catch(S){ht(t,t.return,S)}try{xh(5,t,t.return)}catch(S){ht(t,t.return,S)}}break;case 1:Rr(e,t),Jr(t),r&512&&n!==null&&Ql(n,n.return);break;case 5:if(Rr(e,t),Jr(t),r&512&&n!==null&&Ql(n,n.return),t.flags&32){var i=t.stateNode;try{td(i,"")}catch(S){ht(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&iD(i,s),Pw(a,o);var u=Pw(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?uD(i,d):c==="dangerouslySetInnerHTML"?aD(i,d):c==="children"?td(i,d):dE(i,c,d,u)}switch(a){case"input":Iw(i,s);break;case"textarea":sD(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ou(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?ou(i,!!s.multiple,s.defaultValue,!0):ou(i,!!s.multiple,s.multiple?[]:"",!1))}i[cd]=s}catch(S){ht(t,t.return,S)}}break;case 6:if(Rr(e,t),Jr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){ht(t,t.return,S)}}break;case 3:if(Rr(e,t),Jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sd(e.containerInfo)}catch(S){ht(t,t.return,S)}break;case 4:Rr(e,t),Jr(t);break;case 13:Rr(e,t),Jr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(HE=vt())),r&4&&yC(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(u=sn)||c,Rr(e,t),sn=u):Rr(e,t),Jr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(J=t,c=t.child;c!==null;){for(d=J=c;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:xh(4,f,f.return);break;case 1:Ql(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(S){ht(r,n,S)}}break;case 5:Ql(f,f.return);break;case 22:if(f.memoizedState!==null){_C(d);continue}}p!==null?(p.return=f,J=p):_C(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lD("display",o))}catch(S){ht(t,t.return,S)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){ht(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rr(e,t),Jr(t),r&4&&yC(t);break;case 21:break;default:Rr(e,t),Jr(t)}}function Jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(MO(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(td(i,""),r.flags&=-33);var s=gC(t);oS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gC(t);sS(t,a,o);break;default:throw Error(W(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function x$(t,e,n){J=t,VO(t)}function VO(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||dp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||sn;a=dp;var u=sn;if(dp=o,(sn=l)&&!u)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?wC(i):l!==null?(l.return=o,J=l):wC(i);for(;s!==null;)J=s,VO(s),s=s.sibling;J=i,dp=a,sn=u}vC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):vC(t)}}function vC(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||Ey(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&sd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}sn||e.flags&512&&iS(e)}catch(f){ht(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function _C(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function wC(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ey(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ht(e,i,l)}}var s=e.return;try{iS(e)}catch(l){ht(e,s,l)}break;case 5:var o=e.return;try{iS(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var A$=Math.ceil,sg=ls.ReactCurrentDispatcher,zE=ls.ReactCurrentOwner,mr=ls.ReactCurrentBatchConfig,xe=0,$t=null,Tt=null,Xt=0,$n=0,Yl=Ro(0),kt=0,gd=null,La=0,Ty=0,WE=0,Ah=null,In=null,HE=0,Ru=1/0,Vi=null,og=!1,aS=null,lo=null,fp=!1,to=null,ag=0,Ph=0,lS=null,em=-1,tm=0;function vn(){return xe&6?vt():em!==-1?em:em=vt()}function uo(t){return t.mode&1?xe&2&&Xt!==0?Xt&-Xt:d$.transition!==null?(tm===0&&(tm=SD()),tm):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:xD(t.type)),t):1}function jr(t,e,n,r){if(50<Ph)throw Ph=0,lS=null,Error(W(185));Gd(t,n,r),(!(xe&2)||t!==$t)&&(t===$t&&(!(xe&2)&&(Ty|=n),kt===4&&qs(t,Xt)),Dn(t,r),n===1&&xe===0&&!(e.mode&1)&&(Ru=vt()+500,_y&&Co()))}function Dn(t,e){var n=t.callbackNode;d4(t,e);var r=Wm(t,t===$t?Xt:0);if(r===0)n!==null&&AR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&AR(n),e===1)t.tag===0?h$(SC.bind(null,t)):qD(SC.bind(null,t)),a$(function(){!(xe&6)&&Co()}),n=null;else{switch(ED(r)){case 1:n=yE;break;case 4:n=_D;break;case 16:n=zm;break;case 536870912:n=wD;break;default:n=zm}n=HO(n,FO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FO(t,e){if(em=-1,tm=0,xe&6)throw Error(W(327));var n=t.callbackNode;if(hu()&&t.callbackNode!==n)return null;var r=Wm(t,t===$t?Xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lg(t,r);else{e=r;var i=xe;xe|=2;var s=jO();($t!==t||Xt!==e)&&(Vi=null,Ru=vt()+500,Ta(t,e));do try{D$();break}catch(a){BO(t,a)}while(!0);PE(),sg.current=s,xe=i,Tt!==null?e=0:($t=null,Xt=0,e=kt)}if(e!==0){if(e===2&&(i=Nw(t),i!==0&&(r=i,e=uS(t,i))),e===1)throw n=gd,Ta(t,0),qs(t,r),Dn(t,vt()),n;if(e===6)qs(t,r);else{if(i=t.current.alternate,!(r&30)&&!P$(i)&&(e=lg(t,r),e===2&&(s=Nw(t),s!==0&&(r=s,e=uS(t,s))),e===1))throw n=gd,Ta(t,0),qs(t,r),Dn(t,vt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ta(t,In,Vi);break;case 3:if(qs(t,r),(r&130023424)===r&&(e=HE+500-vt(),10<e)){if(Wm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zw(ta.bind(null,t,In,Vi),e);break}ta(t,In,Vi);break;case 4:if(qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Br(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*A$(r/1960))-r,10<r){t.timeoutHandle=zw(ta.bind(null,t,In,Vi),r);break}ta(t,In,Vi);break;case 5:ta(t,In,Vi);break;default:throw Error(W(329))}}}return Dn(t,vt()),t.callbackNode===n?FO.bind(null,t):null}function uS(t,e){var n=Ah;return t.current.memoizedState.isDehydrated&&(Ta(t,e).flags|=256),t=lg(t,e),t!==2&&(e=In,In=n,e!==null&&cS(e)),t}function cS(t){In===null?In=t:In.push.apply(In,t)}function P$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$r(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qs(t,e){for(e&=~WE,e&=~Ty,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Br(e),r=1<<n;t[n]=-1,e&=~r}}function SC(t){if(xe&6)throw Error(W(327));hu();var e=Wm(t,0);if(!(e&1))return Dn(t,vt()),null;var n=lg(t,e);if(t.tag!==0&&n===2){var r=Nw(t);r!==0&&(e=r,n=uS(t,r))}if(n===1)throw n=gd,Ta(t,0),qs(t,e),Dn(t,vt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ta(t,In,Vi),Dn(t,vt()),null}function KE(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Ru=vt()+500,_y&&Co())}}function Va(t){to!==null&&to.tag===0&&!(xe&6)&&hu();var e=xe;xe|=1;var n=mr.transition,r=Ve;try{if(mr.transition=null,Ve=1,t)return t()}finally{Ve=r,mr.transition=n,xe=e,!(xe&6)&&Co()}}function qE(){$n=Yl.current,Xe(Yl)}function Ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,o$(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(CE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xm();break;case 3:bu(),Xe(Pn),Xe(un),LE();break;case 5:NE(r);break;case 4:bu();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:kE(r.type._context);break;case 22:case 23:qE()}n=n.return}if($t=t,Tt=t=co(t.current,null),Xt=$n=e,kt=0,gd=null,WE=Ty=La=0,In=Ah=null,fa!==null){for(e=0;e<fa.length;e++)if(n=fa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}fa=null}return t}function BO(t,e){do{var n=Tt;try{if(PE(),Yp.current=ig,rg){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rg=!1}if(Na=0,Ut=Pt=it=null,Ch=!1,fd=0,zE.current=null,n===null||n.return===null){kt=1,gd=e,Tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=lC(o);if(p!==null){p.flags&=-257,uC(p,o,a,s,e),p.mode&1&&aC(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var S=new Set;S.add(l),e.updateQueue=S}else g.add(l);break e}else{if(!(e&1)){aC(s,u,e),GE();break e}l=Error(W(426))}}else if(Je&&a.mode&1){var T=lC(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),uC(T,o,a,s,e),xE(Iu(l,a));break e}}s=l=Iu(l,a),kt!==4&&(kt=2),Ah===null?Ah=[s]:Ah.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=EO(s,l,e);tC(s,v);break e;case 1:a=l;var y=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(lo===null||!lo.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=TO(s,a,e);tC(s,C);break e}}s=s.return}while(s!==null)}$O(n)}catch(O){e=O,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function jO(){var t=sg.current;return sg.current=ig,t===null?ig:t}function GE(){(kt===0||kt===3||kt===2)&&(kt=4),$t===null||!(La&268435455)&&!(Ty&268435455)||qs($t,Xt)}function lg(t,e){var n=xe;xe|=2;var r=jO();($t!==t||Xt!==e)&&(Vi=null,Ta(t,e));do try{k$();break}catch(i){BO(t,i)}while(!0);if(PE(),xe=n,sg.current=r,Tt!==null)throw Error(W(261));return $t=null,Xt=0,kt}function k$(){for(;Tt!==null;)UO(Tt)}function D$(){for(;Tt!==null&&!r4();)UO(Tt)}function UO(t){var e=WO(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?$O(t):Tt=e,zE.current=null}function $O(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=I$(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,Tt=null;return}}else if(n=b$(n,e,$n),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);kt===0&&(kt=5)}function ta(t,e,n){var r=Ve,i=mr.transition;try{mr.transition=null,Ve=1,O$(t,e,n,r)}finally{mr.transition=i,Ve=r}return null}function O$(t,e,n,r){do hu();while(to!==null);if(xe&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(f4(t,s),t===$t&&(Tt=$t=null,Xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fp||(fp=!0,HO(zm,function(){return hu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mr.transition,mr.transition=null;var o=Ve;Ve=1;var a=xe;xe|=4,zE.current=null,C$(t,n),LO(n,t),Z4(Uw),Hm=!!jw,Uw=jw=null,t.current=n,x$(n),i4(),xe=a,Ve=o,mr.transition=s}else t.current=n;if(fp&&(fp=!1,to=t,ag=i),s=t.pendingLanes,s===0&&(lo=null),a4(n.stateNode),Dn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(og)throw og=!1,t=aS,aS=null,t;return ag&1&&t.tag!==0&&hu(),s=t.pendingLanes,s&1?t===lS?Ph++:(Ph=0,lS=t):Ph=0,Co(),null}function hu(){if(to!==null){var t=ED(ag),e=mr.transition,n=Ve;try{if(mr.transition=null,Ve=16>t?16:t,to===null)var r=!1;else{if(t=to,to=null,ag=0,xe&6)throw Error(W(331));var i=xe;for(xe|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:xh(8,c,s)}var d=c.child;if(d!==null)d.return=c,J=d;else for(;J!==null;){c=J;var f=c.sibling,p=c.return;if(OO(c),c===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var g=s.alternate;if(g!==null){var S=g.child;if(S!==null){g.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:xh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,J=v;break e}J=s.return}}var y=t.current;for(J=y;J!==null;){o=J;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,J=_;else e:for(o=y;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ey(9,a)}}catch(O){ht(a,a.return,O)}if(a===o){J=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,J=C;break e}J=a.return}}if(xe=i,Co(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(py,t)}catch{}r=!0}return r}finally{Ve=n,mr.transition=e}}return!1}function EC(t,e,n){e=Iu(n,e),e=EO(t,e,1),t=ao(t,e,1),e=vn(),t!==null&&(Gd(t,1,e),Dn(t,e))}function ht(t,e,n){if(t.tag===3)EC(t,t,n);else for(;e!==null;){if(e.tag===3){EC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(lo===null||!lo.has(r))){t=Iu(n,t),t=TO(e,t,1),e=ao(e,t,1),t=vn(),e!==null&&(Gd(e,1,t),Dn(e,t));break}}e=e.return}}function M$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Xt&n)===n&&(kt===4||kt===3&&(Xt&130023424)===Xt&&500>vt()-HE?Ta(t,0):WE|=n),Dn(t,e)}function zO(t,e){e===0&&(t.mode&1?(e=rp,rp<<=1,!(rp&130023424)&&(rp=4194304)):e=1);var n=vn();t=Ji(t,e),t!==null&&(Gd(t,e,n),Dn(t,n))}function N$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zO(t,n)}function L$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),zO(t,n)}var WO;WO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rn=!1,T$(t,e,n);Rn=!!(t.flags&131072)}else Rn=!1,Je&&e.flags&1048576&&GD(e,Jm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zp(t,e),t=e.pendingProps;var i=Su(e,un.current);cu(e,n),i=FE(null,e,r,t,i,n);var s=BE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(s=!0,Qm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,OE(e),i.updater=Sy,e.stateNode=i,i._reactInternals=e,Qw(e,r,t,n),e=Zw(null,e,r,!0,s,n)):(e.tag=0,Je&&s&&RE(e),mn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=F$(r),t=Dr(r,t),i){case 0:e=Jw(null,e,r,t,n);break e;case 1:e=dC(null,e,r,t,n);break e;case 11:e=cC(null,e,r,t,n);break e;case 14:e=hC(null,e,r,Dr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),Jw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),dC(t,e,r,i,n);case 3:e:{if(CO(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,eO(t,e),tg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Iu(Error(W(423)),e),e=fC(t,e,r,n,i);break e}else if(r!==i){i=Iu(Error(W(424)),e),e=fC(t,e,r,n,i);break e}else for(Kn=oo(e.stateNode.containerInfo.firstChild),Xn=e,Je=!0,Lr=null,n=JD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Eu(),r===i){e=Zi(t,e,n);break e}mn(t,e,r,n)}e=e.child}return e;case 5:return tO(e),t===null&&qw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,$w(r,i)?o=null:s!==null&&$w(r,s)&&(e.flags|=32),RO(t,e),mn(t,e,o,n),e.child;case 6:return t===null&&qw(e),null;case 13:return xO(t,e,n);case 4:return ME(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tu(e,null,r,n):mn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),cC(t,e,r,i,n);case 7:return mn(t,e,e.pendingProps,n),e.child;case 8:return mn(t,e,e.pendingProps.children,n),e.child;case 12:return mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,We(Zm,r._currentValue),r._currentValue=o,s!==null)if($r(s.value,o)){if(s.children===i.children&&!Pn.current){e=Zi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ki(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Gw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,cu(e,n),i=vr(i),r=r(i),e.flags|=1,mn(t,e,r,n),e.child;case 14:return r=e.type,i=Dr(r,e.pendingProps),i=Dr(r.type,i),hC(t,e,r,i,n);case 15:return bO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),Zp(t,e),e.tag=1,kn(r)?(t=!0,Qm(e)):t=!1,cu(e,n),SO(e,r,i),Qw(e,r,i,n),Zw(null,e,r,!0,t,n);case 19:return AO(t,e,n);case 22:return IO(t,e,n)}throw Error(W(156,e.tag))};function HO(t,e){return vD(t,e)}function V$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(t,e,n,r){return new V$(t,e,n,r)}function XE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function F$(t){if(typeof t=="function")return XE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pE)return 11;if(t===mE)return 14}return 2}function co(t,e){var n=t.alternate;return n===null?(n=dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")XE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ul:return ba(n.children,i,s,e);case fE:o=8,i|=8;break;case ww:return t=dr(12,n,e,i|2),t.elementType=ww,t.lanes=s,t;case Sw:return t=dr(13,n,e,i),t.elementType=Sw,t.lanes=s,t;case Ew:return t=dr(19,n,e,i),t.elementType=Ew,t.lanes=s,t;case tD:return by(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zk:o=10;break e;case eD:o=9;break e;case pE:o=11;break e;case mE:o=14;break e;case zs:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=dr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ba(t,e,n,r){return t=dr(7,t,r,e),t.lanes=n,t}function by(t,e,n,r){return t=dr(22,t,r,e),t.elementType=tD,t.lanes=n,t.stateNode={isHidden:!1},t}function e_(t,e,n){return t=dr(6,t,null,e),t.lanes=n,t}function t_(t,e,n){return e=dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function B$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nv(0),this.expirationTimes=Nv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QE(t,e,n,r,i,s,o,a,l){return t=new B$(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},OE(s),t}function j$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KO(t){if(!t)return yo;t=t._reactInternals;e:{if(Ja(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(kn(n))return KD(t,n,e)}return e}function qO(t,e,n,r,i,s,o,a,l){return t=QE(n,r,!0,t,i,s,o,a,l),t.context=KO(null),n=t.current,r=vn(),i=uo(n),s=Ki(r,i),s.callback=e??null,ao(n,s,i),t.current.lanes=i,Gd(t,i,r),Dn(t,r),t}function Iy(t,e,n,r){var i=e.current,s=vn(),o=uo(i);return n=KO(n),e.context===null?e.context=n:e.pendingContext=n,e=Ki(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ao(i,e,o),t!==null&&(jr(t,i,o,s),Qp(t,i,o)),o}function ug(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function TC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function YE(t,e){TC(t,e),(t=t.alternate)&&TC(t,e)}function U$(){return null}var GO=typeof reportError=="function"?reportError:function(t){console.error(t)};function JE(t){this._internalRoot=t}Ry.prototype.render=JE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Iy(t,e,null,null)};Ry.prototype.unmount=JE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Va(function(){Iy(null,t,null,null)}),e[Yi]=null}};function Ry(t){this._internalRoot=t}Ry.prototype.unstable_scheduleHydration=function(t){if(t){var e=ID();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ks.length&&e!==0&&e<Ks[n].priority;n++);Ks.splice(n,0,t),n===0&&CD(t)}};function ZE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bC(){}function $$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ug(o);s.call(u)}}var o=qO(e,r,t,0,null,!1,!1,"",bC);return t._reactRootContainer=o,t[Yi]=o.current,ld(t.nodeType===8?t.parentNode:t),Va(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ug(l);a.call(u)}}var l=QE(t,0,!1,null,null,!1,!1,"",bC);return t._reactRootContainer=l,t[Yi]=l.current,ld(t.nodeType===8?t.parentNode:t),Va(function(){Iy(e,l,n,r)}),l}function xy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ug(o);a.call(l)}}Iy(e,o,t,i)}else o=$$(n,e,t,i,r);return ug(o)}TD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rh(e.pendingLanes);n!==0&&(vE(e,n|1),Dn(e,vt()),!(xe&6)&&(Ru=vt()+500,Co()))}break;case 13:Va(function(){var r=Ji(t,1);if(r!==null){var i=vn();jr(r,t,1,i)}}),YE(t,1)}};_E=function(t){if(t.tag===13){var e=Ji(t,134217728);if(e!==null){var n=vn();jr(e,t,134217728,n)}YE(t,134217728)}};bD=function(t){if(t.tag===13){var e=uo(t),n=Ji(t,e);if(n!==null){var r=vn();jr(n,t,e,r)}YE(t,e)}};ID=function(){return Ve};RD=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Dw=function(t,e,n){switch(e){case"input":if(Iw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vy(r);if(!i)throw Error(W(90));rD(r),Iw(r,i)}}}break;case"textarea":sD(t,n);break;case"select":e=n.value,e!=null&&ou(t,!!n.multiple,e,!1)}};dD=KE;fD=Va;var z$={usingClientEntryPoint:!1,Events:[Qd,Hl,vy,cD,hD,KE]},$c={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W$={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gD(t),t===null?null:t.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||U$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pp.isDisabled&&pp.supportsFiber)try{py=pp.inject(W$),pi=pp}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z$;tr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZE(e))throw Error(W(200));return j$(t,e,null,n)};tr.createRoot=function(t,e){if(!ZE(t))throw Error(W(299));var n=!1,r="",i=GO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=QE(t,1,!1,null,null,n,!1,r,i),t[Yi]=e.current,ld(t.nodeType===8?t.parentNode:t),new JE(e)};tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=gD(e),t=t===null?null:t.stateNode,t};tr.flushSync=function(t){return Va(t)};tr.hydrate=function(t,e,n){if(!Cy(e))throw Error(W(200));return xy(null,t,e,!0,n)};tr.hydrateRoot=function(t,e,n){if(!ZE(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=GO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qO(e,null,t,1,n??null,i,!1,s,o),t[Yi]=e.current,ld(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ry(e)};tr.render=function(t,e,n){if(!Cy(e))throw Error(W(200));return xy(null,t,e,!1,n)};tr.unmountComponentAtNode=function(t){if(!Cy(t))throw Error(W(40));return t._reactRootContainer?(Va(function(){xy(null,null,t,!1,function(){t._reactRootContainer=null,t[Yi]=null})}),!0):!1};tr.unstable_batchedUpdates=KE;tr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cy(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return xy(t,e,n,!1,r)};tr.version="18.3.1-next-f1338f8080-20240426";function XO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XO)}catch(t){console.error(t)}}XO(),Xk.exports=tr;var QO=Xk.exports;const H$=qu(QO);var IC=QO;vw.createRoot=IC.createRoot,vw.hydrateRoot=IC.hydrateRoot;var K$=t=>t.disabled||Array.isArray(t.accessibilityStates)&&t.accessibilityStates.indexOf("disabled")>-1,q$={adjustable:"slider",button:"button",header:"heading",image:"img",imagebutton:null,keyboardkey:null,label:null,link:"link",none:"presentation",search:"search",summary:"region",text:null},YO=t=>{var e=t.accessibilityRole,n=t.role,r=n||e;if(r){var i=q$[r];if(i!==null)return i||r}},G$={article:"article",banner:"header",blockquote:"blockquote",button:"button",code:"code",complementary:"aside",contentinfo:"footer",deletion:"del",emphasis:"em",figure:"figure",insertion:"ins",form:"form",list:"ul",listitem:"li",main:"main",navigation:"nav",paragraph:"p",region:"section",strong:"strong"},X$={},Q$=function(e){e===void 0&&(e=X$);var n=e.role||e.accessibilityRole;if(n==="label")return"label";var r=YO(e);if(r){if(r==="heading"){var i=e.accessibilityLevel||e["aria-level"];return i!=null?"h"+i:"h1"}return G$[r]}},JO={isDisabled:K$,propsToAccessibilityComponent:Q$,propsToAriaRole:YO};function yd(t){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(t)}function Y$(t,e){if(yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J$(t){var e=Y$(t,"string");return yd(e)=="symbol"?e:e+""}function Z$(t,e,n){return(e=J$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RC(Object(n),!0).forEach(function(r){Z$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function On(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},e6=["ms","Moz","O","Webkit"],t6=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(rm).forEach(t=>{e6.forEach(e=>{rm[t6(e,t)]=rm[t]})});var n6=t=>t==="currentcolor"||t==="currentColor"||t==="inherit"||t.indexOf("var(")===0;function r6(t){if(typeof t=="number")return t>>>0===t&&t>=0&&t<=4294967295?t:null;if(typeof t!="string")return null;const e=s6();let n;if(n=e.hex6.exec(t))return parseInt(n[1]+"ff",16)>>>0;const r=o6(t);return r??((n=e.rgb.exec(t))?(Mi(n[1])<<24|Mi(n[2])<<16|Mi(n[3])<<8|255)>>>0:(n=e.rgba.exec(t))?n[6]!==void 0?(Mi(n[6])<<24|Mi(n[7])<<16|Mi(n[8])<<8|gp(n[9]))>>>0:(Mi(n[2])<<24|Mi(n[3])<<16|Mi(n[4])<<8|gp(n[5]))>>>0:(n=e.hex3.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=e.hex8.exec(t))?parseInt(n[1],16)>>>0:(n=e.hex4.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=e.hsl.exec(t))?(n_(mp(n[1]),Os(n[2]),Os(n[3]))|255)>>>0:(n=e.hsla.exec(t))?n[6]!==void 0?(n_(mp(n[6]),Os(n[7]),Os(n[8]))|gp(n[9]))>>>0:(n_(mp(n[2]),Os(n[3]),Os(n[4]))|gp(n[5]))>>>0:(n=e.hwb.exec(t))?(i6(mp(n[1]),Os(n[2]),Os(n[3]))|255)>>>0:null)}function du(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n_(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=du(i,r,t+1/3),o=du(i,r,t),a=du(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function i6(t,e,n){if(e+n>=1){const o=Math.round(e*255/(e+n));return o<<24|o<<16|o<<8}const r=du(0,1,t+1/3)*(1-e-n)+e,i=du(0,1,t)*(1-e-n)+e,s=du(0,1,t-1/3)*(1-e-n)+e;return Math.round(r*255)<<24|Math.round(i*255)<<16|Math.round(s*255)<<8}const Ft="[-+]?\\d*\\.?\\d+",Ds=Ft+"%";function r_(...t){return"\\(\\s*("+t.join(")\\s*,?\\s*(")+")\\s*\\)"}function CC(...t){return"\\(\\s*("+t.slice(0,t.length-1).join(")\\s*,?\\s*(")+")\\s*/\\s*("+t[t.length-1]+")\\s*\\)"}function xC(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}let i_;function s6(){return i_===void 0&&(i_={rgb:new RegExp("rgb"+r_(Ft,Ft,Ft)),rgba:new RegExp("rgba("+xC(Ft,Ft,Ft,Ft)+"|"+CC(Ft,Ft,Ft,Ft)+")"),hsl:new RegExp("hsl"+r_(Ft,Ds,Ds)),hsla:new RegExp("hsla("+xC(Ft,Ds,Ds,Ft)+"|"+CC(Ft,Ds,Ds,Ft)+")"),hwb:new RegExp("hwb"+r_(Ft,Ds,Ds)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/}),i_}function Mi(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function mp(t){return(parseFloat(t)%360+360)%360/360}function gp(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Os(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function o6(t){switch(t){case"transparent":return 0;case"aliceblue":return 4042850303;case"antiquewhite":return 4209760255;case"aqua":return 16777215;case"aquamarine":return 2147472639;case"azure":return 4043309055;case"beige":return 4126530815;case"bisque":return 4293182719;case"black":return 255;case"blanchedalmond":return 4293643775;case"blue":return 65535;case"blueviolet":return 2318131967;case"brown":return 2771004159;case"burlywood":return 3736635391;case"burntsienna":return 3934150143;case"cadetblue":return 1604231423;case"chartreuse":return 2147418367;case"chocolate":return 3530104575;case"coral":return 4286533887;case"cornflowerblue":return 1687547391;case"cornsilk":return 4294499583;case"crimson":return 3692313855;case"cyan":return 16777215;case"darkblue":return 35839;case"darkcyan":return 9145343;case"darkgoldenrod":return 3095792639;case"darkgray":return 2846468607;case"darkgreen":return 6553855;case"darkgrey":return 2846468607;case"darkkhaki":return 3182914559;case"darkmagenta":return 2332068863;case"darkolivegreen":return 1433087999;case"darkorange":return 4287365375;case"darkorchid":return 2570243327;case"darkred":return 2332033279;case"darksalmon":return 3918953215;case"darkseagreen":return 2411499519;case"darkslateblue":return 1211993087;case"darkslategray":return 793726975;case"darkslategrey":return 793726975;case"darkturquoise":return 13554175;case"darkviolet":return 2483082239;case"deeppink":return 4279538687;case"deepskyblue":return 12582911;case"dimgray":return 1768516095;case"dimgrey":return 1768516095;case"dodgerblue":return 512819199;case"firebrick":return 2988581631;case"floralwhite":return 4294635775;case"forestgreen":return 579543807;case"fuchsia":return 4278255615;case"gainsboro":return 3705462015;case"ghostwhite":return 4177068031;case"gold":return 4292280575;case"goldenrod":return 3668254975;case"gray":return 2155905279;case"green":return 8388863;case"greenyellow":return 2919182335;case"grey":return 2155905279;case"honeydew":return 4043305215;case"hotpink":return 4285117695;case"indianred":return 3445382399;case"indigo":return 1258324735;case"ivory":return 4294963455;case"khaki":return 4041641215;case"lavender":return 3873897215;case"lavenderblush":return 4293981695;case"lawngreen":return 2096890111;case"lemonchiffon":return 4294626815;case"lightblue":return 2916673279;case"lightcoral":return 4034953471;case"lightcyan":return 3774873599;case"lightgoldenrodyellow":return 4210742015;case"lightgray":return 3553874943;case"lightgreen":return 2431553791;case"lightgrey":return 3553874943;case"lightpink":return 4290167295;case"lightsalmon":return 4288707327;case"lightseagreen":return 548580095;case"lightskyblue":return 2278488831;case"lightslategray":return 2005441023;case"lightslategrey":return 2005441023;case"lightsteelblue":return 2965692159;case"lightyellow":return 4294959359;case"lime":return 16711935;case"limegreen":return 852308735;case"linen":return 4210091775;case"magenta":return 4278255615;case"maroon":return 2147483903;case"mediumaquamarine":return 1724754687;case"mediumblue":return 52735;case"mediumorchid":return 3126187007;case"mediumpurple":return 2473647103;case"mediumseagreen":return 1018393087;case"mediumslateblue":return 2070474495;case"mediumspringgreen":return 16423679;case"mediumturquoise":return 1221709055;case"mediumvioletred":return 3340076543;case"midnightblue":return 421097727;case"mintcream":return 4127193855;case"mistyrose":return 4293190143;case"moccasin":return 4293178879;case"navajowhite":return 4292783615;case"navy":return 33023;case"oldlace":return 4260751103;case"olive":return 2155872511;case"olivedrab":return 1804477439;case"orange":return 4289003775;case"orangered":return 4282712319;case"orchid":return 3664828159;case"palegoldenrod":return 4008225535;case"palegreen":return 2566625535;case"paleturquoise":return 2951671551;case"palevioletred":return 3681588223;case"papayawhip":return 4293907967;case"peachpuff":return 4292524543;case"peru":return 3448061951;case"pink":return 4290825215;case"plum":return 3718307327;case"powderblue":return 2967529215;case"purple":return 2147516671;case"rebeccapurple":return 1714657791;case"red":return 4278190335;case"rosybrown":return 3163525119;case"royalblue":return 1097458175;case"saddlebrown":return 2336560127;case"salmon":return 4202722047;case"sandybrown":return 4104413439;case"seagreen":return 780883967;case"seashell":return 4294307583;case"sienna":return 2689740287;case"silver":return 3233857791;case"skyblue":return 2278484991;case"slateblue":return 1784335871;case"slategray":return 1887473919;case"slategrey":return 1887473919;case"snow":return 4294638335;case"springgreen":return 16744447;case"steelblue":return 1182971135;case"tan":return 3535047935;case"teal":return 8421631;case"thistle":return 3636451583;case"tomato":return 4284696575;case"turquoise":return 1088475391;case"violet":return 4001558271;case"wheat":return 4125012991;case"white":return 4294967295;case"whitesmoke":return 4126537215;case"yellow":return 4294902015;case"yellowgreen":return 2597139199}return null}var a6=r6;const l6=qu(a6);var u6=t=>{if(t==null)return t;var e=l6(t);if(e!=null)return e=(e<<24|e>>>8)>>>0,e},ZO=function(e,n){if(n===void 0&&(n=1),e!=null){if(typeof e=="string"&&n6(e))return e;var r=u6(e);if(r!=null){var i=r>>16&255,s=r>>8&255,o=r&255,a=(r>>24&255)/255,l=(a*n).toFixed(2);return"rgba("+i+","+s+","+o+","+l+")"}}},c6={backgroundColor:!0,borderColor:!0,borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0,color:!0,shadowColor:!0,textDecorationColor:!0,textShadowColor:!0};function li(t,e){var n=t;return(e==null||!rm[e])&&typeof t=="number"?n=t+"px":e!=null&&c6[e]&&(n=ZO(t)),n}var Dt=!!(typeof window<"u"&&window.document&&window.document.createElement),h6={},d6=!Dt||window.CSS!=null&&window.CSS.supports!=null&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),f6="monospace,monospace",AC='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif',p6={borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderBlockColor:["borderTopColor","borderBottomColor"],borderInlineColor:["borderRightColor","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderInlineStyle:["borderRightStyle","borderLeftStyle"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderInlineWidth:["borderRightWidth","borderLeftWidth"],insetBlock:["top","bottom"],insetInline:["left","right"],marginBlock:["marginTop","marginBottom"],marginInline:["marginRight","marginLeft"],paddingBlock:["paddingTop","paddingBottom"],paddingInline:["paddingRight","paddingLeft"],overflow:["overflowX","overflowY"],overscrollBehavior:["overscrollBehaviorX","overscrollBehaviorY"],borderBlockStartColor:["borderTopColor"],borderBlockStartStyle:["borderTopStyle"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndColor:["borderBottomColor"],borderBlockEndStyle:["borderBottomStyle"],borderBlockEndWidth:["borderBottomWidth"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],insetBlockEnd:["bottom"],insetBlockStart:["top"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"]},eM=(t,e)=>{if(!t)return h6;var n={},r=function(){var a=t[i];if(a==null)return"continue";if(i==="backgroundClip")a==="text"&&(n.backgroundClip=a,n.WebkitBackgroundClip=a);else if(i==="flex")a===-1?(n.flexGrow=0,n.flexShrink=1,n.flexBasis="auto"):n.flex=a;else if(i==="font")n[i]=a.replace("System",AC);else if(i==="fontFamily")if(a.indexOf("System")>-1){var l=a.split(/,\s*/);l[l.indexOf("System")]=AC,n[i]=l.join(",")}else a==="monospace"?n[i]=f6:n[i]=a;else if(i==="textDecorationLine")d6?n.textDecorationLine=a:n.textDecoration=a;else if(i==="writingDirection")n.direction=a;else{var u=li(t[i],i),c=p6[i];e&&i==="inset"?(t.insetInline==null&&(n.left=u,n.right=u),t.insetBlock==null&&(n.top=u,n.bottom=u)):e&&i==="margin"?(t.marginInline==null&&(n.marginLeft=u,n.marginRight=u),t.marginBlock==null&&(n.marginTop=u,n.marginBottom=u)):e&&i==="padding"?(t.paddingInline==null&&(n.paddingLeft=u,n.paddingRight=u),t.paddingBlock==null&&(n.paddingTop=u,n.paddingBottom=u)):c?c.forEach((d,f)=>{t[d]==null&&(n[d]=u)}):n[i]=u}};for(var i in t)var s=r();return n};function m6(t,e){for(var n=t.length,r=e^n,i=0,s;n>=4;)s=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),s^=s>>>24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)^s,n-=4,++i;switch(n){case 3:r^=(t.charCodeAt(i+2)&255)<<16;case 2:r^=(t.charCodeAt(i+1)&255)<<8;case 1:r^=t.charCodeAt(i)&255,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)}return r^=r>>>13,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16),r^=r>>>15,r>>>0}var g6=t=>m6(t,1).toString(36),y6=/[A-Z]/g,v6=/^ms-/,s_={};function _6(t){return"-"+t.toLowerCase()}function w6(t){if(t in s_)return s_[t];var e=t.replace(y6,_6);return s_[t]=v6.test(e)?"-"+e:e}var tM={},eT={},Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});Ay.default=S6;function S6(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(eT,"__esModule",{value:!0});eT.default=I6;var E6=Ay,T6=b6(E6);function b6(t){return t&&t.__esModule?t:{default:t}}function I6(t,e,n){var r=t[e];if(r&&n.hasOwnProperty(e))for(var i=(0,T6.default)(e),s=0;s<r.length;++s){var o=r[s]+i;n[o]||(n[o]=n[e])}return n}var tT={};Object.defineProperty(tT,"__esModule",{value:!0});tT.default=R6;function R6(t,e,n,r,i){for(var s=0,o=t.length;s<o;++s){var a=t[s](e,n,r,i);if(a)return a}}var nT={};Object.defineProperty(nT,"__esModule",{value:!0});nT.default=C6;function PC(t,e){t.indexOf(e)===-1&&t.push(e)}function C6(t,e){if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n)PC(t,e[n]);else PC(t,e)}var rT={};Object.defineProperty(rT,"__esModule",{value:!0});rT.default=x6;function x6(t){return t instanceof Object&&!Array.isArray(t)}Object.defineProperty(tM,"__esModule",{value:!0});var A6=tM.default=V6,P6=eT,k6=Py(P6),D6=tT,kC=Py(D6),O6=nT,M6=Py(O6),N6=rT,L6=Py(N6);function Py(t){return t&&t.__esModule?t:{default:t}}function V6(t){var e=t.prefixMap,n=t.plugins;return function r(i){for(var s in i){var o=i[s];if((0,L6.default)(o))i[s]=r(o);else if(Array.isArray(o)){for(var a=[],l=0,u=o.length;l<u;++l){var c=(0,kC.default)(n,s,o[l],i,e);(0,M6.default)(a,c||o[l])}a.length>0&&(i[s]=a)}else{var d=(0,kC.default)(n,s,o,i,e);d&&(i[s]=d),i=(0,k6.default)(e,s,i)}}return i}}var nM={};Object.defineProperty(nM,"__esModule",{value:!0});var F6=nM.default=B6;function B6(){return null}var rM={};function im(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?im=function(n){return typeof n}:im=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},im(t)}function j6(t){return W6(t)||z6(t)||$6(t)||U6()}function U6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $6(t,e){if(t){if(typeof t=="string")return hS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hS(t,e)}}function z6(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function W6(t){if(Array.isArray(t))return hS(t)}function hS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DC(t){return t.filter(function(e,n){return t.lastIndexOf(e)===n})}function iM(t){for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;++e){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];for(var i in r){var s=r[i],o=t[i];if(o&&s){if(Array.isArray(o)){t[i]=DC(o.concat(s));continue}if(Array.isArray(s)){t[i]=DC([o].concat(j6(s)));continue}if(im(s)==="object"){t[i]=iM({},o,s);continue}}t[i]=s}}return t}var H6=/-([a-z])/g,K6=/^Ms/g,o_={};function q6(t){return t[1].toUpperCase()}function sM(t){if(o_.hasOwnProperty(t))return o_[t];var e=t.replace(H6,q6).replace(K6,"ms");return o_[t]=e,e}var G6=/[A-Z]/g,X6=/^ms-/,a_={};function Q6(t){return"-"+t.toLowerCase()}function oM(t){if(a_.hasOwnProperty(t))return a_[t];var e=t.replace(G6,Q6);return a_[t]=X6.test(e)?"-"+e:e}const Y6=Object.freeze(Object.defineProperty({__proto__:null,default:oM},Symbol.toStringTag,{value:"Module"}));function ky(t){return oM(t)}function aM(t,e){return ky(t)+":"+e}function J6(t){var e="";for(var n in t){var r=t[n];typeof r!="string"&&typeof r!="number"||(e&&(e+=";"),e+=aM(n,r))}return e}var Z6=/^(Webkit|Moz|O|ms)/;function e3(t){return Z6.test(t)}var t3=/-webkit-|-moz-|-ms-/;function n3(t){return typeof t=="string"&&t3.test(t)}var vd={borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OC=["animationIterationCount","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineClamp","order"],MC=["Webkit","ms","Moz","O"];function r3(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}for(var l_=0,i3=OC.length;l_<i3;++l_){var NC=OC[l_];vd[NC]=!0;for(var u_=0,s3=MC.length;u_<s3;++u_)vd[r3(MC[u_],NC)]=!0}for(var o3 in vd)vd[ky(o3)]=!0;function a3(t){return vd.hasOwnProperty(t)}var l3=/^(ms|Webkit|Moz|O)/;function lM(t){var e=t.replace(l3,"");return e.charAt(0).toLowerCase()+e.slice(1)}function u3(t){return lM(sM(t))}function c3(t,e){return e.join(";"+ky(t)+":")}var h3=/(-ms-|-webkit-|-moz-|-o-)/g;function d3(t){return typeof t=="string"?t.replace(h3,""):t}const f3=Object.freeze(Object.defineProperty({__proto__:null,assignStyle:iM,camelCaseProperty:sM,cssifyDeclaration:aM,cssifyObject:J6,hyphenateProperty:ky,isPrefixedProperty:e3,isPrefixedValue:n3,isUnitlessProperty:a3,normalizeProperty:u3,resolveArrayValue:c3,unprefixProperty:lM,unprefixValue:d3},Symbol.toStringTag,{value:"Module"})),uM=Vk(f3);Object.defineProperty(rM,"__esModule",{value:!0});var p3=rM.default=v3,m3=uM,g3=/cross-fade\(/g,y3=["-webkit-",""];function v3(t,e){if(typeof e=="string"&&!(0,m3.isPrefixedValue)(e)&&e.indexOf("cross-fade(")!==-1)return y3.map(function(n){return e.replace(g3,n+"cross-fade(")})}var cM={};Object.defineProperty(cM,"__esModule",{value:!0});var _3=cM.default=E3,w3=["-webkit-","-moz-",""],S3={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function E3(t,e){if(t==="cursor"&&S3.hasOwnProperty(e))return w3.map(function(n){return n+e})}var hM={};Object.defineProperty(hM,"__esModule",{value:!0});var T3=hM.default=C3,b3=uM,I3=/filter\(/g,R3=["-webkit-",""];function C3(t,e){if(typeof e=="string"&&!(0,b3.isPrefixedValue)(e)&&e.indexOf("filter(")!==-1)return R3.map(function(n){return e.replace(I3,n+"filter(")})}var dM={},iT={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=/-webkit-|-moz-|-ms-/;function n(r){return typeof r=="string"&&e.test(r)}})(iT);Object.defineProperty(dM,"__esModule",{value:!0});var x3=dM.default=O3,A3=iT,P3=k3(A3);function k3(t){return t&&t.__esModule?t:{default:t}}var D3=["-webkit-",""];function O3(t,e){if(typeof e=="string"&&!(0,P3.default)(e)&&e.indexOf("image-set(")>-1)return D3.map(function(n){return e.replace(/image-set\(/g,n+"image-set(")})}var fM={};Object.defineProperty(fM,"__esModule",{value:!0});var M3=fM.default=N3,LC={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};function N3(t,e,n){if(Object.prototype.hasOwnProperty.call(LC,t))for(var r=LC[t],i=0,s=r.length;i<s;++i)n[r[i]]=e}var pM={};Object.defineProperty(pM,"__esModule",{value:!0});var L3=pM.default=V3;function V3(t,e){if(t==="position"&&e==="sticky")return["-webkit-sticky","sticky"]}var mM={};Object.defineProperty(mM,"__esModule",{value:!0});var F3=mM.default=$3,B3=["-webkit-","-moz-",""],j3={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},U3={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function $3(t,e){if(j3.hasOwnProperty(t)&&U3.hasOwnProperty(e))return B3.map(function(n){return n+e})}var gM={},yM={};const z3=Vk(Y6);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var e=z3,n=r(e);function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,n.default)(s)}})(yM);Object.defineProperty(gM,"__esModule",{value:!0});var W3=gM.default=Z3,H3=yM,K3=sT(H3),q3=iT,G3=sT(q3),X3=Ay,VC=sT(X3);function sT(t){return t&&t.__esModule?t:{default:t}}var Q3={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},Y3={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function J3(t,e){if((0,G3.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,i=n.length;r<i;++r){var s=n[r],o=[s];for(var a in e){var l=(0,K3.default)(a);if(s.indexOf(l)>-1&&l!=="order")for(var u=e[a],c=0,d=u.length;c<d;++c)o.unshift(s.replace(l,Y3[u[c]]+l))}n[r]=o.join(",")}return n.join(",")}function Z3(t,e,n,r){if(typeof e=="string"&&Q3.hasOwnProperty(t)){var i=J3(e,r),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-moz-|-ms-/.test(a)}).join(",");if(t.indexOf("Webkit")>-1)return s;var o=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-webkit-|-ms-/.test(a)}).join(",");return t.indexOf("Moz")>-1?o:(n["Webkit"+(0,VC.default)(t)]=s,n["Moz"+(0,VC.default)(t)]=o,i)}}var ze=["Webkit"],ez=["Moz"],tz=["Webkit","Moz"],ut=["Webkit","ms"],nz=["Webkit","Moz","ms"];const rz={plugins:[F6,p3,_3,T3,x3,M3,L3,F3,W3],prefixMap:{appearance:nz,userSelect:tz,textEmphasisPosition:ut,textEmphasis:ut,textEmphasisStyle:ut,textEmphasisColor:ut,boxDecorationBreak:ut,clipPath:ze,maskImage:ut,maskMode:ut,maskRepeat:ut,maskPosition:ut,maskClip:ut,maskOrigin:ut,maskSize:ut,maskComposite:ut,mask:ut,maskBorderSource:ut,maskBorderMode:ut,maskBorderSlice:ut,maskBorderWidth:ut,maskBorderOutset:ut,maskBorderRepeat:ut,maskBorder:ut,maskType:ut,textDecorationStyle:ze,textDecorationSkip:ze,textDecorationLine:ze,textDecorationColor:ze,filter:ze,breakAfter:ze,breakBefore:ze,breakInside:ze,columnCount:ze,columnFill:ze,columnGap:ze,columnRule:ze,columnRuleColor:ze,columnRuleStyle:ze,columnRuleWidth:ze,columns:ze,columnSpan:ze,columnWidth:ze,backdropFilter:ze,hyphens:ze,flowInto:ze,flowFrom:ze,regionFragment:ze,textOrientation:ze,tabSize:ez,fontKerning:ze,textSizeAdjust:ze}};var iz=A6(rz),sz=["animationKeyframes"],FC=new Map,oz={},az=1,lz=3,uz={borderColor:2,borderRadius:2,borderStyle:2,borderWidth:2,display:2,flex:2,inset:2,margin:2,overflow:2,overscrollBehavior:2,padding:2,insetBlock:2.1,insetInline:2.1,marginInline:2.1,marginBlock:2.1,paddingInline:2.1,paddingBlock:2.1,borderBlockStartColor:2.2,borderBlockStartStyle:2.2,borderBlockStartWidth:2.2,borderBlockEndColor:2.2,borderBlockEndStyle:2.2,borderBlockEndWidth:2.2,borderInlineStartColor:2.2,borderInlineStartStyle:2.2,borderInlineStartWidth:2.2,borderInlineEndColor:2.2,borderInlineEndStyle:2.2,borderInlineEndWidth:2.2,borderEndStartRadius:2.2,borderEndEndRadius:2.2,borderStartStartRadius:2.2,borderStartEndRadius:2.2,insetBlockEnd:2.2,insetBlockStart:2.2,insetInlineEnd:2.2,insetInlineStart:2.2,marginBlockStart:2.2,marginBlockEnd:2.2,marginInlineStart:2.2,marginInlineEnd:2.2,paddingBlockStart:2.2,paddingBlockEnd:2.2,paddingInlineStart:2.2,paddingInlineEnd:2.2},dS="borderTopLeftRadius",fS="borderTopRightRadius",pS="borderBottomLeftRadius",mS="borderBottomRightRadius",gS="borderLeftColor",yS="borderLeftStyle",vS="borderLeftWidth",_S="borderRightColor",wS="borderRightStyle",SS="borderRightWidth",ES="right",TS="marginLeft",bS="marginRight",IS="paddingLeft",RS="paddingRight",CS="left",cg={[dS]:fS,[fS]:dS,[pS]:mS,[mS]:pS,[gS]:_S,[yS]:wS,[vS]:SS,[_S]:gS,[wS]:yS,[SS]:vS,[CS]:ES,[TS]:bS,[bS]:TS,[IS]:RS,[RS]:IS,[ES]:CS},kh={borderStartStartRadius:dS,borderStartEndRadius:fS,borderEndStartRadius:pS,borderEndEndRadius:mS,borderInlineStartColor:gS,borderInlineStartStyle:yS,borderInlineStartWidth:vS,borderInlineEndColor:_S,borderInlineEndStyle:wS,borderInlineEndWidth:SS,insetInlineEnd:ES,insetInlineStart:CS,marginInlineStart:TS,marginInlineEnd:bS,paddingInlineStart:IS,paddingInlineEnd:RS},vM=["clear","float","textAlign"];function cz(t){var e={$$css:!0},n=[];function r(i,s,o){var a=fz(o,s),l=s+a,u=FC.get(l),c;if(u!=null)c=u[0],n.push(u[1]);else{var d=i!==s?l:a;c=oT("r",i,d);var f=uz[i]||lz,p=pz(c,s,o),g=[p,f];n.push(g),FC.set(l,[c,g])}return c}return Object.keys(t).sort().forEach(i=>{var s=t[i];if(s!=null){var o;if(vM.indexOf(i)>-1){var a=r(i,i,"left"),l=r(i,i,"right");s==="start"?o=[a,l]:s==="end"&&(o=[l,a])}var u=kh[i];if(u!=null){var c=r(i,u,s),d=r(i,cg[u],s);o=[c,d]}if(i==="transitionProperty"){for(var f=Array.isArray(s)?s:[s],p=[],g=0;g<f.length;g++){var S=f[g];typeof S=="string"&&kh[S]!=null&&p.push(g)}if(p.length>0){var T=[...f],v=[...f];p.forEach(y=>{var _=T[y];if(typeof _=="string"){var C=kh[_],O=cg[C];T[y]=C,v[y]=O;var D=r(i,i,T),b=r(i,i,v);o=[D,b]}})}}o==null?o=r(i,i,s):e.$$css$localize=!0,e[i]=o}}),[e,n]}function hz(t,e){var n={$$css:!0},r=[],i=t.animationKeyframes,s=On(t,sz),o=oT("css",e,JSON.stringify(t)),a="."+o,l;if(i!=null){var u=_M(i),c=u[0],d=u[1];l=c.join(","),r.push(...d)}var f=Fi(ye(ye({},s),{},{animationName:l}));return r.push(""+a+f),n[o]=o,[n,[[r,az]]]}function dz(t,e){var n=t||oz,r={},i={},s=function(){var u=n[o],c=o,d=u;if(!Object.prototype.hasOwnProperty.call(n,o)||u==null)return"continue";vM.indexOf(o)>-1&&(u==="start"?d=e?"right":"left":u==="end"&&(d=e?"left":"right"));var f=kh[o];if(f!=null&&(c=e?cg[f]:f),o==="transitionProperty"){var p=Array.isArray(u)?u:[u];p.forEach((g,S)=>{if(typeof g=="string"){var T=kh[g];T!=null&&(p[S]=e?cg[T]:T,d=p.join(" "))}})}r[c]||(i[c]=d),c===o&&(r[c]=!0)};for(var o in n)var a=s();return eM(i,!0)}function fz(t,e){var n=li(t,e);return typeof n!="string"?JSON.stringify(n||""):n}function pz(t,e,n){var r=[],i="."+t;switch(e){case"animationKeyframes":{var s=_M(n),o=s[0],a=s[1],l=Fi({animationName:o.join(",")});r.push(""+i+l,...a);break}case"placeholderTextColor":{var u=Fi({color:n,opacity:1});r.push(i+"::-webkit-input-placeholder"+u,i+"::-moz-placeholder"+u,i+":-ms-input-placeholder"+u,i+"::placeholder"+u);break}case"pointerEvents":{var c=n;if(n==="auto"||n==="box-only"){if(c="auto!important",n==="box-only"){var d=Fi({pointerEvents:"none"});r.push(i+">*"+d)}}else if((n==="none"||n==="box-none")&&(c="none!important",n==="box-none")){var f=Fi({pointerEvents:"auto"});r.push(i+">*"+f)}var p=Fi({pointerEvents:c});r.push(""+i+p);break}case"scrollbarWidth":{n==="none"&&r.push(i+"::-webkit-scrollbar{display:none}");var g=Fi({scrollbarWidth:n});r.push(""+i+g);break}default:{var S=Fi({[e]:n});r.push(""+i+S);break}}return r}function Fi(t){var e=iz(eM(t)),n=Object.keys(e).map(r=>{var i=e[r],s=w6(r);return Array.isArray(i)?i.map(o=>s+":"+o).join(";"):s+":"+i}).sort().join(";");return"{"+n+";}"}function oT(t,e,n){var r=g6(e+n);return t+"-"+r}function mz(t){var e=["-webkit-",""],n=oT("r","animation",JSON.stringify(t)),r="{"+Object.keys(t).map(s=>{var o=t[s],a=Fi(o);return""+s+a}).join("")+"}",i=e.map(s=>"@"+s+"keyframes "+n+r);return[n,i]}function _M(t){if(typeof t=="number")throw new Error("Invalid CSS keyframes type: "+typeof t);var e=[],n=[],r=Array.isArray(t)?t:[t];return r.forEach(i=>{if(typeof i=="string")e.push(i);else{var s=mz(i),o=s[0],a=s[1];e.push(o),n.push(...a)}}),[e,n]}function c_(t,e,n){if(Dt){var r=e??document,i=r.getElementById(t);if(i==null)if(i=document.createElement("style"),i.setAttribute("id",t),typeof n=="string"&&i.appendChild(document.createTextNode(n)),r instanceof ShadowRoot)r.insertBefore(i,r.firstChild);else{var s=r.head;s&&s.insertBefore(i,s.firstChild)}return i.sheet}else return null}var gz=Array.prototype.slice;function h_(t){var e={},n={};if(t!=null){var r;gz.call(t.cssRules).forEach((o,a)=>{var l=o.cssText;if(l.indexOf("stylesheet-group")>-1)r=_z(o),e[r]={start:a,rules:[l]};else{var u=jC(l);u!=null&&(n[u]=!0,e[r].rules.push(l))}})}function i(o,a,l){var u=BC(e),c=u.indexOf(a),d=c+1,f=u[d],p=f!=null&&e[f].start!=null?e[f].start:o.cssRules.length,g=Sz(o,l,p);if(g){e[a].start==null&&(e[a].start=p);for(var S=d;S<u.length;S+=1){var T=u[S],v=e[T].start||0;e[T].start=v+1}}return g}var s={getTextContent(){return BC(e).map(o=>{var a=e[o].rules,l=a.shift();return a.sort(),a.unshift(l),a.join(`
`)}).join(`
`)},insert(o,a){var l=Number(a);if(e[l]==null){var u=yz(l);e[l]={start:null,rules:[u]},t!=null&&i(t,l,u)}var c=jC(o);if(c!=null&&n[c]==null&&(n[c]=!0,e[l].rules.push(o),t!=null)){var d=i(t,l,o);d||e[l].rules.pop()}}};return s}function yz(t){return'[stylesheet-group="'+t+'"]{}'}var vz=/["']/g;function _z(t){return Number(t.selectorText.split(vz)[1])}function BC(t){return Object.keys(t).map(Number).sort((e,n)=>e>n?1:-1)}var wz=/\s*([,])\s*/g;function jC(t){var e=t.split("{")[0].trim();return e!==""?e.replace(wz,"$1"):null}function Sz(t,e,n){try{return t.insertRule(e,n),!0}catch{return!1}}var Ez="react-native-stylesheet",d_=new WeakMap,Cr=[],UC=["html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0);}","body{margin:0;}","button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}","input::-webkit-search-cancel-button,input::-webkit-search-decoration,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}"];function Tz(t,e){e===void 0&&(e=Ez);var n;if(Dt){var r=document;if(Cr.length===0)n=h_(c_(e)),UC.forEach(a=>{n.insert(a,0)}),d_.set(r,Cr.length),Cr.push(n);else{var i=d_.get(r);if(i==null){var s=Cr[0],o=s!=null?s.getTextContent():"";n=h_(c_(e,r,o)),d_.set(r,Cr.length),Cr.push(n)}else n=Cr[i]}}else Cr.length===0?(n=h_(c_(e)),UC.forEach(a=>{n.insert(a,0)}),Cr.push(n)):n=Cr[0];return{getTextContent(){return n.getTextContent()},id:e,insert(a,l){Cr.forEach(u=>{u.insert(a,l)})}}}var aT={};Object.defineProperty(aT,"__esModule",{value:!0});aT.localizeStyle=bz;var yp=new WeakMap,wM="$$css$localize";function $C(t,e){var n={};for(var r in t)if(r!==wM){var i=t[r];Array.isArray(i)?n[r]=e?i[1]:i[0]:n[r]=i}return n}function bz(t,e){if(t[wM]!=null){var n=e?1:0;if(yp.has(t)){var r=yp.get(t),i=r[n];return i==null&&(i=$C(t,e),r[n]=i,yp.set(t,r)),i}var s=$C(t,e),o=new Array(2);return o[n]=s,yp.set(t,o),s}return t}var Iz=aT,Rz={},SM={height:0,width:0},EM=t=>{var e=t.shadowColor,n=t.shadowOffset,r=t.shadowOpacity,i=t.shadowRadius,s=n||SM,o=s.height,a=s.width,l=li(a),u=li(o),c=li(i||0),d=ZO(e||"black",r);if(d!=null&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},Cz=t=>{var e=t.textShadowColor,n=t.textShadowOffset,r=t.textShadowRadius,i=n||SM,s=i.height,o=i.width,a=r||0,l=li(o),u=li(s),c=li(a),d=li(e,"textShadowColor");if(d&&(s!==0||o!==0||a!==0)&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},xz=t=>{var e=Object.keys(t)[0],n=t[e];if(e==="matrix"||e==="matrix3d")return e+"("+n.join(",")+")";var r=li(n,e);return e+"("+r+")"},Az=t=>t.map(xz).join(" "),Pz={borderBottomEndRadius:"borderEndEndRadius",borderBottomStartRadius:"borderEndStartRadius",borderTopEndRadius:"borderStartEndRadius",borderTopStartRadius:"borderStartStartRadius",borderEndColor:"borderInlineEndColor",borderEndStyle:"borderInlineEndStyle",borderEndWidth:"borderInlineEndWidth",borderStartColor:"borderInlineStartColor",borderStartStyle:"borderInlineStartStyle",borderStartWidth:"borderInlineStartWidth",end:"insetInlineEnd",marginEnd:"marginInlineEnd",marginHorizontal:"marginInline",marginStart:"marginInlineStart",marginVertical:"marginBlock",paddingEnd:"paddingInlineEnd",paddingHorizontal:"paddingInline",paddingStart:"paddingInlineStart",paddingVertical:"paddingBlock",start:"insetInlineStart"},kz={elevation:!0,overlayColor:!0,resizeMode:!0,tintColor:!0},TM=function(e,n){n===void 0&&(n={});var r=e||Rz,i={};if(n.shadow,r.shadowColor!=null||r.shadowOffset!=null||r.shadowOpacity!=null||r.shadowRadius!=null){var s=EM(r);if(s!=null&&i.boxShadow==null){var o=r.boxShadow,a=o?o+", "+s:s;i.boxShadow=a}}if(n.textShadow,r.textShadowColor!=null||r.textShadowOffset!=null||r.textShadowRadius!=null){var l=Cz(r);if(l!=null&&i.textShadow==null){var u=r.textShadow,c=u?u+", "+l:l;i.textShadow=c}}for(var d in r)if(!(kz[d]!=null||d==="shadowColor"||d==="shadowOffset"||d==="shadowOpacity"||d==="shadowRadius"||d==="textShadowColor"||d==="textShadowOffset"||d==="textShadowRadius")){var f=r[d],p=Pz[d]||d,g=f;!Object.prototype.hasOwnProperty.call(r,d)||p!==d&&r[p]!=null||(p==="aspectRatio"&&typeof g=="number"?i[p]=g.toString():p==="fontVariant"?(Array.isArray(g)&&g.length>0&&(g=g.join(" ")),i[p]=g):p==="textAlignVertical"?r.verticalAlign==null&&(i.verticalAlign=g==="center"?"middle":g):p==="transform"?(Array.isArray(g)&&(g=Az(g)),i.transform=g):i[p]=g)}return i},lT={};Object.defineProperty(lT,"__esModule",{value:!0});var bM=lT.styleq=void 0,Dz=new WeakMap,Oz="$$css";function IM(t){var e,n,r;return t!=null&&(e=t.disableCache===!0,n=t.disableMix===!0,r=t.transform),function(){for(var s=[],o="",a=null,l=e?null:Dz,u=new Array(arguments.length),c=0;c<arguments.length;c++)u[c]=arguments[c];for(;u.length>0;){var d=u.pop();if(!(d==null||d===!1)){if(Array.isArray(d)){for(var f=0;f<d.length;f++)u.push(d[f]);continue}var p=r!=null?r(d):d;if(p.$$css){var g="";if(l!=null&&l.has(p)){var S=l.get(p);S!=null&&(g=S[0],s.push.apply(s,S[1]),l=S[2])}else{var T=[];for(var v in p){var y=p[v];v!==Oz&&(typeof y=="string"||y===null?s.includes(v)||(s.push(v),l!=null&&T.push(v),typeof y=="string"&&(g+=g?" "+y:y)):console.error("styleq: ".concat(v," typeof ").concat(String(y),' is not "string" or "null".')))}if(l!=null){var _=new WeakMap;l.set(p,[g,T,_]),l=_}}g&&(o=o?g+" "+o:g)}else if(n)a==null&&(a={}),a=Object.assign({},p,a);else{var C=null;for(var O in p){var D=p[O];D!==void 0&&(s.includes(O)||(D!=null&&(a==null&&(a={}),C==null&&(C={}),C[O]=D),s.push(O),l=null))}C!=null&&(a=Object.assign(C,a))}}}var b=[o,a];return b}}var RM=IM();bM=lT.styleq=RM;RM.factory=IM;var Mz=["writingDirection"],CM=new WeakMap,hg=Tz(),xM={shadow:!0,textShadow:!0};function Nz(t,e){e===void 0&&(e={});var n=e,r=n.writingDirection,i=On(n,Mz),s=r==="rtl";return bM.factory({transform(o){var a=CM.get(o);return a!=null?Iz.localizeStyle(a,s):TM(o,ye(ye({},xM),i))}})(t)}function AM(t){t.forEach(e=>{var n=e[0],r=e[1];hg!=null&&n.forEach(i=>{hg.insert(i,r)})})}function Lz(t){var e=cz(TM(t,xM)),n=e[0],r=e[1];return AM(r),n}function Vz(t,e){var n=hz(t,e),r=n[0],i=n[1];return AM(i),r}var PM={position:"absolute",left:0,right:0,top:0,bottom:0},Fz=kM({x:ye({},PM)}).x;function kM(t){return Object.keys(t).forEach(e=>{var n=t[e];if(n!=null&&n.$$css!==!0){var r;e.indexOf("$raw")>-1?r=Vz(n,e.split("$raw")[0]):r=Lz(n),CM.set(n,r)}}),t}function Bz(t,e){return[t,e]}function jz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.flat(1/0),i={},s=0;s<r.length;s++){var o=r[s];o!=null&&typeof o=="object"&&Object.assign(i,o)}return i}function Uz(){return{id:hg.id,textContent:hg.getTextContent()}}function us(t,e){e===void 0&&(e={});var n=e.writingDirection==="rtl",r=Nz(t,e);return Array.isArray(r)&&r[1]!=null&&(r[1]=dz(r[1],n)),r}us.absoluteFill=Fz;us.absoluteFillObject=PM;us.create=kM;us.compose=Bz;us.flatten=jz;us.getSheet=Uz;us.hairlineWidth=1;Dt&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.resolveRNStyle=us.flatten);var Ae=us,$z=["aria-activedescendant","accessibilityActiveDescendant","aria-atomic","accessibilityAtomic","aria-autocomplete","accessibilityAutoComplete","aria-busy","accessibilityBusy","aria-checked","accessibilityChecked","aria-colcount","accessibilityColumnCount","aria-colindex","accessibilityColumnIndex","aria-colspan","accessibilityColumnSpan","aria-controls","accessibilityControls","aria-current","accessibilityCurrent","aria-describedby","accessibilityDescribedBy","aria-details","accessibilityDetails","aria-disabled","accessibilityDisabled","aria-errormessage","accessibilityErrorMessage","aria-expanded","accessibilityExpanded","aria-flowto","accessibilityFlowTo","aria-haspopup","accessibilityHasPopup","aria-hidden","accessibilityHidden","aria-invalid","accessibilityInvalid","aria-keyshortcuts","accessibilityKeyShortcuts","aria-label","accessibilityLabel","aria-labelledby","accessibilityLabelledBy","aria-level","accessibilityLevel","aria-live","accessibilityLiveRegion","aria-modal","accessibilityModal","aria-multiline","accessibilityMultiline","aria-multiselectable","accessibilityMultiSelectable","aria-orientation","accessibilityOrientation","aria-owns","accessibilityOwns","aria-placeholder","accessibilityPlaceholder","aria-posinset","accessibilityPosInSet","aria-pressed","accessibilityPressed","aria-readonly","accessibilityReadOnly","aria-required","accessibilityRequired","role","accessibilityRole","aria-roledescription","accessibilityRoleDescription","aria-rowcount","accessibilityRowCount","aria-rowindex","accessibilityRowIndex","aria-rowspan","accessibilityRowSpan","aria-selected","accessibilitySelected","aria-setsize","accessibilitySetSize","aria-sort","accessibilitySort","aria-valuemax","accessibilityValueMax","aria-valuemin","accessibilityValueMin","aria-valuenow","accessibilityValueNow","aria-valuetext","accessibilityValueText","dataSet","focusable","id","nativeID","pointerEvents","style","tabIndex","testID"],zz={},Wz=Object.prototype.hasOwnProperty,Hz=Array.isArray,Kz=/[A-Z]/g;function qz(t){return"-"+t.toLowerCase()}function Gz(t){return t.replace(Kz,qz)}function Sl(t){return Hz(t)?t.join(" "):t}var Xz=Ae.create({auto:{pointerEvents:"auto"},"box-none":{pointerEvents:"box-none"},"box-only":{pointerEvents:"box-only"},none:{pointerEvents:"none"}}),Qz=(t,e,n)=>{e||(e=zz);var r=e,i=r["aria-activedescendant"],s=r.accessibilityActiveDescendant,o=r["aria-atomic"],a=r.accessibilityAtomic,l=r["aria-autocomplete"],u=r.accessibilityAutoComplete,c=r["aria-busy"],d=r.accessibilityBusy,f=r["aria-checked"],p=r.accessibilityChecked,g=r["aria-colcount"],S=r.accessibilityColumnCount,T=r["aria-colindex"],v=r.accessibilityColumnIndex,y=r["aria-colspan"],_=r.accessibilityColumnSpan,C=r["aria-controls"],O=r.accessibilityControls,D=r["aria-current"],b=r.accessibilityCurrent,E=r["aria-describedby"],R=r.accessibilityDescribedBy,A=r["aria-details"],x=r.accessibilityDetails,N=r["aria-disabled"],k=r.accessibilityDisabled,de=r["aria-errormessage"],pe=r.accessibilityErrorMessage,je=r["aria-expanded"],Ce=r.accessibilityExpanded,U=r["aria-flowto"],Y=r.accessibilityFlowTo,ie=r["aria-haspopup"],we=r.accessibilityHasPopup,Pe=r["aria-hidden"],hn=r.accessibilityHidden,lt=r["aria-invalid"],zt=r.accessibilityInvalid,gt=r["aria-keyshortcuts"],Ke=r.accessibilityKeyShortcuts,Nt=r["aria-label"],Mn=r.accessibilityLabel,xi=r["aria-labelledby"],ms=r.accessibilityLabelledBy,Sr=r["aria-level"],Hr=r.accessibilityLevel,ir=r["aria-live"],Lo=r.accessibilityLiveRegion,gs=r["aria-modal"],Vo=r.accessibilityModal,ys=r["aria-multiline"],De=r.accessibilityMultiline,et=r["aria-multiselectable"],Nn=r.accessibilityMultiSelectable,sr=r["aria-orientation"],vs=r.accessibilityOrientation,Fo=r["aria-owns"],Er=r.accessibilityOwns,Bo=r["aria-placeholder"],rl=r.accessibilityPlaceholder,_s=r["aria-posinset"],pc=r.accessibilityPosInSet,il=r["aria-pressed"],sl=r.accessibilityPressed,jo=r["aria-readonly"],Ai=r.accessibilityReadOnly,ws=r["aria-required"],Ue=r.accessibilityRequired;r.role,r.accessibilityRole;var or=r["aria-roledescription"],ol=r.accessibilityRoleDescription,Pi=r["aria-rowcount"],al=r.accessibilityRowCount,Kr=r["aria-rowindex"],ll=r.accessibilityRowIndex,ee=r["aria-rowspan"],Qe=r.accessibilityRowSpan,Lt=r["aria-selected"],Tr=r.accessibilitySelected,qr=r["aria-setsize"],ul=r.accessibilitySetSize,ki=r["aria-sort"],bv=r.accessibilitySort,Af=r["aria-valuemax"],cl=r.accessibilityValueMax,mc=r["aria-valuemin"],Pf=r.accessibilityValueMin,hl=r["aria-valuenow"],Uo=r.accessibilityValueNow,kf=r["aria-valuetext"],Gr=r.accessibilityValueText,$o=r.dataSet,zo=r.focusable,dl=r.id,gc=r.nativeID,yc=r.pointerEvents,Iv=r.style,Ss=r.tabIndex,Df=r.testID,Q=On(r,$z),Of=N||k,Ln=JO.propsToAriaRole(e),Es=i??s;Es!=null&&(Q["aria-activedescendant"]=Es);var Xr=o!=null?i:a;Xr!=null&&(Q["aria-atomic"]=Xr);var fl=l??u;fl!=null&&(Q["aria-autocomplete"]=fl);var Mf=c??d;Mf!=null&&(Q["aria-busy"]=Mf);var vc=f??p;vc!=null&&(Q["aria-checked"]=vc);var _c=g??S;_c!=null&&(Q["aria-colcount"]=_c);var wc=T??v;wc!=null&&(Q["aria-colindex"]=wc);var pl=y??_;pl!=null&&(Q["aria-colspan"]=pl);var ml=C??O;ml!=null&&(Q["aria-controls"]=Sl(ml));var Sc=D??b;Sc!=null&&(Q["aria-current"]=Sc);var Ec=E??R;Ec!=null&&(Q["aria-describedby"]=Sl(Ec));var Tc=A??x;Tc!=null&&(Q["aria-details"]=Tc),Of===!0&&(Q["aria-disabled"]=!0,(t==="button"||t==="form"||t==="input"||t==="select"||t==="textarea")&&(Q.disabled=!0));var Nf=de??pe;Nf!=null&&(Q["aria-errormessage"]=Nf);var br=je??Ce;br!=null&&(Q["aria-expanded"]=br);var Vn=U??Y;Vn!=null&&(Q["aria-flowto"]=Sl(Vn));var Ts=ie??we;Ts!=null&&(Q["aria-haspopup"]=Ts);var bs=Pe??hn;bs===!0&&(Q["aria-hidden"]=bs);var gl=lt??zt;gl!=null&&(Q["aria-invalid"]=gl);var Be=gt??Ke;Be!=null&&(Q["aria-keyshortcuts"]=Sl(Be));var Wo=Nt??Mn;Wo!=null&&(Q["aria-label"]=Wo);var Is=xi??ms;Is!=null&&(Q["aria-labelledby"]=Sl(Is));var Rs=Sr??Hr;Rs!=null&&(Q["aria-level"]=Rs);var bc=ir??Lo;bc!=null&&(Q["aria-live"]=bc==="none"?"off":bc);var Ic=gs??Vo;Ic!=null&&(Q["aria-modal"]=Ic);var Lf=ys??De;Lf!=null&&(Q["aria-multiline"]=Lf);var Vf=et??Nn;Vf!=null&&(Q["aria-multiselectable"]=Vf);var Ff=sr??vs;Ff!=null&&(Q["aria-orientation"]=Ff);var Bf=Fo??Er;Bf!=null&&(Q["aria-owns"]=Sl(Bf));var Cs=Bo??rl;Cs!=null&&(Q["aria-placeholder"]=Cs);var Qr=_s??pc;Qr!=null&&(Q["aria-posinset"]=Qr);var Rc=il??sl;Rc!=null&&(Q["aria-pressed"]=Rc);var Cc=jo??Ai;Cc!=null&&(Q["aria-readonly"]=Cc,(t==="input"||t==="select"||t==="textarea")&&(Q.readOnly=!0));var xc=ws??Ue;xc!=null&&(Q["aria-required"]=xc,(t==="input"||t==="select"||t==="textarea")&&(Q.required=Ue)),Ln!=null&&(Q.role=Ln==="none"?"presentation":Ln);var Ac=or??ol;Ac!=null&&(Q["aria-roledescription"]=Ac);var Pc=Pi??al;Pc!=null&&(Q["aria-rowcount"]=Pc);var Di=Kr??ll;Di!=null&&(Q["aria-rowindex"]=Di);var jf=ee??Qe;jf!=null&&(Q["aria-rowspan"]=jf);var Uf=Lt??Tr;Uf!=null&&(Q["aria-selected"]=Uf);var $f=qr??ul;$f!=null&&(Q["aria-setsize"]=$f);var Ir=ki??bv;Ir!=null&&(Q["aria-sort"]=Ir);var zf=Af??cl;zf!=null&&(Q["aria-valuemax"]=zf);var yl=mc??Pf;yl!=null&&(Q["aria-valuemin"]=yl);var Ho=hl??Uo;Ho!=null&&(Q["aria-valuenow"]=Ho);var kc=kf??Gr;if(kc!=null&&(Q["aria-valuetext"]=kc),$o!=null){for(var Oi in $o)if(Wz.call($o,Oi)){var Ko=Gz(Oi),Dc=$o[Oi];Dc!=null&&(Q["data-"+Ko]=Dc)}}Ss===0||Ss==="0"||Ss===-1||Ss==="-1"?Q.tabIndex=Ss:(zo===!1&&(Q.tabIndex="-1"),t==="a"||t==="button"||t==="input"||t==="select"||t==="textarea"?(zo===!1||k===!0)&&(Q.tabIndex="-1"):Ln==="button"||Ln==="checkbox"||Ln==="link"||Ln==="radio"||Ln==="textbox"||Ln==="switch"?zo!==!1&&(Q.tabIndex="0"):zo===!0&&(Q.tabIndex="0"));var vl=Ae([Iv,yc&&Xz[yc]],ye({writingDirection:"ltr"},n)),qe=vl[0],Wf=vl[1];qe&&(Q.className=qe),Wf&&(Q.style=Wf);var Hf=dl??gc;return Hf!=null&&(Q.id=Hf),Df!=null&&(Q["data-testid"]=Df),Q.type==null&&t==="button"&&(Q.type="button"),Q},Yz=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),zC=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","far","glk","he","iw","khw","ks","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]),WC=new Map;function Jz(t){var e=WC.get(t);if(e)return e;var n=!1;if(Intl.Locale)try{var r=new Intl.Locale(t).maximize().script;n=Yz.has(r)}catch{var i=t.split("-")[0];n=zC.has(i)}else{var s=t.split("-")[0];n=zC.has(s)}return WC.set(t,n),n}var Zz={direction:"ltr",locale:"en-US"},DM=I.createContext(Zz);function Dy(t){return Jz(t)?"rtl":"ltr"}function e5(t){var e=t.direction,n=t.locale,r=t.children,i=e||n;return i?yt.createElement(DM.Provider,{children:r,value:{direction:n?Dy(n):e,locale:n}}):r}function uT(){return I.useContext(DM)}var Yu=(t,e,n)=>{var r;t&&t.constructor===String&&(r=JO.propsToAccessibilityComponent(e));var i=r||t,s=Qz(i,e,n),o=yt.createElement(i,s),a=s.dir?yt.createElement(e5,{children:o,direction:s.dir,locale:s.lang}):o;return a},xS=t=>{if(t!=null){var e=t.nodeType===1;if(e&&typeof t.getBoundingClientRect=="function")return t.getBoundingClientRect()}},Dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},t5=["ms","Moz","O","Webkit"],n5=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(Dh).forEach(t=>{t5.forEach(e=>{Dh[n5(e,t)]=Dh[t]})});function r5(t,e,n){var r=e==null||typeof e=="boolean"||e==="";return r?"":!n&&typeof e=="number"&&e!==0&&!(Dh.hasOwnProperty(t)&&Dh[t])?e+"px":(""+e).trim()}function i5(t,e){var n=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=r5(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var HC=t=>{var e=t.offsetHeight,n=t.offsetWidth,r=t.offsetLeft,i=t.offsetTop;for(t=t.offsetParent;t&&t.nodeType===1;)r+=t.offsetLeft+t.clientLeft-t.scrollLeft,i+=t.offsetTop+t.clientTop-t.scrollTop,t=t.offsetParent;return i-=window.scrollY,r-=window.scrollX,{width:n,height:e,top:i,left:r}},KC=(t,e,n)=>{var r=e||t&&t.parentNode;t&&r&&setTimeout(()=>{if(t.isConnected&&r.isConnected){var i=HC(r),s=HC(t),o=s.height,a=s.left,l=s.top,u=s.width,c=a-i.left,d=l-i.top;n(c,d,u,o,a,l)}},0)},s5={A:!0,BODY:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0},qi={blur(t){try{t.blur()}catch{}},focus(t){try{var e=t.nodeName;t.getAttribute("tabIndex")==null&&t.isContentEditable!==!0&&s5[e]==null&&t.setAttribute("tabIndex","-1"),t.focus()}catch{}},measure(t,e){KC(t,null,e)},measureInWindow(t,e){t&&setTimeout(()=>{var n=xS(t),r=n.height,i=n.left,s=n.top,o=n.width;e(i,s,o,r)},0)},measureLayout(t,e,n,r){KC(t,e,r)},updateView(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];switch(n){case"style":{i5(t,r);break}case"class":case"className":{t.setAttribute("class",r);break}case"text":case"value":t.value=r;break;default:t.setAttribute(n,r)}}},configureNextLayoutAnimation(t,e){e()},setLayoutAnimationEnabledExperimental(){}},o5={OS:"web"};function cn(){return cn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cn.apply(null,arguments)}var cT={children:!0,dataSet:!0,dir:!0,id:!0,ref:!0,suppressHydrationWarning:!0,tabIndex:!0,testID:!0,focusable:!0,nativeID:!0},hT={"aria-activedescendant":!0,"aria-atomic":!0,"aria-autocomplete":!0,"aria-busy":!0,"aria-checked":!0,"aria-colcount":!0,"aria-colindex":!0,"aria-colspan":!0,"aria-controls":!0,"aria-current":!0,"aria-describedby":!0,"aria-details":!0,"aria-disabled":!0,"aria-errormessage":!0,"aria-expanded":!0,"aria-flowto":!0,"aria-haspopup":!0,"aria-hidden":!0,"aria-invalid":!0,"aria-keyshortcuts":!0,"aria-label":!0,"aria-labelledby":!0,"aria-level":!0,"aria-live":!0,"aria-modal":!0,"aria-multiline":!0,"aria-multiselectable":!0,"aria-orientation":!0,"aria-owns":!0,"aria-placeholder":!0,"aria-posinset":!0,"aria-pressed":!0,"aria-readonly":!0,"aria-required":!0,role:!0,"aria-roledescription":!0,"aria-rowcount":!0,"aria-rowindex":!0,"aria-rowspan":!0,"aria-selected":!0,"aria-setsize":!0,"aria-sort":!0,"aria-valuemax":!0,"aria-valuemin":!0,"aria-valuenow":!0,"aria-valuetext":!0,accessibilityActiveDescendant:!0,accessibilityAtomic:!0,accessibilityAutoComplete:!0,accessibilityBusy:!0,accessibilityChecked:!0,accessibilityColumnCount:!0,accessibilityColumnIndex:!0,accessibilityColumnSpan:!0,accessibilityControls:!0,accessibilityCurrent:!0,accessibilityDescribedBy:!0,accessibilityDetails:!0,accessibilityDisabled:!0,accessibilityErrorMessage:!0,accessibilityExpanded:!0,accessibilityFlowTo:!0,accessibilityHasPopup:!0,accessibilityHidden:!0,accessibilityInvalid:!0,accessibilityKeyShortcuts:!0,accessibilityLabel:!0,accessibilityLabelledBy:!0,accessibilityLevel:!0,accessibilityLiveRegion:!0,accessibilityModal:!0,accessibilityMultiline:!0,accessibilityMultiSelectable:!0,accessibilityOrientation:!0,accessibilityOwns:!0,accessibilityPlaceholder:!0,accessibilityPosInSet:!0,accessibilityPressed:!0,accessibilityReadOnly:!0,accessibilityRequired:!0,accessibilityRole:!0,accessibilityRoleDescription:!0,accessibilityRowCount:!0,accessibilityRowIndex:!0,accessibilityRowSpan:!0,accessibilitySelected:!0,accessibilitySetSize:!0,accessibilitySort:!0,accessibilityValueMax:!0,accessibilityValueMin:!0,accessibilityValueNow:!0,accessibilityValueText:!0},dT={onClick:!0,onAuxClick:!0,onContextMenu:!0,onGotPointerCapture:!0,onLostPointerCapture:!0,onPointerCancel:!0,onPointerDown:!0,onPointerEnter:!0,onPointerMove:!0,onPointerLeave:!0,onPointerOut:!0,onPointerOver:!0,onPointerUp:!0},fT={onBlur:!0,onFocus:!0},pT={onKeyDown:!0,onKeyDownCapture:!0,onKeyUp:!0,onKeyUpCapture:!0},mT={onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0},gT={onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0},yT={style:!0};function vT(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&e[r]===!0&&(n[r]=t[r]);return n}var AS=Dt?I.useLayoutEffect:I.useEffect,PS="__reactLayoutHandler",f_=null;function a5(){return Dt&&typeof window.ResizeObserver<"u"&&f_==null&&(f_=new window.ResizeObserver(function(t){t.forEach(e=>{var n=e.target,r=n[PS];typeof r=="function"&&qi.measure(n,(i,s,o,a,l,u)=>{var c={nativeEvent:{layout:{x:i,y:s,width:o,height:a,left:l,top:u}},timeStamp:Date.now()};Object.defineProperty(c.nativeEvent,"target",{enumerable:!0,get:()=>e.target}),r(c)})})})),f_}function _T(t,e){var n=a5();AS(()=>{var r=t.current;r!=null&&(r[PS]=e)},[t,e]),AS(()=>{var r=t.current;return r!=null&&n!=null&&(typeof r[PS]=="function"?n.observe(r):n.unobserve(r)),()=>{r!=null&&n!=null&&n.unobserve(r)}},[t,n])}function OM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){e.forEach(s=>{if(s!=null){if(typeof s=="function"){s(i);return}if(typeof s=="object"){s.current=i;return}console.error("mergeRefs cannot handle Refs of type boolean, number or string, received ref "+String(s))}})}}function Jd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.useMemo(()=>OM(...e),[...e])}var qC=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():Object.freeze({});function l5(t){var e=I.useRef(qC);return e.current===qC&&(e.current=t()),e.current}function wT(t){t.pointerEvents,t.style;var e=l5(()=>n=>{n!=null&&(n.measure=r=>qi.measure(n,r),n.measureLayout=(r,i,s)=>qi.measureLayout(n,r,s,i),n.measureInWindow=r=>qi.measureInWindow(n,r))});return e}var GC=()=>{},u5={},c5=[];function XC(t){return t>20?t%20:t}function MM(t,e){var n,r=!1,i,s,o=t.changedTouches,a=t.type,l=t.metaKey===!0,u=t.shiftKey===!0,c=o&&o[0].force||0,d=XC(o&&o[0].identifier||0),f=o&&o[0].clientX||t.clientX,p=o&&o[0].clientY||t.clientY,g=o&&o[0].pageX||t.pageX,S=o&&o[0].pageY||t.pageY,T=typeof t.preventDefault=="function"?t.preventDefault.bind(t):GC,v=t.timeStamp;function y(b){return Array.prototype.slice.call(b).map(E=>({force:E.force,identifier:XC(E.identifier),get locationX(){return O(E.clientX)},get locationY(){return D(E.clientY)},pageX:E.pageX,pageY:E.pageY,target:E.target,timestamp:v}))}if(o!=null)i=y(o),s=y(t.touches);else{var _=[{force:c,identifier:d,get locationX(){return O(f)},get locationY(){return D(p)},pageX:g,pageY:S,target:t.target,timestamp:v}];i=_,s=a==="mouseup"||a==="dragstart"?c5:_}var C={bubbles:!0,cancelable:!0,currentTarget:null,defaultPrevented:t.defaultPrevented,dispatchConfig:u5,eventPhase:t.eventPhase,isDefaultPrevented(){return t.defaultPrevented},isPropagationStopped(){return r},isTrusted:t.isTrusted,nativeEvent:{altKey:!1,ctrlKey:!1,metaKey:l,shiftKey:u,changedTouches:i,force:c,identifier:d,get locationX(){return O(f)},get locationY(){return D(p)},pageX:g,pageY:S,target:t.target,timestamp:v,touches:s,type:a},persist:GC,preventDefault:T,stopPropagation(){r=!0},target:t.target,timeStamp:v,touchHistory:e.touchHistory};function O(b){if(n=n||xS(C.currentTarget),n)return b-n.left}function D(b){if(n=n||xS(C.currentTarget),n)return b-n.top}return C}var h5="mousedown",d5="mousemove",f5="mouseup",p5="dragstart",m5="touchstart",g5="touchmove",y5="touchend",v5="touchcancel",_5="scroll",w5="select",S5="selectionchange";function NM(t){return t===m5||t===h5}function LM(t){return t===g5||t===d5}function VM(t){return t===y5||t===f5||FM(t)}function FM(t){return t===v5||t===p5}function E5(t){return t===_5}function T5(t){return t===w5||t===S5}function b5(){var t=window.getSelection(),e=t.toString(),n=t.anchorNode,r=t.focusNode,i=n&&n.nodeType===window.Node.TEXT_NODE||r&&r.nodeType===window.Node.TEXT_NODE;return e.length>=1&&e!==`
`&&i}var BM="__reactResponderId";function I5(t){if(t.type==="selectionchange"){var e=window.getSelection().anchorNode;return QC(e)}else{var n=t.composedPath!=null?t.composedPath():QC(t.target);return n}}function QC(t){for(var e=[];t!=null&&t!==document.body;)e.push(t),t=t.parentNode;return e}function R5(t){return t!=null?t[BM]:null}function C5(t,e){t!=null&&(t[BM]=e)}function x5(t){for(var e=[],n=[],r=I5(t),i=0;i<r.length;i++){var s=r[i],o=R5(s);o!=null&&(e.push(o),n.push(s))}return{idPath:e,nodePath:n}}function A5(t,e){var n=t.length,r=e.length;if(n===0||r===0||t[n-1]!==e[r-1])return null;var i=t[0],s=0,o=e[0],a=0;n-r>0&&(s=n-r,i=t[s],n=r),r-n>0&&(a=r-n,o=e[a],r=n);for(var l=n;l--;){if(i===o)return i;i=t[s++],o=e[a++]}return null}function P5(t,e){if(!e||e.length===0)return!1;for(var n=0;n<e.length;n++){var r=e[n].target;if(r!=null&&t.contains(r))return!0}return!1}function k5(t){return t.type==="selectionchange"?b5():t.type==="select"}function D5(t){var e=t.altKey,n=t.button,r=t.buttons,i=t.ctrlKey,s=t.type,o=s==="touchstart"||s==="touchmove",a=s==="mousedown"&&(n===0||r===1),l=s==="mousemove"&&r===1,u=e===!1&&i===!1;return!!(o||a&&u||l&&u)}var YC=20;function gr(t){return t.timeStamp||t.timestamp}function O5(t){return{touchActive:!0,startPageX:t.pageX,startPageY:t.pageY,startTimeStamp:gr(t),currentPageX:t.pageX,currentPageY:t.pageY,currentTimeStamp:gr(t),previousPageX:t.pageX,previousPageY:t.pageY,previousTimeStamp:gr(t)}}function M5(t,e){t.touchActive=!0,t.startPageX=e.pageX,t.startPageY=e.pageY,t.startTimeStamp=gr(e),t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=gr(e),t.previousPageX=e.pageX,t.previousPageY=e.pageY,t.previousTimeStamp=gr(e)}function ST(t){var e=t.identifier;return e==null&&console.error("Touch object is missing identifier."),e}function N5(t,e){var n=ST(t),r=e.touchBank[n];r?M5(r,t):e.touchBank[n]=O5(t),e.mostRecentTimeStamp=gr(t)}function L5(t,e){var n=e.touchBank[ST(t)];n?(n.touchActive=!0,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=gr(t),e.mostRecentTimeStamp=gr(t)):console.warn(`Cannot record touch move without a touch start.
`,"Touch Move: "+jM(t)+`
`,"Touch Bank: "+UM(e))}function V5(t,e){var n=e.touchBank[ST(t)];n?(n.touchActive=!1,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=gr(t),e.mostRecentTimeStamp=gr(t)):console.warn(`Cannot record touch end without a touch start.
`,"Touch End: "+jM(t)+`
`,"Touch Bank: "+UM(e))}function jM(t){return JSON.stringify({identifier:t.identifier,pageX:t.pageX,pageY:t.pageY,timestamp:gr(t)})}function UM(t){var e=t.touchBank,n=JSON.stringify(e.slice(0,YC));return e.length>YC&&(n+=" (original size: "+e.length+")"),n}class F5{constructor(){this._touchHistory={touchBank:[],numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0}}recordTouchTrack(e,n){var r=this._touchHistory;if(LM(e))n.changedTouches.forEach(a=>L5(a,r));else if(NM(e))n.changedTouches.forEach(a=>N5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1&&(r.indexOfSingleActiveTouch=n.touches[0].identifier);else if(VM(e)&&(n.changedTouches.forEach(a=>V5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1))for(var i=r.touchBank,s=0;s<i.length;s++){var o=i[s];if(o!=null&&o.touchActive){r.indexOfSingleActiveTouch=s;break}}}get touchHistory(){return this._touchHistory}}var B5={},JC=["onStartShouldSetResponderCapture","onStartShouldSetResponder",{bubbles:!0}],ZC=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder",{bubbles:!0}],j5=["onScrollShouldSetResponderCapture","onScrollShouldSetResponder",{bubbles:!1}],U5={touchstart:JC,mousedown:JC,touchmove:ZC,mousemove:ZC,scroll:j5},kS={id:null,idPath:null,node:null},dg=new Map,Us=!1,ei=0,oi={id:null,node:null,idPath:null},DS=new F5;function _d(t){oi=t}function wd(t){var e=dg.get(t);return e??B5}function p_(t){var e=t.type,n=t.target;if(e==="touchstart"&&(Us=!0),(e==="touchmove"||ei>1)&&(Us=!1),!(e==="mousedown"&&Us||e==="mousemove"&&Us||e==="mousemove"&&ei<1)){if(Us&&e==="mouseup"){ei===0&&(Us=!1);return}var r=NM(e)&&D5(t),i=LM(e),s=VM(e),o=E5(e),a=T5(e),l=MM(t,DS);(r||i||s)&&(t.touches?ei=t.touches.length:r?ei=1:s&&(ei=0),DS.recordTouchTrack(e,l.nativeEvent));var u=x5(t),c=!1,d;if(r||i||o&&ei>0){var f=oi.idPath,p=u.idPath;if(f!=null&&p!=null){var g=A5(f,p);if(g!=null){var S=p.indexOf(g),T=S+(g===oi.id?1:0);u={idPath:p.slice(T),nodePath:u.nodePath.slice(T)}}else u=null}u!=null&&(d=$5(u,t,l),d!=null&&(z5(l,d),c=!0))}if(oi.id!=null&&oi.node!=null){var v=oi,y=v.id,_=v.node,C=wd(y),O=C.onResponderStart,D=C.onResponderMove,b=C.onResponderEnd,E=C.onResponderRelease,R=C.onResponderTerminate,A=C.onResponderTerminationRequest;if(l.bubbles=!1,l.cancelable=!1,l.currentTarget=_,r)O!=null&&(l.dispatchConfig.registrationName="onResponderStart",O(l));else if(i)D!=null&&(l.dispatchConfig.registrationName="onResponderMove",D(l));else{var x=FM(e)||e==="contextmenu"||e==="blur"&&n===window||e==="blur"&&n.contains(_)&&t.relatedTarget!==_||o&&ei===0||o&&n.contains(_)&&n!==_||a&&k5(t),N=s&&!x&&!P5(_,t.touches);if(s&&b!=null&&(l.dispatchConfig.registrationName="onResponderEnd",b(l)),N&&(E!=null&&(l.dispatchConfig.registrationName="onResponderRelease",E(l)),_d(kS)),x){var k=!0;(e==="contextmenu"||e==="scroll"||e==="selectionchange")&&(c?k=!1:A!=null&&(l.dispatchConfig.registrationName="onResponderTerminationRequest",A(l)===!1&&(k=!1))),k&&(R!=null&&(l.dispatchConfig.registrationName="onResponderTerminate",R(l)),_d(kS),Us=!1,ei=0)}}}}}function $5(t,e,n){var r=U5[e.type];if(r!=null){for(var i=t.idPath,s=t.nodePath,o=r[0],a=r[1],l=r[2].bubbles,u=function(D,b,E){var R=wd(D),A=R[E];if(A!=null&&(n.currentTarget=b,A(n)===!0)){var x=i.slice(i.indexOf(D));return{id:D,node:b,idPath:x}}},c=i.length-1;c>=0;c--){var d=i[c],f=s[c],p=u(d,f,o);if(p!=null)return p;if(n.isPropagationStopped()===!0)return}if(l)for(var g=0;g<i.length;g++){var S=i[g],T=s[g],v=u(S,T,a);if(v!=null)return v;if(n.isPropagationStopped()===!0)return}else{var y=i[0],_=s[0],C=e.target;if(C===_)return u(y,_,a)}}}function z5(t,e){var n=oi,r=n.id,i=n.node,s=e.id,o=e.node,a=wd(s),l=a.onResponderGrant,u=a.onResponderReject;if(t.bubbles=!1,t.cancelable=!1,t.currentTarget=o,r==null)l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),_d(e);else{var c=wd(r),d=c.onResponderTerminate,f=c.onResponderTerminationRequest,p=!0;f!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminationRequest",f(t)===!1&&(p=!1)),p?(d!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminate",d(t)),l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),_d(e)):u!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderReject",u(t))}}var W5=["blur","scroll"],H5=["mousedown","mousemove","mouseup","dragstart","touchstart","touchmove","touchend","touchcancel","contextmenu","select","selectionchange"];function K5(){Dt&&window.__reactResponderSystemActive==null&&(window.addEventListener("blur",p_),H5.forEach(t=>{document.addEventListener(t,p_)}),W5.forEach(t=>{document.addEventListener(t,p_,!0)}),window.__reactResponderSystemActive=!0)}function q5(t,e,n){C5(e,t),dg.set(t,n)}function ex(t){oi.id===t&&G5(),dg.has(t)&&dg.delete(t)}function G5(){var t=oi,e=t.id,n=t.node;if(e!=null&&n!=null){var r=wd(e),i=r.onResponderTerminate;if(i!=null){var s=MM({},DS);s.currentTarget=n,i(s)}_d(kS)}Us=!1,ei=0}function X5(){return oi.node}var Q5={},Y5=0;function J5(t){var e=I.useRef(null);return e.current==null&&(e.current=t()),e.current}function ET(t,e){e===void 0&&(e=Q5);var n=J5(()=>Y5++),r=I.useRef(!1);I.useEffect(()=>(K5(),()=>{ex(n)}),[n]),I.useEffect(()=>{var i=e,s=i.onMoveShouldSetResponder,o=i.onMoveShouldSetResponderCapture,a=i.onScrollShouldSetResponder,l=i.onScrollShouldSetResponderCapture,u=i.onSelectionChangeShouldSetResponder,c=i.onSelectionChangeShouldSetResponderCapture,d=i.onStartShouldSetResponder,f=i.onStartShouldSetResponderCapture,p=s!=null||o!=null||a!=null||l!=null||u!=null||c!=null||d!=null||f!=null,g=t.current;p?(q5(n,g,e),r.current=!0):r.current&&(ex(n),r.current=!1)},[e,t,n]),I.useDebugValue({isResponder:t.current===X5()}),I.useDebugValue(e)}var fg=I.createContext(!1),Z5=["hrefAttrs","onLayout","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture"],e9=Object.assign({},cT,hT,dT,fT,pT,mT,gT,yT,{href:!0,lang:!0,onScroll:!0,onWheel:!0,pointerEvents:!0}),t9=t=>vT(t,e9),X=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.onLayout,i=t.onMoveShouldSetResponder,s=t.onMoveShouldSetResponderCapture,o=t.onResponderEnd,a=t.onResponderGrant,l=t.onResponderMove,u=t.onResponderReject,c=t.onResponderRelease,d=t.onResponderStart,f=t.onResponderTerminate,p=t.onResponderTerminationRequest,g=t.onScrollShouldSetResponder,S=t.onScrollShouldSetResponderCapture,T=t.onSelectionChangeShouldSetResponder,v=t.onSelectionChangeShouldSetResponderCapture,y=t.onStartShouldSetResponder,_=t.onStartShouldSetResponderCapture,C=On(t,Z5),O=I.useContext(fg),D=I.useRef(null),b=uT(),E=b.direction;_T(D,r),ET(D,{onMoveShouldSetResponder:i,onMoveShouldSetResponderCapture:s,onResponderEnd:o,onResponderGrant:a,onResponderMove:l,onResponderReject:u,onResponderRelease:c,onResponderStart:d,onResponderTerminate:f,onResponderTerminationRequest:p,onScrollShouldSetResponder:g,onScrollShouldSetResponderCapture:S,onSelectionChangeShouldSetResponder:T,onSelectionChangeShouldSetResponderCapture:v,onStartShouldSetResponder:y,onStartShouldSetResponderCapture:_});var R="div",A=t.lang!=null?Dy(t.lang):null,x=t.dir||A,N=x||E,k=t9(C);if(k.dir=x,k.style=[tx.view$raw,O&&tx.inline,t.style],t.href!=null&&(R="a",n!=null)){var de=n.download,pe=n.rel,je=n.target;de!=null&&(k.download=de),pe!=null&&(k.rel=pe),typeof je=="string"&&(k.target=je.charAt(0)!=="_"?"_"+je:je)}var Ce=wT(k),U=Jd(D,Ce,e);return k.ref=U,Yu(R,k,{writingDirection:N})});X.displayName="View";var tx=Ae.create({view$raw:{alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",zIndex:0},inline:{display:"inline-flex"}}),n9=function t(e,n,r){if(r===void 0&&(r=-1),r===0)return!0;if(e===n||typeof e=="function"&&typeof n=="function")return!1;if(typeof e!="object"||e===null)return e!==n;if(typeof n!="object"||n===null||e.constructor!==n.constructor)return!0;if(Array.isArray(e)){var i=e.length;if(n.length!==i)return!0;for(var s=0;s<i;s++)if(t(e[s],n[s],r-1))return!0}else{for(var o in e)if(t(e[o],n[o],r-1))return!0;for(var a in n)if(e[a]===void 0&&n[a]!==void 0)return!0}return!1};function r9(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!t){var s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;s=new Error(e.replace(/%s/g,function(){return String(r[o++])})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}var i9=r9;const ge=qu(i9);function nx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s9(t,e){if(t){if(typeof t=="string")return nx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nx(t,e):void 0}}function ma(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=s9(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o9=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function a9(t){t.colors,t.enabled,t.onRefresh,t.progressBackgroundColor,t.progressViewOffset,t.refreshing,t.size,t.tintColor,t.title,t.titleColor;var e=On(t,o9);return yt.createElement(X,e)}var ga={window:{fontScale:1,height:0,scale:1,width:0},screen:{fontScale:1,height:0,scale:1,width:0}},Hs={},rx=Dt;function $M(){if(Dt){var t=window,e,n;if(t.visualViewport){var r=t.visualViewport;e=Math.round(r.height*r.scale),n=Math.round(r.width*r.scale)}else{var i=t.document.documentElement;e=i.clientHeight,n=i.clientWidth}ga.window={fontScale:1,height:e,scale:t.devicePixelRatio||1,width:n},ga.screen={fontScale:1,height:t.screen.height,scale:t.devicePixelRatio||1,width:t.screen.width}}}function ix(){$M(),Array.isArray(Hs.change)&&Hs.change.forEach(t=>t(ga))}class pg{static get(e){return rx&&(rx=!1,$M()),ge(ga[e],"No dimension set for key "+e),ga[e]}static set(e){e&&(Dt?ge(!1,"Dimensions cannot be set in the browser"):(e.screen!=null&&(ga.screen=e.screen),e.window!=null&&(ga.window=e.window)))}static addEventListener(e,n){return Hs[e]=Hs[e]||[],Hs[e].push(n),{remove:()=>{this.removeEventListener(e,n)}}}static removeEventListener(e,n){Array.isArray(Hs[e])&&(Hs[e]=Hs[e].filter(r=>r!==n))}}Dt&&(window.visualViewport?window.visualViewport.addEventListener("resize",ix,!1):window.addEventListener("resize",ix,!1));var $i={_currentlyFocusedNode:null,currentlyFocusedField(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput(t){t!==null&&(this._currentlyFocusedNode=t,document.activeElement!==t&&qi.focus(t))},blurTextInput(t){t!==null&&(this._currentlyFocusedNode=null,document.activeElement===t&&qi.blur(t))}},l9=()=>{$i.blurTextInput($i.currentlyFocusedField())},u9=["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"];function sx(t){return{nativeEvent:{contentOffset:{get x(){return t.target.scrollLeft},get y(){return t.target.scrollTop}},contentSize:{get height(){return t.target.scrollHeight},get width(){return t.target.scrollWidth}},layoutMeasurement:{get height(){return t.target.offsetHeight},get width(){return t.target.offsetWidth}}},timeStamp:Date.now()}}function c9(t,e){var n=Date.now()-t;return e>0&&n>=e}var h9=I.forwardRef((t,e)=>{var n=t.onScroll,r=t.onTouchMove,i=t.onWheel,s=t.scrollEnabled,o=s===void 0?!0:s,a=t.scrollEventThrottle,l=a===void 0?0:a,u=t.showsHorizontalScrollIndicator,c=t.showsVerticalScrollIndicator,d=t.style,f=On(t,u9),p=I.useRef({isScrolling:!1,scrollLastTick:0}),g=I.useRef(null),S=I.useRef(null);function T(D){return b=>{o&&D&&D(b)}}function v(D){D.stopPropagation(),D.target===S.current&&(D.persist(),g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{C(D)},100),p.current.isScrolling?c9(p.current.scrollLastTick,l)&&_(D):y(D))}function y(D){p.current.isScrolling=!0,_(D)}function _(D){p.current.scrollLastTick=Date.now(),n&&n(sx(D))}function C(D){p.current.isScrolling=!1,n&&n(sx(D))}var O=u===!1||c===!1;return I.createElement(X,cn({},f,{onScroll:v,onTouchMove:T(r),onWheel:T(i),ref:Jd(S,e),style:[d,!o&&ox.scrollDisabled,O&&ox.hideScrollbar]}))}),ox=Ae.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});function Oy(t){return function(){return t}}var Za=function(){};Za.thatReturns=Oy;Za.thatReturnsFalse=Oy(!1);Za.thatReturnsTrue=Oy(!0);Za.thatReturnsNull=Oy(null);Za.thatReturnsThis=function(){return this};Za.thatReturnsArgument=function(t){return t};var d9=Za,f9=d9,p9=f9,m9=p9;const g9=qu(m9);var y9=["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll","centerContent"],ax={},v9=16;class _9 extends yt.Component{constructor(){super(...arguments),this._scrollNodeRef=null,this._innerViewRef=null,this.isTouching=!1,this.lastMomentumScrollBeginTime=0,this.lastMomentumScrollEndTime=0,this.observedScrollSinceBecomingResponder=!1,this.becameResponderWhileAnimating=!1,this.scrollResponderHandleScrollShouldSetResponder=()=>this.isTouching,this.scrollResponderHandleStartShouldSetResponderCapture=e=>this.scrollResponderIsAnimating(),this.scrollResponderHandleTerminationRequest=()=>!this.observedScrollSinceBecomingResponder,this.scrollResponderHandleTouchEnd=e=>{var n=e.nativeEvent;this.isTouching=n.touches.length!==0,this.props.onTouchEnd&&this.props.onTouchEnd(e)},this.scrollResponderHandleResponderRelease=e=>{this.props.onResponderRelease&&this.props.onResponderRelease(e);var n=$i.currentlyFocusedField();!this.props.keyboardShouldPersistTaps&&n!=null&&e.target!==n&&!this.observedScrollSinceBecomingResponder&&!this.becameResponderWhileAnimating&&(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),$i.blurTextInput(n))},this.scrollResponderHandleScroll=e=>{this.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},this.scrollResponderHandleResponderGrant=e=>{this.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},this.scrollResponderHandleScrollBeginDrag=e=>{this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},this.scrollResponderHandleScrollEndDrag=e=>{this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},this.scrollResponderHandleMomentumScrollBegin=e=>{this.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},this.scrollResponderHandleMomentumScrollEnd=e=>{this.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},this.scrollResponderHandleTouchStart=e=>{this.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},this.scrollResponderHandleTouchMove=e=>{this.props.onTouchMove&&this.props.onTouchMove(e)},this.scrollResponderIsAnimating=()=>{var e=Date.now(),n=e-this.lastMomentumScrollEndTime,r=n<v9||this.lastMomentumScrollEndTime<this.lastMomentumScrollBeginTime;return r},this.scrollResponderScrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||ax;e=i.x,n=i.y,r=i.animated}var s=this.getScrollableNode(),o=e||0,a=n||0;s!=null&&(typeof s.scroll=="function"?s.scroll({top:a,left:o,behavior:r?"smooth":"auto"}):(s.scrollLeft=o,s.scrollTop=a))},this.scrollResponderZoomTo=(e,n)=>{ge("zoomToRect is not implemented")},this.scrollResponderScrollNativeHandleToKeyboard=(e,n,r)=>{this.additionalScrollOffset=n||0,this.preventNegativeScrollOffset=!!r,qi.measureLayout(e,this.getInnerViewNode(),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},this.scrollResponderInputMeasureAndScrollToKeyboard=(e,n,r,i)=>{var s=pg.get("window").height;this.keyboardWillOpenTo&&(s=this.keyboardWillOpenTo.endCoordinates.screenY);var o=n-s+i+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(o=Math.max(0,o)),this.scrollResponderScrollTo({x:0,y:o,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},this.scrollResponderKeyboardWillShow=e=>{this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},this.scrollResponderKeyboardWillHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},this.scrollResponderKeyboardDidShow=e=>{e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},this.scrollResponderKeyboardDidHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)},this.flashScrollIndicators=()=>{this.scrollResponderFlashScrollIndicators()},this.getScrollResponder=()=>this,this.getScrollableNode=()=>this._scrollNodeRef,this.getInnerViewRef=()=>this._innerViewRef,this.getInnerViewNode=()=>this._innerViewRef,this.getNativeScrollRef=()=>this._scrollNodeRef,this.scrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||ax;n=i.x,e=i.y,r=i.animated}this.scrollResponderScrollTo({x:n||0,y:e||0,animated:r!==!1})},this.scrollToEnd=e=>{var n=(e&&e.animated)!==!1,r=this.props.horizontal,i=this.getScrollableNode(),s=r?i.scrollWidth:0,o=r?0:i.scrollHeight;this.scrollResponderScrollTo({x:s,y:o,animated:n})},this._handleContentOnLayout=e=>{var n=e.nativeEvent.layout,r=n.width,i=n.height;this.props.onContentSizeChange(r,i)},this._handleScroll=e=>{this.props.keyboardDismissMode==="on-drag"&&l9(),this.scrollResponderHandleScroll(e)},this._setInnerViewRef=e=>{this._innerViewRef=e},this._setScrollNodeRef=e=>{this._scrollNodeRef=e,e!=null&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard);var n=OM(this.props.forwardedRef);n(e)}}scrollResponderHandleStartShouldSetResponder(){return!1}scrollResponderHandleResponderReject(){g9(!1,"ScrollView doesn't take rejection well - scrolls anyway")}scrollResponderFlashScrollIndicators(){}scrollResponderTextInputFocusError(e){console.error("Error measuring text field: ",e)}render(){var e=this.props,n=e.contentContainerStyle,r=e.horizontal,i=e.onContentSizeChange,s=e.refreshControl,o=e.stickyHeaderIndices,a=e.pagingEnabled;e.forwardedRef,e.keyboardDismissMode,e.onScroll;var l=e.centerContent,u=On(e,y9),c={};i&&(c={onLayout:this._handleContentOnLayout});var d=!r&&Array.isArray(o),f=d||a?yt.Children.map(this.props.children,(_,C)=>{var O=d&&o.indexOf(C)>-1;return _!=null&&(O||a)?yt.createElement(X,{style:[O&&Ms.stickyHeader,a&&Ms.pagingEnabledChild]},_):_}):this.props.children,p=yt.createElement(X,cn({},c,{children:f,collapsable:!1,ref:this._setInnerViewRef,style:[r&&Ms.contentContainerHorizontal,l&&Ms.contentContainerCenterContent,n]})),g=r?Ms.baseHorizontal:Ms.baseVertical,S=r?Ms.pagingEnabledHorizontal:Ms.pagingEnabledVertical,T=ye(ye({},u),{},{style:[g,a&&S,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),v=h9;ge(v!==void 0,"ScrollViewClass must not be undefined");var y=yt.createElement(v,cn({},T,{ref:this._setScrollNodeRef}),p);return s?yt.cloneElement(s,{style:T.style},y):y}}var lx={flexGrow:1,flexShrink:1,transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},Ms=Ae.create({baseVertical:ye(ye({},lx),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:ye(ye({},lx),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},contentContainerCenterContent:{justifyContent:"center",flexGrow:1},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),Vr=yt.forwardRef((t,e)=>yt.createElement(_9,cn({},t,{forwardedRef:e})));Vr.displayName="ScrollView";class w9{constructor(e){var n=e.onMoreTasks;this._onMoreTasks=n,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(n=>this.enqueue(n))}cancelTasks(e){this._queueStack=this._queueStack.map(n=>ye(ye({},n),{},{tasks:n.tasks.filter(r=>e.indexOf(r)===-1)})).filter((n,r)=>n.tasks.length>0||r===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var n=e.shift();try{typeof n=="object"&&n.gen?this._genPromise(n):typeof n=="object"&&n.run?n.run():(ge(typeof n=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(n,null,2)),n())}catch(r){throw r.message="TaskQueue: Error with task "+(n.name||"")+": "+r.message,r}}}_getCurrentQueue(){var e=this._queueStack.length-1,n=this._queueStack[e];return n.popable&&n.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}_genPromise(e){var n=this._queueStack.push({tasks:[],popable:!1}),r=n-1,i=this._queueStack[r];e.gen().then(()=>{i.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(s=>{setTimeout(()=>{throw s.message="TaskQueue: Error resolving Promise in task "+e.name+": "+s.message,s},0)})}}class S9{constructor(){this._registry={}}addListener(e,n,r){var i=E9(this._registry,e),s={context:r,listener:n,remove(){i.delete(s)}};return i.add(s),s}emit(e){var n=this._registry[e];if(n!=null){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var o=0,a=[...n];o<a.length;o++){var l=a[o];l.listener.apply(l.context,i)}}}removeAllListeners(e){e==null?this._registry={}:delete this._registry[e]}listenerCount(e){var n=this._registry[e];return n==null?0:n.size}}function E9(t,e){var n=t[e];return n==null&&(n=new Set,t[e]=n),n}var T9=function(e,n){return setTimeout(()=>{var r=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}})},1)},b9=Dt&&typeof window.requestIdleCallback<"u",I9=b9?window.requestIdleCallback:T9,mg=new S9,OS={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(t){var e=[],n=new Promise(r=>{Oh(),t&&e.push(t),e.push({run:r,name:"resolve "+(t&&t.name||"?")}),yg.enqueueTasks(e)});return{then:n.then.bind(n),done:n.then.bind(n),cancel:()=>{yg.cancelTasks(e)}}},createInteractionHandle(){Oh();var t=++R9;return gg.add(t),t},clearInteractionHandle(t){ge(!!t,"Must provide a handle to clear."),Oh(),gg.delete(t),MS.add(t)},addListener:mg.addListener.bind(mg),setDeadline(t){vg=t}},vp=new Set,gg=new Set,MS=new Set,yg=new w9({onMoreTasks:Oh}),sm=0,R9=0,vg=-1;function Oh(){sm||(vg>0?sm=setTimeout(ux):sm=I9(ux))}function ux(){sm=0;var t=vp.size;gg.forEach(r=>vp.add(r)),MS.forEach(r=>vp.delete(r));var e=vp.size;if(t!==0&&e===0?mg.emit(OS.Events.interactionComplete):t===0&&e!==0&&mg.emit(OS.Events.interactionStart),e===0){for(var n=Date.now();yg.hasTasksToProcess();)if(yg.processNext(),vg>0&&Date.now()-n>=vg){Oh();break}}gg.clear(),MS.clear()}class C9{constructor(e,n){this._delay=n,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=OS.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function cx(t,e,n){return e<t?t:e>n?n:e}function x9(){return console.log(...arguments)}class A9{constructor(e){ge(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(ge(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var n=this._findRegion(e.first),r=n[0],i=n[1],s=this._findRegion(e.last),o=s[0],a=s[1];if(!(i===a&&!r.isSpacer)){var l=[],u=[],c=ye(ye({},e),{},{isSpacer:!1});r.first<c.first&&(r.isSpacer?l.push({first:r.first,last:c.first-1,isSpacer:!0}):c.first=r.first),o.last>c.last&&(o.isSpacer?u.push({first:c.last+1,last:o.last,isSpacer:!0}):c.last=o.last);var d=[...l,c,...u],f=a-i+1;this._regions.splice(i,f,...d)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((n,r)=>n.first===e._regions[r].first&&n.last===e._regions[r].last&&n.isSpacer===e._regions[r].isSpacer)}_findRegion(e){for(var n=0,r=this._regions.length-1;n<=r;){var i=Math.floor((n+r)/2),s=this._regions[i];if(e>=s.first&&e<=s.last)return[s,i];e<s.first?r=i-1:e>s.last&&(n=i+1)}ge(!1,"A region was not found containing cellIdx "+e)}}class P9{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,n){var r;ge(!this._childrenToCellKey.has(e),"Trying to add already present child list");var i=(r=this._cellKeyToChildren.get(n))!==null&&r!==void 0?r:new Set;i.add(e),this._cellKeyToChildren.set(n,i),this._childrenToCellKey.set(e,n)}remove(e){var n=this._childrenToCellKey.get(e);ge(n!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var r=this._cellKeyToChildren.get(n);ge(r,"_cellKeyToChildren should contain cellKey"),r.delete(e),r.size===0&&this._cellKeyToChildren.delete(n)}forEach(e){for(var n=ma(this._cellKeyToChildren.values()),r;!(r=n()).done;)for(var i=r.value,s=ma(i),o;!(o=s()).done;){var a=o.value;e(a)}}forEachInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ma(i),o;!(o=s()).done;){var a=o.value;n(a)}}anyInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ma(i),o;!(o=s()).done;){var a=o.value;if(n(a))return!0}return!1}size(){return this._childrenToCellKey.size}}class hx{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var _p=[],dx=10,m_=null;class k9{static addListener(e){return m_===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),_p.push(e),{remove:()=>{_p=_p.filter(n=>e!==n)}}}static setSampleRate(e){m_=e}static setMinSampleCount(e){dx=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new hx,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(m_||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<dx){this._resetData();return}var n=global.performance.now()-e,r=ye(ye({},this._info),{},{total_time_spent:n});_p.forEach(i=>i(r)),this._resetData()}}}computeBlankness(e,n,r){if(!this._enabled||e.getItemCount(e.data)===0||n.last<n.first||this._samplesStartTime==null)return 0;var i=r.dOffset,s=r.offset,o=r.velocity,a=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(a),this._info.pixels_scrolled+=Math.round(Math.abs(i));var l=Math.round(Math.abs(o)*1e3),u=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=u-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=u-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var c=0,d=n.first,f=this._getFrameMetrics(d,e);d<=n.last&&(!f||!f.inLayout);)f=this._getFrameMetrics(d,e),d++;f&&d>0&&(c=Math.min(a,Math.max(0,f.offset-s)));for(var p=0,g=n.last,S=this._getFrameMetrics(g,e);g>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(g,e),g--;if(S&&g<e.getItemCount(e.data)-1){var T=S.offset+S.length;p=Math.min(a,Math.max(0,s+a-T))}var v=Math.round(c+p),y=v/a;return y>0?(this._anyBlankStartTime=u,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=v,y>.5&&(this._mostlyBlankStartTime=u,this._info.mostly_blank_count++)):(l<.01||Math.abs(i)<1)&&this.deactivateAndFlush(),y}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new hx,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class D9 extends I.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,n){typeof e=="function"?super.setState((r,i)=>{this._inAsyncStateUpdate=!0;var s;try{s=e(r,i)}catch(o){throw o}finally{this._inAsyncStateUpdate=!1}return s},n):super.setState(e,n)}_installSetStateHooks(){var e=this,n=this.props,r=this.state;Object.defineProperty(this,"props",{get(){return ge(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),n},set(i){n=i}}),Object.defineProperty(this,"state",{get(){return ge(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),r},set(i){r=i}})}}class fx{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,n,r,i,s){var o=e.getItemCount(e.data),a=this._config,l=a.itemVisiblePercentThreshold,u=a.viewAreaCoveragePercentThreshold,c=u!=null,d=c?u:l;ge(d!=null&&l!=null!=(u!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var f=[];if(o===0)return f;var p=-1,g=s||{first:0,last:o-1},S=g.first,T=g.last;if(T>=o)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:s,itemCount:o})),[];for(var v=S;v<=T;v++){var y=i(v,e);if(y){var _=y.offset-n,C=_+y.length;if(_<r&&C>0)p=v,O9(c,d,_,C,r,y.length)&&f.push(v);else if(p>=0)break}}return f}onUpdate(e,n,r,i,s,o,a){var l=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||l===0||!i(0,e))){var u=[];if(l&&(u=this.computeViewableItems(e,n,r,i,a)),!(this._viewableIndices.length===u.length&&this._viewableIndices.every((d,f)=>d===u[f])))if(this._viewableIndices=u,this._config.minimumViewTime){var c=setTimeout(()=>{this._timers.delete(c),this._onUpdateSync(e,u,o,s)},this._config.minimumViewTime);this._timers.add(c)}else this._onUpdateSync(e,u,o,s)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,n,r,i){n=n.filter(y=>this._viewableIndices.includes(y));for(var s=this._viewableItems,o=new Map(n.map(y=>{var _=i(y,!0,e);return[_.key,_]})),a=[],l=ma(o),u;!(u=l()).done;){var c=u.value,d=c[0],f=c[1];s.has(d)||a.push(f)}for(var p=ma(s),g;!(g=p()).done;){var S=g.value,T=S[0],v=S[1];o.has(T)||a.push(ye(ye({},v),{},{isViewable:!1}))}a.length>0&&(this._viewableItems=o,r({viewableItems:Array.from(o.values()),changed:a,viewabilityConfig:this._config}))}}function O9(t,e,n,r,i,s){if(N9(n,r,i))return!0;var o=M9(n,r,i),a=100*(t?o/i:o/s);return a>=e}function M9(t,e,n){var r=Math.min(e,n)-Math.max(t,0);return Math.max(0,r)}function N9(t,e,n){return t>=0&&e<=n&&e>t}var _g=I.createContext(null);function L9(t){var e=t.children,n=t.value,r=I.useMemo(()=>({cellKey:null,getScrollMetrics:n.getScrollMetrics,horizontal:n.horizontal,getOutermostParentListRef:n.getOutermostParentListRef,registerAsNestedChild:n.registerAsNestedChild,unregisterAsNestedChild:n.unregisterAsNestedChild}),[n.getScrollMetrics,n.horizontal,n.getOutermostParentListRef,n.registerAsNestedChild,n.unregisterAsNestedChild]);return I.createElement(_g.Provider,{value:r},e)}function om(t){var e=t.cellKey,n=t.children,r=I.useContext(_g),i=I.useMemo(()=>r==null?null:ye(ye({},r),{},{cellKey:e}),[r,e]);return I.createElement(_g.Provider,{value:i},n)}class V9 extends I.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!0})},unhighlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!1})},updateProps:(e,n)=>{var r=this.props,i=r.cellKey,s=r.prevCellKey;this.props.onUpdateSeparators([e==="leading"?s:i],n)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,n){return{separatorProps:ye(ye({},n.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(n=>({separatorProps:ye(ye({},n.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,n,r,i){if(e&&n&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),n)return I.createElement(n,{item:r,index:i,separators:this._separators});if(e)return e({item:r,index:i,separators:this._separators});ge(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,n=e.CellRendererComponent,r=e.ItemSeparatorComponent,i=e.ListItemComponent,s=e.cellKey,o=e.horizontal,a=e.item,l=e.index,u=e.inversionStyle,c=e.onCellFocusCapture,d=e.onCellLayout,f=e.renderItem,p=this._renderElement(f,i,a,l),g=I.isValidElement(r)?r:r&&I.createElement(r,this.state.separatorProps),S=u?o?[g_.rowReverse,u]:[g_.columnReverse,u]:o?[g_.row,u]:u,T=n?I.createElement(n,cn({cellKey:s,index:l,item:a,style:S,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g):I.createElement(X,cn({style:S,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g);return I.createElement(om,{cellKey:this.props.cellKey},T)}}var g_=Ae.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function F9(t,e,n,r){r===void 0&&(r=1);for(var i=e.getItemCount(e.data),s=[],o=0;o<t.length;o++)for(var a=t[o],l=0,u=i-1;l<=u;){var c=l+(u-l>>>1),d=n(c,e),f=d.offset*r,p=(d.offset+d.length)*r;if(c===0&&a<f||c!==0&&a<=f)u=c-1;else if(a>p)l=c+1;else{s[o]=c;break}}return s}function B9(t,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,t.last)-Math.max(e.first,t.first))}function j9(t,e,n,r,i,s){var o=t.getItemCount(t.data);if(o===0)return{first:0,last:-1};var a=s.offset,l=s.velocity,u=s.visibleLength,c=s.zoomScale,d=c===void 0?1:c,f=Math.max(0,a),p=f+u,g=(n-1)*u,S=.5,T=l>1?"after":l<-1?"before":"none",v=Math.max(0,f-(1-S)*g),y=Math.max(0,p+S*g),_=i(o-1,t).offset*d;if(_<v)return{first:Math.max(0,o-1-e),last:o-1};var C=F9([v,f,p,y],t,i,d),O=C[0],D=C[1],b=C[2],E=C[3];O=O??0,D=D??Math.max(0,O),E=E??o-1,b=b??Math.min(E,D+e-1);for(var R={first:D,last:b},A=B9(r,R);!(D<=O&&b>=E);){var x=A>=e,N=D<=r.first||D>r.last,k=D>O&&(!x||!N),de=b>=r.last||b<r.first,pe=b<E&&(!x||!de);if(x&&!k&&!pe)break;k&&!(T==="after"&&pe&&de)&&(N&&A++,D--),pe&&!(T==="before"&&k&&N)&&(de&&A++,b++)}if(!(b>=D&&D>=0&&b<o&&D>=O&&b<=E&&D<=R.first&&b>=R.last))throw new Error("Bad window calculation "+JSON.stringify({first:D,last:b,itemCount:o,overscanFirst:O,overscanLast:E,visible:R}));return{first:D,last:b}}function NS(t,e){return typeof t=="object"&&(t==null?void 0:t.key)!=null?t.key:typeof t=="object"&&(t==null?void 0:t.id)!=null?t.id:String(e)}var My={exports:{}};function zM(t,e){if(t!=null)return t;var n=new Error(e!==void 0?e:"Got unexpected "+t);throw n.framesToPop=1,n}My.exports=zM;My.exports.default=zM;Object.defineProperty(My.exports,"__esModule",{value:!0});var U9=My.exports;const $9=qu(U9);var px=.001,y_=!1,v_="";function Xo(t){return t??!1}function z9(t){return t??10}function __(t){return t??10}function W9(t){return t??2}function mx(t){return t??2}function gx(t,e){return t*e/2}function H9(t){return t??50}function yx(t){return t??21}function K9(t,e){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return t[n];return null}class lr extends D9{scrollToEnd(e){var n=e?e.animated:!0,r=this.props.getItemCount(this.props.data)-1;if(!(r<0)){var i=this.__getFrameMetricsApprox(r,this.props),s=Math.max(0,i.offset+i.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Xo(this.props.horizontal)?{x:s,animated:n}:{y:s,animated:n})}}}scrollToIndex(e){var n=this.props,r=n.data,i=n.horizontal,s=n.getItemCount,o=n.getItemLayout,a=n.onScrollToIndexFailed,l=e.animated,u=e.index,c=e.viewOffset,d=e.viewPosition;if(ge(u>=0,"scrollToIndex out of range: requested index "+u+" but minimum is 0"),ge(s(r)>=1,"scrollToIndex out of range: item length "+s(r)+" but minimum is 1"),ge(u<s(r),"scrollToIndex out of range: requested index "+u+" is out of 0 to "+(s(r)-1)),!o&&u>this._highestMeasuredFrameIndex){ge(!!a,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),a({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:u});return}var f=this.__getFrameMetricsApprox(Math.floor(u),this.props),p=Math.max(0,this._getOffsetApprox(u,this.props)-(d||0)*(this._scrollMetrics.visibleLength-f.length))-(c||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(i?{x:p,animated:l}:{y:p,animated:l})}}scrollToItem(e){for(var n=e.item,r=this.props,i=r.data,s=r.getItem,o=r.getItemCount,a=o(i),l=0;l<a;l++)if(s(i,l)===n){this.scrollToIndex(ye(ye({},e),{},{index:l}));break}}scrollToOffset(e){var n=e.animated,r=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Xo(this.props.horizontal)?{x:r,animated:n}:{y:r,animated:n})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var n;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=a=>{this._nestedChildLists.add(a.ref,a.cellKey),this._hasInteracted&&a.ref.recordInteraction()},this._unregisterAsNestedChild=a=>{this._nestedChildLists.remove(a.ref)},this._onUpdateSeparators=(a,l)=>{a.forEach(u=>{var c=u!=null&&this._cellRefs[u];c&&c.updateSeparatorProps(l)})},this._getSpacerKey=a=>a?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new P9,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=a=>{this._scrollRef=a},this._defaultRenderScrollComponent=a=>{var l=a.onRefresh;if(this._isNestedWithSameOrientation())return I.createElement(X,a);if(l){var u;return ge(typeof a.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((u=a.refreshing)!==null&&u!==void 0?u:"undefined")+"`"),I.createElement(Vr,cn({},a,{refreshControl:a.refreshControl==null?I.createElement(a9,{refreshing:a.refreshing,onRefresh:l,progressViewOffset:a.progressViewOffset}):a.refreshControl}))}else return I.createElement(Vr,a)},this._onCellLayout=(a,l,u)=>{var c=a.nativeEvent.layout,d={offset:this._selectOffset(c),length:this._selectLength(c),index:u,inLayout:!0},f=this._frames[l];!f||d.offset!==f.offset||d.length!==f.length||u!==f.index?(this._totalCellLength+=d.length-(f?f.length:0),this._totalCellsMeasured+=f?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[l]=d,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,u),this._scheduleCellsToRenderUpdate()):this._frames[l].inLayout=!0,this._triggerRemeasureForChildListsInCell(l),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=a=>{delete this._cellRefs[a];var l=this._frames[a];l&&(this._frames[a]=ye(ye({},l),{},{inLayout:!1}))},this._onLayout=a=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(a.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(a),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=a=>{this.props.onLayout&&this.props.onLayout(a)},this._onLayoutFooter=a=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(a.nativeEvent.layout)},this._onLayoutHeader=a=>{this._headerLength=this._selectLength(a.nativeEvent.layout)},this._onContentSizeChange=(a,l)=>{a>0&&l>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:$9(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(a,l),this._scrollMetrics.contentLength=this._selectLength({height:l,width:a}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=a=>{var l=a.offset-this._offsetFromParentVirtualizedList,u=a.visibleLength,c=l-this._scrollMetrics.offset,d=this._scrollMetrics.contentLength;return{visibleLength:u,contentLength:d,offset:l,dOffset:c}},this._onScroll=a=>{this._nestedChildLists.forEach(v=>{v._onScroll(a)}),this.props.onScroll&&this.props.onScroll(a);var l=a.timeStamp,u=this._selectLength(a.nativeEvent.layoutMeasurement),c=this._selectLength(a.nativeEvent.contentSize),d=this._selectOffset(a.nativeEvent.contentOffset),f=d-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var p=this._convertParentScrollMetrics({visibleLength:u,offset:d});u=p.visibleLength,c=p.contentLength,d=p.offset,f=p.dOffset}var g=this._scrollMetrics.timestamp?Math.max(1,l-this._scrollMetrics.timestamp):1,S=f/g;g>500&&this._scrollMetrics.dt>500&&c>5*u&&!this._hasWarned.perf&&(x9("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:g,prevDt:this._scrollMetrics.dt,contentLength:c}),this._hasWarned.perf=!0);var T=a.nativeEvent.zoomScale<0?1:a.nativeEvent.zoomScale;this._scrollMetrics={contentLength:c,dt:g,dOffset:f,offset:d,timestamp:l,velocity:S,visibleLength:u,zoomScale:T},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),S!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=a=>{this._nestedChildLists.forEach(l=>{l._onScrollBeginDrag(a)}),this._viewabilityTuples.forEach(l=>{l.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(a)},this._onScrollEndDrag=a=>{this._nestedChildLists.forEach(u=>{u._onScrollEndDrag(a)});var l=a.nativeEvent.velocity;l&&(this._scrollMetrics.velocity=this._selectOffset(l)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(a)},this._onMomentumScrollBegin=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollBegin(a)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(a)},this._onMomentumScrollEnd=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollEnd(a)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(a)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((a,l)=>{var u=this._adjustCellsAroundViewport(l,a.cellsAroundViewport),c=lr._createRenderMask(l,u,this._getNonViewportRenderRegions(l));return u.first===a.cellsAroundViewport.first&&u.last===a.cellsAroundViewport.last&&c.equals(a.renderMask)?null:{cellsAroundViewport:u,renderMask:c}})},this._createViewToken=(a,l,u)=>{var c=u.data,d=u.getItem,f=d(c,a);return{index:a,item:f,key:this._keyExtractor(f,a,u),isViewable:l}},this._getOffsetApprox=(a,l)=>{if(Number.isInteger(a))return this.__getFrameMetricsApprox(a,l).offset;var u=this.__getFrameMetricsApprox(Math.floor(a),l),c=a-Math.floor(a);return u.offset+c*u.length},this.__getFrameMetricsApprox=(a,l)=>{var u=this._getFrameMetrics(a,l);if(u&&u.index===a)return u;var c=l.data,d=l.getItemCount,f=l.getItemLayout;return ge(a>=0&&a<d(c),"Tried to get frame for out of range index "+a),ge(!f,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*a}},this._getFrameMetrics=(a,l)=>{var u=l.data,c=l.getItem,d=l.getItemCount,f=l.getItemLayout;ge(a>=0&&a<d(u),"Tried to get frame for out of range index "+a);var p=c(u,a),g=this._frames[this._keyExtractor(p,a,l)];return(!g||g.index!==a)&&f?f(u,a):g},this._getNonViewportRenderRegions=a=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var l=this._cellRefs[this._lastFocusedCellKey],u=l.props.index,c=a.getItemCount(a.data);if(u>=c||this._keyExtractor(a.getItem(a.data,u),u,a)!==this._lastFocusedCellKey)return[];for(var d=u,f=0,p=d-1;p>=0&&f<this._scrollMetrics.visibleLength;p--)d--,f+=this.__getFrameMetricsApprox(p,a).length;for(var g=u,S=0,T=g+1;T<c&&S<this._scrollMetrics.visibleLength;T++)g++,S+=this.__getFrameMetricsApprox(T,a).length;return[{first:d,last:g}]},this._checkProps(e),this._fillRateHelper=new k9(this._getFrameMetrics),this._updateCellsToRenderBatcher=new C9(this._updateCellsToRender,(n=this.props.updateCellsBatchingPeriod)!==null&&n!==void 0?n:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(a=>({viewabilityHelper:new fx(a.viewabilityConfig),onViewableItemsChanged:a.onViewableItemsChanged}));else{var r=this.props,i=r.onViewableItemsChanged,s=r.viewabilityConfig;i&&this._viewabilityTuples.push({viewabilityHelper:new fx(s),onViewableItemsChanged:i})}var o=lr._initialRenderRegion(e);this.state={cellsAroundViewport:o,renderMask:lr._createRenderMask(e,o)},this.invertedWheelEventHandler=a=>{var l=this.props.horizontal?a.target.scrollLeft:a.target.scrollTop,u=this.props.horizontal?a.target.scrollWidth:a.target.scrollHeight,c=this.props.horizontal?a.target.clientWidth:a.target.clientHeight,d=u>c,f=this.props.horizontal?a.deltaX||a.wheelDeltaX:a.deltaY||a.wheelDeltaY,p=f;d&&(p=f<0?Math.min(f+l,0):Math.max(f-(u-c-l),0));var g=f-p;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var S=this._scrollRef.getScrollableNode();if(this.props.horizontal){a.target.scrollLeft+=g;var T=S.scrollLeft-p;S.scrollLeft=this.props.getItemLayout?T:Math.min(T,this._totalCellLength)}else{a.target.scrollTop+=g;var v=S.scrollTop-p;S.scrollTop=this.props.getItemLayout?v:Math.min(v,this._totalCellLength)}a.preventDefault()}}}_checkProps(e){var n=e.onScroll,r=e.windowSize,i=e.getItemCount,s=e.data,o=e.initialScrollIndex;ge(!n||!n.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),ge(yx(r)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),ge(i,'VirtualizedList: The "getItemCount" prop must be provided');var a=i(s);o!=null&&!this._hasTriggeredInitialScrollToIndex&&(o<0||a>0&&o>=a)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+o+'" is not valid (list has '+a+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,n,r){var i=e.getItemCount(e.data);ge(n.first>=0&&n.last>=n.first-1&&n.last<i,'Invalid cells around viewport "['+n.first+", "+n.last+']" was passed to VirtualizedList._createRenderMask');var s=new A9(i);if(i>0){for(var o=[n,...r??[]],a=0,l=o;a<l.length;a++){var u=l[a];s.addCells(u)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var c=lr._initialRenderRegion(e);s.addCells(c)}var d=new Set(e.stickyHeaderIndices);lr._ensureClosestStickyHeader(e,d,s,n.first)}return s}static _initialRenderRegion(e){var n,r=e.getItemCount(e.data),i=Math.max(0,Math.min(r-1,Math.floor((n=e.initialScrollIndex)!==null&&n!==void 0?n:0))),s=Math.min(r,i+z9(e.initialNumToRender))-1;return{first:i,last:s}}static _ensureClosestStickyHeader(e,n,r,i){for(var s=e.ListHeaderComponent?1:0,o=i-1;o>=0;o--)if(n.has(o+s)){r.addCells({first:o,last:o});break}}_adjustCellsAroundViewport(e,n){var r=e.data,i=e.getItemCount,s=mx(e.onEndReachedThreshold),o=this._scrollMetrics,a=o.contentLength,l=o.offset,u=o.visibleLength,c=a-u-l;if(u<=0||a<=0)return n.last>=i(r)?lr._constrainToItemCount(n,e):n;var d;if(e.disableVirtualization){var f=c<s*u?__(e.maxToRenderPerBatch):0;d={first:0,last:Math.min(n.last+f,i(r)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(c)>=Number.EPSILON)return n.last>=i(r)?lr._constrainToItemCount(n,e):n;d=j9(e,__(e.maxToRenderPerBatch),yx(e.windowSize),n,this.__getFrameMetricsApprox,this._scrollMetrics),ge(d.last<i(r),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var p=this._findFirstChildWithMore(d.first,d.last);d.last=p??d.last}return d}_findFirstChildWithMore(e,n){for(var r=e;r<=n;r++){var i=this._indicesToKeys.get(r);if(i!=null&&this._nestedChildLists.anyInCell(i,s=>s.hasMore()))return r}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,n){var r=e.getItemCount(e.data);if(r===n.renderMask.numCells())return n;var i=lr._constrainToItemCount(n.cellsAroundViewport,e);return{cellsAroundViewport:i,renderMask:lr._createRenderMask(e,i)}}_pushCells(e,n,r,i,s,o){var a=this,l=this.props,u=l.CellRendererComponent,c=l.ItemSeparatorComponent,d=l.ListHeaderComponent,f=l.ListItemComponent,p=l.data,g=l.debug,S=l.getItem,T=l.getItemCount,v=l.getItemLayout,y=l.horizontal,_=l.renderItem,C=d?1:0,O=T(p)-1,D;s=Math.min(O,s);for(var b=function(){var A=S(p,E),x=a._keyExtractor(A,E,a.props);a._indicesToKeys.set(E,x),r.has(E+C)&&n.push(e.length);var N=v==null||g||a._fillRateHelper.enabled();e.push(I.createElement(V9,cn({CellRendererComponent:u,ItemSeparatorComponent:E<O?c:void 0,ListItemComponent:f,cellKey:x,horizontal:y,index:E,inversionStyle:o,item:A,key:x,prevCellKey:D,onUpdateSeparators:a._onUpdateSeparators,onCellFocusCapture:k=>a._onCellFocusCapture(x),onUnmount:a._onCellUnmount,ref:k=>{a._cellRefs[x]=k},renderItem:_},N&&{onCellLayout:a._onCellLayout}))),D=x},E=i;E<=s;E++)b()}static _constrainToItemCount(e,n){var r=n.getItemCount(n.data),i=Math.min(r-1,e.last),s=__(n.maxToRenderPerBatch);return{first:cx(0,r-1-s,e.first),last:i}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===Xo(this.props.horizontal))}_keyExtractor(e,n,r){if(r.keyExtractor!=null)return r.keyExtractor(e,n);var i=NS(e,n);return i===String(n)&&(y_=!0,e.type&&e.type.displayName&&(v_=e.type.displayName)),i}render(){this._checkProps(this.props);var e=this.props,n=e.ListEmptyComponent,r=e.ListFooterComponent,i=e.ListHeaderComponent,s=this.props,o=s.data,a=s.horizontal,l=this.props.inverted?Xo(this.props.horizontal)?xr.horizontallyInverted:xr.verticallyInverted:null,u=[],c=new Set(this.props.stickyHeaderIndices),d=[];if(i){c.has(0)&&d.push(0);var f=I.isValidElement(i)?i:I.createElement(i,null);u.push(I.createElement(om,{cellKey:this._getCellKey()+"-header",key:"$header"},I.createElement(X,{onLayout:this._onLayoutHeader,style:[l,this.props.ListHeaderComponentStyle]},f)))}var p=this.props.getItemCount(o);if(p===0&&n){var g=I.isValidElement(n)?n:I.createElement(n,null);u.push(I.createElement(om,{cellKey:this._getCellKey()+"-empty",key:"$empty"},I.cloneElement(g,{onLayout:pe=>{this._onLayoutEmpty(pe),g.props.onLayout&&g.props.onLayout(pe)},style:[l,g.props.style]})))}if(p>0){y_=!1,v_="";for(var S=this._getSpacerKey(!a),T=this.state.renderMask.enumerateRegions(),v=K9(T,pe=>pe.isSpacer),y=ma(T),_;!(_=y()).done;){var C=_.value;if(C.isSpacer){if(this.props.disableVirtualization)continue;var O=C===v,D=O&&!this.props.getItemLayout,b=D?cx(C.first-1,C.last,this._highestMeasuredFrameIndex):C.last,E=this.__getFrameMetricsApprox(C.first,this.props),R=this.__getFrameMetricsApprox(b,this.props),A=R.offset+R.length-E.offset;u.push(I.createElement(X,{key:"$spacer-"+C.first,style:{[S]:A}}))}else this._pushCells(u,d,c,C.first,C.last,l)}!this._hasWarned.keys&&y_&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",v_),this._hasWarned.keys=!0)}if(r){var x=I.isValidElement(r)?r:I.createElement(r,null);u.push(I.createElement(om,{cellKey:this._getFooterCellKey(),key:"$footer"},I.createElement(X,{onLayout:this._onLayoutFooter,style:[l,this.props.ListFooterComponentStyle]},x)))}var N=ye(ye({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:H9(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:d,style:l?[l,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<p-1;var k=I.createElement(L9,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:Xo(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},I.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(N),{ref:this._captureScrollRef},u)),de=k;return this.props.debug?I.createElement(X,{style:xr.debug},de,this._renderDebugOverlay()):de}componentDidUpdate(e){var n=this.props,r=n.data,i=n.extraData;(r!==e.data||i!==e.extraData)&&this._viewabilityTuples.forEach(o=>{o.viewabilityHelper.resetViewableIndices()});var s=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),s&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,n=>{n.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,n,r,i)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:n}),this._scrollMetrics.contentLength=this._selectLength({width:r,height:i});var s=this._convertParentScrollMetrics(this.context.getScrollMetrics()),o=this._scrollMetrics.visibleLength!==s.visibleLength||this._scrollMetrics.offset!==s.offset;o&&(this._scrollMetrics.visibleLength=s.visibleLength,this._scrollMetrics.offset=s.offset,this._nestedChildLists.forEach(a=>{a.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),n=[],r=this.props.getItemCount(this.props.data),i=0;i<r;i++){var s=this.__getFrameMetricsApprox(i,this.props);s.inLayout&&n.push(s)}var o=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,a=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),l=a.offset+a.length-o,u=this._scrollMetrics.offset,c=this._scrollMetrics.visibleLength;return I.createElement(X,{style:[xr.debugOverlayBase,xr.debugOverlay]},n.map((d,f)=>I.createElement(X,{key:"f"+f,style:[xr.debugOverlayBase,xr.debugOverlayFrame,{top:d.offset*e,height:d.length*e}]})),I.createElement(X,{style:[xr.debugOverlayBase,xr.debugOverlayFrameLast,{top:o*e,height:l*e}]}),I.createElement(X,{style:[xr.debugOverlayBase,xr.debugOverlayFrameVis,{top:u*e,height:c*e}]}))}_selectLength(e){return Xo(this.props.horizontal)?e.width:e.height}_selectOffset(e){return Xo(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,n=e.data,r=e.getItemCount,i=e.onStartReached,s=e.onStartReachedThreshold,o=e.onEndReached,a=e.onEndReachedThreshold,l=e.initialScrollIndex,u=this._scrollMetrics,c=u.contentLength,d=u.visibleLength,f=u.offset,p=f,g=c-d-f;p<px&&(p=0),g<px&&(g=0);var S=2,T=s!=null?s*d:S,v=a!=null?a*d:S,y=p<=T,_=g<=v;o&&this.state.cellsAroundViewport.last===r(n)-1&&_&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,o({distanceFromEnd:g})):i!=null&&this.state.cellsAroundViewport.first===0&&y&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!l||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,i({distanceFromStart:p})):(this._sentStartForContentLength=y?this._sentStartForContentLength:0,this._sentEndForContentLength=_?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,n=e.first,r=e.last,i=this._scrollMetrics,s=i.offset,o=i.visibleLength,a=i.velocity,l=this.props.getItemCount(this.props.data),u=!1,c=W9(this.props.onStartReachedThreshold),d=mx(this.props.onEndReachedThreshold);if(n>0){var f=s-this.__getFrameMetricsApprox(n,this.props).offset;u=f<0||a<-2&&f<gx(c,o)}if(!u&&r>=0&&r<l-1){var p=this.__getFrameMetricsApprox(r,this.props).offset-(s+o);u=p<0||a>2&&p<gx(d,o)}if(u&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,n){this._viewabilityTuples.forEach(r=>{r.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,r.onViewableItemsChanged,n)})}}lr.contextType=_g;var xr=Ae.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),vx=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function q9(t,e){return!!(t===e||vx(t)&&vx(e))}function G9(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!q9(t[n],e[n]))return!1;return!0}function X9(t,e){e===void 0&&(e=G9);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var Q9=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function Y9(t){return t??o5.OS==="android"}function Qo(t){return t??1}function J9(t){return typeof Object(t).length=="number"}class Z9 extends I.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=n=>{this._listRef=n},this._getItem=(n,r)=>{var i=Qo(this.props.numColumns);if(i>1){for(var s=[],o=0;o<i;o++){var a=r*i+o;if(a<n.length){var l=n[a];s.push(l)}}return s}else return n[r]},this._getItemCount=n=>{if(n!=null&&J9(n)){var r=Qo(this.props.numColumns);return r>1?Math.ceil(n.length/r):n.length}else return 0},this._keyExtractor=(n,r)=>{var i,s=Qo(this.props.numColumns),o=(i=this.props.keyExtractor)!==null&&i!==void 0?i:NS;return s>1?(ge(Array.isArray(n),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",s),n.map((a,l)=>o(a,r*s+l)).join(":")):o(n,r)},this._renderer=(n,r,i,s,o)=>{var a=Qo(s),l=c=>n?I.createElement(n,c):r?r(c):null,u=c=>{if(a>1){var d=c.item,f=c.index;return ge(Array.isArray(d),"Expected array of items with numColumns > 1"),I.createElement(X,{style:[eW.row,i]},d.map((p,g)=>{var S=l({item:p,index:f*a+g,separators:c.separators});return S!=null?I.createElement(I.Fragment,{key:g},S):null}))}else return l(c)};return n?{ListItemComponent:u}:{renderItem:u}},this._memoizedRenderer=X9(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(n=>({viewabilityConfig:n.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(n.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){ge(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),ge(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),ge(!n9(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),ge(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var n=e.getItem,r=e.getItemCount,i=e.horizontal,s=e.columnWrapperStyle,o=e.onViewableItemsChanged,a=e.viewabilityConfigCallbackPairs,l=Qo(this.props.numColumns);ge(!n&&!r,"FlatList does not support custom data formats."),l>1?ge(!i,"numColumns does not support horizontal."):ge(!s,"columnWrapperStyle not supported for single column lists"),ge(!(o&&a),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,n){var r,i=Qo(this.props.numColumns),s=(r=this.props.keyExtractor)!==null&&r!==void 0?r:NS;n.item.forEach((o,a)=>{ge(n.index!=null,"Missing index!");var l=n.index*i+a;e.push(ye(ye({},n),{},{item:o,key:s(o,l),index:l}))})}_createOnViewableItemsChanged(e){return n=>{var r=Qo(this.props.numColumns);if(e)if(r>1){var i=[],s=[];n.viewableItems.forEach(o=>this._pushMultiColumnViewable(s,o)),n.changed.forEach(o=>this._pushMultiColumnViewable(i,o)),e({viewableItems:s,changed:i})}else e(n)}}render(){var e=this.props,n=e.numColumns,r=e.columnWrapperStyle,i=e.removeClippedSubviews,s=e.strictMode,o=s===void 0?!1:s,a=On(e,Q9),l=o?this._memoizedRenderer:this._renderer;return I.createElement(lr,cn({},a,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:Y9(i)},l(this.props.ListItemComponent,this.props.renderItem,r,n,this.props.extraData)))}}var eW=Ae.create({row:{flexDirection:"row"}}),tW=[];function WM(t){return tW[t-1]}var nW=/^data:/;class Wn{static has(e){var n=Wn._entries,r=nW.test(e);return r||!!n[e]}static add(e){var n=Wn._entries,r=Date.now();n[e]?(n[e].lastUsedTimestamp=r,n[e].refCount+=1):n[e]={lastUsedTimestamp:r,refCount:1}}static remove(e){var n=Wn._entries;n[e]&&(n[e].refCount-=1),Wn._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var e=Wn._entries,n=Object.keys(e);if(n.length+1>Wn._maximumEntries){var r,i;n.forEach(s=>{var o=e[s];(!i||o.lastUsedTimestamp<i.lastUsedTimestamp)&&o.refCount===0&&(r=s,i=o)}),r&&delete e[r]}}}Wn._maximumEntries=256;Wn._entries={};var w_=0,wp={},ui={abort(t){var e=wp[""+t];e&&(e.onerror=null,e.onload=null,e=null,delete wp[""+t])},getSize(t,e,n){var r=!1,i=setInterval(o,16),s=ui.load(t,o,a);function o(){var l=wp[""+s];if(l){var u=l.naturalHeight,c=l.naturalWidth;u&&c&&(e(c,u),r=!0)}r&&(ui.abort(s),clearInterval(i))}function a(){typeof n=="function"&&n(),ui.abort(s),clearInterval(i)}},has(t){return Wn.has(t)},load(t,e,n){w_+=1;var r=new window.Image;return r.onerror=n,r.onload=i=>{var s=()=>e({nativeEvent:i});typeof r.decode=="function"?r.decode().then(s,s):setTimeout(s,0)},r.src=t,wp[""+w_]=r,w_},prefetch(t){return new Promise((e,n)=>{ui.load(t,()=>{Wn.add(t),Wn.remove(t),e()},n)})},queryCache(t){var e={};return t.forEach(n=>{Wn.has(n)&&(e[n]="disk/memory")}),Promise.resolve(e)}};class Mh{static get(){return pg.get("window").scale}static getFontScale(){return pg.get("window").fontScale||Mh.get()}static getPixelSizeForLayoutSize(e){return Math.round(e*Mh.get())}static roundToNearestPixel(e){var n=Mh.get();return Math.round(e*n)/n}}var rW=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],iW="ERRORED",S_="LOADED",_x="LOADING",sW="IDLE",oW=0,aW=/^(data:image\/svg\+xml;utf8,)(.*)/;function lW(t,e){return t&&e!=null?I.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},I.createElement("defs",null,I.createElement("filter",{id:"tint-"+e,suppressHydrationWarning:!0},I.createElement("feFlood",{floodColor:""+t,key:t}),I.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function uW(t,e,n,r){var i=Ae.flatten(t),s=i.filter,o=i.resizeMode,a=i.shadowOffset,l=i.tintColor;i.resizeMode,i.tintColor;var u=[],c=null;if(s&&u.push(s),e&&u.push("blur("+e+"px)"),a){var d=EM(i);d&&u.push("drop-shadow("+d+")")}return(r||l)&&n!=null&&u.push("url(#tint-"+n+")"),u.length>0&&(c=u.join(" ")),[o,c,l]}function cW(t){if(typeof t=="number"){var e=WM(t),n=e.height,r=e.width;return{height:n,width:r}}else if(t!=null&&!Array.isArray(t)&&typeof t=="object"){var i=t.height,s=t.width;return{height:i,width:s}}}function E_(t){var e=null;if(typeof t=="number"){var n=WM(t);if(n==null)throw new Error('Image: asset with ID "'+t+'" could not be found. Please check the image source or packager.');var r=n.scales[0];if(n.scales.length>1){var i=Mh.get();r=n.scales.reduce((c,d)=>Math.abs(d-i)<Math.abs(c-i)?d:c)}var s=r!==1?"@"+r+"x":"";e=n?n.httpServerLocation+"/"+n.name+s+"."+n.type:""}else typeof t=="string"?e=t:t&&typeof t.uri=="string"&&(e=t.uri);if(e){var o=e.match(aW);if(o){var a=o[1],l=o[2],u=encodeURIComponent(l);return""+a+u}}return e}var HM=I.forwardRef((t,e)=>{var n=t["aria-label"],r=t.accessibilityLabel,i=t.blurRadius,s=t.defaultSource,o=t.draggable,a=t.onError,l=t.onLayout,u=t.onLoad,c=t.onLoadEnd,d=t.onLoadStart,f=t.pointerEvents,p=t.source,g=t.style,S=On(t,rW),T=n||r,v=I.useState(()=>{var Ke=E_(p);if(Ke!=null){var Nt=ui.has(Ke);if(Nt)return S_}return sW}),y=v[0],_=v[1],C=I.useState({}),O=C[0],D=C[1],b=I.useContext(fg),E=I.useRef(null),R=I.useRef(oW++),A=I.useRef(null),x=y===S_||y===_x&&s==null,N=uW(g,i,R.current,t.tintColor),k=N[0],de=N[1],pe=N[2],je=t.resizeMode||k||"cover",Ce=t.tintColor||pe,U=x?p:s,Y=E_(U),ie=cW(U),we=Y?'url("'+Y+'")':null,Pe=lt(),hn=Y?Yu("img",{alt:T||"",style:zc.accessibilityImage$raw,draggable:o||!1,ref:E,src:Y}):null;function lt(){if(E.current!=null&&(je==="center"||je==="repeat")){var Ke=E.current,Nt=Ke.naturalHeight,Mn=Ke.naturalWidth,xi=O.height,ms=O.width;if(Nt&&Mn&&xi&&ms){var Sr=Math.min(1,ms/Mn,xi/Nt),Hr=Math.ceil(Sr*Mn),ir=Math.ceil(Sr*Nt);return Hr+"px "+ir+"px"}}}function zt(Ke){if(je==="center"||je==="repeat"||l){var Nt=Ke.nativeEvent.layout;l&&l(Ke),D(Nt)}}var gt=E_(p);return I.useEffect(()=>{Ke(),gt!=null&&(_(_x),d&&d(),A.current=ui.load(gt,function(Mn){_(S_),u&&u(Mn),c&&c()},function(){_(iW),a&&a({nativeEvent:{error:"Failed to load resource "+gt}}),c&&c()}));function Ke(){A.current!=null&&(ui.abort(A.current),A.current=null)}return Ke},[gt,A,_,a,u,c,d]),I.createElement(X,cn({},S,{"aria-label":T,onLayout:zt,pointerEvents:f,ref:e,style:[zc.root,b&&zc.inline,ie,g,zc.undo,{boxShadow:null}]}),I.createElement(X,{style:[zc.image,hW[je],{backgroundImage:we,filter:de},Pe!=null&&{backgroundSize:Pe}],suppressHydrationWarning:!0}),hn,lW(Ce,R.current))});HM.displayName="Image";var bi=HM;bi.getSize=function(t,e,n){ui.getSize(t,e,n)};bi.prefetch=function(t){return ui.prefetch(t)};bi.queryCache=function(t){return ui.queryCache(t)};var zc=Ae.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:ye(ye({},Ae.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:ye(ye({},Ae.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),hW=Ae.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}}),dW=["hrefAttrs","numberOfLines","onClick","onLayout","onPress","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture","selectable"],fW=Object.assign({},cT,hT,dT,fT,pT,mT,gT,yT,{href:!0,lang:!0,pointerEvents:!0}),pW=t=>vT(t,fW),q=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.numberOfLines,i=t.onClick,s=t.onLayout,o=t.onPress,a=t.onMoveShouldSetResponder,l=t.onMoveShouldSetResponderCapture,u=t.onResponderEnd,c=t.onResponderGrant,d=t.onResponderMove,f=t.onResponderReject,p=t.onResponderRelease,g=t.onResponderStart,S=t.onResponderTerminate,T=t.onResponderTerminationRequest,v=t.onScrollShouldSetResponder,y=t.onScrollShouldSetResponderCapture,_=t.onSelectionChangeShouldSetResponder,C=t.onSelectionChangeShouldSetResponderCapture,O=t.onStartShouldSetResponder,D=t.onStartShouldSetResponderCapture,b=t.selectable,E=On(t,dW),R=I.useContext(fg),A=I.useRef(null),x=uT(),N=x.direction;_T(A,s),ET(A,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:l,onResponderEnd:u,onResponderGrant:c,onResponderMove:d,onResponderReject:f,onResponderRelease:p,onResponderStart:g,onResponderTerminate:S,onResponderTerminationRequest:T,onScrollShouldSetResponder:v,onScrollShouldSetResponderCapture:y,onSelectionChangeShouldSetResponder:_,onSelectionChangeShouldSetResponderCapture:C,onStartShouldSetResponder:O,onStartShouldSetResponderCapture:D});var k=I.useCallback(zt=>{i!=null?i(zt):o!=null&&(zt.stopPropagation(),o(zt))},[i,o]),de=R?"span":"div",pe=t.lang!=null?Dy(t.lang):null,je=t.dir||pe,Ce=je||N,U=pW(E);if(U.dir=je,R||(U.dir=je??"auto"),(i||o)&&(U.onClick=k),U.style=[r!=null&&r>1&&{WebkitLineClamp:r},R===!0?Yo.textHasAncestor$raw:Yo.text$raw,r===1&&Yo.textOneLine,r!=null&&r>1&&Yo.textMultiLine,t.style,b===!0&&Yo.selectable,b===!1&&Yo.notSelectable,o&&Yo.pressable],t.href!=null&&(de="a",n!=null)){var Y=n.download,ie=n.rel,we=n.target;Y!=null&&(U.download=Y),ie!=null&&(U.rel=ie),typeof we=="string"&&(U.target=we.charAt(0)!=="_"?"_"+we:we)}var Pe=wT(U),hn=Jd(A,Pe,e);U.ref=hn;var lt=Yu(de,U,{writingDirection:Ce});return R?lt:I.createElement(fg.Provider,{value:!0},lt)});q.displayName="Text";var wx={backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",listStyle:"none",margin:0,padding:0,position:"relative",textAlign:"start",textDecoration:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},Yo=Ae.create({text$raw:wx,textHasAncestor$raw:ye(ye({},wx),{},{color:"inherit",font:"inherit",textAlign:"inherit",whiteSpace:"inherit"}),textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}}),mW=["animating","color","hidesWhenStopped","size","style"],Sx=t=>I.createElement("circle",{cx:"16",cy:"16",fill:"none",r:"14",strokeWidth:"4",style:t}),Zd=I.forwardRef((t,e)=>{var n=t.animating,r=n===void 0?!0:n,i=t.color,s=i===void 0?"#1976D2":i,o=t.hidesWhenStopped,a=o===void 0?!0:o,l=t.size,u=l===void 0?"small":l,c=t.style,d=On(t,mW),f=I.createElement("svg",{height:"100%",viewBox:"0 0 32 32",width:"100%"},Sx({stroke:s,opacity:.2}),Sx({stroke:s,strokeDasharray:80,strokeDashoffset:60}));return I.createElement(X,cn({},d,{"aria-valuemax":1,"aria-valuemin":0,ref:e,role:"progressbar",style:[Sp.container,c]}),I.createElement(X,{children:f,style:[typeof u=="number"?{height:u,width:u}:gW[u],Sp.animation,!r&&Sp.animationPause,!r&&a&&Sp.hidesWhenStopped]}))});Zd.displayName="ActivityIndicator";var Sp=Ae.create({container:{alignItems:"center",justifyContent:"center"},hidesWhenStopped:{visibility:"hidden"},animation:{animationDuration:"0.75s",animationKeyframes:[{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}],animationTimingFunction:"linear",animationIterationCount:"infinite"},animationPause:{animationPlayState:"paused"}}),gW=Ae.create({small:{width:20,height:20},large:{width:36,height:36}}),Ex="DELAY",Pr="ERROR",Tx="LONG_PRESS_DETECTED",pn="NOT_RESPONDER",Cu="RESPONDER_ACTIVE_LONG_PRESS_START",Ny="RESPONDER_ACTIVE_PRESS_START",LS="RESPONDER_INACTIVE_PRESS_START",yW="RESPONDER_GRANT",am="RESPONDER_RELEASE",KM="RESPONDER_TERMINATED",bx=Object.freeze({NOT_RESPONDER:{DELAY:Pr,RESPONDER_GRANT:LS,RESPONDER_RELEASE:Pr,RESPONDER_TERMINATED:Pr,LONG_PRESS_DETECTED:Pr},RESPONDER_INACTIVE_PRESS_START:{DELAY:Ny,RESPONDER_GRANT:Pr,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Pr},RESPONDER_ACTIVE_PRESS_START:{DELAY:Pr,RESPONDER_GRANT:Pr,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Cu},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:Pr,RESPONDER_GRANT:Pr,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Cu},ERROR:{DELAY:pn,RESPONDER_GRANT:LS,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:pn}}),qM=t=>t.getAttribute("role"),VS=t=>t.tagName.toLowerCase(),Ix=t=>t===Ny||t===Cu,lm=t=>qM(t)==="button",Rx=t=>t===LS||t===Ny||t===Cu,vW=t=>t===KM||t===am,Cx=t=>{var e=t.key,n=t.target,r=e===" "||e==="Spacebar",i=VS(n)==="button"||lm(n);return e==="Enter"||r&&i},_W=450,wW=50;class SW{constructor(e){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=pn,this._responderElement=null,this.configure(e)}configure(e){this._config=e}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var e=(i,s)=>{i.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=pn,this._isPointerTouch=i.nativeEvent.type==="touchstart",this._receiveSignal(yW,i);var o=T_(this._config.delayPressStart,0,wW);s!==!1&&o>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(Ex,i)},o):this._receiveSignal(Ex,i);var a=T_(this._config.delayLongPress,10,_W);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(i)},a+o)},n=i=>{this._receiveSignal(am,i)},r=i=>{var s=this._config.onPress,o=i.target;if(this._touchState!==pn&&Cx(i)){n(i),document.removeEventListener("keyup",r);var a=o.getAttribute("role"),l=VS(o),u=a==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea",c=this._responderElement===o;s!=null&&!u&&c&&s(i),this._responderElement=null}};return{onStartShouldSetResponder:i=>{var s=this._config.disabled;return s&&lm(i.currentTarget)&&i.stopPropagation(),s==null?!0:!s},onKeyDown:i=>{var s=this._config.disabled,o=i.key,a=i.target;if(!s&&Cx(i)){this._touchState===pn&&(e(i,!1),this._responderElement=a,document.addEventListener("keyup",r));var l=o===" "||o==="Spacebar",u=qM(a),c=u==="button"||u==="menuitem";l&&c&&VS(a)!=="button"&&i.preventDefault(),i.stopPropagation()}},onResponderGrant:i=>e(i),onResponderMove:i=>{this._config.onPressMove!=null&&this._config.onPressMove(i);var s=xx(i);if(this._touchActivatePosition!=null){var o=this._touchActivatePosition.pageX-s.pageX,a=this._touchActivatePosition.pageY-s.pageY;Math.hypot(o,a)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:i=>n(i),onResponderTerminate:i=>{i.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(KM,i)},onResponderTerminationRequest:i=>{var s=this._config,o=s.cancelable,a=s.disabled,l=s.onLongPress;return!a&&l!=null&&this._isPointerTouch&&i.nativeEvent.type==="contextmenu"?!1:o??!0},onClick:i=>{var s=this._config,o=s.disabled,a=s.onPress;o?lm(i.currentTarget)&&i.stopPropagation():(i.stopPropagation(),this._longPressDispatched||this._selectionTerminated?i.preventDefault():a!=null&&i.altKey===!1&&a(i))},onContextMenu:i=>{var s=this._config,o=s.disabled,a=s.onLongPress;o?lm(i.currentTarget)&&i.stopPropagation():a!=null&&this._isPointerTouch&&!i.defaultPrevented&&(i.preventDefault(),i.stopPropagation())}}}_receiveSignal(e,n){var r=this._touchState,i=null;bx[r]!=null&&(i=bx[r][e]),!(this._touchState===pn&&e===am)&&(i==null||i===Pr?console.error("PressResponder: Invalid signal "+e+" for state "+r+" on responder"):r!==i&&(this._performTransitionSideEffects(r,i,e,n),this._touchState=i))}_performTransitionSideEffects(e,n,r,i){if(vW(r)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),Rx(e)&&r===Tx){var s=this._config.onLongPress;s!=null&&i.nativeEvent.key==null&&(s(i),this._longPressDispatched=!0)}var o=Ix(e),a=Ix(n);if(!o&&a?this._activate(i):o&&!a&&this._deactivate(i),Rx(e)&&r===am){var l=this._config,u=l.onLongPress,c=l.onPress;if(c!=null){var d=u!=null&&e===Cu;d||!a&&!o&&(this._activate(i),this._deactivate(i))}}this._cancelPressDelayTimeout()}_activate(e){var n=this._config,r=n.onPressChange,i=n.onPressStart,s=xx(e);this._touchActivatePosition={pageX:s.pageX,pageY:s.pageY},i!=null&&i(e),r!=null&&r(!0)}_deactivate(e){var n=this._config,r=n.onPressChange,i=n.onPressEnd;function s(){i!=null&&i(e),r!=null&&r(!1)}var o=T_(this._config.delayPressEnd);o>0?this._pressOutDelayTimeout=setTimeout(()=>{s()},o):s()}_handleLongPress(e){(this._touchState===Ny||this._touchState===Cu)&&this._receiveSignal(Tx,e)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function T_(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Math.max(e,t??n)}function xx(t){var e=t.nativeEvent,n=e.changedTouches,r=e.touches;return r!=null&&r.length>0?r[0]:n!=null&&n.length>0?n[0]:t.nativeEvent}function EW(t,e){var n=I.useRef(null);n.current==null&&(n.current=new SW(e));var r=n.current;return I.useEffect(()=>{r.configure(e)},[e,r]),I.useEffect(()=>()=>{r.reset()},[r]),I.useDebugValue(e),r.getEventHandlers()}var TW=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function bW(t,e){var n=t.activeOpacity,r=t.delayPressIn,i=t.delayPressOut,s=t.delayLongPress,o=t.disabled,a=t.focusable,l=t.onLongPress,u=t.onPress,c=t.onPressIn,d=t.onPressOut,f=t.rejectResponderTermination,p=t.style,g=On(t,TW),S=I.useRef(null),T=Jd(e,S),v=I.useState("0s"),y=v[0],_=v[1],C=I.useState(null),O=C[0],D=C[1],b=I.useCallback((N,k)=>{D(N),_(k?k/1e3+"s":"0s")},[D,_]),E=I.useCallback(N=>{b(n??.2,N)},[n,b]),R=I.useCallback(N=>{b(null,N)},[b]),A=I.useMemo(()=>({cancelable:!f,disabled:o,delayLongPress:s,delayPressStart:r,delayPressEnd:i,onLongPress:l,onPress:u,onPressStart(N){var k=N.dispatchConfig!=null?N.dispatchConfig.registrationName==="onResponderGrant":N.type==="keydown";E(k?0:150),c!=null&&c(N)},onPressEnd(N){R(250),d!=null&&d(N)}}),[s,r,i,o,l,u,c,d,f,E,R]),x=EW(S,A);return I.createElement(X,cn({},g,x,{accessibilityDisabled:o,focusable:!o&&a!==!1,pointerEvents:o?"box-none":void 0,ref:T,style:[Ax.root,!o&&Ax.actionable,p,O!=null&&{opacity:O},{transitionDuration:y}]}))}var Ax=Ae.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),be=I.memo(I.forwardRef(bW));be.displayName="TouchableOpacity";function IW(t){var e=t.children,n=I.useRef(null);if(Dt&&!n.current){var r=document.createElement("div");r&&document.body&&(document.body.appendChild(r),n.current=r)}return I.useEffect(()=>{if(Dt)return()=>{document.body&&n.current&&(document.body.removeChild(n.current),n.current=null)}},[]),n.current&&Dt?H$.createPortal(e,n.current):null}var Px=300;function RW(t,e){return t==="slide"?e?xW:AW:t==="fade"?e?PW:kW:e?_n.container:_n.hidden}function CW(t){var e=t.animationType,n=t.children,r=t.onDismiss,i=t.onShow,s=t.visible,o=I.useState(!1),a=o[0],l=o[1],u=I.useRef(!1),c=I.useRef(!1),d=e&&e!=="none",f=I.useCallback(p=>{p&&p.currentTarget!==p.target||(s?i&&i():l(!1))},[i,s]);return I.useEffect(()=>{c.current&&!a&&r&&r(),c.current=a},[a,r]),I.useEffect(()=>{s&&l(!0),s!==u.current&&!d&&f(),u.current=s},[d,s,f]),a||s?Yu("div",{style:a?RW(e,s):_n.hidden,onAnimationEnd:f,children:n}):null}var _n=Ae.create({container:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:9999},animatedIn:{animationDuration:Px+"ms",animationTimingFunction:"ease-in"},animatedOut:{pointerEvents:"none",animationDuration:Px+"ms",animationTimingFunction:"ease-out"},fadeIn:{opacity:1,animationKeyframes:{"0%":{opacity:0},"100%":{opacity:1}}},fadeOut:{opacity:0,animationKeyframes:{"0%":{opacity:1},"100%":{opacity:0}}},slideIn:{transform:"translateY(0%)",animationKeyframes:{"0%":{transform:"translateY(100%)"},"100%":{transform:"translateY(0%)"}}},slideOut:{transform:"translateY(100%)",animationKeyframes:{"0%":{transform:"translateY(0%)"},"100%":{transform:"translateY(100%)"}}},hidden:{opacity:0}}),xW=[_n.container,_n.animatedIn,_n.slideIn],AW=[_n.container,_n.animatedOut,_n.slideOut],PW=[_n.container,_n.animatedIn,_n.fadeIn],kW=[_n.container,_n.animatedOut,_n.fadeOut],DW=["active","children","onRequestClose","transparent"],OW=I.forwardRef((t,e)=>{var n=t.active,r=t.children,i=t.onRequestClose,s=t.transparent,o=On(t,DW);I.useEffect(()=>{if(Dt){var l=u=>{n&&u.key==="Escape"&&(u.stopPropagation(),i&&i())};return document.addEventListener("keyup",l,!1),()=>document.removeEventListener("keyup",l,!1)}},[n,i]);var a=I.useMemo(()=>[Ep.modal,s?Ep.modalTransparent:Ep.modalOpaque],[s]);return I.createElement(X,cn({},o,{"aria-modal":!0,ref:e,role:n?"dialog":null,style:a}),I.createElement(X,{style:Ep.container},r))}),Ep=Ae.create({modal:{position:"fixed",top:0,right:0,bottom:0,left:0},modalTransparent:{backgroundColor:"transparent"},modalOpaque:{backgroundColor:"white"},container:{top:0,flex:1}}),kx=()=>Yu("div",{role:"none",tabIndex:0,style:NW.focusBracket});function GM(t){if(!Dt)return!1;try{t.focus()}catch{}return document.activeElement===t}function XM(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(GM(n)||XM(n))return!0}return!1}function QM(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(GM(n)||QM(n))return!0}return!1}var MW=t=>{var e=t.active,n=t.children,r=I.useRef(),i=I.useRef({trapFocusInProgress:!1,lastFocusedElement:null});return I.useEffect(()=>{if(Dt){var s=()=>{if(!(r.current==null||i.current.trapFocusInProgress||!e)){try{if(i.current.trapFocusInProgress=!0,document.activeElement instanceof Node&&!r.current.contains(document.activeElement)){var o=XM(r.current);i.current.lastFocusedElement===document.activeElement&&(o=QM(r.current)),!o&&r.current!=null&&document.activeElement&&qi.focus(r.current)}}finally{i.current.trapFocusInProgress=!1}i.current.lastFocusedElement=document.activeElement}};return s(),document.addEventListener("focus",s,!0),()=>document.removeEventListener("focus",s,!0)}},[e]),I.useEffect(function(){if(Dt){var s=document.activeElement;return function(){s&&document.contains(s)&&qi.focus(s)}}},[]),I.createElement(I.Fragment,null,I.createElement(kx,null),I.createElement(X,{ref:r},n),I.createElement(kx,null))},NW=Ae.create({focusBracket:{outlineStyle:"none"}}),LW=["animationType","children","onDismiss","onRequestClose","onShow","transparent","visible"],VW=0,ya=[],fu={};function YM(){if(ya.length!==0){var t=ya[ya.length-1];ya.forEach(e=>{e in fu&&fu[e](e===t)})}}function FS(t){t in fu&&(fu[t](!1),delete fu[t]);var e=ya.indexOf(t);e!==-1&&(ya.splice(e,1),YM())}function FW(t,e){FS(t),ya.push(t),fu[t]=e,YM()}var Sd=I.forwardRef((t,e)=>{var n=t.animationType,r=t.children,i=t.onDismiss,s=t.onRequestClose,o=t.onShow,a=t.transparent,l=t.visible,u=l===void 0?!0:l,c=On(t,LW),d=I.useMemo(()=>VW++,[]),f=I.useState(!1),p=f[0],g=f[1],S=I.useCallback(()=>{FS(d),i&&i()},[d,i]),T=I.useCallback(()=>{FW(d,g),o&&o()},[d,o]);return I.useEffect(()=>()=>FS(d),[d]),I.createElement(IW,null,I.createElement(CW,{animationType:n,onDismiss:S,onShow:T,visible:u},I.createElement(MW,{active:p},I.createElement(OW,cn({},c,{active:p,onRequestClose:s,ref:e,transparent:a}),r))))}),BW=(t,e)=>{var n=t.selectionEnd,r=t.selectionStart,i=e.start,s=e.end;return i!==r||s!==n},Dx=(t,e)=>{if(BW(t,e)){var n=e.start,r=e.end;try{t.setSelectionRange(n,r||n)}catch{}}},jW=Object.assign({},cT,hT,dT,fT,pT,mT,gT,yT,{autoCapitalize:!0,autoComplete:!0,autoCorrect:!0,autoFocus:!0,defaultValue:!0,disabled:!0,lang:!0,maxLength:!0,onChange:!0,onScroll:!0,placeholder:!0,pointerEvents:!0,readOnly:!0,rows:!0,spellCheck:!0,value:!0,type:!0}),UW=t=>vT(t,jW);function $W(t){return t.isComposing||t.keyCode===229}var b_=null,Qn=I.forwardRef((t,e)=>{var n=t.autoCapitalize,r=n===void 0?"sentences":n,i=t.autoComplete,s=t.autoCompleteType,o=t.autoCorrect,a=o===void 0?!0:o,l=t.blurOnSubmit,u=t.caretHidden,c=t.clearTextOnFocus,d=t.dir,f=t.editable,p=t.enterKeyHint,g=t.inputMode,S=t.keyboardType,T=t.multiline,v=T===void 0?!1:T,y=t.numberOfLines,_=t.onBlur,C=t.onChange,O=t.onChangeText,D=t.onContentSizeChange,b=t.onFocus,E=t.onKeyPress,R=t.onLayout,A=t.onMoveShouldSetResponder,x=t.onMoveShouldSetResponderCapture,N=t.onResponderEnd,k=t.onResponderGrant,de=t.onResponderMove,pe=t.onResponderReject,je=t.onResponderRelease,Ce=t.onResponderStart,U=t.onResponderTerminate,Y=t.onResponderTerminationRequest,ie=t.onScrollShouldSetResponder,we=t.onScrollShouldSetResponderCapture,Pe=t.onSelectionChange,hn=t.onSelectionChangeShouldSetResponder,lt=t.onSelectionChangeShouldSetResponderCapture,zt=t.onStartShouldSetResponder,gt=t.onStartShouldSetResponderCapture,Ke=t.onSubmitEditing,Nt=t.placeholderTextColor,Mn=t.readOnly,xi=Mn===void 0?!1:Mn,ms=t.returnKeyType,Sr=t.rows,Hr=t.secureTextEntry,ir=Hr===void 0?!1:Hr,Lo=t.selection,gs=t.selectTextOnFocus,Vo=t.showSoftInputOnFocus,ys=t.spellCheck,De,et;if(g!=null)et=g,g==="email"?De="email":g==="tel"?De="tel":g==="search"?De="search":g==="url"?De="url":De="text";else if(S!=null)switch(S){case"email-address":De="email";break;case"number-pad":case"numeric":et="numeric";break;case"decimal-pad":et="decimal";break;case"phone-pad":De="tel";break;case"search":case"web-search":De="search";break;case"url":De="url";break;default:De="text"}ir&&(De="password");var Nn=I.useRef({height:null,width:null}),sr=I.useRef(null),vs=I.useRef(null),Fo=I.useRef(!1);I.useEffect(()=>{sr.current&&vs.current&&Dx(sr.current,vs.current),Fo.current=ir},[ir]);var Er=I.useCallback(ee=>{if(v&&D&&ee!=null){var Qe=ee.scrollHeight,Lt=ee.scrollWidth;(Qe!==Nn.current.height||Lt!==Nn.current.width)&&(Nn.current.height=Qe,Nn.current.width=Lt,D({nativeEvent:{contentSize:{height:Nn.current.height,width:Nn.current.width}}}))}},[v,D]),Bo=I.useMemo(()=>ee=>{ee!=null&&(ee.clear=function(){ee!=null&&(ee.value="")},ee.isFocused=function(){return ee!=null&&$i.currentlyFocusedField()===ee},Er(ee))},[Er]);function rl(ee){$i._currentlyFocusedNode=null,_&&(ee.nativeEvent.text=ee.target.value,_(ee))}function _s(ee){var Qe=ee.target,Lt=Qe.value;ee.nativeEvent.text=Lt,Er(Qe),C&&C(ee),O&&O(Lt)}function pc(ee){var Qe=ee.target;b&&(ee.nativeEvent.text=Qe.value,b(ee)),Qe!=null&&($i._currentlyFocusedNode=Qe,c&&(Qe.value=""),gs&&(b_!=null&&clearTimeout(b_),b_=setTimeout(()=>{Qe!=null&&document.activeElement===Qe&&Qe.select()},0)))}function il(ee){var Qe=ee.target;ee.stopPropagation();var Lt=!v,Tr=l??Lt,qr=ee.nativeEvent,ul=$W(qr);E&&E(ee),ee.key==="Enter"&&!ee.shiftKey&&!ul&&!ee.isDefaultPrevented()&&((l||!v)&&Ke&&(ee.preventDefault(),qr.text=ee.target.value,Ke(ee)),Tr&&Qe!=null&&setTimeout(()=>Qe.blur(),0))}function sl(ee){try{var Qe=ee.target,Lt=Qe.selectionStart,Tr=Qe.selectionEnd,qr={start:Lt,end:Tr};Pe&&(ee.nativeEvent.selection=qr,ee.nativeEvent.text=ee.target.value,Pe(ee)),Fo.current===ir&&(vs.current=qr)}catch{}}AS(()=>{var ee=sr.current;ee!=null&&Lo!=null&&Dx(ee,Lo),document.activeElement===ee&&($i._currentlyFocusedNode=ee)},[sr,Lo]);var jo=v?"textarea":"input";_T(sr,R),ET(sr,{onMoveShouldSetResponder:A,onMoveShouldSetResponderCapture:x,onResponderEnd:N,onResponderGrant:k,onResponderMove:de,onResponderReject:pe,onResponderRelease:je,onResponderStart:Ce,onResponderTerminate:U,onResponderTerminationRequest:Y,onScrollShouldSetResponder:ie,onScrollShouldSetResponderCapture:we,onSelectionChangeShouldSetResponder:hn,onSelectionChangeShouldSetResponderCapture:lt,onStartShouldSetResponder:zt,onStartShouldSetResponderCapture:gt});var Ai=uT(),ws=Ai.direction,Ue=UW(t);Ue.autoCapitalize=r,Ue.autoComplete=i||s||"on",Ue.autoCorrect=a?"on":"off",Ue.dir=d!==void 0?d:"auto",Ue.enterKeyHint=p||ms,Ue.inputMode=et,Ue.onBlur=rl,Ue.onChange=_s,Ue.onFocus=pc,Ue.onKeyDown=il,Ue.onSelect=sl,Ue.readOnly=xi===!0||f===!1,Ue.rows=v?Sr??y:1,Ue.spellCheck=ys??a,Ue.style=[{"--placeholderTextColor":Nt},I_.textinput$raw,I_.placeholder,t.style,u&&I_.caretHidden],Ue.type=v?void 0:De,Ue.virtualkeyboardpolicy=Vo===!1?"manual":"auto";var or=wT(Ue),ol=Jd(sr,or,Bo,e);Ue.ref=ol;var Pi=t.lang!=null?Dy(t.lang):null,al=t.dir||Pi,Kr=al||ws,ll=Yu(jo,Ue,{writingDirection:Kr});return ll});Qn.displayName="TextInput";Qn.State=$i;var I_=Ae.create({textinput$raw:{MozAppearance:"textfield",WebkitAppearance:"none",backgroundColor:"transparent",border:"0 solid black",borderRadius:0,boxSizing:"border-box",font:"14px System",margin:0,padding:0,resize:"none"},placeholder:{placeholderTextColor:"var(--placeholderTextColor)"},caretHidden:{caretColor:"transparent"}});/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ox="popstate";function zW(t={}){function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=el(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),BS("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:Ed(s))}function r(i,s){wr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return HW(e,n,r,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WW(){return Math.random().toString(36).substring(2,10)}function Mx(t,e){return{usr:t.state,key:t.key,idx:e}}function BS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?el(e):e,state:n,key:e&&e.key||r||WW()}}function Ed({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function el(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function HW(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let T=c(),v=T==null?null:T-u;u=T,l&&l({action:a,location:S.location,delta:v})}function f(T,v){a="PUSH";let y=BS(S.location,T,v);n&&n(y,T),u=c()+1;let _=Mx(y,u),C=S.createHref(y);try{o.pushState(_,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(C)}s&&l&&l({action:a,location:S.location,delta:1})}function p(T,v){a="REPLACE";let y=BS(S.location,T,v);n&&n(y,T),u=c();let _=Mx(y,u),C=S.createHref(y);o.replaceState(_,"",C),s&&l&&l({action:a,location:S.location,delta:0})}function g(T){return KW(T)}let S={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ox,d),l=T,()=>{i.removeEventListener(Ox,d),l=null}},createHref(T){return e(i,T)},createURL:g,encodeLocation(T){let v=g(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(T){return o.go(T)}};return S}function KW(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),st(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ed(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function JM(t,e,n="/"){return qW(t,e,n,!1)}function qW(t,e,n,r){let i=typeof e=="string"?el(e):e,s=es(i.pathname||"/",n);if(s==null)return null;let o=ZM(t);GW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=s8(s);a=r8(o[l],u,r)}return a}function ZM(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;st(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=Gi([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(st(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),ZM(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:t8(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of eN(o.path))s(o,a,!0,u)}),e}function eN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=eN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function GW(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:n8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var XW=/^:[\w-]+$/,QW=3,YW=2,JW=1,ZW=10,e8=-2,Nx=t=>t==="*";function t8(t,e){let n=t.split("/"),r=n.length;return n.some(Nx)&&(r+=e8),e&&(r+=YW),n.filter(i=>!Nx(i)).reduce((i,s)=>i+(XW.test(s)?QW:s===""?JW:ZW),r)}function n8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function r8(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=wg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=wg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Gi([s,d.pathname]),pathnameBase:c8(Gi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Gi([s,d.pathnameBase]))}return o}function wg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=i8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function i8(t,e=!1,n=!0){wr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function s8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function es(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var o8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a8=t=>o8.test(t);function l8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?el(t):t,s;if(n)if(a8(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),wr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=Lx(n.substring(1),"/"):s=Lx(n,e)}else s=e;return{pathname:s,search:h8(r),hash:d8(i)}}function Lx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function R_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tN(t){let e=u8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function nN(t,e,n,r=!1){let i;typeof t=="string"?i=el(t):(i={...t},st(!i.pathname||!i.pathname.includes("?"),R_("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),R_("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),R_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=l8(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Gi=t=>t.join("/").replace(/\/\/+/g,"/"),c8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),h8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function f8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function p8(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rN=["POST","PUT","PATCH","DELETE"];new Set(rN);var m8=["GET",...rN];new Set(m8);var Ju=I.createContext(null);Ju.displayName="DataRouter";var Ly=I.createContext(null);Ly.displayName="DataRouterState";I.createContext(!1);var iN=I.createContext({isTransitioning:!1});iN.displayName="ViewTransition";var g8=I.createContext(new Map);g8.displayName="Fetchers";var y8=I.createContext(null);y8.displayName="Await";var Wr=I.createContext(null);Wr.displayName="Navigation";var ef=I.createContext(null);ef.displayName="Location";var cs=I.createContext({outlet:null,matches:[],isDataRoute:!1});cs.displayName="Route";var TT=I.createContext(null);TT.displayName="RouteError";function v8(t,{relative:e}={}){st(tf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(Wr),{hash:i,pathname:s,search:o}=nf(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Gi([n,s])),r.createHref({pathname:a,search:o,hash:i})}function tf(){return I.useContext(ef)!=null}function Ri(){return st(tf(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(ef).location}var sN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oN(t){I.useContext(Wr).static||I.useLayoutEffect(t)}function Zu(){let{isDataRoute:t}=I.useContext(cs);return t?k8():_8()}function _8(){st(tf(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(Ju),{basename:e,navigator:n}=I.useContext(Wr),{matches:r}=I.useContext(cs),{pathname:i}=Ri(),s=JSON.stringify(tN(r)),o=I.useRef(!1);return oN(()=>{o.current=!0}),I.useCallback((l,u={})=>{if(wr(o.current,sN),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=nN(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Gi([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}I.createContext(null);function nf(t,{relative:e}={}){let{matches:n}=I.useContext(cs),{pathname:r}=Ri(),i=JSON.stringify(tN(n));return I.useMemo(()=>nN(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function w8(t,e){return aN(t,e)}function aN(t,e,n,r,i){var y;st(tf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I.useContext(Wr),{matches:o}=I.useContext(cs),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let _=d&&d.path||"";lN(u,!d||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=Ri(),p;if(e){let _=typeof e=="string"?el(e):e;st(c==="/"||((y=_.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),p=_}else p=f;let g=p.pathname||"/",S=g;if(c!=="/"){let _=c.replace(/^\//,"").split("/");S="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let T=JM(t,{pathname:S});wr(d||T!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),wr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=I8(T&&T.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Gi([c,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Gi([c,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,i);return e&&v?I.createElement(ef.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function S8(){let t=P8(),e=f8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:s},"ErrorBoundary")," or"," ",I.createElement("code",{style:s},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,o)}var E8=I.createElement(S8,null),T8=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?I.createElement(cs.Provider,{value:this.props.routeContext},I.createElement(TT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function b8({routeContext:t,match:e,children:n}){let r=I.useContext(Ju);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(cs.Provider,{value:t},n)}function I8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);st(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&r?(c,d)=>{var f,p;r(c,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:p8(n.matches),errorInfo:d})}:void 0;return s.reduceRight((c,d,f)=>{let p,g=!1,S=null,T=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,S=d.route.errorElement||E8,a&&(l<0&&f===0?(lN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,T=null):l===f&&(g=!0,T=d.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,f+1)),y=()=>{let _;return p?_=S:g?_=T:d.route.Component?_=I.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,I.createElement(b8,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?I.createElement(T8,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):y()},null)}function bT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R8(t){let e=I.useContext(Ju);return st(e,bT(t)),e}function C8(t){let e=I.useContext(Ly);return st(e,bT(t)),e}function x8(t){let e=I.useContext(cs);return st(e,bT(t)),e}function IT(t){let e=x8(t),n=e.matches[e.matches.length-1];return st(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function A8(){return IT("useRouteId")}function P8(){var r;let t=I.useContext(TT),e=C8("useRouteError"),n=IT("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function k8(){let{router:t}=R8("useNavigate"),e=IT("useNavigate"),n=I.useRef(!1);return oN(()=>{n.current=!0}),I.useCallback(async(i,s={})=>{wr(n.current,sN),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Vx={};function lN(t,e,n){!e&&!Vx[t]&&(Vx[t]=!0,wr(!1,n))}I.memo(D8);function D8({routes:t,future:e,state:n,unstable_onError:r}){return aN(t,void 0,n,r,e)}function kl(t){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function O8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){st(!tf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=el(n));let{pathname:u="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,g=I.useMemo(()=>{let S=es(u,a);return S==null?null:{location:{pathname:S,search:c,hash:d,state:f,key:p},navigationType:r}},[a,u,c,d,f,p,r]);return wr(g!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:I.createElement(Wr.Provider,{value:l},I.createElement(ef.Provider,{children:e,value:g}))}function M8({children:t,location:e}){return w8(jS(t),e)}function jS(t,e=[]){let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,jS(r.props.children,s));return}st(r.type===kl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jS(r.props.children,s)),n.push(o)}),n}var um="get",cm="application/x-www-form-urlencoded";function Vy(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function N8(t){return Vy(t)&&t.tagName.toLowerCase()==="button"}function L8(t){return Vy(t)&&t.tagName.toLowerCase()==="form"}function V8(t){return Vy(t)&&t.tagName.toLowerCase()==="input"}function F8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function B8(t,e){return t.button===0&&(!e||e==="_self")&&!F8(t)}var Tp=null;function j8(){if(Tp===null)try{new FormData(document.createElement("form"),0),Tp=!1}catch{Tp=!0}return Tp}var U8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function C_(t){return t!=null&&!U8.has(t)?(wr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cm}"`),null):t}function $8(t,e){let n,r,i,s,o;if(L8(t)){let a=t.getAttribute("action");r=a?es(a,e):null,n=t.getAttribute("method")||um,i=C_(t.getAttribute("enctype"))||cm,s=new FormData(t)}else if(N8(t)||V8(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?es(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||um,i=C_(t.getAttribute("formenctype"))||C_(a.getAttribute("enctype"))||cm,s=new FormData(a,t),!j8()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(Vy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=um,r=null,i=cm,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function RT(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function z8(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&es(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function W8(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function H8(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function K8(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await W8(s,n);return o.links?o.links():[]}return[]}));return Q8(r.flat(1).filter(H8).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Fx(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function q8(t,e,{includeHydrateFallback:n}={}){return G8(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function G8(t){return[...new Set(t)]}function X8(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Q8(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(X8(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function uN(){let t=I.useContext(Ju);return RT(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Y8(){let t=I.useContext(Ly);return RT(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var CT=I.createContext(void 0);CT.displayName="FrameworkContext";function cN(){let t=I.useContext(CT);return RT(t,"You must render this element inside a <HydratedRouter> element"),t}function J8(t,e){let n=I.useContext(CT),[r,i]=I.useState(!1),[s,o]=I.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=I.useRef(null);I.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=v=>{v.forEach(y=>{o(y.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return f.current&&T.observe(f.current),()=>{T.disconnect()}}},[t]),I.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Wc(a,p),onBlur:Wc(l,g),onMouseEnter:Wc(u,p),onMouseLeave:Wc(c,g),onTouchStart:Wc(d,p)}]:[!1,f,{}]}function Wc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Z8({page:t,...e}){let{router:n}=uN(),r=I.useMemo(()=>JM(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?I.createElement(tH,{page:t,matches:r,...e}):null}function eH(t){let{manifest:e,routeModules:n}=cN(),[r,i]=I.useState([]);return I.useEffect(()=>{let s=!1;return K8(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function tH({page:t,matches:e,...n}){let r=Ri(),{manifest:i,routeModules:s}=cN(),{basename:o}=uN(),{loaderData:a,matches:l}=Y8(),u=I.useMemo(()=>Fx(t,e,l,i,r,"data"),[t,e,l,i,r]),c=I.useMemo(()=>Fx(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=I.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,S=!1;if(e.forEach(v=>{var _;let y=i.routes[v.route.id];!y||!y.hasLoader||(!u.some(C=>C.route.id===v.route.id)&&v.route.id in a&&((_=s[v.route.id])!=null&&_.shouldRevalidate)||y.hasClientLoader?S=!0:g.add(v.route.id))}),g.size===0)return[];let T=z8(t,o,"data");return S&&g.size>0&&T.searchParams.set("_routes",e.filter(v=>g.has(v.route.id)).map(v=>v.route.id).join(",")),[T.pathname+T.search]},[o,a,r,i,u,e,t,s]),f=I.useMemo(()=>q8(c,i),[c,i]),p=eH(c);return I.createElement(I.Fragment,null,d.map(g=>I.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>I.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:S})=>I.createElement("link",{key:g,nonce:n.nonce,...S})))}function nH(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hN&&(window.__reactRouterVersion="7.10.1")}catch{}function rH({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=I.useRef();i.current==null&&(i.current=zW({window:r,v5Compat:!0}));let s=i.current,[o,a]=I.useState({action:s.action,location:s.location}),l=I.useCallback(u=>{n===!1?a(u):I.startTransition(()=>a(u))},[n]);return I.useLayoutEffect(()=>s.listen(l),[s,l]),I.createElement(O8,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n===!0})}var dN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fN=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},p){let{basename:g,unstable_useTransitions:S}=I.useContext(Wr),T=typeof u=="string"&&dN.test(u),v,y=!1;if(typeof u=="string"&&T&&(v=u,hN))try{let A=new URL(window.location.href),x=u.startsWith("//")?new URL(A.protocol+u):new URL(u),N=es(x.pathname,g);x.origin===A.origin&&N!=null?u=N+x.search+x.hash:y=!0}catch{wr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=v8(u,{relative:i}),[C,O,D]=J8(r,f),b=aH(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d,unstable_useTransitions:S});function E(A){e&&e(A),A.defaultPrevented||b(A)}let R=I.createElement("a",{...f,...D,href:v||_,onClick:y||s?e:E,ref:nH(p,O),target:l,"data-discover":!T&&n==="render"?"true":void 0});return C&&!T?I.createElement(I.Fragment,null,R,I.createElement(Z8,{page:_})):R});fN.displayName="Link";var iH=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=nf(o,{relative:u.relative}),f=Ri(),p=I.useContext(Ly),{navigator:g,basename:S}=I.useContext(Wr),T=p!=null&&dH(d)&&a===!0,v=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,y=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(y=y.toLowerCase(),_=_?_.toLowerCase():null,v=v.toLowerCase()),_&&S&&(_=es(_,S)||_);const C=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=y===v||!i&&y.startsWith(v)&&y.charAt(C)==="/",D=_!=null&&(_===v||!i&&_.startsWith(v)&&_.charAt(v.length)==="/"),b={isActive:O,isPending:D,isTransitioning:T},E=O?e:void 0,R;typeof r=="function"?R=r(b):R=[r,O?"active":null,D?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(b):s;return I.createElement(fN,{...u,"aria-current":E,className:R,ref:c,style:A,to:o,viewTransition:a},typeof l=="function"?l(b):l)});iH.displayName="NavLink";var sH=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=um,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},p)=>{let{unstable_useTransitions:g}=I.useContext(Wr),S=cH(),T=hH(a,{relative:u}),v=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&dN.test(a),_=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,D=(O==null?void 0:O.getAttribute("formmethod"))||o,b=()=>S(O||C.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d});g&&n!==!1?I.startTransition(()=>b()):b()};return I.createElement("form",{ref:p,method:v,action:T,onSubmit:r?l:_,...f,"data-discover":!y&&t==="render"?"true":void 0})});sH.displayName="Form";function oH(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pN(t){let e=I.useContext(Ju);return st(e,oH(t)),e}function aH(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_useTransitions:a}={}){let l=Zu(),u=Ri(),c=nf(t,{relative:s});return I.useCallback(d=>{if(B8(d,e)){d.preventDefault();let f=n!==void 0?n:Ed(u)===Ed(c),p=()=>l(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o});a?I.startTransition(()=>p()):p()}},[u,l,c,n,r,e,t,i,s,o,a])}var lH=0,uH=()=>`__${String(++lH)}__`;function cH(){let{router:t}=pN("useSubmit"),{basename:e}=I.useContext(Wr),n=A8(),r=t.fetch,i=t.navigate;return I.useCallback(async(s,o={})=>{let{action:a,method:l,encType:u,formData:c,body:d}=$8(s,e);if(o.navigate===!1){let f=o.fetcherKey||uH();await r(f,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function hH(t,{relative:e}={}){let{basename:n}=I.useContext(Wr),r=I.useContext(cs);st(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...nf(t||".",{relative:e})},o=Ri();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Gi([n,s.pathname])),Ed(s)}function dH(t,{relative:e}={}){let n=I.useContext(iN);st(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=pN("useViewTransitionState"),i=nf(t,{relative:e});if(!n.isTransitioning)return!1;let s=es(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=es(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wg(i.pathname,o)!=null||wg(i.pathname,s)!=null}const fH=()=>{};var Bx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[c],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new mH;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gH=function(t){const e=mN(t);return gN.encodeByteArray(e,!0)},Sg=function(t){return gH(t).replace(/\./g,"")},yN=function(t){try{return gN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH=()=>vN().__FIREBASE_DEFAULTS__,vH=()=>{if(typeof process>"u"||typeof Bx>"u")return;const t=Bx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_H=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yN(t[1]);return e&&JSON.parse(e)},Fy=()=>{try{return fH()||yH()||vH()||_H()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_N=t=>{var e,n;return(n=(e=Fy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wH=t=>{const e=_N(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wN=()=>{var t;return(t=Fy())==null?void 0:t.config},SN=t=>{var e;return(e=Fy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Sg(JSON.stringify(n)),Sg(JSON.stringify(o)),""].join(".")}const Nh={};function TH(){const t={prod:[],emulator:[]};for(const e of Object.keys(Nh))Nh[e]?t.emulator.push(e):t.prod.push(e);return t}function bH(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jx=!1;function EN(t,e){if(typeof window>"u"||typeof document>"u"||!xo(window.location.host)||Nh[t]===e||Nh[t]||jx)return;Nh[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=TH().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{jx=!0,o()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=bH(r),p=n("text"),g=document.getElementById(p)||document.createElement("span"),S=n("learnmore"),T=document.getElementById(S)||document.createElement("a"),v=n("preprendIcon"),y=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;a(_),c(T,S);const C=u();l(y,v),_.append(y,g,T,C),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function TN(){var e;const t=(e=Fy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AH(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bN(){return!TN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IN(){return!TN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function RN(){try{return typeof indexedDB=="object"}catch{return!1}}function PH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="FirebaseError";class Ci extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kH,Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rf.prototype.create)}}class rf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?DH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ci(i,a,r)}}function DH(t,e){return t.replace(OH,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const OH=/\{\$([^}]+)}/g;function MH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ux(s)&&Ux(o)){if(!Fa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ux(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function oh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NH(t,e){const n=new LH(t,e);return n.subscribe.bind(n)}class LH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VH(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=x_),i.error===void 0&&(i.error=x_),i.complete===void 0&&(i.complete=x_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function x_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class vo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SH;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jH(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BH(t){return t===na?void 0:t}function jH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const $H={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},zH=Ee.INFO,WH={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},HH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WH[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AT{constructor(e){this.name=e,this._logLevel=zH,this._logHandler=HH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$H[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const KH=(t,e)=>e.some(n=>t instanceof n);let $x,zx;function qH(){return $x||($x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GH(){return zx||(zx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CN=new WeakMap,US=new WeakMap,xN=new WeakMap,A_=new WeakMap,PT=new WeakMap;function XH(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ho(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&CN.set(n,t)}).catch(()=>{}),PT.set(e,t),e}function QH(t){if(US.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});US.set(t,e)}let $S={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return US.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YH(t){$S=t($S)}function JH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(P_(this),e,...n);return xN.set(r,e.sort?e.sort():[e]),ho(r)}:GH().includes(t)?function(...e){return t.apply(P_(this),e),ho(CN.get(this))}:function(...e){return ho(t.apply(P_(this),e))}}function ZH(t){return typeof t=="function"?JH(t):(t instanceof IDBTransaction&&QH(t),KH(t,qH())?new Proxy(t,$S):t)}function ho(t){if(t instanceof IDBRequest)return XH(t);if(A_.has(t))return A_.get(t);const e=ZH(t);return e!==t&&(A_.set(t,e),PT.set(e,t)),e}const P_=t=>PT.get(t);function eK(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ho(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ho(o.result),l.oldVersion,l.newVersion,ho(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const tK=["get","getKey","getAll","getAllKeys","count"],nK=["put","add","delete","clear"],k_=new Map;function Wx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(k_.get(e))return k_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tK.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return k_.set(e,s),s}YH(t=>({...t,get:(e,n,r)=>Wx(e,n)||t.get(e,n,r),has:(e,n)=>!!Wx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zS="@firebase/app",Hx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new AT("@firebase/app"),sK="@firebase/app-compat",oK="@firebase/analytics-compat",aK="@firebase/analytics",lK="@firebase/app-check-compat",uK="@firebase/app-check",cK="@firebase/auth",hK="@firebase/auth-compat",dK="@firebase/database",fK="@firebase/data-connect",pK="@firebase/database-compat",mK="@firebase/functions",gK="@firebase/functions-compat",yK="@firebase/installations",vK="@firebase/installations-compat",_K="@firebase/messaging",wK="@firebase/messaging-compat",SK="@firebase/performance",EK="@firebase/performance-compat",TK="@firebase/remote-config",bK="@firebase/remote-config-compat",IK="@firebase/storage",RK="@firebase/storage-compat",CK="@firebase/firestore",xK="@firebase/ai",AK="@firebase/firestore-compat",PK="firebase",kK="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="[DEFAULT]",DK={[zS]:"fire-core",[sK]:"fire-core-compat",[aK]:"fire-analytics",[oK]:"fire-analytics-compat",[uK]:"fire-app-check",[lK]:"fire-app-check-compat",[cK]:"fire-auth",[hK]:"fire-auth-compat",[dK]:"fire-rtdb",[fK]:"fire-data-connect",[pK]:"fire-rtdb-compat",[mK]:"fire-fn",[gK]:"fire-fn-compat",[yK]:"fire-iid",[vK]:"fire-iid-compat",[_K]:"fire-fcm",[wK]:"fire-fcm-compat",[SK]:"fire-perf",[EK]:"fire-perf-compat",[TK]:"fire-rc",[bK]:"fire-rc-compat",[IK]:"fire-gcs",[RK]:"fire-gcs-compat",[CK]:"fire-fst",[AK]:"fire-fst-compat",[xK]:"fire-vertex","fire-js":"fire-js",[PK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map,OK=new Map,WS=new Map;function Kx(t,e){try{t.container.addComponent(e)}catch(n){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ba(t){const e=t.name;if(WS.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;WS.set(e,t);for(const n of Tg.values())Kx(n,t);for(const n of OK.values())Kx(n,t);return!0}function of(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function MK(t,e,n=Eg){of(t,e).clearInstance(n)}function Hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new rf("app","Firebase",NK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=kK;function AN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Eg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw fo.create("bad-app-name",{appName:String(i)});if(n||(n=wN()),!n)throw fo.create("no-options");const s=Tg.get(i);if(s){if(Fa(n,s.options)&&Fa(r,s.config))return s;throw fo.create("duplicate-app",{appName:i})}const o=new UH(i);for(const l of WS.values())o.addComponent(l);const a=new LK(n,r,o);return Tg.set(i,a),a}function PN(t=Eg){const e=Tg.get(t);if(!e&&t===Eg&&wN())return AN();if(!e)throw fo.create("no-app",{appName:t});return e}function gi(t,e,n){let r=DK[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(o.join(" "));return}Ba(new vo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK="firebase-heartbeat-database",FK=1,Td="firebase-heartbeat-store";let D_=null;function kN(){return D_||(D_=eK(VK,FK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Td)}catch(n){console.warn(n)}}}}).catch(t=>{throw fo.create("idb-open",{originalErrorMessage:t.message})})),D_}async function BK(t){try{const n=(await kN()).transaction(Td),r=await n.objectStore(Td).get(DN(t));return await n.done,r}catch(e){if(e instanceof Ci)ts.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ts.warn(n.message)}}}async function qx(t,e){try{const r=(await kN()).transaction(Td,"readwrite");await r.objectStore(Td).put(e,DN(t)),await r.done}catch(n){if(n instanceof Ci)ts.warn(n.message);else{const r=fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ts.warn(r.message)}}}function DN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jK=1024,UK=30;class $K{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>UK){const o=HK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ts.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gx(),{heartbeatsToSend:r,unsentEntries:i}=zK(this._heartbeatsCache.heartbeats),s=Sg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ts.warn(n),""}}}function Gx(){return new Date().toISOString().substring(0,10)}function zK(t,e=jK){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Xx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RN()?PH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Xx(t){return Sg(JSON.stringify({version:2,heartbeats:t})).length}function HK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KK(t){Ba(new vo("platform-logger",e=>new rK(e),"PRIVATE")),Ba(new vo("heartbeat",e=>new $K(e),"PRIVATE")),gi(zS,Hx,t),gi(zS,Hx,"esm2020"),gi("fire-js","")}KK("");var qK="firebase",GK="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(qK,GK,"app");var Qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var po,ON;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,E){function R(){}R.prototype=E.prototype,b.F=E.prototype,b.prototype=new R,b.prototype.constructor=b,b.D=function(A,x,N){for(var k=Array(arguments.length-2),de=2;de<arguments.length;de++)k[de-2]=arguments[de];return E.prototype[x].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,E,R){R||(R=0);const A=Array(16);if(typeof E=="string")for(var x=0;x<16;++x)A[x]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(x=0;x<16;++x)A[x]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=b.g[0],R=b.g[1],x=b.g[2];let N=b.g[3],k;k=E+(N^R&(x^N))+A[0]+3614090360&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(x^E&(R^x))+A[1]+3905402710&4294967295,N=E+(k<<12&4294967295|k>>>20),k=x+(R^N&(E^R))+A[2]+606105819&4294967295,x=N+(k<<17&4294967295|k>>>15),k=R+(E^x&(N^E))+A[3]+3250441966&4294967295,R=x+(k<<22&4294967295|k>>>10),k=E+(N^R&(x^N))+A[4]+4118548399&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(x^E&(R^x))+A[5]+1200080426&4294967295,N=E+(k<<12&4294967295|k>>>20),k=x+(R^N&(E^R))+A[6]+2821735955&4294967295,x=N+(k<<17&4294967295|k>>>15),k=R+(E^x&(N^E))+A[7]+4249261313&4294967295,R=x+(k<<22&4294967295|k>>>10),k=E+(N^R&(x^N))+A[8]+1770035416&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(x^E&(R^x))+A[9]+2336552879&4294967295,N=E+(k<<12&4294967295|k>>>20),k=x+(R^N&(E^R))+A[10]+4294925233&4294967295,x=N+(k<<17&4294967295|k>>>15),k=R+(E^x&(N^E))+A[11]+2304563134&4294967295,R=x+(k<<22&4294967295|k>>>10),k=E+(N^R&(x^N))+A[12]+1804603682&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(x^E&(R^x))+A[13]+4254626195&4294967295,N=E+(k<<12&4294967295|k>>>20),k=x+(R^N&(E^R))+A[14]+2792965006&4294967295,x=N+(k<<17&4294967295|k>>>15),k=R+(E^x&(N^E))+A[15]+1236535329&4294967295,R=x+(k<<22&4294967295|k>>>10),k=E+(x^N&(R^x))+A[1]+4129170786&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^x&(E^R))+A[6]+3225465664&4294967295,N=E+(k<<9&4294967295|k>>>23),k=x+(E^R&(N^E))+A[11]+643717713&4294967295,x=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(x^N))+A[0]+3921069994&4294967295,R=x+(k<<20&4294967295|k>>>12),k=E+(x^N&(R^x))+A[5]+3593408605&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^x&(E^R))+A[10]+38016083&4294967295,N=E+(k<<9&4294967295|k>>>23),k=x+(E^R&(N^E))+A[15]+3634488961&4294967295,x=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(x^N))+A[4]+3889429448&4294967295,R=x+(k<<20&4294967295|k>>>12),k=E+(x^N&(R^x))+A[9]+568446438&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^x&(E^R))+A[14]+3275163606&4294967295,N=E+(k<<9&4294967295|k>>>23),k=x+(E^R&(N^E))+A[3]+4107603335&4294967295,x=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(x^N))+A[8]+1163531501&4294967295,R=x+(k<<20&4294967295|k>>>12),k=E+(x^N&(R^x))+A[13]+2850285829&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^x&(E^R))+A[2]+4243563512&4294967295,N=E+(k<<9&4294967295|k>>>23),k=x+(E^R&(N^E))+A[7]+1735328473&4294967295,x=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(x^N))+A[12]+2368359562&4294967295,R=x+(k<<20&4294967295|k>>>12),k=E+(R^x^N)+A[5]+4294588738&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^x)+A[8]+2272392833&4294967295,N=E+(k<<11&4294967295|k>>>21),k=x+(N^E^R)+A[11]+1839030562&4294967295,x=N+(k<<16&4294967295|k>>>16),k=R+(x^N^E)+A[14]+4259657740&4294967295,R=x+(k<<23&4294967295|k>>>9),k=E+(R^x^N)+A[1]+2763975236&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^x)+A[4]+1272893353&4294967295,N=E+(k<<11&4294967295|k>>>21),k=x+(N^E^R)+A[7]+4139469664&4294967295,x=N+(k<<16&4294967295|k>>>16),k=R+(x^N^E)+A[10]+3200236656&4294967295,R=x+(k<<23&4294967295|k>>>9),k=E+(R^x^N)+A[13]+681279174&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^x)+A[0]+3936430074&4294967295,N=E+(k<<11&4294967295|k>>>21),k=x+(N^E^R)+A[3]+3572445317&4294967295,x=N+(k<<16&4294967295|k>>>16),k=R+(x^N^E)+A[6]+76029189&4294967295,R=x+(k<<23&4294967295|k>>>9),k=E+(R^x^N)+A[9]+3654602809&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^x)+A[12]+3873151461&4294967295,N=E+(k<<11&4294967295|k>>>21),k=x+(N^E^R)+A[15]+530742520&4294967295,x=N+(k<<16&4294967295|k>>>16),k=R+(x^N^E)+A[2]+3299628645&4294967295,R=x+(k<<23&4294967295|k>>>9),k=E+(x^(R|~N))+A[0]+4096336452&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~x))+A[7]+1126891415&4294967295,N=E+(k<<10&4294967295|k>>>22),k=x+(E^(N|~R))+A[14]+2878612391&4294967295,x=N+(k<<15&4294967295|k>>>17),k=R+(N^(x|~E))+A[5]+4237533241&4294967295,R=x+(k<<21&4294967295|k>>>11),k=E+(x^(R|~N))+A[12]+1700485571&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~x))+A[3]+2399980690&4294967295,N=E+(k<<10&4294967295|k>>>22),k=x+(E^(N|~R))+A[10]+4293915773&4294967295,x=N+(k<<15&4294967295|k>>>17),k=R+(N^(x|~E))+A[1]+2240044497&4294967295,R=x+(k<<21&4294967295|k>>>11),k=E+(x^(R|~N))+A[8]+1873313359&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~x))+A[15]+4264355552&4294967295,N=E+(k<<10&4294967295|k>>>22),k=x+(E^(N|~R))+A[6]+2734768916&4294967295,x=N+(k<<15&4294967295|k>>>17),k=R+(N^(x|~E))+A[13]+1309151649&4294967295,R=x+(k<<21&4294967295|k>>>11),k=E+(x^(R|~N))+A[4]+4149444226&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~x))+A[11]+3174756917&4294967295,N=E+(k<<10&4294967295|k>>>22),k=x+(E^(N|~R))+A[2]+718787259&4294967295,x=N+(k<<15&4294967295|k>>>17),k=R+(N^(x|~E))+A[9]+3951481745&4294967295,b.g[0]=b.g[0]+E&4294967295,b.g[1]=b.g[1]+(x+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.v=function(b,E){E===void 0&&(E=b.length);const R=E-this.blockSize,A=this.C;let x=this.h,N=0;for(;N<E;){if(x==0)for(;N<=R;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<E;)if(A[x++]=b.charCodeAt(N++),x==this.blockSize){i(this,A),x=0;break}}else for(;N<E;)if(A[x++]=b[N++],x==this.blockSize){i(this,A),x=0;break}}this.h=x,this.o+=E},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var E=1;E<b.length-8;++E)b[E]=0;E=this.o*8;for(var R=b.length-8;R<b.length;++R)b[R]=E&255,E/=256;for(this.v(b),b=Array(16),E=0,R=0;R<4;++R)for(let A=0;A<32;A+=8)b[E++]=this.g[R]>>>A&255;return b};function s(b,E){var R=a;return Object.prototype.hasOwnProperty.call(R,b)?R[b]:R[b]=E(b)}function o(b,E){this.h=E;const R=[];let A=!0;for(let x=b.length-1;x>=0;x--){const N=b[x]|0;A&&N==E||(R[x]=N,A=!1)}this.g=R}var a={};function l(b){return-128<=b&&b<128?s(b,function(E){return new o([E|0],E<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return T(u(-b));const E=[];let R=1;for(let A=0;b>=R;A++)E[A]=b/R|0,R*=4294967296;return new o(E,0)}function c(b,E){if(b.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b.charAt(0)=="-")return T(c(b.substring(1),E));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(E,8));let A=d;for(let N=0;N<b.length;N+=8){var x=Math.min(8,b.length-N);const k=parseInt(b.substring(N,N+x),E);x<8?(x=u(Math.pow(E,x)),A=A.j(x).add(u(k))):(A=A.j(R),A=A.add(u(k)))}return A}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-T(this).m();let b=0,E=1;for(let R=0;R<this.g.length;R++){const A=this.i(R);b+=(A>=0?A:4294967296+A)*E,E*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(g(this))return"0";if(S(this))return"-"+T(this).toString(b);const E=u(Math.pow(b,6));var R=this;let A="";for(;;){const x=C(R,E).g;R=v(R,x.j(E));let N=((R.g.length>0?R.g[0]:R.h)>>>0).toString(b);if(R=x,g(R))return N+A;for(;N.length<6;)N="0"+N;A=N+A}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function g(b){if(b.h!=0)return!1;for(let E=0;E<b.g.length;E++)if(b.g[E]!=0)return!1;return!0}function S(b){return b.h==-1}t.l=function(b){return b=v(this,b),S(b)?-1:g(b)?0:1};function T(b){const E=b.g.length,R=[];for(let A=0;A<E;A++)R[A]=~b.g[A];return new o(R,~b.h).add(f)}t.abs=function(){return S(this)?T(this):this},t.add=function(b){const E=Math.max(this.g.length,b.g.length),R=[];let A=0;for(let x=0;x<=E;x++){let N=A+(this.i(x)&65535)+(b.i(x)&65535),k=(N>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);A=k>>>16,N&=65535,k&=65535,R[x]=k<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function v(b,E){return b.add(T(E))}t.j=function(b){if(g(this)||g(b))return d;if(S(this))return S(b)?T(this).j(T(b)):T(T(this).j(b));if(S(b))return T(this.j(T(b)));if(this.l(p)<0&&b.l(p)<0)return u(this.m()*b.m());const E=this.g.length+b.g.length,R=[];for(var A=0;A<2*E;A++)R[A]=0;for(A=0;A<this.g.length;A++)for(let x=0;x<b.g.length;x++){const N=this.i(A)>>>16,k=this.i(A)&65535,de=b.i(x)>>>16,pe=b.i(x)&65535;R[2*A+2*x]+=k*pe,y(R,2*A+2*x),R[2*A+2*x+1]+=N*pe,y(R,2*A+2*x+1),R[2*A+2*x+1]+=k*de,y(R,2*A+2*x+1),R[2*A+2*x+2]+=N*de,y(R,2*A+2*x+2)}for(b=0;b<E;b++)R[b]=R[2*b+1]<<16|R[2*b];for(b=E;b<2*E;b++)R[b]=0;return new o(R,0)};function y(b,E){for(;(b[E]&65535)!=b[E];)b[E+1]+=b[E]>>>16,b[E]&=65535,E++}function _(b,E){this.g=b,this.h=E}function C(b,E){if(g(E))throw Error("division by zero");if(g(b))return new _(d,d);if(S(b))return E=C(T(b),E),new _(T(E.g),T(E.h));if(S(E))return E=C(b,T(E)),new _(T(E.g),E.h);if(b.g.length>30){if(S(b)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var R=f,A=E;A.l(b)<=0;)R=O(R),A=O(A);var x=D(R,1),N=D(A,1);for(A=D(A,2),R=D(R,2);!g(A);){var k=N.add(A);k.l(b)<=0&&(x=x.add(R),N=k),A=D(A,1),R=D(R,1)}return E=v(b,x.j(E)),new _(x,E)}for(x=d;b.l(E)>=0;){for(R=Math.max(1,Math.floor(b.m()/E.m())),A=Math.ceil(Math.log(R)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),N=u(R),k=N.j(E);S(k)||k.l(b)>0;)R-=A,N=u(R),k=N.j(E);g(N)&&(N=f),x=x.add(N),b=v(b,k)}return new _(x,b)}t.B=function(b){return C(this,b).h},t.and=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let A=0;A<E;A++)R[A]=this.i(A)&b.i(A);return new o(R,this.h&b.h)},t.or=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let A=0;A<E;A++)R[A]=this.i(A)|b.i(A);return new o(R,this.h|b.h)},t.xor=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let A=0;A<E;A++)R[A]=this.i(A)^b.i(A);return new o(R,this.h^b.h)};function O(b){const E=b.g.length+1,R=[];for(let A=0;A<E;A++)R[A]=b.i(A)<<1|b.i(A-1)>>>31;return new o(R,b.h)}function D(b,E){const R=E>>5;E%=32;const A=b.g.length-R,x=[];for(let N=0;N<A;N++)x[N]=E>0?b.i(N+R)>>>E|b.i(N+R+1)<<32-E:b.i(N+R);return new o(x,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ON=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,po=o}).apply(typeof Qx<"u"?Qx:typeof self<"u"?self:typeof window<"u"?window:{});var bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MN,ah,NN,hm,HS,LN,VN,FN;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bp=="object"&&bp];for(var m=0;m<h.length;++m){var w=h[m];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(h,m){if(m)e:{var w=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var V=h[P];if(!(V in w))break e;w=w[V]}h=h[h.length-1],P=w[h],m=m(P),m!=P&&m!=null&&e(w,h,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(m){var w=[],P;for(P in m)Object.prototype.hasOwnProperty.call(m,P)&&w.push([P,m[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(h){var m=typeof h;return m=="object"&&h!=null||m=="function"}function l(h,m,w){return h.call.apply(h.bind,arguments)}function u(h,m,w){return u=l,u.apply(null,arguments)}function c(h,m){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function d(h,m){function w(){}w.prototype=m.prototype,h.Z=m.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(P,V,B){for(var K=Array(arguments.length-2),me=2;me<arguments.length;me++)K[me-2]=arguments[me];return m.prototype[V].apply(P,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function p(h){const m=h.length;if(m>0){const w=Array(m);for(let P=0;P<m;P++)w[P]=h[P];return w}return[]}function g(h,m){for(let P=1;P<arguments.length;P++){const V=arguments[P];var w=typeof V;if(w=w!="object"?w:V?Array.isArray(V)?"array":w:"null",w=="array"||w=="object"&&typeof V.length=="number"){w=h.length||0;const B=V.length||0;h.length=w+B;for(let K=0;K<B;K++)h[w+K]=V[K]}else h.push(V)}}class S{constructor(m,w){this.i=m,this.j=w,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function T(h){o.setTimeout(()=>{throw h},0)}function v(){var h=b;let m=null;return h.g&&(m=h.g,h.g=h.g.next,h.g||(h.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,w){const P=_.get();P.set(m,w),this.h?this.h.next=P:this.g=P,this.h=P}}var _=new S(()=>new C,h=>h.reset());class C{constructor(){this.next=this.g=this.h=null}set(m,w){this.h=m,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let O,D=!1,b=new y,E=()=>{const h=Promise.resolve(void 0);O=()=>{h.then(R)}};function R(){for(var h;h=v();){try{h.h.call(h.g)}catch(w){T(w)}var m=_;m.j(h),m.h<100&&(m.h++,h.next=m.g,m.g=h)}D=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,m){this.type=h,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,m=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};o.addEventListener("test",w,m),o.removeEventListener("test",w,m)}catch{}return h}();function k(h){return/^[\s\xa0]*$/.test(h)}function de(h,m){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,m)}d(de,x),de.prototype.init=function(h,m){const w=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=m,m=h.relatedTarget,m||(w=="mouseover"?m=h.fromElement:w=="mouseout"&&(m=h.toElement)),this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),je=0;function Ce(h,m,w,P,V){this.listener=h,this.proxy=null,this.src=m,this.type=w,this.capture=!!P,this.ha=V,this.key=++je,this.da=this.fa=!1}function U(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Y(h,m,w){for(const P in h)m.call(w,h[P],P,h)}function ie(h,m){for(const w in h)m.call(void 0,h[w],w,h)}function we(h){const m={};for(const w in h)m[w]=h[w];return m}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hn(h,m){let w,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(w in P)h[w]=P[w];for(let B=0;B<Pe.length;B++)w=Pe[B],Object.prototype.hasOwnProperty.call(P,w)&&(h[w]=P[w])}}function lt(h){this.src=h,this.g={},this.h=0}lt.prototype.add=function(h,m,w,P,V){const B=h.toString();h=this.g[B],h||(h=this.g[B]=[],this.h++);const K=gt(h,m,P,V);return K>-1?(m=h[K],w||(m.fa=!1)):(m=new Ce(m,this.src,B,!!P,V),m.fa=w,h.push(m)),m};function zt(h,m){const w=m.type;if(w in h.g){var P=h.g[w],V=Array.prototype.indexOf.call(P,m,void 0),B;(B=V>=0)&&Array.prototype.splice.call(P,V,1),B&&(U(m),h.g[w].length==0&&(delete h.g[w],h.h--))}}function gt(h,m,w,P){for(let V=0;V<h.length;++V){const B=h[V];if(!B.da&&B.listener==m&&B.capture==!!w&&B.ha==P)return V}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Nt={};function Mn(h,m,w,P,V){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Mn(h,m[B],w,P,V);return null}return w=ys(w),h&&h[pe]?h.J(m,w,a(P)?!!P.capture:!1,V):xi(h,m,w,!1,P,V)}function xi(h,m,w,P,V,B){if(!m)throw Error("Invalid event type");const K=a(V)?!!V.capture:!!V;let me=gs(h);if(me||(h[Ke]=me=new lt(h)),w=me.add(m,w,P,K,B),w.proxy)return w;if(P=ms(),w.proxy=P,P.src=h,P.listener=w,h.addEventListener)N||(V=K),V===void 0&&(V=!1),h.addEventListener(m.toString(),P,V);else if(h.attachEvent)h.attachEvent(ir(m.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ms(){function h(w){return m.call(h.src,h.listener,w)}const m=Lo;return h}function Sr(h,m,w,P,V){if(Array.isArray(m))for(var B=0;B<m.length;B++)Sr(h,m[B],w,P,V);else P=a(P)?!!P.capture:!!P,w=ys(w),h&&h[pe]?(h=h.i,B=String(m).toString(),B in h.g&&(m=h.g[B],w=gt(m,w,P,V),w>-1&&(U(m[w]),Array.prototype.splice.call(m,w,1),m.length==0&&(delete h.g[B],h.h--)))):h&&(h=gs(h))&&(m=h.g[m.toString()],h=-1,m&&(h=gt(m,w,P,V)),(w=h>-1?m[h]:null)&&Hr(w))}function Hr(h){if(typeof h!="number"&&h&&!h.da){var m=h.src;if(m&&m[pe])zt(m.i,h);else{var w=h.type,P=h.proxy;m.removeEventListener?m.removeEventListener(w,P,h.capture):m.detachEvent?m.detachEvent(ir(w),P):m.addListener&&m.removeListener&&m.removeListener(P),(w=gs(m))?(zt(w,h),w.h==0&&(w.src=null,m[Ke]=null)):U(h)}}}function ir(h){return h in Nt?Nt[h]:Nt[h]="on"+h}function Lo(h,m){if(h.da)h=!0;else{m=new de(m,this);const w=h.listener,P=h.ha||h.src;h.fa&&Hr(h),h=w.call(P,m)}return h}function gs(h){return h=h[Ke],h instanceof lt?h:null}var Vo="__closure_events_fn_"+(Math.random()*1e9>>>0);function ys(h){return typeof h=="function"?h:(h[Vo]||(h[Vo]=function(m){return h.handleEvent(m)}),h[Vo])}function De(){A.call(this),this.i=new lt(this),this.M=this,this.G=null}d(De,A),De.prototype[pe]=!0,De.prototype.removeEventListener=function(h,m,w,P){Sr(this,h,m,w,P)};function et(h,m){var w,P=h.G;if(P)for(w=[];P;P=P.G)w.push(P);if(h=h.M,P=m.type||m,typeof m=="string")m=new x(m,h);else if(m instanceof x)m.target=m.target||h;else{var V=m;m=new x(P,h),hn(m,V)}V=!0;let B,K;if(w)for(K=w.length-1;K>=0;K--)B=m.g=w[K],V=Nn(B,P,!0,m)&&V;if(B=m.g=h,V=Nn(B,P,!0,m)&&V,V=Nn(B,P,!1,m)&&V,w)for(K=0;K<w.length;K++)B=m.g=w[K],V=Nn(B,P,!1,m)&&V}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var h=this.i;for(const m in h.g){const w=h.g[m];for(let P=0;P<w.length;P++)U(w[P]);delete h.g[m],h.h--}}this.G=null},De.prototype.J=function(h,m,w,P){return this.i.add(String(h),m,!1,w,P)},De.prototype.K=function(h,m,w,P){return this.i.add(String(h),m,!0,w,P)};function Nn(h,m,w,P){if(m=h.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let B=0;B<m.length;++B){const K=m[B];if(K&&!K.da&&K.capture==w){const me=K.listener,Rt=K.ha||K.src;K.fa&&zt(h.i,K),V=me.call(Rt,P)!==!1&&V}}return V&&!P.defaultPrevented}function sr(h,m){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(h,m||0)}function vs(h){h.g=sr(()=>{h.g=null,h.i&&(h.i=!1,vs(h))},h.l);const m=h.h;h.h=null,h.m.apply(null,m)}class Fo extends A{constructor(m,w){super(),this.m=m,this.l=w,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:vs(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(h){A.call(this),this.h=h,this.g={}}d(Er,A);var Bo=[];function rl(h){Y(h.g,function(m,w){this.g.hasOwnProperty(w)&&Hr(m)},h),h.g={}}Er.prototype.N=function(){Er.Z.N.call(this),rl(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _s=o.JSON.stringify,pc=o.JSON.parse,il=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function sl(){}function jo(){}var Ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ws(){x.call(this,"d")}d(ws,x);function Ue(){x.call(this,"c")}d(Ue,x);var or={},ol=null;function Pi(){return ol=ol||new De}or.Ia="serverreachability";function al(h){x.call(this,or.Ia,h)}d(al,x);function Kr(h){const m=Pi();et(m,new al(m))}or.STAT_EVENT="statevent";function ll(h,m){x.call(this,or.STAT_EVENT,h),this.stat=m}d(ll,x);function ee(h){const m=Pi();et(m,new ll(m,h))}or.Ja="timingevent";function Qe(h,m){x.call(this,or.Ja,h),this.size=m}d(Qe,x);function Lt(h,m){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},m)}function Tr(){this.g=!0}Tr.prototype.ua=function(){this.g=!1};function qr(h,m,w,P,V,B){h.info(function(){if(h.g)if(B){var K="",me=B.split("&");for(let $e=0;$e<me.length;$e++){var Rt=me[$e].split("=");if(Rt.length>1){const Vt=Rt[0];Rt=Rt[1];const Yr=Vt.split("_");K=Yr.length>=2&&Yr[1]=="type"?K+(Vt+"="+Rt+"&"):K+(Vt+"=redacted&")}}}else K=null;else K=B;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+m+`
`+w+`
`+K})}function ul(h,m,w,P,V,B,K){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+m+`
`+w+`
`+B+" "+K})}function ki(h,m,w,P){h.info(function(){return"XMLHTTP TEXT ("+m+"): "+Af(h,w)+(P?" "+P:"")})}function bv(h,m){h.info(function(){return"TIMEOUT: "+m})}Tr.prototype.info=function(){};function Af(h,m){if(!h.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(h=0;h<B.length;h++)if(Array.isArray(B[h])){var w=B[h];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<P.length;K++)P[K]=""}}}}return _s(B)}catch{return m}}var cl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pf;function hl(){}d(hl,sl),hl.prototype.g=function(){return new XMLHttpRequest},Pf=new hl;function Uo(h){return encodeURIComponent(String(h))}function kf(h){var m=1;h=h.split(":");const w=[];for(;m>0&&h.length;)w.push(h.shift()),m--;return h.length&&w.push(h.join(":")),w}function Gr(h,m,w,P){this.j=h,this.i=m,this.l=w,this.S=P||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var zo={},dl={};function gc(h,m,w){h.M=1,h.A=Wo(Vn(m)),h.u=w,h.R=!0,yc(h,null)}function yc(h,m){h.F=Date.now(),Q(h),h.B=Vn(h.A);var w=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),Ac(w.i,"t",P),h.C=0,w=h.j.L,h.h=new $o,h.g=fR(h.j,w?m:null,!h.u),h.P>0&&(h.O=new Fo(u(h.Y,h,h.g),h.P)),m=h.V,w=h.g,P=h.ba;var V="readystatechange";Array.isArray(V)||(V&&(Bo[0]=V.toString()),V=Bo);for(let B=0;B<V.length;B++){const K=Mn(w,V[B],P||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=h.J?we(h.J):{},h.u?(h.v||(h.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,m)):(h.v="GET",h.g.ea(h.B,h.v,null,m)),Kr(),qr(h.i,h.v,h.B,h.l,h.S,h.u)}Gr.prototype.ba=function(h){h=h.target;const m=this.O;m&&xs(h)==3?m.j():this.Y(h)},Gr.prototype.Y=function(h){try{if(h==this.g)e:{const me=xs(this.g),Rt=this.g.ya(),$e=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||nR(this.g)))){this.K||me!=4||Rt==7||(Rt==8||$e<=0?Kr(3):Kr(2)),Ln(this);var m=this.g.ca();this.X=m;var w=Iv(this);if(this.o=m==200,ul(this.i,this.v,this.B,this.l,this.S,me,m),this.o){if(this.U&&!this.L){t:{if(this.g){var P,V=this.g;if((P=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(P)){var B=P;break t}}B=null}if(h=B)ki(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fl(this,h);else{this.o=!1,this.m=3,ee(12),Xr(this),Es(this);break e}}if(this.R){h=!0;let Vt;for(;!this.K&&this.C<w.length;)if(Vt=Df(this,w),Vt==dl){me==4&&(this.m=4,ee(14),h=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==zo){this.m=4,ee(15),ki(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else ki(this.i,this.l,Vt,null),fl(this,Vt);if(Ss(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||w.length!=0||this.h.h||(this.m=1,ee(16),h=!1),this.o=this.o&&h,!h)ki(this.i,this.l,w,"[Invalid Chunked Response]"),Xr(this),Es(this);else if(w.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),xv(K),K.P=!0,ee(11))}}else ki(this.i,this.l,w,null),fl(this,w);me==4&&Xr(this),this.o&&!this.K&&(me==4?uR(this.j,this):(this.o=!1,Q(this)))}else vU(this.g),m==400&&w.indexOf("Unknown SID")>0?(this.m=3,ee(12)):(this.m=0,ee(13)),Xr(this),Es(this)}}}catch{}finally{}};function Iv(h){if(!Ss(h))return h.g.la();const m=nR(h.g);if(m==="")return"";let w="";const P=m.length,V=xs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Xr(h),Es(h),"";h.h.i=new o.TextDecoder}for(let B=0;B<P;B++)h.h.h=!0,w+=h.h.i.decode(m[B],{stream:!(V&&B==P-1)});return m.length=0,h.h.g+=w,h.C=0,h.h.g}function Ss(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Df(h,m){var w=h.C,P=m.indexOf(`
`,w);return P==-1?dl:(w=Number(m.substring(w,P)),isNaN(w)?zo:(P+=1,P+w>m.length?dl:(m=m.slice(P,P+w),h.C=P+w,m)))}Gr.prototype.cancel=function(){this.K=!0,Xr(this)};function Q(h){h.T=Date.now()+h.H,Of(h,h.H)}function Of(h,m){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Lt(u(h.aa,h),m)}function Ln(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Gr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(bv(this.i,this.B),this.M!=2&&(Kr(),ee(17)),Xr(this),this.m=2,Es(this)):Of(this,this.T-h)};function Es(h){h.j.I==0||h.K||uR(h.j,h)}function Xr(h){Ln(h);var m=h.O;m&&typeof m.dispose=="function"&&m.dispose(),h.O=null,rl(h.V),h.g&&(m=h.g,h.g=null,m.abort(),m.dispose())}function fl(h,m){try{var w=h.j;if(w.I!=0&&(w.g==h||pl(w.h,h))){if(!h.L&&pl(w.h,h)&&w.I==3){try{var P=w.Ba.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Xf(w),qf(w);else break e;Cv(w),ee(18)}}else w.xa=V[1],0<w.xa-w.K&&V[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Lt(u(w.Va,w),6e3));wc(w.h)<=1&&w.ta&&(w.ta=void 0)}else qo(w,11)}else if((h.L||w.g==h)&&Xf(w),!k(m))for(V=w.Ba.g.parse(m),m=0;m<V.length;m++){let $e=V[m];const Vt=$e[0];if(!(Vt<=w.K))if(w.K=Vt,$e=$e[1],w.I==2)if($e[0]=="c"){w.M=$e[1],w.ba=$e[2];const Yr=$e[3];Yr!=null&&(w.ka=Yr,w.j.info("VER="+w.ka));const Go=$e[4];Go!=null&&(w.za=Go,w.j.info("SVER="+w.za));const As=$e[5];As!=null&&typeof As=="number"&&As>0&&(P=1.5*As,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const Ps=h.g;if(Ps){const Yf=Ps.g?Ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yf){var B=P.h;B.g||Yf.indexOf("spdy")==-1&&Yf.indexOf("quic")==-1&&Yf.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(ml(B,B.h),B.h=null))}if(P.G){const Av=Ps.g?Ps.g.getResponseHeader("X-HTTP-Session-Id"):null;Av&&(P.wa=Av,Be(P.J,P.G,Av))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var K=h;if(P.na=dR(P,P.L?P.ba:null,P.W),K.L){Sc(P.h,K);var me=K,Rt=P.O;Rt&&(me.H=Rt),me.D&&(Ln(me),Q(me)),P.g=K}else aR(P);w.i.length>0&&Gf(w)}else $e[0]!="stop"&&$e[0]!="close"||qo(w,7);else w.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?qo(w,7):Rv(w):$e[0]!="noop"&&w.l&&w.l.qa($e),w.A=0)}}Kr(4)}catch{}}var Mf=class{constructor(h,m){this.g=h,this.map=m}};function vc(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _c(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function wc(h){return h.h?1:h.g?h.g.size:0}function pl(h,m){return h.h?h.h==m:h.g?h.g.has(m):!1}function ml(h,m){h.g?h.g.add(m):h.h=m}function Sc(h,m){h.h&&h.h==m?h.h=null:h.g&&h.g.has(m)&&h.g.delete(m)}vc.prototype.cancel=function(){if(this.i=Ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ec(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let m=h.i;for(const w of h.g.values())m=m.concat(w.G);return m}return p(h.i)}var Tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nf(h,m){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const P=h[w].indexOf("=");let V,B=null;P>=0?(V=h[w].substring(0,P),B=h[w].substring(P+1)):V=h[w],m(V,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function br(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;h instanceof br?(this.l=h.l,Ts(this,h.j),this.o=h.o,this.g=h.g,bs(this,h.u),this.h=h.h,gl(this,Pc(h.i)),this.m=h.m):h&&(m=String(h).match(Tc))?(this.l=!1,Ts(this,m[1]||"",!0),this.o=Is(m[2]||""),this.g=Is(m[3]||"",!0),bs(this,m[4]),this.h=Is(m[5]||"",!0),gl(this,m[6]||"",!0),this.m=Is(m[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}br.prototype.toString=function(){const h=[];var m=this.j;m&&h.push(Rs(m,Ic,!0),":");var w=this.g;return(w||m=="file")&&(h.push("//"),(m=this.o)&&h.push(Rs(m,Ic,!0),"@"),h.push(Uo(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Rs(w,w.charAt(0)=="/"?Vf:Lf,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Rs(w,Bf)),h.join("")},br.prototype.resolve=function(h){const m=Vn(this);let w=!!h.j;w?Ts(m,h.j):w=!!h.o,w?m.o=h.o:w=!!h.g,w?m.g=h.g:w=h.u!=null;var P=h.h;if(w)bs(m,h.u);else if(w=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var V=m.h.lastIndexOf("/");V!=-1&&(P=m.h.slice(0,V+1)+P)}if(V=P,V==".."||V==".")P="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){P=V.lastIndexOf("/",0)==0,V=V.split("/");const B=[];for(let K=0;K<V.length;){const me=V[K++];me=="."?P&&K==V.length&&B.push(""):me==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),P&&K==V.length&&B.push("")):(B.push(me),P=!0)}P=B.join("/")}else P=V}return w?m.h=P:w=h.i.toString()!=="",w?gl(m,Pc(h.i)):w=!!h.m,w&&(m.m=h.m),m};function Vn(h){return new br(h)}function Ts(h,m,w){h.j=w?Is(m,!0):m,h.j&&(h.j=h.j.replace(/:$/,""))}function bs(h,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);h.u=m}else h.u=null}function gl(h,m,w){m instanceof Cs?(h.i=m,jf(h.i,h.l)):(w||(m=Rs(m,Ff)),h.i=new Cs(m,h.l))}function Be(h,m,w){h.i.set(m,w)}function Wo(h){return Be(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Is(h,m){return h?m?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rs(h,m,w){return typeof h=="string"?(h=encodeURI(h).replace(m,bc),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function bc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ic=/[#\/\?@]/g,Lf=/[#\?:]/g,Vf=/[#\?]/g,Ff=/[#\?@]/g,Bf=/#/g;function Cs(h,m){this.h=this.g=null,this.i=h||null,this.j=!!m}function Qr(h){h.g||(h.g=new Map,h.h=0,h.i&&Nf(h.i,function(m,w){h.add(decodeURIComponent(m.replace(/\+/g," ")),w)}))}t=Cs.prototype,t.add=function(h,m){Qr(this),this.i=null,h=Di(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(m),this.h+=1,this};function Rc(h,m){Qr(h),m=Di(h,m),h.g.has(m)&&(h.i=null,h.h-=h.g.get(m).length,h.g.delete(m))}function Cc(h,m){return Qr(h),m=Di(h,m),h.g.has(m)}t.forEach=function(h,m){Qr(this),this.g.forEach(function(w,P){w.forEach(function(V){h.call(m,V,P,this)},this)},this)};function xc(h,m){Qr(h);let w=[];if(typeof m=="string")Cc(h,m)&&(w=w.concat(h.g.get(Di(h,m))));else for(h=Array.from(h.g.values()),m=0;m<h.length;m++)w=w.concat(h[m]);return w}t.set=function(h,m){return Qr(this),this.i=null,h=Di(this,h),Cc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[m]),this.h+=1,this},t.get=function(h,m){return h?(h=xc(this,h),h.length>0?String(h[0]):m):m};function Ac(h,m,w){Rc(h,m),w.length>0&&(h.i=null,h.g.set(Di(h,m),p(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],m=Array.from(this.g.keys());for(let P=0;P<m.length;P++){var w=m[P];const V=Uo(w);w=xc(this,w);for(let B=0;B<w.length;B++){let K=V;w[B]!==""&&(K+="="+Uo(w[B])),h.push(K)}}return this.i=h.join("&")};function Pc(h){const m=new Cs;return m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),m}function Di(h,m){return m=String(m),h.j&&(m=m.toLowerCase()),m}function jf(h,m){m&&!h.j&&(Qr(h),h.i=null,h.g.forEach(function(w,P){const V=P.toLowerCase();P!=V&&(Rc(this,P),Ac(this,V,w))},h)),h.j=m}function Uf(h,m){const w=new Tr;if(o.Image){const P=new Image;P.onload=c(Ir,w,"TestLoadImage: loaded",!0,m,P),P.onerror=c(Ir,w,"TestLoadImage: error",!1,m,P),P.onabort=c(Ir,w,"TestLoadImage: abort",!1,m,P),P.ontimeout=c(Ir,w,"TestLoadImage: timeout",!1,m,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else m(!1)}function $f(h,m){const w=new Tr,P=new AbortController,V=setTimeout(()=>{P.abort(),Ir(w,"TestPingServer: timeout",!1,m)},1e4);fetch(h,{signal:P.signal}).then(B=>{clearTimeout(V),B.ok?Ir(w,"TestPingServer: ok",!0,m):Ir(w,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),Ir(w,"TestPingServer: error",!1,m)})}function Ir(h,m,w,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(w)}catch{}}function zf(){this.g=new il}function yl(h){this.i=h.Sb||null,this.h=h.ab||!1}d(yl,sl),yl.prototype.g=function(){return new Ho(this.i,this.h)};function Ho(h,m){De.call(this),this.H=h,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Ho,De),t=Ho.prototype,t.open=function(h,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=m,this.readyState=1,Ko(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(m.body=h),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Oi(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ko(this)),this.g&&(this.readyState=3,Ko(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kc(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function kc(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var m=h.value?h.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!h.done}))&&(this.response=this.responseText+=m)}h.done?Oi(this):Ko(this),this.readyState==3&&kc(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Oi(this))},t.Na=function(h){this.g&&(this.response=h,Oi(this))},t.ga=function(){this.g&&Oi(this)};function Oi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ko(h)}t.setRequestHeader=function(h,m){this.A.append(h,m)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],m=this.h.entries();for(var w=m.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=m.next();return h.join(`\r
`)};function Ko(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dc(h){let m="";return Y(h,function(w,P){m+=P,m+=":",m+=w,m+=`\r
`}),m}function vl(h,m,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=Dc(w),typeof h=="string"?w!=null&&Uo(w):Be(h,m,w))}function qe(h){De.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(qe,De);var Wf=/^https?$/i,Hf=["POST","PUT"];t=qe.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,m,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);m=m?m.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pf.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(h),!0),this.B=!1}catch(B){ZI(this,B);return}if(h=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)w.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const B of P.keys())w.set(B,P.get(B));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(B=>B.toLowerCase()=="content-type"),V=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(Hf,m,void 0)>=0)||P||V||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of w)this.g.setRequestHeader(B,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(B){ZI(this,B)}};function ZI(h,m){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=m,h.o=5,eR(h),Kf(h)}function eR(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,et(this,"complete"),et(this,"abort"),Kf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kf(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tR(this):this.Xa())},t.Xa=function(){tR(this)};function tR(h){if(h.h&&typeof s<"u"){if(h.v&&xs(h)==4)setTimeout(h.Ca.bind(h),0);else if(et(h,"readystatechange"),xs(h)==4){h.h=!1;try{const B=h.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var w;if(!(w=m)){var P;if(P=B===0){let K=String(h.D).match(Tc)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),P=!Wf.test(K?K.toLowerCase():"")}w=P}if(w)et(h,"complete"),et(h,"success");else{h.o=6;try{var V=xs(h)>2?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.ca()+"]",eR(h)}}finally{Kf(h)}}}}function Kf(h,m){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,m||et(h,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xs(h){return h.g?h.g.readyState:0}t.ca=function(){try{return xs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var m=this.g.responseText;return h&&m.indexOf(h)==0&&(m=m.substring(h.length)),pc(m)}};function nR(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function vU(h){const m={};h=(h.g&&xs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(k(h[P]))continue;var w=kf(h[P]);const V=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const B=m[V]||[];m[V]=B,B.push(w)}ie(m,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oc(h,m,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||m}function rR(h){this.za=0,this.i=[],this.j=new Tr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oc("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oc("baseRetryDelayMs",5e3,h),this.Za=Oc("retryDelaySeedMs",1e4,h),this.Ta=Oc("forwardChannelMaxRetries",2,h),this.va=Oc("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new vc(h&&h.concurrentRequestLimit),this.Ba=new zf,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=rR.prototype,t.ka=8,t.I=1,t.connect=function(h,m,w,P){ee(0),this.W=h,this.H=m||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=dR(this,null,this.W),Gf(this)};function Rv(h){if(iR(h),h.I==3){var m=h.V++,w=Vn(h.J);if(Be(w,"SID",h.M),Be(w,"RID",m),Be(w,"TYPE","terminate"),Mc(h,w),m=new Gr(h,h.j,m),m.M=2,m.A=Wo(Vn(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=m.A,w=!0),w||(m.g=fR(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Q(m)}hR(h)}function qf(h){h.g&&(xv(h),h.g.cancel(),h.g=null)}function iR(h){qf(h),h.v&&(o.clearTimeout(h.v),h.v=null),Xf(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function Gf(h){if(!_c(h.h)&&!h.m){h.m=!0;var m=h.Ea;O||E(),D||(O(),D=!0),b.add(m,h),h.D=0}}function _U(h,m){return wc(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=m.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Lt(u(h.Ea,h,m),cR(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const V=new Gr(this,this.j,h);let B=this.o;if(this.U&&(B?(B=we(B),hn(B,this.U)):B=this.U),this.u!==null||this.R||(V.J=B,B=null),this.S)e:{for(var m=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,m>4096){m=w;break e}if(m===4096||w===this.i.length-1){m=w+1;break e}}m=1e3}else m=1e3;m=oR(this,V,m),w=Vn(this.J),Be(w,"RID",h),Be(w,"CVER",22),this.G&&Be(w,"X-HTTP-Session-Id",this.G),Mc(this,w),B&&(this.R?m="headers="+Uo(Dc(B))+"&"+m:this.u&&vl(w,this.u,B)),ml(this.h,V),this.Ra&&Be(w,"TYPE","init"),this.S?(Be(w,"$req",m),Be(w,"SID","null"),V.U=!0,gc(V,w,null)):gc(V,w,m),this.I=2}}else this.I==3&&(h?sR(this,h):this.i.length==0||_c(this.h)||sR(this))};function sR(h,m){var w;m?w=m.l:w=h.V++;const P=Vn(h.J);Be(P,"SID",h.M),Be(P,"RID",w),Be(P,"AID",h.K),Mc(h,P),h.u&&h.o&&vl(P,h.u,h.o),w=new Gr(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),m&&(h.i=m.G.concat(h.i)),m=oR(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ml(h.h,w),gc(w,P,m)}function Mc(h,m){h.H&&Y(h.H,function(w,P){Be(m,P,w)}),h.l&&Y({},function(w,P){Be(m,P,w)})}function oR(h,m,w){w=Math.min(h.i.length,w);const P=h.l?u(h.l.Ka,h.l,h):null;e:{var V=h.i;let me=-1;for(;;){const Rt=["count="+w];me==-1?w>0?(me=V[0].g,Rt.push("ofs="+me)):me=0:Rt.push("ofs="+me);let $e=!0;for(let Vt=0;Vt<w;Vt++){var B=V[Vt].g;const Yr=V[Vt].map;if(B-=me,B<0)me=Math.max(0,V[Vt].g-100),$e=!1;else try{B="req"+B+"_"||"";try{var K=Yr instanceof Map?Yr:Object.entries(Yr);for(const[Go,As]of K){let Ps=As;a(As)&&(Ps=_s(As)),Rt.push(B+Go+"="+encodeURIComponent(Ps))}}catch(Go){throw Rt.push(B+"type="+encodeURIComponent("_badmap")),Go}}catch{P&&P(Yr)}}if($e){K=Rt.join("&");break e}}K=void 0}return h=h.i.splice(0,w),m.G=h,K}function aR(h){if(!h.g&&!h.v){h.Y=1;var m=h.Da;O||E(),D||(O(),D=!0),b.add(m,h),h.A=0}}function Cv(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Lt(u(h.Da,h),cR(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,lR(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Lt(u(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ee(10),qf(this),lR(this))};function xv(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function lR(h){h.g=new Gr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var m=Vn(h.na);Be(m,"RID","rpc"),Be(m,"SID",h.M),Be(m,"AID",h.K),Be(m,"CI",h.F?"0":"1"),!h.F&&h.ia&&Be(m,"TO",h.ia),Be(m,"TYPE","xmlhttp"),Mc(h,m),h.u&&h.o&&vl(m,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Wo(Vn(m)),w.u=null,w.R=!0,yc(w,h)}t.Va=function(){this.C!=null&&(this.C=null,qf(this),Cv(this),ee(19))};function Xf(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function uR(h,m){var w=null;if(h.g==m){Xf(h),xv(h),h.g=null;var P=2}else if(pl(h.h,m))w=m.G,Sc(h.h,m),P=1;else return;if(h.I!=0){if(m.o)if(P==1){w=m.u?m.u.length:0,m=Date.now()-m.F;var V=h.D;P=Pi(),et(P,new Qe(P,w)),Gf(h)}else aR(h);else if(V=m.m,V==3||V==0&&m.X>0||!(P==1&&_U(h,m)||P==2&&Cv(h)))switch(w&&w.length>0&&(m=h.h,m.i=m.i.concat(w)),V){case 1:qo(h,5);break;case 4:qo(h,10);break;case 3:qo(h,6);break;default:qo(h,2)}}}function cR(h,m){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*m}function qo(h,m){if(h.j.info("Error code "+m),m==2){var w=u(h.bb,h),P=h.Ua;const V=!P;P=new br(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ts(P,"https"),Wo(P),V?Uf(P.toString(),w):$f(P.toString(),w)}else ee(2);h.I=0,h.l&&h.l.pa(m),hR(h),iR(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function hR(h){if(h.I=0,h.ja=[],h.l){const m=Ec(h.h);(m.length!=0||h.i.length!=0)&&(g(h.ja,m),g(h.ja,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.oa()}}function dR(h,m,w){var P=w instanceof br?Vn(w):new br(w);if(P.g!="")m&&(P.g=m+"."+P.g),bs(P,P.u);else{var V=o.location;P=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const B=new br(null);P&&Ts(B,P),m&&(B.g=m),V&&bs(B,V),w&&(B.h=w),P=B}return w=h.G,m=h.wa,w&&m&&Be(P,w,m),Be(P,"VER",h.ka),Mc(h,P),P}function fR(h,m,w){if(m&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=h.Aa&&!h.ma?new qe(new yl({ab:w})):new qe(h.ma),m.Fa(h.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pR(){}t=pR.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qf(){}Qf.prototype.g=function(h,m){return new Fn(h,m)};function Fn(h,m){De.call(this),this.g=new rR(m),this.l=h,this.h=m&&m.messageUrlParams||null,h=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(h?h["X-WebChannel-Content-Type"]=m.messageContentType:h={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(h?h["X-WebChannel-Client-Profile"]=m.sa:h={"X-WebChannel-Client-Profile":m.sa}),this.g.U=h,(h=m&&m.Qb)&&!k(h)&&(this.g.u=h),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,h=this.h,h!==null&&m in h&&(h=this.h,m in h&&delete h[m])),this.j=new _l(this)}d(Fn,De),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Rv(this.g)},Fn.prototype.o=function(h){var m=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=_s(h),h=w);m.i.push(new Mf(m.Ya++,h)),m.I==3&&Gf(m)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Rv(this.g),delete this.g,Fn.Z.N.call(this)};function mR(h){ws.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var m=h.__sm__;if(m){e:{for(const w in m){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,m=m!==null&&h in m?m[h]:void 0),this.data=m}else this.data=h}d(mR,ws);function gR(){Ue.call(this),this.status=1}d(gR,Ue);function _l(h){this.g=h}d(_l,pR),_l.prototype.ra=function(){et(this.g,"a")},_l.prototype.qa=function(h){et(this.g,new mR(h))},_l.prototype.pa=function(h){et(this.g,new gR)},_l.prototype.oa=function(){et(this.g,"b")},Qf.prototype.createWebChannel=Qf.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,FN=function(){return new Qf},VN=function(){return Pi()},LN=or,HS={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,hm=cl,mc.COMPLETE="complete",NN=mc,jo.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",De.prototype.listen=De.prototype.J,ah=jo,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,MN=qe}).apply(typeof bp<"u"?bp:typeof self<"u"?self:typeof window<"u"?window:{});const Yx="@firebase/firestore",Jx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new AT("@firebase/firestore");function Dl(){return ja.logLevel}function $(t,...e){if(ja.logLevel<=Ee.DEBUG){const n=e.map(kT);ja.debug(`Firestore (${ec}): ${t}`,...n)}}function _t(t,...e){if(ja.logLevel<=Ee.ERROR){const n=e.map(kT);ja.error(`Firestore (${ec}): ${t}`,...n)}}function bd(t,...e){if(ja.logLevel<=Ee.WARN){const n=e.map(kT);ja.warn(`Firestore (${ec}): ${t}`,...n)}}function kT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,BN(t,r,n)}function BN(t,e,n){let r=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _t(r),new Error(r)}function re(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||BN(e,i,r)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class YK{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ur,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ur)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string",31837,{l:r}),new XK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class JK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eq{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){re(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=tq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function KS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return O_(i)===O_(s)?he(i,s):O_(i)?1:-1}return he(t.length,e.length)}const nq=55296,rq=57343;function O_(t){const e=t.charCodeAt(0);return e>=nq&&e<=rq}function xu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function jN(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="__name__";class ni{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ni.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=ni.isNumericId(e),i=ni.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ni.extractNumericId(e).compare(ni.extractNumericId(n)):KS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return po.fromString(e.substring(4,e.length-2))}}class Oe extends ni{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const iq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends ni{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return iq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eA}static keyField(){return new nt([eA])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Oe.fromString(e))}static fromName(e){return new G(Oe.fromString(e).popFirst(5))}static empty(){return new G(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sq(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tA(t){if(!G.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nA(t){if(G.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $N(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function By(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=By(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function af(t,e){if(!$N(t))throw new H(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new H(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=-62135596800,iA=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*iA);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rA)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iA}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(af(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:bt("string",Ne._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ne(0,0))}static max(){return new ae(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;class bg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function qS(t){return t.fields.find(e=>e.kind===2)}function ra(t){return t.fields.filter(e=>e.kind!==2)}bg.UNKNOWN_ID=-1;class dm{constructor(e,n){this.fieldPath=e,this.kind=n}}class Id{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Id(0,er.min())}}function zN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new er(i,G.empty(),e)}function WN(t){return new er(t.readTime,t.key,Au)}class er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new er(ae.min(),G.empty(),Au)}static max(){return new er(ae.max(),G.empty(),Au)}}function OT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==HN)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="SimpleDb";class jy{static open(e,n,r,i){try{return new jy(n,e.transaction(i,r))}catch(s){throw new Lh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ur,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Lh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=MT(r.target.error);this.S.reject(new Lh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(zn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new aq(n)}}class yi{static delete(e){return $(zn,"Removing database:",e),aa(vN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!RN())return!1;if(yi.F())return!0;const e=Ot(),n=yi.M(e),r=0<n&&n<10,i=qN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,yi.M(Ot())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(zn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Lh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Lh(e,o))},i.onupgradeneeded=s=>{$(zn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{$(zn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=jy.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if($(zn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class oq{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return aa(this.U.delete())}}class Lh extends H{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Po(t){return t.name==="IndexedDbTransactionError"}class aq{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($(zn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):($(zn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return $(zn,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next(n=>(n===void 0&&(n=null),$(zn,"GET",this.store.name,e,n),n))}delete(e){return $(zn,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return $(zn,"COUNT",this.store.name),aa(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){$(zn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=MT(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new oq(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const c=u.catch(d=>(l.done(),L.reject(d)));r.push(c)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function aa(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=MT(r.target.error);n(i)}})}let sA=!1;function MT(t){const e=yi.M(Ot());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sA||(sA=!0,setTimeout(()=>{throw r},0)),r}}return t}const Vh="IndexBackfiller";class lq{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(Vh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();$(Vh,`Documents written: ${n}`)}catch(n){Po(n)?$(Vh,"Ignoring IndexedDB error during index backfill: ",n):await Ao(n)}await this.re(6e4)})}}class uq{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $(Vh,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>($(Vh,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=WN(s);OT(o,r)>0&&(r=o)}),new er(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;function Uy(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function GN(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="";function ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=oA(e)),e=cq(t.get(n),e);return oA(e)}function cq(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Ig:n+="";break;default:n+=s}}return n}function oA(t){return t+Ig+""}function ci(t){const e=t.length;if(re(e>=2,64408,{path:t}),e===2)return re(t.charAt(0)===Ig&&t.charAt(1)==="",56145,{path:t}),Oe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Ig,s);switch((o<0||o>n)&&Z(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Z(61167,{path:t})}s=o+2}return new Oe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="remoteDocuments",lf="owner",El="owner",Cd="mutationQueues",hq="userId",Nr="mutations",aA="batchId",va="userMutationsIndex",lA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){return[t,ln(e)]}function XN(t,e,n){return[t,ln(e),n]}const dq={},Pu="documentMutations",Rg="remoteDocumentsV14",fq=["prefixPath","collectionGroup","readTime","documentId"],pm="documentKeyIndex",pq=["prefixPath","collectionGroup","documentId"],QN="collectionGroupIndex",mq=["collectionGroup","readTime","prefixPath","documentId"],xd="remoteDocumentGlobal",GS="remoteDocumentGlobalKey",ku="targets",YN="queryTargetsIndex",gq=["canonicalId","targetId"],Du="targetDocuments",yq=["targetId","path"],NT="documentTargetsIndex",vq=["path","targetId"],Cg="targetGlobalKey",Ra="targetGlobal",Ad="collectionParents",_q=["collectionId","parent"],Ou="clientMetadata",wq="clientId",$y="bundles",Sq="bundleId",zy="namedQueries",Eq="name",LT="indexConfiguration",Tq="indexId",XS="collectionGroupIndex",bq="collectionGroup",Fh="indexState",Iq=["indexId","uid"],JN="sequenceNumberIndex",Rq=["uid","sequenceNumber"],Bh="indexEntries",Cq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZN="documentKeyIndex",xq=["indexId","uid","orderedDocumentKey"],Wy="documentOverlays",Aq=["userId","collectionPath","documentId"],QS="collectionPathOverlayIndex",Pq=["userId","collectionPath","largestBatchId"],eL="collectionGroupOverlayIndex",kq=["userId","collectionGroup","largestBatchId"],VT="globals",Dq="name",tL=[Cd,Nr,Pu,ia,ku,lf,Ra,Du,Ou,xd,Ad,$y,zy],Oq=[...tL,Wy],nL=[Cd,Nr,Pu,Rg,ku,lf,Ra,Du,Ou,xd,Ad,$y,zy,Wy],rL=nL,FT=[...rL,LT,Fh,Bh],Mq=FT,iL=[...FT,VT],Nq=iL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends KN{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Mt(t,e){const n=ne(t);return yi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ip(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ip(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ip(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ip(this.root,e,this.comparator,!0)}}class Ip{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=i??Gt.EMPTY,this.right=s??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cA(this.data.getIterator())}getIteratorFrom(e){return new cA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class cA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Fe(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oL("Invalid base64 string: "+s):s}}(e);return new wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const Lq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(re(!!t,39018),typeof t=="string"){let e=0;const n=Lq.exec(t);if(re(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL="server_timestamp",lL="__type__",uL="__previous_value__",cL="__local_write_time__";function BT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lL])==null?void 0:r.stringValue)===aL}function Hy(t){const e=t.mapValue.fields[uL];return BT(e)?Hy(e):e}function Pd(t){const e=ns(t.mapValue.fields[cL].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const xg="(default)";class Ua{constructor(e,n){this.projectId=e,this.database=n||xg}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database===xg}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="__type__",hL="__max__",no={mapValue:{fields:{__type__:{stringValue:hL}}}},UT="__vector__",Mu="value",mm={nullValue:"NULL_VALUE"};function _o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?BT(t)?4:dL(t)?9007199254740991:Ky(t)?10:11:Z(28295,{value:t})}function Ii(t,e){if(t===e)return!0;const n=_o(t);if(n!==_o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pd(t).isEqual(Pd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ns(i.timestampValue),a=ns(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return rs(i.bytesValue).isEqual(rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Rd(o)===Rd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xu(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uA(o)!==uA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ii(o[l],a[l])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function kd(t,e){return(t.values||[]).find(n=>Ii(n,e))!==void 0}function wo(t,e){if(t===e)return 0;const n=_o(t),r=_o(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return hA(t.timestampValue,e.timestampValue);case 4:return hA(Pd(t),Pd(e));case 5:return KS(t.stringValue,e.stringValue);case 6:return function(s,o){const a=rs(s),l=rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=he(a[u],l[u]);if(c!==0)return c}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Ye(s.latitude),Ye(o.latitude));return a!==0?a:he(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,p,g,S;const a=s.fields||{},l=o.fields||{},u=(f=a[Mu])==null?void 0:f.arrayValue,c=(p=l[Mu])==null?void 0:p.arrayValue,d=he(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((S=c==null?void 0:c.values)==null?void 0:S.length)||0);return d!==0?d:dA(u,c)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===no.mapValue&&o===no.mapValue)return 0;if(s===no.mapValue)return 1;if(o===no.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=KS(l[d],c[d]);if(f!==0)return f;const p=wo(a[l[d]],u[c[d]]);if(p!==0)return p}return he(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function hA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=ns(t),r=ns(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function dA(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=wo(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Nu(t){return JS(t)}function JS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=JS(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${JS(n.fields[o])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function gm(t){switch(_o(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hy(t);return e?16+gm(e):16;case 5:return 2*t.stringValue.length;case 6:return rs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+gm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ko(r.fields,(s,o)=>{i+=s.length+gm(o)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function Dd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ZS(t){return!!t&&"integerValue"in t}function Od(t){return!!t&&"arrayValue"in t}function fA(t){return!!t&&"nullValue"in t}function pA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ym(t){return!!t&&"mapValue"in t}function Ky(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jT])==null?void 0:r.stringValue)===UT}function jh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jh(t.arrayValue.values[n]);return e}return{...t}}function dL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hL}const fL={mapValue:{fields:{[jT]:{stringValue:UT},[Mu]:{arrayValue:{}}}}};function Fq(t){return"nullValue"in t?mm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Dd(Ua.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ky(t)?fL:{mapValue:{}}:Z(35942,{value:t})}function Bq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Dd(Ua.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?fL:"mapValue"in t?Ky(t)?{mapValue:{}}:no:Z(61959,{value:t})}function mA(t,e){const n=wo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function gA(t,e){const n=wo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ym(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jh(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=jh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ym(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ko(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new on(jh(this.value))}}function pL(t){const e=[];return ko(t.fields,(n,r)=>{const i=new nt([n]);if(ym(r)){const s=pL(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,ae.min(),ae.min(),ae.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,ae.min(),ae.min(),on.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,ae.min(),ae.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.position=e,this.inclusive=n}}function yA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=wo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n="asc"){this.field=e,this.dir=n}}function jq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{}class Te extends mL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Uq(e,n,r):n==="array-contains"?new Wq(e,r):n==="in"?new SL(e,r):n==="not-in"?new Hq(e,r):n==="array-contains-any"?new Kq(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $q(e,r):new zq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wo(n,this.value)):n!==null&&_o(this.value)===_o(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends mL{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Le(e,n)}matches(e){return Vu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vu(t){return t.op==="and"}function e0(t){return t.op==="or"}function $T(t){return gL(t)&&Vu(t)}function gL(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}function t0(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+Nu(t.value);if($T(t))return t.filters.map(e=>t0(e)).join(",");{const e=t.filters.map(n=>t0(n)).join(",");return`${t.op}(${e})`}}function yL(t,e){return t instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&Ii(r.value,i.value)}(t,e):t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&yL(o,i.filters[a]),!0):!1}(t,e):void Z(19439)}function vL(t,e){const n=t.filters.concat(e);return Le.create(n,t.op)}function _L(t){return t instanceof Te?function(n){return`${n.field.canonicalString()} ${n.op} ${Nu(n.value)}`}(t):t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(_L).join(" ,")+"}"}(t):"Filter"}class Uq extends Te{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class $q extends Te{constructor(e,n){super(e,"in",n),this.keys=wL("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zq extends Te{constructor(e,n){super(e,"not-in",n),this.keys=wL("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wL(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class Wq extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Od(n)&&kd(n.arrayValue,this.value)}}class SL extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kd(this.value.arrayValue,n)}}class Hq extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kd(this.value.arrayValue,n)}}class Kq extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Od(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function n0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new qq(t,e,n,r,i,s,o)}function $a(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>t0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Nu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Nu(r)).join(",")),e.Te=n}return e.Te}function uf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vA(t.startAt,e.startAt)&&vA(t.endAt,e.endAt)}function Ag(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Pg(t,e){return t.filters.filter(n=>n instanceof Te&&n.field.isEqual(e))}function _A(t,e,n){let r=mm,i=!0;for(const s of Pg(t,e)){let o=mm,a=!0;switch(s.op){case"<":case"<=":o=Fq(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=mm}mA({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];mA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function wA(t,e,n){let r=no,i=!0;for(const s of Pg(t,e)){let o=no,a=!0;switch(s.op){case">=":case">":o=Bq(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=no}gA({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];gA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EL(t,e,n,r,i,s,o,a){return new tc(t,e,n,r,i,s,o,a)}function cf(t){return new tc(t)}function SA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TL(t){return t.collectionGroup!==null}function Uh(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Md(s,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new Md(nt.keyField(),r))}return e.Ie}function Jn(t){const e=ne(t);return e.Ee||(e.Ee=Gq(e,Uh(t))),e.Ee}function Gq(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Md(i.field,s)});const n=t.endAt?new Lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lu(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r0(t,e){const n=t.filters.concat([e]);return new tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function i0(t,e,n){return new tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qy(t,e){return uf(Jn(t),Jn(e))&&t.limitType===e.limitType}function bL(t){return`${$a(Jn(t))}|lt:${t.limitType}`}function Ol(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_L(i)).join(", ")}]`),Uy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Nu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Nu(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function hf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Uh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=yA(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Uh(r),i)||r.endAt&&!function(o,a,l){const u=yA(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Uh(r),i))}(t,e)}function IL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RL(t){return(e,n)=>{let r=!1;for(const i of Uh(t)){const s=Xq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Xq(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?wo(l,u):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return sL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=new He(G.comparator);function qn(){return Qq}const CL=new He(G.comparator);function lh(...t){let e=CL;for(const n of t)e=e.insert(n.key,n);return e}function xL(t){let e=CL;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hi(){return $h()}function AL(){return $h()}function $h(){return new hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Yq=new He(G.comparator),Jq=new Fe(G.comparator);function _e(...t){let e=Jq;for(const n of t)e=e.add(n);return e}const Zq=new Fe(he);function zT(){return Zq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function PL(t){return{integerValue:""+t}}function e7(t,e){return GN(e)?PL(e):WT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this._=void 0}}function t7(t,e,n){return t instanceof Nd?function(i,s){const o={fields:{[lL]:{stringValue:aL},[cL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&BT(s)&&(s=Hy(s)),s&&(o.fields[uL]=s),{mapValue:o}}(n,e):t instanceof Fu?DL(t,e):t instanceof Bu?OL(t,e):function(i,s){const o=kL(i,s),a=EA(o)+EA(i.Ae);return ZS(o)&&ZS(i.Ae)?PL(a):WT(i.serializer,a)}(t,e)}function n7(t,e,n){return t instanceof Fu?DL(t,e):t instanceof Bu?OL(t,e):n}function kL(t,e){return t instanceof Ld?function(r){return ZS(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Nd extends Gy{}class Fu extends Gy{constructor(e){super(),this.elements=e}}function DL(t,e){const n=ML(e);for(const r of t.elements)n.some(i=>Ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bu extends Gy{constructor(e){super(),this.elements=e}}function OL(t,e){let n=ML(e);for(const r of t.elements)n=n.filter(i=>!Ii(i,r));return{arrayValue:{values:n}}}class Ld extends Gy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function EA(t){return Ye(t.integerValue||t.doubleValue)}function ML(t){return Od(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n){this.field=e,this.transform=n}}function i7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fu&&i instanceof Fu||r instanceof Bu&&i instanceof Bu?xu(r.elements,i.elements,Ii):r instanceof Ld&&i instanceof Ld?Ii(r.Ae,i.Ae):r instanceof Nd&&i instanceof Nd}(t.transform,e.transform)}class s7{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xy{}function NL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qy(t.key,gn.none()):new nc(t.key,t.data,gn.none());{const n=t.data,r=on.empty();let i=new Fe(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ds(t.key,r,new xn(i.toArray()),gn.none())}}function o7(t,e,n){t instanceof nc?function(i,s,o){const a=i.value.clone(),l=bA(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(i,s,o){if(!vm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=bA(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(LL(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zh(t,e,n,r){return t instanceof nc?function(s,o,a,l){if(!vm(s.precondition,o))return a;const u=s.value.clone(),c=IA(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ds?function(s,o,a,l){if(!vm(s.precondition,o))return a;const u=IA(s.fieldTransforms,l,o),c=o.data;return c.setAll(LL(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return vm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=kL(r.transform,i||null);s!=null&&(n===null&&(n=on.empty()),n.set(r.field,s))}return n||null}function TA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xu(r,i,(s,o)=>i7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nc extends Xy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ds extends Xy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bA(t,e,n){const r=new Map;re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,n7(o,a,n[i]))}return r}function IA(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,t7(s,o,e))}return r}class Qy extends Xy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VL extends Xy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&o7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=NL(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&xu(this.mutations,e.mutations,(n,r)=>TA(n,r))&&xu(this.baseMutations,e.baseMutations,(n,r)=>TA(n,r))}}class KT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Yq}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new KT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Ie;function u7(t){switch(t){case j.OK:return Z(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function FL(t){if(t===void 0)return _t("GRPC error has no .code"),j.UNKNOWN;switch(t){case St.OK:return j.OK;case St.CANCELLED:return j.CANCELLED;case St.UNKNOWN:return j.UNKNOWN;case St.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case St.INTERNAL:return j.INTERNAL;case St.UNAVAILABLE:return j.UNAVAILABLE;case St.UNAUTHENTICATED:return j.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case St.NOT_FOUND:return j.NOT_FOUND;case St.ALREADY_EXISTS:return j.ALREADY_EXISTS;case St.PERMISSION_DENIED:return j.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case St.ABORTED:return j.ABORTED;case St.OUT_OF_RANGE:return j.OUT_OF_RANGE;case St.UNIMPLEMENTED:return j.UNIMPLEMENTED;case St.DATA_LOSS:return j.DATA_LOSS;default:return Z(39323,{code:t})}}(Ie=St||(St={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=new po([4294967295,4294967295],0);function RA(t){const e=c7().encode(t),n=new ON;return n.update(e),new Uint8Array(n.digest())}function CA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new po([n,r],0),new po([i,s],0)]}class GT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uh(`Invalid padding: ${n}`);if(r<0)throw new uh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=po.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(po.fromNumber(r)));return i.compare(h7)===1&&(i=new po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=RA(e),[r,i]=CA(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new GT(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=RA(e),[r,i]=CA(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ff.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new df(ae.min(),i,new He(he),qn(),_e())}}class ff{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ff(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class BL{constructor(e,n){this.targetId=e,this.Ce=n}}class jL{constructor(e,n,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class xA{constructor(){this.ve=0,this.Fe=AA(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new ff(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=AA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class d7{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Rp(),this.He=Rp(),this.Ye=new He(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Ag(s))if(r===0){const o=new G(s.path);this.et(n,o,dt.newNoDocument(o,ae.min()))}else re(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=rs(r).toUint8Array()}catch(l){if(l instanceof oL)return bd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new GT(o,i,s)}catch(l){return bd(l instanceof uh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Ag(a.target)){const l=new G(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,dt.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=_e();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new df(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Rp(),this.He=Rp(),this.Ye=new He(he),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new xA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Rp(){return new He(G.comparator)}function AA(){return new He(G.comparator)}const f7={asc:"ASCENDING",desc:"DESCENDING"},p7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m7={and:"AND",or:"OR"};class g7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function s0(t,e){return t.useProto3Json||Uy(e)?e:{value:e}}function ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y7(t,e){return ju(t,e.toTimestamp())}function wn(t){return re(!!t,49232),ae.fromTimestamp(function(n){const r=ns(n);return new Ne(r.seconds,r.nanos)}(t))}function XT(t,e){return o0(t,e).canonicalString()}function o0(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $L(t){const e=Oe.fromString(t);return re(YL(e),10190,{key:e.toString()}),e}function kg(t,e){return XT(t.databaseId,e.path)}function Ca(t,e){const n=$L(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(HL(n))}function zL(t,e){return XT(t.databaseId,e)}function WL(t){const e=$L(t);return e.length===4?Oe.emptyPath():HL(e)}function a0(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HL(t){return re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function PA(t,e,n){return{name:kg(t,e),fields:n.value.mapValue.fields}}function v7(t,e,n){const r=Ca(t,e.name),i=wn(e.updateTime),s=e.createTime?wn(e.createTime):ae.min(),o=new on({mapValue:{fields:e.fields}}),a=dt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function _7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(re(c===void 0||typeof c=="string",58123),wt.fromBase64String(c||"")):(re(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),wt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?j.UNKNOWN:FL(u.code);return new H(c,u.message||"")}(o);n=new jL(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ca(t,r.document.name),s=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):ae.min(),a=new on({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new _m(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ca(t,r.document),s=r.readTime?wn(r.readTime):ae.min(),o=dt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _m([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ca(t,r.document),s=r.removedTargetIds||[];n=new _m([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new l7(i,s),a=r.targetId;n=new BL(a,o)}}return n}function Dg(t,e){let n;if(e instanceof nc)n={update:PA(t,e.key,e.value)};else if(e instanceof Qy)n={delete:kg(t,e.key)};else if(e instanceof ds)n={update:PA(t,e.key,e.data),updateMask:I7(e.fieldMask)};else{if(!(e instanceof VL))return Z(16599,{Vt:e.type});n={verify:kg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Nd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:y7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function l0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?gn.updateTime(wn(s.updateTime)):s.exists!==void 0?gn.exists(s.exists):gn.none()}(e.currentDocument):gn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Nd;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new Fu(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new Bu(c)}else"increment"in a?l=new Ld(o,a.increment):Z(16584,{proto:a});const u=nt.fromServerFormat(a.fieldPath);return new r7(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Ca(t,e.update.name),s=new on({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new xn(u.map(c=>nt.fromServerFormat(c)))}(e.updateMask);return new ds(i,s,o,n,r)}return new nc(i,s,n,r)}if(e.delete){const i=Ca(t,e.delete);return new Qy(i,n)}if(e.verify){const i=Ca(t,e.verify);return new VL(i,n)}return Z(1463,{proto:e})}function w7(t,e){return t&&t.length>0?(re(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?wn(i.updateTime):wn(s);return o.isEqual(ae.min())&&(o=wn(s)),new s7(o,i.transformResults||[])}(n,e))):[]}function KL(t,e){return{documents:[zL(t,e.path)]}}function qL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zL(t,i);const s=function(u){if(u.length!==0)return QL(Le.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Ml(f.field),direction:E7(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=s0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function GL(t){let e=WL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=XL(d);return f instanceof Le&&$T(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(g){return new Md(Nl(g.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Uy(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Lu(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,p=d.values||[];return new Lu(p,f)}(n.endAt)),EL(e,i,o,s,a,"F",l,u)}function S7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nl(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nl(n.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nl(n.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nl(n.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Te.create(Nl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(r=>XL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function E7(t){return f7[t]}function T7(t){return p7[t]}function b7(t){return m7[t]}function Ml(t){return{fieldPath:t.canonicalString()}}function Nl(t){return nt.fromServerFormat(t.fieldPath)}function QL(t){return t instanceof Te?function(n){if(n.op==="=="){if(pA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NAN"}};if(fA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NOT_NAN"}};if(fA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(n.field),op:T7(n.op),value:n.value}}}(t):t instanceof Le?function(n){const r=n.getFilters().map(i=>QL(i));return r.length===1?r[0]:{compositeFilter:{op:b7(n.op),filters:r}}}(t):Z(54877,{filter:t})}function I7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.yt=e}}function R7(t,e){let n;if(e.document)n=v7(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=G.fromSegments(e.noDocument.path),i=Wa(e.noDocument.readTime);n=dt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z(56709);{const r=G.fromSegments(e.unknownDocument.path),i=Wa(e.unknownDocument.version);n=dt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ne(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function kA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Og(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:kg(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ju(s,o.version.toTimestamp()),createTime:ju(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:za(e.version)};else{if(!e.isUnknownDocument())return Z(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:za(e.version)}}return r}function Og(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function za(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wa(t){const e=new Ne(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function la(t,e){const n=(e.baseMutations||[]).map(s=>l0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>l0(t.yt,s)),i=Ne.fromMillis(e.localWriteTimeMs);return new HT(e.batchId,i,n,r)}function ch(t){const e=Wa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wa(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return re(o===1,1966,{count:o}),Jn(cf(WL(s.documents[0])))}(t.query):function(s){return Jn(GL(s))}(t.query),new zi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wt.fromBase64String(t.resumeToken))}function ZL(t,e){const n=za(e.snapshotVersion),r=za(e.lastLimboFreeSnapshotVersion);let i;i=Ag(e.target)?KL(t.yt,e.target):qL(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$a(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eV(t){const e=GL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?i0(e,e.limit,"L"):e}function M_(t,e){return new qT(e.largestBatchId,l0(t.yt,e.overlayMutation))}function DA(t,e){const n=e.path.lastSegment();return[t,ln(e.path.popLast()),n]}function OA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:za(r.readTime),documentKey:ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{getBundleMetadata(e,n){return MA(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Wa(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return MA(e).put(function(i){return{bundleId:i.id,createTime:za(wn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return NA(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:eV(s.bundledQuery),readTime:Wa(s.readTime)}}(r)})}saveNamedQuery(e,n){return NA(e).put(function(i){return{name:i.name,readTime:za(wn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function MA(t){return Mt(t,$y)}function NA(t){return Mt(t,zy)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Yy(e,r)}getOverlay(e,n){return Hc(e).get(DA(this.userId,n)).next(r=>r?M_(this.serializer,r):null)}getOverlays(e,n){const r=hi();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new qT(n,o);i.push(this.St(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ln(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Hc(e).Z(QS,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=hi(),s=ln(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Hc(e).J(QS,o).next(a=>{for(const l of a){const u=M_(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=hi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Hc(e).ee({index:eL,range:a},(l,u,c)=>{const d=M_(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}St(e,n){return Hc(e).put(function(i,s,o){const[a,l,u]=DA(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Dg(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Hc(t){return Mt(t,Wy)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{bt(e){return Mt(e,VT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ye(e.integerValue));else if("doubleValue"in e){const r=Ye(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Rd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ns(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(rs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?dL(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Ky(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Z(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Mu,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ye(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ua.Kt=new ua;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=255;function A7(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function LA(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=A7(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class P7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=LA(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=LA(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(bl),this.sn(255)}_n(){this.an(bl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===bl?(this.sn(bl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===bl?(this.an(bl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class k7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class D7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Kc{constructor(){this.cn=new P7,this.ln=new k7(this.cn),this.hn=new D7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ca(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:wm(this.En),directionalValue:wm(this.dn),orderedDocumentKey:wm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ns(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=VA(t.En,e.En),n!==0?n:(n=VA(t.dn,e.dn),n!==0?n:G.comparator(t.In,e.In)))}function VA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function wm(t){return IN()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function FA(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class BA{constructor(e){this.mn=new Fe((n,r)=>nt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=qS(e);if(n!==void 0&&!this.wn(n))return!1;const r=ra(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Fe(nt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new dm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new dm(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new dm(r.field,r.dir==="asc"?0:1)));return new bg(bg.UNKNOWN_ID,this.collectionId,n,Id.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){var n,r;if(re(t instanceof Te||t instanceof Le,20012),t instanceof Te){if(t instanceof SL){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>Te.create(t.field,"==",s)))||[];return Le.create(i,"or")}return t}const e=t.filters.map(i=>tV(i));return Le.create(e,t.op)}function O7(t){if(t.getFilters().length===0)return[];const e=h0(tV(t));return re(nV(e),7391),u0(e)||c0(e)?[e]:e.getFilters()}function u0(t){return t instanceof Te}function c0(t){return t instanceof Le&&$T(t)}function nV(t){return u0(t)||c0(t)||function(n){if(n instanceof Le&&e0(n)){for(const r of n.getFilters())if(!u0(r)&&!c0(r))return!1;return!0}return!1}(t)}function h0(t){if(re(t instanceof Te||t instanceof Le,34018),t instanceof Te)return t;if(t.filters.length===1)return h0(t.filters[0]);const e=t.filters.map(r=>h0(r));let n=Le.create(e,t.op);return n=Mg(n),nV(n)?n:(re(n instanceof Le,64498),re(Vu(n),40251),re(n.filters.length>1,57927),n.filters.reduce((r,i)=>QT(r,i)))}function QT(t,e){let n;return re(t instanceof Te||t instanceof Le,38388),re(e instanceof Te||e instanceof Le,25473),n=t instanceof Te?e instanceof Te?function(i,s){return Le.create([i,s],"and")}(t,e):jA(t,e):e instanceof Te?jA(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0,48005),Vu(i)&&Vu(s))return vL(i,s.getFilters());const o=e0(i)?i:s,a=e0(i)?s:i,l=o.filters.map(u=>QT(u,a));return Le.create(l,"or")}(t,e),Mg(n)}function jA(t,e){if(Vu(e))return vL(e,t.getFilters());{const n=e.filters.map(r=>QT(t,r));return Le.create(n,"or")}}function Mg(t){if(re(t instanceof Te||t instanceof Le,11850),t instanceof Te)return t;const e=t.getFilters();if(e.length===1)return Mg(e[0]);if(gL(t))return t;const n=e.map(i=>Mg(i)),r=[];return n.forEach(i=>{i instanceof Te?r.push(i):i instanceof Le&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Le.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(){this.Cn=new YT}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(er.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class YT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="IndexedDbIndexManager",Cp=new Uint8Array(0);class N7{constructor(e,n){this.databaseId=n,this.vn=new YT,this.Fn=new hs(r=>$a(r),(r,i)=>uf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:ln(i)};return $A(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[jN(n),""],!1,!0);return $A(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ci(o.parent))}return r})}addFieldIndex(e,n){const r=qc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Rl(e);return s.next(a=>{o.put(OA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=qc(e),i=Rl(e),s=Il(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=qc(e),r=Il(e),i=Rl(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new BA(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Il(e);let i=!0;const s=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_e();const a=[];return L.forEach(s,(l,u)=>{$(UA,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${$a(n)}`);const c=function(_,C){const O=qS(C);if(O===void 0)return null;for(const D of Pg(_,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(u,l),d=function(_,C){const O=new Map;for(const D of ra(C))for(const b of Pg(_,D.fieldPath))switch(b.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),b.value),Array.from(O.values())}return null}(u,l),f=function(_,C){const O=[];let D=!0;for(const b of ra(C)){const E=b.kind===0?_A(_,b.fieldPath,_.startAt):wA(_,b.fieldPath,_.startAt);O.push(E.value),D&&(D=E.inclusive)}return new Lu(O,D)}(u,l),p=function(_,C){const O=[];let D=!0;for(const b of ra(C)){const E=b.kind===0?wA(_,b.fieldPath,_.endAt):_A(_,b.fieldPath,_.endAt);O.push(E.value),D&&(D=E.inclusive)}return new Lu(O,D)}(u,l),g=this.On(l,u,f),S=this.On(l,u,p),T=this.Nn(l,u,d),v=this.Bn(l.indexId,c,g,f.inclusive,S,p.inclusive,T);return L.forEach(v,y=>r.Y(y,n.limit).next(_=>{_.forEach(C=>{const O=G.fromSegments(C.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=O7(Le.create(e.filters,"and")).map(r=>n0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/u]):Cp,p=this.kn(e,f,r[d%u],i),g=this.qn(e,f,s[d%u],o),S=a.map(T=>this.kn(e,f,T,!0));c.push(...this.createRange(p,g,S))}return c}kn(e,n,r,i){const s=new ca(e,G.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new ca(e,G.empty(),n,r);return i?s.An():s}xn(e,n){const r=new BA(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return L.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Fe(nt.comparator),c=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Kc;for(const i of ra(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ua.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Kc;return ua.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Kc;return ua.Kt.Dt(Dd(this.databaseId,n),r.Pn(function(s){const o=ra(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Kc);let s=0;for(const o of ra(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Od(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ua.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Kc;l.seed(a.un()),ua.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=qc(e),i=Rl(e);return(n?r.J(XS,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const f=d?new Id(d.sequenceNumber,new er(Wa(d.readTime),new G(ci(d.documentKey)),d.largestBatchId)):Id.empty(),p=c.fields.map(([g,S])=>new dm(nt.fromServerFormat(g),S));return new bg(c.indexId,c.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=qc(e),s=Rl(e);return this.Gn(e).next(o=>i.J(XS,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(OA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.zn(e,i,l).next(u=>{const c=this.jn(s,l);return u.isEqual(c)?L.resolve():this.Jn(e,s,l,u,c)}))))})}Hn(e,n,r,i){return Il(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Il(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Il(e);let s=new Fe(Ns);return i.ee({index:ZN,range:IDBKeyRange.only([r.indexId,this.uid,wm(this.$n(r,n))])},(o,a)=>{s=s.add(new ca(r.indexId,n,FA(a.arrayValue),FA(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Fe(Ns);const i=this.Qn(n,e);if(i==null)return r;const s=qS(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Od(o))for(const a of o.arrayValue.values||[])r=r.add(new ca(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ca(n.indexId,e.key,Cp,i));return r}Jn(e,n,r,i,s){$(UA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,f){const p=l.getIterator(),g=u.getIterator();let S=Tl(p),T=Tl(g);for(;S||T;){let v=!1,y=!1;if(S&&T){const _=c(S,T);_<0?y=!0:_>0&&(v=!0)}else S!=null?y=!0:v=!0;v?(d(T),T=Tl(g)):y?(f(S),S=Tl(p)):(S=Tl(p),T=Tl(g))}}(i,s,Ns,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return Rl(e).ee({index:JN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ns(o,a)).filter((o,a,l)=>!a||Ns(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ns(o,e),l=Ns(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Cp,G.empty()),l=i[o+1].Vn(this.uid,Cp,G.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Ns(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(zA)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||Z(44426))).next(zA)}}function $A(t){return Mt(t,Ad)}function Il(t){return Mt(t,Bh)}function qc(t){return Mt(t,LT)}function Rl(t){return Mt(t,Fh)}function zA(t){re(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;OT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new er(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rV=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t,e,n){const r=t.store(Nr),i=t.store(Pu),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(c,d,f)=>(a++,f.delete()));s.push(l.next(()=>{re(a===1,47070,{batchId:n.batchId})}));const u=[];for(const c of n.mutations){const d=XN(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return L.waitFor(s).next(()=>u)}function Ng(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(rV,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Jy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){re(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Jy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).ee({index:va,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ll(e),o=Ls(e);return o.add({}).next(a=>{re(typeof a=="number",49019);const l=new HT(a,n,r,i),u=function(p,g,S){const T=S.baseMutations.map(y=>Dg(p.yt,y)),v=S.mutations.map(y=>Dg(p.yt,y));return{userId:g,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:T,mutations:v}}(this.serializer,this.userId,l),c=[];let d=new Fe((f,p)=>he(f.canonicalString(),p.canonicalString()));for(const f of i){const p=XN(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),c.push(o.put(u)),c.push(s.put(p,dq))}return d.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Ls(e).get(n).next(r=>r?(re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),la(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ls(e).ee({index:va,range:i},(o,a,l)=>{a.userId===this.userId&&(re(a.batchId>=r,47524,{tr:r}),s=la(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ia;return Ls(e).ee({index:va,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ia],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).J(va,n).next(r=>r.map(i=>la(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=fm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ll(e).ee({range:i},(o,a,l)=>{const[u,c,d]=o,f=ci(c);if(u===this.userId&&n.path.isEqual(f))return Ls(e).get(d).next(p=>{if(!p)throw Z(61480,{nr:o,batchId:d});re(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(la(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);const i=[];return n.forEach(s=>{const o=fm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ll(e).ee({range:a},(u,c,d)=>{const[f,p,g]=u,S=ci(p);f===this.userId&&s.path.isEqual(S)?r=r.add(g):d.done()});i.push(l)}),L.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=fm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Fe(he);return Ll(e).ee({range:o},(l,u,c)=>{const[d,f,p]=l,g=ci(f);d===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(p)):c.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ls(e).get(s).next(o=>{if(o===null)throw Z(35274,{batchId:s});re(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(la(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return iV(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ll(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ci(s[1]);i.push(l)}else a.done()}).next(()=>{re(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return sV(e,this.userId,n)}_r(e){return oV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ia,lastStreamToken:""})}}function sV(t,e,n){const r=fm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ll(t).ee({range:s,X:!0},(a,l,u)=>{const[c,d,f]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Ls(t){return Mt(t,Nr)}function Ll(t){return Mt(t,Pu)}function oV(t){return Mt(t,Cd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ha(0)}static cr(){return new Ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Ha(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ae.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Cl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(re(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Cl(e).ee((o,a)=>{const l=ch(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Cl(e).ee((r,i)=>{const s=ch(i);n(s)})}lr(e){return HA(e).get(Cg).next(n=>(re(n!==null,2888),n))}hr(e,n){return HA(e).put(Cg,n)}Pr(e,n){return Cl(e).put(ZL(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$a(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Cl(e).ee({range:i,index:YN},(o,a,l)=>{const u=ch(a);uf(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Gs(e);return n.forEach(o=>{const a=ln(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=Gs(e);return L.forEach(n,s=>{const o=ln(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Gs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Gs(e);let s=_e();return i.ee({range:r,X:!0},(o,a,l)=>{const u=ci(o[1]),c=new G(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=ln(n.path),i=IDBKeyRange.bound([r],[jN(r)],!1,!0);let s=0;return Gs(e).ee({index:NT,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return Cl(e).get(n).next(r=>r?ch(r):null)}}function Cl(t){return Mt(t,ku)}function HA(t){return Mt(t,Ra)}function Gs(t){return Mt(t,Du)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="LruGarbageCollector",aV=1048576;function qA([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class V7{constructor(e){this.Ir=e,this.buffer=new Fe(qA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(KA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Po(n)?$(KA,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)})}}class F7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Cn.ce);const r=new V7(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(WA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Dl()<=Ee.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function uV(t,e){return new F7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,n){this.db=e,this.garbageCollector=uV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return xp(e,r)}removeReference(e,n,r){return xp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return xp(e,n)}br(e,n){return function(i,s){let o=!1;return oV(i).te(a=>sV(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Gs(e).delete(function(d){return[0,ln(d.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return xp(e,n)}Sr(e,n){const r=Gs(e);let i,s=Cn.ce;return r.ee({index:NT},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Cn.ce&&n(new G(ci(i)),s),s=u,i=l):s=Cn.ce}).next(()=>{s!==Cn.ce&&n(new G(ci(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xp(t,e){return Gs(t).put(function(r,i){return{targetId:0,path:ln(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.changes=new hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Jo(e).put(r)}removeEntry(e,n,r){return Jo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Og(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=dt.newInvalidDocument(n);return Jo(e).ee({index:pm,range:IDBKeyRange.only(Gc(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:dt.newInvalidDocument(n)};return Jo(e).ee({index:pm,range:IDBKeyRange.only(Gc(n))},(i,s)=>{r={document:this.Cr(n,s),size:Ng(s)}}).next(()=>r)}getEntries(e,n){let r=qn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=qn(),i=new He(G.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Ng(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Fe(QA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Gc(i.first()),Gc(i.last())),o=i.getIterator();let a=o.getNext();return Jo(e).ee({index:pm,range:s},(l,u,c)=>{const d=G.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&QA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j(Gc(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Og(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=qn();for(const d of u){const f=this.Cr(G.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(hf(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=qn();const o=XA(n,r),a=XA(n,er.max());return Jo(e).ee({index:QN,range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.Cr(G.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new U7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GA(e).get(GS).next(n=>(re(!!n,20021),n))}Dr(e,n){return GA(e).put(GS,n)}Cr(e,n){if(n){const r=R7(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return dt.newInvalidDocument(e)}}function hV(t){return new j7(t)}class U7 extends cV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new hs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Fe((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=kA(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Ng(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=kA(this.Nr.serializer,o.convertToNoDocument(ae.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function GA(t){return Mt(t,xd)}function Jo(t){return Mt(t,Rg)}function Gc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XA(t,e){const n=e.documentKey.path.toArray();return[t,Og(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function QA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zh(r.mutation,i,xn.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=lh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qn();const o=$h(),a=function(){return $h()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ds)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),zh(c.mutation,u,c.mutation.getFieldMask(),Ne.now())):o.set(u.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>a.set(u,new $7(c,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=$h();let i=new He((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||xn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=AL();c.forEach(f=>{if(!s.has(f)){const p=NL(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(hi());let a=Au,l=s;return o.next(u=>L.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?L.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(c=>({batchId:a,changes:xL(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=lh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=lh();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(d,f){return new tc(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,dt.newInvalidDocument(c)))});let a=lh();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&zh(c.mutation,u,xn.empty(),Ne.now()),hf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:eV(i.bundledQuery),readTime:wn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.overlays=new He(G.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hi();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=hi(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new He((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=hi(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=hi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return L.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qT(n,r));let s=this.qr.get(n);s===void 0&&(s=_e(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.Qr=new Fe(jt.$r),this.Ur=new Fe(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new G(new Oe([])),r=new jt(n,e),i=new jt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new Oe([])),r=new jt(n,e),i=new jt(n,e+1);let s=_e();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(jt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Ia:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),i=new jt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);return n.forEach(i=>{const s=new jt(i,0),o=new jt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new jt(new G(s),0);let a=new Fe(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new jt(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.ri=e,this.docs=function(){return new He(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qn();const o=n.path,a=new G(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||OT(WN(c),r)<=0||(i.has(c.key)||hf(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G7(this)}getSize(e){return L.resolve(this.size)}}class G7 extends cV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.persistence=e,this.si=new hs(n=>$a(n),uf),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new JT,this.targetCount=0,this.ai=Ha.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ha(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cn(0),this.li=!1,this.li=!0,this.hi=new H7,this.referenceDelegate=e(this),this.Pi=new X7(this),this.indexManager=new M7,this.remoteDocumentCache=function(i){return new q7(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new JL(n),this.Ii=new z7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new K7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new Q7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Q7 extends KN{constructor(e){super(),this.currentSequenceNumber=e}}class Zy{constructor(e){this.persistence=e,this.Ri=new JT,this.Vi=null}static mi(e){return new Zy(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=G.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Lg{constructor(e,n){this.persistence=e,this.pi=new hs(r=>ln(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uV(this,n)}static mi(e,n){return new Lg(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gm(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e){this.serializer=e}k(e,n,r,i){const s=new jy("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(lf)}(e),function(l){l.createObjectStore(Cd,{keyPath:hq}),l.createObjectStore(Nr,{keyPath:aA,autoIncrement:!0}).createIndex(va,lA,{unique:!0}),l.createObjectStore(Pu)}(e),YA(e),function(l){l.createObjectStore(ia)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Du),l.deleteObjectStore(ku),l.deleteObjectStore(Ra)}(e),YA(e)),o=o.next(()=>function(l){const u=l.store(Ra),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put(Cg,c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Nr).J().next(d=>{l.deleteObjectStore(Nr),l.createObjectStore(Nr,{keyPath:aA,autoIncrement:!0}).createIndex(va,lA,{unique:!0});const f=u.store(Nr),p=d.map(g=>f.put(g));return L.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Ou,{keyPath:wq})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(xd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore($y,{keyPath:Sq})})(e),function(l){l.createObjectStore(zy,{keyPath:Eq})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Wy,{keyPath:Aq});u.createIndex(QS,Pq,{unique:!1}),u.createIndex(eL,kq,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Rg,{keyPath:fq});u.createIndex(pm,pq),u.createIndex(QN,mq)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(ia))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(LT,{keyPath:Tq,autoIncrement:!0}).createIndex(XS,bq,{unique:!1}),l.createObjectStore(Fh,{keyPath:Iq}).createIndex(JN,Rq,{unique:!1}),l.createObjectStore(Bh,{keyPath:Cq}).createIndex(ZN,xq,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Fh).clear()}).next(()=>{n.objectStore(Bh).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(VT,{keyPath:Dq})})(e)})),r<18&&i>=18&&IN()&&(o=o.next(()=>{n.objectStore(Fh).clear()}).next(()=>{n.objectStore(Bh).clear()})),o}wi(e){let n=0;return e.store(ia).ee((r,i)=>{n+=Ng(i)}).next(()=>{const r={byteSize:n};return e.store(xd).put(GS,r)})}yi(e){const n=e.store(Cd),r=e.store(Nr);return n.J().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Ia],[s.userId,s.lastAcknowledgedBatchId]);return r.J(va,o).next(a=>L.forEach(a,l=>{re(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=la(this.serializer,l);return iV(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(Du),r=e.store(ia);return e.store(Ra).get(Cg).next(i=>{const s=[];return r.ee((o,a)=>{const l=new Oe(o),u=function(d){return[0,ln(d)]}(l);s.push(n.get(u).next(c=>c?L.resolve():(d=>n.put({targetId:0,path:ln(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}bi(e,n){e.createObjectStore(Ad,{keyPath:_q});const r=n.store(Ad),i=new YT,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ln(l)})}};return n.store(ia).ee({X:!0},(o,a)=>{const l=new Oe(o);return s(l.popLast())}).next(()=>n.store(Pu).ee({X:!0},([o,a,l],u)=>{const c=ci(a);return s(c.popLast())}))}Di(e){const n=e.store(ku);return n.ee((r,i)=>{const s=ch(i),o=ZL(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(ia),i=[];return r.ee((s,o)=>{const a=n.store(Rg),l=function(d){return d.document?new G(Oe.fromString(d.document.name).popFirst(5)):d.noDocument?G.fromSegments(d.noDocument.path):d.unknownDocument?G.fromSegments(d.unknownDocument.path):Z(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}Fi(e,n){const r=n.store(Nr),i=hV(this.serializer),s=new ZT(Zy.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??_e();la(this.serializer,l).keys().forEach(c=>u=u.add(c)),a.set(l.userId,u)}),L.forEach(a,(l,u)=>{const c=new nn(u),d=Yy.wt(this.serializer,c),f=s.getIndexManager(c),p=Jy.wt(c,this.serializer,f,s.referenceDelegate);return new dV(i,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new YS(n,Cn.ce),l).next()})})}}function YA(t){t.createObjectStore(Du,{keyPath:yq}).createIndex(NT,vq,{unique:!0}),t.createObjectStore(ku,{keyPath:"targetId"}).createIndex(YN,gq,{unique:!0}),t.createObjectStore(Ra)}const Vs="IndexedDbPersistence",N_=18e5,L_=5e3,V_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fV="main";class eb{constructor(e,n,r,i,s,o,a,l,u,c,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=c,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!eb.v())throw new H(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new B7(this,i),this.$i=n+fV,this.serializer=new JL(l),this.Ui=new yi(this.$i,this.Ni,new Y7(this.serializer)),this.hi=new x7,this.Pi=new L7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hV(this.serializer),this.Ii=new C7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,c===!1&&_t(Vs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,V_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Cn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ap(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Po(e))return $(Vs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(Vs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Xc(e).get(El).next(n=>L.resolve(this.es(n)))}ts(e){return Ap(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,N_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Mt(n,Ou);return r.J().next(i=>{const s=this.ss(i,N_),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Xc(e).get(El).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,L_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,V_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ap(e).J().next(r=>this.ss(r,L_).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$(Vs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[lf,Ou],e=>{const n=new YS(e,Cn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Ap(e).J().next(n=>this.ss(n,N_).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Jy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new N7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Yy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){$(Vs,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?Nq:l===17?iL:l===16?Mq:l===15?FT:l===14?rL:l===13?nL:l===12?Oq:l===11?tL:void Z(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new YS(a,this.ci?this.ci.next():Cn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new H(j.FAILED_PRECONDITION,HN);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Xc(e).get(El).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,L_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(j.FAILED_PRECONDITION,V_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xc(e).put(El,n)}static v(){return yi.v()}Zi(e){const n=Xc(e);return n.get(El).next(r=>this.es(r)?($(Vs,"Releasing primary lease."),n.delete(El)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;bN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return $(Vs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t(Vs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xc(t){return Mt(t,lf)}function Ap(t){return Mt(t,Ou)}function tb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new nb(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return bN()?8:qN(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new J7;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Dl()<=Ee.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Dl()<=Ee.DEBUG&&$("QueryEngine","Query:",Ol(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Dl()<=Ee.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):L.resolve())}ys(e,n){if(SA(n))return L.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=i0(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,i0(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return SA(n)||i.isEqual(ae.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(Dl()<=Ee.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ol(n)),this.vs(e,o,n,zN(i,Au)).next(a=>a))})}Ds(e,n){let r=new Fe(RL(e));return n.forEach((i,s)=>{hf(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Dl()<=Ee.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ol(n)),this.ps.getDocumentsMatchingQuery(e,n,er.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="LocalStore",Z7=3e8;class eG{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new He(he),this.xs=new hs(s=>$a(s),uf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function mV(t,e,n,r){return new eG(t,e,n,r)}async function gV(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function tG(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let p=L.resolve();return f.forEach(g=>{p=p.next(()=>c.getEntry(l,g)).next(S=>{const T=u.docVersions.get(g);re(T!==null,48541),S.version.compareTo(T)<0&&(d.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),c.addEntry(S)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function yV(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function nG(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(wt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(d,p),function(S,T,v){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=Z7?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,p,c)&&a.push(n.Pi.updateTargetData(s,p))});let l=qn(),u=_e();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(rG(s,o,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!r.isEqual(ae.min())){const c=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function rG(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(rb,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function iG(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ia),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vg(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new zi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Uu(t,e,n){const r=ne(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Po(o))throw o;$(rb,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function d0(t,e,n){const r=ne(t);let i=ae.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=ne(l),f=d.xs.get(c);return f!==void 0?L.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,c)}(r,o,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:_e())).next(a=>(wV(r,IL(e),a),{documents:a,Qs:s})))}function vV(t,e){const n=ne(t),r=ne(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function _V(t,e){const n=ne(t),r=n.Os.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,zN(r,Au),Number.MAX_SAFE_INTEGER)).then(i=>(wV(n,e,i),i))}function wV(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="firestore_clients";function JA(t,e){return`${SV}_${t}_${e}`}const EV="firestore_mutations";function ZA(t,e,n){let r=`${EV}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const TV="firestore_targets";function F_(t,e){return`${TV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="SharedClientState";class Fg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new H(i.error.code,i.error.message))),o?new Fg(e,n,i.state,s):(_t(ii,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new H(r.error.code,r.error.message))),s?new Wh(e,r.state,i):(_t(ii,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=zT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=GN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Bg(e,s):(_t(ii,`Failed to parse client data for instance '${e}': ${n}`),null)}}class ib{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ib(n.clientId,n.onlineState):(_t(ii,`Failed to parse online state: ${e}`),null)}}class f0{constructor(){this.activeTargetIds=zT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B_{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new He(he),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=JA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new f0),this.ro=new RegExp(`^${SV}_${o}_([^_]*)$`),this.io=new RegExp(`^${EV}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${TV}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(JA(this.persistenceKey,r));if(i){const s=Bg.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(F_(this.persistenceKey,e));if(i){const s=Wh.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(F_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $(ii,"READ",e,n),n}setItem(e,n){$(ii,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){$(ii,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if($(ii,"EVENT",n.key,n.newValue),n.key===this.eo)return void _t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=Cn.ce;if(s!=null)try{const a=JSON.parse(s);re(typeof a=="number",30636,{So:s}),o=a}catch(a){_t(ii,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Fg(this.currentUser,e,n,r),s=ZA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=ZA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=F_(this.persistenceKey,e),s=new Wh(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Bg.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Fg.Ws(new nn(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Wh.Ws(i,n)}uo(e){return ib.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(ii,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=zT();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class bV{constructor(){this.Mo=new f0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new f0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="ConnectivityMonitor";class tP{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(eP,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(eP,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pp=null;function p0(){return Pp===null?Pp=function(){return 268435456+Math.round(2147483648*Math.random())}():Pp++,"0x"+Pp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="RestConnection",oG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aG{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===xg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=p0(),a=this.zo(e,n.toUriEncodedString());$(j_,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),c=xo(u);return this.Jo(e,a,l,r,c).then(d=>($(j_,`Received RPC '${e}' ${o}: `,d),d),d=>{throw bd(j_,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ec}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=oG[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class uG extends aG{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=p0();return new Promise((a,l)=>{const u=new MN;u.setWithCredentials(!0),u.listenOnce(NN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hm.NO_ERROR:const d=u.getResponseJson();$(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case hm.TIMEOUT:$(en,`RPC '${e}' ${o} timed out`),l(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case hm.HTTP_ERROR:const f=u.getStatus();if($(en,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const S=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(y)>=0?y:j.UNKNOWN}(g.status);l(new H(S,g.message))}else l(new H(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(j.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$(en,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);$(en,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}T_(e,n,r){const i=p0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FN(),a=VN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");$(en,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.I_(d);let f=!1,p=!1;const g=new lG({Yo:T=>{p?$(en,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||($(en,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),$(en,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},Zo:()=>d.close()}),S=(T,v,y)=>{T.listen(v,_=>{try{y(_)}catch(C){setTimeout(()=>{throw C},0)}})};return S(d,ah.EventType.OPEN,()=>{p||($(en,`RPC '${e}' stream ${i} transport opened.`),g.o_())}),S(d,ah.EventType.CLOSE,()=>{p||(p=!0,$(en,`RPC '${e}' stream ${i} transport closed`),g.a_(),this.E_(d))}),S(d,ah.EventType.ERROR,T=>{p||(p=!0,bd(en,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),g.a_(new H(j.UNAVAILABLE,"The operation could not be completed")))}),S(d,ah.EventType.MESSAGE,T=>{var v;if(!p){const y=T.data[0];re(!!y,16349);const _=y,C=(_==null?void 0:_.error)||((v=_[0])==null?void 0:v.error);if(C){$(en,`RPC '${e}' stream ${i} received error:`,C);const O=C.status;let D=function(R){const A=St[R];if(A!==void 0)return FL(A)}(O),b=C.message;D===void 0&&(D=j.INTERNAL,b="Unknown error status: "+O+" with message "+C.message),p=!0,g.a_(new H(D,b)),d.close()}else $(en,`RPC '${e}' stream ${i} received:`,y),g.u_(y)}}),S(a,LN.STAT_EVENT,T=>{T.stat===HS.PROXY?$(en,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===HS.NOPROXY&&$(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(){return typeof window<"u"?window:null}function Sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t){return new g7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="PersistentStream";class CV{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RV(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(nP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(nP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cG extends CV{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_7(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?wn(o.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=a0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ag(l)?{documents:KL(s,l)}:{query:qL(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UL(s,o.resumeToken);const u=s0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=ju(s,o.snapshotVersion.toTimestamp());const u=s0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=S7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=a0(this.serializer),n.removeTarget=e,this.q_(n)}}class hG extends CV{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=w7(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=a0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Dg(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{}class fG extends dG{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,o0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,o0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_t(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class mG{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{nl(this)&&($(Ka,"Restarting streams for network reachability change."),await async function(l){const u=ne(l);u.Ea.add(4),await mf(u),u.Ra.set("Unknown"),u.Ea.delete(4),await pf(u)}(this))})}),this.Ra=new pG(r,i)}}async function pf(t){if(nl(t))for(const e of t.da)await e(!0)}async function mf(t){for(const e of t.da)await e(!1)}function tv(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ab(n)?ob(n):ic(n).O_()&&sb(n,e))}function $u(t,e){const n=ne(t),r=ic(n);n.Ia.delete(e),r.O_()&&xV(n,e),n.Ia.size===0&&(r.O_()?r.L_():nl(n)&&n.Ra.set("Unknown"))}function sb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ic(t).Y_(e)}function xV(t,e){t.Va.Ue(e),ic(t).Z_(e)}function ob(t){t.Va=new d7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ic(t).start(),t.Ra.ua()}function ab(t){return nl(t)&&!ic(t).x_()&&t.Ia.size>0}function nl(t){return ne(t).Ea.size===0}function AV(t){t.Va=void 0}async function gG(t){t.Ra.set("Online")}async function yG(t){t.Ia.forEach((e,n)=>{sb(t,e)})}async function vG(t,e){AV(t),ab(t)?(t.Ra.ha(e),ob(t)):t.Ra.set("Unknown")}async function _G(t,e,n){if(t.Ra.set("Online"),e instanceof jL&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){$(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jg(t,r)}else if(e instanceof _m?t.Va.Ze(e):e instanceof BL?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await yV(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(wt.EMPTY_BYTE_STRING,c.snapshotVersion)),xV(s,l);const d=new zi(c.target,l,u,c.sequenceNumber);sb(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$(Ka,"Failed to raise snapshot:",r),await jg(t,r)}}async function jg(t,e,n){if(!Po(e))throw e;t.Ea.add(1),await mf(t),t.Ra.set("Offline"),n||(n=()=>yV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Ka,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pf(t)})}function PV(t,e){return e().catch(n=>jg(t,n,e))}async function rc(t){const e=ne(t),n=So(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ia;for(;wG(e);)try{const i=await iG(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,SG(e,i)}catch(i){await jg(e,i)}kV(e)&&DV(e)}function wG(t){return nl(t)&&t.Ta.length<10}function SG(t,e){t.Ta.push(e);const n=So(t);n.O_()&&n.X_&&n.ea(e.mutations)}function kV(t){return nl(t)&&!So(t).x_()&&t.Ta.length>0}function DV(t){So(t).start()}async function EG(t){So(t).ra()}async function TG(t){const e=So(t);for(const n of t.Ta)e.ea(n.mutations)}async function bG(t,e,n){const r=t.Ta.shift(),i=KT.from(r,e,n);await PV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rc(t)}async function IG(t,e){e&&So(t).X_&&await async function(r,i){if(function(o){return u7(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();So(r).B_(),await PV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rc(r)}}(t,e),kV(t)&&DV(t)}async function rP(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),$(Ka,"RemoteStore received new credentials");const r=nl(n);n.Ea.add(3),await mf(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pf(n)}async function m0(t,e){const n=ne(t);e?(n.Ea.delete(2),await pf(n)):e||(n.Ea.add(2),await mf(n),n.Ra.set("Unknown"))}function ic(t){return t.ma||(t.ma=function(n,r,i){const s=ne(n);return s.sa(),new cG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:gG.bind(null,t),t_:yG.bind(null,t),r_:vG.bind(null,t),H_:_G.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ab(t)?ob(t):t.Ra.set("Unknown")):(await t.ma.stop(),AV(t))})),t.ma}function So(t){return t.fa||(t.fa=function(n,r,i){const s=ne(n);return s.sa(),new hG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:EG.bind(null,t),r_:IG.bind(null,t),ta:TG.bind(null,t),na:bG.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await rc(t)):(await t.fa.stop(),t.Ta.length>0&&($(Ka,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new lb(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ub(t,e){if(_t("AsyncQueue",`${e}: ${t}`),Po(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{static emptySet(e){return new pu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=lh(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.ga=new He(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class zu{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zu(e,n,pu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class CG{constructor(){this.queries=sP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=sP(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function sP(){return new hs(t=>bL(t),qy)}async function cb(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new RG,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=ub(o,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&db(n)}async function hb(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xG(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&db(n)}function AG(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function db(t){t.Ca.forEach(e=>{e.next()})}var g0,oP;(oP=g0||(g0={})).Ma="default",oP.Cache="cache";class fb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==g0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.key=e}}class MV{constructor(e){this.key=e}}class PG{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=RL(e),this.tu=new pu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new iP,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=hf(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),S=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let T=!1;f&&p?f.data.isEqual(p.data)?g!==S&&(r.track({type:3,doc:p}),T=!0):this.su(f,p)||(r.track({type:2,doc:p}),T=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),T=!0):f&&!p&&(r.track({type:1,doc:f}),T=!0,(l||u)&&(a=!0)),T&&(p?(o=o.add(p),s=S?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((c,d)=>function(p,g){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:T})}};return S(p)-S(g)}(c.type,d.type)||this.eu(c.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new zu(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new MV(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new OV(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sc="SyncEngine";class kG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DG{constructor(e){this.key=e,this.hu=!1}}class OG{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new hs(a=>bL(a),qy),this.Iu=new Map,this.Eu=new Set,this.du=new He(G.comparator),this.Au=new Map,this.Ru=new JT,this.Vu={},this.mu=new Map,this.fu=Ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MG(t,e,n=!0){const r=nv(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await NV(r,e,n,!0),i}async function NG(t,e){const n=nv(t);await NV(n,e,!0,!1)}async function NV(t,e,n,r){const i=await Vg(t.localStore,Jn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await pb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tv(t.remoteStore,i),a}async function pb(t,e,n,r,i){t.pu=(d,f,p)=>async function(S,T,v,y){let _=T.view.ru(v);_.Cs&&(_=await d0(S.localStore,T.query,!1).then(({documents:b})=>T.view.ru(b,_)));const C=y&&y.targetChanges.get(T.targetId),O=y&&y.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(_,S.isPrimaryClient,C,O);return y0(S,T.targetId,D.au),D.snapshot}(t,d,f,p);const s=await d0(t.localStore,e,!0),o=new PG(e,s.Qs),a=o.ru(s.documents),l=ff.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);y0(t,n,u.au);const c=new kG(e,n,o);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function LG(t,e,n){const r=ne(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!qy(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Uu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$u(r.remoteStore,i.targetId),Wu(r,i.targetId)}).catch(Ao)):(Wu(r,i.targetId),await Uu(r.localStore,i.targetId,!0))}async function VG(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$u(n.remoteStore,r.targetId))}async function FG(t,e,n){const r=vb(t);try{const i=await function(o,a){const l=ne(o),u=Ne.now(),c=a.reduce((p,g)=>p.add(g.key),_e());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=qn(),S=_e();return l.Ns.getEntries(p,c).next(T=>{g=T,g.forEach((v,y)=>{y.isValidDocument()||(S=S.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(T=>{d=T;const v=[];for(const y of a){const _=a7(y,d.get(y.key).overlayedDocument);_!=null&&v.push(new ds(y.key,_,pL(_.value.mapValue),gn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,v,a)}).next(T=>{f=T;const v=T.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(p,T.batchId,v)})}).then(()=>({batchId:f.batchId,changes:xL(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new He(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Do(r,i.changes),await rc(r.remoteStore)}catch(i){const s=ub(i,"Failed to persist write");n.reject(s)}}async function LV(t,e){const n=ne(t);try{const r=await nG(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?re(o.hu,14607):i.removedDocuments.size>0&&(re(o.hu,42227),o.hu=!1))}),await Do(n,r,e)}catch(r){await Ao(r)}}function aP(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&db(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BG(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new He(G.comparator);o=o.insert(s,dt.newNoDocument(s,ae.min()));const a=_e().add(s),l=new df(ae.min(),new Map,new He(he),o,a);await LV(r,l),r.du=r.du.remove(s),r.Au.delete(e),yb(r)}else await Uu(r.localStore,e,!1).then(()=>Wu(r,e,n)).catch(Ao)}async function jG(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await tG(n.localStore,e);gb(n,r,null),mb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Do(n,i)}catch(i){await Ao(i)}}async function UG(t,e,n){const r=ne(t);try{const i=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(re(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);gb(r,e,n),mb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Do(r,i)}catch(i){await Ao(i)}}function mb(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function gb(t,e,n){const r=ne(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Wu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VV(t,r)})}function VV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($u(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),yb(t))}function y0(t,e,n){for(const r of n)r instanceof OV?(t.Ru.addReference(r.key,e),$G(t,r)):r instanceof MV?($(sc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VV(t,r.key)):Z(19791,{wu:r})}function $G(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(sc,"New document in limbo: "+n),t.Eu.add(r),yb(t))}function yb(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(Oe.fromString(e)),r=t.fu.next();t.Au.set(r,new DG(n)),t.du=t.du.insert(n,r),tv(t.remoteStore,new zi(Jn(cf(n.path)),r,"TargetPurposeLimboResolution",Cn.ce))}}async function Do(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=nb.As(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const c=ne(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(u,f=>L.forEach(f.Es,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>L.forEach(f.ds,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Po(d))throw d;$(rb,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const p=c.Ms.get(f),g=p.snapshotVersion,S=p.withLastLimboFreeSnapshotVersion(g);c.Ms=c.Ms.insert(f,S)}}}(r.localStore,s))}async function zG(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){$(sc,"User change. New user:",e.toKey());const r=await gV(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new H(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(n,r.Ls)}}function WG(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function HG(t,e){const n=ne(t),r=await d0(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&y0(n,e.targetId,i.au),i}async function KG(t,e){const n=ne(t);return _V(n.localStore,e).then(r=>Do(n,r))}async function qG(t,e,n,r){const i=ne(t),s=await function(a,l){const u=ne(a),c=ne(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.er(d,l).next(f=>f?u.localDocuments.getDocuments(d,f):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await rc(i.remoteStore):n==="acknowledged"||n==="rejected"?(gb(i,e,r||null),mb(i,e),function(a,l){ne(ne(a).mutationQueue).ir(l)}(i.localStore,e)):Z(6720,"Unknown batchState",{Su:n}),await Do(i,s)):$(sc,"Cannot apply mutation batch with id: "+e)}async function GG(t,e){const n=ne(t);if(nv(n),vb(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await lP(n,r.toArray());n.gu=!0,await m0(n.remoteStore,!0);for(const s of i)tv(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Wu(n,o),Uu(n.localStore,o,!0))),$u(n.remoteStore,o)}),await i,await lP(n,r),function(o){const a=ne(o);a.Au.forEach((l,u)=>{$u(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new He(G.comparator)}(n),n.gu=!1,await m0(n.remoteStore,!1)}}async function lP(t,e,n){const r=ne(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Vg(r.localStore,Jn(l[0]));for(const u of l){const c=r.Tu.get(u),d=await HG(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await vV(r.localStore,o);a=await Vg(r.localStore,u),await pb(r,FV(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function FV(t){return EL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function XG(t){return function(n){return ne(ne(n).persistence).Ts()}(ne(t).localStore)}async function QG(t,e,n,r){const i=ne(t);if(i.gu)return void $(sc,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await _V(i.localStore,IL(s[0])),a=df.createSynthesizedRemoteEventForCurrentChange(e,n==="current",wt.EMPTY_BYTE_STRING);await Do(i,o,a);break}case"rejected":await Uu(i.localStore,e,!0),Wu(i,e,r);break;default:Z(64155,n)}}async function YG(t,e,n){const r=nv(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$(sc,"Adding an already active target "+i);continue}const s=await vV(r.localStore,i),o=await Vg(r.localStore,s);await pb(r,FV(s),o.targetId,!1,o.resumeToken),tv(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await Uu(r.localStore,i,!1).then(()=>{$u(r.remoteStore,i),Wu(r,i)}).catch(Ao)}}function nv(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BG.bind(null,e),e.Pu.H_=xG.bind(null,e.eventManager),e.Pu.yu=AG.bind(null,e.eventManager),e}function vb(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UG.bind(null,e),e}class Vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ev(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return mV(this.persistence,new pV,e.initialUser,this.serializer)}Cu(e){return new ZT(Zy.mi,this.serializer)}Du(e){return new bV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vd.provider={build:()=>new Vd};class JG extends Vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){re(this.persistence.referenceDelegate instanceof Lg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ZT(r=>Lg.mi(r,n),this.serializer)}}class BV extends Vd{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await vb(this.xu.syncEngine),await rc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return mV(this.persistence,new pV,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new lV(r,e.asyncQueue,n)}Mu(e,n){const r=new uq(n,this.persistence);return new lq(e.asyncQueue,r)}Cu(e){const n=tb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new eb(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,IV(),Sm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new bV}}class ZG extends BV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof B_&&(this.sharedClientState.syncEngine={Co:qG.bind(null,n),vo:QG.bind(null,n),Fo:YG.bind(null,n),Ts:XG.bind(null,n),Do:KG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await GG(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=IV();if(!B_.v(n))throw new H(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=tb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new B_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zG.bind(null,this.syncEngine),await m0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CG}()}createDatastore(e){const n=ev(e.databaseInfo.databaseId),r=function(s){return new uG(s)}(e.databaseInfo);return function(s,o,a,l){return new fG(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new mG(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>aP(this.syncEngine,n,0),function(){return tP.v()?new tP:new sG}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new OG(i,s,o,a,l,u);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);$(Ka,"RemoteStore shutting down."),s.Ea.add(5),await mf(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Fd.provider={build:()=>new Fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="FirestoreClient";class eX{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=DT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(Eo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ub(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function U_(t,e){t.asyncQueue.verifyOperationInProgress(),$(Eo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jV(t);$(Eo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rP(e.remoteStore,i)),t._onlineComponents=e}async function jV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Eo,"Using user provided OfflineComponentProvider");try{await U_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;bd("Error using user provided cache. Falling back to memory cache: "+n),await U_(t,new Vd)}}else $(Eo,"Using default OfflineComponentProvider"),await U_(t,new JG(void 0));return t._offlineComponents}async function wb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Eo,"Using user provided OnlineComponentProvider"),await uP(t,t._uninitializedComponentsProvider._online)):($(Eo,"Using default OnlineComponentProvider"),await uP(t,new Fd))),t._onlineComponents}function tX(t){return jV(t).then(e=>e.persistence)}function nX(t){return wb(t).then(e=>e.remoteStore)}function rX(t){return wb(t).then(e=>e.syncEngine)}async function Ug(t){const e=await wb(t),n=e.eventManager;return n.onListen=MG.bind(null,e.syncEngine),n.onUnlisten=LG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VG.bind(null,e.syncEngine),n}function iX(t){return t.asyncQueue.enqueue(async()=>{const e=await tX(t),n=await nX(t);return e.setNetworkEnabled(!0),function(i){const s=ne(i);return s.Ea.delete(0),pf(s)}(n)})}function sX(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new _b({next:f=>{c.Nu(),o.enqueueAndForget(()=>hb(s,d));const p=f.docs.has(a);!p&&f.fromCache?u.reject(new H(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?u.reject(new H(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new fb(cf(a.path),c,{includeMetadataChanges:!0,qa:!0});return cb(s,d)}(await Ug(t),t.asyncQueue,e,n,r)),r.promise}function oX(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new _b({next:f=>{c.Nu(),o.enqueueAndForget(()=>hb(s,d)),f.fromCache&&l.source==="server"?u.reject(new H(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new fb(a,c,{includeMetadataChanges:!0,qa:!0});return cb(s,d)}(await Ug(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX="firestore.googleapis.com",hP=!0;class dP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aX,this.ssl=hP}else this.host=e.host,this.ssl=e.ssl??hP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aV)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UV(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sb{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QK;switch(r.type){case"firstParty":return new ZK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cP.get(n);r&&($("ComponentProvider","Removing Datastore"),cP.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(af(n,ft._jsonSchema))return new ft(e,r||null,new G(Oe.fromString(n.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:bt("string",ft._jsonSchemaVersion),referencePath:bt("string")};class mo extends Oo{constructor(e,n,r){super(e,n,cf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new G(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function rv(t,e,...n){if(t=at(t),UN("collection","path",e),t instanceof Sb){const r=Oe.fromString(e,...n);return nA(r),new mo(t,null,r)}{if(!(t instanceof ft||t instanceof mo))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return nA(r),new mo(t.firestore,null,r)}}function oc(t,e,...n){if(t=at(t),arguments.length===1&&(e=DT.newId()),UN("doc","path",e),t instanceof Sb){const r=Oe.fromString(e,...n);return tA(r),new ft(t,null,new G(r))}{if(!(t instanceof ft||t instanceof mo))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return tA(r),new ft(t.firestore,t instanceof mo?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="AsyncQueue";class pP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RV(this,"async_queue_retry"),this._c=()=>{const r=Sm();r&&$(fP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ur;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;$(fP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_t("INTERNAL UNHANDLED ERROR: ",mP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=lb.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:mP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class is extends Sb{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new pP,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pP(e),this._firestoreClient=void 0,await e}}}function lX(t,e,n){n||(n=xg);const r=of(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Fa(s,e))return i;throw new H(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new H(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aV)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&xo(e.host)&&xT(e.host),r.initialize({options:e,instanceIdentifier:n})}function gf(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uX(t),t._firestoreClient}function uX(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,c){return new Vq(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,UV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new eX(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function cX(t){if(t._initialized&&!t._terminated)throw new H(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!yi.v())return Promise.resolve();const i=r+fV;await yi.delete(i)}(tb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function hX(t){return iX(gf(t=Yn(t,is)))}function $V(t){return MK(t.app,"firestore",t._databaseId.database),t._delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hr(wt.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hr(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(af(e,hr._jsonSchema))return hr.fromBase64String(e.bytes)}}hr._jsonSchemaVersion="firestore/bytes/1.0",hr._jsonSchema={type:bt("string",hr._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(e){if(af(e,vi._jsonSchema))return new vi(e.latitude,e.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:bt("string",vi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(af(e,_i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _i(e.vectorValues);throw new H(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_i._jsonSchemaVersion="firestore/vectorValue/1.0",_i._jsonSchema={type:bt("string",_i._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX=/^__.*__$/;class fX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new nc(e,this.data,n,this.fieldTransforms)}}class zV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Tb{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $g(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WV(this.Ac)&&dX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ev(e)}Cc(e,n,r,i=!1){return new Tb({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bb(t){const e=t._freezeSettings(),n=ev(t._databaseId);return new pX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mX(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Ib("Data must be an object, but it was:",o,r);const a=HV(r,o);let l,u;if(s.merge)l=new xn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=v0(e,d,n);if(!o.contains(f))throw new H(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);qV(c,f)||c.push(f)}l=new xn(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new fX(new on(a),l,u)}class sv extends Eb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sv}}function gX(t,e,n,r){const i=t.Cc(1,e,n);Ib("Data must be an object, but it was:",i,r);const s=[],o=on.empty();ko(r,(l,u)=>{const c=Rb(e,l,n);u=at(u);const d=i.yc(c);if(u instanceof sv)s.push(c);else{const f=yf(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new xn(s);return new zV(o,a,i.fieldTransforms)}function yX(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[v0(e,r,n)],l=[i];if(s.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(v0(e,s[f])),l.push(s[f+1]);const u=[],c=on.empty();for(let f=a.length-1;f>=0;--f)if(!qV(u,a[f])){const p=a[f];let g=l[f];g=at(g);const S=o.yc(p);if(g instanceof sv)u.push(p);else{const T=yf(g,S);T!=null&&(u.push(p),c.set(p,T))}}const d=new xn(u);return new zV(c,d,o.fieldTransforms)}function vX(t,e,n,r=!1){return yf(n,t.Cc(r?4:3,e))}function yf(t,e){if(KV(t=at(t)))return Ib("Unsupported field value:",e,t),HV(t,e);if(t instanceof Eb)return function(r,i){if(!WV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=yf(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return e7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ne.fromDate(r);return{timestampValue:ju(i.serializer,s)}}if(r instanceof Ne){const s=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ju(i.serializer,s)}}if(r instanceof vi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hr)return{bytesValue:UL(i.serializer,r._byteString)};if(r instanceof ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _i)return function(o,a){return{mapValue:{fields:{[jT]:{stringValue:UT},[Mu]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return WT(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${By(r)}`)}(t,e)}function HV(t,e){const n={};return sL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(r,i)=>{const s=yf(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function KV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof vi||t instanceof hr||t instanceof ft||t instanceof Eb||t instanceof _i)}function Ib(t,e,n){if(!KV(n)||!$N(n)){const r=By(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function v0(t,e,n){if((e=at(e))instanceof iv)return e._internalPath;if(typeof e=="string")return Rb(t,e);throw $g("Field path arguments must be of type string or ",t,!1,void 0,n)}const _X=new RegExp("[~\\*/\\[\\]]");function Rb(t,e,n){if(e.search(_X)>=0)throw $g(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iv(...e.split("."))._internalPath}catch{throw $g(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $g(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(j.INVALID_ARGUMENT,a+t+l)}function qV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wX extends GV{data(){return super.data()}}function Cb(t,e){return typeof e=="string"?Rb(t,e):e instanceof iv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xb{}class QV extends xb{}function Ab(t,e,...n){let r=[];e instanceof xb&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof kb).length,a=s.filter(l=>l instanceof Pb).length;if(o>1||o>0&&a>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Pb extends QV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pb(e,n,r)}_apply(e){const n=this._parse(e);return JV(e._query,n),new Oo(e.firestore,e.converter,r0(e._query,n))}_parse(e){const n=bb(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){vP(d,c);const g=[];for(const S of d)g.push(yP(l,s,S));f={arrayValue:{values:g}}}else f=yP(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||vP(d,c),f=vX(a,o,d,c==="in"||c==="not-in");return Te.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class kb extends xb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)JV(o,l),o=r0(o,l)}(e._query,n),new Oo(e.firestore,e.converter,r0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Db extends QV{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Db(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Md(s,o)}(e._query,this._field,this._direction);return new Oo(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new tc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function YV(t,e="asc"){const n=e,r=Cb("orderBy",t);return Db._create(r,n)}function yP(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TL(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!G.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dd(t,new G(r))}if(n instanceof ft)return Dd(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${By(n)}.`)}function vP(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JV(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SX{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ko(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Mu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ye(o.doubleValue));return new _i(n)}convertGeoPoint(e){return new vi(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);re(YL(r),9688,{name:e});const i=new Ua(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||_t(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EX(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends GV{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Em(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:bt("string",xa._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Em extends xa{data(e={}){return super.data(e)}}class Aa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Em(this._firestore,this._userDataWriter,r.key,r,new hh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Em(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Em(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:TX(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=DT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(t){t=Yn(t,ft);const e=Yn(t.firestore,is);return sX(gf(e),t._key).then(n=>e2(e,t,n))}Aa._jsonSchemaVersion="firestore/querySnapshot/1.0",Aa._jsonSchema={type:bt("string",Aa._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class Ob extends SX{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function ZV(t){t=Yn(t,Oo);const e=Yn(t.firestore,is),n=gf(e),r=new Ob(e);return XV(t._query),oX(n,t._query).then(i=>new Aa(e,r,t,i))}function Mb(t,e,n){t=Yn(t,ft);const r=Yn(t.firestore,is),i=EX(t.converter,e,n);return Nb(r,[mX(bb(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gn.none())])}function IX(t,e,n,...r){t=Yn(t,ft);const i=Yn(t.firestore,is),s=bb(i);let o;return o=typeof(e=at(e))=="string"||e instanceof iv?yX(s,"updateDoc",t._key,e,n,r):gX(s,"updateDoc",t._key,e),Nb(i,[o.toMutation(t._key,gn.exists(!0))])}function RX(t){return Nb(Yn(t.firestore,is),[new Qy(t._key,gn.none())])}function CX(t,...e){var l,u,c;t=at(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||gP(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(gP(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(u=d.error)==null?void 0:u.bind(d),e[r+2]=(c=d.complete)==null?void 0:c.bind(d)}let s,o,a;if(t instanceof ft)o=Yn(t.firestore,is),a=cf(t._key.path),s={next:d=>{e[r]&&e[r](e2(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Yn(t,Oo);o=Yn(d.firestore,is),a=d._query;const f=new Ob(o);s={next:p=>{e[r]&&e[r](new Aa(o,f,d,p))},error:e[r+1],complete:e[r+2]},XV(t._query)}return function(f,p,g,S){const T=new _b(S),v=new fb(p,T,g);return f.asyncQueue.enqueueAndForget(async()=>cb(await Ug(f),v)),()=>{T.Nu(),f.asyncQueue.enqueueAndForget(async()=>hb(await Ug(f),v))}}(gf(o),a,i,s)}function Nb(t,e){return function(r,i){const s=new Ur;return r.asyncQueue.enqueueAndForget(async()=>FG(await rX(r),i,s)),s.promise}(gf(t),e)}function e2(t,e,n){const r=n.docs.get(e._key),i=new Ob(t);return new xa(t,i,e._key,r,new hh(n.hasPendingWrites,n.fromCache),e.converter)}class xX{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=DX(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function AX(t){return new xX(t)}class PX{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fd.provider,this._offlineComponentProvider={build:n=>new BV(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class kX{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fd.provider,this._offlineComponentProvider={build:n=>new ZG(n,e==null?void 0:e.cacheSizeBytes)}}}function DX(t){return new PX(t==null?void 0:t.forceOwnership)}function OX(){return new kX}(function(e,n=!0){(function(i){ec=i})(tl),Ba(new vo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new is(new YK(r.getProvider("auth-internal")),new eq(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(u.options.projectId,c)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gi(Yx,Jx,e),gi(Yx,Jx,"esm2020")})();function t2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MX=t2,n2=new rf("auth","Firebase",t2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new AT("@firebase/auth");function NX(t,...e){zg.logLevel<=Ee.WARN&&zg.warn(`Auth (${tl}): ${t}`,...e)}function Tm(t,...e){zg.logLevel<=Ee.ERROR&&zg.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,...e){throw Lb(t,...e)}function wi(t,...e){return Lb(t,...e)}function r2(t,e,n){const r={...MX(),[e]:n};return new rf("auth","Firebase",r).create(e,{appName:t.name})}function Xi(t){return r2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return n2.create(t,...e)}function le(t,e,...n){if(!t)throw Lb(e,...n)}function Wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tm(e),new Error(e)}function ss(t,e){t||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function LX(){return _P()==="http:"||_P()==="https:"}function _P(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LX()||CH()||"connection"in navigator)?navigator.onLine:!0}function FX(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.shortDelay=e,this.longDelay=n,ss(n>e,"Short delay should be less than long delay!"),this.isMobile=IH()||xH()}get(){return VX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e){ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UX=new vf(3e4,6e4);function fs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ps(t,e,n,r,i={}){return s2(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=sf({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return RH()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&xo(t.emulatorConfig.host)&&(u.credentials="include"),i2.fetch()(await o2(t,t.config.apiHost,n,a),u)})}async function s2(t,e,n){t._canInitEmulator=!1;const r={...BX,...e};try{const i=new zX(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw kp(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw r2(t,c,u);zr(t,c)}}catch(i){if(i instanceof Ci)throw i;zr(t,"network-request-failed",{message:String(i)})}}async function _f(t,e,n,r,i={}){const s=await ps(t,e,n,r,i);return"mfaPendingCredential"in s&&zr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function o2(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Vb(t.config,i):`${t.config.apiScheme}://${i}`;return jX.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function $X(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wi(this.auth,"network-request-failed")),UX.get())})}}function kp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=wi(t,e,r);return i.customData._tokenResponse=n,i}function wP(t){return t!==void 0&&t.enterprise!==void 0}class WX{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $X(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HX(t,e){return ps(t,"GET","/v2/recaptchaConfig",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KX(t,e){return ps(t,"POST","/v1/accounts:delete",e)}async function Wg(t,e){return ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qX(t,e=!1){const n=at(t),r=await n.getIdToken(e),i=Fb(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Hh($_(i.auth_time)),issuedAtTime:Hh($_(i.iat)),expirationTime:Hh($_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $_(t){return Number(t)*1e3}function Fb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tm("JWT malformed, contained fewer than 3 sections"),null;try{const i=yN(n);return i?JSON.parse(i):(Tm("Failed to decode base64 JWT payload"),null)}catch(i){return Tm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function SP(t){const e=Fb(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ci&&GX(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GX({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hh(this.lastLoginAt),this.creationTime=Hh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hg(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Bd(t,Wg(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?a2(i.providerUserInfo):[],o=YX(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new w0(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function QX(t){const e=at(t);await Hg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YX(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JX(t,e){const n=await s2(t,{},async()=>{const r=sf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await o2(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&xo(t.emulatorConfig.host)&&(l.credentials="include"),i2.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZX(t,e){return ps(t,"POST","/v2/accounts:revokeToken",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=SP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await JX(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new mu;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mu,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new XX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new w0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Bd(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qX(this,e)}reload(){return QX(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await Bd(this,KX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:g,stsTokenManager:S}=n;le(d&&S,e,"internal-error");const T=mu.fromJSON(this.name,S);le(typeof d=="string",e,"internal-error"),Fs(r,e.name),Fs(i,e.name),le(typeof f=="boolean",e,"internal-error"),le(typeof p=="boolean",e,"internal-error"),Fs(s,e.name),Fs(o,e.name),Fs(a,e.name),Fs(l,e.name),Fs(u,e.name),Fs(c,e.name);const v=new Fr({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:T,createdAt:u,lastLoginAt:c});return g&&Array.isArray(g)&&(v.providerData=g.map(y=>({...y}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,n,r=!1){const i=new mu;i.updateFromServerResponse(n);const s=new Fr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?a2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new mu;a.updateFromIdToken(r);const l=new Fr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new w0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=new Map;function Hi(t){ss(t instanceof Function,"Expected a class definition");let e=EP.get(t);return e?(ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l2.type="NONE";const TP=l2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e,n){return`firebase:${t}:${e}:${n}`}class gu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bm(this.userKey,i.apiKey,s),this.fullPersistenceKey=bm("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wg(this.auth,{idToken:e}).catch(()=>{});return n?Fr._fromGetAccountInfoResponse(this.auth,n,e):null}return Fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gu(Hi(TP),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Hi(TP);const o=bm(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await Wg(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Fr._fromGetAccountInfoResponse(e,f,c)}else d=Fr._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new gu(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new gu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p2(e))return"Blackberry";if(m2(e))return"Webos";if(c2(e))return"Safari";if((e.includes("chrome/")||h2(e))&&!e.includes("edge/"))return"Chrome";if(f2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function u2(t=Ot()){return/firefox\//i.test(t)}function c2(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h2(t=Ot()){return/crios\//i.test(t)}function d2(t=Ot()){return/iemobile/i.test(t)}function f2(t=Ot()){return/android/i.test(t)}function p2(t=Ot()){return/blackberry/i.test(t)}function m2(t=Ot()){return/webos/i.test(t)}function Bb(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eQ(t=Ot()){var e;return Bb(t)&&!!((e=window.navigator)!=null&&e.standalone)}function tQ(){return AH()&&document.documentMode===10}function g2(t=Ot()){return Bb(t)||f2(t)||m2(t)||p2(t)||/windows phone/i.test(t)||d2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t,e=[]){let n;switch(t){case"Browser":n=bP(Ot());break;case"Worker":n=`${bP(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rQ(t,e={}){return ps(t,"GET","/v2/passwordPolicy",fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQ=6;class sQ{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iQ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IP(this),this.idTokenSubscription=new IP(this),this.beforeStateQueue=new nQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await gu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wg(this,{idToken:e}),r=await Fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Xi(this));const n=e?at(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rQ(this),n=new sQ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZX(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await gu.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&NX(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mo(t){return at(t)}class IP{constructor(e){this.auth=e,this.observer=null,this.addObserver=NH(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aQ(t){ov=t}function v2(t){return ov.loadJS(t)}function lQ(){return ov.recaptchaEnterpriseScript}function uQ(){return ov.gapiScript}function cQ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hQ{constructor(){this.enterprise=new dQ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dQ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fQ="recaptcha-enterprise",_2="NO_RECAPTCHA";class pQ{constructor(e){this.type=fQ,this.auth=Mo(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{HX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new WX(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;wP(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(_2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hQ().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&wP(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=lQ();l.length!==0&&(l+=a),v2(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function RP(t,e,n,r=!1,i=!1){const s=new pQ(t);let o;if(i)o=_2;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Kg(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await RP(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await RP(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mQ(t,e){const n=of(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Fa(s,e??{}))return i;zr(i,"already-initialized")}return n.initialize({options:e})}function gQ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yQ(t,e,n){const r=Mo(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=w2(e),{host:o,port:a}=vQ(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Fa(u,r.config.emulator)&&Fa(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,xo(o)?(xT(`${s}//${o}${l}`),EN("Auth",!0)):_Q()}function w2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vQ(t){const e=w2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:CP(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:CP(o)}}}function CP(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _Q(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}async function wQ(t,e){return ps(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SQ(t,e){return _f(t,"POST","/v1/accounts:signInWithPassword",fs(t,e))}async function EQ(t,e){return ps(t,"POST","/v1/accounts:sendOobCode",fs(t,e))}async function TQ(t,e){return EQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bQ(t,e){return _f(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}async function IQ(t,e){return _f(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends jb{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kg(e,n,"signInWithPassword",SQ);case"emailLink":return bQ(e,{email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kg(e,r,"signUpPassword",wQ);case"emailLink":return IQ(e,{idToken:n,email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t,e){return _f(t,"POST","/v1/accounts:signInWithIdp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQ="http://localhost";class qa extends jb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new qa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yu(e,n)}buildRequest(){const e={requestUri:RQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xQ(t){const e=sh(oh(t)).link,n=e?sh(oh(e)).deep_link_id:null,r=sh(oh(t)).deep_link_id;return(r?sh(oh(r)).link:null)||r||n||e||t}class Ub{constructor(e){const n=sh(oh(e)),r=n.apiKey??null,i=n.oobCode??null,s=CQ(n.mode??null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=xQ(e);try{return new Ub(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){this.providerId=ac.PROVIDER_ID}static credential(e,n){return jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ub.parseLink(n);return le(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}ac.PROVIDER_ID="password";ac.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ac.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends S2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends wf{constructor(){super("facebook.com")}static credential(e){return qa._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends wf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qs.credential(n,r)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends wf{constructor(){super("github.com")}static credential(e){return qa._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends wf{constructor(){super("twitter.com")}static credential(e,n){return qa._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Js.credential(n,r)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AQ(t,e){return _f(t,"POST","/v1/accounts:signUp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Fr._fromIdTokenResponse(e,r,i),o=xP(r);return new Ga({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=xP(r);return new Ga({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function xP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Ci{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,qg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new qg(e,n,r,i)}}function E2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?qg._fromErrorAndOperation(t,s,e,r):s})}async function PQ(t,e,n=!1){const r=await Bd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ga._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kQ(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(Xi(r));const i="reauthenticate";try{const s=await Bd(t,E2(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Fb(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Ga._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e,n=!1){if(Hn(t.app))return Promise.reject(Xi(t));const r="signIn",i=await E2(t,r,e),s=await Ga._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function DQ(t,e){return T2(Mo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(t){const e=Mo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OQ(t,e,n){const r=Mo(t);await Kg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",TQ)}async function MQ(t,e,n){if(Hn(t.app))return Promise.reject(Xi(t));const r=Mo(t),o=await Kg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AQ).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&b2(t),l}),a=await Ga._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function NQ(t,e,n){return Hn(t.app)?Promise.reject(Xi(t)):DQ(at(t),ac.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&b2(t),r})}function LQ(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function VQ(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function FQ(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function BQ(t){return at(t).signOut()}const Gg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gg,"1"),this.storage.removeItem(Gg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jQ=1e3,UQ=10;class R2 extends I2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);tQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,UQ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}R2.type="LOCAL";const $Q=R2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2 extends I2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}C2.type="SESSION";const x2=C2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new av(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await zQ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}av.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=$b("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function HQ(t){Si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function KQ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qQ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function GQ(){return A2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="firebaseLocalStorageDb",XQ=1,Xg="firebaseLocalStorage",k2="fbase_key";class Sf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lv(t,e){return t.transaction([Xg],e?"readwrite":"readonly").objectStore(Xg)}function QQ(){const t=indexedDB.deleteDatabase(P2);return new Sf(t).toPromise()}function S0(){const t=indexedDB.open(P2,XQ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xg,{keyPath:k2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xg)?e(r):(r.close(),await QQ(),e(await S0()))})})}async function AP(t,e,n){const r=lv(t,!0).put({[k2]:e,value:n});return new Sf(r).toPromise()}async function YQ(t,e){const n=lv(t,!1).get(e),r=await new Sf(n).toPromise();return r===void 0?null:r.value}function PP(t,e){const n=lv(t,!0).delete(e);return new Sf(n).toPromise()}const JQ=800,ZQ=3;class D2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=av._getInstance(GQ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await KQ(),!this.activeServiceWorker)return;this.sender=new WQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await S0();return await AP(e,Gg,"1"),await PP(e,Gg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>AP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YQ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>PP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lv(i,!1).getAll();return new Sf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D2.type="LOCAL";const eY=D2;new vf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(t,e){return e?Hi(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb extends jb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nY(t){return T2(t.auth,new zb(t),t.bypassAuthState)}function rY(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),kQ(n,new zb(t),t.bypassAuthState)}async function iY(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),PQ(n,new zb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nY;case"linkViaPopup":case"linkViaRedirect":return iY;case"reauthViaPopup":case"reauthViaRedirect":return rY;default:zr(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY=new vf(2e3,1e4);class Jl extends O2{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Jl.currentPopupAction&&Jl.currentPopupAction.cancel(),Jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=$b();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sY.get())};e()}}Jl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY="pendingRedirect",Im=new Map;class aY extends O2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Im.get(this.auth._key());if(!e){try{const r=await lY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Im.set(this.auth._key(),e)}return this.bypassAuthState||Im.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lY(t,e){const n=hY(e),r=cY(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function uY(t,e){Im.set(t._key(),e)}function cY(t){return Hi(t._redirectPersistence)}function hY(t){return bm(oY,t.config.apiKey,t.name)}async function dY(t,e,n=!1){if(Hn(t.app))return Promise.reject(Xi(t));const r=Mo(t),i=tY(r,e),o=await new aY(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY=10*60*1e3;class pY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!M2(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(wi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fY&&this.cachedEventUids.clear(),this.cachedEventUids.has(kP(e))}saveEventToCache(e){this.cachedEventUids.add(kP(e)),this.lastProcessedEventTime=Date.now()}}function kP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function M2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gY(t,e={}){return ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vY=/^https?/;async function _Y(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gY(t);for(const n of e)try{if(wY(n))return}catch{}zr(t,"unauthorized-domain")}function wY(t){const e=_0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vY.test(n))return!1;if(yY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY=new vf(3e4,6e4);function DP(){const t=Si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EY(t){return new Promise((e,n)=>{var i,s,o;function r(){DP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DP(),n(wi(t,"network-request-failed"))},timeout:SY.get()})}if((s=(i=Si().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Si().gapi)!=null&&o.load)r();else{const a=cQ("iframefcb");return Si()[a]=()=>{gapi.load?r():n(wi(t,"network-request-failed"))},v2(`${uQ()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Rm=null,e})}let Rm=null;function TY(t){return Rm=Rm||EY(t),Rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY=new vf(5e3,15e3),IY="__/auth/iframe",RY="emulator/auth/iframe",CY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AY(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vb(e,RY):`https://${t.config.authDomain}/${IY}`,r={apiKey:e.apiKey,appName:t.name,v:tl},i=xY.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${sf(r).slice(1)}`}async function PY(t){const e=await TY(t),n=Si().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:AY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CY,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=wi(t,"network-request-failed"),a=Si().setTimeout(()=>{s(o)},bY.get());function l(){Si().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DY=500,OY=600,MY="_blank",NY="http://localhost";class OP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LY(t,e,n,r=DY,i=OY){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...kY,width:r.toString(),height:i.toString(),top:s,left:o},u=Ot().toLowerCase();n&&(a=h2(u)?MY:n),u2(u)&&(e=e||NY,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(eQ(u)&&a!=="_self")return VY(e||"",a),new OP(null);const d=window.open(e||"",a,c);le(d,t,"popup-blocked");try{d.focus()}catch{}return new OP(d)}function VY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY="__/auth/handler",BY="emulator/auth/handler",jY=encodeURIComponent("fac");async function MP(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tl,eventId:i};if(e instanceof S2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",MH(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof wf){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${jY}=${encodeURIComponent(l)}`:"";return`${UY(t)}?${sf(a).slice(1)}${u}`}function UY({config:t}){return t.emulator?Vb(t,BY):`https://${t.authDomain}/${FY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="webStorageSupport";class $Y{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x2,this._completeRedirectFn=dY,this._overrideRedirectResult=uY}async _openPopup(e,n,r,i){var o;ss((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await MP(e,n,r,_0(),i);return LY(e,s,$b())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await MP(e,n,r,_0(),i);return HQ(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ss(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PY(e),r=new pY(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(z_,{type:z_},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[z_];s!==void 0&&n(!!s),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_Y(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return g2()||c2()||Bb()}}const zY=$Y;var NP="@firebase/auth",LP="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KY(t){Ba(new vo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y2(t)},u=new oQ(r,i,s,l);return gQ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ba(new vo("auth-internal",e=>{const n=Mo(e.getProvider("auth").getImmediate());return(r=>new WY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(NP,LP,HY(t)),gi(NP,LP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qY=5*60,GY=SN("authIdTokenMaxAge")||qY;let VP=null;const XY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GY)return;const i=n==null?void 0:n.token;VP!==i&&(VP=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function QY(t=PN()){const e=of(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mQ(t,{popupRedirectResolver:zY,persistence:[eY,$Q,x2]}),r=SN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=XY(s.toString());VQ(n,o,()=>o(n.currentUser)),LQ(n,a=>o(a))}}const i=_N("auth");return i&&yQ(n,`http://${i}`),n}function YY(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}aQ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=wi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",YY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KY("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="firebasestorage.googleapis.com",L2="storageBucket",JY=2*60*1e3,ZY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends Ci{constructor(e,n,r=0){super(W_(e),`Firebase Storage: ${n} (${W_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return W_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function W_(t){return"storage/"+t}function Wb(){const t="An unknown error occurred, please check the error payload for server response.";return new mt(pt.UNKNOWN,t)}function eJ(t){return new mt(pt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function tJ(t){return new mt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nJ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(pt.UNAUTHENTICATED,t)}function rJ(){return new mt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function iJ(t){return new mt(pt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function sJ(){return new mt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oJ(){return new mt(pt.CANCELED,"User canceled the upload/download.")}function aJ(t){return new mt(pt.INVALID_URL,"Invalid URL '"+t+"'.")}function lJ(t){return new mt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uJ(){return new mt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+L2+"' property when initializing the app?")}function cJ(){return new mt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hJ(){return new mt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dJ(t){return new mt(pt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function E0(t){return new mt(pt.INVALID_ARGUMENT,t)}function V2(){return new mt(pt.APP_DELETED,"The Firebase app was deleted.")}function fJ(t){return new mt(pt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kh(t,e){return new mt(pt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qc(t){throw new mt(pt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw lJ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},S=n===N2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",v=new RegExp(`^https?://${S}/${i}/${T}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<_.length;C++){const O=_[C],D=O.regex.exec(e);if(D){const b=D[O.indices.bucket];let E=D[O.indices.path];E||(E=""),r=new Gn(b,E),O.postModify(r);break}}if(r==null)throw aJ(e);return r}}class pJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mJ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...T){u||(u=!0,e.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,t(p,l())},T)}function f(){s&&clearTimeout(s)}function p(T,...v){if(u){f();return}if(T){f(),c.call(null,T,...v);return}if(l()||o){f(),c.call(null,T,...v);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let g=!1;function S(T){g||(g=!0,f(),!u&&(i!==null?(T||(a=2),clearTimeout(i),d(0)):T||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function gJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yJ(t){return t!==void 0}function vJ(t){return typeof t=="object"&&!Array.isArray(t)}function Hb(t){return typeof t=="string"||t instanceof String}function FP(t){return Kb()&&t instanceof Blob}function Kb(){return typeof Blob<"u"}function BP(t,e,n,r){if(r<e)throw E0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw E0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function F2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Pa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Pa||(Pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _J(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(e,n,r,i,s,o,a,l,u,c,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,S)=>{this.resolve_=g,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Dp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Pa.NO_ERROR,l=s.getStatus();if(!a||_J(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Pa.ABORT;r(!1,new Dp(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Dp(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());yJ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Wb();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?V2():oJ();o(l)}else{const l=sJ();o(l)}};this.canceled_?n(!1,new Dp(!1,null,!0)):this.backoffId_=mJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function SJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function EJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function bJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function IJ(t,e,n,r,i,s,o=!0,a=!1){const l=F2(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return TJ(c,e),SJ(c,n),EJ(c,s),bJ(c,r),new wJ(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function CJ(...t){const e=RJ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Kb())return new Blob(t);throw new mt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(t){if(typeof atob>"u")throw dJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class H_{constructor(e,n){this.data=e,this.contentType=n||null}}function PJ(t,e){switch(t){case di.RAW:return new H_(B2(e));case di.BASE64:case di.BASE64URL:return new H_(j2(t,e));case di.DATA_URL:return new H_(DJ(e),OJ(e))}throw Wb()}function B2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function kJ(t){let e;try{e=decodeURIComponent(t)}catch{throw Kh(di.DATA_URL,"Malformed data URL.")}return B2(e)}function j2(t,e){switch(t){case di.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Kh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case di.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Kh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=AJ(e)}catch(i){throw i.message.includes("polyfill")?i:Kh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class U2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Kh(di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=MJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function DJ(t){const e=new U2(t);return e.base64?j2(di.BASE64,e.rest):kJ(e.rest)}function OJ(t){return new U2(t).contentType}function MJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){let r=0,i="";FP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(FP(this.data_)){const r=this.data_,i=xJ(r,e,n);return i===null?null:new Zs(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zs(r,!0)}}static getBlob(...e){if(Kb()){const n=e.map(r=>r instanceof Zs?r.data_:r);return new Zs(CJ.apply(null,n))}else{const n=e.map(o=>Hb(o)?PJ(di.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Zs(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){let e;try{e=JSON.parse(t)}catch{return null}return vJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function z2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VJ(t,e){return e}class dn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||VJ}}let Op=null;function FJ(t){return!Hb(t)||t.length<2?t:z2(t)}function W2(){if(Op)return Op;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(s,o){return FJ(o)}const n=new dn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new dn("size");return i.xform=r,t.push(i),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),Op=t,Op}function BJ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Gn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function jJ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return BJ(r,t),r}function H2(t,e,n){const r=$2(e);return r===null?null:jJ(t,r,n)}function UJ(t,e,n,r){const i=$2(e);if(i===null||!Hb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,d=t.fullPath,f="/b/"+o(c)+"/o/"+o(d),p=qb(f,n,r),g=F2({alt:"media",token:u});return p+g})[0]}function $J(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class K2{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){if(!t)throw Wb()}function zJ(t,e){function n(r,i){const s=H2(t,i,e);return q2(s!==null),s}return n}function WJ(t,e){function n(r,i){const s=H2(t,i,e);return q2(s!==null),UJ(s,i,t.host,t._protocol)}return n}function G2(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=rJ():i=nJ():n.getStatus()===402?i=tJ(t.bucket):n.getStatus()===403?i=iJ(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function HJ(t){const e=G2(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=eJ(t.path)),s.serverResponse=i.serverResponse,s}return n}function KJ(t,e,n){const r=e.fullServerUrl(),i=qb(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new K2(i,s,WJ(t,n),o);return a.errorHandler=HJ(e),a}function qJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GJ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=qJ(null,e)),r}function XJ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let C=0;C<2;C++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=GJ(e,r,i),c=$J(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Zs.getBlob(d,r,f);if(p===null)throw cJ();const g={name:u.fullPath},S=qb(s,t.host,t._protocol),T="POST",v=t.maxUploadRetryTime,y=new K2(S,T,zJ(t,n),v);return y.urlParams=g,y.headers=o,y.body=p.uploadData(),y.errorHandler=G2(e),y}class QJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Qc("cannot .send() more than once");if(xo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YJ extends QJ{initXhr(){this.xhr_.responseType="text"}}function X2(){return new YJ}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xa(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return z2(this._location.path)}get storage(){return this._service}get parent(){const e=NJ(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new Xa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fJ(e)}}function JJ(t,e,n){t._throwIfRoot("uploadBytes");const r=XJ(t.storage,t._location,W2(),new Zs(e,!0),n);return t.storage.makeRequestWithTokens(r,X2).then(i=>({metadata:i,ref:t}))}function ZJ(t){t._throwIfRoot("getDownloadURL");const e=KJ(t.storage,t._location,W2());return t.storage.makeRequestWithTokens(e,X2).then(n=>{if(n===null)throw hJ();return n})}function eZ(t,e){const n=LJ(t._location.path,e),r=new Gn(t._location.bucket,n);return new Xa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZ(t){return/^[A-Za-z]+:\/\//.test(t)}function nZ(t,e){return new Xa(t,e)}function Q2(t,e){if(t instanceof Gb){const n=t;if(n._bucket==null)throw uJ();const r=new Xa(n,n._bucket);return e!=null?Q2(r,e):r}else return e!==void 0?eZ(t,e):t}function rZ(t,e){if(e&&tZ(e)){if(t instanceof Gb)return nZ(t,e);throw E0("To use ref(service, url), the first argument must be a Storage instance.")}else return Q2(t,e)}function jP(t,e){const n=e==null?void 0:e[L2];return n==null?null:Gn.makeFromBucketSpec(n,t)}function iZ(t,e,n,r={}){t.host=`${e}:${n}`;const i=xo(e);i&&(xT(`https://${t.host}/b`),EN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:EH(s,t.app.options.projectId))}class Gb{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=N2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JY,this._maxUploadRetryTime=ZY,this._requests=new Set,i!=null?this._bucket=Gn.makeFromBucketSpec(i,this._host):this._bucket=jP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=jP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new pJ(V2());{const o=IJ(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const UP="@firebase/storage",$P="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="storage";function sZ(t,e,n){return t=at(t),JJ(t,e,n)}function oZ(t){return t=at(t),ZJ(t)}function aZ(t,e){return t=at(t),rZ(t,e)}function lZ(t=PN(),e){t=at(t);const r=of(t,Y2).getImmediate({identifier:e}),i=wH("storage");return i&&uZ(r,...i),r}function uZ(t,e,n,r={}){iZ(t,e,n,r)}function cZ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Gb(n,r,i,e,tl)}function hZ(){Ba(new vo(Y2,cZ,"PUBLIC").setMultipleInstances(!0)),gi(UP,$P,""),gi(UP,$P,"esm2020")}hZ();const J2={apiKey:"AIzaSyBbUnVpOyU1eSSFrQi79ztijFjT0bvMosc",authDomain:"pocket-stylist-3c0fe.firebaseapp.com",projectId:"pocket-stylist-3c0fe",storageBucket:"pocket-stylist-3c0fe.firebasestorage.app",messagingSenderId:"274246899324",appId:"1:274246899324:web:845c91cdaab06299df1bf9"};J2.storageBucket||console.error("CRITICAL: VITE_FIREBASE_STORAGE_BUCKET is missing from environment variables!");const Xb=AN(J2),lc=QY(Xb),dZ=lZ(Xb);let vu=null;const rr=()=>(vu||(console.log("Initializing Firestore (Lazy)..."),vu=lX(Xb,{localCache:AX({tabManager:OX()}),experimentalForceLongPolling:!0})),vu);new Proxy({},{get:function(t,e){return rr()[e]}});const fZ=async()=>{if(console.log("Hard Reconnect: Terminating existing instance..."),vu){try{await $V(vu)}catch(t){console.warn("Termination warning:",t)}vu=null}return console.log("Hard Reconnect: Re-initializing..."),rr()},pZ=async()=>{try{console.log("Terminating Firestore...");const t=rr();await $V(t),console.log("Clearing persistence..."),await cX(t),console.log("Persistence cleared. Reloading..."),window.location.reload()}catch(t){console.error("Failed to clear cache:",t);try{(await window.indexedDB.databases()).forEach(n=>window.indexedDB.deleteDatabase(n.name)),window.location.reload()}catch{alert("Manual Reset Required: Please clear your browser site data.")}}},mZ=(t,e)=>NQ(lc,t,e),gZ=(t,e)=>MQ(lc,t,e),yZ=()=>BQ(lc),vZ=t=>OQ(lc,t),Z2=I.createContext();function Qb(){return I.useContext(Z2)}function _Z({children:t}){const[e,n]=I.useState(null),[r,i]=I.useState(!0);I.useEffect(()=>FQ(lc,a=>{n(a),i(!1)}),[]);const s={currentUser:e,loading:r};return M.jsx(Z2.Provider,{value:s,children:!r&&t})}const wZ="Left",SZ="Right",EZ="Up",TZ="Down",Zl={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},T0={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},zP="mousemove",WP="mouseup",bZ="touchend",IZ="touchmove",RZ="touchstart";function CZ(t,e,n,r){return t>e?n>0?SZ:wZ:r>0?TZ:EZ}function HP(t,e){if(e===0)return t;const n=Math.PI/180*e,r=t[0]*Math.cos(n)+t[1]*Math.sin(n),i=t[1]*Math.cos(n)-t[0]*Math.sin(n);return[r,i]}function xZ(t,e){const n=c=>{const d="touches"in c;d&&c.touches.length>1||t((f,p)=>{p.trackMouse&&!d&&(document.addEventListener(zP,r),document.addEventListener(WP,o));const{clientX:g,clientY:S}=d?c.touches[0]:c,T=HP([g,S],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},f),T0),{initial:T.slice(),xy:T,start:c.timeStamp||0})})},r=c=>{t((d,f)=>{const p="touches"in c;if(p&&c.touches.length>1)return d;if(c.timeStamp-d.start>f.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:g,clientY:S}=p?c.touches[0]:c,[T,v]=HP([g,S],f.rotationAngle),y=T-d.xy[0],_=v-d.xy[1],C=Math.abs(y),O=Math.abs(_),D=(c.timeStamp||0)-d.start,b=Math.sqrt(C*C+O*O)/(D||1),E=[y/(D||1),_/(D||1)],R=CZ(C,O,y,_),A=typeof f.delta=="number"?f.delta:f.delta[R.toLowerCase()]||Zl.delta;if(C<A&&O<A&&!d.swiping)return d;const x={absX:C,absY:O,deltaX:y,deltaY:_,dir:R,event:c,first:d.first,initial:d.initial,velocity:b,vxvy:E};x.first&&f.onSwipeStart&&f.onSwipeStart(x),f.onSwiping&&f.onSwiping(x);let N=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${R}`])&&(N=!0),N&&f.preventScrollOnSwipe&&f.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:x,swiping:!0})})},i=c=>{t((d,f)=>{let p;if(d.swiping&&d.eventData){if(c.timeStamp-d.start<f.swipeDuration){p=Object.assign(Object.assign({},d.eventData),{event:c}),f.onSwiped&&f.onSwiped(p);const g=f[`onSwiped${p.dir}`];g&&g(p)}}else f.onTap&&f.onTap({event:c});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},d),T0),{eventData:p})})},s=()=>{document.removeEventListener(zP,r),document.removeEventListener(WP,o)},o=c=>{s(),i(c)},a=(c,d)=>{let f=()=>{};if(c&&c.addEventListener){const p=Object.assign(Object.assign({},Zl.touchEventOptions),d.touchEventOptions),g=[[RZ,n,p],[IZ,r,Object.assign(Object.assign({},p),d.preventScrollOnSwipe?{passive:!1}:{})],[bZ,i,p]];g.forEach(([S,T,v])=>c.addEventListener(S,T,v)),f=()=>g.forEach(([S,T])=>c.removeEventListener(S,T))}return f},u={ref:c=>{c!==null&&t((d,f)=>{if(d.el===c)return d;const p={};return d.el&&d.el!==c&&d.cleanUpTouch&&(d.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&c&&(p.cleanUpTouch=a(c,f)),Object.assign(Object.assign(Object.assign({},d),{el:c}),p)})}};return e.trackMouse&&(u.onMouseDown=n),[u,a]}function AZ(t,e,n,r){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==n.preventScrollOnSwipe||e.touchEventOptions.passive!==n.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})}function PZ(t){const{trackMouse:e}=t,n=I.useRef(Object.assign({},T0)),r=I.useRef(Object.assign({},Zl)),i=I.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Zl),t);let s;for(s in Zl)r.current[s]===void 0&&(r.current[s]=Zl[s]);const[o,a]=I.useMemo(()=>xZ(l=>n.current=l(n.current,r.current),{trackMouse:e}),[e]);return n.current=AZ(n.current,r.current,i.current,a),o}var eF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KP=yt.createContext&&yt.createContext(eF),kZ=["attr","size","title"];function DZ(t,e){if(t==null)return{};var n=OZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qg.apply(this,arguments)}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(r){MZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MZ(t,e,n){return e=NZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NZ(t){var e=LZ(t,"string");return typeof e=="symbol"?e:e+""}function LZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tF(t){return t&&t.map((e,n)=>yt.createElement(e.tag,Yg({key:n},e.attr),tF(e.child)))}function VZ(t){return e=>yt.createElement(FZ,Qg({attr:Yg({},t.attr)},e),tF(t.child))}function FZ(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=DZ(t,kZ),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),yt.createElement("svg",Qg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Yg(Yg({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&yt.createElement("title",null,s),t.children)};return KP!==void 0?yt.createElement(KP.Consumer,null,n=>e(n)):e(eF)}function BZ(t){return VZ({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}const Yb=I.createContext({});function Jb(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const Zb=typeof window<"u",nF=Zb?I.useLayoutEffect:I.useEffect,uv=I.createContext(null);function eI(t,e){t.indexOf(e)===-1&&t.push(e)}function tI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const os=(t,e,n)=>n>e?e:n<t?t:n;let nI=()=>{};const as={},rF=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function iF(t){return typeof t=="object"&&t!==null}const sF=t=>/^0[^.\s]+$/u.test(t);function rI(t){let e;return()=>(e===void 0&&(e=t()),e)}const yr=t=>t,jZ=(t,e)=>n=>e(t(n)),Ef=(...t)=>t.reduce(jZ),Ud=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class iI{constructor(){this.subscriptions=[]}add(e){return eI(this.subscriptions,e),()=>tI(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ei=t=>t*1e3,fr=t=>t/1e3;function oF(t,e){return e?t*(1e3/e):0}const aF=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,UZ=1e-7,$Z=12;function zZ(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=aF(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>UZ&&++a<$Z);return o}function Tf(t,e,n,r){if(t===e&&n===r)return yr;const i=s=>zZ(s,0,1,t,n);return s=>s===0||s===1?s:aF(i(s),e,r)}const lF=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uF=t=>e=>1-t(1-e),cF=Tf(.33,1.53,.69,.99),sI=uF(cF),hF=lF(sI),dF=t=>(t*=2)<1?.5*sI(t):.5*(2-Math.pow(2,-10*(t-1))),oI=t=>1-Math.sin(Math.acos(t)),fF=uF(oI),pF=lF(oI),WZ=Tf(.42,0,1,1),HZ=Tf(0,0,.58,1),mF=Tf(.42,0,.58,1),KZ=t=>Array.isArray(t)&&typeof t[0]!="number",gF=t=>Array.isArray(t)&&typeof t[0]=="number",qZ={linear:yr,easeIn:WZ,easeInOut:mF,easeOut:HZ,circIn:oI,circInOut:pF,circOut:fF,backIn:sI,backInOut:hF,backOut:cF,anticipate:dF},GZ=t=>typeof t=="string",GP=t=>{if(gF(t)){nI(t.length===4);const[e,n,r,i]=t;return Tf(e,n,r,i)}else if(GZ(t))return qZ[t];return t},Mp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function XZ(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),t()),c(a)}const u={schedule:(c,d=!1,f=!1)=>{const g=f&&i?n:r;return d&&o.add(c),g.has(c)||g.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const QZ=40;function yF(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Mp.reduce((_,C)=>(_[C]=XZ(s),_),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:f,render:p,postRender:g}=o,S=()=>{const _=as.useManualTiming?i.timestamp:performance.now();n=!1,as.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,QZ),1)),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},T=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:Mp.reduce((_,C)=>{const O=o[C];return _[C]=(D,b=!1,E=!1)=>(n||T(),O.schedule(D,b,E)),_},{}),cancel:_=>{for(let C=0;C<Mp.length;C++)o[Mp[C]].cancel(_)},state:i,steps:o}}const{schedule:Ze,cancel:To,state:Ht,steps:K_}=yF(typeof requestAnimationFrame<"u"?requestAnimationFrame:yr,!0);let Cm;function YZ(){Cm=void 0}const An={now:()=>(Cm===void 0&&An.set(Ht.isProcessing||as.useManualTiming?Ht.timestamp:performance.now()),Cm),set:t=>{Cm=t,queueMicrotask(YZ)}},vF=t=>e=>typeof e=="string"&&e.startsWith(t),_F=vF("--"),JZ=vF("var(--"),aI=t=>JZ(t)?ZZ.test(t.split("/*")[0].trim()):!1,ZZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$d={...uc,transform:t=>os(0,1,t)},Np={...uc,default:1},qh=t=>Math.round(t*1e5)/1e5,lI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eee(t){return t==null}const tee=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uI=(t,e)=>n=>!!(typeof n=="string"&&tee.test(n)&&n.startsWith(t)||e&&!eee(n)&&Object.prototype.hasOwnProperty.call(n,e)),wF=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(lI);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},nee=t=>os(0,255,t),q_={...uc,transform:t=>Math.round(nee(t))},_a={test:uI("rgb","red"),parse:wF("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+q_.transform(t)+", "+q_.transform(e)+", "+q_.transform(n)+", "+qh($d.transform(r))+")"};function ree(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const b0={test:uI("#"),parse:ree,transform:_a.transform},bf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$s=bf("deg"),Ti=bf("%"),ue=bf("px"),iee=bf("vh"),see=bf("vw"),XP={...Ti,parse:t=>Ti.parse(t)/100,transform:t=>Ti.transform(t*100)},eu={test:uI("hsl","hue"),parse:wF("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ti.transform(qh(e))+", "+Ti.transform(qh(n))+", "+qh($d.transform(r))+")"},Et={test:t=>_a.test(t)||b0.test(t)||eu.test(t),parse:t=>_a.test(t)?_a.parse(t):eu.test(t)?eu.parse(t):b0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_a.transform(t):eu.transform(t),getAnimatableNone:t=>{const e=Et.parse(t);return e.alpha=0,Et.transform(e)}},oee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function aee(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(lI))==null?void 0:e.length)||0)+(((n=t.match(oee))==null?void 0:n.length)||0)>0}const SF="number",EF="color",lee="var",uee="var(",QP="${}",cee=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(cee,l=>(Et.test(l)?(r.color.push(s),i.push(EF),n.push(Et.parse(l))):l.startsWith(uee)?(r.var.push(s),i.push(lee),n.push(l)):(r.number.push(s),i.push(SF),n.push(parseFloat(l))),++s,QP)).split(QP);return{values:n,split:a,indexes:r,types:i}}function TF(t){return zd(t).values}function bF(t){const{split:e,types:n}=zd(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===SF?s+=qh(i[o]):a===EF?s+=Et.transform(i[o]):s+=i[o]}return s}}const hee=t=>typeof t=="number"?0:Et.test(t)?Et.getAnimatableNone(t):t;function dee(t){const e=TF(t);return bF(t)(e.map(hee))}const bo={test:aee,parse:TF,createTransformer:bF,getAnimatableNone:dee};function G_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fee({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=G_(l,a,t+1/3),s=G_(l,a,t),o=G_(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Jg(t,e){return n=>n>0?e:t}const rt=(t,e,n)=>t+(e-t)*n,X_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},pee=[b0,_a,eu],mee=t=>pee.find(e=>e.test(t));function YP(t){const e=mee(t);if(!e)return!1;let n=e.parse(t);return e===eu&&(n=fee(n)),n}const JP=(t,e)=>{const n=YP(t),r=YP(e);if(!n||!r)return Jg(t,e);const i={...n};return s=>(i.red=X_(n.red,r.red,s),i.green=X_(n.green,r.green,s),i.blue=X_(n.blue,r.blue,s),i.alpha=rt(n.alpha,r.alpha,s),_a.transform(i))},I0=new Set(["none","hidden"]);function gee(t,e){return I0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function yee(t,e){return n=>rt(t,e,n)}function cI(t){return typeof t=="number"?yee:typeof t=="string"?aI(t)?Jg:Et.test(t)?JP:wee:Array.isArray(t)?IF:typeof t=="object"?Et.test(t)?JP:vee:Jg}function IF(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>cI(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function vee(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=cI(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function _ee(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const wee=(t,e)=>{const n=bo.createTransformer(e),r=zd(t),i=zd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?I0.has(t)&&!i.values.length||I0.has(e)&&!r.values.length?gee(t,e):Ef(IF(_ee(r,i),i.values),n):Jg(t,e)};function RF(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rt(t,e,n):cI(t)(t,e)}const See=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ze.update(e,n),stop:()=>To(e),now:()=>Ht.isProcessing?Ht.timestamp:An.now()}},CF=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Zg=2e4;function hI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Zg;)e+=n,r=t.next(e);return e>=Zg?1/0:e}function Eee(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(hI(r),Zg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:fr(i)}}const Tee=5;function xF(t,e,n){const r=Math.max(e-Tee,0);return oF(n-t(r),e-r)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Q_=.001;function bee({duration:t=ct.duration,bounce:e=ct.bounce,velocity:n=ct.velocity,mass:r=ct.mass}){let i,s,o=1-e;o=os(ct.minDamping,ct.maxDamping,o),t=os(ct.minDuration,ct.maxDuration,fr(t)),o<1?(i=u=>{const c=u*o,d=c*t,f=c-n,p=R0(u,o),g=Math.exp(-d);return Q_-f/p*g},s=u=>{const d=u*o*t,f=d*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-d),S=R0(Math.pow(u,2),o);return(-i(u)+Q_>0?-1:1)*((f-p)*g)/S}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-Q_+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=Ree(i,s,a);if(t=Ei(t),isNaN(l))return{stiffness:ct.stiffness,damping:ct.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const Iee=12;function Ree(t,e,n){let r=n;for(let i=1;i<Iee;i++)r=r-t(r)/e(r);return r}function R0(t,e){return t*Math.sqrt(1-e*e)}const Cee=["duration","bounce"],xee=["stiffness","damping","mass"];function ZP(t,e){return e.some(n=>t[n]!==void 0)}function Aee(t){let e={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...t};if(!ZP(t,xee)&&ZP(t,Cee))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*os(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ct.mass,stiffness:i,damping:s}}else{const n=bee(t);e={...e,...n,mass:ct.mass},e.isResolvedFromDuration=!0}return e}function ey(t=ct.visualDuration,e=ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=Aee({...n,velocity:-fr(n.velocity||0)}),g=f||0,S=u/(2*Math.sqrt(l*c)),T=o-s,v=fr(Math.sqrt(l/c)),y=Math.abs(T)<5;r||(r=y?ct.restSpeed.granular:ct.restSpeed.default),i||(i=y?ct.restDelta.granular:ct.restDelta.default);let _;if(S<1){const O=R0(v,S);_=D=>{const b=Math.exp(-S*v*D);return o-b*((g+S*v*T)/O*Math.sin(O*D)+T*Math.cos(O*D))}}else if(S===1)_=O=>o-Math.exp(-v*O)*(T+(g+v*T)*O);else{const O=v*Math.sqrt(S*S-1);_=D=>{const b=Math.exp(-S*v*D),E=Math.min(O*D,300);return o-b*((g+S*v*T)*Math.sinh(E)+O*T*Math.cosh(E))/O}}const C={calculatedDuration:p&&d||null,next:O=>{const D=_(O);if(p)a.done=O>=d;else{let b=O===0?g:0;S<1&&(b=O===0?Ei(g):xF(_,O,D));const E=Math.abs(b)<=r,R=Math.abs(o-D)<=i;a.done=E&&R}return a.value=a.done?o:D,a},toString:()=>{const O=Math.min(hI(C),Zg),D=CF(b=>C.next(O*b).value,O,30);return O+"ms "+D},toTransition:()=>{}};return C}ey.applyToOptions=t=>{const e=Eee(t,100,ey);return t.ease=e.ease,t.duration=Ei(e.duration),t.type="keyframes",t};function C0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,g=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let S=n*e;const T=d+S,v=o===void 0?T:o(T);v!==T&&(S=v-d);const y=E=>-S*Math.exp(-E/r),_=E=>v+y(E),C=E=>{const R=y(E),A=_(E);f.done=Math.abs(R)<=u,f.value=f.done?v:A};let O,D;const b=E=>{p(f.value)&&(O=E,D=ey({keyframes:[f.value,g(f.value)],velocity:xF(_,E,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return b(0),{calculatedDuration:null,next:E=>{let R=!1;return!D&&O===void 0&&(R=!0,C(E),b(E)),O!==void 0&&E>=O?D.next(E-O):(!R&&C(E),f)}}}function Pee(t,e,n){const r=[],i=n||as.mix||RF,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||yr:e;a=Ef(l,a)}r.push(a)}return r}function kee(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(nI(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Pee(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const f=Ud(t[d],t[d+1],c);return a[d](f)};return n?c=>u(os(t[0],t[s-1],c)):u}function Dee(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ud(0,e,r);t.push(rt(n,1,i))}}function Oee(t){const e=[0];return Dee(e,t.length-1),e}function Mee(t,e){return t.map(n=>n*e)}function Nee(t,e){return t.map(()=>e||mF).splice(0,t.length-1)}function Gh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=KZ(r)?r.map(GP):GP(r),s={done:!1,value:e[0]},o=Mee(n&&n.length===e.length?n:Oee(e),t),a=kee(o,e,{ease:Array.isArray(i)?i:Nee(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Lee=t=>t!==null;function dI(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Lee),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Vee={decay:C0,inertia:C0,tween:Gh,keyframes:Gh,spring:ey};function AF(t){typeof t.type=="string"&&(t.type=Vee[t.type])}class fI{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Fee=t=>t/100;class pI extends fI{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==An.now()&&this.tick(An.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;AF(e);const{type:n=Gh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Gh;l!==Gh&&typeof a[0]!="number"&&(this.mixKeyframes=Ef(Fee,RF(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=hI(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:f,repeatDelay:p,type:g,onUpdate:S,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,C=r;if(d){const E=Math.min(this.currentTime,i)/a;let R=Math.floor(E),A=E%1;!A&&E>=1&&(A=1),A===1&&R--,R=Math.min(R,d+1),!!(R%2)&&(f==="reverse"?(A=1-A,p&&(A-=p/a)):f==="mirror"&&(C=o)),_=os(0,1,A)*a}const O=y?{done:!1,value:c[0]}:C.next(_);s&&(O.value=s(O.value));let{done:D}=O;!y&&l!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return b&&g!==C0&&(O.value=dI(c,this.options,T,this.speed)),S&&S(O.value),b&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return fr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fr(e)}get time(){return fr(this.currentTime)}set time(e){var n;e=Ei(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(An.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=fr(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=See,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(An.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Bee(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wa=t=>t*180/Math.PI,x0=t=>{const e=wa(Math.atan2(t[1],t[0]));return A0(e)},jee={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:x0,rotateZ:x0,skewX:t=>wa(Math.atan(t[1])),skewY:t=>wa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},A0=t=>(t=t%360,t<0&&(t+=360),t),e1=x0,t1=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),n1=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Uee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:t1,scaleY:n1,scale:t=>(t1(t)+n1(t))/2,rotateX:t=>A0(wa(Math.atan2(t[6],t[5]))),rotateY:t=>A0(wa(Math.atan2(-t[2],t[0]))),rotateZ:e1,rotate:e1,skewX:t=>wa(Math.atan(t[4])),skewY:t=>wa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function P0(t){return t.includes("scale")?1:0}function k0(t,e){if(!t||t==="none")return P0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Uee,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=jee,i=a}if(!i)return P0(e);const s=r[e],o=i[1].split(",").map(zee);return typeof s=="function"?s(o):o[s]}const $ee=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return k0(n,e)};function zee(t){return parseFloat(t.trim())}const cc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hc=new Set(cc),r1=t=>t===uc||t===ue,Wee=new Set(["x","y","z"]),Hee=cc.filter(t=>!Wee.has(t));function Kee(t){const e=[];return Hee.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ka={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>k0(e,"x"),y:(t,{transform:e})=>k0(e,"y")};ka.translateX=ka.x;ka.translateY=ka.y;const Da=new Set;let D0=!1,O0=!1,M0=!1;function PF(){if(O0){const t=Array.from(Da).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Kee(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}O0=!1,D0=!1,Da.forEach(t=>t.complete(M0)),Da.clear()}function kF(){Da.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(O0=!0)})}function qee(){M0=!0,kF(),PF(),M0=!1}class mI{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Da.add(this),D0||(D0=!0,Ze.read(kF),Ze.resolveKeyframes(PF))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Bee(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Da.delete(this)}cancel(){this.state==="scheduled"&&(Da.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Gee=t=>t.startsWith("--");function Xee(t,e,n){Gee(e)?t.style.setProperty(e,n):t.style[e]=n}const Qee=rI(()=>window.ScrollTimeline!==void 0),Yee={};function Jee(t,e){const n=rI(t);return()=>Yee[e]??n()}const DF=Jee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),dh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,i1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dh([0,.65,.55,1]),circOut:dh([.55,0,1,.45]),backIn:dh([.31,.01,.66,-.59]),backOut:dh([.33,1.53,.69,.99])};function OF(t,e){if(t)return typeof t=="function"?DF()?CF(t,e):"ease-out":gF(t)?dh(t):Array.isArray(t)?t.map(n=>OF(n,e)||i1.easeOut):i1[t]}function Zee(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:n};l&&(c.offset=l);const d=OF(a,i);Array.isArray(d)&&(c.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(c,f)}function MF(t){return typeof t=="function"&&"applyToOptions"in t}function ete({type:t,...e}){return MF(t)&&DF()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class tte extends fI{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,nI(typeof e.type!="string");const u=ete(e);this.animation=Zee(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=dI(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):Xee(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return fr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fr(e)}get time(){return fr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ei(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Qee()?(this.animation.timeline=e,yr):n(this)}}const NF={anticipate:dF,backInOut:hF,circInOut:pF};function nte(t){return t in NF}function rte(t){typeof t.ease=="string"&&nte(t.ease)&&(t.ease=NF[t.ease])}const s1=10;class ite extends tte{constructor(e){rte(e),AF(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new pI({...o,autoplay:!1}),l=Ei(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-s1).value,a.sample(l).value,s1),a.stop()}}const o1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(bo.test(t)||t==="0")&&!t.startsWith("url("));function ste(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ote(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=o1(i,e),a=o1(s,e);return!o||!a?!1:ste(t)||(n==="spring"||MF(n))&&r}function N0(t){t.duration=0,t.type="keyframes"}const ate=new Set(["opacity","clipPath","filter","transform"]),lte=rI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ute(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return lte()&&n&&ate.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const cte=40;class hte extends fI{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var g;super(),this.stop=()=>{var S,T;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=An.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},p=(c==null?void 0:c.KeyframeResolver)||mI;this.keyframeResolver=new p(a,(S,T,v)=>this.onKeyframesResolved(S,T,f,!v),l,u,c),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=An.now(),ote(e,s,o,a)||((as.instantAnimations||!l)&&(c==null||c(dI(e,r,n))),e[0]=e[e.length-1],N0(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>cte?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&ute(f)?new ite({...f,element:f.motionValue.owner.current}):new pI(f);p.finished.then(()=>this.notifyFinished()).catch(yr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),qee()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const dte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fte(t){const e=dte.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function LF(t,e,n=1){const[r,i]=fte(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return rF(o)?parseFloat(o):o}return aI(i)?LF(i,e,n+1):i}function gI(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const VF=new Set(["width","height","top","left","right","bottom",...cc]),pte={test:t=>t==="auto",parse:t=>t},FF=t=>e=>e.test(t),BF=[uc,ue,Ti,$s,see,iee,pte],a1=t=>BF.find(FF(t));function mte(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sF(t):!0}const gte=new Set(["brightness","contrast","saturate","opacity"]);function yte(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(lI)||[];if(!r)return t;const i=n.replace(r,"");let s=gte.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const vte=/\b([a-z-]*)\(.*?\)/gu,L0={...bo,getAnimatableNone:t=>{const e=t.match(vte);return e?e.map(yte).join(" "):t}},l1={...uc,transform:Math.round},_te={rotate:$s,rotateX:$s,rotateY:$s,rotateZ:$s,scale:Np,scaleX:Np,scaleY:Np,scaleZ:Np,skew:$s,skewX:$s,skewY:$s,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:$d,originX:XP,originY:XP,originZ:ue},yI={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue,..._te,zIndex:l1,fillOpacity:$d,strokeOpacity:$d,numOctaves:l1},wte={...yI,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:L0,WebkitFilter:L0},jF=t=>wte[t];function UF(t,e){let n=jF(t);return n!==L0&&(n=bo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Ste=new Set(["auto","none","0"]);function Ete(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Ste.has(s)&&zd(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=UF(n,i)}class Tte extends mI{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),aI(u))){const c=LF(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!VF.has(r)||e.length!==2)return;const[i,s]=e,o=a1(i),a=a1(s);if(o!==a)if(r1(o)&&r1(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else ka[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||mte(e[i]))&&r.push(i);r.length&&Ete(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ka[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=ka[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function bte(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const $F=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function zF(t){return iF(t)&&"offsetHeight"in t}const u1=30,Ite=t=>!isNaN(parseFloat(t));class Rte{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=An.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=An.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ite(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iI);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=An.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>u1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,u1);return oF(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hu(t,e){return new Rte(t,e)}const{schedule:vI}=yF(queueMicrotask,!1),kr={x:!1,y:!1};function WF(){return kr.x||kr.y}function Cte(t){return t==="x"||t==="y"?kr[t]?null:(kr[t]=!0,()=>{kr[t]=!1}):kr.x||kr.y?null:(kr.x=kr.y=!0,()=>{kr.x=kr.y=!1})}function HF(t,e){const n=bte(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function c1(t){return!(t.pointerType==="touch"||WF())}function xte(t,e,n={}){const[r,i,s]=HF(t,n),o=a=>{if(!c1(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{c1(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const KF=(t,e)=>e?t===e?!0:KF(t,e.parentElement):!1,_I=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Ate=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Pte(t){return Ate.has(t.tagName)||t.tabIndex!==-1}const xm=new WeakSet;function h1(t){return e=>{e.key==="Enter"&&t(e)}}function Y_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kte=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=h1(()=>{if(xm.has(n))return;Y_(n,"down");const i=h1(()=>{Y_(n,"up")}),s=()=>Y_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function d1(t){return _I(t)&&!WF()}function Dte(t,e,n={}){const[r,i,s]=HF(t,n),o=a=>{const l=a.currentTarget;if(!d1(a))return;xm.add(l);const u=e(l,a),c=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),xm.has(l)&&xm.delete(l),d1(p)&&typeof u=="function"&&u(p,{success:g})},d=p=>{c(p,l===window||l===document||n.useGlobalTarget||KF(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),zF(a)&&(a.addEventListener("focus",u=>kte(u,i)),!Pte(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function qF(t){return iF(t)&&"ownerSVGElement"in t}function Ote(t){return qF(t)&&t.tagName==="svg"}const an=t=>!!(t&&t.getVelocity),Mte=[...BF,Et,bo],Nte=t=>Mte.find(FF(t)),wI=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function f1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Lte(...t){return e=>{let n=!1;const r=t.map(i=>{const s=f1(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():f1(t[i],null)}}}}function Vte(...t){return I.useCallback(Lte(...t),t)}class Fte extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=zF(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Bte({children:t,isPresent:e,anchorX:n,root:r}){const i=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=I.useContext(wI),l=Vte(s,t==null?void 0:t.ref);return I.useInsertionEffect(()=>{const{width:u,height:c,top:d,left:f,right:p}=o.current;if(e||!s.current||!u||!c)return;const g=n==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");a&&(S.nonce=a);const T=r??document.head;return T.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{T.contains(S)&&T.removeChild(S)}},[e]),M.jsx(Fte,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(t,{ref:l})})}const jte=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=Jb(Ute),c=I.useId();let d=!0,f=I.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:i,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return s&&d&&(f={...f}),I.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),I.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=M.jsx(Bte,{isPresent:n,anchorX:a,root:l,children:t})),M.jsx(uv.Provider,{value:f,children:t})};function Ute(){return new Map}function GF(t=!0){const e=I.useContext(uv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=I.useId();I.useEffect(()=>{if(t)return i(s)},[t]);const o=I.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Lp=t=>t.key||"";function p1(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const $te=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=GF(o),d=I.useMemo(()=>p1(t),[t]),f=o&&!u?[]:d.map(Lp),p=I.useRef(!0),g=I.useRef(d),S=Jb(()=>new Map),[T,v]=I.useState(d),[y,_]=I.useState(d);nF(()=>{p.current=!1,g.current=d;for(let D=0;D<y.length;D++){const b=Lp(y[D]);f.includes(b)?S.delete(b):S.get(b)!==!0&&S.set(b,!1)}},[y,f.length,f.join("-")]);const C=[];if(d!==T){let D=[...d];for(let b=0;b<y.length;b++){const E=y[b],R=Lp(E);f.includes(R)||(D.splice(b,0,E),C.push(E))}return s==="wait"&&C.length&&(D=C),_(p1(D)),v(d),null}const{forceRender:O}=I.useContext(Yb);return M.jsx(M.Fragment,{children:y.map(D=>{const b=Lp(D),E=o&&!u?!1:d===y||f.includes(b),R=()=>{if(S.has(b))S.set(b,!0);else return;let A=!0;S.forEach(x=>{x||(A=!1)}),A&&(O==null||O(),_(g.current),o&&(c==null||c()),r&&r())};return M.jsx(jte,{isPresent:E,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:E?void 0:R,anchorX:a,children:D},b)})})},XF=I.createContext({strict:!1}),m1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ku={};for(const t in m1)Ku[t]={isEnabled:e=>m1[t].some(n=>!!e[n])};function zte(t){for(const e in t)Ku[e]={...Ku[e],...t[e]}}const Wte=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ty(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Wte.has(t)}let QF=t=>!ty(t);function Hte(t){typeof t=="function"&&(QF=e=>e.startsWith("on")?!ty(e):t(e))}try{Hte(require("@emotion/is-prop-valid").default)}catch{}function Kte(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(QF(i)||n===!0&&ty(i)||!e&&!ty(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const cv=I.createContext({});function hv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Wd(t){return typeof t=="string"||Array.isArray(t)}const SI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],EI=["initial",...SI];function dv(t){return hv(t.animate)||EI.some(e=>Wd(t[e]))}function YF(t){return!!(dv(t)||t.variants)}function qte(t,e){if(dv(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Wd(n)?n:void 0,animate:Wd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Gte(t){const{initial:e,animate:n}=qte(t,I.useContext(cv));return I.useMemo(()=>({initial:e,animate:n}),[g1(e),g1(n)])}function g1(t){return Array.isArray(t)?t.join(" "):t}function y1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=y1(t,e.target.x),r=y1(t,e.target.y);return`${n}% ${r}%`}},Xte={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=bo.parse(t);if(i.length>5)return r;const s=bo.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=rt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},V0={borderRadius:{...Yc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yc,borderTopRightRadius:Yc,borderBottomLeftRadius:Yc,borderBottomRightRadius:Yc,boxShadow:Xte};function JF(t,{layout:e,layoutId:n}){return hc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!V0[t]||t==="opacity")}const Qte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Yte=cc.length;function Jte(t,e,n){let r="",i=!0;for(let s=0;s<Yte;s++){const o=cc[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=$F(a,yI[o]);if(!l){i=!1;const c=Qte[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function TI(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(hc.has(l)){o=!0;continue}else if(_F(l)){i[l]=u;continue}else{const c=$F(u,yI[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=Jte(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const bI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ZF(t,e,n){for(const r in e)!an(e[r])&&!JF(r,n)&&(t[r]=e[r])}function Zte({transformTemplate:t},e){return I.useMemo(()=>{const n=bI();return TI(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ene(t,e){const n=t.style||{},r={};return ZF(r,n,t),Object.assign(r,Zte(t,e)),r}function tne(t,e){const n={},r=ene(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const nne={offset:"stroke-dashoffset",array:"stroke-dasharray"},rne={offset:"strokeDashoffset",array:"strokeDasharray"};function ine(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?nne:rne;t[s.offset]=ue.transform(-r);const o=ue.transform(e),a=ue.transform(n);t[s.array]=`${o} ${a}`}function eB(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(TI(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f}=t;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&ine(d,i,s,o,!1)}const tB=()=>({...bI(),attrs:{}}),nB=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sne(t,e,n,r){const i=I.useMemo(()=>{const s=tB();return eB(s,e,nB(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};ZF(s,t.style,t),i.style={...s,...i.style}}return i}const one=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function II(t){return typeof t!="string"||t.includes("-")?!1:!!(one.indexOf(t)>-1||/[A-Z]/u.test(t))}function ane(t,e,n,{latestValues:r},i,s=!1){const a=(II(t)?sne:tne)(e,r,i,t),l=Kte(e,typeof t=="string",s),u=t!==I.Fragment?{...l,...a,ref:n}:{},{children:c}=e,d=I.useMemo(()=>an(c)?c.get():c,[c]);return I.createElement(t,{...u,children:d})}function v1(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function RI(t,e,n,r){if(typeof e=="function"){const[i,s]=v1(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=v1(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Am(t){return an(t)?t.get():t}function lne({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:une(n,r,i,t),renderState:e()}}function une(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Am(s[f]);let{initial:o,animate:a}=t;const l=dv(t),u=YF(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!hv(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=RI(t,f[p]);if(g){const{transitionEnd:S,transition:T,...v}=g;for(const y in v){let _=v[y];if(Array.isArray(_)){const C=c?_.length-1:0;_=_[C]}_!==null&&(i[y]=_)}for(const y in S)i[y]=S[y]}}}return i}const rB=t=>(e,n)=>{const r=I.useContext(cv),i=I.useContext(uv),s=()=>lne(t,e,r,i);return n?s():Jb(s)};function CI(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(an(r[o])||e.style&&an(e.style[o])||JF(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const cne=rB({scrapeMotionValuesFromProps:CI,createRenderState:bI});function iB(t,e,n){const r=CI(t,e,n);for(const i in t)if(an(t[i])||an(e[i])){const s=cc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const hne=rB({scrapeMotionValuesFromProps:iB,createRenderState:tB}),dne=Symbol.for("motionComponentSymbol");function tu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fne(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):tu(n)&&(n.current=r))},[e])}const xI=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pne="framerAppearId",sB="data-"+xI(pne),oB=I.createContext({});function mne(t,e,n,r,i){var S,T;const{visualElement:s}=I.useContext(cv),o=I.useContext(XF),a=I.useContext(uv),l=I.useContext(wI).reducedMotion,u=I.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=I.useContext(oB);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&gne(u.current,n,i,d);const f=I.useRef(!1);I.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const p=n[sB],g=I.useRef(!!p&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,p))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,p)));return nF(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),g.current&&c.animationState&&c.animationState.animateChanges())}),I.useEffect(()=>{c&&(!g.current&&c.animationState&&c.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,p)}),g.current=!1),c.enteringChildren=void 0)}),c}function gne(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:aB(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&tu(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function aB(t){if(t)return t.options.allowProjection!==!1?t.projection:aB(t.parent)}function J_(t,{forwardMotionProps:e=!1}={},n,r){n&&zte(n);const i=II(t)?hne:cne;function s(a,l){let u;const c={...I.useContext(wI),...a,layoutId:yne(a)},{isStatic:d}=c,f=Gte(a),p=i(a,d);if(!d&&Zb){vne();const g=_ne(c);u=g.MeasureLayout,f.visualElement=mne(t,p,c,r,g.ProjectionNode)}return M.jsxs(cv.Provider,{value:f,children:[u&&f.visualElement?M.jsx(u,{visualElement:f.visualElement,...c}):null,ane(t,a,fne(p,f.visualElement,l),p,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=I.forwardRef(s);return o[dne]=t,o}function yne({layoutId:t}){const e=I.useContext(Yb).id;return e&&t!==void 0?e+"-"+t:t}function vne(t,e){I.useContext(XF).strict}function _ne(t){const{drag:e,layout:n}=Ku;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function wne(t,e){if(typeof Proxy>"u")return J_;const n=new Map,r=(s,o)=>J_(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,J_(o,void 0,t,e)),n.get(o))})}function lB({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Sne({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ene(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Z_(t){return t===void 0||t===1}function F0({scale:t,scaleX:e,scaleY:n}){return!Z_(t)||!Z_(e)||!Z_(n)}function sa(t){return F0(t)||uB(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function uB(t){return _1(t.x)||_1(t.y)}function _1(t){return t&&t!=="0%"}function ny(t,e,n){const r=t-n,i=e*r;return n+i}function w1(t,e,n,r,i){return i!==void 0&&(t=ny(t,i,r)),ny(t,n,r)+e}function B0(t,e=0,n=1,r,i){t.min=w1(t.min,e,n,r,i),t.max=w1(t.max,e,n,r,i)}function cB(t,{x:e,y:n}){B0(t.x,e.translate,e.scale,e.originPoint),B0(t.y,n.translate,n.scale,n.originPoint)}const S1=.999999999999,E1=1.0000000000001;function Tne(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ru(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cB(t,o)),r&&sa(s.latestValues)&&ru(t,s.latestValues))}e.x<E1&&e.x>S1&&(e.x=1),e.y<E1&&e.y>S1&&(e.y=1)}function nu(t,e){t.min=t.min+e,t.max=t.max+e}function T1(t,e,n,r,i=.5){const s=rt(t.min,t.max,i);B0(t,e,n,s,r)}function ru(t,e){T1(t.x,e.x,e.scaleX,e.scale,e.originX),T1(t.y,e.y,e.scaleY,e.scale,e.originY)}function hB(t,e){return lB(Ene(t.getBoundingClientRect(),e))}function bne(t,e,n){const r=hB(t,n),{scroll:i}=e;return i&&(nu(r.x,i.offset.x),nu(r.y,i.offset.y)),r}const b1=()=>({translate:0,scale:1,origin:0,originPoint:0}),iu=()=>({x:b1(),y:b1()}),I1=()=>({min:0,max:0}),At=()=>({x:I1(),y:I1()}),j0={current:null},dB={current:!1};function Ine(){if(dB.current=!0,!!Zb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>j0.current=t.matches;t.addEventListener("change",e),e()}else j0.current=!1}const Rne=new WeakMap;function Cne(t,e,n){for(const r in e){const i=e[r],s=n[r];if(an(i))t.addValue(r,i);else if(an(s))t.addValue(r,Hu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Hu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const R1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xne{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=An.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=dv(n),this.isVariantNode=YF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&an(p)&&p.set(l[f])}}mount(e){var n;this.current=e,Rne.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),dB.current||Ine(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),To(this.notifyUpdate),To(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=hc.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ku){const n=Ku[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<R1.length;r++){const i=R1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Cne(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Hu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(rF(r)||sF(r))?r=parseFloat(r):!Nte(r)&&bo.test(n)&&(r=UF(e,n)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=RI(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!an(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iI),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){vI.render(this.render)}}class fB extends xne{constructor(){super(...arguments),this.KeyframeResolver=Tte}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pB(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function Ane(t){return window.getComputedStyle(t)}class Pne extends fB{constructor(){super(...arguments),this.type="html",this.renderInstance=pB}readValueFromInstance(e,n){var r;if(hc.has(n))return(r=this.projection)!=null&&r.isProjecting?P0(n):$ee(e,n);{const i=Ane(e),s=(_F(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return hB(e,n)}build(e,n,r){TI(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return CI(e,n,r)}}const mB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kne(t,e,n,r){pB(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(mB.has(i)?i:xI(i),e.attrs[i])}class Dne extends fB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=At}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hc.has(n)){const r=jF(n);return r&&r.default||0}return n=mB.has(n)?n:xI(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return iB(e,n,r)}build(e,n,r){eB(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){kne(e,n,r,i)}mount(e){this.isSVGTag=nB(e.tagName),super.mount(e)}}const One=(t,e)=>II(t)?new Dne(e):new Pne(e,{allowProjection:t!==I.Fragment});function _u(t,e,n){const r=t.getProps();return RI(r,e,n!==void 0?n:r.custom,t)}const U0=t=>Array.isArray(t);function Mne(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Hu(n))}function Nne(t){return U0(t)?t[t.length-1]||0:t}function Lne(t,e){const n=_u(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Nne(s[o]);Mne(t,o,a)}}function Vne(t){return!!(an(t)&&t.add)}function $0(t,e){const n=t.getValue("willChange");if(Vne(n))return n.add(e);if(!n&&as.WillChange){const r=new as.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function gB(t){return t.props[sB]}const Fne=t=>t!==null;function Bne(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Fne),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const jne={type:"spring",stiffness:500,damping:25,restSpeed:10},Une=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$ne={type:"keyframes",duration:.8},zne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wne=(t,{keyframes:e})=>e.length>2?$ne:hc.has(t)?t.startsWith("scale")?Une(e[1]):jne:zne;function Hne({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const AI=(t,e,n,r={},i,s)=>o=>{const a=gI(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ei(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Hne(a)||Object.assign(c,Wne(t,c)),c.duration&&(c.duration=Ei(c.duration)),c.repeatDelay&&(c.repeatDelay=Ei(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(N0(c),c.delay===0&&(d=!0)),(as.instantAnimations||as.skipAnimations)&&(d=!0,N0(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const f=Bne(c.keyframes,a);if(f!==void 0){Ze.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new pI(c):new hte(c)};function Kne({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function yB(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const d=t.getValue(c,t.latestValues[c]??null),f=a[c];if(f===void 0||u&&Kne(u,c))continue;const p={delay:n,...gI(s||{},c)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const v=gB(t);if(v){const y=window.MotionHandoffAnimation(v,c,Ze);y!==null&&(p.startTime=y,S=!0)}}$0(t,c),d.start(AI(c,d,f,t.shouldReduceMotion&&VF.has(c)?{type:!1}:p,t,S));const T=d.animation;T&&l.push(T)}return o&&Promise.all(l).then(()=>{Ze.update(()=>{o&&Lne(t,o)})}),l}function vB(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function z0(t,e,n={}){var l;const r=_u(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(yB(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return qne(t,e,u,c,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function qne(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(z0(l,e,{...o,delay:n+(typeof r=="function"?0:r)+vB(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Gne(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>z0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=z0(t,e,n);else{const i=typeof e=="function"?_u(t,e,n.custom):e;r=Promise.all(yB(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function _B(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Xne=EI.length;function wB(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?wB(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Xne;n++){const r=EI[n],i=t.props[r];(Wd(i)||i===!1)&&(e[r]=i)}return e}const Qne=[...SI].reverse(),Yne=SI.length;function Jne(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Gne(t,n,r)))}function Zne(t){let e=Jne(t),n=C1(),r=!0;const i=l=>(u,c)=>{var f;const d=_u(t,c,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,...S}=d;u={...u,...S,...g}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=wB(t.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let T=0;T<Yne;T++){const v=Qne[T],y=n[v],_=u[v]!==void 0?u[v]:c[v],C=Wd(_),O=v===l?y.isActive:null;O===!1&&(g=T);let D=_===c[v]&&_!==u[v]&&C;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),y.protectedKeys={...p},!y.isActive&&O===null||!_&&!y.prevProp||hv(_)||typeof _=="boolean")continue;const b=ere(y.prevProp,_);let E=b||v===l&&y.isActive&&!D&&C||T>g&&C,R=!1;const A=Array.isArray(_)?_:[_];let x=A.reduce(i(v),{});O===!1&&(x={});const{prevResolvedValues:N={}}=y,k={...N,...x},de=Ce=>{E=!0,f.has(Ce)&&(R=!0,f.delete(Ce)),y.needsAnimating[Ce]=!0;const U=t.getValue(Ce);U&&(U.liveStyle=!1)};for(const Ce in k){const U=x[Ce],Y=N[Ce];if(p.hasOwnProperty(Ce))continue;let ie=!1;U0(U)&&U0(Y)?ie=!_B(U,Y):ie=U!==Y,ie?U!=null?de(Ce):f.add(Ce):U!==void 0&&f.has(Ce)?de(Ce):y.protectedKeys[Ce]=!0}y.prevProp=_,y.prevResolvedValues=x,y.isActive&&(p={...p,...x}),r&&t.blockInitialAnimation&&(E=!1);const pe=D&&b;E&&(!pe||R)&&d.push(...A.map(Ce=>{const U={type:v};if(typeof Ce=="string"&&r&&!pe&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,ie=_u(Y,Ce);if(Y.enteringChildren&&ie){const{delayChildren:we}=ie.transition||{};U.delay=vB(Y.enteringChildren,t,we)}}return{animation:Ce,options:U}}))}if(f.size){const T={};if(typeof u.initial!="boolean"){const v=_u(t,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(T.transition=v.transition)}f.forEach(v=>{const y=t.getBaseTarget(v),_=t.getValue(v);_&&(_.liveStyle=!0),T[v]=y??null}),d.push({animation:T})}let S=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=C1()}}}function ere(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_B(e,t):!1}function Zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function C1(){return{animate:Zo(!0),whileInView:Zo(),whileHover:Zo(),whileTap:Zo(),whileDrag:Zo(),whileFocus:Zo(),exit:Zo()}}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}class tre extends No{constructor(e){super(e),e.animationState||(e.animationState=Zne(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let nre=0;class rre extends No{constructor(){super(...arguments),this.id=nre++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ire={animation:{Feature:tre},exit:{Feature:rre}};function Hd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function If(t){return{point:{x:t.pageX,y:t.pageY}}}const sre=t=>e=>_I(e)&&t(e,If(e));function Xh(t,e,n,r){return Hd(t,e,sre(n),r)}const SB=1e-4,ore=1-SB,are=1+SB,EB=.01,lre=0-EB,ure=0+EB;function yn(t){return t.max-t.min}function cre(t,e,n){return Math.abs(t-e)<=n}function x1(t,e,n,r=.5){t.origin=r,t.originPoint=rt(e.min,e.max,t.origin),t.scale=yn(n)/yn(e),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ore&&t.scale<=are||isNaN(t.scale))&&(t.scale=1),(t.translate>=lre&&t.translate<=ure||isNaN(t.translate))&&(t.translate=0)}function Qh(t,e,n,r){x1(t.x,e.x,n.x,r?r.originX:void 0),x1(t.y,e.y,n.y,r?r.originY:void 0)}function A1(t,e,n){t.min=n.min+e.min,t.max=t.min+yn(e)}function hre(t,e,n){A1(t.x,e.x,n.x),A1(t.y,e.y,n.y)}function P1(t,e,n){t.min=e.min-n.min,t.max=t.min+yn(e)}function ry(t,e,n){P1(t.x,e.x,n.x),P1(t.y,e.y,n.y)}function ar(t){return[t("x"),t("y")]}const TB=({current:t})=>t?t.ownerDocument.defaultView:null,k1=(t,e)=>Math.abs(t-e);function dre(t,e){const n=k1(t.x,e.x),r=k1(t.y,e.y);return Math.sqrt(n**2+r**2)}class bB{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=tw(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=dre(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:S}=f,{timestamp:T}=Ht;this.history.push({...S,timestamp:T});const{onStart:v,onMove:y}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ew(p,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:S,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=tw(f.type==="pointercancel"?this.lastMoveEventInfo:ew(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,v),S&&S(f,v)},!_I(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=If(e),l=ew(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Ht;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,tw(l,this.history)),this.removeListeners=Ef(Xh(this.contextWindow,"pointermove",this.handlePointerMove),Xh(this.contextWindow,"pointerup",this.handlePointerUp),Xh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),To(this.updatePoint)}}function ew(t,e){return e?{point:e(t.point)}:t}function D1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tw({point:t},e){return{point:t,delta:D1(t,IB(e)),offset:D1(t,fre(e)),velocity:pre(e,.1)}}function fre(t){return t[0]}function IB(t){return t[t.length-1]}function pre(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=IB(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ei(e)));)n--;if(!r)return{x:0,y:0};const s=fr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mre(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?rt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?rt(n,t,r.max):Math.min(t,n)),t}function O1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function gre(t,{top:e,left:n,bottom:r,right:i}){return{x:O1(t.x,n,i),y:O1(t.y,e,r)}}function M1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function yre(t,e){return{x:M1(t.x,e.x),y:M1(t.y,e.y)}}function vre(t,e){let n=.5;const r=yn(t),i=yn(e);return i>r?n=Ud(e.min,e.max-r,t.min):r>i&&(n=Ud(t.min,t.max-i,e.min)),os(0,1,n)}function _re(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const W0=.35;function wre(t=W0){return t===!1?t=0:t===!0&&(t=W0),{x:N1(t,"left","right"),y:N1(t,"top","bottom")}}function N1(t,e,n){return{min:L1(t,e),max:L1(t,n)}}function L1(t,e){return typeof t=="number"?t:t[e]||0}const Sre=new WeakMap;class Ere{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(If(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:S}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Cte(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ar(v=>{let y=this.getAxisMotionValue(v).get()||0;if(Ti.test(y)){const{projection:_}=this.visualElement;if(_&&_.layout){const C=_.layout.layoutBox[v];C&&(y=yn(C)*(parseFloat(y)/100))}}this.originPoint[v]=y}),S&&Ze.postRender(()=>S(d,f)),$0(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:S,onDrag:T}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=f;if(g&&this.currentDirection===null){this.currentDirection=Tre(v),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),T&&T(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>ar(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new bB(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:TB(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ze.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Vp(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=mre(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&tu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=gre(r.layoutBox,e):this.constraints=!1,this.elastic=wre(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=_re(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=bne(r,i.root,this.visualElement.getTransformPagePoint());let o=yre(i.layout.layoutBox,s);if(n){const a=n(Sne(o));this.hasMutatedConstraints=!!a,a&&(o=lB(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=ar(c=>{if(!Vp(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $0(this.visualElement,e),r.start(AI(e,r,0,n,this.visualElement,!1))}stopAnimation(){ar(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ar(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ar(n=>{const{drag:r}=this.getProps();if(!Vp(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-rt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ar(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=vre({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ar(o=>{if(!Vp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(rt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Sre.set(this.visualElement,this);const e=this.visualElement.current,n=Xh(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();tu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ze.read(r);const o=Hd(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ar(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=W0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Vp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Tre(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class bre extends No{constructor(e){super(e),this.removeGroupControls=yr,this.removeListeners=yr,this.controls=new Ere(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yr}unmount(){this.removeGroupControls(),this.removeListeners()}}const V1=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class Ire extends No{constructor(){super(...arguments),this.removePointerDownListener=yr}onPointerDown(e){this.session=new bB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TB(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:V1(e),onStart:V1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ze.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Xh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Pm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let nw=!1;class Rre extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),nw&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Pm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,nw=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vI.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;nw=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function RB(t){const[e,n]=GF(),r=I.useContext(Yb);return M.jsx(Rre,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(oB),isPresent:e,safeToRemove:n})}function Cre(t,e,n){const r=an(t)?t:Hu(t);return r.start(AI("",r,e,n)),r.animation}const xre=(t,e)=>t.depth-e.depth;class Are{constructor(){this.children=[],this.isDirty=!1}add(e){eI(this.children,e),this.isDirty=!0}remove(e){tI(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xre),this.isDirty=!1,this.children.forEach(e)}}function Pre(t,e){const n=An.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(To(r),t(s-e))};return Ze.setup(r,!0),()=>To(r)}const CB=["TopLeft","TopRight","BottomLeft","BottomRight"],kre=CB.length,F1=t=>typeof t=="string"?parseFloat(t):t,B1=t=>typeof t=="number"||ue.test(t);function Dre(t,e,n,r,i,s){i?(t.opacity=rt(0,n.opacity??1,Ore(r)),t.opacityExit=rt(e.opacity??1,0,Mre(r))):s&&(t.opacity=rt(e.opacity??1,n.opacity??1,r));for(let o=0;o<kre;o++){const a=`border${CB[o]}Radius`;let l=j1(e,a),u=j1(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||B1(l)===B1(u)?(t[a]=Math.max(rt(F1(l),F1(u),r),0),(Ti.test(u)||Ti.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,r))}function j1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Ore=xB(0,.5,fF),Mre=xB(.5,.95,yr);function xB(t,e,n){return r=>r<t?0:r>e?1:n(Ud(t,e,r))}function U1(t,e){t.min=e.min,t.max=e.max}function Ar(t,e){U1(t.x,e.x),U1(t.y,e.y)}function $1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function z1(t,e,n,r,i){return t-=e,t=ny(t,1/n,r),i!==void 0&&(t=ny(t,1/i,r)),t}function Nre(t,e=0,n=1,r=.5,i,s=t,o=t){if(Ti.test(e)&&(e=parseFloat(e),e=rt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=rt(s.min,s.max,r);t===s&&(a-=e),t.min=z1(t.min,e,n,a,i),t.max=z1(t.max,e,n,a,i)}function W1(t,e,[n,r,i],s,o){Nre(t,e[n],e[r],e[i],e.scale,s,o)}const Lre=["x","scaleX","originX"],Vre=["y","scaleY","originY"];function H1(t,e,n,r){W1(t.x,e,Lre,n?n.x:void 0,r?r.x:void 0),W1(t.y,e,Vre,n?n.y:void 0,r?r.y:void 0)}function K1(t){return t.translate===0&&t.scale===1}function AB(t){return K1(t.x)&&K1(t.y)}function q1(t,e){return t.min===e.min&&t.max===e.max}function Fre(t,e){return q1(t.x,e.x)&&q1(t.y,e.y)}function G1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function PB(t,e){return G1(t.x,e.x)&&G1(t.y,e.y)}function X1(t){return yn(t.x)/yn(t.y)}function Q1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Bre{constructor(){this.members=[]}add(e){eI(this.members,e),e.scheduleRender()}remove(e){if(tI(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jre(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:p,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const rw=["","X","Y","Z"],Ure=1e3;let $re=0;function iw(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function kB(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gB(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&kB(r)}function DB({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=$re++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Hre),this.nodes.forEach(Xre),this.nodes.forEach(Qre),this.nodes.forEach(Kre)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Are)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new iI),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=qF(o)&&!Ote(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c,d=0;const f=()=>this.root.updateBlockedByResize=!1;Ze.read(()=>{d=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,c&&c(),c=Pre(f,250),Pm.hasAnimatedSinceResize&&(Pm.hasAnimatedSinceResize=!1,this.nodes.forEach(Z1)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||tie,{onLayoutAnimationStart:S,onLayoutAnimationComplete:T}=u.getProps(),v=!this.targetLayout||!PB(this.targetLayout,p),y=!d&&f;if(this.options.layoutRoot||this.resumeFrom||y||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...gI(g,"layout"),onPlay:S,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(c,y)}else d||Z1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),To(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Yre),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Y1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(J1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Gre),this.nodes.forEach(zre),this.nodes.forEach(Wre)):this.nodes.forEach(J1),this.clearAllSnapshots();const a=An.now();Ht.delta=os(0,1e3/60,a-Ht.timestamp),Ht.timestamp=a,Ht.isProcessing=!0,K_.update.process(Ht),K_.preRender.process(Ht),K_.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qre),this.sharedNodes.forEach(Jre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yn(this.snapshot.measuredBox.x)&&!yn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!AB(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||sa(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),nie(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return At();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(rie))){const{scroll:c}=this.root;c&&(nu(a.x,c.offset.x),nu(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=At();if(Ar(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Ar(a,o),nu(a.x,d.offset.x),nu(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=At();Ar(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ru(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),sa(c.latestValues)&&ru(l,c.latestValues)}return sa(this.latestValues)&&ru(l,this.latestValues),l}removeTransform(o){const a=At();Ar(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!sa(u.latestValues))continue;F0(u.latestValues)&&u.updateSnapshot();const c=At(),d=u.measurePageBox();Ar(c,d),H1(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return sa(this.latestValues)&&H1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!this.layout||!(c||d))return;this.resolvedRelativeTargetAt=Ht.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ar(this.target,this.layout.layoutBox),cB(this.target,this.targetDelta)):Ar(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||F0(this.parent.latestValues)||uB(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),ry(this.relativeTargetOrigin,a,l),Ar(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Ar(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;Tne(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=At());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($1(this.prevProjectionDelta.x,this.projectionDelta.x),$1(this.prevProjectionDelta.y,this.projectionDelta.y)),Qh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Q1(this.projectionDelta.x,this.prevProjectionDelta.x)||!Q1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iu(),this.projectionDelta=iu(),this.projectionDeltaWithTransform=iu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=At(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,S=p!==g,T=this.getStack(),v=!T||T.members.length<=1,y=!!(S&&!v&&this.options.crossfade===!0&&!this.path.some(eie));this.animationProgress=0;let _;this.mixTargetDelta=C=>{const O=C/1e3;ek(d.x,o.x,O),ek(d.y,o.y,O),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ry(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Zre(this.relativeTarget,this.relativeTargetOrigin,f,O),_&&Fre(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=At()),Ar(_,this.relativeTarget)),S&&(this.animationValues=c,Dre(c,u,this.latestValues,O,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(To(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{Pm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Hu(0)),this.currentAnimation=Cre(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ure),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&OB(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||At();const d=yn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=yn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Ar(a,l),ru(a,c),Qh(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Bre),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&iw("z",o,u,this.animationValues);for(let c=0;c<rw.length;c++)iw(`rotate${rw[c]}`,o,u,this.animationValues),iw(`skew${rw[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Am(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Am(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!sa(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=jre(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const g in V0){if(c[g]===void 0)continue;const{correct:S,applyTo:T,isCSSVariable:v}=V0[g],y=d==="none"?c[g]:S(c[g],u);if(T){const _=T.length;for(let C=0;C<_;C++)o[T[C]]=y}else v?this.options.visualElement.renderState.vars[g]=y:o[g]=y}this.options.layoutId&&(o.pointerEvents=u===this?Am(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Y1),this.root.sharedNodes.clear()}}}function zre(t){t.updateLayout()}function Wre(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?ar(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=yn(f);f.min=r[d].min,f.max=f.min+p}):OB(s,e.layoutBox,r)&&ar(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=yn(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=iu();Qh(a,r,e.layoutBox);const l=iu();o?Qh(l,t.applyTransform(i,!0),e.measuredBox):Qh(l,r,e.layoutBox);const u=!AB(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=At();ry(g,e.layoutBox,f.layoutBox);const S=At();ry(S,r,p.layoutBox),PB(g,S)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Hre(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Kre(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function qre(t){t.clearSnapshot()}function Y1(t){t.clearMeasurements()}function J1(t){t.isLayoutDirty=!1}function Gre(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Z1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Xre(t){t.resolveTargetDelta()}function Qre(t){t.calcProjection()}function Yre(t){t.resetSkewAndRotation()}function Jre(t){t.removeLeadSnapshot()}function ek(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function tk(t,e,n,r){t.min=rt(e.min,n.min,r),t.max=rt(e.max,n.max,r)}function Zre(t,e,n,r){tk(t.x,e.x,n.x,r),tk(t.y,e.y,n.y,r)}function eie(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const tie={duration:.45,ease:[.4,0,.1,1]},nk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rk=nk("applewebkit/")&&!nk("chrome/")?Math.round:yr;function ik(t){t.min=rk(t.min),t.max=rk(t.max)}function nie(t){ik(t.x),ik(t.y)}function OB(t,e,n){return t==="position"||t==="preserve-aspect"&&!cre(X1(e),X1(n),.2)}function rie(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const iie=DB({attachResizeListener:(t,e)=>Hd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sw={current:void 0},MB=DB({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sw.current){const t=new iie({});t.mount(window),t.setOptions({layoutScroll:!0}),sw.current=t}return sw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sie={pan:{Feature:Ire},drag:{Feature:bre,ProjectionNode:MB,MeasureLayout:RB}};function sk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ze.postRender(()=>s(e,If(e)))}class oie extends No{mount(){const{current:e}=this.node;e&&(this.unmount=xte(e,(n,r)=>(sk(this.node,r,"Start"),i=>sk(this.node,i,"End"))))}unmount(){}}class aie extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ef(Hd(this.node.current,"focus",()=>this.onFocus()),Hd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ok(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ze.postRender(()=>s(e,If(e)))}class lie extends No{mount(){const{current:e}=this.node;e&&(this.unmount=Dte(e,(n,r)=>(ok(this.node,r,"Start"),(i,{success:s})=>ok(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const H0=new WeakMap,ow=new WeakMap,uie=t=>{const e=H0.get(t.target);e&&e(t)},cie=t=>{t.forEach(uie)};function hie({root:t,...e}){const n=t||document;ow.has(n)||ow.set(n,{});const r=ow.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(cie,{root:t,...e})),r[i]}function die(t,e,n){const r=hie(e);return H0.set(t,n),r.observe(t),()=>{H0.delete(t),r.unobserve(t)}}const fie={some:0,all:1};class pie extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:fie[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return die(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(mie(e,n))&&this.startObserver()}unmount(){}}function mie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const gie={inView:{Feature:pie},tap:{Feature:lie},focus:{Feature:aie},hover:{Feature:oie}},yie={layout:{ProjectionNode:MB,MeasureLayout:RB}},vie={...ire,...gie,...sie,...yie},_ie=wne(vie,One),wie=""+new URL("banner-CAwNRSLn.png",import.meta.url).href,ai={colors:{background:"#fff9ec",highlight:"#ff8e52",text:"#00202b",secondaryText:"#666666",border:"#eee"}};function Sie(){return M.jsxs(X,{style:ak.container,children:[M.jsx(q,{style:ak.title,children:"Pocket Stylist"}),M.jsx(q,{children:"Welcome to your personal style assistant."})]})}const ak=Ae.create({container:{flex:1,padding:20,alignItems:"center",justifyContent:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:10}}),Eie=async(t,e)=>{const n=oc(rr(),"users",t);await Mb(n,e,{merge:!0})},Tie=async t=>{const e=oc(rr(),"users",t),n=bX(e);return(await n).exists()?(await n).data():null},bie=(t,e)=>{const n=rv(rr(),"users",t,"closet"),r=Ab(n,YV("createdAt","desc"));return CX(r,i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)})},NB=async(t,e)=>{console.log("addItemToDb called for user:",t);try{const n=rv(rr(),"users",t,"closet"),r=oc(n);console.log("Generated ID:",r.id),console.log("Writing document to Firestore (setDoc)...");const i=Mb(r,e),s=new Promise((o,a)=>setTimeout(()=>a(new Error("Database write timed out after 30 seconds")),3e4));return await Promise.race([i,s]),console.log("Document written successfully"),{...e,id:r.id}}catch(n){throw console.error("Error in addItemToDb:",n),n}},Iie=async t=>{const e=rv(rr(),"users",t,"closet"),n=Ab(e,YV("createdAt","desc"));return(await ZV(n)).docs.map(i=>({id:i.id,...i.data()}))},Rie=async(t,e,n)=>{const r=oc(rr(),"users",t,"closet",e);await IX(r,n)},Cie=async(t,e)=>{const n=oc(rr(),"users",t,"closet",e);await RX(n)},xie=async(t,e,n)=>{const r=oc(rr(),"users",t,"schedule",e);await Mb(r,{date:e,...n},{merge:!0})},Aie=async t=>{const e=rv(rr(),"users",t,"schedule"),n=Ab(e),r=await ZV(n),i={};return r.forEach(s=>{i[s.id]=s.data()}),i},Pie=async(t,e)=>{try{const n=`closet/${Date.now()}_${Math.random().toString(36).substring(7)}.jpg`,r=aZ(dZ,`users/${t}/${n}`);console.log("Starting upload...");const s=await(await fetch(e)).blob(),o=sZ(r,s),a=new Promise((c,d)=>setTimeout(()=>d(new Error("Upload timed out after 30 seconds")),3e4)),l=await Promise.race([o,a]);return console.log("Upload successful, getting URL..."),await oZ(l.ref)}catch(n){throw console.error("Error uploading image to storage:",n),n}},LB=I.createContext();function fv(){return I.useContext(LB)}function kie({children:t}){const{currentUser:e}=Qb(),[n,r]=I.useState([]),[i,s]=I.useState({}),[o,a]=I.useState(!0);I.useEffect(()=>{if(e){const g=bie(e.uid,S=>{r(S),a(!1)});return Aie(e.uid).then(s),()=>g()}else r([]),s({}),a(!1)},[e]);const p={items:n,schedule:i,loading:o,addItem:async g=>{if(!e)throw new Error("User not authenticated");const S=Date.now().toString(),T={...g,id:S,rating:3,wearCount:0,createdAt:new Date().toISOString(),isOptimistic:!0};r(v=>[T,...v]);try{let v=g.imageUri;g.imageUri&&g.imageUri.startsWith("data:")&&(v=await Pie(e.uid,g.imageUri));const y={...g,imageUri:v,rating:3,wearCount:0,createdAt:new Date().toISOString()};console.log("Saving item to DB. Size approx:",JSON.stringify(y).length,"bytes"),await NB(e.uid,y),r(_=>_.filter(C=>C.id!==S))}catch(v){throw console.error("Error adding item:",v),alert(`Failed to save item: ${v.message}. 
Check console for details.`),r(y=>y.filter(_=>_.id!==S)),v}},updateItem:async(g,S)=>{if(e){r(T=>T.map(v=>v.id===g?{...v,...S}:v));try{await Rie(e.uid,g,S)}catch(T){console.error("Error updating item:",T)}}},deleteItem:async g=>{if(e){r(S=>S.filter(T=>T.id!==g));try{await Cie(e.uid,g)}catch(S){console.error("Error deleting item:",S)}}},addToSchedule:async(g,S)=>{if(e){s(T=>({...T,[g]:{date:g,...S}}));try{await xie(e.uid,g,S)}catch(T){console.error("Error saving schedule:",T)}}},isItemAvailable:g=>{if(!g.lastWorn)return!0;const S=new Date(g.lastWorn),v=Math.abs(new Date-S);return Math.ceil(v/(1e3*60*60*24))>7}};return M.jsx(LB.Provider,{value:p,children:t})}const VB=2,Die=pg.get("window").width,Oie=(Die-40)/VB,Mie=({uri:t,style:e,alt:n})=>M.jsx("div",{style:{...Ae.flatten(e),overflow:"hidden"},children:M.jsx("img",{src:t,alt:n,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},loading:"lazy",onError:r=>{r.target.onerror=null,console.warn("Image failed to load:",t)}})}),Nie=yt.memo(({item:t,onPress:e,isAvailable:n})=>M.jsx(be,{onPress:()=>e(t),children:M.jsxs(X,{style:[fe.itemContainer,!n&&fe.unavailableItem],children:[M.jsx(Mie,{uri:t.imageUri||t.image,style:fe.image,alt:t.type}),M.jsxs(X,{style:fe.infoContainer,children:[M.jsx(q,{style:fe.itemType,children:t.type}),!n&&M.jsx(q,{style:fe.unavailableText,children:"In Wash"})]})]})}));function Lie(){const{items:t,isItemAvailable:e,deleteItem:n,updateItem:r}=fv(),{currentUser:i}=Qb(),s=Zu(),[o,a]=I.useState(!1),[l,u]=I.useState(""),[c,d]=I.useState([]),f="v1.8 (Lazy Init)",p=x=>d(N=>[...N,`${new Date().toLocaleTimeString()}: ${x}`]),g=async()=>{confirm("This will clear the app's local cache to fix sync issues. It will NOT delete your account data. The app will reload. Continue?")&&await pZ()},S=async()=>{if(!i)return alert("Not logged in");const x="test_"+Date.now();u("Running..."),d([]);try{p(`App Version: ${f}`),p(`Online Status: ${navigator.onLine}`),p("Attempting Hard Reconnect..."),await fZ(),p("Re-initialized."),p("Forcing Firestore Network Connection..."),await hX(rr()),p("Network Enabled."),p("Test 0: Pinging GitHub API...");try{const N=await fetch("https://api.github.com/zen");p(`Ping success! Status: ${N.status}`)}catch(N){p(`Ping FAILED: ${N.message}`),p("WARNING: You might be offline or blocked.")}p("Test 1: Reading Firestore...");try{const N=await Iie(i.uid);p(`Read success! Found ${N.length} items.`)}catch(N){throw p(`Read FAILED: ${N.message}`),N}p("Test 2: Writing Firestore..."),await NB(i.uid,{id:x,type:"test_connection",createdAt:new Date().toISOString()}),p("Write successful!"),u("PASSED"),p("Cleaning up..."),n(x),p("Done.")}catch(N){console.error(N),p(`ERROR: ${N.message}`),u("FAILED")}},[T,v]=I.useState(!1),[y,_]=I.useState(null),C=I.useRef(null),O=I.useRef(null),D=x=>{const N=x.target.files[0];if(N){a(!1);const k=new FileReader;k.onloadend=()=>{s("/camera",{state:{image:k.result}})},k.readAsDataURL(N)}},b=x=>{_(x),v(!0)},E=()=>{confirm("Are you sure you want to delete this item?")&&(n(y.id),v(!1))},R=x=>{_(N=>({...N,rating:x})),r(y.id,{rating:x})},A=({item:x})=>M.jsx(Nie,{item:x,onPress:b,isAvailable:e(x)});return M.jsxs(X,{style:fe.container,children:[M.jsxs(X,{style:fe.header,children:[M.jsxs(X,{children:[M.jsx(q,{style:fe.title,children:"Virtual Closet"}),M.jsx(q,{style:{fontSize:10,color:"#999"},children:f})]}),M.jsxs(X,{style:{flexDirection:"row",gap:10},children:[M.jsx(be,{style:[fe.addButton,{backgroundColor:"#d9534f"}],onPress:g,children:M.jsx(q,{style:fe.addButtonText,children:"Reset"})}),M.jsx(be,{style:[fe.addButton,{backgroundColor:"#666"}],onPress:S,children:M.jsx(q,{style:fe.addButtonText,children:"Test DB"})}),M.jsx(be,{style:fe.addButton,onPress:()=>a(!0),children:M.jsx(q,{style:fe.addButtonText,children:"+ Add"})})]}),M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:C,style:{display:"none"},onChange:D}),M.jsx("input",{type:"file",accept:"image/*",ref:O,style:{display:"none"},onChange:D})]}),c.length>0&&M.jsxs(X,{style:{padding:10,backgroundColor:"#eee",marginBottom:10,maxHeight:150,overflow:"scroll"},children:[M.jsxs(q,{style:{fontWeight:"bold",marginBottom:5},children:["Debug Logs (",l,"):"]}),c.map((x,N)=>M.jsx(q,{style:{fontSize:12,fontFamily:"monospace"},children:x},N))]}),M.jsx(Z9,{data:t,renderItem:A,keyExtractor:x=>x.id,numColumns:VB,contentContainerStyle:fe.listContent,ListEmptyComponent:M.jsx(q,{style:fe.emptyText,children:"No items in closet. Add some!"})}),M.jsx(Sd,{animationType:"fade",transparent:!0,visible:o,onRequestClose:()=>a(!1),children:M.jsxs(X,{style:fe.modalOverlay,children:[M.jsx(be,{style:fe.modalBackdrop,onPress:()=>a(!1)}),M.jsxs(X,{style:fe.modalContent,children:[M.jsx(q,{style:fe.modalTitle,children:"Add New Item"}),M.jsx(be,{style:fe.modalButton,onPress:()=>{a(!1),C.current.click()},children:M.jsx(q,{style:fe.modalButtonText,children:"Take Photo"})}),M.jsx(be,{style:fe.modalButton,onPress:()=>{a(!1),O.current.click()},children:M.jsx(q,{style:fe.modalButtonText,children:"Choose from Library"})}),M.jsx(be,{style:[fe.modalButton,fe.cancelButton],onPress:()=>a(!1),children:M.jsx(q,{style:fe.cancelButtonText,children:"Cancel"})})]})]})}),M.jsx(Sd,{animationType:"slide",visible:T,onRequestClose:()=>v(!1),children:M.jsx(X,{style:fe.detailContainer,children:y&&M.jsxs(Vr,{children:[M.jsx(bi,{source:{uri:y.imageUri},style:fe.detailImage,resizeMode:"contain"}),M.jsxs(X,{style:fe.detailInfo,children:[M.jsx(q,{style:fe.detailTitle,children:y.type}),M.jsxs(q,{style:fe.detailText,children:["Color: ",y.color]}),M.jsxs(q,{style:fe.detailText,children:["Style: ",y.style]}),M.jsxs(q,{style:fe.detailText,children:["Worn: ",y.wearCount||0," times"]}),M.jsx(q,{style:fe.sectionTitle,children:"Rating"}),M.jsx(X,{style:fe.ratingContainer,children:[1,2,3,4,5].map(x=>M.jsx(be,{onPress:()=>R(x),children:M.jsx(q,{style:[fe.star,(y.rating||0)>=x?fe.starFilled:fe.starEmpty],children:""})},x))}),M.jsx(be,{style:fe.deleteButton,onPress:E,children:M.jsx(q,{style:fe.deleteButtonText,children:"Delete Item"})}),M.jsx(be,{style:fe.closeDetailButton,onPress:()=>v(!1),children:M.jsx(q,{style:fe.closeDetailButtonText,children:"Close"})})]})]})})})]})}const fe=Ae.create({container:{flex:1,padding:10,backgroundColor:"#fff"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingHorizontal:10},title:{fontSize:24,fontWeight:"bold"},addButton:{backgroundColor:"#007AFF",paddingVertical:8,paddingHorizontal:15,borderRadius:20},addButtonText:{color:"#fff",fontWeight:"bold"},listContent:{paddingBottom:20},itemContainer:{width:Oie,margin:5,backgroundColor:"#f9f9f9",borderRadius:10,overflow:"hidden",elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41},unavailableItem:{opacity:.5,backgroundColor:"#eee"},image:{width:"100%",height:150},infoContainer:{padding:10},itemType:{textTransform:"capitalize",fontWeight:"bold"},unavailableText:{color:"red",fontSize:12,marginTop:5},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalBackdrop:{...Ae.absoluteFillObject},modalContent:{width:"80%",maxWidth:300,backgroundColor:"white",borderRadius:20,padding:20,alignItems:"center",elevation:5},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},modalButton:{width:"100%",padding:15,backgroundColor:"#f0f0f0",borderRadius:10,marginBottom:10,alignItems:"center"},modalButtonText:{fontSize:16,color:"#007AFF"},cancelButton:{backgroundColor:"transparent",marginTop:5},cancelButtonText:{fontSize:16,color:"#FF3B30",fontWeight:"bold"},detailContainer:{flex:1,backgroundColor:"#fff"},detailImage:{width:"100%",height:400,backgroundColor:"#f0f0f0"},detailInfo:{padding:20},detailTitle:{fontSize:28,fontWeight:"bold",marginBottom:10,textTransform:"capitalize"},detailText:{fontSize:16,marginBottom:5,color:"#333"},sectionTitle:{fontSize:18,fontWeight:"bold",marginTop:20,marginBottom:10},ratingContainer:{flexDirection:"row",marginBottom:20},star:{fontSize:30,marginRight:5},starFilled:{color:"#FFD700"},starEmpty:{color:"#ddd"},deleteButton:{backgroundColor:"#FF3B30",padding:15,borderRadius:10,alignItems:"center",marginTop:20},deleteButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},closeDetailButton:{padding:15,alignItems:"center",marginTop:10},closeDetailButtonText:{color:"#007AFF",fontSize:16},emptyText:{textAlign:"center",marginTop:50,fontSize:18,color:"#999"}});function ce(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function F(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let FB=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return FB=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function K0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const q0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class oe extends Error{}class Yt extends oe{constructor(e,n,r,i){super(`${Yt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new pv({message:r,cause:q0(n)});const s=n==null?void 0:n.error;return e===400?new BB(e,s,r,i):e===401?new jB(e,s,r,i):e===403?new UB(e,s,r,i):e===404?new $B(e,s,r,i):e===409?new zB(e,s,r,i):e===422?new WB(e,s,r,i):e===429?new HB(e,s,r,i):e>=500?new KB(e,s,r,i):new Yt(e,s,r,i)}}class pr extends Yt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class pv extends Yt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class PI extends pv{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BB extends Yt{}class jB extends Yt{}class UB extends Yt{}class $B extends Yt{}class zB extends Yt{}class WB extends Yt{}class HB extends Yt{}class KB extends Yt{}class qB extends oe{constructor(){super("Could not parse response content as the length limit was reached")}}class GB extends oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class fh extends Error{constructor(e){super(e)}}const Vie=/^[a-z][a-z0-9+.-]*:/i,Fie=t=>Vie.test(t);let bn=t=>(bn=Array.isArray,bn(t)),lk=bn;function XB(t){return typeof t!="object"?{}:t??{}}function Bie(t){if(!t)return!0;for(const e in t)return!1;return!0}function jie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function aw(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Uie=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new oe(`${t} must be an integer`);if(e<0)throw new oe(`${t} must be a positive integer`);return e},$ie=t=>{try{return JSON.parse(t)}catch{return}},Rf=t=>new Promise(e=>setTimeout(e,t)),Vl="6.10.0",zie=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Wie(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Hie=()=>{var n;const t=Wie();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":ck(Deno.build.os),"X-Stainless-Arch":uk(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":ck(globalThis.process.platform??"unknown"),"X-Stainless-Arch":uk(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Kie();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Kie(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const uk=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ck=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let hk;const qie=()=>hk??(hk=Hie());function Gie(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function QB(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function YB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return QB({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function JB(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Xie(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Qie=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),ZB="RFC3986",ej=t=>String(t),dk={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:ej},Yie="RFC1738";let G0=(t,e)=>(G0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),G0(t,e));const Zr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),lw=1024,Jie=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=lw){const l=s.length>=lw?s.slice(a,a+lw):s,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Yie&&(d===40||d===41)){u[u.length]=l.charAt(c);continue}if(d<128){u[u.length]=Zr[d];continue}if(d<2048){u[u.length]=Zr[192|d>>6]+Zr[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Zr[224|d>>12]+Zr[128|d>>6&63]+Zr[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=Zr[240|d>>18]+Zr[128|d>>12&63]+Zr[128|d>>6&63]+Zr[128|d&63]}o+=u.join("")}return o};function Zie(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function fk(t,e){if(bn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const tj={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},nj=function(t,e){Array.prototype.push.apply(t,bn(e)?e:[e])};let pk;const xt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Jie,encodeValuesOnly:!1,format:ZB,formatter:ej,indices:!1,serializeDate(t){return(pk??(pk=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function ese(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const uw={};function rj(t,e,n,r,i,s,o,a,l,u,c,d,f,p,g,S,T,v){let y=t,_=v,C=0,O=!1;for(;(_=_.get(uw))!==void 0&&!O;){const A=_.get(t);if(C+=1,typeof A<"u"){if(A===C)throw new RangeError("Cyclic object value");O=!0}typeof _.get(uw)>"u"&&(C=0)}if(typeof u=="function"?y=u(e,y):y instanceof Date?y=f==null?void 0:f(y):n==="comma"&&bn(y)&&(y=fk(y,function(A){return A instanceof Date?f==null?void 0:f(A):A})),y===null){if(s)return l&&!S?l(e,xt.encoder,T,"key",p):e;y=""}if(ese(y)||Zie(y)){if(l){const A=S?e:l(e,xt.encoder,T,"key",p);return[(g==null?void 0:g(A))+"="+(g==null?void 0:g(l(y,xt.encoder,T,"value",p)))]}return[(g==null?void 0:g(e))+"="+(g==null?void 0:g(String(y)))]}const D=[];if(typeof y>"u")return D;let b;if(n==="comma"&&bn(y))S&&l&&(y=fk(y,l)),b=[{value:y.length>0?y.join(",")||null:void 0}];else if(bn(u))b=u;else{const A=Object.keys(y);b=c?A.sort(c):A}const E=a?String(e).replace(/\./g,"%2E"):String(e),R=r&&bn(y)&&y.length===1?E+"[]":E;if(i&&bn(y)&&y.length===0)return R+"[]";for(let A=0;A<b.length;++A){const x=b[A],N=typeof x=="object"&&typeof x.value<"u"?x.value:y[x];if(o&&N===null)continue;const k=d&&a?x.replace(/\./g,"%2E"):x,de=bn(y)?typeof n=="function"?n(R,k):R:R+(d?"."+k:"["+k+"]");v.set(t,C);const pe=new WeakMap;pe.set(uw,v),nj(D,rj(N,de,n,r,i,s,o,a,n==="comma"&&S&&bn(y)?null:l,u,c,d,f,p,g,S,T,pe))}return D}function tse(t=xt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||xt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=ZB;if(typeof t.format<"u"){if(!G0(dk,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=dk[n];let i=xt.filter;(typeof t.filter=="function"||bn(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in tj?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=xt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:xt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:xt.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:xt.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:xt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?xt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:xt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:xt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:xt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:xt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:xt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:xt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:xt.strictNullHandling}}function nse(t,e={}){let n=t;const r=tse(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):bn(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=tj[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const p=i[f];r.skipNulls&&n[p]===null||nj(o,rj(n[p],p,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}function rse(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let mk;function kI(t){let e;return(mk??(e=new globalThis.TextEncoder,mk=e.encode.bind(e)))(t)}let gk;function yk(t){let e;return(gk??(e=new globalThis.TextDecoder,gk=e.decode.bind(e)))(t)}var Bn,jn;class mv{constructor(){Bn.set(this,void 0),jn.set(this,void 0),ce(this,Bn,new Uint8Array),ce(this,jn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?kI(e):e;ce(this,Bn,rse([F(this,Bn,"f"),n]));const r=[];let i;for(;(i=ise(F(this,Bn,"f"),F(this,jn,"f")))!=null;){if(i.carriage&&F(this,jn,"f")==null){ce(this,jn,i.index);continue}if(F(this,jn,"f")!=null&&(i.index!==F(this,jn,"f")+1||i.carriage)){r.push(yk(F(this,Bn,"f").subarray(0,F(this,jn,"f")-1))),ce(this,Bn,F(this,Bn,"f").subarray(F(this,jn,"f"))),ce(this,jn,null);continue}const s=F(this,jn,"f")!==null?i.preceding-1:i.preceding,o=yk(F(this,Bn,"f").subarray(0,s));r.push(o),ce(this,Bn,F(this,Bn,"f").subarray(i.index)),ce(this,jn,null)}return r}flush(){return F(this,Bn,"f").length?this.decode(`
`):[]}}Bn=new WeakMap,jn=new WeakMap;mv.NEWLINE_CHARS=new Set([`
`,"\r"]);mv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function ise(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function sse(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const iy={off:0,error:200,warn:300,info:400,debug:500},vk=(t,e,n)=>{if(t){if(jie(iy,t))return t;Kt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(iy))}`)}};function ph(){}function Fp(t,e,n){return!e||iy[t]>iy[n]?ph:e[t].bind(e)}const ose={error:ph,warn:ph,info:ph,debug:ph};let _k=new WeakMap;function Kt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return ose;const r=_k.get(e);if(r&&r[0]===n)return r[1];const i={error:Fp("error",e,n),warn:Fp("warn",e,n),info:Fp("info",e,n),debug:Fp("debug",e,n)};return _k.set(e,[n,i]),i}const oa=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Jc;class fi{constructor(e,n,r){this.iterator=e,Jc.set(this,void 0),this.controller=n,ce(this,Jc,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Kt(r):console;async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of ase(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(c){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),c}if(u&&u.error)throw new Yt(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(l.event=="error")throw new Yt(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(K0(l))return;throw l}finally{a||n.abort()}}return new fi(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new mv,l=JB(e);for await(const u of l)for(const c of a.decode(u))yield c;for(const u of a.flush())yield u}async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of s())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(K0(l))return;throw l}finally{a||n.abort()}}return new fi(o,n,r)}[(Jc=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new fi(()=>i(e),this.controller,F(this,Jc,"f")),new fi(()=>i(n),this.controller,F(this,Jc,"f"))]}toReadableStream(){const e=this;let n;return QB({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=kI(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*ase(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new oe("Attempted to iterate over a response with no body");const n=new use,r=new mv,i=JB(t.body);for await(const s of lse(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*lse(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?kI(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=sse(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class use{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=cse(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function cse(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function ij(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var d;if(e.options.stream)return Kt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):fi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),l=(d=a==null?void 0:a.split(";")[0])==null?void 0:d.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const f=await n.json();return sj(f,n)}return await n.text()})();return Kt(t).debug(`[${r}] response parsed`,oa({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function sj(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var mh;class gv extends Promise{constructor(e,n,r=ij){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,mh.set(this,void 0),ce(this,mh,e)}_thenUnwrap(e){return new gv(F(this,mh,"f"),this.responsePromise,async(n,r)=>sj(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(F(this,mh,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}mh=new WeakMap;var Bp;class DI{constructor(e,n,r,i){Bp.set(this,void 0),ce(this,Bp,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await F(this,Bp,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Bp=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class hse extends gv{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await ij(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class yv extends DI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class It extends DI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...XB(this.options.query),after:n}}:null}}class sy extends DI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...XB(this.options.query),after:e}}:null}}const oj=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Yh(t,e,n){return oj(),new File(t,e??"unknown_file",n)}function km(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const OI=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",wk=async(t,e)=>X0(t.body)?{...t,body:await aj(t.body,e)}:t,Qa=async(t,e)=>({...t,body:await aj(t.body,e)}),Sk=new WeakMap;function dse(t){const e=typeof t=="function"?t:t.fetch,n=Sk.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return Sk.set(e,r),r}const aj=async(t,e)=>{if(!await dse(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>Q0(n,r,i))),n},lj=t=>t instanceof Blob&&"name"in t,fse=t=>typeof t=="object"&&t!==null&&(t instanceof Response||OI(t)||lj(t)),X0=t=>{if(fse(t))return!0;if(Array.isArray(t))return t.some(X0);if(t&&typeof t=="object"){for(const e in t)if(X0(t[e]))return!0}return!1},Q0=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Yh([await n.blob()],km(n)));else if(OI(n))t.append(e,Yh([await new Response(YB(n)).blob()],km(n)));else if(lj(n))t.append(e,n,km(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Q0(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Q0(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},uj=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",pse=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&uj(t),mse=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function gse(t,e,n){if(oj(),t=await t,pse(t))return t instanceof File?t:Yh([await t.arrayBuffer()],t.name);if(mse(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Yh(await Y0(i),e,n)}const r=await Y0(t);if(e||(e=km(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return Yh(r,e,n)}async function Y0(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(uj(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(OI(t))for await(const r of t)e.push(...await Y0(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${yse(t)}`)}return e}function yse(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class se{constructor(e){this._client=e}}function cj(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ek=Object.freeze(Object.create(null)),vse=(t=cj)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((c,d,f)=>{var S;/[?#]/.test(d)&&(i=!0);const p=r[f];let g=(i?encodeURIComponent:t)(""+p);return f!==r.length&&(p==null||typeof p=="object"&&p.toString===((S=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??Ek)??Ek))==null?void 0:S.toString))&&(g=p+"",s.push({start:c.length+d.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),c+d+(f===r.length?"":g)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((c,d)=>c.start-d.start),s.length>0){let c=0;const d=s.reduce((f,p)=>{const g=" ".repeat(p.start-c),S="^".repeat(p.length);return c=p.start+p.length,f+g+S},"");throw new oe(`Path parameters result in path with invalid segments:
${s.map(f=>f.error).join(`
`)}
${o}
${d}`)}return o},z=vse(cj);let hj=class extends se{list(e,n={},r){return this._client.getAPIList(z`/chat/completions/${e}/messages`,It,{query:n,...r})}};function oy(t){return t!==void 0&&"function"in t&&t.function!==void 0}function MI(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Cf(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function _se(t,e){return!e||!dj(e)?{...t,choices:t.choices.map(n=>(fj(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:NI(t,e)}function NI(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new qB;if(r.finish_reason==="content_filter")throw new GB;return fj(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>Sse(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?wse(e,r.message.content):null}}});return{...t,choices:n}}function wse(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Sse(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return oy(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Cf(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function Ese(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return oy(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return oy(n)&&(Cf(n)||(n==null?void 0:n.function.strict)||!1)}function dj(t){var e;return MI(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Cf(n)||n.type==="function"&&n.function.strict===!0))??!1}function fj(t){for(const e of t||[])if(e.type!=="function")throw new oe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Tse(t){for(const e of t??[]){if(e.type!=="function")throw new oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const ay=t=>(t==null?void 0:t.role)==="assistant",pj=t=>(t==null?void 0:t.role)==="tool";var J0,Dm,Om,gh,yh,Mm,vh,Li,_h,ly,uy,Fl,mj;class LI{constructor(){J0.add(this),this.controller=new AbortController,Dm.set(this,void 0),Om.set(this,()=>{}),gh.set(this,()=>{}),yh.set(this,void 0),Mm.set(this,()=>{}),vh.set(this,()=>{}),Li.set(this,{}),_h.set(this,!1),ly.set(this,!1),uy.set(this,!1),Fl.set(this,!1),ce(this,Dm,new Promise((e,n)=>{ce(this,Om,e,"f"),ce(this,gh,n,"f")})),ce(this,yh,new Promise((e,n)=>{ce(this,Mm,e,"f"),ce(this,vh,n,"f")})),F(this,Dm,"f").catch(()=>{}),F(this,yh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},F(this,J0,"m",mj).bind(this))},0)}_connected(){this.ended||(F(this,Om,"f").call(this),this._emit("connect"))}get ended(){return F(this,_h,"f")}get errored(){return F(this,ly,"f")}get aborted(){return F(this,uy,"f")}abort(){this.controller.abort()}on(e,n){return(F(this,Li,"f")[e]||(F(this,Li,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=F(this,Li,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(F(this,Li,"f")[e]||(F(this,Li,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ce(this,Fl,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ce(this,Fl,!0),await F(this,yh,"f")}_emit(e,...n){if(F(this,_h,"f"))return;e==="end"&&(ce(this,_h,!0),F(this,Mm,"f").call(this));const r=F(this,Li,"f")[e];if(r&&(F(this,Li,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!F(this,Fl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,gh,"f").call(this,i),F(this,vh,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!F(this,Fl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,gh,"f").call(this,i),F(this,vh,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Dm=new WeakMap,Om=new WeakMap,gh=new WeakMap,yh=new WeakMap,Mm=new WeakMap,vh=new WeakMap,Li=new WeakMap,_h=new WeakMap,ly=new WeakMap,uy=new WeakMap,Fl=new WeakMap,J0=new WeakSet,mj=function(e){if(ce(this,ly,!0),e instanceof Error&&e.name==="AbortError"&&(e=new pr),e instanceof pr)return ce(this,uy,!0),this._emit("abort",e);if(e instanceof oe)return this._emit("error",e);if(e instanceof Error){const n=new oe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new oe(String(e)))};function bse(t){return typeof t.parse=="function"}var fn,Z0,cy,eE,tE,nE,gj,yj;const Ise=10;class vj extends LI{constructor(){super(...arguments),fn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),pj(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(ay(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),F(this,fn,"m",Z0).call(this)}async finalMessage(){return await this.done(),F(this,fn,"m",cy).call(this)}async finalFunctionToolCall(){return await this.done(),F(this,fn,"m",eE).call(this)}async finalFunctionToolCallResult(){return await this.done(),F(this,fn,"m",tE).call(this)}async totalUsage(){return await this.done(),F(this,fn,"m",nE).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=F(this,fn,"m",cy).call(this);n&&this._emit("finalMessage",n);const r=F(this,fn,"m",Z0).call(this);r&&this._emit("finalContent",r);const i=F(this,fn,"m",eE).call(this);i&&this._emit("finalFunctionToolCall",i);const s=F(this,fn,"m",tE).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",F(this,fn,"m",nE).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,fn,"m",gj).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(NI(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var p,g,S;const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s.type==="function"&&((p=s==null?void 0:s.function)==null?void 0:p.name),{maxChatCompletions:u=Ise}=r||{},c=n.tools.map(T=>{if(Cf(T)){if(!T.$callback)throw new oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:T.$callback,name:T.function.name,description:T.function.description||"",parameters:T.function.parameters,parse:T.$parseRaw,strict:!0}}}return T}),d={};for(const T of c)T.type==="function"&&(d[T.function.name||T.function.function.name]=T.function);const f="tools"in n?c.map(T=>T.type==="function"?{type:"function",function:{name:T.function.name||T.function.function.name,parameters:T.function.parameters,description:T.function.description,strict:T.function.strict}}:T):void 0;for(const T of n.messages)this._addMessage(T,!1);for(let T=0;T<u;++T){const y=(g=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:f,messages:[...this.messages]},r)).choices[0])==null?void 0:g.message;if(!y)throw new oe("missing message in ChatCompletion response");if(!((S=y.tool_calls)!=null&&S.length))return;for(const _ of y.tool_calls){if(_.type!=="function")continue;const C=_.id,{name:O,arguments:D}=_.function,b=d[O];if(b){if(l&&l!==O){const x=`Invalid tool_call: ${JSON.stringify(O)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:C,content:x});continue}}else{const x=`Invalid tool_call: ${JSON.stringify(O)}. Available options are: ${Object.keys(d).map(N=>JSON.stringify(N)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:C,content:x});continue}let E;try{E=bse(b)?await b.parse(D):D}catch(x){const N=x instanceof Error?x.message:String(x);this._addMessage({role:i,tool_call_id:C,content:N});continue}const R=await b.function(E,this),A=F(this,fn,"m",yj).call(this,R);if(this._addMessage({role:i,tool_call_id:C,content:A}),l)return}}}}fn=new WeakSet,Z0=function(){return F(this,fn,"m",cy).call(this).content??null},cy=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(ay(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new oe("stream ended without producing a ChatCompletionMessage with role=assistant")},eE=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(ay(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},tE=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(pj(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},nE=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},gj=function(e){if(e.n!=null&&e.n>1)throw new oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},yj=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class VI extends vj{static runTools(e,n,r){const i=new VI,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),ay(e)&&e.content&&this._emit("content",e.content)}}const _j=1,wj=2,Sj=4,Ej=8,Tj=16,bj=32,Ij=64,Rj=128,Cj=256,xj=Rj|Cj,Aj=Tj|bj|xj|Ij,Pj=_j|wj|Aj,kj=Sj|Ej,Rse=Pj|kj,Bt={STR:_j,NUM:wj,ARR:Sj,OBJ:Ej,NULL:Tj,BOOL:bj,NAN:Ij,INFINITY:Rj,MINUS_INFINITY:Cj,INF:xj,SPECIAL:Aj,ATOM:Pj,COLLECTION:kj,ALL:Rse};class Cse extends Error{}class xse extends Error{}function Ase(t,e=Bt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Pse(t.trim(),e)}const Pse=(t,e)=>{const n=t.length;let r=0;const i=f=>{throw new Cse(`${f} at position ${r}`)},s=f=>{throw new xse(`${f} at position ${r}`)},o=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||Bt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Bt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Bt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Bt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Bt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Bt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):c()),a=()=>{const f=r;let p=!1;for(r++;r<n&&(t[r]!=='"'||p&&t[r-1]==="\\");)p=t[r]==="\\"?!p:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(f,++r-Number(p)))}catch(g){s(String(g))}else if(Bt.STR&e)try{return JSON.parse(t.substring(f,r-Number(p))+'"')}catch{return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;t[r]!=="}";){if(d(),r>=n&&Bt.OBJ&e)return f;const p=a();d(),r++;try{const g=o();Object.defineProperty(f,p,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(Bt.OBJ&e)return f;throw g}d(),t[r]===","&&r++}}catch{if(Bt.OBJ&e)return f;i("Expected '}' at end of object")}return r++,f},u=()=>{r++;const f=[];try{for(;t[r]!=="]";)f.push(o()),d(),t[r]===","&&r++}catch{if(Bt.ARR&e)return f;i("Expected ']' at end of array")}return r++,f},c=()=>{if(r===0){t==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(Bt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(p))}}const f=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Bt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(f,r))}catch{t.substring(f,r)==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(g){s(String(g))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},Tk=t=>Ase(t,Bt.ALL^Bt.NUM);var Ct,Ni,xl,Bs,cw,jp,hw,dw,fw,Up,pw,bk;class Kd extends vj{constructor(e){super(),Ct.add(this),Ni.set(this,void 0),xl.set(this,void 0),Bs.set(this,void 0),ce(this,Ni,e),ce(this,xl,[])}get currentChatCompletionSnapshot(){return F(this,Bs,"f")}static fromReadableStream(e){const n=new Kd(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Kd(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,Ct,"m",cw).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)F(this,Ct,"m",hw).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new pr;return this._addChatCompletion(F(this,Ct,"m",Up).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),F(this,Ct,"m",cw).call(this),this._connected();const i=fi.fromReadableStream(e,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(F(this,Ct,"m",Up).call(this)),F(this,Ct,"m",hw).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new pr;return this._addChatCompletion(F(this,Ct,"m",Up).call(this))}[(Ni=new WeakMap,xl=new WeakMap,Bs=new WeakMap,Ct=new WeakSet,cw=function(){this.ended||ce(this,Bs,void 0)},jp=function(n){let r=F(this,xl,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},F(this,xl,"f")[n.index]=r,r)},hw=function(n){var i,s,o,a,l,u,c,d,f,p,g,S,T,v,y;if(this.ended)return;const r=F(this,Ct,"m",bk).call(this,n);this._emit("chunk",n,r);for(const _ of n.choices){const C=r.choices[_.index];_.delta.content!=null&&((i=C.message)==null?void 0:i.role)==="assistant"&&((s=C.message)!=null&&s.content)&&(this._emit("content",_.delta.content,C.message.content),this._emit("content.delta",{delta:_.delta.content,snapshot:C.message.content,parsed:C.message.parsed})),_.delta.refusal!=null&&((o=C.message)==null?void 0:o.role)==="assistant"&&((a=C.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:_.delta.refusal,snapshot:C.message.refusal}),((l=_.logprobs)==null?void 0:l.content)!=null&&((u=C.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=_.logprobs)==null?void 0:c.content,snapshot:((d=C.logprobs)==null?void 0:d.content)??[]}),((f=_.logprobs)==null?void 0:f.refusal)!=null&&((p=C.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=_.logprobs)==null?void 0:g.refusal,snapshot:((S=C.logprobs)==null?void 0:S.refusal)??[]});const O=F(this,Ct,"m",jp).call(this,C);C.finish_reason&&(F(this,Ct,"m",fw).call(this,C),O.current_tool_call_index!=null&&F(this,Ct,"m",dw).call(this,C,O.current_tool_call_index));for(const D of _.delta.tool_calls??[])O.current_tool_call_index!==D.index&&(F(this,Ct,"m",fw).call(this,C),O.current_tool_call_index!=null&&F(this,Ct,"m",dw).call(this,C,O.current_tool_call_index)),O.current_tool_call_index=D.index;for(const D of _.delta.tool_calls??[]){const b=(T=C.message.tool_calls)==null?void 0:T[D.index];b!=null&&b.type&&((b==null?void 0:b.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(v=b.function)==null?void 0:v.name,index:D.index,arguments:b.function.arguments,parsed_arguments:b.function.parsed_arguments,arguments_delta:((y=D.function)==null?void 0:y.arguments)??""}):(b==null||b.type,void 0))}}},dw=function(n,r){var o,a,l;if(F(this,Ct,"m",jp).call(this,n).done_tool_calls.has(r))return;const s=(o=n.message.tool_calls)==null?void 0:o[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(a=F(this,Ni,"f"))==null?void 0:a.tools)==null?void 0:l.find(c=>oy(c)&&c.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Cf(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},fw=function(n){var i,s;const r=F(this,Ct,"m",jp).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=F(this,Ct,"m",pw).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Up=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,Bs,"f");if(!n)throw new oe("request ended without sending any chunks");return ce(this,Bs,void 0),ce(this,xl,[]),kse(n,F(this,Ni,"f"))},pw=function(){var r;const n=(r=F(this,Ni,"f"))==null?void 0:r.response_format;return MI(n)?n:null},bk=function(n){var r,i,s,o;let a=F(this,Bs,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=ce(this,Bs,{...u,choices:[]});for(const{delta:c,finish_reason:d,index:f,logprobs:p=null,...g}of n.choices){let S=a.choices[f];if(S||(S=a.choices[f]={finish_reason:d,index:f,message:{},logprobs:p,...g}),p)if(!S.logprobs)S.logprobs=Object.assign({},p);else{const{content:D,refusal:b,...E}=p;Object.assign(S.logprobs,E),D&&((r=S.logprobs).content??(r.content=[]),S.logprobs.content.push(...D)),b&&((i=S.logprobs).refusal??(i.refusal=[]),S.logprobs.refusal.push(...b))}if(d&&(S.finish_reason=d,F(this,Ni,"f")&&dj(F(this,Ni,"f")))){if(d==="length")throw new qB;if(d==="content_filter")throw new GB}if(Object.assign(S,g),!c)continue;const{content:T,refusal:v,function_call:y,role:_,tool_calls:C,...O}=c;if(Object.assign(S.message,O),v&&(S.message.refusal=(S.message.refusal||"")+v),_&&(S.message.role=_),y&&(S.message.function_call?(y.name&&(S.message.function_call.name=y.name),y.arguments&&((s=S.message.function_call).arguments??(s.arguments=""),S.message.function_call.arguments+=y.arguments)):S.message.function_call=y),T&&(S.message.content=(S.message.content||"")+T,!S.message.refusal&&F(this,Ct,"m",pw).call(this)&&(S.message.parsed=Tk(S.message.content))),C){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:D,id:b,type:E,function:R,...A}of C){const x=(o=S.message.tool_calls)[D]??(o[D]={});Object.assign(x,A),b&&(x.id=b),E&&(x.type=E),R&&(x.function??(x.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(x.function.name=R.name),R!=null&&R.arguments&&(x.function.arguments+=R.arguments,Ese(F(this,Ni,"f"),x)&&(x.function.parsed_arguments=Tk(x.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new fi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function kse(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:f,...p})=>{if(!c)throw new oe(`missing finish_reason for choice ${d}`);const{content:g=null,function_call:S,tool_calls:T,...v}=u,y=u.role;if(!y)throw new oe(`missing role for choice ${d}`);if(S){const{arguments:_,name:C}=S;if(_==null)throw new oe(`missing function_call.arguments for choice ${d}`);if(!C)throw new oe(`missing function_call.name for choice ${d}`);return{...p,message:{content:g,function_call:{arguments:_,name:C},role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}return T?{...p,index:d,finish_reason:c,logprobs:f,message:{...v,role:y,content:g,refusal:u.refusal??null,tool_calls:T.map((_,C)=>{const{function:O,type:D,id:b,...E}=_,{arguments:R,name:A,...x}=O||{};if(b==null)throw new oe(`missing choices[${d}].tool_calls[${C}].id
${$p(t)}`);if(D==null)throw new oe(`missing choices[${d}].tool_calls[${C}].type
${$p(t)}`);if(A==null)throw new oe(`missing choices[${d}].tool_calls[${C}].function.name
${$p(t)}`);if(R==null)throw new oe(`missing choices[${d}].tool_calls[${C}].function.arguments
${$p(t)}`);return{...E,id:b,type:D,function:{...x,name:A,arguments:R}}})}}:{...p,message:{...v,content:g,role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return _se(l,e)}function $p(t){return JSON.stringify(t)}class hy extends Kd{static fromReadableStream(e){const n=new hy(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new hy(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let FI=class extends se{constructor(){super(...arguments),this.messages=new hj(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(z`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(z`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/chat/completions/${e}`,n)}parse(e,n){return Tse(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>NI(r,e))}runTools(e,n){return e.stream?hy.runTools(this._client,e,n):VI.runTools(this._client,e,n)}stream(e,n){return Kd.createChatCompletion(this._client,e,n)}};FI.Messages=hj;class BI extends se{constructor(){super(...arguments),this.completions=new FI(this._client)}}BI.Completions=FI;const Dj=Symbol("brand.privateNullableHeaders");function*Dse(t){if(!t)return;if(Dj in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():lk(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=lk(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const te=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Dse(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[Dj]:!0,values:e,nulls:n}};class Oj extends se{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:te([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class Mj extends se{create(e,n){return this._client.post("/audio/transcriptions",Qa({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Nj extends se{create(e,n){return this._client.post("/audio/translations",Qa({body:e,...n,__metadata:{model:e.model}},this._client))}}class xf extends se{constructor(){super(...arguments),this.transcriptions=new Mj(this._client),this.translations=new Nj(this._client),this.speech=new Oj(this._client)}}xf.Transcriptions=Mj;xf.Translations=Nj;xf.Speech=Oj;class Lj extends se{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(z`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",It,{query:e,...n})}cancel(e,n){return this._client.post(z`/batches/${e}/cancel`,n)}}class Vj extends se{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/assistants/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",It,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Fj=class extends se{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class Bj extends se{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let vv=class extends se{constructor(){super(...arguments),this.sessions=new Fj(this._client),this.transcriptionSessions=new Bj(this._client)}};vv.Sessions=Fj;vv.TranscriptionSessions=Bj;class jj extends se{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(z`/chatkit/sessions/${e}/cancel`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let Uj=class extends se{retrieve(e,n){return this._client.get(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",sy,{query:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(z`/chatkit/threads/${e}/items`,sy,{query:n,...r,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class _v extends se{constructor(){super(...arguments),this.sessions=new jj(this._client),this.threads=new Uj(this._client)}}_v.Sessions=jj;_v.Threads=Uj;class $j extends se{create(e,n,r){return this._client.post(z`/threads/${e}/messages`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/messages/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/messages`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class zj extends se{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(z`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(z`/threads/${i}/runs/${e}/steps`,It,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const Ose=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var mw={};const Al=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=mw==null?void 0:mw[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var qt,Sa,rE,ri,Nm,Or,Ea,su,ha,dy,Un,Lm,Vm,Jh,wh,Sh,Ik,Rk,Ck,xk,Ak,Pk,kk;class Zh extends LI{constructor(){super(...arguments),qt.add(this),rE.set(this,[]),ri.set(this,{}),Nm.set(this,{}),Or.set(this,void 0),Ea.set(this,void 0),su.set(this,void 0),ha.set(this,void 0),dy.set(this,void 0),Un.set(this,void 0),Lm.set(this,void 0),Vm.set(this,void 0),Jh.set(this,void 0)}[(rE=new WeakMap,ri=new WeakMap,Nm=new WeakMap,Or=new WeakMap,Ea=new WeakMap,su=new WeakMap,ha=new WeakMap,dy=new WeakMap,Un=new WeakMap,Lm=new WeakMap,Vm=new WeakMap,Jh=new WeakMap,qt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Sa;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=fi.fromReadableStream(e,this.controller);for await(const o of i)F(this,qt,"m",wh).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new pr;return this._addRun(F(this,qt,"m",Sh).call(this))}toReadableStream(){return new fi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new Sa;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,qt,"m",wh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new pr;return this._addRun(F(this,qt,"m",Sh).call(this))}static createThreadAssistantStream(e,n,r){const i=new Sa;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new Sa;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return F(this,Lm,"f")}currentRun(){return F(this,Vm,"f")}currentMessageSnapshot(){return F(this,Or,"f")}currentRunStepSnapshot(){return F(this,Jh,"f")}async finalRunSteps(){return await this.done(),Object.values(F(this,ri,"f"))}async finalMessages(){return await this.done(),Object.values(F(this,Nm,"f"))}async finalRun(){if(await this.done(),!F(this,Ea,"f"))throw Error("Final run was not received.");return F(this,Ea,"f")}async _createThreadAssistantStream(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of o)F(this,qt,"m",wh).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new pr;return this._addRun(F(this,qt,"m",Sh).call(this))}async _createAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,qt,"m",wh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new pr;return this._addRun(F(this,qt,"m",Sh).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(aw(s)&&aw(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!aw(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];l==null?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}Sa=Zh,wh=function(e){if(!this.ended)switch(ce(this,Lm,e),F(this,qt,"m",Ck).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":F(this,qt,"m",kk).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":F(this,qt,"m",Rk).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":F(this,qt,"m",Ik).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Sh=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");if(!F(this,Ea,"f"))throw Error("Final run has not been received");return F(this,Ea,"f")},Ik=function(e){const[n,r]=F(this,qt,"m",Ak).call(this,e,F(this,Or,"f"));ce(this,Or,n),F(this,Nm,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=F(this,su,"f")){if(F(this,ha,"f"))switch(F(this,ha,"f").type){case"text":this._emit("textDone",F(this,ha,"f").text,F(this,Or,"f"));break;case"image_file":this._emit("imageFileDone",F(this,ha,"f").image_file,F(this,Or,"f"));break}ce(this,su,i.index)}ce(this,ha,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(F(this,su,"f")!==void 0){const i=e.data.content[F(this,su,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,F(this,Or,"f"));break;case"text":this._emit("textDone",i.text,F(this,Or,"f"));break}}F(this,Or,"f")&&this._emit("messageDone",e.data),ce(this,Or,void 0)}},Rk=function(e){const n=F(this,qt,"m",xk).call(this,e);switch(ce(this,Jh,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==F(this,dy,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(F(this,Un,"f")&&this._emit("toolCallDone",F(this,Un,"f")),ce(this,dy,s.index),ce(this,Un,n.step_details.tool_calls[s.index]),F(this,Un,"f")&&this._emit("toolCallCreated",F(this,Un,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,Jh,void 0),e.data.step_details.type=="tool_calls"&&F(this,Un,"f")&&(this._emit("toolCallDone",F(this,Un,"f")),ce(this,Un,void 0)),this._emit("runStepDone",e.data,n);break}},Ck=function(e){F(this,rE,"f").push(e),this._emit("event",e)},xk=function(e){switch(e.event){case"thread.run.step.created":return F(this,ri,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=F(this,ri,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Sa.accumulateDelta(n,r.delta);F(this,ri,"f")[e.data.id]=i}return F(this,ri,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":F(this,ri,"f")[e.data.id]=e.data;break}if(F(this,ri,"f")[e.data.id])return F(this,ri,"f")[e.data.id];throw new Error("No snapshot available")},Ak=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=F(this,qt,"m",Pk).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Pk=function(e,n){return Sa.accumulateDelta(n,e)},kk=function(e){switch(ce(this,Vm,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ce(this,Ea,e.data),F(this,Un,"f")&&(this._emit("toolCallDone",F(this,Un,"f")),ce(this,Un,void 0));break}};let jI=class extends se{constructor(){super(...arguments),this.steps=new zj(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/runs/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/runs`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(z`/threads/${i}/runs/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return Zh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Rf(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return Zh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return Zh.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};jI.Steps=zj;class wv extends se{constructor(){super(...arguments),this.runs=new jI(this._client),this.messages=new $j(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/threads/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Zh.createThreadAssistantStream(e,this._client.beta.threads,n)}}wv.Runs=jI;wv.Messages=$j;class dc extends se{constructor(){super(...arguments),this.realtime=new vv(this._client),this.chatkit=new _v(this._client),this.assistants=new Vj(this._client),this.threads=new wv(this._client)}}dc.Realtime=vv;dc.ChatKit=_v;dc.Assistants=Vj;dc.Threads=wv;class Wj extends se{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class Hj extends se{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}/content`,{...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let UI=class extends se{constructor(){super(...arguments),this.content=new Hj(this._client)}create(e,n,r){return this._client.post(z`/containers/${e}/files`,Qa({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/containers/${e}/files`,It,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(z`/containers/${i}/files/${e}`,{...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}};UI.Content=Hj;class $I extends se{constructor(){super(...arguments),this.files=new UI(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(z`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/containers/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}}$I.Files=UI;class Kj extends se{create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(z`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(z`/conversations/${e}/items`,sy,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(z`/conversations/${i}/items/${e}`,r)}}class zI extends se{constructor(){super(...arguments),this.items=new Kj(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(z`/conversations/${e}`,n)}update(e,n,r){return this._client.post(z`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(z`/conversations/${e}`,n)}}zI.Items=Kj;class qj extends se{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Kt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Kt(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=Ose(l)}),o)))}}class Gj extends se{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(z`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(z`/evals/${i}/runs/${e}/output_items`,It,{query:s,...r})}}class WI extends se{constructor(){super(...arguments),this.outputItems=new Gj(this._client)}create(e,n,r){return this._client.post(z`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(z`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/evals/${e}/runs`,It,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(z`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(z`/evals/${i}/runs/${e}`,r)}}WI.OutputItems=Gj;class HI extends se{constructor(){super(...arguments),this.runs=new WI(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(z`/evals/${e}`,n)}update(e,n,r){return this._client.post(z`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/evals/${e}`,n)}}HI.Runs=WI;let Xj=class extends se{create(e,n){return this._client.post("/files",Qa({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/files/${e}`,n)}content(e,n){return this._client.get(z`/files/${e}/content`,{...n,headers:te([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Rf(n),o=await this.retrieve(e),Date.now()-s>r)throw new PI({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class Qj extends se{}let Yj=class extends se{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class KI extends se{constructor(){super(...arguments),this.graders=new Yj(this._client)}}KI.Graders=Yj;class Jj extends se{create(e,n,r){return this._client.getAPIList(z`/fine_tuning/checkpoints/${e}/permissions`,yv,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(z`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(z`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let qI=class extends se{constructor(){super(...arguments),this.permissions=new Jj(this._client)}};qI.Permissions=Jj;class Zj extends se{list(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/checkpoints`,It,{query:n,...r})}}class GI extends se{constructor(){super(...arguments),this.checkpoints=new Zj(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(z`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",It,{query:e,...n})}cancel(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/events`,It,{query:n,...r})}pause(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/resume`,n)}}GI.Checkpoints=Zj;class fc extends se{constructor(){super(...arguments),this.methods=new Qj(this._client),this.jobs=new GI(this._client),this.checkpoints=new qI(this._client),this.alpha=new KI(this._client)}}fc.Methods=Qj;fc.Jobs=GI;fc.Checkpoints=qI;fc.Alpha=KI;class eU extends se{}class XI extends se{constructor(){super(...arguments),this.graderModels=new eU(this._client)}}XI.GraderModels=eU;class tU extends se{createVariation(e,n){return this._client.post("/images/variations",Qa({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Qa({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class nU extends se{retrieve(e,n){return this._client.get(z`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",yv,e)}delete(e,n){return this._client.delete(z`/models/${e}`,n)}}class rU extends se{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class iU extends se{accept(e,n,r){return this._client.post(z`/realtime/calls/${e}/accept`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(z`/realtime/calls/${e}/hangup`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(z`/realtime/calls/${e}/refer`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(z`/realtime/calls/${e}/reject`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}}class sU extends se{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Sv extends se{constructor(){super(...arguments),this.clientSecrets=new sU(this._client),this.calls=new iU(this._client)}}Sv.ClientSecrets=sU;Sv.Calls=iU;function Mse(t,e){return!e||!Lse(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:oU(t,e)}function oU(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Bse(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:Nse(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||iE(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function Nse(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function Lse(t){var e;return!!MI((e=t.text)==null?void 0:e.format)}function Vse(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Fse(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Bse(t,e){const n=Fse(t.tools??[],e.name);return{...e,...e,parsed_arguments:Vse(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function iE(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Pl,zp,js,Wp,Dk,Ok,Mk,Nk;class QI extends LI{constructor(e){super(),Pl.add(this),zp.set(this,void 0),js.set(this,void 0),Wp.set(this,void 0),ce(this,zp,e)}static createResponse(e,n,r){const i=new QI(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,Pl,"m",Dk).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of s)F(this,Pl,"m",Ok).call(this,l,o);if((a=s.controller.signal)!=null&&a.aborted)throw new pr;return F(this,Pl,"m",Mk).call(this)}[(zp=new WeakMap,js=new WeakMap,Wp=new WeakMap,Pl=new WeakSet,Dk=function(){this.ended||ce(this,js,void 0)},Ok=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=F(this,Pl,"m",Nk).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new oe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},Mk=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,js,"f");if(!n)throw new oe("request ended without sending any events");ce(this,js,void 0);const r=jse(n,F(this,zp,"f"));return ce(this,Wp,r),r},Nk=function(n){var i;let r=F(this,js,"f");if(!r){if(n.type!=="response.created")throw new oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ce(this,js,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);const o=s.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?s.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const o=(i=s.content)==null?void 0:i[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new oe(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{ce(this,js,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=F(this,Wp,"f");if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}}function jse(t,e){return Mse(t,e)}class aU extends se{list(e,n={},r){return this._client.getAPIList(z`/responses/${e}/input_items`,It,{query:n,...r})}}class lU extends se{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Ev extends se{constructor(){super(...arguments),this.inputItems=new aU(this._client),this.inputTokens=new lU(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&iE(r),r))}retrieve(e,n={},r){return this._client.get(z`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&iE(i),i))}delete(e,n){return this._client.delete(z`/responses/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>oU(r,e))}stream(e,n){return QI.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(z`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}Ev.InputItems=aU;Ev.InputTokens=lU;class uU extends se{create(e,n,r){return this._client.post(z`/uploads/${e}/parts`,Qa({body:n,...r},this._client))}}class YI extends se{constructor(){super(...arguments),this.parts=new uU(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(z`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(z`/uploads/${e}/complete`,{body:n,...r})}}YI.Parts=uU;const Use=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class cU extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/file_batches`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/file_batches/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(z`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(z`/vector_stores/${i}/file_batches/${e}/files`,It,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Rf(l);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(s,n.length),a=this._client,l=n.values(),u=[...r];async function c(f){for(let p of f){const g=await a.files.create({file:p,purpose:"assistants"},i);u.push(g.id)}}const d=Array(o).fill(l).map(c);return await Use(d),await this.createAndPoll(e,{file_ids:u})}}class hU extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/files`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(z`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/vector_stores/${e}/files`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),a=o.data;switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Rf(l);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(z`/vector_stores/${i}/files/${e}/content`,yv,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Tv extends se{constructor(){super(...arguments),this.files=new hU(this._client),this.fileBatches=new cU(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/vector_stores/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",It,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(z`/vector_stores/${e}/search`,yv,{body:n,method:"post",...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Tv.Files=hU;Tv.FileBatches=cU;class dU extends se{create(e,n){return this._client.post("/videos",wk({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",sy,{query:e,...n})}delete(e,n){return this._client.delete(z`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(z`/videos/${e}/content`,{query:n,...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(z`/videos/${e}/remix`,wk({body:n,...r},this._client))}}var Bl,fU,Fm;class pU extends se{constructor(){super(...arguments),Bl.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");F(this,Bl,"m",fU).call(this,r);const s=te([n]).values,o=F(this,Bl,"m",Fm).call(this,s,"webhook-signature"),a=F(this,Bl,"m",Fm).call(this,s,"webhook-timestamp"),l=F(this,Bl,"m",Fm).call(this,s,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new fh("Invalid webhook timestamp format");const c=Math.floor(Date.now()/1e3);if(c-u>i)throw new fh("Webhook timestamp is too old");if(u>c+i)throw new fh("Webhook timestamp is too new");const d=o.split(" ").map(S=>S.startsWith("v1,")?S.substring(3):S),f=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),p=l?`${l}.${a}.${e}`:`${a}.${e}`,g=await crypto.subtle.importKey("raw",f,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const S of d)try{const T=Buffer.from(S,"base64");if(await crypto.subtle.verify("HMAC",g,T,new TextEncoder().encode(p)))return}catch{continue}throw new fh("The given webhook signature does not match the expected signature")}}Bl=new WeakSet,fU=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Fm=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var sE,JI,Bm,mU;class ve{constructor({baseURL:e=Al("OPENAI_BASE_URL"),apiKey:n=Al("OPENAI_API_KEY"),organization:r=Al("OPENAI_ORG_ID")??null,project:i=Al("OPENAI_PROJECT_ID")??null,webhookSecret:s=Al("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(sE.add(this),Bm.set(this,void 0),this.completions=new Wj(this),this.chat=new BI(this),this.embeddings=new qj(this),this.files=new Xj(this),this.images=new tU(this),this.audio=new xf(this),this.moderations=new rU(this),this.models=new nU(this),this.fineTuning=new fc(this),this.graders=new XI(this),this.vectorStores=new Tv(this),this.webhooks=new pU(this),this.beta=new dc(this),this.batches=new Lj(this),this.uploads=new YI(this),this.responses=new Ev(this),this.realtime=new Sv(this),this.conversations=new zI(this),this.evals=new HI(this),this.containers=new $I(this),this.videos=new dU(this),n===void 0)throw new oe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&zie())throw new oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??JI.DEFAULT_TIMEOUT,this.logger=a.logger??console;const l="warn";this.logLevel=l,this.logLevel=vk(a.logLevel,"ClientOptions.logLevel",this)??vk(Al("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Gie(),ce(this,Bm,Qie),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return te([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return nse(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Vl}`}defaultIdempotencyKey(){return`stainless-node-retry-${FB()}`}makeStatusError(e,n,r,i){return Yt.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof oe?r:new oe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new oe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!F(this,sE,"m",mU).call(this)&&r||this.baseURL,s=Fie(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Bie(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new gv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var v,y;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:l}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Kt(this).debug(`[${u}] sending request`,oa({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),(v=i.signal)!=null&&v.aborted)throw new pr;const f=new AbortController,p=await this.fetchWithTimeout(a,o,l,f).catch(q0),g=Date.now();if(p instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if((y=i.signal)!=null&&y.aborted)throw new pr;const C=K0(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return Kt(this).info(`[${u}] connection ${C?"timed out":"failed"} - ${_}`),Kt(this).debug(`[${u}] connection ${C?"timed out":"failed"} (${_})`,oa({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),this.retryRequest(i,n,r??u);throw Kt(this).info(`[${u}] connection ${C?"timed out":"failed"} - error; no more retries left`),Kt(this).debug(`[${u}] connection ${C?"timed out":"failed"} (error; no more retries left)`,oa({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),C?new PI:new pv({cause:p})}const S=[...p.headers.entries()].filter(([_])=>_==="x-request-id").map(([_,C])=>", "+_+": "+JSON.stringify(C)).join(""),T=`[${u}${c}${S}] ${o.method} ${a} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${g-d}ms`;if(!p.ok){const _=await this.shouldRetry(p);if(n&&_){const R=`retrying, ${n} attempts remaining`;return await Xie(p.body),Kt(this).info(`${T} - ${R}`),Kt(this).debug(`[${u}] response error (${R})`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),this.retryRequest(i,n,r??u,p.headers)}const C=_?"error; no more retries left":"error; not retryable";Kt(this).info(`${T} - ${C}`);const O=await p.text().catch(R=>q0(R).message),D=$ie(O),b=D?void 0:O;throw Kt(this).debug(`[${u}] response error (${C})`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:b,durationMs:Date.now()-d})),this.makeStatusError(p.status,D,b,p.headers)}return Kt(this).info(T),Kt(this).debug(`[${u}] response start`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),{response:p,options:i,controller:f,requestLogID:u,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new hse(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,c={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...a};o&&(c.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i==null?void 0:i.get("retry-after-ms");if(o){const l=parseFloat(o);Number.isNaN(l)||(s=l)}const a=i==null?void 0:i.get("retry-after");if(a&&!s){const l=parseFloat(a);Number.isNaN(l)?s=Date.parse(a)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Rf(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,l=this.buildURL(s,o,a);"timeout"in r&&Uie("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:c}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=te([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...qie(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=te([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:YB(e)}:F(this,Bm,"f").call(this,{body:e,headers:r})}}JI=ve,Bm=new WeakMap,sE=new WeakSet,mU=function(){return this.baseURL!=="https://api.openai.com/v1"};ve.OpenAI=JI;ve.DEFAULT_TIMEOUT=6e5;ve.OpenAIError=oe;ve.APIError=Yt;ve.APIConnectionError=pv;ve.APIConnectionTimeoutError=PI;ve.APIUserAbortError=pr;ve.NotFoundError=$B;ve.ConflictError=zB;ve.RateLimitError=HB;ve.BadRequestError=BB;ve.AuthenticationError=jB;ve.InternalServerError=KB;ve.PermissionDeniedError=UB;ve.UnprocessableEntityError=WB;ve.InvalidWebhookSignatureError=fh;ve.toFile=gse;ve.Completions=Wj;ve.Chat=BI;ve.Embeddings=qj;ve.Files=Xj;ve.Images=tU;ve.Audio=xf;ve.Moderations=rU;ve.Models=nU;ve.FineTuning=fc;ve.Graders=XI;ve.VectorStores=Tv;ve.Webhooks=pU;ve.Beta=dc;ve.Batches=Lj;ve.Uploads=YI;ve.Responses=Ev;ve.Realtime=Sv;ve.Conversations=zI;ve.Evals=HI;ve.Containers=$I;ve.Videos=dU;const $se=()=>localStorage.getItem("openai_api_key"),gU=()=>{const t=$se();if(!t)throw new Error("OpenAI API Key not found. Please add it in the Account settings.");return new ve({apiKey:t,dangerouslyAllowBrowser:!0})};async function zse(t){try{const n=await gU().chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"Analyze this clothing item. Return a JSON object with the following fields: 'type' (e.g., shirt, pants, dress), 'color' (primary color), 'style' (e.g., casual, formal, sporty), 'tags' (array of 3-5 descriptive keywords), and 'refreshCycle' (suggested number of days before re-wearing, e.g., 1 for underwear, 7 for shirts, 14 for pants)."},{type:"image_url",image_url:{url:t}}]}],response_format:{type:"json_object"}});return JSON.parse(n.choices[0].message.content)}catch(e){return console.error("Error analyzing image:",e),{type:"unknown",color:"unknown",style:"unknown",tags:["manual-entry"],refreshCycle:7}}}async function yU(t,e){try{const n=t.map(a=>({id:a.id,type:a.type,color:a.color,tags:a.tags,style:a.style,rating:a.rating||3,wearCount:a.wearCount||0})),r=`
      I need 3 outfit suggestions from the following wardrobe items:
      ${JSON.stringify(n)}

      Criteria:
      - Destination: ${e.destination}
      - Temperature: ${e.temperature}
      - Style Preference: ${e.style}

      Rules:
      1. Prioritize items with higher 'rating'.
      2. Consider 'wearCount' - if an item has a high rating but low wear count, suggest it more.
      3. Ensure the outfits are appropriate for the temperature and destination.

      Please select 3 distinct outfits. For each outfit, provide:
      1. A short summary explaining why it fits the criteria.
      2. The list of item IDs used in the outfit.
      
      Return the result as a JSON object with a key "outfits" containing an array of the 3 suggestions.
    `,s=await gU().chat.completions.create({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful fashion stylist assistant."},{role:"user",content:r}],response_format:{type:"json_object"}});return JSON.parse(s.choices[0].message.content).outfits}catch(n){return console.error("Error generating outfits:",n),[]}}const Lk=(t,e=200,n=200)=>new Promise(r=>{let i=new Image;i.src=t,i.onload=()=>{let s=document.createElement("canvas"),o=i.width,a=i.height;o>a?o>e&&(a*=e/o,o=e):a>n&&(o*=n/a,a=n),s.width=o,s.height=a,s.getContext("2d").drawImage(i,0,0,o,a),r(s.toDataURL("image/jpeg",.4))}});function Wse(){const[t,e]=I.useState(null),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(null),l=I.useRef(null),{addItem:u}=fv(),c=Zu(),d=Ri();I.useEffect(()=>{var T;(T=d.state)!=null&&T.image&&(async()=>{const y=await Lk(d.state.image);e(y),p(y)})()},[]);const f=T=>{const v=T.target.files[0];if(v){const y=new FileReader;y.onloadend=async()=>{const _=await Lk(y.result);e(_),p(_)},y.readAsDataURL(v)}},p=async T=>{r(!0);try{const v=await zse(T);a(v)}catch(v){console.error("Analysis failed",v),alert("Failed to analyze image. Please try again.")}finally{r(!1)}},g=async()=>{if(t&&o&&!i){s(!0);const v=t.length*3/4/1024;console.log(`Attempting to save image. Size: ${v.toFixed(2)} KB`);try{u({imageUri:t,...o,lastWorn:null}).catch(y=>{console.error("Background save failed:",y)}),c("/closet")}catch(y){console.error("Failed to save item:",y),alert(`Failed to save item: ${y.message}.`),s(!1)}}},S=()=>{e(null),a(null),l.current&&l.current.click()};return M.jsxs(Vr,{style:{flex:1},contentContainerStyle:Me.container,children:[M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:l,style:{display:"none"},onChange:f}),M.jsx(q,{style:Me.title,children:"Add New Item"}),t?M.jsxs(X,{style:Me.previewContainer,children:[M.jsx(bi,{source:{uri:t},style:Me.previewImage}),n?M.jsxs(X,{style:Me.loadingContainer,children:[M.jsx(Zd,{size:"large",color:"#007AFF"}),M.jsx(q,{style:Me.loadingText,children:"Analyzing your item..."})]}):o?M.jsxs(X,{style:Me.formContainer,children:[M.jsxs(X,{style:Me.rowContainer,children:[M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(q,{style:Me.label,children:"Type"}),M.jsx(Qn,{style:Me.compactInput,value:o.type,onChangeText:T=>a({...o,type:T})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(q,{style:Me.label,children:"Color"}),M.jsx(Qn,{style:Me.compactInput,value:o.color,onChangeText:T=>a({...o,color:T})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(q,{style:Me.label,children:"Style"}),M.jsx(Qn,{style:Me.compactInput,value:o.style,onChangeText:T=>a({...o,style:T})})]})]}),M.jsx(q,{style:Me.label,children:"Tags"}),M.jsx(X,{style:Me.tagsContainer,children:o.tags.map((T,v)=>M.jsx(X,{style:Me.tagBadge,children:M.jsx(q,{style:Me.tagText,children:T})},v))}),M.jsxs(X,{style:Me.buttonGroup,children:[M.jsx(be,{style:[Me.button,Me.secondaryButton],onPress:S,children:M.jsx(q,{style:Me.secondaryButtonText,children:"Retake"})}),M.jsx(be,{style:Me.button,onPress:g,disabled:i,children:M.jsx(q,{style:Me.buttonText,children:i?"Saving...":"Save to Closet"})})]})]}):null]}):M.jsx(X,{style:Me.uploadContainer,children:M.jsx(be,{style:Me.button,onPress:()=>l.current.click(),children:M.jsx(q,{style:Me.buttonText,children:"Take Photo / Upload"})})})]})}const Me=Ae.create({container:{flexGrow:1,padding:20,alignItems:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:20},uploadContainer:{flex:1,justifyContent:"center",alignItems:"center",width:"100%"},previewContainer:{width:"100%",alignItems:"center"},previewImage:{width:300,height:300,borderRadius:10,marginBottom:20},loadingContainer:{alignItems:"center"},loadingText:{marginTop:10,color:"#666"},formContainer:{width:"100%"},rowContainer:{flexDirection:"row",justifyContent:"space-between",marginBottom:15},inputGroup:{width:"30%"},label:{fontWeight:"600",fontSize:12,color:"#666",marginBottom:4,textTransform:"uppercase"},compactInput:{borderWidth:1,borderColor:"#eee",padding:8,borderRadius:8,backgroundColor:"#f9f9f9",fontSize:14},tagsContainer:{flexDirection:"row",flexWrap:"wrap",marginBottom:20,marginTop:5},tagBadge:{backgroundColor:"#f0f0f0",paddingHorizontal:10,paddingVertical:5,borderRadius:15,marginRight:8,marginBottom:8},tagText:{fontSize:12,color:"#333"},buttonGroup:{flexDirection:"row",justifyContent:"space-between",marginTop:20},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",flex:1,marginHorizontal:5},buttonText:{color:"#fff",fontWeight:"bold"},secondaryButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#007AFF"},secondaryButtonText:{color:"#007AFF",fontWeight:"bold"}});function Hse(){const{items:t,isItemAvailable:e,addToSchedule:n}=fv(),r=Zu(),[i,s]=I.useState(""),[o,a]=I.useState(""),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState([]),[g,S]=I.useState(null),[T,v]=I.useState(!1),[y,_]=I.useState(new Date().toISOString().split("T")[0]),C=async()=>{if(!i||!o||!l){alert("Please fill in all fields");return}d(!0);const E=t.filter(e);try{const R=await yU(E,{destination:i,temperature:o,style:l});p(R)}catch(R){console.error("Failed to generate outfits",R),alert("Failed to generate suggestions. Please try again.")}finally{d(!1)}},O=E=>{S(E),v(!0)},D=()=>{g&&y&&(n(y,g.items),v(!1),S(null),alert("Outfit scheduled!"),r("/schedule"))},b=E=>t.find(R=>R.id===E);return M.jsxs(Vr,{contentContainerStyle:ke.container,children:[M.jsx(q,{style:ke.title,children:"Virtual Dressing Room"}),M.jsxs(X,{style:ke.form,children:[M.jsx(q,{style:ke.label,children:"Destination / Occasion"}),M.jsx(Qn,{style:ke.input,placeholder:"e.g. Work, Date Night, Gym",value:i,onChangeText:s}),M.jsx(q,{style:ke.label,children:"Temperature"}),M.jsx(Qn,{style:ke.input,placeholder:"e.g. 75F, Cold, Rainy",value:o,onChangeText:a}),M.jsx(q,{style:ke.label,children:"Style Preference"}),M.jsx(Qn,{style:ke.input,placeholder:"e.g. Casual, Chic, Edgy",value:l,onChangeText:u}),M.jsx(be,{style:[ke.button,c&&ke.disabledButton],onPress:C,disabled:c,children:c?M.jsx(Zd,{color:"#fff"}):M.jsx(q,{style:ke.buttonText,children:"Generate Outfits"})})]}),f.length>0&&M.jsxs(X,{style:ke.results,children:[M.jsx(q,{style:ke.subtitle,children:"Suggestions"}),f.map((E,R)=>M.jsxs(X,{style:ke.outfitCard,children:[M.jsx(q,{style:ke.outfitSummary,children:E.summary}),M.jsx(Vr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:ke.itemsRow,children:E.items.map(A=>{const x=b(A);return x?M.jsxs(X,{style:ke.itemPreview,children:[M.jsx(bi,{source:{uri:x.imageUri},style:ke.itemImage}),M.jsx(q,{style:ke.itemType,children:x.type})]},A):null})}),M.jsx(be,{style:ke.scheduleButton,onPress:()=>O(E),children:M.jsx(q,{style:ke.scheduleButtonText,children:"Schedule This Outfit"})})]},R))]}),M.jsx(Sd,{visible:T,transparent:!0,animationType:"slide",children:M.jsx(X,{style:ke.modalContainer,children:M.jsxs(X,{style:ke.modalContent,children:[M.jsx(q,{style:ke.modalTitle,children:"Select Date"}),M.jsx("input",{type:"date",value:y,onChange:E=>_(E.target.value),style:ke.dateInput}),M.jsxs(X,{style:ke.modalButtons,children:[M.jsx(be,{style:[ke.button,ke.cancelButton],onPress:()=>v(!1),children:M.jsx(q,{style:ke.cancelButtonText,children:"Cancel"})}),M.jsx(be,{style:ke.button,onPress:D,children:M.jsx(q,{style:ke.buttonText,children:"Confirm"})})]})]})})})]})}const ke=Ae.create({container:{flexGrow:1,padding:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},form:{backgroundColor:"#fff",padding:20,borderRadius:10,marginBottom:20,elevation:2},label:{fontWeight:"bold",marginBottom:5,color:"#333"},input:{borderWidth:1,borderColor:"#ddd",padding:10,borderRadius:5,marginBottom:15,backgroundColor:"#f9f9f9"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center"},disabledButton:{backgroundColor:"#99c9ff"},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},results:{marginTop:10,paddingBottom:40},subtitle:{fontSize:20,fontWeight:"bold",marginBottom:15},outfitCard:{backgroundColor:"#fff",padding:15,borderRadius:10,marginBottom:15,elevation:2},outfitSummary:{fontSize:16,marginBottom:10,lineHeight:22},itemsRow:{flexDirection:"row",marginTop:10,marginBottom:15},itemPreview:{marginRight:15,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:5,marginBottom:5},itemType:{fontSize:12,color:"#666",textTransform:"capitalize"},scheduleButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center"},scheduleButtonText:{color:"#fff",fontWeight:"bold"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"#fff",padding:20,borderRadius:10,width:"80%",alignItems:"center"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},dateInput:{padding:10,fontSize:16,marginBottom:20,width:"100%",border:"1px solid #ddd",borderRadius:5},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},cancelButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#ddd",marginRight:10},cancelButtonText:{color:"#333"}}),gw=async(t,e)=>{try{const r=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&daily=temperature_2m_max,temperature_2m_min,weathercode&temperature_unit=fahrenheit&timezone=auto`)).json(),i={};return r.daily.time.forEach((s,o)=>{i[s]={max:Math.round(r.daily.temperature_2m_max[o]),min:Math.round(r.daily.temperature_2m_min[o]),code:r.daily.weathercode[o]}}),i}catch(n){return console.error("Error fetching weather:",n),null}},Kse=t=>({0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",95:"Thunderstorm"})[t]||"Variable";function qse(){const{schedule:t,items:e,markAsWorn:n,addToSchedule:r,isItemAvailable:i}=fv(),[s,o]=I.useState({}),[a,l]=I.useState(!1),[u,c]=I.useState(null),[d,f]=I.useState(!1),[p,g]=I.useState([]),[S,T]=I.useState({destination:"",style:"",temperature:""});I.useEffect(()=>{(async()=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async x=>{const N=await gw(x.coords.latitude,x.coords.longitude);N&&o(N)},async()=>{const x=await gw(40.7128,-74.006);x&&o(x)});else{const x=await gw(40.7128,-74.006);x&&o(x)}})()},[]);const v=()=>{const E=[];for(let R=0;R<7;R++){const A=new Date;A.setDate(A.getDate()+R),E.push(A.toISOString().split("T")[0])}return E},y=E=>e.find(R=>R.id===E),_=(E,R)=>{confirm("Mark this outfit as worn? Items will be unavailable for their refresh cycle.")&&n(R,E)},C=E=>{c(E),g([]),T({destination:"",style:"",temperature:""}),l(!0)},O=async()=>{f(!0);try{const E=s[u],R=E?`${E.max}F / ${E.min}F`:"Unknown",A=e.filter(i),x=await yU(A,{destination:S.destination,temperature:S.temperature||R,style:S.style});x&&x.outfits&&g(x.outfits)}catch(E){console.error("Generation failed",E),alert("Failed to generate outfits. Check your API key.")}finally{f(!1)}},D=E=>{r(u,E.itemIds),l(!1)},b=v();return M.jsxs(Vr,{contentContainerStyle:Re.container,children:[M.jsx(q,{style:Re.title,children:"Outfit Schedule"}),b.map(E=>{const R=t[E],A=new Date(E),x=A.toLocaleDateString("en-US",{weekday:"long"}),N=A.toLocaleDateString("en-US",{month:"short",day:"numeric"}),k=s[E];return M.jsxs(X,{style:Re.dayCard,children:[M.jsxs(X,{style:Re.dateHeader,children:[M.jsxs(X,{children:[M.jsx(q,{style:Re.dayName,children:x}),M.jsx(q,{style:Re.dateText,children:N})]}),k&&M.jsxs(X,{style:Re.weatherContainer,children:[M.jsxs(q,{style:Re.weatherTemp,children:[k.max," / ",k.min,""]}),M.jsx(q,{style:Re.weatherDesc,children:Kse(k.code)})]})]}),R?M.jsxs(X,{children:[M.jsx(Vr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Re.itemsRow,children:R.map(de=>{const pe=y(de);return pe?M.jsxs(X,{style:Re.itemPreview,children:[M.jsx(bi,{source:{uri:pe.imageUri||pe.image},style:Re.itemImage}),M.jsx(q,{style:Re.itemType,children:pe.type})]},de):null})}),M.jsx(be,{style:Re.wearButton,onPress:()=>_(E,R),children:M.jsx(q,{style:Re.wearButtonText,children:"Wear This Outfit"})})]}):M.jsx(be,{style:Re.generateButton,onPress:()=>C(E),children:M.jsx(q,{style:Re.generateButtonText,children:"+ Generate Outfit"})})]},E)}),M.jsx(Sd,{visible:a,animationType:"slide",onRequestClose:()=>l(!1),children:M.jsxs(X,{style:Re.modalContainer,children:[M.jsxs(q,{style:Re.modalTitle,children:["Plan for ",u]}),M.jsxs(Vr,{style:{flex:1},children:[M.jsxs(X,{style:{marginBottom:20},children:[M.jsx(q,{style:Re.label,children:"Destination / Occasion"}),M.jsx(Qn,{style:Re.input,placeholder:"e.g. Work, Date Night, Gym",value:S.destination,onChangeText:E=>T(R=>({...R,destination:E}))}),M.jsx(q,{style:Re.label,children:"Temperature"}),M.jsx(Qn,{style:Re.input,placeholder:"e.g. 75F, Cold, Rainy (Leave blank to use forecast)",value:S.temperature,onChangeText:E=>T(R=>({...R,temperature:E}))}),M.jsx(q,{style:Re.label,children:"Style Preference"}),M.jsx(Qn,{style:Re.input,placeholder:"e.g. Casual, Chic, Edgy",value:S.style,onChangeText:E=>T(R=>({...R,style:E}))})]}),M.jsx(be,{style:[Re.genButton,d&&{opacity:.7}],onPress:O,disabled:d,children:d?M.jsx(Zd,{color:"#fff"}):M.jsx(q,{style:Re.genButtonText,children:"Generate Suggestions"})}),p.map((E,R)=>M.jsxs(be,{style:Re.suggestionCard,onPress:()=>D(E),children:[M.jsx(q,{style:Re.suggestionSummary,children:E.reason||E.summary}),M.jsx(Vr,{horizontal:!0,children:E.itemIds.map(A=>{const x=y(A);return x?M.jsx(bi,{source:{uri:x.imageUri||x.image},style:Re.smallImage},A):null})}),M.jsx(X,{style:Re.selectButton,children:M.jsx(q,{style:Re.selectButtonText,children:"Select This Outfit"})})]},R))]}),M.jsx(be,{style:Re.closeButton,onPress:()=>l(!1),children:M.jsx(q,{style:Re.closeButtonText,children:"Close"})})]})})]})}const Re=Ae.create({container:{flexGrow:1,padding:20,paddingBottom:80},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},dayCard:{backgroundColor:"#fff",borderRadius:10,padding:15,marginBottom:15,elevation:2},dateHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},weatherContainer:{alignItems:"flex-end"},weatherTemp:{fontSize:16,fontWeight:"bold"},weatherDesc:{fontSize:12,color:"#666"},generateButton:{backgroundColor:"#f0f0f0",padding:15,borderRadius:8,alignItems:"center",borderWidth:1,borderColor:"#ddd",borderStyle:"dashed"},generateButtonText:{color:"#007AFF",fontSize:16},modalContainer:{flex:1,padding:20,backgroundColor:"#fff"},modalTitle:{fontSize:22,fontWeight:"bold",marginBottom:10,textAlign:"center"},modalWeather:{textAlign:"center",marginBottom:20,color:"#666"},genButton:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",marginBottom:10},genButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},suggestionCard:{borderWidth:1,borderColor:"#ddd",borderRadius:10,padding:15,marginBottom:20},suggestionSummary:{marginBottom:10,fontStyle:"italic"},smallImage:{width:60,height:60,borderRadius:5,marginRight:5},selectButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center",marginTop:10},selectButtonText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:15,alignItems:"center"},closeButtonText:{color:"red"},dayName:{fontSize:18,fontWeight:"bold"},dateText:{color:"#666"},itemsRow:{flexDirection:"row",marginBottom:10},itemPreview:{marginRight:10,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:8,marginBottom:5},itemType:{fontSize:12},wearButton:{backgroundColor:"#007AFF",padding:10,borderRadius:5,alignItems:"center"},wearButtonText:{color:"#fff",fontWeight:"bold"},emptyText:{textAlign:"center",color:"#999",fontStyle:"italic",padding:10}});function Gse(){const[t,e]=I.useState(""),[n,r]=I.useState(""),[i,s]=I.useState(!0),[o,a]=I.useState(!1),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState(""),g=async()=>{u(""),p(""),a(!0);try{c?(await vZ(t),p("Check your email for password reset instructions."),d(!1)):i?await mZ(t,n):await gZ(t,n)}catch(S){u(S.message.replace("Firebase: ",""))}finally{a(!1)}};return M.jsxs(X,{style:Tn.container,children:[M.jsx(bi,{source:{uri:"/pwa-192x192.png"},style:{width:100,height:100,marginBottom:20,alignSelf:"center"}}),M.jsxs(X,{style:Tn.card,children:[M.jsx(q,{style:Tn.title,children:c?"Reset Password":i?"Pocket Stylist Login":"Create Account"}),l?M.jsx(q,{style:Tn.error,children:l}):null,f?M.jsx(q,{style:Tn.success,children:f}):null,M.jsx(Qn,{style:Tn.input,placeholder:"Email",value:t,onChangeText:e,autoCapitalize:"none",keyboardType:"email-address"}),!c&&M.jsx(Qn,{style:Tn.input,placeholder:"Password",value:n,onChangeText:r,secureTextEntry:!0}),M.jsx(be,{style:Tn.button,onPress:g,disabled:o,children:o?M.jsx(Zd,{color:"#fff"}):M.jsx(q,{style:Tn.buttonText,children:c?"Send Reset Email":i?"Log In":"Sign Up"})}),M.jsx(X,{style:Tn.footer,children:c?M.jsx(be,{onPress:()=>d(!1),children:M.jsx(q,{style:Tn.link,children:"Back to Login"})}):M.jsxs(M.Fragment,{children:[M.jsx(be,{onPress:()=>s(!i),children:M.jsx(q,{style:Tn.link,children:i?"Need an account? Sign Up":"Have an account? Log In"})}),M.jsx(be,{onPress:()=>d(!0),children:M.jsx(q,{style:[Tn.link,Tn.forgotLink],children:"Forgot Password?"})})]})})]})]})}const Tn=Ae.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5",padding:20,height:"100vh"},card:{backgroundColor:"#fff",padding:30,borderRadius:15,width:"100%",maxWidth:400,elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center",color:"#333"},input:{backgroundColor:"#f9f9f9",padding:15,borderRadius:8,marginBottom:15,borderWidth:1,borderColor:"#eee"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:8,alignItems:"center",marginTop:10},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},error:{color:"red",marginBottom:15,textAlign:"center"},success:{color:"green",marginBottom:15,textAlign:"center"},footer:{marginTop:20,alignItems:"center"},link:{color:"#007AFF",marginTop:10},forgotLink:{color:"#666",fontSize:12}});function Xse({onNavigate:t}){const e=Zu(),n=Ri(),r=s=>{t?t(s):e(s)},i=[{name:"Home",path:"/"},{name:"Closet",path:"/closet"},{name:"Style",path:"/outfits"},{name:"Plan",path:"/schedule"}];return M.jsx(X,{style:Zc.navBar,children:i.map(s=>{const o=n.pathname===s.path;return M.jsx(be,{style:[Zc.tab,o&&Zc.activeTab],onPress:()=>r(s.path),children:M.jsx(q,{style:[Zc.tabText,o&&Zc.activeTabText],children:s.name})},s.name)})})}const Zc=Ae.create({navBar:{flexDirection:"row",justifyContent:"space-around",backgroundColor:ai.colors.background,borderTopWidth:1,borderTopColor:ai.colors.border,paddingBottom:20,paddingTop:10,position:"absolute",bottom:0,left:0,right:0},tab:{alignItems:"center",padding:10},activeTab:{borderBottomWidth:2,borderBottomColor:ai.colors.highlight},tabText:{fontSize:16,color:ai.colors.secondaryText},activeTabText:{color:ai.colors.highlight,fontWeight:"bold"}});function Qse({visible:t,onClose:e}){const n=lc.currentUser,[r,i]=I.useState("");I.useEffect(()=>{n&&Tie(n.uid).then(a=>{if(a!=null&&a.openai_api_key)i(a.openai_api_key),localStorage.setItem("openai_api_key",a.openai_api_key);else{const l=localStorage.getItem("openai_api_key");l&&i(l)}})},[n,t]);const s=async()=>{n&&(await Eie(n.uid,{openai_api_key:r}),localStorage.setItem("openai_api_key",r),alert("API Key saved to account!"))},o=async()=>{try{await yZ(),e()}catch(a){console.error("Failed to log out",a)}};return M.jsx(Sd,{visible:t,transparent:!0,animationType:"fade",onRequestClose:e,children:M.jsxs(X,{style:tn.overlay,children:[M.jsx(be,{style:Ae.absoluteFill,activeOpacity:1,onPress:e}),M.jsxs(X,{style:tn.modalContent,children:[M.jsx(q,{style:tn.title,children:"Account"}),M.jsxs(X,{style:tn.info,children:[M.jsx(q,{style:tn.label,children:"Email"}),M.jsx(q,{style:tn.value,children:n==null?void 0:n.email})]}),M.jsxs(X,{style:tn.section,children:[M.jsx(q,{style:tn.label,children:"OpenAI API Key"}),M.jsx("input",{type:"password",style:{width:"100%",padding:10,marginBottom:10,border:"1px solid #ddd",borderRadius:8,fontSize:16,boxSizing:"border-box"},placeholder:"sk-...",value:r,onChange:a=>i(a.target.value)}),M.jsx(be,{style:tn.saveButton,onPress:s,children:M.jsx(q,{style:tn.saveButtonText,children:"Save Key"})})]}),M.jsx(be,{style:tn.refreshButton,onPress:()=>window.location.reload(),children:M.jsx(q,{style:tn.refreshButtonText,children:"Refresh App"})}),M.jsx(be,{style:tn.logoutButton,onPress:o,children:M.jsx(q,{style:tn.logoutText,children:"Log Out"})}),M.jsx(be,{style:tn.closeButton,onPress:e,children:M.jsx(q,{style:tn.closeText,children:"Close"})})]})]})})}const tn=Ae.create({overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",width:"80%",maxWidth:300,borderRadius:15,padding:20,alignItems:"center",elevation:5},title:{fontSize:20,fontWeight:"bold",marginBottom:20},info:{marginBottom:20,alignItems:"center"},section:{width:"100%",marginBottom:20},label:{color:"#666",fontSize:12,marginBottom:5},value:{fontSize:16,fontWeight:"500"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:10,marginBottom:10,width:"100%"},saveButton:{backgroundColor:"#007AFF",padding:10,borderRadius:8,alignItems:"center"},saveButtonText:{color:"#fff",fontWeight:"bold"},refreshButton:{backgroundColor:"#34C759",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},refreshButtonText:{color:"#fff",fontWeight:"bold"},logoutButton:{backgroundColor:"#FF3B30",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},logoutText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:10},closeText:{color:"#007AFF"}}),Yse={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:t=>({zIndex:0,x:t<0?"100%":"-100%",opacity:0})},eh=({children:t,direction:e})=>M.jsx(_ie.div,{custom:e,variants:Yse,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",ease:"easeInOut",duration:.3},style:{height:"100%",width:"100%",backgroundColor:"#ffffff",overflowY:"auto",overflowX:"hidden",position:"absolute",top:0,left:0,paddingBottom:"80px"},children:t});function Jse(){const{currentUser:t}=Qb(),[e,n]=I.useState(!1),[r,i]=I.useState(0),s=Zu(),o=Ri(),a=["/","/closet","/outfits","/schedule"],l=c=>{const d=a.indexOf(o.pathname),f=a.indexOf(c);i(f>d?1:-1),s(c)},u=PZ({onSwipedLeft:()=>{const c=a.indexOf(o.pathname);c<a.length-1&&(i(1),s(a[c+1]))},onSwipedRight:()=>{const c=a.indexOf(o.pathname);c>0&&(i(-1),s(a[c-1]))},preventScrollOnSwipe:!1,trackMouse:!0,delta:50});return t?M.jsxs(X,{style:yw.container,children:[M.jsxs(X,{style:yw.header,children:[M.jsx(X,{style:{flexDirection:"row",alignItems:"center",flex:1},children:M.jsx(bi,{source:{uri:wie},style:{width:260,height:52,resizeMode:"contain",marginLeft:-25}})}),M.jsx(be,{onPress:()=>n(!0),children:M.jsx(BZ,{size:34,color:ai.colors.highlight})})]}),M.jsx(X,{style:yw.content,...u,children:M.jsx($te,{mode:"popLayout",custom:r,children:M.jsxs(M8,{location:o,children:[M.jsx(kl,{path:"/",element:M.jsx(eh,{direction:r,children:M.jsx(Sie,{})})}),M.jsx(kl,{path:"/closet",element:M.jsx(eh,{direction:r,children:M.jsx(Lie,{})})}),M.jsx(kl,{path:"/camera",element:M.jsx(eh,{direction:r,children:M.jsx(Wse,{})})}),M.jsx(kl,{path:"/outfits",element:M.jsx(eh,{direction:r,children:M.jsx(Hse,{})})}),M.jsx(kl,{path:"/schedule",element:M.jsx(eh,{direction:r,children:M.jsx(qse,{})})})]},o.pathname)})}),M.jsx(Xse,{onNavigate:l}),M.jsx(Qse,{visible:e,onClose:()=>n(!1)})]}):M.jsx(Gse,{})}function Zse(){return M.jsx(rH,{children:M.jsx(Jse,{})})}const yw=Ae.create({container:{flex:1,height:"100vh",maxHeight:"100dvh",backgroundColor:"#ffffff",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:15,backgroundColor:ai.colors.background,borderBottomWidth:1,borderBottomColor:ai.colors.border,paddingTop:15,zIndex:10,height:70},headerTitle:{fontSize:18,fontWeight:"bold",color:ai.colors.text},accountButton:{color:ai.colors.highlight,fontWeight:"500"},content:{flex:1,paddingBottom:60,overflow:"hidden"}});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){for(let e of t)console.log("Unregistering Service Worker:",e),e.unregister()});vw.createRoot(document.getElementById("root")).render(M.jsx(yt.StrictMode,{children:M.jsx(_Z,{children:M.jsx(kie,{children:M.jsx(Zse,{})})})}));
