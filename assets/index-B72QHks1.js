(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ku(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Mk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Nk={exports:{}},ly={},Lk={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=Symbol.for("react.element"),fU=Symbol.for("react.portal"),pU=Symbol.for("react.fragment"),mU=Symbol.for("react.strict_mode"),gU=Symbol.for("react.profiler"),yU=Symbol.for("react.provider"),vU=Symbol.for("react.context"),_U=Symbol.for("react.forward_ref"),wU=Symbol.for("react.suspense"),SU=Symbol.for("react.memo"),EU=Symbol.for("react.lazy"),pR=Symbol.iterator;function TU(t){return t===null||typeof t!="object"?null:(t=pR&&t[pR]||t["@@iterator"],typeof t=="function"?t:null)}var Vk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fk=Object.assign,Bk={};function qu(t,e,n){this.props=t,this.context=e,this.refs=Bk,this.updater=n||Vk}qu.prototype.isReactComponent={};qu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jk(){}jk.prototype=qu.prototype;function sE(t,e,n){this.props=t,this.context=e,this.refs=Bk,this.updater=n||Vk}var oE=sE.prototype=new jk;oE.constructor=sE;Fk(oE,qu.prototype);oE.isPureReactComponent=!0;var mR=Array.isArray,Uk=Object.prototype.hasOwnProperty,aE={current:null},$k={key:!0,ref:!0,__self:!0,__source:!0};function zk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Uk.call(e,r)&&!$k.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Kd,type:t,key:s,ref:o,props:i,_owner:aE.current}}function bU(t,e){return{$$typeof:Kd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lE(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kd}function IU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gR=/\/+/g;function Cv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IU(""+t.key):e.toString(36)}function Up(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kd:case fU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Cv(o,0):r,mR(i)?(n="",t!=null&&(n=t.replace(gR,"$&/")+"/"),Up(i,e,n,"",function(u){return u})):i!=null&&(lE(i)&&(i=bU(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gR,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",mR(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Cv(s,a);o+=Up(s,e,n,l,i)}else if(l=TU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Cv(s,a++),o+=Up(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gf(t,e,n){if(t==null)return t;var r=[],i=0;return Up(t,r,"","",function(s){return e.call(n,s,i++)}),r}function RU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sn={current:null},$p={transition:null},CU={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:$p,ReactCurrentOwner:aE};function Wk(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Gf,forEach:function(t,e,n){Gf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gf(t,function(){e++}),e},toArray:function(t){return Gf(t,function(e){return e})||[]},only:function(t){if(!lE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=qu;Se.Fragment=pU;Se.Profiler=gU;Se.PureComponent=sE;Se.StrictMode=mU;Se.Suspense=wU;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CU;Se.act=Wk;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=aE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Uk.call(e,l)&&!$k.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Kd,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:vU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yU,_context:t},t.Consumer=t};Se.createElement=zk;Se.createFactory=function(t){var e=zk.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:_U,render:t}};Se.isValidElement=lE;Se.lazy=function(t){return{$$typeof:EU,_payload:{_status:-1,_result:t},_init:RU}};Se.memo=function(t,e){return{$$typeof:SU,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=$p.transition;$p.transition={};try{t()}finally{$p.transition=e}};Se.unstable_act=Wk;Se.useCallback=function(t,e){return Sn.current.useCallback(t,e)};Se.useContext=function(t){return Sn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return Sn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return Sn.current.useEffect(t,e)};Se.useId=function(){return Sn.current.useId()};Se.useImperativeHandle=function(t,e,n){return Sn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return Sn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return Sn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return Sn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return Sn.current.useReducer(t,e,n)};Se.useRef=function(t){return Sn.current.useRef(t)};Se.useState=function(t){return Sn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return Sn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return Sn.current.useTransition()};Se.version="18.3.1";Lk.exports=Se;var I=Lk.exports;const yt=Ku(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xU=I,AU=Symbol.for("react.element"),PU=Symbol.for("react.fragment"),kU=Object.prototype.hasOwnProperty,DU=xU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OU={key:!0,ref:!0,__self:!0,__source:!0};function Hk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kU.call(e,r)&&!OU.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:AU,type:t,key:s,ref:o,props:i,_owner:DU.current}}ly.Fragment=PU;ly.jsx=Hk;ly.jsxs=Hk;Nk.exports=ly;var M=Nk.exports,gw={},Kk={exports:{}},er={},qk={exports:{}},Gk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Y){var ie=U.length;U.push(Y);e:for(;0<ie;){var we=ie-1>>>1,Pe=U[we];if(0<i(Pe,Y))U[we]=Y,U[ie]=Pe,ie=we;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],ie=U.pop();if(ie!==Y){U[0]=ie;e:for(var we=0,Pe=U.length,hn=Pe>>>1;we<hn;){var lt=2*(we+1)-1,zt=U[lt],gt=lt+1,Ke=U[gt];if(0>i(zt,ie))gt<Pe&&0>i(Ke,zt)?(U[we]=Ke,U[gt]=ie,we=gt):(U[we]=zt,U[lt]=ie,we=lt);else if(gt<Pe&&0>i(Ke,ie))U[we]=Ke,U[gt]=ie,we=gt;else break e}}return Y}function i(U,Y){var ie=U.sortIndex-Y.sortIndex;return ie!==0?ie:U.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,g=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(U){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=U)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function C(U){if(S=!1,v(U),!g)if(n(l)!==null)g=!0,je(D);else{var Y=n(u);Y!==null&&Re(C,Y.startTime-U)}}function D(U,Y){g=!1,S&&(S=!1,_(E),E=-1),p=!0;var ie=f;try{for(v(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||U&&!P());){var we=d.callback;if(typeof we=="function"){d.callback=null,f=d.priorityLevel;var Pe=we(d.expirationTime<=Y);Y=t.unstable_now(),typeof Pe=="function"?d.callback=Pe:d===n(l)&&r(l),v(Y)}else r(l);d=n(l)}if(d!==null)var hn=!0;else{var lt=n(u);lt!==null&&Re(C,lt.startTime-Y),hn=!1}return hn}finally{d=null,f=ie,p=!1}}var O=!1,b=null,E=-1,R=5,x=-1;function P(){return!(t.unstable_now()-x<R)}function N(){if(b!==null){var U=t.unstable_now();x=U;var Y=!0;try{Y=b(!0,U)}finally{Y?k():(O=!1,b=null)}}else O=!1}var k;if(typeof y=="function")k=function(){y(N)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,fe=de.port2;de.port1.onmessage=N,k=function(){fe.postMessage(null)}}else k=function(){T(N,0)};function je(U){b=U,O||(O=!0,k())}function Re(U,Y){E=T(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,je(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var ie=f;f=Y;try{return U()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=f;f=U;try{return Y()}finally{f=ie}},t.unstable_scheduleCallback=function(U,Y,ie){var we=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?we+ie:we):ie=we,U){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ie+Pe,U={id:c++,callback:Y,priorityLevel:U,startTime:ie,expirationTime:Pe,sortIndex:-1},ie>we?(U.sortIndex=ie,e(u,U),n(l)===null&&U===n(u)&&(S?(_(E),E=-1):S=!0,Re(C,ie-we))):(U.sortIndex=Pe,e(l,U),g||p||(g=!0,je(D))),U},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(U){var Y=f;return function(){var ie=f;f=Y;try{return U.apply(this,arguments)}finally{f=ie}}}})(Gk);qk.exports=Gk;var MU=qk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NU=I,Jn=MU;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xk=new Set,Zh={};function Ya(t,e){_u(t,e),_u(t+"Capture",e)}function _u(t,e){for(Zh[t]=e,t=0;t<e.length;t++)Xk.add(e[t])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yw=Object.prototype.hasOwnProperty,LU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yR={},vR={};function VU(t){return yw.call(vR,t)?!0:yw.call(yR,t)?!1:LU.test(t)?vR[t]=!0:(yR[t]=!0,!1)}function FU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BU(t,e,n,r){if(e===null||typeof e>"u"||FU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var uE=/[\-:]([a-z])/g;function cE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uE,cE);Qt[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uE,cE);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uE,cE);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function hE(t,e,n,r){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BU(e,n,i,r)&&(n=null),r||i===null?VU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ss=NU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xf=Symbol.for("react.element"),jl=Symbol.for("react.portal"),Ul=Symbol.for("react.fragment"),dE=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),Qk=Symbol.for("react.provider"),Yk=Symbol.for("react.context"),fE=Symbol.for("react.forward_ref"),_w=Symbol.for("react.suspense"),ww=Symbol.for("react.suspense_list"),pE=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),Jk=Symbol.for("react.offscreen"),_R=Symbol.iterator;function Mc(t){return t===null||typeof t!="object"?null:(t=_R&&t[_R]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,xv;function eh(t){if(xv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xv=e&&e[1]||""}return`
`+xv+t}var Av=!1;function Pv(t,e){if(!t||Av)return"";Av=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Av=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eh(t):""}function jU(t){switch(t.tag){case 5:return eh(t.type);case 16:return eh("Lazy");case 13:return eh("Suspense");case 19:return eh("SuspenseList");case 0:case 2:case 15:return t=Pv(t.type,!1),t;case 11:return t=Pv(t.type.render,!1),t;case 1:return t=Pv(t.type,!0),t;default:return""}}function Sw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ul:return"Fragment";case jl:return"Portal";case vw:return"Profiler";case dE:return"StrictMode";case _w:return"Suspense";case ww:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yk:return(t.displayName||"Context")+".Consumer";case Qk:return(t._context.displayName||"Context")+".Provider";case fE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pE:return e=t.displayName||null,e!==null?e:Sw(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return Sw(t(e))}catch{}}return null}function UU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sw(e);case 8:return e===dE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $U(t){var e=Zk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qf(t){t._valueTracker||(t._valueTracker=$U(t))}function eD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ew(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tD(t,e){e=e.checked,e!=null&&hE(t,"checked",e,!1)}function Tw(t,e){tD(t,e);var n=mo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bw(t,e.type,n):e.hasOwnProperty("defaultValue")&&bw(t,e.type,mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function SR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bw(t,e,n){(e!=="number"||Lm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var th=Array.isArray;function ou(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Iw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ER(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(th(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mo(n)}}function nD(t,e){var n=mo(e.value),r=mo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function TR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yf,iD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yf=Yf||document.createElement("div"),Yf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zU=["Webkit","ms","Moz","O"];Object.keys(Sh).forEach(function(t){zU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sh[e]=Sh[t]})});function sD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sh.hasOwnProperty(t)&&Sh[t]?(""+e).trim():e+"px"}function oD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var WU=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cw(t,e){if(e){if(WU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function xw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aw=null;function mE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pw=null,au=null,lu=null;function bR(t){if(t=Xd(t)){if(typeof Pw!="function")throw Error(W(280));var e=t.stateNode;e&&(e=fy(e),Pw(t.stateNode,t.type,e))}}function aD(t){au?lu?lu.push(t):lu=[t]:au=t}function lD(){if(au){var t=au,e=lu;if(lu=au=null,bR(t),e)for(t=0;t<e.length;t++)bR(e[t])}}function uD(t,e){return t(e)}function cD(){}var kv=!1;function hD(t,e,n){if(kv)return t(e,n);kv=!0;try{return uD(t,e,n)}finally{kv=!1,(au!==null||lu!==null)&&(cD(),lD())}}function td(t,e){var n=t.stateNode;if(n===null)return null;var r=fy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var kw=!1;if(Gi)try{var Nc={};Object.defineProperty(Nc,"passive",{get:function(){kw=!0}}),window.addEventListener("test",Nc,Nc),window.removeEventListener("test",Nc,Nc)}catch{kw=!1}function HU(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Eh=!1,Vm=null,Fm=!1,Dw=null,KU={onError:function(t){Eh=!0,Vm=t}};function qU(t,e,n,r,i,s,o,a,l){Eh=!1,Vm=null,HU.apply(KU,arguments)}function GU(t,e,n,r,i,s,o,a,l){if(qU.apply(this,arguments),Eh){if(Eh){var u=Vm;Eh=!1,Vm=null}else throw Error(W(198));Fm||(Fm=!0,Dw=u)}}function Ja(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function IR(t){if(Ja(t)!==t)throw Error(W(188))}function XU(t){var e=t.alternate;if(!e){if(e=Ja(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return IR(i),t;if(s===r)return IR(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function fD(t){return t=XU(t),t!==null?pD(t):null}function pD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pD(t);if(e!==null)return e;t=t.sibling}return null}var mD=Jn.unstable_scheduleCallback,RR=Jn.unstable_cancelCallback,QU=Jn.unstable_shouldYield,YU=Jn.unstable_requestPaint,vt=Jn.unstable_now,JU=Jn.unstable_getCurrentPriorityLevel,gE=Jn.unstable_ImmediatePriority,gD=Jn.unstable_UserBlockingPriority,Bm=Jn.unstable_NormalPriority,ZU=Jn.unstable_LowPriority,yD=Jn.unstable_IdlePriority,uy=null,di=null;function e4(t){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(uy,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:r4,t4=Math.log,n4=Math.LN2;function r4(t){return t>>>=0,t===0?32:31-(t4(t)/n4|0)|0}var Jf=64,Zf=4194304;function nh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=nh(a):(s&=o,s!==0&&(r=nh(s)))}else o=n&~i,o!==0?r=nh(o):s!==0&&(r=nh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fr(e),i=1<<n,r|=t[n],e&=~i;return r}function i4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=i4(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ow(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vD(){var t=Jf;return Jf<<=1,!(Jf&4194240)&&(Jf=64),t}function Dv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=n}function o4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function yE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function _D(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wD,vE,SD,ED,TD,Mw=!1,ep=[],to=null,no=null,ro=null,nd=new Map,rd=new Map,Ws=[],a4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CR(t,e){switch(t){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(e.pointerId)}}function Lc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xd(e),e!==null&&vE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function l4(t,e,n,r,i){switch(e){case"focusin":return to=Lc(to,t,e,n,r,i),!0;case"dragenter":return no=Lc(no,t,e,n,r,i),!0;case"mouseover":return ro=Lc(ro,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return nd.set(s,Lc(nd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rd.set(s,Lc(rd.get(s)||null,t,e,n,r,i)),!0}return!1}function bD(t){var e=da(t.target);if(e!==null){var n=Ja(e);if(n!==null){if(e=n.tag,e===13){if(e=dD(n),e!==null){t.blockedOn=e,TD(t.priority,function(){SD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Aw=r,n.target.dispatchEvent(r),Aw=null}else return e=Xd(n),e!==null&&vE(e),t.blockedOn=n,!1;e.shift()}return!0}function xR(t,e,n){zp(t)&&n.delete(e)}function u4(){Mw=!1,to!==null&&zp(to)&&(to=null),no!==null&&zp(no)&&(no=null),ro!==null&&zp(ro)&&(ro=null),nd.forEach(xR),rd.forEach(xR)}function Vc(t,e){t.blockedOn===e&&(t.blockedOn=null,Mw||(Mw=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,u4)))}function id(t){function e(i){return Vc(i,t)}if(0<ep.length){Vc(ep[0],t);for(var n=1;n<ep.length;n++){var r=ep[n];r.blockedOn===t&&(r.blockedOn=null)}}for(to!==null&&Vc(to,t),no!==null&&Vc(no,t),ro!==null&&Vc(ro,t),nd.forEach(e),rd.forEach(e),n=0;n<Ws.length;n++)r=Ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)bD(n),n.blockedOn===null&&Ws.shift()}var uu=ss.ReactCurrentBatchConfig,Um=!0;function c4(t,e,n,r){var i=Ve,s=uu.transition;uu.transition=null;try{Ve=1,_E(t,e,n,r)}finally{Ve=i,uu.transition=s}}function h4(t,e,n,r){var i=Ve,s=uu.transition;uu.transition=null;try{Ve=4,_E(t,e,n,r)}finally{Ve=i,uu.transition=s}}function _E(t,e,n,r){if(Um){var i=Nw(t,e,n,r);if(i===null)$v(t,e,r,$m,n),CR(t,r);else if(l4(i,t,e,n,r))r.stopPropagation();else if(CR(t,r),e&4&&-1<a4.indexOf(t)){for(;i!==null;){var s=Xd(i);if(s!==null&&wD(s),s=Nw(t,e,n,r),s===null&&$v(t,e,r,$m,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $v(t,e,r,null,n)}}var $m=null;function Nw(t,e,n,r){if($m=null,t=mE(r),t=da(t),t!==null)if(e=Ja(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $m=t,null}function ID(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JU()){case gE:return 1;case gD:return 4;case Bm:case ZU:return 16;case yD:return 536870912;default:return 16}default:return 16}}var Js=null,wE=null,Wp=null;function RD(){if(Wp)return Wp;var t,e=wE,n=e.length,r,i="value"in Js?Js.value:Js.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wp=i.slice(t,1<r?1-r:void 0)}function Hp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tp(){return!0}function AR(){return!1}function tr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tp:AR,this.isPropagationStopped=AR,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tp)},persist:function(){},isPersistent:tp}),e}var Gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SE=tr(Gu),Gd=ot({},Gu,{view:0,detail:0}),d4=tr(Gd),Ov,Mv,Fc,cy=ot({},Gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fc&&(Fc&&t.type==="mousemove"?(Ov=t.screenX-Fc.screenX,Mv=t.screenY-Fc.screenY):Mv=Ov=0,Fc=t),Ov)},movementY:function(t){return"movementY"in t?t.movementY:Mv}}),PR=tr(cy),f4=ot({},cy,{dataTransfer:0}),p4=tr(f4),m4=ot({},Gd,{relatedTarget:0}),Nv=tr(m4),g4=ot({},Gu,{animationName:0,elapsedTime:0,pseudoElement:0}),y4=tr(g4),v4=ot({},Gu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_4=tr(v4),w4=ot({},Gu,{data:0}),kR=tr(w4),S4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=T4[t])?!!e[t]:!1}function EE(){return b4}var I4=ot({},Gd,{key:function(t){if(t.key){var e=S4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?E4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EE,charCode:function(t){return t.type==="keypress"?Hp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),R4=tr(I4),C4=ot({},cy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DR=tr(C4),x4=ot({},Gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EE}),A4=tr(x4),P4=ot({},Gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),k4=tr(P4),D4=ot({},cy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),O4=tr(D4),M4=[9,13,27,32],TE=Gi&&"CompositionEvent"in window,Th=null;Gi&&"documentMode"in document&&(Th=document.documentMode);var N4=Gi&&"TextEvent"in window&&!Th,CD=Gi&&(!TE||Th&&8<Th&&11>=Th),OR=" ",MR=!1;function xD(t,e){switch(t){case"keyup":return M4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $l=!1;function L4(t,e){switch(t){case"compositionend":return AD(e);case"keypress":return e.which!==32?null:(MR=!0,OR);case"textInput":return t=e.data,t===OR&&MR?null:t;default:return null}}function V4(t,e){if($l)return t==="compositionend"||!TE&&xD(t,e)?(t=RD(),Wp=wE=Js=null,$l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CD&&e.locale!=="ko"?null:e.data;default:return null}}var F4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!F4[t.type]:e==="textarea"}function PD(t,e,n,r){aD(r),e=zm(e,"onChange"),0<e.length&&(n=new SE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bh=null,sd=null;function B4(t){UD(t,0)}function hy(t){var e=Hl(t);if(eD(e))return t}function j4(t,e){if(t==="change")return e}var kD=!1;if(Gi){var Lv;if(Gi){var Vv="oninput"in document;if(!Vv){var LR=document.createElement("div");LR.setAttribute("oninput","return;"),Vv=typeof LR.oninput=="function"}Lv=Vv}else Lv=!1;kD=Lv&&(!document.documentMode||9<document.documentMode)}function VR(){bh&&(bh.detachEvent("onpropertychange",DD),sd=bh=null)}function DD(t){if(t.propertyName==="value"&&hy(sd)){var e=[];PD(e,sd,t,mE(t)),hD(B4,e)}}function U4(t,e,n){t==="focusin"?(VR(),bh=e,sd=n,bh.attachEvent("onpropertychange",DD)):t==="focusout"&&VR()}function $4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hy(sd)}function z4(t,e){if(t==="click")return hy(e)}function W4(t,e){if(t==="input"||t==="change")return hy(e)}function H4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:H4;function od(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yw.call(e,i)||!jr(t[i],e[i]))return!1}return!0}function FR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function BR(t,e){var n=FR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=FR(n)}}function OD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function MD(){for(var t=window,e=Lm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lm(t.document)}return e}function bE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function K4(t){var e=MD(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OD(n.ownerDocument.documentElement,n)){if(r!==null&&bE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=BR(n,s);var o=BR(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var q4=Gi&&"documentMode"in document&&11>=document.documentMode,zl=null,Lw=null,Ih=null,Vw=!1;function jR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vw||zl==null||zl!==Lm(r)||(r=zl,"selectionStart"in r&&bE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ih&&od(Ih,r)||(Ih=r,r=zm(Lw,"onSelect"),0<r.length&&(e=new SE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zl)))}function np(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wl={animationend:np("Animation","AnimationEnd"),animationiteration:np("Animation","AnimationIteration"),animationstart:np("Animation","AnimationStart"),transitionend:np("Transition","TransitionEnd")},Fv={},ND={};Gi&&(ND=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function dy(t){if(Fv[t])return Fv[t];if(!Wl[t])return t;var e=Wl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ND)return Fv[t]=e[n];return t}var LD=dy("animationend"),VD=dy("animationiteration"),FD=dy("animationstart"),BD=dy("transitionend"),jD=new Map,UR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(t,e){jD.set(t,e),Ya(e,[t])}for(var Bv=0;Bv<UR.length;Bv++){var jv=UR[Bv],G4=jv.toLowerCase(),X4=jv[0].toUpperCase()+jv.slice(1);Io(G4,"on"+X4)}Io(LD,"onAnimationEnd");Io(VD,"onAnimationIteration");Io(FD,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(BD,"onTransitionEnd");_u("onMouseEnter",["mouseout","mouseover"]);_u("onMouseLeave",["mouseout","mouseover"]);_u("onPointerEnter",["pointerout","pointerover"]);_u("onPointerLeave",["pointerout","pointerover"]);Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q4=new Set("cancel close invalid load scroll toggle".split(" ").concat(rh));function $R(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GU(r,e,void 0,t),t.currentTarget=null}function UD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$R(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$R(i,a,u),s=l}}}if(Fm)throw t=Dw,Fm=!1,Dw=null,t}function Ge(t,e){var n=e[$w];n===void 0&&(n=e[$w]=new Set);var r=t+"__bubble";n.has(r)||($D(e,t,2,!1),n.add(r))}function Uv(t,e,n){var r=0;e&&(r|=4),$D(n,t,r,e)}var rp="_reactListening"+Math.random().toString(36).slice(2);function ad(t){if(!t[rp]){t[rp]=!0,Xk.forEach(function(n){n!=="selectionchange"&&(Q4.has(n)||Uv(n,!1,t),Uv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rp]||(e[rp]=!0,Uv("selectionchange",!1,e))}}function $D(t,e,n,r){switch(ID(e)){case 1:var i=c4;break;case 4:i=h4;break;default:i=_E}n=i.bind(null,e,n,t),i=void 0,!kw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $v(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=da(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hD(function(){var u=s,c=mE(n),d=[];e:{var f=jD.get(t);if(f!==void 0){var p=SE,g=t;switch(t){case"keypress":if(Hp(n)===0)break e;case"keydown":case"keyup":p=R4;break;case"focusin":g="focus",p=Nv;break;case"focusout":g="blur",p=Nv;break;case"beforeblur":case"afterblur":p=Nv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=PR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=p4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=A4;break;case LD:case VD:case FD:p=y4;break;case BD:p=k4;break;case"scroll":p=d4;break;case"wheel":p=O4;break;case"copy":case"cut":case"paste":p=_4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=DR}var S=(e&4)!==0,T=!S&&t==="scroll",_=S?f!==null?f+"Capture":null:f;S=[];for(var y=u,v;y!==null;){v=y;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,_!==null&&(C=td(y,_),C!=null&&S.push(ld(y,C,v)))),T)break;y=y.return}0<S.length&&(f=new p(f,g,null,n,c),d.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Aw&&(g=n.relatedTarget||n.fromElement)&&(da(g)||g[Xi]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?da(g):null,g!==null&&(T=Ja(g),g!==T||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(S=PR,C="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=DR,C="onPointerLeave",_="onPointerEnter",y="pointer"),T=p==null?f:Hl(p),v=g==null?f:Hl(g),f=new S(C,y+"leave",p,n,c),f.target=T,f.relatedTarget=v,C=null,da(c)===u&&(S=new S(_,y+"enter",g,n,c),S.target=v,S.relatedTarget=T,C=S),T=C,p&&g)t:{for(S=p,_=g,y=0,v=S;v;v=wl(v))y++;for(v=0,C=_;C;C=wl(C))v++;for(;0<y-v;)S=wl(S),y--;for(;0<v-y;)_=wl(_),v--;for(;y--;){if(S===_||_!==null&&S===_.alternate)break t;S=wl(S),_=wl(_)}S=null}else S=null;p!==null&&zR(d,f,p,S,!1),g!==null&&T!==null&&zR(d,T,g,S,!0)}}e:{if(f=u?Hl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var D=j4;else if(NR(f))if(kD)D=W4;else{D=$4;var O=U4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=z4);if(D&&(D=D(t,u))){PD(d,D,n,c);break e}O&&O(t,f,u),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&bw(f,"number",f.value)}switch(O=u?Hl(u):window,t){case"focusin":(NR(O)||O.contentEditable==="true")&&(zl=O,Lw=u,Ih=null);break;case"focusout":Ih=Lw=zl=null;break;case"mousedown":Vw=!0;break;case"contextmenu":case"mouseup":case"dragend":Vw=!1,jR(d,n,c);break;case"selectionchange":if(q4)break;case"keydown":case"keyup":jR(d,n,c)}var b;if(TE)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else $l?xD(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(CD&&n.locale!=="ko"&&($l||E!=="onCompositionStart"?E==="onCompositionEnd"&&$l&&(b=RD()):(Js=c,wE="value"in Js?Js.value:Js.textContent,$l=!0)),O=zm(u,E),0<O.length&&(E=new kR(E,t,null,n,c),d.push({event:E,listeners:O}),b?E.data=b:(b=AD(n),b!==null&&(E.data=b)))),(b=N4?L4(t,n):V4(t,n))&&(u=zm(u,"onBeforeInput"),0<u.length&&(c=new kR("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=b))}UD(d,e)})}function ld(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=td(t,n),s!=null&&r.unshift(ld(t,s,i)),s=td(t,e),s!=null&&r.push(ld(t,s,i))),t=t.return}return r}function wl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zR(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=td(n,s),l!=null&&o.unshift(ld(n,l,a))):i||(l=td(n,s),l!=null&&o.push(ld(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Y4=/\r\n?/g,J4=/\u0000|\uFFFD/g;function WR(t){return(typeof t=="string"?t:""+t).replace(Y4,`
`).replace(J4,"")}function ip(t,e,n){if(e=WR(e),WR(t)!==e&&n)throw Error(W(425))}function Wm(){}var Fw=null,Bw=null;function jw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uw=typeof setTimeout=="function"?setTimeout:void 0,Z4=typeof clearTimeout=="function"?clearTimeout:void 0,HR=typeof Promise=="function"?Promise:void 0,e$=typeof queueMicrotask=="function"?queueMicrotask:typeof HR<"u"?function(t){return HR.resolve(null).then(t).catch(t$)}:Uw;function t$(t){setTimeout(function(){throw t})}function zv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),id(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);id(e)}function io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function KR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),ri="__reactFiber$"+Xu,ud="__reactProps$"+Xu,Xi="__reactContainer$"+Xu,$w="__reactEvents$"+Xu,n$="__reactListeners$"+Xu,r$="__reactHandles$"+Xu;function da(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xi]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=KR(t);t!==null;){if(n=t[ri])return n;t=KR(t)}return e}t=n,n=t.parentNode}return null}function Xd(t){return t=t[ri]||t[Xi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function fy(t){return t[ud]||null}var zw=[],Kl=-1;function Ro(t){return{current:t}}function Xe(t){0>Kl||(t.current=zw[Kl],zw[Kl]=null,Kl--)}function We(t,e){Kl++,zw[Kl]=t.current,t.current=e}var go={},un=Ro(go),Pn=Ro(!1),Oa=go;function wu(t,e){var n=t.type.contextTypes;if(!n)return go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kn(t){return t=t.childContextTypes,t!=null}function Hm(){Xe(Pn),Xe(un)}function qR(t,e,n){if(un.current!==go)throw Error(W(168));We(un,e),We(Pn,n)}function zD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,UU(t)||"Unknown",i));return ot({},n,r)}function Km(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||go,Oa=un.current,We(un,t),We(Pn,Pn.current),!0}function GR(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=zD(t,e,Oa),r.__reactInternalMemoizedMergedChildContext=t,Xe(Pn),Xe(un),We(un,t)):Xe(Pn),We(Pn,n)}var Vi=null,py=!1,Wv=!1;function WD(t){Vi===null?Vi=[t]:Vi.push(t)}function i$(t){py=!0,WD(t)}function Co(){if(!Wv&&Vi!==null){Wv=!0;var t=0,e=Ve;try{var n=Vi;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vi=null,py=!1}catch(i){throw Vi!==null&&(Vi=Vi.slice(t+1)),mD(gE,Co),i}finally{Ve=e,Wv=!1}}return null}var ql=[],Gl=0,qm=null,Gm=0,ar=[],lr=0,Ma=null,Fi=1,Bi="";function ea(t,e){ql[Gl++]=Gm,ql[Gl++]=qm,qm=t,Gm=e}function HD(t,e,n){ar[lr++]=Fi,ar[lr++]=Bi,ar[lr++]=Ma,Ma=t;var r=Fi;t=Bi;var i=32-Fr(r)-1;r&=~(1<<i),n+=1;var s=32-Fr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fi=1<<32-Fr(e)+i|n<<i|r,Bi=s+t}else Fi=1<<s|n<<i|r,Bi=t}function IE(t){t.return!==null&&(ea(t,1),HD(t,1,0))}function RE(t){for(;t===qm;)qm=ql[--Gl],ql[Gl]=null,Gm=ql[--Gl],ql[Gl]=null;for(;t===Ma;)Ma=ar[--lr],ar[lr]=null,Bi=ar[--lr],ar[lr]=null,Fi=ar[--lr],ar[lr]=null}var Xn=null,Kn=null,Je=!1,Nr=null;function KD(t,e){var n=cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function XR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ma!==null?{id:Fi,overflow:Bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Kn=null,!0):!1;default:return!1}}function Ww(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hw(t){if(Je){var e=Kn;if(e){var n=e;if(!XR(t,e)){if(Ww(t))throw Error(W(418));e=io(n.nextSibling);var r=Xn;e&&XR(t,e)?KD(r,n):(t.flags=t.flags&-4097|2,Je=!1,Xn=t)}}else{if(Ww(t))throw Error(W(418));t.flags=t.flags&-4097|2,Je=!1,Xn=t}}}function QR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function sp(t){if(t!==Xn)return!1;if(!Je)return QR(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jw(t.type,t.memoizedProps)),e&&(e=Kn)){if(Ww(t))throw qD(),Error(W(418));for(;e;)KD(t,e),e=io(e.nextSibling)}if(QR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kn=io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kn=null}}else Kn=Xn?io(t.stateNode.nextSibling):null;return!0}function qD(){for(var t=Kn;t;)t=io(t.nextSibling)}function Su(){Kn=Xn=null,Je=!1}function CE(t){Nr===null?Nr=[t]:Nr.push(t)}var s$=ss.ReactCurrentBatchConfig;function Bc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function op(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function YR(t){var e=t._init;return e(t._payload)}function GD(t){function e(_,y){if(t){var v=_.deletions;v===null?(_.deletions=[y],_.flags|=16):v.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=lo(_,y),_.index=0,_.sibling=null,_}function s(_,y,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<y?(_.flags|=2,y):v):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,v,C){return y===null||y.tag!==6?(y=Yv(v,_.mode,C),y.return=_,y):(y=i(y,v),y.return=_,y)}function l(_,y,v,C){var D=v.type;return D===Ul?c(_,y,v.props.children,C,v.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Us&&YR(D)===y.type)?(C=i(y,v.props),C.ref=Bc(_,y,v),C.return=_,C):(C=Jp(v.type,v.key,v.props,null,_.mode,C),C.ref=Bc(_,y,v),C.return=_,C)}function u(_,y,v,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Jv(v,_.mode,C),y.return=_,y):(y=i(y,v.children||[]),y.return=_,y)}function c(_,y,v,C,D){return y===null||y.tag!==7?(y=ba(v,_.mode,C,D),y.return=_,y):(y=i(y,v),y.return=_,y)}function d(_,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yv(""+y,_.mode,v),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xf:return v=Jp(y.type,y.key,y.props,null,_.mode,v),v.ref=Bc(_,null,y),v.return=_,v;case jl:return y=Jv(y,_.mode,v),y.return=_,y;case Us:var C=y._init;return d(_,C(y._payload),v)}if(th(y)||Mc(y))return y=ba(y,_.mode,v,null),y.return=_,y;op(_,y)}return null}function f(_,y,v,C){var D=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:a(_,y,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xf:return v.key===D?l(_,y,v,C):null;case jl:return v.key===D?u(_,y,v,C):null;case Us:return D=v._init,f(_,y,D(v._payload),C)}if(th(v)||Mc(v))return D!==null?null:c(_,y,v,C,null);op(_,v)}return null}function p(_,y,v,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(v)||null,a(y,_,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xf:return _=_.get(C.key===null?v:C.key)||null,l(y,_,C,D);case jl:return _=_.get(C.key===null?v:C.key)||null,u(y,_,C,D);case Us:var O=C._init;return p(_,y,v,O(C._payload),D)}if(th(C)||Mc(C))return _=_.get(v)||null,c(y,_,C,D,null);op(y,C)}return null}function g(_,y,v,C){for(var D=null,O=null,b=y,E=y=0,R=null;b!==null&&E<v.length;E++){b.index>E?(R=b,b=null):R=b.sibling;var x=f(_,b,v[E],C);if(x===null){b===null&&(b=R);break}t&&b&&x.alternate===null&&e(_,b),y=s(x,y,E),O===null?D=x:O.sibling=x,O=x,b=R}if(E===v.length)return n(_,b),Je&&ea(_,E),D;if(b===null){for(;E<v.length;E++)b=d(_,v[E],C),b!==null&&(y=s(b,y,E),O===null?D=b:O.sibling=b,O=b);return Je&&ea(_,E),D}for(b=r(_,b);E<v.length;E++)R=p(b,_,E,v[E],C),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?E:R.key),y=s(R,y,E),O===null?D=R:O.sibling=R,O=R);return t&&b.forEach(function(P){return e(_,P)}),Je&&ea(_,E),D}function S(_,y,v,C){var D=Mc(v);if(typeof D!="function")throw Error(W(150));if(v=D.call(v),v==null)throw Error(W(151));for(var O=D=null,b=y,E=y=0,R=null,x=v.next();b!==null&&!x.done;E++,x=v.next()){b.index>E?(R=b,b=null):R=b.sibling;var P=f(_,b,x.value,C);if(P===null){b===null&&(b=R);break}t&&b&&P.alternate===null&&e(_,b),y=s(P,y,E),O===null?D=P:O.sibling=P,O=P,b=R}if(x.done)return n(_,b),Je&&ea(_,E),D;if(b===null){for(;!x.done;E++,x=v.next())x=d(_,x.value,C),x!==null&&(y=s(x,y,E),O===null?D=x:O.sibling=x,O=x);return Je&&ea(_,E),D}for(b=r(_,b);!x.done;E++,x=v.next())x=p(b,_,E,x.value,C),x!==null&&(t&&x.alternate!==null&&b.delete(x.key===null?E:x.key),y=s(x,y,E),O===null?D=x:O.sibling=x,O=x);return t&&b.forEach(function(N){return e(_,N)}),Je&&ea(_,E),D}function T(_,y,v,C){if(typeof v=="object"&&v!==null&&v.type===Ul&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Xf:e:{for(var D=v.key,O=y;O!==null;){if(O.key===D){if(D=v.type,D===Ul){if(O.tag===7){n(_,O.sibling),y=i(O,v.props.children),y.return=_,_=y;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Us&&YR(D)===O.type){n(_,O.sibling),y=i(O,v.props),y.ref=Bc(_,O,v),y.return=_,_=y;break e}n(_,O);break}else e(_,O);O=O.sibling}v.type===Ul?(y=ba(v.props.children,_.mode,C,v.key),y.return=_,_=y):(C=Jp(v.type,v.key,v.props,null,_.mode,C),C.ref=Bc(_,y,v),C.return=_,_=C)}return o(_);case jl:e:{for(O=v.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(_,y.sibling),y=i(y,v.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Jv(v,_.mode,C),y.return=_,_=y}return o(_);case Us:return O=v._init,T(_,y,O(v._payload),C)}if(th(v))return g(_,y,v,C);if(Mc(v))return S(_,y,v,C);op(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,v),y.return=_,_=y):(n(_,y),y=Yv(v,_.mode,C),y.return=_,_=y),o(_)):n(_,y)}return T}var Eu=GD(!0),XD=GD(!1),Xm=Ro(null),Qm=null,Xl=null,xE=null;function AE(){xE=Xl=Qm=null}function PE(t){var e=Xm.current;Xe(Xm),t._currentValue=e}function Kw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cu(t,e){Qm=t,xE=Xl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function yr(t){var e=t._currentValue;if(xE!==t)if(t={context:t,memoizedValue:e,next:null},Xl===null){if(Qm===null)throw Error(W(308));Xl=t,Qm.dependencies={lanes:0,firstContext:t}}else Xl=Xl.next=t;return e}var fa=null;function kE(t){fa===null?fa=[t]:fa.push(t)}function QD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kE(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qi(t,r)}function Qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $s=!1;function DE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function so(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qi(t,n)}return i=r.interleaved,i===null?(e.next=e,kE(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qi(t,n)}function Kp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yE(t,n)}}function JR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ym(t,e,n,r){var i=t.updateQueue;$s=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,S=a;switch(f=e,p=n,S.tag){case 1:if(g=S.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=ot({},d,f);break e;case 2:$s=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);La|=o,t.lanes=o,t.memoizedState=d}}function ZR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Qd={},fi=Ro(Qd),cd=Ro(Qd),hd=Ro(Qd);function pa(t){if(t===Qd)throw Error(W(174));return t}function OE(t,e){switch(We(hd,e),We(cd,t),We(fi,Qd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rw(e,t)}Xe(fi),We(fi,e)}function Tu(){Xe(fi),Xe(cd),Xe(hd)}function JD(t){pa(hd.current);var e=pa(fi.current),n=Rw(e,t.type);e!==n&&(We(cd,t),We(fi,n))}function ME(t){cd.current===t&&(Xe(fi),Xe(cd))}var tt=Ro(0);function Jm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hv=[];function NE(){for(var t=0;t<Hv.length;t++)Hv[t]._workInProgressVersionPrimary=null;Hv.length=0}var qp=ss.ReactCurrentDispatcher,Kv=ss.ReactCurrentBatchConfig,Na=0,it=null,Pt=null,Ut=null,Zm=!1,Rh=!1,dd=0,o$=0;function Jt(){throw Error(W(321))}function LE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function VE(t,e,n,r,i,s){if(Na=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qp.current=t===null||t.memoizedState===null?c$:h$,t=n(r,i),Rh){s=0;do{if(Rh=!1,dd=0,25<=s)throw Error(W(301));s+=1,Ut=Pt=null,e.updateQueue=null,qp.current=d$,t=n(r,i)}while(Rh)}if(qp.current=eg,e=Pt!==null&&Pt.next!==null,Na=0,Ut=Pt=it=null,Zm=!1,e)throw Error(W(300));return t}function FE(){var t=dd!==0;return dd=0,t}function Zr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?it.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function vr(){if(Pt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Pt.next;var e=Ut===null?it.memoizedState:Ut.next;if(e!==null)Ut=e,Pt=t;else{if(t===null)throw Error(W(310));Pt=t,t={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Ut===null?it.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function fd(t,e){return typeof e=="function"?e(t):e}function qv(t){var e=vr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Na&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,it.lanes|=c,La|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,jr(r,e.memoizedState)||(Rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,La|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gv(t){var e=vr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jr(s,e.memoizedState)||(Rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ZD(){}function eO(t,e){var n=it,r=vr(),i=e(),s=!jr(r.memoizedState,i);if(s&&(r.memoizedState=i,Rn=!0),r=r.queue,BE(rO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,pd(9,nO.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(W(349));Na&30||tO(n,e,i)}return i}function tO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nO(t,e,n,r){e.value=n,e.getSnapshot=r,iO(e)&&sO(t)}function rO(t,e,n){return n(function(){iO(e)&&sO(t)})}function iO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jr(t,n)}catch{return!0}}function sO(t){var e=Qi(t,1);e!==null&&Br(e,t,1,-1)}function eC(t){var e=Zr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:t},e.queue=t,t=t.dispatch=u$.bind(null,it,t),[e.memoizedState,t]}function pd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function oO(){return vr().memoizedState}function Gp(t,e,n,r){var i=Zr();it.flags|=t,i.memoizedState=pd(1|e,n,void 0,r===void 0?null:r)}function my(t,e,n,r){var i=vr();r=r===void 0?null:r;var s=void 0;if(Pt!==null){var o=Pt.memoizedState;if(s=o.destroy,r!==null&&LE(r,o.deps)){i.memoizedState=pd(e,n,s,r);return}}it.flags|=t,i.memoizedState=pd(1|e,n,s,r)}function tC(t,e){return Gp(8390656,8,t,e)}function BE(t,e){return my(2048,8,t,e)}function aO(t,e){return my(4,2,t,e)}function lO(t,e){return my(4,4,t,e)}function uO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cO(t,e,n){return n=n!=null?n.concat([t]):null,my(4,4,uO.bind(null,e,t),n)}function jE(){}function hO(t,e){var n=vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dO(t,e){var n=vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fO(t,e,n){return Na&21?(jr(n,e)||(n=vD(),it.lanes|=n,La|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=n)}function a$(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Kv.transition;Kv.transition={};try{t(!1),e()}finally{Ve=n,Kv.transition=r}}function pO(){return vr().memoizedState}function l$(t,e,n){var r=ao(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mO(t))gO(e,n);else if(n=QD(t,e,n,r),n!==null){var i=vn();Br(n,t,r,i),yO(n,e,r)}}function u$(t,e,n){var r=ao(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mO(t))gO(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,jr(a,o)){var l=e.interleaved;l===null?(i.next=i,kE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=QD(t,e,i,r),n!==null&&(i=vn(),Br(n,t,r,i),yO(n,e,r))}}function mO(t){var e=t.alternate;return t===it||e!==null&&e===it}function gO(t,e){Rh=Zm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yE(t,n)}}var eg={readContext:yr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},c$={readContext:yr,useCallback:function(t,e){return Zr().memoizedState=[t,e===void 0?null:e],t},useContext:yr,useEffect:tC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gp(4194308,4,uO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gp(4,2,t,e)},useMemo:function(t,e){var n=Zr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=l$.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Zr();return t={current:t},e.memoizedState=t},useState:eC,useDebugValue:jE,useDeferredValue:function(t){return Zr().memoizedState=t},useTransition:function(){var t=eC(!1),e=t[0];return t=a$.bind(null,t[1]),Zr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Zr();if(Je){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),$t===null)throw Error(W(349));Na&30||tO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,tC(rO.bind(null,r,s,t),[t]),r.flags|=2048,pd(9,nO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zr(),e=$t.identifierPrefix;if(Je){var n=Bi,r=Fi;n=(r&~(1<<32-Fr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=o$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},h$={readContext:yr,useCallback:hO,useContext:yr,useEffect:BE,useImperativeHandle:cO,useInsertionEffect:aO,useLayoutEffect:lO,useMemo:dO,useReducer:qv,useRef:oO,useState:function(){return qv(fd)},useDebugValue:jE,useDeferredValue:function(t){var e=vr();return fO(e,Pt.memoizedState,t)},useTransition:function(){var t=qv(fd)[0],e=vr().memoizedState;return[t,e]},useMutableSource:ZD,useSyncExternalStore:eO,useId:pO,unstable_isNewReconciler:!1},d$={readContext:yr,useCallback:hO,useContext:yr,useEffect:BE,useImperativeHandle:cO,useInsertionEffect:aO,useLayoutEffect:lO,useMemo:dO,useReducer:Gv,useRef:oO,useState:function(){return Gv(fd)},useDebugValue:jE,useDeferredValue:function(t){var e=vr();return Pt===null?e.memoizedState=t:fO(e,Pt.memoizedState,t)},useTransition:function(){var t=Gv(fd)[0],e=vr().memoizedState;return[t,e]},useMutableSource:ZD,useSyncExternalStore:eO,useId:pO,unstable_isNewReconciler:!1};function kr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gy={isMounted:function(t){return(t=t._reactInternals)?Ja(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),i=ao(t),s=Wi(r,i);s.payload=e,n!=null&&(s.callback=n),e=so(t,s,i),e!==null&&(Br(e,t,i,r),Kp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),i=ao(t),s=Wi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=so(t,s,i),e!==null&&(Br(e,t,i,r),Kp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=ao(t),i=Wi(n,r);i.tag=2,e!=null&&(i.callback=e),e=so(t,i,r),e!==null&&(Br(e,t,r,n),Kp(e,t,r))}};function nC(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!od(n,r)||!od(i,s):!0}function vO(t,e,n){var r=!1,i=go,s=e.contextType;return typeof s=="object"&&s!==null?s=yr(s):(i=kn(e)?Oa:un.current,r=e.contextTypes,s=(r=r!=null)?wu(t,i):go),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function rC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gy.enqueueReplaceState(e,e.state,null)}function Gw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},DE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yr(s):(s=kn(e)?Oa:un.current,i.context=wu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gy.enqueueReplaceState(i,i.state,null),Ym(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bu(t,e){try{var n="",r=e;do n+=jU(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Xv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f$=typeof WeakMap=="function"?WeakMap:Map;function _O(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ng||(ng=!0,sS=r),Xw(t,e)},n}function wO(t,e,n){n=Wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xw(t,e),typeof r!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=C$.bind(null,t,e,n),e.then(t,t))}function sC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,so(n,e,1))),n.lanes|=1),t)}var p$=ss.ReactCurrentOwner,Rn=!1;function mn(t,e,n,r){e.child=t===null?XD(e,null,n,r):Eu(e,t.child,n,r)}function aC(t,e,n,r,i){n=n.render;var s=e.ref;return cu(e,i),r=VE(t,e,n,r,s,i),n=FE(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(Je&&n&&IE(e),e.flags|=1,mn(t,e,r,i),e.child)}function lC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!GE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,SO(t,e,s,r,i)):(t=Jp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:od,n(o,r)&&t.ref===e.ref)return Yi(t,e,i)}return e.flags|=1,t=lo(s,r),t.ref=e.ref,t.return=e,e.child=t}function SO(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(od(s,r)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,Yi(t,e,i)}return Qw(t,e,n,r,i)}function EO(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Yl,$n),$n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(Yl,$n),$n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(Yl,$n),$n|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,We(Yl,$n),$n|=r;return mn(t,e,i,n),e.child}function TO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qw(t,e,n,r,i){var s=kn(n)?Oa:un.current;return s=wu(e,s),cu(e,i),n=VE(t,e,n,r,s,i),r=FE(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(Je&&r&&IE(e),e.flags|=1,mn(t,e,n,i),e.child)}function uC(t,e,n,r,i){if(kn(n)){var s=!0;Km(e)}else s=!1;if(cu(e,i),e.stateNode===null)Xp(t,e),vO(e,n,r),Gw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=yr(u):(u=kn(n)?Oa:un.current,u=wu(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&rC(e,o,r,u),$s=!1;var f=e.memoizedState;o.state=f,Ym(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Pn.current||$s?(typeof c=="function"&&(qw(e,n,c,r),l=e.memoizedState),(a=$s||nC(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,YD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:kr(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yr(l):(l=kn(n)?Oa:un.current,l=wu(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&rC(e,o,r,l),$s=!1,f=e.memoizedState,o.state=f,Ym(e,r,o,i);var g=e.memoizedState;a!==d||f!==g||Pn.current||$s?(typeof p=="function"&&(qw(e,n,p,r),g=e.memoizedState),(u=$s||nC(e,n,u,r,f,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Yw(t,e,n,r,s,i)}function Yw(t,e,n,r,i,s){TO(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&GR(e,n,!1),Yi(t,e,s);r=e.stateNode,p$.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Eu(e,t.child,null,s),e.child=Eu(e,null,a,s)):mn(t,e,a,s),e.memoizedState=r.state,i&&GR(e,n,!0),e.child}function bO(t){var e=t.stateNode;e.pendingContext?qR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qR(t,e.context,!1),OE(t,e.containerInfo)}function cC(t,e,n,r,i){return Su(),CE(i),e.flags|=256,mn(t,e,n,r),e.child}var Jw={dehydrated:null,treeContext:null,retryLane:0};function Zw(t){return{baseLanes:t,cachePool:null,transitions:null}}function IO(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),We(tt,i&1),t===null)return Hw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=_y(o,r,0,null),t=ba(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zw(n),e.memoizedState=Jw,t):UE(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return m$(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=lo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=lo(a,s):(s=ba(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Zw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jw,r}return s=t.child,t=s.sibling,r=lo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function UE(t,e){return e=_y({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ap(t,e,n,r){return r!==null&&CE(r),Eu(e,t.child,null,n),t=UE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m$(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Xv(Error(W(422))),ap(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=_y({mode:"visible",children:r.children},i,0,null),s=ba(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Eu(e,t.child,null,o),e.child.memoizedState=Zw(o),e.memoizedState=Jw,s);if(!(e.mode&1))return ap(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Xv(s,r,void 0),ap(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rn||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qi(t,i),Br(r,t,i,-1))}return qE(),r=Xv(Error(W(421))),ap(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=x$.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kn=io(i.nextSibling),Xn=e,Je=!0,Nr=null,t!==null&&(ar[lr++]=Fi,ar[lr++]=Bi,ar[lr++]=Ma,Fi=t.id,Bi=t.overflow,Ma=e),e=UE(e,r.children),e.flags|=4096,e)}function hC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kw(t.return,e,n)}function Qv(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function RO(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hC(t,n,e);else if(t.tag===19)hC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qv(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qv(e,!0,n,null,s);break;case"together":Qv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),La|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=lo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g$(t,e,n){switch(e.tag){case 3:bO(e),Su();break;case 5:JD(e);break;case 1:kn(e.type)&&Km(e);break;case 4:OE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;We(Xm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?IO(t,e,n):(We(tt,tt.current&1),t=Yi(t,e,n),t!==null?t.sibling:null);We(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,EO(t,e,n)}return Yi(t,e,n)}var CO,eS,xO,AO;CO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eS=function(){};xO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pa(fi.current);var s=null;switch(n){case"input":i=Ew(t,i),r=Ew(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=Iw(t,i),r=Iw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wm)}Cw(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ge("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};AO=function(t,e,n,r){n!==r&&(e.flags|=4)};function jc(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y$(t,e,n){var r=e.pendingProps;switch(RE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return kn(e.type)&&Hm(),Zt(e),null;case 3:return r=e.stateNode,Tu(),Xe(Pn),Xe(un),NE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nr!==null&&(lS(Nr),Nr=null))),eS(t,e),Zt(e),null;case 5:ME(e);var i=pa(hd.current);if(n=e.type,t!==null&&e.stateNode!=null)xO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Zt(e),null}if(t=pa(fi.current),sp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ri]=e,r[ud]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<rh.length;i++)Ge(rh[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":wR(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":ER(r,s),Ge("invalid",r)}Cw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ip(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ip(r.textContent,a,t),i=["children",""+a]):Zh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Qf(r),SR(r,s,!0);break;case"textarea":Qf(r),TR(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Wm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ri]=e,t[ud]=r,CO(t,e,!1,!1),e.stateNode=t;e:{switch(o=xw(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<rh.length;i++)Ge(rh[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":wR(t,r),i=Ew(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":ER(t,r),i=Iw(t,r),Ge("invalid",t);break;default:i=r}Cw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?oD(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iD(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ed(t,l):typeof l=="number"&&ed(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",t):l!=null&&hE(t,s,l,o))}switch(n){case"input":Qf(t),SR(t,r,!1);break;case"textarea":Qf(t),TR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ou(t,!!r.multiple,s,!1):r.defaultValue!=null&&ou(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Wm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)AO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=pa(hd.current),pa(fi.current),sp(e)){if(r=e.stateNode,n=e.memoizedProps,r[ri]=e,(s=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:ip(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ip(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ri]=e,e.stateNode=r}return Zt(e),null;case 13:if(Xe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&Kn!==null&&e.mode&1&&!(e.flags&128))qD(),Su(),e.flags|=98560,s=!1;else if(s=sp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[ri]=e}else Su(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else Nr!==null&&(lS(Nr),Nr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?kt===0&&(kt=3):qE())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Tu(),eS(t,e),t===null&&ad(e.stateNode.containerInfo),Zt(e),null;case 10:return PE(e.type._context),Zt(e),null;case 17:return kn(e.type)&&Hm(),Zt(e),null;case 19:if(Xe(tt),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)jc(s,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jm(t),o!==null){for(e.flags|=128,jc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&vt()>Iu&&(e.flags|=128,r=!0,jc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Je)return Zt(e),null}else 2*vt()-s.renderingStartTime>Iu&&n!==1073741824&&(e.flags|=128,r=!0,jc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,n=tt.current,We(tt,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return KE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$n&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function v$(t,e){switch(RE(e),e.tag){case 1:return kn(e.type)&&Hm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tu(),Xe(Pn),Xe(un),NE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ME(e),null;case 13:if(Xe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Su()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(tt),null;case 4:return Tu(),null;case 10:return PE(e.type._context),null;case 22:case 23:return KE(),null;case 24:return null;default:return null}}var lp=!1,sn=!1,_$=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ql(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function tS(t,e,n){try{n()}catch(r){ht(t,e,r)}}var dC=!1;function w$(t,e){if(Fw=Um,t=MD(),bE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bw={focusedElem:t,selectionRange:n},Um=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var S=g.memoizedProps,T=g.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?S:kr(e.type,S),T);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(C){ht(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return g=dC,dC=!1,g}function Ch(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tS(e,n,s)}i=i.next}while(i!==r)}}function yy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PO(t){var e=t.alternate;e!==null&&(t.alternate=null,PO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[ud],delete e[$w],delete e[n$],delete e[r$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kO(t){return t.tag===5||t.tag===3||t.tag===4}function fC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wm));else if(r!==4&&(t=t.child,t!==null))for(rS(t,e,n),t=t.sibling;t!==null;)rS(t,e,n),t=t.sibling}function iS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(iS(t,e,n),t=t.sibling;t!==null;)iS(t,e,n),t=t.sibling}var Wt=null,Or=!1;function As(t,e,n){for(n=n.child;n!==null;)DO(t,e,n),n=n.sibling}function DO(t,e,n){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(uy,n)}catch{}switch(n.tag){case 5:sn||Ql(n,e);case 6:var r=Wt,i=Or;Wt=null,As(t,e,n),Wt=r,Or=i,Wt!==null&&(Or?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(Or?(t=Wt,n=n.stateNode,t.nodeType===8?zv(t.parentNode,n):t.nodeType===1&&zv(t,n),id(t)):zv(Wt,n.stateNode));break;case 4:r=Wt,i=Or,Wt=n.stateNode.containerInfo,Or=!0,As(t,e,n),Wt=r,Or=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tS(n,e,o),i=i.next}while(i!==r)}As(t,e,n);break;case 1:if(!sn&&(Ql(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}As(t,e,n);break;case 21:As(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,As(t,e,n),sn=r):As(t,e,n);break;default:As(t,e,n)}}function pC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _$),e.forEach(function(r){var i=A$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ir(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wt=a.stateNode,Or=!1;break e;case 3:Wt=a.stateNode.containerInfo,Or=!0;break e;case 4:Wt=a.stateNode.containerInfo,Or=!0;break e}a=a.return}if(Wt===null)throw Error(W(160));DO(s,o,i),Wt=null,Or=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ht(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OO(e,t),e=e.sibling}function OO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ir(e,t),Qr(t),r&4){try{Ch(3,t,t.return),yy(3,t)}catch(S){ht(t,t.return,S)}try{Ch(5,t,t.return)}catch(S){ht(t,t.return,S)}}break;case 1:Ir(e,t),Qr(t),r&512&&n!==null&&Ql(n,n.return);break;case 5:if(Ir(e,t),Qr(t),r&512&&n!==null&&Ql(n,n.return),t.flags&32){var i=t.stateNode;try{ed(i,"")}catch(S){ht(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tD(i,s),xw(a,o);var u=xw(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?oD(i,d):c==="dangerouslySetInnerHTML"?iD(i,d):c==="children"?ed(i,d):hE(i,c,d,u)}switch(a){case"input":Tw(i,s);break;case"textarea":nD(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ou(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?ou(i,!!s.multiple,s.defaultValue,!0):ou(i,!!s.multiple,s.multiple?[]:"",!1))}i[ud]=s}catch(S){ht(t,t.return,S)}}break;case 6:if(Ir(e,t),Qr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){ht(t,t.return,S)}}break;case 3:if(Ir(e,t),Qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{id(e.containerInfo)}catch(S){ht(t,t.return,S)}break;case 4:Ir(e,t),Qr(t);break;case 13:Ir(e,t),Qr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(WE=vt())),r&4&&pC(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(u=sn)||c,Ir(e,t),sn=u):Ir(e,t),Qr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(J=t,c=t.child;c!==null;){for(d=J=c;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ch(4,f,f.return);break;case 1:Ql(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(S){ht(r,n,S)}}break;case 5:Ql(f,f.return);break;case 22:if(f.memoizedState!==null){gC(d);continue}}p!==null?(p.return=f,J=p):gC(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sD("display",o))}catch(S){ht(t,t.return,S)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){ht(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ir(e,t),Qr(t),r&4&&pC(t);break;case 21:break;default:Ir(e,t),Qr(t)}}function Qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kO(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ed(i,""),r.flags&=-33);var s=fC(t);iS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fC(t);rS(t,a,o);break;default:throw Error(W(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S$(t,e,n){J=t,MO(t)}function MO(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||lp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||sn;a=lp;var u=sn;if(lp=o,(sn=l)&&!u)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?yC(i):l!==null?(l.return=o,J=l):yC(i);for(;s!==null;)J=s,MO(s),s=s.sibling;J=i,lp=a,sn=u}mC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):mC(t)}}function mC(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||yy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ZR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ZR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&id(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}sn||e.flags&512&&nS(e)}catch(f){ht(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function gC(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function yC(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yy(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ht(e,i,l)}}var s=e.return;try{nS(e)}catch(l){ht(e,s,l)}break;case 5:var o=e.return;try{nS(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var E$=Math.ceil,tg=ss.ReactCurrentDispatcher,$E=ss.ReactCurrentOwner,fr=ss.ReactCurrentBatchConfig,xe=0,$t=null,Tt=null,Xt=0,$n=0,Yl=Ro(0),kt=0,md=null,La=0,vy=0,zE=0,xh=null,In=null,WE=0,Iu=1/0,Ni=null,ng=!1,sS=null,oo=null,up=!1,Zs=null,rg=0,Ah=0,oS=null,Qp=-1,Yp=0;function vn(){return xe&6?vt():Qp!==-1?Qp:Qp=vt()}function ao(t){return t.mode&1?xe&2&&Xt!==0?Xt&-Xt:s$.transition!==null?(Yp===0&&(Yp=vD()),Yp):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:ID(t.type)),t):1}function Br(t,e,n,r){if(50<Ah)throw Ah=0,oS=null,Error(W(185));qd(t,n,r),(!(xe&2)||t!==$t)&&(t===$t&&(!(xe&2)&&(vy|=n),kt===4&&Hs(t,Xt)),Dn(t,r),n===1&&xe===0&&!(e.mode&1)&&(Iu=vt()+500,py&&Co()))}function Dn(t,e){var n=t.callbackNode;s4(t,e);var r=jm(t,t===$t?Xt:0);if(r===0)n!==null&&RR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&RR(n),e===1)t.tag===0?i$(vC.bind(null,t)):WD(vC.bind(null,t)),e$(function(){!(xe&6)&&Co()}),n=null;else{switch(_D(r)){case 1:n=gE;break;case 4:n=gD;break;case 16:n=Bm;break;case 536870912:n=yD;break;default:n=Bm}n=$O(n,NO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NO(t,e){if(Qp=-1,Yp=0,xe&6)throw Error(W(327));var n=t.callbackNode;if(hu()&&t.callbackNode!==n)return null;var r=jm(t,t===$t?Xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ig(t,r);else{e=r;var i=xe;xe|=2;var s=VO();($t!==t||Xt!==e)&&(Ni=null,Iu=vt()+500,Ta(t,e));do try{I$();break}catch(a){LO(t,a)}while(!0);AE(),tg.current=s,xe=i,Tt!==null?e=0:($t=null,Xt=0,e=kt)}if(e!==0){if(e===2&&(i=Ow(t),i!==0&&(r=i,e=aS(t,i))),e===1)throw n=md,Ta(t,0),Hs(t,r),Dn(t,vt()),n;if(e===6)Hs(t,r);else{if(i=t.current.alternate,!(r&30)&&!T$(i)&&(e=ig(t,r),e===2&&(s=Ow(t),s!==0&&(r=s,e=aS(t,s))),e===1))throw n=md,Ta(t,0),Hs(t,r),Dn(t,vt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ta(t,In,Ni);break;case 3:if(Hs(t,r),(r&130023424)===r&&(e=WE+500-vt(),10<e)){if(jm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Uw(ta.bind(null,t,In,Ni),e);break}ta(t,In,Ni);break;case 4:if(Hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*E$(r/1960))-r,10<r){t.timeoutHandle=Uw(ta.bind(null,t,In,Ni),r);break}ta(t,In,Ni);break;case 5:ta(t,In,Ni);break;default:throw Error(W(329))}}}return Dn(t,vt()),t.callbackNode===n?NO.bind(null,t):null}function aS(t,e){var n=xh;return t.current.memoizedState.isDehydrated&&(Ta(t,e).flags|=256),t=ig(t,e),t!==2&&(e=In,In=n,e!==null&&lS(e)),t}function lS(t){In===null?In=t:In.push.apply(In,t)}function T$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hs(t,e){for(e&=~zE,e&=~vy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fr(e),r=1<<n;t[n]=-1,e&=~r}}function vC(t){if(xe&6)throw Error(W(327));hu();var e=jm(t,0);if(!(e&1))return Dn(t,vt()),null;var n=ig(t,e);if(t.tag!==0&&n===2){var r=Ow(t);r!==0&&(e=r,n=aS(t,r))}if(n===1)throw n=md,Ta(t,0),Hs(t,e),Dn(t,vt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ta(t,In,Ni),Dn(t,vt()),null}function HE(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Iu=vt()+500,py&&Co())}}function Va(t){Zs!==null&&Zs.tag===0&&!(xe&6)&&hu();var e=xe;xe|=1;var n=fr.transition,r=Ve;try{if(fr.transition=null,Ve=1,t)return t()}finally{Ve=r,fr.transition=n,xe=e,!(xe&6)&&Co()}}function KE(){$n=Yl.current,Xe(Yl)}function Ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z4(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(RE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hm();break;case 3:Tu(),Xe(Pn),Xe(un),NE();break;case 5:ME(r);break;case 4:Tu();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:PE(r.type._context);break;case 22:case 23:KE()}n=n.return}if($t=t,Tt=t=lo(t.current,null),Xt=$n=e,kt=0,md=null,zE=vy=La=0,In=xh=null,fa!==null){for(e=0;e<fa.length;e++)if(n=fa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}fa=null}return t}function LO(t,e){do{var n=Tt;try{if(AE(),qp.current=eg,Zm){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Zm=!1}if(Na=0,Ut=Pt=it=null,Rh=!1,dd=0,$E.current=null,n===null||n.return===null){kt=1,md=e,Tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=sC(o);if(p!==null){p.flags&=-257,oC(p,o,a,s,e),p.mode&1&&iC(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var S=new Set;S.add(l),e.updateQueue=S}else g.add(l);break e}else{if(!(e&1)){iC(s,u,e),qE();break e}l=Error(W(426))}}else if(Je&&a.mode&1){var T=sC(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),oC(T,o,a,s,e),CE(bu(l,a));break e}}s=l=bu(l,a),kt!==4&&(kt=2),xh===null?xh=[s]:xh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=_O(s,l,e);JR(s,_);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(oo===null||!oo.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=wO(s,a,e);JR(s,C);break e}}s=s.return}while(s!==null)}BO(n)}catch(D){e=D,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function VO(){var t=tg.current;return tg.current=eg,t===null?eg:t}function qE(){(kt===0||kt===3||kt===2)&&(kt=4),$t===null||!(La&268435455)&&!(vy&268435455)||Hs($t,Xt)}function ig(t,e){var n=xe;xe|=2;var r=VO();($t!==t||Xt!==e)&&(Ni=null,Ta(t,e));do try{b$();break}catch(i){LO(t,i)}while(!0);if(AE(),xe=n,tg.current=r,Tt!==null)throw Error(W(261));return $t=null,Xt=0,kt}function b$(){for(;Tt!==null;)FO(Tt)}function I$(){for(;Tt!==null&&!QU();)FO(Tt)}function FO(t){var e=UO(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?BO(t):Tt=e,$E.current=null}function BO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v$(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,Tt=null;return}}else if(n=y$(n,e,$n),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);kt===0&&(kt=5)}function ta(t,e,n){var r=Ve,i=fr.transition;try{fr.transition=null,Ve=1,R$(t,e,n,r)}finally{fr.transition=i,Ve=r}return null}function R$(t,e,n,r){do hu();while(Zs!==null);if(xe&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(o4(t,s),t===$t&&(Tt=$t=null,Xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||up||(up=!0,$O(Bm,function(){return hu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fr.transition,fr.transition=null;var o=Ve;Ve=1;var a=xe;xe|=4,$E.current=null,w$(t,n),OO(n,t),K4(Bw),Um=!!Fw,Bw=Fw=null,t.current=n,S$(n),YU(),xe=a,Ve=o,fr.transition=s}else t.current=n;if(up&&(up=!1,Zs=t,rg=i),s=t.pendingLanes,s===0&&(oo=null),e4(n.stateNode),Dn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ng)throw ng=!1,t=sS,sS=null,t;return rg&1&&t.tag!==0&&hu(),s=t.pendingLanes,s&1?t===oS?Ah++:(Ah=0,oS=t):Ah=0,Co(),null}function hu(){if(Zs!==null){var t=_D(rg),e=fr.transition,n=Ve;try{if(fr.transition=null,Ve=16>t?16:t,Zs===null)var r=!1;else{if(t=Zs,Zs=null,rg=0,xe&6)throw Error(W(331));var i=xe;for(xe|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:Ch(8,c,s)}var d=c.child;if(d!==null)d.return=c,J=d;else for(;J!==null;){c=J;var f=c.sibling,p=c.return;if(PO(c),c===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var g=s.alternate;if(g!==null){var S=g.child;if(S!==null){g.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ch(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,J=_;break e}J=s.return}}var y=t.current;for(J=y;J!==null;){o=J;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,J=v;else e:for(o=y;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yy(9,a)}}catch(D){ht(a,a.return,D)}if(a===o){J=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,J=C;break e}J=a.return}}if(xe=i,Co(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(uy,t)}catch{}r=!0}return r}finally{Ve=n,fr.transition=e}}return!1}function _C(t,e,n){e=bu(n,e),e=_O(t,e,1),t=so(t,e,1),e=vn(),t!==null&&(qd(t,1,e),Dn(t,e))}function ht(t,e,n){if(t.tag===3)_C(t,t,n);else for(;e!==null;){if(e.tag===3){_C(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oo===null||!oo.has(r))){t=bu(n,t),t=wO(e,t,1),e=so(e,t,1),t=vn(),e!==null&&(qd(e,1,t),Dn(e,t));break}}e=e.return}}function C$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Xt&n)===n&&(kt===4||kt===3&&(Xt&130023424)===Xt&&500>vt()-WE?Ta(t,0):zE|=n),Dn(t,e)}function jO(t,e){e===0&&(t.mode&1?(e=Zf,Zf<<=1,!(Zf&130023424)&&(Zf=4194304)):e=1);var n=vn();t=Qi(t,e),t!==null&&(qd(t,e,n),Dn(t,n))}function x$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jO(t,n)}function A$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),jO(t,n)}var UO;UO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rn=!1,g$(t,e,n);Rn=!!(t.flags&131072)}else Rn=!1,Je&&e.flags&1048576&&HD(e,Gm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xp(t,e),t=e.pendingProps;var i=wu(e,un.current);cu(e,n),i=VE(null,e,r,t,i,n);var s=FE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(s=!0,Km(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,DE(e),i.updater=gy,e.stateNode=i,i._reactInternals=e,Gw(e,r,t,n),e=Yw(null,e,r,!0,s,n)):(e.tag=0,Je&&s&&IE(e),mn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=k$(r),t=kr(r,t),i){case 0:e=Qw(null,e,r,t,n);break e;case 1:e=uC(null,e,r,t,n);break e;case 11:e=aC(null,e,r,t,n);break e;case 14:e=lC(null,e,r,kr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kr(r,i),Qw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kr(r,i),uC(t,e,r,i,n);case 3:e:{if(bO(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,YD(t,e),Ym(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bu(Error(W(423)),e),e=cC(t,e,r,n,i);break e}else if(r!==i){i=bu(Error(W(424)),e),e=cC(t,e,r,n,i);break e}else for(Kn=io(e.stateNode.containerInfo.firstChild),Xn=e,Je=!0,Nr=null,n=XD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Su(),r===i){e=Yi(t,e,n);break e}mn(t,e,r,n)}e=e.child}return e;case 5:return JD(e),t===null&&Hw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jw(r,i)?o=null:s!==null&&jw(r,s)&&(e.flags|=32),TO(t,e),mn(t,e,o,n),e.child;case 6:return t===null&&Hw(e),null;case 13:return IO(t,e,n);case 4:return OE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Eu(e,null,r,n):mn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kr(r,i),aC(t,e,r,i,n);case 7:return mn(t,e,e.pendingProps,n),e.child;case 8:return mn(t,e,e.pendingProps.children,n),e.child;case 12:return mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,We(Xm,r._currentValue),r._currentValue=o,s!==null)if(jr(s.value,o)){if(s.children===i.children&&!Pn.current){e=Yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Wi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Kw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Kw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,cu(e,n),i=yr(i),r=r(i),e.flags|=1,mn(t,e,r,n),e.child;case 14:return r=e.type,i=kr(r,e.pendingProps),i=kr(r.type,i),lC(t,e,r,i,n);case 15:return SO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kr(r,i),Xp(t,e),e.tag=1,kn(r)?(t=!0,Km(e)):t=!1,cu(e,n),vO(e,r,i),Gw(e,r,i,n),Yw(null,e,r,!0,t,n);case 19:return RO(t,e,n);case 22:return EO(t,e,n)}throw Error(W(156,e.tag))};function $O(t,e){return mD(t,e)}function P$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(t,e,n,r){return new P$(t,e,n,r)}function GE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function k$(t){if(typeof t=="function")return GE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fE)return 11;if(t===pE)return 14}return 2}function lo(t,e){var n=t.alternate;return n===null?(n=cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")GE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ul:return ba(n.children,i,s,e);case dE:o=8,i|=8;break;case vw:return t=cr(12,n,e,i|2),t.elementType=vw,t.lanes=s,t;case _w:return t=cr(13,n,e,i),t.elementType=_w,t.lanes=s,t;case ww:return t=cr(19,n,e,i),t.elementType=ww,t.lanes=s,t;case Jk:return _y(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qk:o=10;break e;case Yk:o=9;break e;case fE:o=11;break e;case pE:o=14;break e;case Us:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=cr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ba(t,e,n,r){return t=cr(7,t,r,e),t.lanes=n,t}function _y(t,e,n,r){return t=cr(22,t,r,e),t.elementType=Jk,t.lanes=n,t.stateNode={isHidden:!1},t}function Yv(t,e,n){return t=cr(6,t,null,e),t.lanes=n,t}function Jv(t,e,n){return e=cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dv(0),this.expirationTimes=Dv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function XE(t,e,n,r,i,s,o,a,l){return t=new D$(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},DE(s),t}function O$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zO(t){if(!t)return go;t=t._reactInternals;e:{if(Ja(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(kn(n))return zD(t,n,e)}return e}function WO(t,e,n,r,i,s,o,a,l){return t=XE(n,r,!0,t,i,s,o,a,l),t.context=zO(null),n=t.current,r=vn(),i=ao(n),s=Wi(r,i),s.callback=e??null,so(n,s,i),t.current.lanes=i,qd(t,i,r),Dn(t,r),t}function wy(t,e,n,r){var i=e.current,s=vn(),o=ao(i);return n=zO(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=so(i,e,o),t!==null&&(Br(t,i,o,s),Kp(t,i,o)),o}function sg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function QE(t,e){wC(t,e),(t=t.alternate)&&wC(t,e)}function M$(){return null}var HO=typeof reportError=="function"?reportError:function(t){console.error(t)};function YE(t){this._internalRoot=t}Sy.prototype.render=YE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));wy(t,e,null,null)};Sy.prototype.unmount=YE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Va(function(){wy(null,t,null,null)}),e[Xi]=null}};function Sy(t){this._internalRoot=t}Sy.prototype.unstable_scheduleHydration=function(t){if(t){var e=ED();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ws.length&&e!==0&&e<Ws[n].priority;n++);Ws.splice(n,0,t),n===0&&bD(t)}};function JE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ey(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function SC(){}function N$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=sg(o);s.call(u)}}var o=WO(e,r,t,0,null,!1,!1,"",SC);return t._reactRootContainer=o,t[Xi]=o.current,ad(t.nodeType===8?t.parentNode:t),Va(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=sg(l);a.call(u)}}var l=XE(t,0,!1,null,null,!1,!1,"",SC);return t._reactRootContainer=l,t[Xi]=l.current,ad(t.nodeType===8?t.parentNode:t),Va(function(){wy(e,l,n,r)}),l}function Ty(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=sg(o);a.call(l)}}wy(e,o,t,i)}else o=N$(n,e,t,i,r);return sg(o)}wD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nh(e.pendingLanes);n!==0&&(yE(e,n|1),Dn(e,vt()),!(xe&6)&&(Iu=vt()+500,Co()))}break;case 13:Va(function(){var r=Qi(t,1);if(r!==null){var i=vn();Br(r,t,1,i)}}),QE(t,1)}};vE=function(t){if(t.tag===13){var e=Qi(t,134217728);if(e!==null){var n=vn();Br(e,t,134217728,n)}QE(t,134217728)}};SD=function(t){if(t.tag===13){var e=ao(t),n=Qi(t,e);if(n!==null){var r=vn();Br(n,t,e,r)}QE(t,e)}};ED=function(){return Ve};TD=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Pw=function(t,e,n){switch(e){case"input":if(Tw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fy(r);if(!i)throw Error(W(90));eD(r),Tw(r,i)}}}break;case"textarea":nD(t,n);break;case"select":e=n.value,e!=null&&ou(t,!!n.multiple,e,!1)}};uD=HE;cD=Va;var L$={usingClientEntryPoint:!1,Events:[Xd,Hl,fy,aD,lD,HE]},Uc={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V$={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fD(t),t===null?null:t.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||M$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cp.isDisabled&&cp.supportsFiber)try{uy=cp.inject(V$),di=cp}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L$;er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JE(e))throw Error(W(200));return O$(t,e,null,n)};er.createRoot=function(t,e){if(!JE(t))throw Error(W(299));var n=!1,r="",i=HO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=XE(t,1,!1,null,null,n,!1,r,i),t[Xi]=e.current,ad(t.nodeType===8?t.parentNode:t),new YE(e)};er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=fD(e),t=t===null?null:t.stateNode,t};er.flushSync=function(t){return Va(t)};er.hydrate=function(t,e,n){if(!Ey(e))throw Error(W(200));return Ty(null,t,e,!0,n)};er.hydrateRoot=function(t,e,n){if(!JE(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=HO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=WO(e,null,t,1,n??null,i,!1,s,o),t[Xi]=e.current,ad(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Sy(e)};er.render=function(t,e,n){if(!Ey(e))throw Error(W(200));return Ty(null,t,e,!1,n)};er.unmountComponentAtNode=function(t){if(!Ey(t))throw Error(W(40));return t._reactRootContainer?(Va(function(){Ty(null,null,t,!1,function(){t._reactRootContainer=null,t[Xi]=null})}),!0):!1};er.unstable_batchedUpdates=HE;er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ey(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Ty(t,e,n,!1,r)};er.version="18.3.1-next-f1338f8080-20240426";function KO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KO)}catch(t){console.error(t)}}KO(),Kk.exports=er;var qO=Kk.exports;const F$=Ku(qO);var EC=qO;gw.createRoot=EC.createRoot,gw.hydrateRoot=EC.hydrateRoot;var B$=t=>t.disabled||Array.isArray(t.accessibilityStates)&&t.accessibilityStates.indexOf("disabled")>-1,j$={adjustable:"slider",button:"button",header:"heading",image:"img",imagebutton:null,keyboardkey:null,label:null,link:"link",none:"presentation",search:"search",summary:"region",text:null},GO=t=>{var e=t.accessibilityRole,n=t.role,r=n||e;if(r){var i=j$[r];if(i!==null)return i||r}},U$={article:"article",banner:"header",blockquote:"blockquote",button:"button",code:"code",complementary:"aside",contentinfo:"footer",deletion:"del",emphasis:"em",figure:"figure",insertion:"ins",form:"form",list:"ul",listitem:"li",main:"main",navigation:"nav",paragraph:"p",region:"section",strong:"strong"},$$={},z$=function(e){e===void 0&&(e=$$);var n=e.role||e.accessibilityRole;if(n==="label")return"label";var r=GO(e);if(r){if(r==="heading"){var i=e.accessibilityLevel||e["aria-level"];return i!=null?"h"+i:"h1"}return U$[r]}},XO={isDisabled:B$,propsToAccessibilityComponent:z$,propsToAriaRole:GO};function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}function W$(t,e){if(gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H$(t){var e=W$(t,"string");return gd(e)=="symbol"?e:e+""}function K$(t,e,n){return(e=H$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TC(Object(n),!0).forEach(function(r){K$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function On(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},q$=["ms","Moz","O","Webkit"],G$=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(Zp).forEach(t=>{q$.forEach(e=>{Zp[G$(e,t)]=Zp[t]})});var X$=t=>t==="currentcolor"||t==="currentColor"||t==="inherit"||t.indexOf("var(")===0;function Q$(t){if(typeof t=="number")return t>>>0===t&&t>=0&&t<=4294967295?t:null;if(typeof t!="string")return null;const e=J$();let n;if(n=e.hex6.exec(t))return parseInt(n[1]+"ff",16)>>>0;const r=Z$(t);return r??((n=e.rgb.exec(t))?(Di(n[1])<<24|Di(n[2])<<16|Di(n[3])<<8|255)>>>0:(n=e.rgba.exec(t))?n[6]!==void 0?(Di(n[6])<<24|Di(n[7])<<16|Di(n[8])<<8|dp(n[9]))>>>0:(Di(n[2])<<24|Di(n[3])<<16|Di(n[4])<<8|dp(n[5]))>>>0:(n=e.hex3.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=e.hex8.exec(t))?parseInt(n[1],16)>>>0:(n=e.hex4.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=e.hsl.exec(t))?(Zv(hp(n[1]),ks(n[2]),ks(n[3]))|255)>>>0:(n=e.hsla.exec(t))?n[6]!==void 0?(Zv(hp(n[6]),ks(n[7]),ks(n[8]))|dp(n[9]))>>>0:(Zv(hp(n[2]),ks(n[3]),ks(n[4]))|dp(n[5]))>>>0:(n=e.hwb.exec(t))?(Y$(hp(n[1]),ks(n[2]),ks(n[3]))|255)>>>0:null)}function du(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Zv(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=du(i,r,t+1/3),o=du(i,r,t),a=du(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Y$(t,e,n){if(e+n>=1){const o=Math.round(e*255/(e+n));return o<<24|o<<16|o<<8}const r=du(0,1,t+1/3)*(1-e-n)+e,i=du(0,1,t)*(1-e-n)+e,s=du(0,1,t-1/3)*(1-e-n)+e;return Math.round(r*255)<<24|Math.round(i*255)<<16|Math.round(s*255)<<8}const Ft="[-+]?\\d*\\.?\\d+",Ps=Ft+"%";function e_(...t){return"\\(\\s*("+t.join(")\\s*,?\\s*(")+")\\s*\\)"}function bC(...t){return"\\(\\s*("+t.slice(0,t.length-1).join(")\\s*,?\\s*(")+")\\s*/\\s*("+t[t.length-1]+")\\s*\\)"}function IC(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}let t_;function J$(){return t_===void 0&&(t_={rgb:new RegExp("rgb"+e_(Ft,Ft,Ft)),rgba:new RegExp("rgba("+IC(Ft,Ft,Ft,Ft)+"|"+bC(Ft,Ft,Ft,Ft)+")"),hsl:new RegExp("hsl"+e_(Ft,Ps,Ps)),hsla:new RegExp("hsla("+IC(Ft,Ps,Ps,Ft)+"|"+bC(Ft,Ps,Ps,Ft)+")"),hwb:new RegExp("hwb"+e_(Ft,Ps,Ps)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/}),t_}function Di(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function hp(t){return(parseFloat(t)%360+360)%360/360}function dp(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ks(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Z$(t){switch(t){case"transparent":return 0;case"aliceblue":return 4042850303;case"antiquewhite":return 4209760255;case"aqua":return 16777215;case"aquamarine":return 2147472639;case"azure":return 4043309055;case"beige":return 4126530815;case"bisque":return 4293182719;case"black":return 255;case"blanchedalmond":return 4293643775;case"blue":return 65535;case"blueviolet":return 2318131967;case"brown":return 2771004159;case"burlywood":return 3736635391;case"burntsienna":return 3934150143;case"cadetblue":return 1604231423;case"chartreuse":return 2147418367;case"chocolate":return 3530104575;case"coral":return 4286533887;case"cornflowerblue":return 1687547391;case"cornsilk":return 4294499583;case"crimson":return 3692313855;case"cyan":return 16777215;case"darkblue":return 35839;case"darkcyan":return 9145343;case"darkgoldenrod":return 3095792639;case"darkgray":return 2846468607;case"darkgreen":return 6553855;case"darkgrey":return 2846468607;case"darkkhaki":return 3182914559;case"darkmagenta":return 2332068863;case"darkolivegreen":return 1433087999;case"darkorange":return 4287365375;case"darkorchid":return 2570243327;case"darkred":return 2332033279;case"darksalmon":return 3918953215;case"darkseagreen":return 2411499519;case"darkslateblue":return 1211993087;case"darkslategray":return 793726975;case"darkslategrey":return 793726975;case"darkturquoise":return 13554175;case"darkviolet":return 2483082239;case"deeppink":return 4279538687;case"deepskyblue":return 12582911;case"dimgray":return 1768516095;case"dimgrey":return 1768516095;case"dodgerblue":return 512819199;case"firebrick":return 2988581631;case"floralwhite":return 4294635775;case"forestgreen":return 579543807;case"fuchsia":return 4278255615;case"gainsboro":return 3705462015;case"ghostwhite":return 4177068031;case"gold":return 4292280575;case"goldenrod":return 3668254975;case"gray":return 2155905279;case"green":return 8388863;case"greenyellow":return 2919182335;case"grey":return 2155905279;case"honeydew":return 4043305215;case"hotpink":return 4285117695;case"indianred":return 3445382399;case"indigo":return 1258324735;case"ivory":return 4294963455;case"khaki":return 4041641215;case"lavender":return 3873897215;case"lavenderblush":return 4293981695;case"lawngreen":return 2096890111;case"lemonchiffon":return 4294626815;case"lightblue":return 2916673279;case"lightcoral":return 4034953471;case"lightcyan":return 3774873599;case"lightgoldenrodyellow":return 4210742015;case"lightgray":return 3553874943;case"lightgreen":return 2431553791;case"lightgrey":return 3553874943;case"lightpink":return 4290167295;case"lightsalmon":return 4288707327;case"lightseagreen":return 548580095;case"lightskyblue":return 2278488831;case"lightslategray":return 2005441023;case"lightslategrey":return 2005441023;case"lightsteelblue":return 2965692159;case"lightyellow":return 4294959359;case"lime":return 16711935;case"limegreen":return 852308735;case"linen":return 4210091775;case"magenta":return 4278255615;case"maroon":return 2147483903;case"mediumaquamarine":return 1724754687;case"mediumblue":return 52735;case"mediumorchid":return 3126187007;case"mediumpurple":return 2473647103;case"mediumseagreen":return 1018393087;case"mediumslateblue":return 2070474495;case"mediumspringgreen":return 16423679;case"mediumturquoise":return 1221709055;case"mediumvioletred":return 3340076543;case"midnightblue":return 421097727;case"mintcream":return 4127193855;case"mistyrose":return 4293190143;case"moccasin":return 4293178879;case"navajowhite":return 4292783615;case"navy":return 33023;case"oldlace":return 4260751103;case"olive":return 2155872511;case"olivedrab":return 1804477439;case"orange":return 4289003775;case"orangered":return 4282712319;case"orchid":return 3664828159;case"palegoldenrod":return 4008225535;case"palegreen":return 2566625535;case"paleturquoise":return 2951671551;case"palevioletred":return 3681588223;case"papayawhip":return 4293907967;case"peachpuff":return 4292524543;case"peru":return 3448061951;case"pink":return 4290825215;case"plum":return 3718307327;case"powderblue":return 2967529215;case"purple":return 2147516671;case"rebeccapurple":return 1714657791;case"red":return 4278190335;case"rosybrown":return 3163525119;case"royalblue":return 1097458175;case"saddlebrown":return 2336560127;case"salmon":return 4202722047;case"sandybrown":return 4104413439;case"seagreen":return 780883967;case"seashell":return 4294307583;case"sienna":return 2689740287;case"silver":return 3233857791;case"skyblue":return 2278484991;case"slateblue":return 1784335871;case"slategray":return 1887473919;case"slategrey":return 1887473919;case"snow":return 4294638335;case"springgreen":return 16744447;case"steelblue":return 1182971135;case"tan":return 3535047935;case"teal":return 8421631;case"thistle":return 3636451583;case"tomato":return 4284696575;case"turquoise":return 1088475391;case"violet":return 4001558271;case"wheat":return 4125012991;case"white":return 4294967295;case"whitesmoke":return 4126537215;case"yellow":return 4294902015;case"yellowgreen":return 2597139199}return null}var e6=Q$;const t6=Ku(e6);var n6=t=>{if(t==null)return t;var e=t6(t);if(e!=null)return e=(e<<24|e>>>8)>>>0,e},QO=function(e,n){if(n===void 0&&(n=1),e!=null){if(typeof e=="string"&&X$(e))return e;var r=n6(e);if(r!=null){var i=r>>16&255,s=r>>8&255,o=r&255,a=(r>>24&255)/255,l=(a*n).toFixed(2);return"rgba("+i+","+s+","+o+","+l+")"}}},r6={backgroundColor:!0,borderColor:!0,borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0,color:!0,shadowColor:!0,textDecorationColor:!0,textShadowColor:!0};function oi(t,e){var n=t;return(e==null||!Zp[e])&&typeof t=="number"?n=t+"px":e!=null&&r6[e]&&(n=QO(t)),n}var Dt=!!(typeof window<"u"&&window.document&&window.document.createElement),i6={},s6=!Dt||window.CSS!=null&&window.CSS.supports!=null&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),o6="monospace,monospace",RC='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif',a6={borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderBlockColor:["borderTopColor","borderBottomColor"],borderInlineColor:["borderRightColor","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderInlineStyle:["borderRightStyle","borderLeftStyle"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderInlineWidth:["borderRightWidth","borderLeftWidth"],insetBlock:["top","bottom"],insetInline:["left","right"],marginBlock:["marginTop","marginBottom"],marginInline:["marginRight","marginLeft"],paddingBlock:["paddingTop","paddingBottom"],paddingInline:["paddingRight","paddingLeft"],overflow:["overflowX","overflowY"],overscrollBehavior:["overscrollBehaviorX","overscrollBehaviorY"],borderBlockStartColor:["borderTopColor"],borderBlockStartStyle:["borderTopStyle"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndColor:["borderBottomColor"],borderBlockEndStyle:["borderBottomStyle"],borderBlockEndWidth:["borderBottomWidth"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],insetBlockEnd:["bottom"],insetBlockStart:["top"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"]},YO=(t,e)=>{if(!t)return i6;var n={},r=function(){var a=t[i];if(a==null)return"continue";if(i==="backgroundClip")a==="text"&&(n.backgroundClip=a,n.WebkitBackgroundClip=a);else if(i==="flex")a===-1?(n.flexGrow=0,n.flexShrink=1,n.flexBasis="auto"):n.flex=a;else if(i==="font")n[i]=a.replace("System",RC);else if(i==="fontFamily")if(a.indexOf("System")>-1){var l=a.split(/,\s*/);l[l.indexOf("System")]=RC,n[i]=l.join(",")}else a==="monospace"?n[i]=o6:n[i]=a;else if(i==="textDecorationLine")s6?n.textDecorationLine=a:n.textDecoration=a;else if(i==="writingDirection")n.direction=a;else{var u=oi(t[i],i),c=a6[i];e&&i==="inset"?(t.insetInline==null&&(n.left=u,n.right=u),t.insetBlock==null&&(n.top=u,n.bottom=u)):e&&i==="margin"?(t.marginInline==null&&(n.marginLeft=u,n.marginRight=u),t.marginBlock==null&&(n.marginTop=u,n.marginBottom=u)):e&&i==="padding"?(t.paddingInline==null&&(n.paddingLeft=u,n.paddingRight=u),t.paddingBlock==null&&(n.paddingTop=u,n.paddingBottom=u)):c?c.forEach((d,f)=>{t[d]==null&&(n[d]=u)}):n[i]=u}};for(var i in t)var s=r();return n};function l6(t,e){for(var n=t.length,r=e^n,i=0,s;n>=4;)s=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),s^=s>>>24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)^s,n-=4,++i;switch(n){case 3:r^=(t.charCodeAt(i+2)&255)<<16;case 2:r^=(t.charCodeAt(i+1)&255)<<8;case 1:r^=t.charCodeAt(i)&255,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)}return r^=r>>>13,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16),r^=r>>>15,r>>>0}var u6=t=>l6(t,1).toString(36),c6=/[A-Z]/g,h6=/^ms-/,n_={};function d6(t){return"-"+t.toLowerCase()}function f6(t){if(t in n_)return n_[t];var e=t.replace(c6,d6);return n_[t]=h6.test(e)?"-"+e:e}var JO={},ZE={},by={};Object.defineProperty(by,"__esModule",{value:!0});by.default=p6;function p6(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(ZE,"__esModule",{value:!0});ZE.default=v6;var m6=by,g6=y6(m6);function y6(t){return t&&t.__esModule?t:{default:t}}function v6(t,e,n){var r=t[e];if(r&&n.hasOwnProperty(e))for(var i=(0,g6.default)(e),s=0;s<r.length;++s){var o=r[s]+i;n[o]||(n[o]=n[e])}return n}var eT={};Object.defineProperty(eT,"__esModule",{value:!0});eT.default=_6;function _6(t,e,n,r,i){for(var s=0,o=t.length;s<o;++s){var a=t[s](e,n,r,i);if(a)return a}}var tT={};Object.defineProperty(tT,"__esModule",{value:!0});tT.default=w6;function CC(t,e){t.indexOf(e)===-1&&t.push(e)}function w6(t,e){if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n)CC(t,e[n]);else CC(t,e)}var nT={};Object.defineProperty(nT,"__esModule",{value:!0});nT.default=S6;function S6(t){return t instanceof Object&&!Array.isArray(t)}Object.defineProperty(JO,"__esModule",{value:!0});var E6=JO.default=P6,T6=ZE,b6=Iy(T6),I6=eT,xC=Iy(I6),R6=tT,C6=Iy(R6),x6=nT,A6=Iy(x6);function Iy(t){return t&&t.__esModule?t:{default:t}}function P6(t){var e=t.prefixMap,n=t.plugins;return function r(i){for(var s in i){var o=i[s];if((0,A6.default)(o))i[s]=r(o);else if(Array.isArray(o)){for(var a=[],l=0,u=o.length;l<u;++l){var c=(0,xC.default)(n,s,o[l],i,e);(0,C6.default)(a,c||o[l])}a.length>0&&(i[s]=a)}else{var d=(0,xC.default)(n,s,o,i,e);d&&(i[s]=d),i=(0,b6.default)(e,s,i)}}return i}}var ZO={};Object.defineProperty(ZO,"__esModule",{value:!0});var k6=ZO.default=D6;function D6(){return null}var eM={};function em(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?em=function(n){return typeof n}:em=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},em(t)}function O6(t){return V6(t)||L6(t)||N6(t)||M6()}function M6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N6(t,e){if(t){if(typeof t=="string")return uS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uS(t,e)}}function L6(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function V6(t){if(Array.isArray(t))return uS(t)}function uS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AC(t){return t.filter(function(e,n){return t.lastIndexOf(e)===n})}function tM(t){for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;++e){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];for(var i in r){var s=r[i],o=t[i];if(o&&s){if(Array.isArray(o)){t[i]=AC(o.concat(s));continue}if(Array.isArray(s)){t[i]=AC([o].concat(O6(s)));continue}if(em(s)==="object"){t[i]=tM({},o,s);continue}}t[i]=s}}return t}var F6=/-([a-z])/g,B6=/^Ms/g,r_={};function j6(t){return t[1].toUpperCase()}function nM(t){if(r_.hasOwnProperty(t))return r_[t];var e=t.replace(F6,j6).replace(B6,"ms");return r_[t]=e,e}var U6=/[A-Z]/g,$6=/^ms-/,i_={};function z6(t){return"-"+t.toLowerCase()}function rM(t){if(i_.hasOwnProperty(t))return i_[t];var e=t.replace(U6,z6);return i_[t]=$6.test(e)?"-"+e:e}const W6=Object.freeze(Object.defineProperty({__proto__:null,default:rM},Symbol.toStringTag,{value:"Module"}));function Ry(t){return rM(t)}function iM(t,e){return Ry(t)+":"+e}function H6(t){var e="";for(var n in t){var r=t[n];typeof r!="string"&&typeof r!="number"||(e&&(e+=";"),e+=iM(n,r))}return e}var K6=/^(Webkit|Moz|O|ms)/;function q6(t){return K6.test(t)}var G6=/-webkit-|-moz-|-ms-/;function X6(t){return typeof t=="string"&&G6.test(t)}var yd={borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PC=["animationIterationCount","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineClamp","order"],kC=["Webkit","ms","Moz","O"];function Q6(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}for(var s_=0,Y6=PC.length;s_<Y6;++s_){var DC=PC[s_];yd[DC]=!0;for(var o_=0,J6=kC.length;o_<J6;++o_)yd[Q6(kC[o_],DC)]=!0}for(var Z6 in yd)yd[Ry(Z6)]=!0;function e3(t){return yd.hasOwnProperty(t)}var t3=/^(ms|Webkit|Moz|O)/;function sM(t){var e=t.replace(t3,"");return e.charAt(0).toLowerCase()+e.slice(1)}function n3(t){return sM(nM(t))}function r3(t,e){return e.join(";"+Ry(t)+":")}var i3=/(-ms-|-webkit-|-moz-|-o-)/g;function s3(t){return typeof t=="string"?t.replace(i3,""):t}const o3=Object.freeze(Object.defineProperty({__proto__:null,assignStyle:tM,camelCaseProperty:nM,cssifyDeclaration:iM,cssifyObject:H6,hyphenateProperty:Ry,isPrefixedProperty:q6,isPrefixedValue:X6,isUnitlessProperty:e3,normalizeProperty:n3,resolveArrayValue:r3,unprefixProperty:sM,unprefixValue:s3},Symbol.toStringTag,{value:"Module"})),oM=Mk(o3);Object.defineProperty(eM,"__esModule",{value:!0});var a3=eM.default=h3,l3=oM,u3=/cross-fade\(/g,c3=["-webkit-",""];function h3(t,e){if(typeof e=="string"&&!(0,l3.isPrefixedValue)(e)&&e.indexOf("cross-fade(")!==-1)return c3.map(function(n){return e.replace(u3,n+"cross-fade(")})}var aM={};Object.defineProperty(aM,"__esModule",{value:!0});var d3=aM.default=m3,f3=["-webkit-","-moz-",""],p3={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function m3(t,e){if(t==="cursor"&&p3.hasOwnProperty(e))return f3.map(function(n){return n+e})}var lM={};Object.defineProperty(lM,"__esModule",{value:!0});var g3=lM.default=w3,y3=oM,v3=/filter\(/g,_3=["-webkit-",""];function w3(t,e){if(typeof e=="string"&&!(0,y3.isPrefixedValue)(e)&&e.indexOf("filter(")!==-1)return _3.map(function(n){return e.replace(v3,n+"filter(")})}var uM={},rT={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=/-webkit-|-moz-|-ms-/;function n(r){return typeof r=="string"&&e.test(r)}})(rT);Object.defineProperty(uM,"__esModule",{value:!0});var S3=uM.default=R3,E3=rT,T3=b3(E3);function b3(t){return t&&t.__esModule?t:{default:t}}var I3=["-webkit-",""];function R3(t,e){if(typeof e=="string"&&!(0,T3.default)(e)&&e.indexOf("image-set(")>-1)return I3.map(function(n){return e.replace(/image-set\(/g,n+"image-set(")})}var cM={};Object.defineProperty(cM,"__esModule",{value:!0});var C3=cM.default=x3,OC={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};function x3(t,e,n){if(Object.prototype.hasOwnProperty.call(OC,t))for(var r=OC[t],i=0,s=r.length;i<s;++i)n[r[i]]=e}var hM={};Object.defineProperty(hM,"__esModule",{value:!0});var A3=hM.default=P3;function P3(t,e){if(t==="position"&&e==="sticky")return["-webkit-sticky","sticky"]}var dM={};Object.defineProperty(dM,"__esModule",{value:!0});var k3=dM.default=N3,D3=["-webkit-","-moz-",""],O3={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},M3={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function N3(t,e){if(O3.hasOwnProperty(t)&&M3.hasOwnProperty(e))return D3.map(function(n){return n+e})}var fM={},pM={};const L3=Mk(W6);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var e=L3,n=r(e);function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,n.default)(s)}})(pM);Object.defineProperty(fM,"__esModule",{value:!0});var V3=fM.default=K3,F3=pM,B3=iT(F3),j3=rT,U3=iT(j3),$3=by,MC=iT($3);function iT(t){return t&&t.__esModule?t:{default:t}}var z3={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},W3={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function H3(t,e){if((0,U3.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,i=n.length;r<i;++r){var s=n[r],o=[s];for(var a in e){var l=(0,B3.default)(a);if(s.indexOf(l)>-1&&l!=="order")for(var u=e[a],c=0,d=u.length;c<d;++c)o.unshift(s.replace(l,W3[u[c]]+l))}n[r]=o.join(",")}return n.join(",")}function K3(t,e,n,r){if(typeof e=="string"&&z3.hasOwnProperty(t)){var i=H3(e,r),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-moz-|-ms-/.test(a)}).join(",");if(t.indexOf("Webkit")>-1)return s;var o=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-webkit-|-ms-/.test(a)}).join(",");return t.indexOf("Moz")>-1?o:(n["Webkit"+(0,MC.default)(t)]=s,n["Moz"+(0,MC.default)(t)]=o,i)}}var ze=["Webkit"],q3=["Moz"],G3=["Webkit","Moz"],ut=["Webkit","ms"],X3=["Webkit","Moz","ms"];const Q3={plugins:[k6,a3,d3,g3,S3,C3,A3,k3,V3],prefixMap:{appearance:X3,userSelect:G3,textEmphasisPosition:ut,textEmphasis:ut,textEmphasisStyle:ut,textEmphasisColor:ut,boxDecorationBreak:ut,clipPath:ze,maskImage:ut,maskMode:ut,maskRepeat:ut,maskPosition:ut,maskClip:ut,maskOrigin:ut,maskSize:ut,maskComposite:ut,mask:ut,maskBorderSource:ut,maskBorderMode:ut,maskBorderSlice:ut,maskBorderWidth:ut,maskBorderOutset:ut,maskBorderRepeat:ut,maskBorder:ut,maskType:ut,textDecorationStyle:ze,textDecorationSkip:ze,textDecorationLine:ze,textDecorationColor:ze,filter:ze,breakAfter:ze,breakBefore:ze,breakInside:ze,columnCount:ze,columnFill:ze,columnGap:ze,columnRule:ze,columnRuleColor:ze,columnRuleStyle:ze,columnRuleWidth:ze,columns:ze,columnSpan:ze,columnWidth:ze,backdropFilter:ze,hyphens:ze,flowInto:ze,flowFrom:ze,regionFragment:ze,textOrientation:ze,tabSize:q3,fontKerning:ze,textSizeAdjust:ze}};var Y3=E6(Q3),J3=["animationKeyframes"],NC=new Map,Z3={},ez=1,tz=3,nz={borderColor:2,borderRadius:2,borderStyle:2,borderWidth:2,display:2,flex:2,inset:2,margin:2,overflow:2,overscrollBehavior:2,padding:2,insetBlock:2.1,insetInline:2.1,marginInline:2.1,marginBlock:2.1,paddingInline:2.1,paddingBlock:2.1,borderBlockStartColor:2.2,borderBlockStartStyle:2.2,borderBlockStartWidth:2.2,borderBlockEndColor:2.2,borderBlockEndStyle:2.2,borderBlockEndWidth:2.2,borderInlineStartColor:2.2,borderInlineStartStyle:2.2,borderInlineStartWidth:2.2,borderInlineEndColor:2.2,borderInlineEndStyle:2.2,borderInlineEndWidth:2.2,borderEndStartRadius:2.2,borderEndEndRadius:2.2,borderStartStartRadius:2.2,borderStartEndRadius:2.2,insetBlockEnd:2.2,insetBlockStart:2.2,insetInlineEnd:2.2,insetInlineStart:2.2,marginBlockStart:2.2,marginBlockEnd:2.2,marginInlineStart:2.2,marginInlineEnd:2.2,paddingBlockStart:2.2,paddingBlockEnd:2.2,paddingInlineStart:2.2,paddingInlineEnd:2.2},cS="borderTopLeftRadius",hS="borderTopRightRadius",dS="borderBottomLeftRadius",fS="borderBottomRightRadius",pS="borderLeftColor",mS="borderLeftStyle",gS="borderLeftWidth",yS="borderRightColor",vS="borderRightStyle",_S="borderRightWidth",wS="right",SS="marginLeft",ES="marginRight",TS="paddingLeft",bS="paddingRight",IS="left",og={[cS]:hS,[hS]:cS,[dS]:fS,[fS]:dS,[pS]:yS,[mS]:vS,[gS]:_S,[yS]:pS,[vS]:mS,[_S]:gS,[IS]:wS,[SS]:ES,[ES]:SS,[TS]:bS,[bS]:TS,[wS]:IS},Ph={borderStartStartRadius:cS,borderStartEndRadius:hS,borderEndStartRadius:dS,borderEndEndRadius:fS,borderInlineStartColor:pS,borderInlineStartStyle:mS,borderInlineStartWidth:gS,borderInlineEndColor:yS,borderInlineEndStyle:vS,borderInlineEndWidth:_S,insetInlineEnd:wS,insetInlineStart:IS,marginInlineStart:SS,marginInlineEnd:ES,paddingInlineStart:TS,paddingInlineEnd:bS},mM=["clear","float","textAlign"];function rz(t){var e={$$css:!0},n=[];function r(i,s,o){var a=oz(o,s),l=s+a,u=NC.get(l),c;if(u!=null)c=u[0],n.push(u[1]);else{var d=i!==s?l:a;c=sT("r",i,d);var f=nz[i]||tz,p=az(c,s,o),g=[p,f];n.push(g),NC.set(l,[c,g])}return c}return Object.keys(t).sort().forEach(i=>{var s=t[i];if(s!=null){var o;if(mM.indexOf(i)>-1){var a=r(i,i,"left"),l=r(i,i,"right");s==="start"?o=[a,l]:s==="end"&&(o=[l,a])}var u=Ph[i];if(u!=null){var c=r(i,u,s),d=r(i,og[u],s);o=[c,d]}if(i==="transitionProperty"){for(var f=Array.isArray(s)?s:[s],p=[],g=0;g<f.length;g++){var S=f[g];typeof S=="string"&&Ph[S]!=null&&p.push(g)}if(p.length>0){var T=[...f],_=[...f];p.forEach(y=>{var v=T[y];if(typeof v=="string"){var C=Ph[v],D=og[C];T[y]=C,_[y]=D;var O=r(i,i,T),b=r(i,i,_);o=[O,b]}})}}o==null?o=r(i,i,s):e.$$css$localize=!0,e[i]=o}}),[e,n]}function iz(t,e){var n={$$css:!0},r=[],i=t.animationKeyframes,s=On(t,J3),o=sT("css",e,JSON.stringify(t)),a="."+o,l;if(i!=null){var u=gM(i),c=u[0],d=u[1];l=c.join(","),r.push(...d)}var f=Li(ye(ye({},s),{},{animationName:l}));return r.push(""+a+f),n[o]=o,[n,[[r,ez]]]}function sz(t,e){var n=t||Z3,r={},i={},s=function(){var u=n[o],c=o,d=u;if(!Object.prototype.hasOwnProperty.call(n,o)||u==null)return"continue";mM.indexOf(o)>-1&&(u==="start"?d=e?"right":"left":u==="end"&&(d=e?"left":"right"));var f=Ph[o];if(f!=null&&(c=e?og[f]:f),o==="transitionProperty"){var p=Array.isArray(u)?u:[u];p.forEach((g,S)=>{if(typeof g=="string"){var T=Ph[g];T!=null&&(p[S]=e?og[T]:T,d=p.join(" "))}})}r[c]||(i[c]=d),c===o&&(r[c]=!0)};for(var o in n)var a=s();return YO(i,!0)}function oz(t,e){var n=oi(t,e);return typeof n!="string"?JSON.stringify(n||""):n}function az(t,e,n){var r=[],i="."+t;switch(e){case"animationKeyframes":{var s=gM(n),o=s[0],a=s[1],l=Li({animationName:o.join(",")});r.push(""+i+l,...a);break}case"placeholderTextColor":{var u=Li({color:n,opacity:1});r.push(i+"::-webkit-input-placeholder"+u,i+"::-moz-placeholder"+u,i+":-ms-input-placeholder"+u,i+"::placeholder"+u);break}case"pointerEvents":{var c=n;if(n==="auto"||n==="box-only"){if(c="auto!important",n==="box-only"){var d=Li({pointerEvents:"none"});r.push(i+">*"+d)}}else if((n==="none"||n==="box-none")&&(c="none!important",n==="box-none")){var f=Li({pointerEvents:"auto"});r.push(i+">*"+f)}var p=Li({pointerEvents:c});r.push(""+i+p);break}case"scrollbarWidth":{n==="none"&&r.push(i+"::-webkit-scrollbar{display:none}");var g=Li({scrollbarWidth:n});r.push(""+i+g);break}default:{var S=Li({[e]:n});r.push(""+i+S);break}}return r}function Li(t){var e=Y3(YO(t)),n=Object.keys(e).map(r=>{var i=e[r],s=f6(r);return Array.isArray(i)?i.map(o=>s+":"+o).join(";"):s+":"+i}).sort().join(";");return"{"+n+";}"}function sT(t,e,n){var r=u6(e+n);return t+"-"+r}function lz(t){var e=["-webkit-",""],n=sT("r","animation",JSON.stringify(t)),r="{"+Object.keys(t).map(s=>{var o=t[s],a=Li(o);return""+s+a}).join("")+"}",i=e.map(s=>"@"+s+"keyframes "+n+r);return[n,i]}function gM(t){if(typeof t=="number")throw new Error("Invalid CSS keyframes type: "+typeof t);var e=[],n=[],r=Array.isArray(t)?t:[t];return r.forEach(i=>{if(typeof i=="string")e.push(i);else{var s=lz(i),o=s[0],a=s[1];e.push(o),n.push(...a)}}),[e,n]}function a_(t,e,n){if(Dt){var r=e??document,i=r.getElementById(t);if(i==null)if(i=document.createElement("style"),i.setAttribute("id",t),typeof n=="string"&&i.appendChild(document.createTextNode(n)),r instanceof ShadowRoot)r.insertBefore(i,r.firstChild);else{var s=r.head;s&&s.insertBefore(i,s.firstChild)}return i.sheet}else return null}var uz=Array.prototype.slice;function l_(t){var e={},n={};if(t!=null){var r;uz.call(t.cssRules).forEach((o,a)=>{var l=o.cssText;if(l.indexOf("stylesheet-group")>-1)r=dz(o),e[r]={start:a,rules:[l]};else{var u=VC(l);u!=null&&(n[u]=!0,e[r].rules.push(l))}})}function i(o,a,l){var u=LC(e),c=u.indexOf(a),d=c+1,f=u[d],p=f!=null&&e[f].start!=null?e[f].start:o.cssRules.length,g=pz(o,l,p);if(g){e[a].start==null&&(e[a].start=p);for(var S=d;S<u.length;S+=1){var T=u[S],_=e[T].start||0;e[T].start=_+1}}return g}var s={getTextContent(){return LC(e).map(o=>{var a=e[o].rules,l=a.shift();return a.sort(),a.unshift(l),a.join(`
`)}).join(`
`)},insert(o,a){var l=Number(a);if(e[l]==null){var u=cz(l);e[l]={start:null,rules:[u]},t!=null&&i(t,l,u)}var c=VC(o);if(c!=null&&n[c]==null&&(n[c]=!0,e[l].rules.push(o),t!=null)){var d=i(t,l,o);d||e[l].rules.pop()}}};return s}function cz(t){return'[stylesheet-group="'+t+'"]{}'}var hz=/["']/g;function dz(t){return Number(t.selectorText.split(hz)[1])}function LC(t){return Object.keys(t).map(Number).sort((e,n)=>e>n?1:-1)}var fz=/\s*([,])\s*/g;function VC(t){var e=t.split("{")[0].trim();return e!==""?e.replace(fz,"$1"):null}function pz(t,e,n){try{return t.insertRule(e,n),!0}catch{return!1}}var mz="react-native-stylesheet",u_=new WeakMap,Rr=[],FC=["html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0);}","body{margin:0;}","button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}","input::-webkit-search-cancel-button,input::-webkit-search-decoration,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}"];function gz(t,e){e===void 0&&(e=mz);var n;if(Dt){var r=document;if(Rr.length===0)n=l_(a_(e)),FC.forEach(a=>{n.insert(a,0)}),u_.set(r,Rr.length),Rr.push(n);else{var i=u_.get(r);if(i==null){var s=Rr[0],o=s!=null?s.getTextContent():"";n=l_(a_(e,r,o)),u_.set(r,Rr.length),Rr.push(n)}else n=Rr[i]}}else Rr.length===0?(n=l_(a_(e)),FC.forEach(a=>{n.insert(a,0)}),Rr.push(n)):n=Rr[0];return{getTextContent(){return n.getTextContent()},id:e,insert(a,l){Rr.forEach(u=>{u.insert(a,l)})}}}var oT={};Object.defineProperty(oT,"__esModule",{value:!0});oT.localizeStyle=yz;var fp=new WeakMap,yM="$$css$localize";function BC(t,e){var n={};for(var r in t)if(r!==yM){var i=t[r];Array.isArray(i)?n[r]=e?i[1]:i[0]:n[r]=i}return n}function yz(t,e){if(t[yM]!=null){var n=e?1:0;if(fp.has(t)){var r=fp.get(t),i=r[n];return i==null&&(i=BC(t,e),r[n]=i,fp.set(t,r)),i}var s=BC(t,e),o=new Array(2);return o[n]=s,fp.set(t,o),s}return t}var vz=oT,_z={},vM={height:0,width:0},_M=t=>{var e=t.shadowColor,n=t.shadowOffset,r=t.shadowOpacity,i=t.shadowRadius,s=n||vM,o=s.height,a=s.width,l=oi(a),u=oi(o),c=oi(i||0),d=QO(e||"black",r);if(d!=null&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},wz=t=>{var e=t.textShadowColor,n=t.textShadowOffset,r=t.textShadowRadius,i=n||vM,s=i.height,o=i.width,a=r||0,l=oi(o),u=oi(s),c=oi(a),d=oi(e,"textShadowColor");if(d&&(s!==0||o!==0||a!==0)&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},Sz=t=>{var e=Object.keys(t)[0],n=t[e];if(e==="matrix"||e==="matrix3d")return e+"("+n.join(",")+")";var r=oi(n,e);return e+"("+r+")"},Ez=t=>t.map(Sz).join(" "),Tz={borderBottomEndRadius:"borderEndEndRadius",borderBottomStartRadius:"borderEndStartRadius",borderTopEndRadius:"borderStartEndRadius",borderTopStartRadius:"borderStartStartRadius",borderEndColor:"borderInlineEndColor",borderEndStyle:"borderInlineEndStyle",borderEndWidth:"borderInlineEndWidth",borderStartColor:"borderInlineStartColor",borderStartStyle:"borderInlineStartStyle",borderStartWidth:"borderInlineStartWidth",end:"insetInlineEnd",marginEnd:"marginInlineEnd",marginHorizontal:"marginInline",marginStart:"marginInlineStart",marginVertical:"marginBlock",paddingEnd:"paddingInlineEnd",paddingHorizontal:"paddingInline",paddingStart:"paddingInlineStart",paddingVertical:"paddingBlock",start:"insetInlineStart"},bz={elevation:!0,overlayColor:!0,resizeMode:!0,tintColor:!0},wM=function(e,n){n===void 0&&(n={});var r=e||_z,i={};if(n.shadow,r.shadowColor!=null||r.shadowOffset!=null||r.shadowOpacity!=null||r.shadowRadius!=null){var s=_M(r);if(s!=null&&i.boxShadow==null){var o=r.boxShadow,a=o?o+", "+s:s;i.boxShadow=a}}if(n.textShadow,r.textShadowColor!=null||r.textShadowOffset!=null||r.textShadowRadius!=null){var l=wz(r);if(l!=null&&i.textShadow==null){var u=r.textShadow,c=u?u+", "+l:l;i.textShadow=c}}for(var d in r)if(!(bz[d]!=null||d==="shadowColor"||d==="shadowOffset"||d==="shadowOpacity"||d==="shadowRadius"||d==="textShadowColor"||d==="textShadowOffset"||d==="textShadowRadius")){var f=r[d],p=Tz[d]||d,g=f;!Object.prototype.hasOwnProperty.call(r,d)||p!==d&&r[p]!=null||(p==="aspectRatio"&&typeof g=="number"?i[p]=g.toString():p==="fontVariant"?(Array.isArray(g)&&g.length>0&&(g=g.join(" ")),i[p]=g):p==="textAlignVertical"?r.verticalAlign==null&&(i.verticalAlign=g==="center"?"middle":g):p==="transform"?(Array.isArray(g)&&(g=Ez(g)),i.transform=g):i[p]=g)}return i},aT={};Object.defineProperty(aT,"__esModule",{value:!0});var SM=aT.styleq=void 0,Iz=new WeakMap,Rz="$$css";function EM(t){var e,n,r;return t!=null&&(e=t.disableCache===!0,n=t.disableMix===!0,r=t.transform),function(){for(var s=[],o="",a=null,l=e?null:Iz,u=new Array(arguments.length),c=0;c<arguments.length;c++)u[c]=arguments[c];for(;u.length>0;){var d=u.pop();if(!(d==null||d===!1)){if(Array.isArray(d)){for(var f=0;f<d.length;f++)u.push(d[f]);continue}var p=r!=null?r(d):d;if(p.$$css){var g="";if(l!=null&&l.has(p)){var S=l.get(p);S!=null&&(g=S[0],s.push.apply(s,S[1]),l=S[2])}else{var T=[];for(var _ in p){var y=p[_];_!==Rz&&(typeof y=="string"||y===null?s.includes(_)||(s.push(_),l!=null&&T.push(_),typeof y=="string"&&(g+=g?" "+y:y)):console.error("styleq: ".concat(_," typeof ").concat(String(y),' is not "string" or "null".')))}if(l!=null){var v=new WeakMap;l.set(p,[g,T,v]),l=v}}g&&(o=o?g+" "+o:g)}else if(n)a==null&&(a={}),a=Object.assign({},p,a);else{var C=null;for(var D in p){var O=p[D];O!==void 0&&(s.includes(D)||(O!=null&&(a==null&&(a={}),C==null&&(C={}),C[D]=O),s.push(D),l=null))}C!=null&&(a=Object.assign(C,a))}}}var b=[o,a];return b}}var TM=EM();SM=aT.styleq=TM;TM.factory=EM;var Cz=["writingDirection"],bM=new WeakMap,ag=gz(),IM={shadow:!0,textShadow:!0};function xz(t,e){e===void 0&&(e={});var n=e,r=n.writingDirection,i=On(n,Cz),s=r==="rtl";return SM.factory({transform(o){var a=bM.get(o);return a!=null?vz.localizeStyle(a,s):wM(o,ye(ye({},IM),i))}})(t)}function RM(t){t.forEach(e=>{var n=e[0],r=e[1];ag!=null&&n.forEach(i=>{ag.insert(i,r)})})}function Az(t){var e=rz(wM(t,IM)),n=e[0],r=e[1];return RM(r),n}function Pz(t,e){var n=iz(t,e),r=n[0],i=n[1];return RM(i),r}var CM={position:"absolute",left:0,right:0,top:0,bottom:0},kz=xM({x:ye({},CM)}).x;function xM(t){return Object.keys(t).forEach(e=>{var n=t[e];if(n!=null&&n.$$css!==!0){var r;e.indexOf("$raw")>-1?r=Pz(n,e.split("$raw")[0]):r=Az(n),bM.set(n,r)}}),t}function Dz(t,e){return[t,e]}function Oz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.flat(1/0),i={},s=0;s<r.length;s++){var o=r[s];o!=null&&typeof o=="object"&&Object.assign(i,o)}return i}function Mz(){return{id:ag.id,textContent:ag.getTextContent()}}function os(t,e){e===void 0&&(e={});var n=e.writingDirection==="rtl",r=xz(t,e);return Array.isArray(r)&&r[1]!=null&&(r[1]=sz(r[1],n)),r}os.absoluteFill=kz;os.absoluteFillObject=CM;os.create=xM;os.compose=Dz;os.flatten=Oz;os.getSheet=Mz;os.hairlineWidth=1;Dt&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.resolveRNStyle=os.flatten);var Ae=os,Nz=["aria-activedescendant","accessibilityActiveDescendant","aria-atomic","accessibilityAtomic","aria-autocomplete","accessibilityAutoComplete","aria-busy","accessibilityBusy","aria-checked","accessibilityChecked","aria-colcount","accessibilityColumnCount","aria-colindex","accessibilityColumnIndex","aria-colspan","accessibilityColumnSpan","aria-controls","accessibilityControls","aria-current","accessibilityCurrent","aria-describedby","accessibilityDescribedBy","aria-details","accessibilityDetails","aria-disabled","accessibilityDisabled","aria-errormessage","accessibilityErrorMessage","aria-expanded","accessibilityExpanded","aria-flowto","accessibilityFlowTo","aria-haspopup","accessibilityHasPopup","aria-hidden","accessibilityHidden","aria-invalid","accessibilityInvalid","aria-keyshortcuts","accessibilityKeyShortcuts","aria-label","accessibilityLabel","aria-labelledby","accessibilityLabelledBy","aria-level","accessibilityLevel","aria-live","accessibilityLiveRegion","aria-modal","accessibilityModal","aria-multiline","accessibilityMultiline","aria-multiselectable","accessibilityMultiSelectable","aria-orientation","accessibilityOrientation","aria-owns","accessibilityOwns","aria-placeholder","accessibilityPlaceholder","aria-posinset","accessibilityPosInSet","aria-pressed","accessibilityPressed","aria-readonly","accessibilityReadOnly","aria-required","accessibilityRequired","role","accessibilityRole","aria-roledescription","accessibilityRoleDescription","aria-rowcount","accessibilityRowCount","aria-rowindex","accessibilityRowIndex","aria-rowspan","accessibilityRowSpan","aria-selected","accessibilitySelected","aria-setsize","accessibilitySetSize","aria-sort","accessibilitySort","aria-valuemax","accessibilityValueMax","aria-valuemin","accessibilityValueMin","aria-valuenow","accessibilityValueNow","aria-valuetext","accessibilityValueText","dataSet","focusable","id","nativeID","pointerEvents","style","tabIndex","testID"],Lz={},Vz=Object.prototype.hasOwnProperty,Fz=Array.isArray,Bz=/[A-Z]/g;function jz(t){return"-"+t.toLowerCase()}function Uz(t){return t.replace(Bz,jz)}function Sl(t){return Fz(t)?t.join(" "):t}var $z=Ae.create({auto:{pointerEvents:"auto"},"box-none":{pointerEvents:"box-none"},"box-only":{pointerEvents:"box-only"},none:{pointerEvents:"none"}}),zz=(t,e,n)=>{e||(e=Lz);var r=e,i=r["aria-activedescendant"],s=r.accessibilityActiveDescendant,o=r["aria-atomic"],a=r.accessibilityAtomic,l=r["aria-autocomplete"],u=r.accessibilityAutoComplete,c=r["aria-busy"],d=r.accessibilityBusy,f=r["aria-checked"],p=r.accessibilityChecked,g=r["aria-colcount"],S=r.accessibilityColumnCount,T=r["aria-colindex"],_=r.accessibilityColumnIndex,y=r["aria-colspan"],v=r.accessibilityColumnSpan,C=r["aria-controls"],D=r.accessibilityControls,O=r["aria-current"],b=r.accessibilityCurrent,E=r["aria-describedby"],R=r.accessibilityDescribedBy,x=r["aria-details"],P=r.accessibilityDetails,N=r["aria-disabled"],k=r.accessibilityDisabled,de=r["aria-errormessage"],fe=r.accessibilityErrorMessage,je=r["aria-expanded"],Re=r.accessibilityExpanded,U=r["aria-flowto"],Y=r.accessibilityFlowTo,ie=r["aria-haspopup"],we=r.accessibilityHasPopup,Pe=r["aria-hidden"],hn=r.accessibilityHidden,lt=r["aria-invalid"],zt=r.accessibilityInvalid,gt=r["aria-keyshortcuts"],Ke=r.accessibilityKeyShortcuts,Nt=r["aria-label"],Mn=r.accessibilityLabel,Ri=r["aria-labelledby"],fs=r.accessibilityLabelledBy,wr=r["aria-level"],zr=r.accessibilityLevel,nr=r["aria-live"],Lo=r.accessibilityLiveRegion,ps=r["aria-modal"],Vo=r.accessibilityModal,ms=r["aria-multiline"],De=r.accessibilityMultiline,et=r["aria-multiselectable"],Nn=r.accessibilityMultiSelectable,rr=r["aria-orientation"],gs=r.accessibilityOrientation,Fo=r["aria-owns"],Sr=r.accessibilityOwns,Bo=r["aria-placeholder"],rl=r.accessibilityPlaceholder,ys=r["aria-posinset"],fc=r.accessibilityPosInSet,il=r["aria-pressed"],sl=r.accessibilityPressed,jo=r["aria-readonly"],Ci=r.accessibilityReadOnly,vs=r["aria-required"],Ue=r.accessibilityRequired;r.role,r.accessibilityRole;var ir=r["aria-roledescription"],ol=r.accessibilityRoleDescription,xi=r["aria-rowcount"],al=r.accessibilityRowCount,Wr=r["aria-rowindex"],ll=r.accessibilityRowIndex,ee=r["aria-rowspan"],Qe=r.accessibilityRowSpan,Lt=r["aria-selected"],Er=r.accessibilitySelected,Hr=r["aria-setsize"],ul=r.accessibilitySetSize,Ai=r["aria-sort"],Sv=r.accessibilitySort,If=r["aria-valuemax"],cl=r.accessibilityValueMax,pc=r["aria-valuemin"],Rf=r.accessibilityValueMin,hl=r["aria-valuenow"],Uo=r.accessibilityValueNow,Cf=r["aria-valuetext"],Kr=r.accessibilityValueText,$o=r.dataSet,zo=r.focusable,dl=r.id,mc=r.nativeID,gc=r.pointerEvents,Ev=r.style,_s=r.tabIndex,xf=r.testID,Q=On(r,Nz),Af=N||k,Ln=XO.propsToAriaRole(e),ws=i??s;ws!=null&&(Q["aria-activedescendant"]=ws);var qr=o!=null?i:a;qr!=null&&(Q["aria-atomic"]=qr);var fl=l??u;fl!=null&&(Q["aria-autocomplete"]=fl);var Pf=c??d;Pf!=null&&(Q["aria-busy"]=Pf);var yc=f??p;yc!=null&&(Q["aria-checked"]=yc);var vc=g??S;vc!=null&&(Q["aria-colcount"]=vc);var _c=T??_;_c!=null&&(Q["aria-colindex"]=_c);var pl=y??v;pl!=null&&(Q["aria-colspan"]=pl);var ml=C??D;ml!=null&&(Q["aria-controls"]=Sl(ml));var wc=O??b;wc!=null&&(Q["aria-current"]=wc);var Sc=E??R;Sc!=null&&(Q["aria-describedby"]=Sl(Sc));var Ec=x??P;Ec!=null&&(Q["aria-details"]=Ec),Af===!0&&(Q["aria-disabled"]=!0,(t==="button"||t==="form"||t==="input"||t==="select"||t==="textarea")&&(Q.disabled=!0));var kf=de??fe;kf!=null&&(Q["aria-errormessage"]=kf);var Tr=je??Re;Tr!=null&&(Q["aria-expanded"]=Tr);var Vn=U??Y;Vn!=null&&(Q["aria-flowto"]=Sl(Vn));var Ss=ie??we;Ss!=null&&(Q["aria-haspopup"]=Ss);var Es=Pe??hn;Es===!0&&(Q["aria-hidden"]=Es);var gl=lt??zt;gl!=null&&(Q["aria-invalid"]=gl);var Be=gt??Ke;Be!=null&&(Q["aria-keyshortcuts"]=Sl(Be));var Wo=Nt??Mn;Wo!=null&&(Q["aria-label"]=Wo);var Ts=Ri??fs;Ts!=null&&(Q["aria-labelledby"]=Sl(Ts));var bs=wr??zr;bs!=null&&(Q["aria-level"]=bs);var Tc=nr??Lo;Tc!=null&&(Q["aria-live"]=Tc==="none"?"off":Tc);var bc=ps??Vo;bc!=null&&(Q["aria-modal"]=bc);var Df=ms??De;Df!=null&&(Q["aria-multiline"]=Df);var Of=et??Nn;Of!=null&&(Q["aria-multiselectable"]=Of);var Mf=rr??gs;Mf!=null&&(Q["aria-orientation"]=Mf);var Nf=Fo??Sr;Nf!=null&&(Q["aria-owns"]=Sl(Nf));var Is=Bo??rl;Is!=null&&(Q["aria-placeholder"]=Is);var Gr=ys??fc;Gr!=null&&(Q["aria-posinset"]=Gr);var Ic=il??sl;Ic!=null&&(Q["aria-pressed"]=Ic);var Rc=jo??Ci;Rc!=null&&(Q["aria-readonly"]=Rc,(t==="input"||t==="select"||t==="textarea")&&(Q.readOnly=!0));var Cc=vs??Ue;Cc!=null&&(Q["aria-required"]=Cc,(t==="input"||t==="select"||t==="textarea")&&(Q.required=Ue)),Ln!=null&&(Q.role=Ln==="none"?"presentation":Ln);var xc=ir??ol;xc!=null&&(Q["aria-roledescription"]=xc);var Ac=xi??al;Ac!=null&&(Q["aria-rowcount"]=Ac);var Pi=Wr??ll;Pi!=null&&(Q["aria-rowindex"]=Pi);var Lf=ee??Qe;Lf!=null&&(Q["aria-rowspan"]=Lf);var Vf=Lt??Er;Vf!=null&&(Q["aria-selected"]=Vf);var Ff=Hr??ul;Ff!=null&&(Q["aria-setsize"]=Ff);var br=Ai??Sv;br!=null&&(Q["aria-sort"]=br);var Bf=If??cl;Bf!=null&&(Q["aria-valuemax"]=Bf);var yl=pc??Rf;yl!=null&&(Q["aria-valuemin"]=yl);var Ho=hl??Uo;Ho!=null&&(Q["aria-valuenow"]=Ho);var Pc=Cf??Kr;if(Pc!=null&&(Q["aria-valuetext"]=Pc),$o!=null){for(var ki in $o)if(Vz.call($o,ki)){var Ko=Uz(ki),kc=$o[ki];kc!=null&&(Q["data-"+Ko]=kc)}}_s===0||_s==="0"||_s===-1||_s==="-1"?Q.tabIndex=_s:(zo===!1&&(Q.tabIndex="-1"),t==="a"||t==="button"||t==="input"||t==="select"||t==="textarea"?(zo===!1||k===!0)&&(Q.tabIndex="-1"):Ln==="button"||Ln==="checkbox"||Ln==="link"||Ln==="radio"||Ln==="textbox"||Ln==="switch"?zo!==!1&&(Q.tabIndex="0"):zo===!0&&(Q.tabIndex="0"));var vl=Ae([Ev,gc&&$z[gc]],ye({writingDirection:"ltr"},n)),qe=vl[0],jf=vl[1];qe&&(Q.className=qe),jf&&(Q.style=jf);var Uf=dl??mc;return Uf!=null&&(Q.id=Uf),xf!=null&&(Q["data-testid"]=xf),Q.type==null&&t==="button"&&(Q.type="button"),Q},Wz=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),jC=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","far","glk","he","iw","khw","ks","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]),UC=new Map;function Hz(t){var e=UC.get(t);if(e)return e;var n=!1;if(Intl.Locale)try{var r=new Intl.Locale(t).maximize().script;n=Wz.has(r)}catch{var i=t.split("-")[0];n=jC.has(i)}else{var s=t.split("-")[0];n=jC.has(s)}return UC.set(t,n),n}var Kz={direction:"ltr",locale:"en-US"},AM=I.createContext(Kz);function Cy(t){return Hz(t)?"rtl":"ltr"}function qz(t){var e=t.direction,n=t.locale,r=t.children,i=e||n;return i?yt.createElement(AM.Provider,{children:r,value:{direction:n?Cy(n):e,locale:n}}):r}function lT(){return I.useContext(AM)}var Qu=(t,e,n)=>{var r;t&&t.constructor===String&&(r=XO.propsToAccessibilityComponent(e));var i=r||t,s=zz(i,e,n),o=yt.createElement(i,s),a=s.dir?yt.createElement(qz,{children:o,direction:s.dir,locale:s.lang}):o;return a},RS=t=>{if(t!=null){var e=t.nodeType===1;if(e&&typeof t.getBoundingClientRect=="function")return t.getBoundingClientRect()}},kh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},Gz=["ms","Moz","O","Webkit"],Xz=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(kh).forEach(t=>{Gz.forEach(e=>{kh[Xz(e,t)]=kh[t]})});function Qz(t,e,n){var r=e==null||typeof e=="boolean"||e==="";return r?"":!n&&typeof e=="number"&&e!==0&&!(kh.hasOwnProperty(t)&&kh[t])?e+"px":(""+e).trim()}function Yz(t,e){var n=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=Qz(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var $C=t=>{var e=t.offsetHeight,n=t.offsetWidth,r=t.offsetLeft,i=t.offsetTop;for(t=t.offsetParent;t&&t.nodeType===1;)r+=t.offsetLeft+t.clientLeft-t.scrollLeft,i+=t.offsetTop+t.clientTop-t.scrollTop,t=t.offsetParent;return i-=window.scrollY,r-=window.scrollX,{width:n,height:e,top:i,left:r}},zC=(t,e,n)=>{var r=e||t&&t.parentNode;t&&r&&setTimeout(()=>{if(t.isConnected&&r.isConnected){var i=$C(r),s=$C(t),o=s.height,a=s.left,l=s.top,u=s.width,c=a-i.left,d=l-i.top;n(c,d,u,o,a,l)}},0)},Jz={A:!0,BODY:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0},Hi={blur(t){try{t.blur()}catch{}},focus(t){try{var e=t.nodeName;t.getAttribute("tabIndex")==null&&t.isContentEditable!==!0&&Jz[e]==null&&t.setAttribute("tabIndex","-1"),t.focus()}catch{}},measure(t,e){zC(t,null,e)},measureInWindow(t,e){t&&setTimeout(()=>{var n=RS(t),r=n.height,i=n.left,s=n.top,o=n.width;e(i,s,o,r)},0)},measureLayout(t,e,n,r){zC(t,e,r)},updateView(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];switch(n){case"style":{Yz(t,r);break}case"class":case"className":{t.setAttribute("class",r);break}case"text":case"value":t.value=r;break;default:t.setAttribute(n,r)}}},configureNextLayoutAnimation(t,e){e()},setLayoutAnimationEnabledExperimental(){}},Zz={OS:"web"};function cn(){return cn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cn.apply(null,arguments)}var uT={children:!0,dataSet:!0,dir:!0,id:!0,ref:!0,suppressHydrationWarning:!0,tabIndex:!0,testID:!0,focusable:!0,nativeID:!0},cT={"aria-activedescendant":!0,"aria-atomic":!0,"aria-autocomplete":!0,"aria-busy":!0,"aria-checked":!0,"aria-colcount":!0,"aria-colindex":!0,"aria-colspan":!0,"aria-controls":!0,"aria-current":!0,"aria-describedby":!0,"aria-details":!0,"aria-disabled":!0,"aria-errormessage":!0,"aria-expanded":!0,"aria-flowto":!0,"aria-haspopup":!0,"aria-hidden":!0,"aria-invalid":!0,"aria-keyshortcuts":!0,"aria-label":!0,"aria-labelledby":!0,"aria-level":!0,"aria-live":!0,"aria-modal":!0,"aria-multiline":!0,"aria-multiselectable":!0,"aria-orientation":!0,"aria-owns":!0,"aria-placeholder":!0,"aria-posinset":!0,"aria-pressed":!0,"aria-readonly":!0,"aria-required":!0,role:!0,"aria-roledescription":!0,"aria-rowcount":!0,"aria-rowindex":!0,"aria-rowspan":!0,"aria-selected":!0,"aria-setsize":!0,"aria-sort":!0,"aria-valuemax":!0,"aria-valuemin":!0,"aria-valuenow":!0,"aria-valuetext":!0,accessibilityActiveDescendant:!0,accessibilityAtomic:!0,accessibilityAutoComplete:!0,accessibilityBusy:!0,accessibilityChecked:!0,accessibilityColumnCount:!0,accessibilityColumnIndex:!0,accessibilityColumnSpan:!0,accessibilityControls:!0,accessibilityCurrent:!0,accessibilityDescribedBy:!0,accessibilityDetails:!0,accessibilityDisabled:!0,accessibilityErrorMessage:!0,accessibilityExpanded:!0,accessibilityFlowTo:!0,accessibilityHasPopup:!0,accessibilityHidden:!0,accessibilityInvalid:!0,accessibilityKeyShortcuts:!0,accessibilityLabel:!0,accessibilityLabelledBy:!0,accessibilityLevel:!0,accessibilityLiveRegion:!0,accessibilityModal:!0,accessibilityMultiline:!0,accessibilityMultiSelectable:!0,accessibilityOrientation:!0,accessibilityOwns:!0,accessibilityPlaceholder:!0,accessibilityPosInSet:!0,accessibilityPressed:!0,accessibilityReadOnly:!0,accessibilityRequired:!0,accessibilityRole:!0,accessibilityRoleDescription:!0,accessibilityRowCount:!0,accessibilityRowIndex:!0,accessibilityRowSpan:!0,accessibilitySelected:!0,accessibilitySetSize:!0,accessibilitySort:!0,accessibilityValueMax:!0,accessibilityValueMin:!0,accessibilityValueNow:!0,accessibilityValueText:!0},hT={onClick:!0,onAuxClick:!0,onContextMenu:!0,onGotPointerCapture:!0,onLostPointerCapture:!0,onPointerCancel:!0,onPointerDown:!0,onPointerEnter:!0,onPointerMove:!0,onPointerLeave:!0,onPointerOut:!0,onPointerOver:!0,onPointerUp:!0},dT={onBlur:!0,onFocus:!0},fT={onKeyDown:!0,onKeyDownCapture:!0,onKeyUp:!0,onKeyUpCapture:!0},pT={onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0},mT={onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0},gT={style:!0};function yT(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&e[r]===!0&&(n[r]=t[r]);return n}var CS=Dt?I.useLayoutEffect:I.useEffect,xS="__reactLayoutHandler",c_=null;function e5(){return Dt&&typeof window.ResizeObserver<"u"&&c_==null&&(c_=new window.ResizeObserver(function(t){t.forEach(e=>{var n=e.target,r=n[xS];typeof r=="function"&&Hi.measure(n,(i,s,o,a,l,u)=>{var c={nativeEvent:{layout:{x:i,y:s,width:o,height:a,left:l,top:u}},timeStamp:Date.now()};Object.defineProperty(c.nativeEvent,"target",{enumerable:!0,get:()=>e.target}),r(c)})})})),c_}function vT(t,e){var n=e5();CS(()=>{var r=t.current;r!=null&&(r[xS]=e)},[t,e]),CS(()=>{var r=t.current;return r!=null&&n!=null&&(typeof r[xS]=="function"?n.observe(r):n.unobserve(r)),()=>{r!=null&&n!=null&&n.unobserve(r)}},[t,n])}function PM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){e.forEach(s=>{if(s!=null){if(typeof s=="function"){s(i);return}if(typeof s=="object"){s.current=i;return}console.error("mergeRefs cannot handle Refs of type boolean, number or string, received ref "+String(s))}})}}function Yd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.useMemo(()=>PM(...e),[...e])}var WC=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():Object.freeze({});function t5(t){var e=I.useRef(WC);return e.current===WC&&(e.current=t()),e.current}function _T(t){t.pointerEvents,t.style;var e=t5(()=>n=>{n!=null&&(n.measure=r=>Hi.measure(n,r),n.measureLayout=(r,i,s)=>Hi.measureLayout(n,r,s,i),n.measureInWindow=r=>Hi.measureInWindow(n,r))});return e}var HC=()=>{},n5={},r5=[];function KC(t){return t>20?t%20:t}function kM(t,e){var n,r=!1,i,s,o=t.changedTouches,a=t.type,l=t.metaKey===!0,u=t.shiftKey===!0,c=o&&o[0].force||0,d=KC(o&&o[0].identifier||0),f=o&&o[0].clientX||t.clientX,p=o&&o[0].clientY||t.clientY,g=o&&o[0].pageX||t.pageX,S=o&&o[0].pageY||t.pageY,T=typeof t.preventDefault=="function"?t.preventDefault.bind(t):HC,_=t.timeStamp;function y(b){return Array.prototype.slice.call(b).map(E=>({force:E.force,identifier:KC(E.identifier),get locationX(){return D(E.clientX)},get locationY(){return O(E.clientY)},pageX:E.pageX,pageY:E.pageY,target:E.target,timestamp:_}))}if(o!=null)i=y(o),s=y(t.touches);else{var v=[{force:c,identifier:d,get locationX(){return D(f)},get locationY(){return O(p)},pageX:g,pageY:S,target:t.target,timestamp:_}];i=v,s=a==="mouseup"||a==="dragstart"?r5:v}var C={bubbles:!0,cancelable:!0,currentTarget:null,defaultPrevented:t.defaultPrevented,dispatchConfig:n5,eventPhase:t.eventPhase,isDefaultPrevented(){return t.defaultPrevented},isPropagationStopped(){return r},isTrusted:t.isTrusted,nativeEvent:{altKey:!1,ctrlKey:!1,metaKey:l,shiftKey:u,changedTouches:i,force:c,identifier:d,get locationX(){return D(f)},get locationY(){return O(p)},pageX:g,pageY:S,target:t.target,timestamp:_,touches:s,type:a},persist:HC,preventDefault:T,stopPropagation(){r=!0},target:t.target,timeStamp:_,touchHistory:e.touchHistory};function D(b){if(n=n||RS(C.currentTarget),n)return b-n.left}function O(b){if(n=n||RS(C.currentTarget),n)return b-n.top}return C}var i5="mousedown",s5="mousemove",o5="mouseup",a5="dragstart",l5="touchstart",u5="touchmove",c5="touchend",h5="touchcancel",d5="scroll",f5="select",p5="selectionchange";function DM(t){return t===l5||t===i5}function OM(t){return t===u5||t===s5}function MM(t){return t===c5||t===o5||NM(t)}function NM(t){return t===h5||t===a5}function m5(t){return t===d5}function g5(t){return t===f5||t===p5}function y5(){var t=window.getSelection(),e=t.toString(),n=t.anchorNode,r=t.focusNode,i=n&&n.nodeType===window.Node.TEXT_NODE||r&&r.nodeType===window.Node.TEXT_NODE;return e.length>=1&&e!==`
`&&i}var LM="__reactResponderId";function v5(t){if(t.type==="selectionchange"){var e=window.getSelection().anchorNode;return qC(e)}else{var n=t.composedPath!=null?t.composedPath():qC(t.target);return n}}function qC(t){for(var e=[];t!=null&&t!==document.body;)e.push(t),t=t.parentNode;return e}function _5(t){return t!=null?t[LM]:null}function w5(t,e){t!=null&&(t[LM]=e)}function S5(t){for(var e=[],n=[],r=v5(t),i=0;i<r.length;i++){var s=r[i],o=_5(s);o!=null&&(e.push(o),n.push(s))}return{idPath:e,nodePath:n}}function E5(t,e){var n=t.length,r=e.length;if(n===0||r===0||t[n-1]!==e[r-1])return null;var i=t[0],s=0,o=e[0],a=0;n-r>0&&(s=n-r,i=t[s],n=r),r-n>0&&(a=r-n,o=e[a],r=n);for(var l=n;l--;){if(i===o)return i;i=t[s++],o=e[a++]}return null}function T5(t,e){if(!e||e.length===0)return!1;for(var n=0;n<e.length;n++){var r=e[n].target;if(r!=null&&t.contains(r))return!0}return!1}function b5(t){return t.type==="selectionchange"?y5():t.type==="select"}function I5(t){var e=t.altKey,n=t.button,r=t.buttons,i=t.ctrlKey,s=t.type,o=s==="touchstart"||s==="touchmove",a=s==="mousedown"&&(n===0||r===1),l=s==="mousemove"&&r===1,u=e===!1&&i===!1;return!!(o||a&&u||l&&u)}var GC=20;function pr(t){return t.timeStamp||t.timestamp}function R5(t){return{touchActive:!0,startPageX:t.pageX,startPageY:t.pageY,startTimeStamp:pr(t),currentPageX:t.pageX,currentPageY:t.pageY,currentTimeStamp:pr(t),previousPageX:t.pageX,previousPageY:t.pageY,previousTimeStamp:pr(t)}}function C5(t,e){t.touchActive=!0,t.startPageX=e.pageX,t.startPageY=e.pageY,t.startTimeStamp=pr(e),t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=pr(e),t.previousPageX=e.pageX,t.previousPageY=e.pageY,t.previousTimeStamp=pr(e)}function wT(t){var e=t.identifier;return e==null&&console.error("Touch object is missing identifier."),e}function x5(t,e){var n=wT(t),r=e.touchBank[n];r?C5(r,t):e.touchBank[n]=R5(t),e.mostRecentTimeStamp=pr(t)}function A5(t,e){var n=e.touchBank[wT(t)];n?(n.touchActive=!0,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=pr(t),e.mostRecentTimeStamp=pr(t)):console.warn(`Cannot record touch move without a touch start.
`,"Touch Move: "+VM(t)+`
`,"Touch Bank: "+FM(e))}function P5(t,e){var n=e.touchBank[wT(t)];n?(n.touchActive=!1,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=pr(t),e.mostRecentTimeStamp=pr(t)):console.warn(`Cannot record touch end without a touch start.
`,"Touch End: "+VM(t)+`
`,"Touch Bank: "+FM(e))}function VM(t){return JSON.stringify({identifier:t.identifier,pageX:t.pageX,pageY:t.pageY,timestamp:pr(t)})}function FM(t){var e=t.touchBank,n=JSON.stringify(e.slice(0,GC));return e.length>GC&&(n+=" (original size: "+e.length+")"),n}class k5{constructor(){this._touchHistory={touchBank:[],numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0}}recordTouchTrack(e,n){var r=this._touchHistory;if(OM(e))n.changedTouches.forEach(a=>A5(a,r));else if(DM(e))n.changedTouches.forEach(a=>x5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1&&(r.indexOfSingleActiveTouch=n.touches[0].identifier);else if(MM(e)&&(n.changedTouches.forEach(a=>P5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1))for(var i=r.touchBank,s=0;s<i.length;s++){var o=i[s];if(o!=null&&o.touchActive){r.indexOfSingleActiveTouch=s;break}}}get touchHistory(){return this._touchHistory}}var D5={},XC=["onStartShouldSetResponderCapture","onStartShouldSetResponder",{bubbles:!0}],QC=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder",{bubbles:!0}],O5=["onScrollShouldSetResponderCapture","onScrollShouldSetResponder",{bubbles:!1}],M5={touchstart:XC,mousedown:XC,touchmove:QC,mousemove:QC,scroll:O5},AS={id:null,idPath:null,node:null},lg=new Map,Bs=!1,Jr=0,ii={id:null,node:null,idPath:null},PS=new k5;function vd(t){ii=t}function _d(t){var e=lg.get(t);return e??D5}function h_(t){var e=t.type,n=t.target;if(e==="touchstart"&&(Bs=!0),(e==="touchmove"||Jr>1)&&(Bs=!1),!(e==="mousedown"&&Bs||e==="mousemove"&&Bs||e==="mousemove"&&Jr<1)){if(Bs&&e==="mouseup"){Jr===0&&(Bs=!1);return}var r=DM(e)&&I5(t),i=OM(e),s=MM(e),o=m5(e),a=g5(e),l=kM(t,PS);(r||i||s)&&(t.touches?Jr=t.touches.length:r?Jr=1:s&&(Jr=0),PS.recordTouchTrack(e,l.nativeEvent));var u=S5(t),c=!1,d;if(r||i||o&&Jr>0){var f=ii.idPath,p=u.idPath;if(f!=null&&p!=null){var g=E5(f,p);if(g!=null){var S=p.indexOf(g),T=S+(g===ii.id?1:0);u={idPath:p.slice(T),nodePath:u.nodePath.slice(T)}}else u=null}u!=null&&(d=N5(u,t,l),d!=null&&(L5(l,d),c=!0))}if(ii.id!=null&&ii.node!=null){var _=ii,y=_.id,v=_.node,C=_d(y),D=C.onResponderStart,O=C.onResponderMove,b=C.onResponderEnd,E=C.onResponderRelease,R=C.onResponderTerminate,x=C.onResponderTerminationRequest;if(l.bubbles=!1,l.cancelable=!1,l.currentTarget=v,r)D!=null&&(l.dispatchConfig.registrationName="onResponderStart",D(l));else if(i)O!=null&&(l.dispatchConfig.registrationName="onResponderMove",O(l));else{var P=NM(e)||e==="contextmenu"||e==="blur"&&n===window||e==="blur"&&n.contains(v)&&t.relatedTarget!==v||o&&Jr===0||o&&n.contains(v)&&n!==v||a&&b5(t),N=s&&!P&&!T5(v,t.touches);if(s&&b!=null&&(l.dispatchConfig.registrationName="onResponderEnd",b(l)),N&&(E!=null&&(l.dispatchConfig.registrationName="onResponderRelease",E(l)),vd(AS)),P){var k=!0;(e==="contextmenu"||e==="scroll"||e==="selectionchange")&&(c?k=!1:x!=null&&(l.dispatchConfig.registrationName="onResponderTerminationRequest",x(l)===!1&&(k=!1))),k&&(R!=null&&(l.dispatchConfig.registrationName="onResponderTerminate",R(l)),vd(AS),Bs=!1,Jr=0)}}}}}function N5(t,e,n){var r=M5[e.type];if(r!=null){for(var i=t.idPath,s=t.nodePath,o=r[0],a=r[1],l=r[2].bubbles,u=function(O,b,E){var R=_d(O),x=R[E];if(x!=null&&(n.currentTarget=b,x(n)===!0)){var P=i.slice(i.indexOf(O));return{id:O,node:b,idPath:P}}},c=i.length-1;c>=0;c--){var d=i[c],f=s[c],p=u(d,f,o);if(p!=null)return p;if(n.isPropagationStopped()===!0)return}if(l)for(var g=0;g<i.length;g++){var S=i[g],T=s[g],_=u(S,T,a);if(_!=null)return _;if(n.isPropagationStopped()===!0)return}else{var y=i[0],v=s[0],C=e.target;if(C===v)return u(y,v,a)}}}function L5(t,e){var n=ii,r=n.id,i=n.node,s=e.id,o=e.node,a=_d(s),l=a.onResponderGrant,u=a.onResponderReject;if(t.bubbles=!1,t.cancelable=!1,t.currentTarget=o,r==null)l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),vd(e);else{var c=_d(r),d=c.onResponderTerminate,f=c.onResponderTerminationRequest,p=!0;f!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminationRequest",f(t)===!1&&(p=!1)),p?(d!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminate",d(t)),l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),vd(e)):u!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderReject",u(t))}}var V5=["blur","scroll"],F5=["mousedown","mousemove","mouseup","dragstart","touchstart","touchmove","touchend","touchcancel","contextmenu","select","selectionchange"];function B5(){Dt&&window.__reactResponderSystemActive==null&&(window.addEventListener("blur",h_),F5.forEach(t=>{document.addEventListener(t,h_)}),V5.forEach(t=>{document.addEventListener(t,h_,!0)}),window.__reactResponderSystemActive=!0)}function j5(t,e,n){w5(e,t),lg.set(t,n)}function YC(t){ii.id===t&&U5(),lg.has(t)&&lg.delete(t)}function U5(){var t=ii,e=t.id,n=t.node;if(e!=null&&n!=null){var r=_d(e),i=r.onResponderTerminate;if(i!=null){var s=kM({},PS);s.currentTarget=n,i(s)}vd(AS)}Bs=!1,Jr=0}function $5(){return ii.node}var z5={},W5=0;function H5(t){var e=I.useRef(null);return e.current==null&&(e.current=t()),e.current}function ST(t,e){e===void 0&&(e=z5);var n=H5(()=>W5++),r=I.useRef(!1);I.useEffect(()=>(B5(),()=>{YC(n)}),[n]),I.useEffect(()=>{var i=e,s=i.onMoveShouldSetResponder,o=i.onMoveShouldSetResponderCapture,a=i.onScrollShouldSetResponder,l=i.onScrollShouldSetResponderCapture,u=i.onSelectionChangeShouldSetResponder,c=i.onSelectionChangeShouldSetResponderCapture,d=i.onStartShouldSetResponder,f=i.onStartShouldSetResponderCapture,p=s!=null||o!=null||a!=null||l!=null||u!=null||c!=null||d!=null||f!=null,g=t.current;p?(j5(n,g,e),r.current=!0):r.current&&(YC(n),r.current=!1)},[e,t,n]),I.useDebugValue({isResponder:t.current===$5()}),I.useDebugValue(e)}var ug=I.createContext(!1),K5=["hrefAttrs","onLayout","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture"],q5=Object.assign({},uT,cT,hT,dT,fT,pT,mT,gT,{href:!0,lang:!0,onScroll:!0,onWheel:!0,pointerEvents:!0}),G5=t=>yT(t,q5),X=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.onLayout,i=t.onMoveShouldSetResponder,s=t.onMoveShouldSetResponderCapture,o=t.onResponderEnd,a=t.onResponderGrant,l=t.onResponderMove,u=t.onResponderReject,c=t.onResponderRelease,d=t.onResponderStart,f=t.onResponderTerminate,p=t.onResponderTerminationRequest,g=t.onScrollShouldSetResponder,S=t.onScrollShouldSetResponderCapture,T=t.onSelectionChangeShouldSetResponder,_=t.onSelectionChangeShouldSetResponderCapture,y=t.onStartShouldSetResponder,v=t.onStartShouldSetResponderCapture,C=On(t,K5),D=I.useContext(ug),O=I.useRef(null),b=lT(),E=b.direction;vT(O,r),ST(O,{onMoveShouldSetResponder:i,onMoveShouldSetResponderCapture:s,onResponderEnd:o,onResponderGrant:a,onResponderMove:l,onResponderReject:u,onResponderRelease:c,onResponderStart:d,onResponderTerminate:f,onResponderTerminationRequest:p,onScrollShouldSetResponder:g,onScrollShouldSetResponderCapture:S,onSelectionChangeShouldSetResponder:T,onSelectionChangeShouldSetResponderCapture:_,onStartShouldSetResponder:y,onStartShouldSetResponderCapture:v});var R="div",x=t.lang!=null?Cy(t.lang):null,P=t.dir||x,N=P||E,k=G5(C);if(k.dir=P,k.style=[JC.view$raw,D&&JC.inline,t.style],t.href!=null&&(R="a",n!=null)){var de=n.download,fe=n.rel,je=n.target;de!=null&&(k.download=de),fe!=null&&(k.rel=fe),typeof je=="string"&&(k.target=je.charAt(0)!=="_"?"_"+je:je)}var Re=_T(k),U=Yd(O,Re,e);return k.ref=U,Qu(R,k,{writingDirection:N})});X.displayName="View";var JC=Ae.create({view$raw:{alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",zIndex:0},inline:{display:"inline-flex"}}),X5=function t(e,n,r){if(r===void 0&&(r=-1),r===0)return!0;if(e===n||typeof e=="function"&&typeof n=="function")return!1;if(typeof e!="object"||e===null)return e!==n;if(typeof n!="object"||n===null||e.constructor!==n.constructor)return!0;if(Array.isArray(e)){var i=e.length;if(n.length!==i)return!0;for(var s=0;s<i;s++)if(t(e[s],n[s],r-1))return!0}else{for(var o in e)if(t(e[o],n[o],r-1))return!0;for(var a in n)if(e[a]===void 0&&n[a]!==void 0)return!0}return!1};function Q5(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!t){var s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;s=new Error(e.replace(/%s/g,function(){return String(r[o++])})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}var Y5=Q5;const ge=Ku(Y5);function ZC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function J5(t,e){if(t){if(typeof t=="string")return ZC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZC(t,e):void 0}}function ma(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=J5(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Z5=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function e9(t){t.colors,t.enabled,t.onRefresh,t.progressBackgroundColor,t.progressViewOffset,t.refreshing,t.size,t.tintColor,t.title,t.titleColor;var e=On(t,Z5);return yt.createElement(X,e)}var ga={window:{fontScale:1,height:0,scale:1,width:0},screen:{fontScale:1,height:0,scale:1,width:0}},zs={},ex=Dt;function BM(){if(Dt){var t=window,e,n;if(t.visualViewport){var r=t.visualViewport;e=Math.round(r.height*r.scale),n=Math.round(r.width*r.scale)}else{var i=t.document.documentElement;e=i.clientHeight,n=i.clientWidth}ga.window={fontScale:1,height:e,scale:t.devicePixelRatio||1,width:n},ga.screen={fontScale:1,height:t.screen.height,scale:t.devicePixelRatio||1,width:t.screen.width}}}function tx(){BM(),Array.isArray(zs.change)&&zs.change.forEach(t=>t(ga))}class cg{static get(e){return ex&&(ex=!1,BM()),ge(ga[e],"No dimension set for key "+e),ga[e]}static set(e){e&&(Dt?ge(!1,"Dimensions cannot be set in the browser"):(e.screen!=null&&(ga.screen=e.screen),e.window!=null&&(ga.window=e.window)))}static addEventListener(e,n){return zs[e]=zs[e]||[],zs[e].push(n),{remove:()=>{this.removeEventListener(e,n)}}}static removeEventListener(e,n){Array.isArray(zs[e])&&(zs[e]=zs[e].filter(r=>r!==n))}}Dt&&(window.visualViewport?window.visualViewport.addEventListener("resize",tx,!1):window.addEventListener("resize",tx,!1));var ji={_currentlyFocusedNode:null,currentlyFocusedField(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput(t){t!==null&&(this._currentlyFocusedNode=t,document.activeElement!==t&&Hi.focus(t))},blurTextInput(t){t!==null&&(this._currentlyFocusedNode=null,document.activeElement===t&&Hi.blur(t))}},t9=()=>{ji.blurTextInput(ji.currentlyFocusedField())},n9=["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"];function nx(t){return{nativeEvent:{contentOffset:{get x(){return t.target.scrollLeft},get y(){return t.target.scrollTop}},contentSize:{get height(){return t.target.scrollHeight},get width(){return t.target.scrollWidth}},layoutMeasurement:{get height(){return t.target.offsetHeight},get width(){return t.target.offsetWidth}}},timeStamp:Date.now()}}function r9(t,e){var n=Date.now()-t;return e>0&&n>=e}var i9=I.forwardRef((t,e)=>{var n=t.onScroll,r=t.onTouchMove,i=t.onWheel,s=t.scrollEnabled,o=s===void 0?!0:s,a=t.scrollEventThrottle,l=a===void 0?0:a,u=t.showsHorizontalScrollIndicator,c=t.showsVerticalScrollIndicator,d=t.style,f=On(t,n9),p=I.useRef({isScrolling:!1,scrollLastTick:0}),g=I.useRef(null),S=I.useRef(null);function T(O){return b=>{o&&O&&O(b)}}function _(O){O.stopPropagation(),O.target===S.current&&(O.persist(),g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{C(O)},100),p.current.isScrolling?r9(p.current.scrollLastTick,l)&&v(O):y(O))}function y(O){p.current.isScrolling=!0,v(O)}function v(O){p.current.scrollLastTick=Date.now(),n&&n(nx(O))}function C(O){p.current.isScrolling=!1,n&&n(nx(O))}var D=u===!1||c===!1;return I.createElement(X,cn({},f,{onScroll:_,onTouchMove:T(r),onWheel:T(i),ref:Yd(S,e),style:[d,!o&&rx.scrollDisabled,D&&rx.hideScrollbar]}))}),rx=Ae.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});function xy(t){return function(){return t}}var Za=function(){};Za.thatReturns=xy;Za.thatReturnsFalse=xy(!1);Za.thatReturnsTrue=xy(!0);Za.thatReturnsNull=xy(null);Za.thatReturnsThis=function(){return this};Za.thatReturnsArgument=function(t){return t};var s9=Za,o9=s9,a9=o9,l9=a9;const u9=Ku(l9);var c9=["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll","centerContent"],ix={},h9=16;class d9 extends yt.Component{constructor(){super(...arguments),this._scrollNodeRef=null,this._innerViewRef=null,this.isTouching=!1,this.lastMomentumScrollBeginTime=0,this.lastMomentumScrollEndTime=0,this.observedScrollSinceBecomingResponder=!1,this.becameResponderWhileAnimating=!1,this.scrollResponderHandleScrollShouldSetResponder=()=>this.isTouching,this.scrollResponderHandleStartShouldSetResponderCapture=e=>this.scrollResponderIsAnimating(),this.scrollResponderHandleTerminationRequest=()=>!this.observedScrollSinceBecomingResponder,this.scrollResponderHandleTouchEnd=e=>{var n=e.nativeEvent;this.isTouching=n.touches.length!==0,this.props.onTouchEnd&&this.props.onTouchEnd(e)},this.scrollResponderHandleResponderRelease=e=>{this.props.onResponderRelease&&this.props.onResponderRelease(e);var n=ji.currentlyFocusedField();!this.props.keyboardShouldPersistTaps&&n!=null&&e.target!==n&&!this.observedScrollSinceBecomingResponder&&!this.becameResponderWhileAnimating&&(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),ji.blurTextInput(n))},this.scrollResponderHandleScroll=e=>{this.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},this.scrollResponderHandleResponderGrant=e=>{this.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},this.scrollResponderHandleScrollBeginDrag=e=>{this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},this.scrollResponderHandleScrollEndDrag=e=>{this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},this.scrollResponderHandleMomentumScrollBegin=e=>{this.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},this.scrollResponderHandleMomentumScrollEnd=e=>{this.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},this.scrollResponderHandleTouchStart=e=>{this.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},this.scrollResponderHandleTouchMove=e=>{this.props.onTouchMove&&this.props.onTouchMove(e)},this.scrollResponderIsAnimating=()=>{var e=Date.now(),n=e-this.lastMomentumScrollEndTime,r=n<h9||this.lastMomentumScrollEndTime<this.lastMomentumScrollBeginTime;return r},this.scrollResponderScrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||ix;e=i.x,n=i.y,r=i.animated}var s=this.getScrollableNode(),o=e||0,a=n||0;s!=null&&(typeof s.scroll=="function"?s.scroll({top:a,left:o,behavior:r?"smooth":"auto"}):(s.scrollLeft=o,s.scrollTop=a))},this.scrollResponderZoomTo=(e,n)=>{ge("zoomToRect is not implemented")},this.scrollResponderScrollNativeHandleToKeyboard=(e,n,r)=>{this.additionalScrollOffset=n||0,this.preventNegativeScrollOffset=!!r,Hi.measureLayout(e,this.getInnerViewNode(),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},this.scrollResponderInputMeasureAndScrollToKeyboard=(e,n,r,i)=>{var s=cg.get("window").height;this.keyboardWillOpenTo&&(s=this.keyboardWillOpenTo.endCoordinates.screenY);var o=n-s+i+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(o=Math.max(0,o)),this.scrollResponderScrollTo({x:0,y:o,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},this.scrollResponderKeyboardWillShow=e=>{this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},this.scrollResponderKeyboardWillHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},this.scrollResponderKeyboardDidShow=e=>{e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},this.scrollResponderKeyboardDidHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)},this.flashScrollIndicators=()=>{this.scrollResponderFlashScrollIndicators()},this.getScrollResponder=()=>this,this.getScrollableNode=()=>this._scrollNodeRef,this.getInnerViewRef=()=>this._innerViewRef,this.getInnerViewNode=()=>this._innerViewRef,this.getNativeScrollRef=()=>this._scrollNodeRef,this.scrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||ix;n=i.x,e=i.y,r=i.animated}this.scrollResponderScrollTo({x:n||0,y:e||0,animated:r!==!1})},this.scrollToEnd=e=>{var n=(e&&e.animated)!==!1,r=this.props.horizontal,i=this.getScrollableNode(),s=r?i.scrollWidth:0,o=r?0:i.scrollHeight;this.scrollResponderScrollTo({x:s,y:o,animated:n})},this._handleContentOnLayout=e=>{var n=e.nativeEvent.layout,r=n.width,i=n.height;this.props.onContentSizeChange(r,i)},this._handleScroll=e=>{this.props.keyboardDismissMode==="on-drag"&&t9(),this.scrollResponderHandleScroll(e)},this._setInnerViewRef=e=>{this._innerViewRef=e},this._setScrollNodeRef=e=>{this._scrollNodeRef=e,e!=null&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard);var n=PM(this.props.forwardedRef);n(e)}}scrollResponderHandleStartShouldSetResponder(){return!1}scrollResponderHandleResponderReject(){u9(!1,"ScrollView doesn't take rejection well - scrolls anyway")}scrollResponderFlashScrollIndicators(){}scrollResponderTextInputFocusError(e){console.error("Error measuring text field: ",e)}render(){var e=this.props,n=e.contentContainerStyle,r=e.horizontal,i=e.onContentSizeChange,s=e.refreshControl,o=e.stickyHeaderIndices,a=e.pagingEnabled;e.forwardedRef,e.keyboardDismissMode,e.onScroll;var l=e.centerContent,u=On(e,c9),c={};i&&(c={onLayout:this._handleContentOnLayout});var d=!r&&Array.isArray(o),f=d||a?yt.Children.map(this.props.children,(v,C)=>{var D=d&&o.indexOf(C)>-1;return v!=null&&(D||a)?yt.createElement(X,{style:[D&&Ds.stickyHeader,a&&Ds.pagingEnabledChild]},v):v}):this.props.children,p=yt.createElement(X,cn({},c,{children:f,collapsable:!1,ref:this._setInnerViewRef,style:[r&&Ds.contentContainerHorizontal,l&&Ds.contentContainerCenterContent,n]})),g=r?Ds.baseHorizontal:Ds.baseVertical,S=r?Ds.pagingEnabledHorizontal:Ds.pagingEnabledVertical,T=ye(ye({},u),{},{style:[g,a&&S,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),_=i9;ge(_!==void 0,"ScrollViewClass must not be undefined");var y=yt.createElement(_,cn({},T,{ref:this._setScrollNodeRef}),p);return s?yt.cloneElement(s,{style:T.style},y):y}}var sx={flexGrow:1,flexShrink:1,transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},Ds=Ae.create({baseVertical:ye(ye({},sx),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:ye(ye({},sx),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},contentContainerCenterContent:{justifyContent:"center",flexGrow:1},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),Lr=yt.forwardRef((t,e)=>yt.createElement(d9,cn({},t,{forwardedRef:e})));Lr.displayName="ScrollView";class f9{constructor(e){var n=e.onMoreTasks;this._onMoreTasks=n,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(n=>this.enqueue(n))}cancelTasks(e){this._queueStack=this._queueStack.map(n=>ye(ye({},n),{},{tasks:n.tasks.filter(r=>e.indexOf(r)===-1)})).filter((n,r)=>n.tasks.length>0||r===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var n=e.shift();try{typeof n=="object"&&n.gen?this._genPromise(n):typeof n=="object"&&n.run?n.run():(ge(typeof n=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(n,null,2)),n())}catch(r){throw r.message="TaskQueue: Error with task "+(n.name||"")+": "+r.message,r}}}_getCurrentQueue(){var e=this._queueStack.length-1,n=this._queueStack[e];return n.popable&&n.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}_genPromise(e){var n=this._queueStack.push({tasks:[],popable:!1}),r=n-1,i=this._queueStack[r];e.gen().then(()=>{i.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(s=>{setTimeout(()=>{throw s.message="TaskQueue: Error resolving Promise in task "+e.name+": "+s.message,s},0)})}}class p9{constructor(){this._registry={}}addListener(e,n,r){var i=m9(this._registry,e),s={context:r,listener:n,remove(){i.delete(s)}};return i.add(s),s}emit(e){var n=this._registry[e];if(n!=null){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var o=0,a=[...n];o<a.length;o++){var l=a[o];l.listener.apply(l.context,i)}}}removeAllListeners(e){e==null?this._registry={}:delete this._registry[e]}listenerCount(e){var n=this._registry[e];return n==null?0:n.size}}function m9(t,e){var n=t[e];return n==null&&(n=new Set,t[e]=n),n}var g9=function(e,n){return setTimeout(()=>{var r=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}})},1)},y9=Dt&&typeof window.requestIdleCallback<"u",v9=y9?window.requestIdleCallback:g9,hg=new p9,kS={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(t){var e=[],n=new Promise(r=>{Dh(),t&&e.push(t),e.push({run:r,name:"resolve "+(t&&t.name||"?")}),fg.enqueueTasks(e)});return{then:n.then.bind(n),done:n.then.bind(n),cancel:()=>{fg.cancelTasks(e)}}},createInteractionHandle(){Dh();var t=++_9;return dg.add(t),t},clearInteractionHandle(t){ge(!!t,"Must provide a handle to clear."),Dh(),dg.delete(t),DS.add(t)},addListener:hg.addListener.bind(hg),setDeadline(t){pg=t}},pp=new Set,dg=new Set,DS=new Set,fg=new f9({onMoreTasks:Dh}),tm=0,_9=0,pg=-1;function Dh(){tm||(pg>0?tm=setTimeout(ox):tm=v9(ox))}function ox(){tm=0;var t=pp.size;dg.forEach(r=>pp.add(r)),DS.forEach(r=>pp.delete(r));var e=pp.size;if(t!==0&&e===0?hg.emit(kS.Events.interactionComplete):t===0&&e!==0&&hg.emit(kS.Events.interactionStart),e===0){for(var n=Date.now();fg.hasTasksToProcess();)if(fg.processNext(),pg>0&&Date.now()-n>=pg){Dh();break}}dg.clear(),DS.clear()}class w9{constructor(e,n){this._delay=n,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=kS.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function ax(t,e,n){return e<t?t:e>n?n:e}function S9(){return console.log(...arguments)}class E9{constructor(e){ge(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(ge(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var n=this._findRegion(e.first),r=n[0],i=n[1],s=this._findRegion(e.last),o=s[0],a=s[1];if(!(i===a&&!r.isSpacer)){var l=[],u=[],c=ye(ye({},e),{},{isSpacer:!1});r.first<c.first&&(r.isSpacer?l.push({first:r.first,last:c.first-1,isSpacer:!0}):c.first=r.first),o.last>c.last&&(o.isSpacer?u.push({first:c.last+1,last:o.last,isSpacer:!0}):c.last=o.last);var d=[...l,c,...u],f=a-i+1;this._regions.splice(i,f,...d)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((n,r)=>n.first===e._regions[r].first&&n.last===e._regions[r].last&&n.isSpacer===e._regions[r].isSpacer)}_findRegion(e){for(var n=0,r=this._regions.length-1;n<=r;){var i=Math.floor((n+r)/2),s=this._regions[i];if(e>=s.first&&e<=s.last)return[s,i];e<s.first?r=i-1:e>s.last&&(n=i+1)}ge(!1,"A region was not found containing cellIdx "+e)}}class T9{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,n){var r;ge(!this._childrenToCellKey.has(e),"Trying to add already present child list");var i=(r=this._cellKeyToChildren.get(n))!==null&&r!==void 0?r:new Set;i.add(e),this._cellKeyToChildren.set(n,i),this._childrenToCellKey.set(e,n)}remove(e){var n=this._childrenToCellKey.get(e);ge(n!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var r=this._cellKeyToChildren.get(n);ge(r,"_cellKeyToChildren should contain cellKey"),r.delete(e),r.size===0&&this._cellKeyToChildren.delete(n)}forEach(e){for(var n=ma(this._cellKeyToChildren.values()),r;!(r=n()).done;)for(var i=r.value,s=ma(i),o;!(o=s()).done;){var a=o.value;e(a)}}forEachInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ma(i),o;!(o=s()).done;){var a=o.value;n(a)}}anyInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ma(i),o;!(o=s()).done;){var a=o.value;if(n(a))return!0}return!1}size(){return this._childrenToCellKey.size}}class lx{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var mp=[],ux=10,d_=null;class b9{static addListener(e){return d_===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),mp.push(e),{remove:()=>{mp=mp.filter(n=>e!==n)}}}static setSampleRate(e){d_=e}static setMinSampleCount(e){ux=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new lx,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(d_||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<ux){this._resetData();return}var n=global.performance.now()-e,r=ye(ye({},this._info),{},{total_time_spent:n});mp.forEach(i=>i(r)),this._resetData()}}}computeBlankness(e,n,r){if(!this._enabled||e.getItemCount(e.data)===0||n.last<n.first||this._samplesStartTime==null)return 0;var i=r.dOffset,s=r.offset,o=r.velocity,a=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(a),this._info.pixels_scrolled+=Math.round(Math.abs(i));var l=Math.round(Math.abs(o)*1e3),u=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=u-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=u-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var c=0,d=n.first,f=this._getFrameMetrics(d,e);d<=n.last&&(!f||!f.inLayout);)f=this._getFrameMetrics(d,e),d++;f&&d>0&&(c=Math.min(a,Math.max(0,f.offset-s)));for(var p=0,g=n.last,S=this._getFrameMetrics(g,e);g>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(g,e),g--;if(S&&g<e.getItemCount(e.data)-1){var T=S.offset+S.length;p=Math.min(a,Math.max(0,s+a-T))}var _=Math.round(c+p),y=_/a;return y>0?(this._anyBlankStartTime=u,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=_,y>.5&&(this._mostlyBlankStartTime=u,this._info.mostly_blank_count++)):(l<.01||Math.abs(i)<1)&&this.deactivateAndFlush(),y}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new lx,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class I9 extends I.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,n){typeof e=="function"?super.setState((r,i)=>{this._inAsyncStateUpdate=!0;var s;try{s=e(r,i)}catch(o){throw o}finally{this._inAsyncStateUpdate=!1}return s},n):super.setState(e,n)}_installSetStateHooks(){var e=this,n=this.props,r=this.state;Object.defineProperty(this,"props",{get(){return ge(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),n},set(i){n=i}}),Object.defineProperty(this,"state",{get(){return ge(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),r},set(i){r=i}})}}class cx{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,n,r,i,s){var o=e.getItemCount(e.data),a=this._config,l=a.itemVisiblePercentThreshold,u=a.viewAreaCoveragePercentThreshold,c=u!=null,d=c?u:l;ge(d!=null&&l!=null!=(u!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var f=[];if(o===0)return f;var p=-1,g=s||{first:0,last:o-1},S=g.first,T=g.last;if(T>=o)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:s,itemCount:o})),[];for(var _=S;_<=T;_++){var y=i(_,e);if(y){var v=y.offset-n,C=v+y.length;if(v<r&&C>0)p=_,R9(c,d,v,C,r,y.length)&&f.push(_);else if(p>=0)break}}return f}onUpdate(e,n,r,i,s,o,a){var l=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||l===0||!i(0,e))){var u=[];if(l&&(u=this.computeViewableItems(e,n,r,i,a)),!(this._viewableIndices.length===u.length&&this._viewableIndices.every((d,f)=>d===u[f])))if(this._viewableIndices=u,this._config.minimumViewTime){var c=setTimeout(()=>{this._timers.delete(c),this._onUpdateSync(e,u,o,s)},this._config.minimumViewTime);this._timers.add(c)}else this._onUpdateSync(e,u,o,s)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,n,r,i){n=n.filter(y=>this._viewableIndices.includes(y));for(var s=this._viewableItems,o=new Map(n.map(y=>{var v=i(y,!0,e);return[v.key,v]})),a=[],l=ma(o),u;!(u=l()).done;){var c=u.value,d=c[0],f=c[1];s.has(d)||a.push(f)}for(var p=ma(s),g;!(g=p()).done;){var S=g.value,T=S[0],_=S[1];o.has(T)||a.push(ye(ye({},_),{},{isViewable:!1}))}a.length>0&&(this._viewableItems=o,r({viewableItems:Array.from(o.values()),changed:a,viewabilityConfig:this._config}))}}function R9(t,e,n,r,i,s){if(x9(n,r,i))return!0;var o=C9(n,r,i),a=100*(t?o/i:o/s);return a>=e}function C9(t,e,n){var r=Math.min(e,n)-Math.max(t,0);return Math.max(0,r)}function x9(t,e,n){return t>=0&&e<=n&&e>t}var mg=I.createContext(null);function A9(t){var e=t.children,n=t.value,r=I.useMemo(()=>({cellKey:null,getScrollMetrics:n.getScrollMetrics,horizontal:n.horizontal,getOutermostParentListRef:n.getOutermostParentListRef,registerAsNestedChild:n.registerAsNestedChild,unregisterAsNestedChild:n.unregisterAsNestedChild}),[n.getScrollMetrics,n.horizontal,n.getOutermostParentListRef,n.registerAsNestedChild,n.unregisterAsNestedChild]);return I.createElement(mg.Provider,{value:r},e)}function nm(t){var e=t.cellKey,n=t.children,r=I.useContext(mg),i=I.useMemo(()=>r==null?null:ye(ye({},r),{},{cellKey:e}),[r,e]);return I.createElement(mg.Provider,{value:i},n)}class P9 extends I.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!0})},unhighlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!1})},updateProps:(e,n)=>{var r=this.props,i=r.cellKey,s=r.prevCellKey;this.props.onUpdateSeparators([e==="leading"?s:i],n)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,n){return{separatorProps:ye(ye({},n.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(n=>({separatorProps:ye(ye({},n.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,n,r,i){if(e&&n&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),n)return I.createElement(n,{item:r,index:i,separators:this._separators});if(e)return e({item:r,index:i,separators:this._separators});ge(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,n=e.CellRendererComponent,r=e.ItemSeparatorComponent,i=e.ListItemComponent,s=e.cellKey,o=e.horizontal,a=e.item,l=e.index,u=e.inversionStyle,c=e.onCellFocusCapture,d=e.onCellLayout,f=e.renderItem,p=this._renderElement(f,i,a,l),g=I.isValidElement(r)?r:r&&I.createElement(r,this.state.separatorProps),S=u?o?[f_.rowReverse,u]:[f_.columnReverse,u]:o?[f_.row,u]:u,T=n?I.createElement(n,cn({cellKey:s,index:l,item:a,style:S,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g):I.createElement(X,cn({style:S,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g);return I.createElement(nm,{cellKey:this.props.cellKey},T)}}var f_=Ae.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function k9(t,e,n,r){r===void 0&&(r=1);for(var i=e.getItemCount(e.data),s=[],o=0;o<t.length;o++)for(var a=t[o],l=0,u=i-1;l<=u;){var c=l+(u-l>>>1),d=n(c,e),f=d.offset*r,p=(d.offset+d.length)*r;if(c===0&&a<f||c!==0&&a<=f)u=c-1;else if(a>p)l=c+1;else{s[o]=c;break}}return s}function D9(t,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,t.last)-Math.max(e.first,t.first))}function O9(t,e,n,r,i,s){var o=t.getItemCount(t.data);if(o===0)return{first:0,last:-1};var a=s.offset,l=s.velocity,u=s.visibleLength,c=s.zoomScale,d=c===void 0?1:c,f=Math.max(0,a),p=f+u,g=(n-1)*u,S=.5,T=l>1?"after":l<-1?"before":"none",_=Math.max(0,f-(1-S)*g),y=Math.max(0,p+S*g),v=i(o-1,t).offset*d;if(v<_)return{first:Math.max(0,o-1-e),last:o-1};var C=k9([_,f,p,y],t,i,d),D=C[0],O=C[1],b=C[2],E=C[3];D=D??0,O=O??Math.max(0,D),E=E??o-1,b=b??Math.min(E,O+e-1);for(var R={first:O,last:b},x=D9(r,R);!(O<=D&&b>=E);){var P=x>=e,N=O<=r.first||O>r.last,k=O>D&&(!P||!N),de=b>=r.last||b<r.first,fe=b<E&&(!P||!de);if(P&&!k&&!fe)break;k&&!(T==="after"&&fe&&de)&&(N&&x++,O--),fe&&!(T==="before"&&k&&N)&&(de&&x++,b++)}if(!(b>=O&&O>=0&&b<o&&O>=D&&b<=E&&O<=R.first&&b>=R.last))throw new Error("Bad window calculation "+JSON.stringify({first:O,last:b,itemCount:o,overscanFirst:D,overscanLast:E,visible:R}));return{first:O,last:b}}function OS(t,e){return typeof t=="object"&&(t==null?void 0:t.key)!=null?t.key:typeof t=="object"&&(t==null?void 0:t.id)!=null?t.id:String(e)}var Ay={exports:{}};function jM(t,e){if(t!=null)return t;var n=new Error(e!==void 0?e:"Got unexpected "+t);throw n.framesToPop=1,n}Ay.exports=jM;Ay.exports.default=jM;Object.defineProperty(Ay.exports,"__esModule",{value:!0});var M9=Ay.exports;const N9=Ku(M9);var hx=.001,p_=!1,m_="";function Xo(t){return t??!1}function L9(t){return t??10}function g_(t){return t??10}function V9(t){return t??2}function dx(t){return t??2}function fx(t,e){return t*e/2}function F9(t){return t??50}function px(t){return t??21}function B9(t,e){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return t[n];return null}class or extends I9{scrollToEnd(e){var n=e?e.animated:!0,r=this.props.getItemCount(this.props.data)-1;if(!(r<0)){var i=this.__getFrameMetricsApprox(r,this.props),s=Math.max(0,i.offset+i.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Xo(this.props.horizontal)?{x:s,animated:n}:{y:s,animated:n})}}}scrollToIndex(e){var n=this.props,r=n.data,i=n.horizontal,s=n.getItemCount,o=n.getItemLayout,a=n.onScrollToIndexFailed,l=e.animated,u=e.index,c=e.viewOffset,d=e.viewPosition;if(ge(u>=0,"scrollToIndex out of range: requested index "+u+" but minimum is 0"),ge(s(r)>=1,"scrollToIndex out of range: item length "+s(r)+" but minimum is 1"),ge(u<s(r),"scrollToIndex out of range: requested index "+u+" is out of 0 to "+(s(r)-1)),!o&&u>this._highestMeasuredFrameIndex){ge(!!a,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),a({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:u});return}var f=this.__getFrameMetricsApprox(Math.floor(u),this.props),p=Math.max(0,this._getOffsetApprox(u,this.props)-(d||0)*(this._scrollMetrics.visibleLength-f.length))-(c||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(i?{x:p,animated:l}:{y:p,animated:l})}}scrollToItem(e){for(var n=e.item,r=this.props,i=r.data,s=r.getItem,o=r.getItemCount,a=o(i),l=0;l<a;l++)if(s(i,l)===n){this.scrollToIndex(ye(ye({},e),{},{index:l}));break}}scrollToOffset(e){var n=e.animated,r=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Xo(this.props.horizontal)?{x:r,animated:n}:{y:r,animated:n})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var n;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=a=>{this._nestedChildLists.add(a.ref,a.cellKey),this._hasInteracted&&a.ref.recordInteraction()},this._unregisterAsNestedChild=a=>{this._nestedChildLists.remove(a.ref)},this._onUpdateSeparators=(a,l)=>{a.forEach(u=>{var c=u!=null&&this._cellRefs[u];c&&c.updateSeparatorProps(l)})},this._getSpacerKey=a=>a?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new T9,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=a=>{this._scrollRef=a},this._defaultRenderScrollComponent=a=>{var l=a.onRefresh;if(this._isNestedWithSameOrientation())return I.createElement(X,a);if(l){var u;return ge(typeof a.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((u=a.refreshing)!==null&&u!==void 0?u:"undefined")+"`"),I.createElement(Lr,cn({},a,{refreshControl:a.refreshControl==null?I.createElement(e9,{refreshing:a.refreshing,onRefresh:l,progressViewOffset:a.progressViewOffset}):a.refreshControl}))}else return I.createElement(Lr,a)},this._onCellLayout=(a,l,u)=>{var c=a.nativeEvent.layout,d={offset:this._selectOffset(c),length:this._selectLength(c),index:u,inLayout:!0},f=this._frames[l];!f||d.offset!==f.offset||d.length!==f.length||u!==f.index?(this._totalCellLength+=d.length-(f?f.length:0),this._totalCellsMeasured+=f?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[l]=d,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,u),this._scheduleCellsToRenderUpdate()):this._frames[l].inLayout=!0,this._triggerRemeasureForChildListsInCell(l),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=a=>{delete this._cellRefs[a];var l=this._frames[a];l&&(this._frames[a]=ye(ye({},l),{},{inLayout:!1}))},this._onLayout=a=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(a.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(a),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=a=>{this.props.onLayout&&this.props.onLayout(a)},this._onLayoutFooter=a=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(a.nativeEvent.layout)},this._onLayoutHeader=a=>{this._headerLength=this._selectLength(a.nativeEvent.layout)},this._onContentSizeChange=(a,l)=>{a>0&&l>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:N9(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(a,l),this._scrollMetrics.contentLength=this._selectLength({height:l,width:a}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=a=>{var l=a.offset-this._offsetFromParentVirtualizedList,u=a.visibleLength,c=l-this._scrollMetrics.offset,d=this._scrollMetrics.contentLength;return{visibleLength:u,contentLength:d,offset:l,dOffset:c}},this._onScroll=a=>{this._nestedChildLists.forEach(_=>{_._onScroll(a)}),this.props.onScroll&&this.props.onScroll(a);var l=a.timeStamp,u=this._selectLength(a.nativeEvent.layoutMeasurement),c=this._selectLength(a.nativeEvent.contentSize),d=this._selectOffset(a.nativeEvent.contentOffset),f=d-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var p=this._convertParentScrollMetrics({visibleLength:u,offset:d});u=p.visibleLength,c=p.contentLength,d=p.offset,f=p.dOffset}var g=this._scrollMetrics.timestamp?Math.max(1,l-this._scrollMetrics.timestamp):1,S=f/g;g>500&&this._scrollMetrics.dt>500&&c>5*u&&!this._hasWarned.perf&&(S9("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:g,prevDt:this._scrollMetrics.dt,contentLength:c}),this._hasWarned.perf=!0);var T=a.nativeEvent.zoomScale<0?1:a.nativeEvent.zoomScale;this._scrollMetrics={contentLength:c,dt:g,dOffset:f,offset:d,timestamp:l,velocity:S,visibleLength:u,zoomScale:T},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),S!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=a=>{this._nestedChildLists.forEach(l=>{l._onScrollBeginDrag(a)}),this._viewabilityTuples.forEach(l=>{l.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(a)},this._onScrollEndDrag=a=>{this._nestedChildLists.forEach(u=>{u._onScrollEndDrag(a)});var l=a.nativeEvent.velocity;l&&(this._scrollMetrics.velocity=this._selectOffset(l)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(a)},this._onMomentumScrollBegin=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollBegin(a)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(a)},this._onMomentumScrollEnd=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollEnd(a)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(a)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((a,l)=>{var u=this._adjustCellsAroundViewport(l,a.cellsAroundViewport),c=or._createRenderMask(l,u,this._getNonViewportRenderRegions(l));return u.first===a.cellsAroundViewport.first&&u.last===a.cellsAroundViewport.last&&c.equals(a.renderMask)?null:{cellsAroundViewport:u,renderMask:c}})},this._createViewToken=(a,l,u)=>{var c=u.data,d=u.getItem,f=d(c,a);return{index:a,item:f,key:this._keyExtractor(f,a,u),isViewable:l}},this._getOffsetApprox=(a,l)=>{if(Number.isInteger(a))return this.__getFrameMetricsApprox(a,l).offset;var u=this.__getFrameMetricsApprox(Math.floor(a),l),c=a-Math.floor(a);return u.offset+c*u.length},this.__getFrameMetricsApprox=(a,l)=>{var u=this._getFrameMetrics(a,l);if(u&&u.index===a)return u;var c=l.data,d=l.getItemCount,f=l.getItemLayout;return ge(a>=0&&a<d(c),"Tried to get frame for out of range index "+a),ge(!f,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*a}},this._getFrameMetrics=(a,l)=>{var u=l.data,c=l.getItem,d=l.getItemCount,f=l.getItemLayout;ge(a>=0&&a<d(u),"Tried to get frame for out of range index "+a);var p=c(u,a),g=this._frames[this._keyExtractor(p,a,l)];return(!g||g.index!==a)&&f?f(u,a):g},this._getNonViewportRenderRegions=a=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var l=this._cellRefs[this._lastFocusedCellKey],u=l.props.index,c=a.getItemCount(a.data);if(u>=c||this._keyExtractor(a.getItem(a.data,u),u,a)!==this._lastFocusedCellKey)return[];for(var d=u,f=0,p=d-1;p>=0&&f<this._scrollMetrics.visibleLength;p--)d--,f+=this.__getFrameMetricsApprox(p,a).length;for(var g=u,S=0,T=g+1;T<c&&S<this._scrollMetrics.visibleLength;T++)g++,S+=this.__getFrameMetricsApprox(T,a).length;return[{first:d,last:g}]},this._checkProps(e),this._fillRateHelper=new b9(this._getFrameMetrics),this._updateCellsToRenderBatcher=new w9(this._updateCellsToRender,(n=this.props.updateCellsBatchingPeriod)!==null&&n!==void 0?n:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(a=>({viewabilityHelper:new cx(a.viewabilityConfig),onViewableItemsChanged:a.onViewableItemsChanged}));else{var r=this.props,i=r.onViewableItemsChanged,s=r.viewabilityConfig;i&&this._viewabilityTuples.push({viewabilityHelper:new cx(s),onViewableItemsChanged:i})}var o=or._initialRenderRegion(e);this.state={cellsAroundViewport:o,renderMask:or._createRenderMask(e,o)},this.invertedWheelEventHandler=a=>{var l=this.props.horizontal?a.target.scrollLeft:a.target.scrollTop,u=this.props.horizontal?a.target.scrollWidth:a.target.scrollHeight,c=this.props.horizontal?a.target.clientWidth:a.target.clientHeight,d=u>c,f=this.props.horizontal?a.deltaX||a.wheelDeltaX:a.deltaY||a.wheelDeltaY,p=f;d&&(p=f<0?Math.min(f+l,0):Math.max(f-(u-c-l),0));var g=f-p;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var S=this._scrollRef.getScrollableNode();if(this.props.horizontal){a.target.scrollLeft+=g;var T=S.scrollLeft-p;S.scrollLeft=this.props.getItemLayout?T:Math.min(T,this._totalCellLength)}else{a.target.scrollTop+=g;var _=S.scrollTop-p;S.scrollTop=this.props.getItemLayout?_:Math.min(_,this._totalCellLength)}a.preventDefault()}}}_checkProps(e){var n=e.onScroll,r=e.windowSize,i=e.getItemCount,s=e.data,o=e.initialScrollIndex;ge(!n||!n.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),ge(px(r)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),ge(i,'VirtualizedList: The "getItemCount" prop must be provided');var a=i(s);o!=null&&!this._hasTriggeredInitialScrollToIndex&&(o<0||a>0&&o>=a)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+o+'" is not valid (list has '+a+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,n,r){var i=e.getItemCount(e.data);ge(n.first>=0&&n.last>=n.first-1&&n.last<i,'Invalid cells around viewport "['+n.first+", "+n.last+']" was passed to VirtualizedList._createRenderMask');var s=new E9(i);if(i>0){for(var o=[n,...r??[]],a=0,l=o;a<l.length;a++){var u=l[a];s.addCells(u)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var c=or._initialRenderRegion(e);s.addCells(c)}var d=new Set(e.stickyHeaderIndices);or._ensureClosestStickyHeader(e,d,s,n.first)}return s}static _initialRenderRegion(e){var n,r=e.getItemCount(e.data),i=Math.max(0,Math.min(r-1,Math.floor((n=e.initialScrollIndex)!==null&&n!==void 0?n:0))),s=Math.min(r,i+L9(e.initialNumToRender))-1;return{first:i,last:s}}static _ensureClosestStickyHeader(e,n,r,i){for(var s=e.ListHeaderComponent?1:0,o=i-1;o>=0;o--)if(n.has(o+s)){r.addCells({first:o,last:o});break}}_adjustCellsAroundViewport(e,n){var r=e.data,i=e.getItemCount,s=dx(e.onEndReachedThreshold),o=this._scrollMetrics,a=o.contentLength,l=o.offset,u=o.visibleLength,c=a-u-l;if(u<=0||a<=0)return n.last>=i(r)?or._constrainToItemCount(n,e):n;var d;if(e.disableVirtualization){var f=c<s*u?g_(e.maxToRenderPerBatch):0;d={first:0,last:Math.min(n.last+f,i(r)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(c)>=Number.EPSILON)return n.last>=i(r)?or._constrainToItemCount(n,e):n;d=O9(e,g_(e.maxToRenderPerBatch),px(e.windowSize),n,this.__getFrameMetricsApprox,this._scrollMetrics),ge(d.last<i(r),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var p=this._findFirstChildWithMore(d.first,d.last);d.last=p??d.last}return d}_findFirstChildWithMore(e,n){for(var r=e;r<=n;r++){var i=this._indicesToKeys.get(r);if(i!=null&&this._nestedChildLists.anyInCell(i,s=>s.hasMore()))return r}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,n){var r=e.getItemCount(e.data);if(r===n.renderMask.numCells())return n;var i=or._constrainToItemCount(n.cellsAroundViewport,e);return{cellsAroundViewport:i,renderMask:or._createRenderMask(e,i)}}_pushCells(e,n,r,i,s,o){var a=this,l=this.props,u=l.CellRendererComponent,c=l.ItemSeparatorComponent,d=l.ListHeaderComponent,f=l.ListItemComponent,p=l.data,g=l.debug,S=l.getItem,T=l.getItemCount,_=l.getItemLayout,y=l.horizontal,v=l.renderItem,C=d?1:0,D=T(p)-1,O;s=Math.min(D,s);for(var b=function(){var x=S(p,E),P=a._keyExtractor(x,E,a.props);a._indicesToKeys.set(E,P),r.has(E+C)&&n.push(e.length);var N=_==null||g||a._fillRateHelper.enabled();e.push(I.createElement(P9,cn({CellRendererComponent:u,ItemSeparatorComponent:E<D?c:void 0,ListItemComponent:f,cellKey:P,horizontal:y,index:E,inversionStyle:o,item:x,key:P,prevCellKey:O,onUpdateSeparators:a._onUpdateSeparators,onCellFocusCapture:k=>a._onCellFocusCapture(P),onUnmount:a._onCellUnmount,ref:k=>{a._cellRefs[P]=k},renderItem:v},N&&{onCellLayout:a._onCellLayout}))),O=P},E=i;E<=s;E++)b()}static _constrainToItemCount(e,n){var r=n.getItemCount(n.data),i=Math.min(r-1,e.last),s=g_(n.maxToRenderPerBatch);return{first:ax(0,r-1-s,e.first),last:i}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===Xo(this.props.horizontal))}_keyExtractor(e,n,r){if(r.keyExtractor!=null)return r.keyExtractor(e,n);var i=OS(e,n);return i===String(n)&&(p_=!0,e.type&&e.type.displayName&&(m_=e.type.displayName)),i}render(){this._checkProps(this.props);var e=this.props,n=e.ListEmptyComponent,r=e.ListFooterComponent,i=e.ListHeaderComponent,s=this.props,o=s.data,a=s.horizontal,l=this.props.inverted?Xo(this.props.horizontal)?Cr.horizontallyInverted:Cr.verticallyInverted:null,u=[],c=new Set(this.props.stickyHeaderIndices),d=[];if(i){c.has(0)&&d.push(0);var f=I.isValidElement(i)?i:I.createElement(i,null);u.push(I.createElement(nm,{cellKey:this._getCellKey()+"-header",key:"$header"},I.createElement(X,{onLayout:this._onLayoutHeader,style:[l,this.props.ListHeaderComponentStyle]},f)))}var p=this.props.getItemCount(o);if(p===0&&n){var g=I.isValidElement(n)?n:I.createElement(n,null);u.push(I.createElement(nm,{cellKey:this._getCellKey()+"-empty",key:"$empty"},I.cloneElement(g,{onLayout:fe=>{this._onLayoutEmpty(fe),g.props.onLayout&&g.props.onLayout(fe)},style:[l,g.props.style]})))}if(p>0){p_=!1,m_="";for(var S=this._getSpacerKey(!a),T=this.state.renderMask.enumerateRegions(),_=B9(T,fe=>fe.isSpacer),y=ma(T),v;!(v=y()).done;){var C=v.value;if(C.isSpacer){if(this.props.disableVirtualization)continue;var D=C===_,O=D&&!this.props.getItemLayout,b=O?ax(C.first-1,C.last,this._highestMeasuredFrameIndex):C.last,E=this.__getFrameMetricsApprox(C.first,this.props),R=this.__getFrameMetricsApprox(b,this.props),x=R.offset+R.length-E.offset;u.push(I.createElement(X,{key:"$spacer-"+C.first,style:{[S]:x}}))}else this._pushCells(u,d,c,C.first,C.last,l)}!this._hasWarned.keys&&p_&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",m_),this._hasWarned.keys=!0)}if(r){var P=I.isValidElement(r)?r:I.createElement(r,null);u.push(I.createElement(nm,{cellKey:this._getFooterCellKey(),key:"$footer"},I.createElement(X,{onLayout:this._onLayoutFooter,style:[l,this.props.ListFooterComponentStyle]},P)))}var N=ye(ye({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:F9(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:d,style:l?[l,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<p-1;var k=I.createElement(A9,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:Xo(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},I.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(N),{ref:this._captureScrollRef},u)),de=k;return this.props.debug?I.createElement(X,{style:Cr.debug},de,this._renderDebugOverlay()):de}componentDidUpdate(e){var n=this.props,r=n.data,i=n.extraData;(r!==e.data||i!==e.extraData)&&this._viewabilityTuples.forEach(o=>{o.viewabilityHelper.resetViewableIndices()});var s=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),s&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,n=>{n.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,n,r,i)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:n}),this._scrollMetrics.contentLength=this._selectLength({width:r,height:i});var s=this._convertParentScrollMetrics(this.context.getScrollMetrics()),o=this._scrollMetrics.visibleLength!==s.visibleLength||this._scrollMetrics.offset!==s.offset;o&&(this._scrollMetrics.visibleLength=s.visibleLength,this._scrollMetrics.offset=s.offset,this._nestedChildLists.forEach(a=>{a.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),n=[],r=this.props.getItemCount(this.props.data),i=0;i<r;i++){var s=this.__getFrameMetricsApprox(i,this.props);s.inLayout&&n.push(s)}var o=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,a=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),l=a.offset+a.length-o,u=this._scrollMetrics.offset,c=this._scrollMetrics.visibleLength;return I.createElement(X,{style:[Cr.debugOverlayBase,Cr.debugOverlay]},n.map((d,f)=>I.createElement(X,{key:"f"+f,style:[Cr.debugOverlayBase,Cr.debugOverlayFrame,{top:d.offset*e,height:d.length*e}]})),I.createElement(X,{style:[Cr.debugOverlayBase,Cr.debugOverlayFrameLast,{top:o*e,height:l*e}]}),I.createElement(X,{style:[Cr.debugOverlayBase,Cr.debugOverlayFrameVis,{top:u*e,height:c*e}]}))}_selectLength(e){return Xo(this.props.horizontal)?e.width:e.height}_selectOffset(e){return Xo(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,n=e.data,r=e.getItemCount,i=e.onStartReached,s=e.onStartReachedThreshold,o=e.onEndReached,a=e.onEndReachedThreshold,l=e.initialScrollIndex,u=this._scrollMetrics,c=u.contentLength,d=u.visibleLength,f=u.offset,p=f,g=c-d-f;p<hx&&(p=0),g<hx&&(g=0);var S=2,T=s!=null?s*d:S,_=a!=null?a*d:S,y=p<=T,v=g<=_;o&&this.state.cellsAroundViewport.last===r(n)-1&&v&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,o({distanceFromEnd:g})):i!=null&&this.state.cellsAroundViewport.first===0&&y&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!l||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,i({distanceFromStart:p})):(this._sentStartForContentLength=y?this._sentStartForContentLength:0,this._sentEndForContentLength=v?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,n=e.first,r=e.last,i=this._scrollMetrics,s=i.offset,o=i.visibleLength,a=i.velocity,l=this.props.getItemCount(this.props.data),u=!1,c=V9(this.props.onStartReachedThreshold),d=dx(this.props.onEndReachedThreshold);if(n>0){var f=s-this.__getFrameMetricsApprox(n,this.props).offset;u=f<0||a<-2&&f<fx(c,o)}if(!u&&r>=0&&r<l-1){var p=this.__getFrameMetricsApprox(r,this.props).offset-(s+o);u=p<0||a>2&&p<fx(d,o)}if(u&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,n){this._viewabilityTuples.forEach(r=>{r.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,r.onViewableItemsChanged,n)})}}or.contextType=mg;var Cr=Ae.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),mx=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function j9(t,e){return!!(t===e||mx(t)&&mx(e))}function U9(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!j9(t[n],e[n]))return!1;return!0}function $9(t,e){e===void 0&&(e=U9);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var z9=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function W9(t){return t??Zz.OS==="android"}function Qo(t){return t??1}function H9(t){return typeof Object(t).length=="number"}class K9 extends I.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=n=>{this._listRef=n},this._getItem=(n,r)=>{var i=Qo(this.props.numColumns);if(i>1){for(var s=[],o=0;o<i;o++){var a=r*i+o;if(a<n.length){var l=n[a];s.push(l)}}return s}else return n[r]},this._getItemCount=n=>{if(n!=null&&H9(n)){var r=Qo(this.props.numColumns);return r>1?Math.ceil(n.length/r):n.length}else return 0},this._keyExtractor=(n,r)=>{var i,s=Qo(this.props.numColumns),o=(i=this.props.keyExtractor)!==null&&i!==void 0?i:OS;return s>1?(ge(Array.isArray(n),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",s),n.map((a,l)=>o(a,r*s+l)).join(":")):o(n,r)},this._renderer=(n,r,i,s,o)=>{var a=Qo(s),l=c=>n?I.createElement(n,c):r?r(c):null,u=c=>{if(a>1){var d=c.item,f=c.index;return ge(Array.isArray(d),"Expected array of items with numColumns > 1"),I.createElement(X,{style:[q9.row,i]},d.map((p,g)=>{var S=l({item:p,index:f*a+g,separators:c.separators});return S!=null?I.createElement(I.Fragment,{key:g},S):null}))}else return l(c)};return n?{ListItemComponent:u}:{renderItem:u}},this._memoizedRenderer=$9(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(n=>({viewabilityConfig:n.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(n.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){ge(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),ge(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),ge(!X5(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),ge(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var n=e.getItem,r=e.getItemCount,i=e.horizontal,s=e.columnWrapperStyle,o=e.onViewableItemsChanged,a=e.viewabilityConfigCallbackPairs,l=Qo(this.props.numColumns);ge(!n&&!r,"FlatList does not support custom data formats."),l>1?ge(!i,"numColumns does not support horizontal."):ge(!s,"columnWrapperStyle not supported for single column lists"),ge(!(o&&a),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,n){var r,i=Qo(this.props.numColumns),s=(r=this.props.keyExtractor)!==null&&r!==void 0?r:OS;n.item.forEach((o,a)=>{ge(n.index!=null,"Missing index!");var l=n.index*i+a;e.push(ye(ye({},n),{},{item:o,key:s(o,l),index:l}))})}_createOnViewableItemsChanged(e){return n=>{var r=Qo(this.props.numColumns);if(e)if(r>1){var i=[],s=[];n.viewableItems.forEach(o=>this._pushMultiColumnViewable(s,o)),n.changed.forEach(o=>this._pushMultiColumnViewable(i,o)),e({viewableItems:s,changed:i})}else e(n)}}render(){var e=this.props,n=e.numColumns,r=e.columnWrapperStyle,i=e.removeClippedSubviews,s=e.strictMode,o=s===void 0?!1:s,a=On(e,z9),l=o?this._memoizedRenderer:this._renderer;return I.createElement(or,cn({},a,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:W9(i)},l(this.props.ListItemComponent,this.props.renderItem,r,n,this.props.extraData)))}}var q9=Ae.create({row:{flexDirection:"row"}}),G9=[];function UM(t){return G9[t-1]}var X9=/^data:/;class Wn{static has(e){var n=Wn._entries,r=X9.test(e);return r||!!n[e]}static add(e){var n=Wn._entries,r=Date.now();n[e]?(n[e].lastUsedTimestamp=r,n[e].refCount+=1):n[e]={lastUsedTimestamp:r,refCount:1}}static remove(e){var n=Wn._entries;n[e]&&(n[e].refCount-=1),Wn._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var e=Wn._entries,n=Object.keys(e);if(n.length+1>Wn._maximumEntries){var r,i;n.forEach(s=>{var o=e[s];(!i||o.lastUsedTimestamp<i.lastUsedTimestamp)&&o.refCount===0&&(r=s,i=o)}),r&&delete e[r]}}}Wn._maximumEntries=256;Wn._entries={};var y_=0,gp={},ai={abort(t){var e=gp[""+t];e&&(e.onerror=null,e.onload=null,e=null,delete gp[""+t])},getSize(t,e,n){var r=!1,i=setInterval(o,16),s=ai.load(t,o,a);function o(){var l=gp[""+s];if(l){var u=l.naturalHeight,c=l.naturalWidth;u&&c&&(e(c,u),r=!0)}r&&(ai.abort(s),clearInterval(i))}function a(){typeof n=="function"&&n(),ai.abort(s),clearInterval(i)}},has(t){return Wn.has(t)},load(t,e,n){y_+=1;var r=new window.Image;return r.onerror=n,r.onload=i=>{var s=()=>e({nativeEvent:i});typeof r.decode=="function"?r.decode().then(s,s):setTimeout(s,0)},r.src=t,gp[""+y_]=r,y_},prefetch(t){return new Promise((e,n)=>{ai.load(t,()=>{Wn.add(t),Wn.remove(t),e()},n)})},queryCache(t){var e={};return t.forEach(n=>{Wn.has(n)&&(e[n]="disk/memory")}),Promise.resolve(e)}};class Oh{static get(){return cg.get("window").scale}static getFontScale(){return cg.get("window").fontScale||Oh.get()}static getPixelSizeForLayoutSize(e){return Math.round(e*Oh.get())}static roundToNearestPixel(e){var n=Oh.get();return Math.round(e*n)/n}}var Q9=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],Y9="ERRORED",v_="LOADED",gx="LOADING",J9="IDLE",Z9=0,eW=/^(data:image\/svg\+xml;utf8,)(.*)/;function tW(t,e){return t&&e!=null?I.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},I.createElement("defs",null,I.createElement("filter",{id:"tint-"+e,suppressHydrationWarning:!0},I.createElement("feFlood",{floodColor:""+t,key:t}),I.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function nW(t,e,n,r){var i=Ae.flatten(t),s=i.filter,o=i.resizeMode,a=i.shadowOffset,l=i.tintColor;i.resizeMode,i.tintColor;var u=[],c=null;if(s&&u.push(s),e&&u.push("blur("+e+"px)"),a){var d=_M(i);d&&u.push("drop-shadow("+d+")")}return(r||l)&&n!=null&&u.push("url(#tint-"+n+")"),u.length>0&&(c=u.join(" ")),[o,c,l]}function rW(t){if(typeof t=="number"){var e=UM(t),n=e.height,r=e.width;return{height:n,width:r}}else if(t!=null&&!Array.isArray(t)&&typeof t=="object"){var i=t.height,s=t.width;return{height:i,width:s}}}function __(t){var e=null;if(typeof t=="number"){var n=UM(t);if(n==null)throw new Error('Image: asset with ID "'+t+'" could not be found. Please check the image source or packager.');var r=n.scales[0];if(n.scales.length>1){var i=Oh.get();r=n.scales.reduce((c,d)=>Math.abs(d-i)<Math.abs(c-i)?d:c)}var s=r!==1?"@"+r+"x":"";e=n?n.httpServerLocation+"/"+n.name+s+"."+n.type:""}else typeof t=="string"?e=t:t&&typeof t.uri=="string"&&(e=t.uri);if(e){var o=e.match(eW);if(o){var a=o[1],l=o[2],u=encodeURIComponent(l);return""+a+u}}return e}var $M=I.forwardRef((t,e)=>{var n=t["aria-label"],r=t.accessibilityLabel,i=t.blurRadius,s=t.defaultSource,o=t.draggable,a=t.onError,l=t.onLayout,u=t.onLoad,c=t.onLoadEnd,d=t.onLoadStart,f=t.pointerEvents,p=t.source,g=t.style,S=On(t,Q9),T=n||r,_=I.useState(()=>{var Ke=__(p);if(Ke!=null){var Nt=ai.has(Ke);if(Nt)return v_}return J9}),y=_[0],v=_[1],C=I.useState({}),D=C[0],O=C[1],b=I.useContext(ug),E=I.useRef(null),R=I.useRef(Z9++),x=I.useRef(null),P=y===v_||y===gx&&s==null,N=nW(g,i,R.current,t.tintColor),k=N[0],de=N[1],fe=N[2],je=t.resizeMode||k||"cover",Re=t.tintColor||fe,U=P?p:s,Y=__(U),ie=rW(U),we=Y?'url("'+Y+'")':null,Pe=lt(),hn=Y?Qu("img",{alt:T||"",style:$c.accessibilityImage$raw,draggable:o||!1,ref:E,src:Y}):null;function lt(){if(E.current!=null&&(je==="center"||je==="repeat")){var Ke=E.current,Nt=Ke.naturalHeight,Mn=Ke.naturalWidth,Ri=D.height,fs=D.width;if(Nt&&Mn&&Ri&&fs){var wr=Math.min(1,fs/Mn,Ri/Nt),zr=Math.ceil(wr*Mn),nr=Math.ceil(wr*Nt);return zr+"px "+nr+"px"}}}function zt(Ke){if(je==="center"||je==="repeat"||l){var Nt=Ke.nativeEvent.layout;l&&l(Ke),O(Nt)}}var gt=__(p);return I.useEffect(()=>{Ke(),gt!=null&&(v(gx),d&&d(),x.current=ai.load(gt,function(Mn){v(v_),u&&u(Mn),c&&c()},function(){v(Y9),a&&a({nativeEvent:{error:"Failed to load resource "+gt}}),c&&c()}));function Ke(){x.current!=null&&(ai.abort(x.current),x.current=null)}return Ke},[gt,x,v,a,u,c,d]),I.createElement(X,cn({},S,{"aria-label":T,onLayout:zt,pointerEvents:f,ref:e,style:[$c.root,b&&$c.inline,ie,g,$c.undo,{boxShadow:null}]}),I.createElement(X,{style:[$c.image,iW[je],{backgroundImage:we,filter:de},Pe!=null&&{backgroundSize:Pe}],suppressHydrationWarning:!0}),hn,tW(Re,R.current))});$M.displayName="Image";var Ei=$M;Ei.getSize=function(t,e,n){ai.getSize(t,e,n)};Ei.prefetch=function(t){return ai.prefetch(t)};Ei.queryCache=function(t){return ai.queryCache(t)};var $c=Ae.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:ye(ye({},Ae.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:ye(ye({},Ae.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),iW=Ae.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}}),sW=["hrefAttrs","numberOfLines","onClick","onLayout","onPress","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture","selectable"],oW=Object.assign({},uT,cT,hT,dT,fT,pT,mT,gT,{href:!0,lang:!0,pointerEvents:!0}),aW=t=>yT(t,oW),G=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.numberOfLines,i=t.onClick,s=t.onLayout,o=t.onPress,a=t.onMoveShouldSetResponder,l=t.onMoveShouldSetResponderCapture,u=t.onResponderEnd,c=t.onResponderGrant,d=t.onResponderMove,f=t.onResponderReject,p=t.onResponderRelease,g=t.onResponderStart,S=t.onResponderTerminate,T=t.onResponderTerminationRequest,_=t.onScrollShouldSetResponder,y=t.onScrollShouldSetResponderCapture,v=t.onSelectionChangeShouldSetResponder,C=t.onSelectionChangeShouldSetResponderCapture,D=t.onStartShouldSetResponder,O=t.onStartShouldSetResponderCapture,b=t.selectable,E=On(t,sW),R=I.useContext(ug),x=I.useRef(null),P=lT(),N=P.direction;vT(x,s),ST(x,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:l,onResponderEnd:u,onResponderGrant:c,onResponderMove:d,onResponderReject:f,onResponderRelease:p,onResponderStart:g,onResponderTerminate:S,onResponderTerminationRequest:T,onScrollShouldSetResponder:_,onScrollShouldSetResponderCapture:y,onSelectionChangeShouldSetResponder:v,onSelectionChangeShouldSetResponderCapture:C,onStartShouldSetResponder:D,onStartShouldSetResponderCapture:O});var k=I.useCallback(zt=>{i!=null?i(zt):o!=null&&(zt.stopPropagation(),o(zt))},[i,o]),de=R?"span":"div",fe=t.lang!=null?Cy(t.lang):null,je=t.dir||fe,Re=je||N,U=aW(E);if(U.dir=je,R||(U.dir=je??"auto"),(i||o)&&(U.onClick=k),U.style=[r!=null&&r>1&&{WebkitLineClamp:r},R===!0?Yo.textHasAncestor$raw:Yo.text$raw,r===1&&Yo.textOneLine,r!=null&&r>1&&Yo.textMultiLine,t.style,b===!0&&Yo.selectable,b===!1&&Yo.notSelectable,o&&Yo.pressable],t.href!=null&&(de="a",n!=null)){var Y=n.download,ie=n.rel,we=n.target;Y!=null&&(U.download=Y),ie!=null&&(U.rel=ie),typeof we=="string"&&(U.target=we.charAt(0)!=="_"?"_"+we:we)}var Pe=_T(U),hn=Yd(x,Pe,e);U.ref=hn;var lt=Qu(de,U,{writingDirection:Re});return R?lt:I.createElement(ug.Provider,{value:!0},lt)});G.displayName="Text";var yx={backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",listStyle:"none",margin:0,padding:0,position:"relative",textAlign:"start",textDecoration:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},Yo=Ae.create({text$raw:yx,textHasAncestor$raw:ye(ye({},yx),{},{color:"inherit",font:"inherit",textAlign:"inherit",whiteSpace:"inherit"}),textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}}),lW=["animating","color","hidesWhenStopped","size","style"],vx=t=>I.createElement("circle",{cx:"16",cy:"16",fill:"none",r:"14",strokeWidth:"4",style:t}),Jd=I.forwardRef((t,e)=>{var n=t.animating,r=n===void 0?!0:n,i=t.color,s=i===void 0?"#1976D2":i,o=t.hidesWhenStopped,a=o===void 0?!0:o,l=t.size,u=l===void 0?"small":l,c=t.style,d=On(t,lW),f=I.createElement("svg",{height:"100%",viewBox:"0 0 32 32",width:"100%"},vx({stroke:s,opacity:.2}),vx({stroke:s,strokeDasharray:80,strokeDashoffset:60}));return I.createElement(X,cn({},d,{"aria-valuemax":1,"aria-valuemin":0,ref:e,role:"progressbar",style:[yp.container,c]}),I.createElement(X,{children:f,style:[typeof u=="number"?{height:u,width:u}:uW[u],yp.animation,!r&&yp.animationPause,!r&&a&&yp.hidesWhenStopped]}))});Jd.displayName="ActivityIndicator";var yp=Ae.create({container:{alignItems:"center",justifyContent:"center"},hidesWhenStopped:{visibility:"hidden"},animation:{animationDuration:"0.75s",animationKeyframes:[{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}],animationTimingFunction:"linear",animationIterationCount:"infinite"},animationPause:{animationPlayState:"paused"}}),uW=Ae.create({small:{width:20,height:20},large:{width:36,height:36}}),_x="DELAY",Ar="ERROR",wx="LONG_PRESS_DETECTED",pn="NOT_RESPONDER",Ru="RESPONDER_ACTIVE_LONG_PRESS_START",Py="RESPONDER_ACTIVE_PRESS_START",MS="RESPONDER_INACTIVE_PRESS_START",cW="RESPONDER_GRANT",rm="RESPONDER_RELEASE",zM="RESPONDER_TERMINATED",Sx=Object.freeze({NOT_RESPONDER:{DELAY:Ar,RESPONDER_GRANT:MS,RESPONDER_RELEASE:Ar,RESPONDER_TERMINATED:Ar,LONG_PRESS_DETECTED:Ar},RESPONDER_INACTIVE_PRESS_START:{DELAY:Py,RESPONDER_GRANT:Ar,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Ar},RESPONDER_ACTIVE_PRESS_START:{DELAY:Ar,RESPONDER_GRANT:Ar,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Ru},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:Ar,RESPONDER_GRANT:Ar,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Ru},ERROR:{DELAY:pn,RESPONDER_GRANT:MS,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:pn}}),WM=t=>t.getAttribute("role"),NS=t=>t.tagName.toLowerCase(),Ex=t=>t===Py||t===Ru,im=t=>WM(t)==="button",Tx=t=>t===MS||t===Py||t===Ru,hW=t=>t===zM||t===rm,bx=t=>{var e=t.key,n=t.target,r=e===" "||e==="Spacebar",i=NS(n)==="button"||im(n);return e==="Enter"||r&&i},dW=450,fW=50;class pW{constructor(e){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=pn,this._responderElement=null,this.configure(e)}configure(e){this._config=e}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var e=(i,s)=>{i.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=pn,this._isPointerTouch=i.nativeEvent.type==="touchstart",this._receiveSignal(cW,i);var o=w_(this._config.delayPressStart,0,fW);s!==!1&&o>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(_x,i)},o):this._receiveSignal(_x,i);var a=w_(this._config.delayLongPress,10,dW);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(i)},a+o)},n=i=>{this._receiveSignal(rm,i)},r=i=>{var s=this._config.onPress,o=i.target;if(this._touchState!==pn&&bx(i)){n(i),document.removeEventListener("keyup",r);var a=o.getAttribute("role"),l=NS(o),u=a==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea",c=this._responderElement===o;s!=null&&!u&&c&&s(i),this._responderElement=null}};return{onStartShouldSetResponder:i=>{var s=this._config.disabled;return s&&im(i.currentTarget)&&i.stopPropagation(),s==null?!0:!s},onKeyDown:i=>{var s=this._config.disabled,o=i.key,a=i.target;if(!s&&bx(i)){this._touchState===pn&&(e(i,!1),this._responderElement=a,document.addEventListener("keyup",r));var l=o===" "||o==="Spacebar",u=WM(a),c=u==="button"||u==="menuitem";l&&c&&NS(a)!=="button"&&i.preventDefault(),i.stopPropagation()}},onResponderGrant:i=>e(i),onResponderMove:i=>{this._config.onPressMove!=null&&this._config.onPressMove(i);var s=Ix(i);if(this._touchActivatePosition!=null){var o=this._touchActivatePosition.pageX-s.pageX,a=this._touchActivatePosition.pageY-s.pageY;Math.hypot(o,a)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:i=>n(i),onResponderTerminate:i=>{i.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(zM,i)},onResponderTerminationRequest:i=>{var s=this._config,o=s.cancelable,a=s.disabled,l=s.onLongPress;return!a&&l!=null&&this._isPointerTouch&&i.nativeEvent.type==="contextmenu"?!1:o??!0},onClick:i=>{var s=this._config,o=s.disabled,a=s.onPress;o?im(i.currentTarget)&&i.stopPropagation():(i.stopPropagation(),this._longPressDispatched||this._selectionTerminated?i.preventDefault():a!=null&&i.altKey===!1&&a(i))},onContextMenu:i=>{var s=this._config,o=s.disabled,a=s.onLongPress;o?im(i.currentTarget)&&i.stopPropagation():a!=null&&this._isPointerTouch&&!i.defaultPrevented&&(i.preventDefault(),i.stopPropagation())}}}_receiveSignal(e,n){var r=this._touchState,i=null;Sx[r]!=null&&(i=Sx[r][e]),!(this._touchState===pn&&e===rm)&&(i==null||i===Ar?console.error("PressResponder: Invalid signal "+e+" for state "+r+" on responder"):r!==i&&(this._performTransitionSideEffects(r,i,e,n),this._touchState=i))}_performTransitionSideEffects(e,n,r,i){if(hW(r)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),Tx(e)&&r===wx){var s=this._config.onLongPress;s!=null&&i.nativeEvent.key==null&&(s(i),this._longPressDispatched=!0)}var o=Ex(e),a=Ex(n);if(!o&&a?this._activate(i):o&&!a&&this._deactivate(i),Tx(e)&&r===rm){var l=this._config,u=l.onLongPress,c=l.onPress;if(c!=null){var d=u!=null&&e===Ru;d||!a&&!o&&(this._activate(i),this._deactivate(i))}}this._cancelPressDelayTimeout()}_activate(e){var n=this._config,r=n.onPressChange,i=n.onPressStart,s=Ix(e);this._touchActivatePosition={pageX:s.pageX,pageY:s.pageY},i!=null&&i(e),r!=null&&r(!0)}_deactivate(e){var n=this._config,r=n.onPressChange,i=n.onPressEnd;function s(){i!=null&&i(e),r!=null&&r(!1)}var o=w_(this._config.delayPressEnd);o>0?this._pressOutDelayTimeout=setTimeout(()=>{s()},o):s()}_handleLongPress(e){(this._touchState===Py||this._touchState===Ru)&&this._receiveSignal(wx,e)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function w_(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Math.max(e,t??n)}function Ix(t){var e=t.nativeEvent,n=e.changedTouches,r=e.touches;return r!=null&&r.length>0?r[0]:n!=null&&n.length>0?n[0]:t.nativeEvent}function mW(t,e){var n=I.useRef(null);n.current==null&&(n.current=new pW(e));var r=n.current;return I.useEffect(()=>{r.configure(e)},[e,r]),I.useEffect(()=>()=>{r.reset()},[r]),I.useDebugValue(e),r.getEventHandlers()}var gW=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function yW(t,e){var n=t.activeOpacity,r=t.delayPressIn,i=t.delayPressOut,s=t.delayLongPress,o=t.disabled,a=t.focusable,l=t.onLongPress,u=t.onPress,c=t.onPressIn,d=t.onPressOut,f=t.rejectResponderTermination,p=t.style,g=On(t,gW),S=I.useRef(null),T=Yd(e,S),_=I.useState("0s"),y=_[0],v=_[1],C=I.useState(null),D=C[0],O=C[1],b=I.useCallback((N,k)=>{O(N),v(k?k/1e3+"s":"0s")},[O,v]),E=I.useCallback(N=>{b(n??.2,N)},[n,b]),R=I.useCallback(N=>{b(null,N)},[b]),x=I.useMemo(()=>({cancelable:!f,disabled:o,delayLongPress:s,delayPressStart:r,delayPressEnd:i,onLongPress:l,onPress:u,onPressStart(N){var k=N.dispatchConfig!=null?N.dispatchConfig.registrationName==="onResponderGrant":N.type==="keydown";E(k?0:150),c!=null&&c(N)},onPressEnd(N){R(250),d!=null&&d(N)}}),[s,r,i,o,l,u,c,d,f,E,R]),P=mW(S,x);return I.createElement(X,cn({},g,P,{accessibilityDisabled:o,focusable:!o&&a!==!1,pointerEvents:o?"box-none":void 0,ref:T,style:[Rx.root,!o&&Rx.actionable,p,D!=null&&{opacity:D},{transitionDuration:y}]}))}var Rx=Ae.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),Ce=I.memo(I.forwardRef(yW));Ce.displayName="TouchableOpacity";function vW(t){var e=t.children,n=I.useRef(null);if(Dt&&!n.current){var r=document.createElement("div");r&&document.body&&(document.body.appendChild(r),n.current=r)}return I.useEffect(()=>{if(Dt)return()=>{document.body&&n.current&&(document.body.removeChild(n.current),n.current=null)}},[]),n.current&&Dt?F$.createPortal(e,n.current):null}var Cx=300;function _W(t,e){return t==="slide"?e?SW:EW:t==="fade"?e?TW:bW:e?_n.container:_n.hidden}function wW(t){var e=t.animationType,n=t.children,r=t.onDismiss,i=t.onShow,s=t.visible,o=I.useState(!1),a=o[0],l=o[1],u=I.useRef(!1),c=I.useRef(!1),d=e&&e!=="none",f=I.useCallback(p=>{p&&p.currentTarget!==p.target||(s?i&&i():l(!1))},[i,s]);return I.useEffect(()=>{c.current&&!a&&r&&r(),c.current=a},[a,r]),I.useEffect(()=>{s&&l(!0),s!==u.current&&!d&&f(),u.current=s},[d,s,f]),a||s?Qu("div",{style:a?_W(e,s):_n.hidden,onAnimationEnd:f,children:n}):null}var _n=Ae.create({container:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:9999},animatedIn:{animationDuration:Cx+"ms",animationTimingFunction:"ease-in"},animatedOut:{pointerEvents:"none",animationDuration:Cx+"ms",animationTimingFunction:"ease-out"},fadeIn:{opacity:1,animationKeyframes:{"0%":{opacity:0},"100%":{opacity:1}}},fadeOut:{opacity:0,animationKeyframes:{"0%":{opacity:1},"100%":{opacity:0}}},slideIn:{transform:"translateY(0%)",animationKeyframes:{"0%":{transform:"translateY(100%)"},"100%":{transform:"translateY(0%)"}}},slideOut:{transform:"translateY(100%)",animationKeyframes:{"0%":{transform:"translateY(0%)"},"100%":{transform:"translateY(100%)"}}},hidden:{opacity:0}}),SW=[_n.container,_n.animatedIn,_n.slideIn],EW=[_n.container,_n.animatedOut,_n.slideOut],TW=[_n.container,_n.animatedIn,_n.fadeIn],bW=[_n.container,_n.animatedOut,_n.fadeOut],IW=["active","children","onRequestClose","transparent"],RW=I.forwardRef((t,e)=>{var n=t.active,r=t.children,i=t.onRequestClose,s=t.transparent,o=On(t,IW);I.useEffect(()=>{if(Dt){var l=u=>{n&&u.key==="Escape"&&(u.stopPropagation(),i&&i())};return document.addEventListener("keyup",l,!1),()=>document.removeEventListener("keyup",l,!1)}},[n,i]);var a=I.useMemo(()=>[vp.modal,s?vp.modalTransparent:vp.modalOpaque],[s]);return I.createElement(X,cn({},o,{"aria-modal":!0,ref:e,role:n?"dialog":null,style:a}),I.createElement(X,{style:vp.container},r))}),vp=Ae.create({modal:{position:"fixed",top:0,right:0,bottom:0,left:0},modalTransparent:{backgroundColor:"transparent"},modalOpaque:{backgroundColor:"white"},container:{top:0,flex:1}}),xx=()=>Qu("div",{role:"none",tabIndex:0,style:xW.focusBracket});function HM(t){if(!Dt)return!1;try{t.focus()}catch{}return document.activeElement===t}function KM(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(HM(n)||KM(n))return!0}return!1}function qM(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(HM(n)||qM(n))return!0}return!1}var CW=t=>{var e=t.active,n=t.children,r=I.useRef(),i=I.useRef({trapFocusInProgress:!1,lastFocusedElement:null});return I.useEffect(()=>{if(Dt){var s=()=>{if(!(r.current==null||i.current.trapFocusInProgress||!e)){try{if(i.current.trapFocusInProgress=!0,document.activeElement instanceof Node&&!r.current.contains(document.activeElement)){var o=KM(r.current);i.current.lastFocusedElement===document.activeElement&&(o=qM(r.current)),!o&&r.current!=null&&document.activeElement&&Hi.focus(r.current)}}finally{i.current.trapFocusInProgress=!1}i.current.lastFocusedElement=document.activeElement}};return s(),document.addEventListener("focus",s,!0),()=>document.removeEventListener("focus",s,!0)}},[e]),I.useEffect(function(){if(Dt){var s=document.activeElement;return function(){s&&document.contains(s)&&Hi.focus(s)}}},[]),I.createElement(I.Fragment,null,I.createElement(xx,null),I.createElement(X,{ref:r},n),I.createElement(xx,null))},xW=Ae.create({focusBracket:{outlineStyle:"none"}}),AW=["animationType","children","onDismiss","onRequestClose","onShow","transparent","visible"],PW=0,ya=[],fu={};function GM(){if(ya.length!==0){var t=ya[ya.length-1];ya.forEach(e=>{e in fu&&fu[e](e===t)})}}function LS(t){t in fu&&(fu[t](!1),delete fu[t]);var e=ya.indexOf(t);e!==-1&&(ya.splice(e,1),GM())}function kW(t,e){LS(t),ya.push(t),fu[t]=e,GM()}var wd=I.forwardRef((t,e)=>{var n=t.animationType,r=t.children,i=t.onDismiss,s=t.onRequestClose,o=t.onShow,a=t.transparent,l=t.visible,u=l===void 0?!0:l,c=On(t,AW),d=I.useMemo(()=>PW++,[]),f=I.useState(!1),p=f[0],g=f[1],S=I.useCallback(()=>{LS(d),i&&i()},[d,i]),T=I.useCallback(()=>{kW(d,g),o&&o()},[d,o]);return I.useEffect(()=>()=>LS(d),[d]),I.createElement(vW,null,I.createElement(wW,{animationType:n,onDismiss:S,onShow:T,visible:u},I.createElement(CW,{active:p},I.createElement(RW,cn({},c,{active:p,onRequestClose:s,ref:e,transparent:a}),r))))}),DW=(t,e)=>{var n=t.selectionEnd,r=t.selectionStart,i=e.start,s=e.end;return i!==r||s!==n},Ax=(t,e)=>{if(DW(t,e)){var n=e.start,r=e.end;try{t.setSelectionRange(n,r||n)}catch{}}},OW=Object.assign({},uT,cT,hT,dT,fT,pT,mT,gT,{autoCapitalize:!0,autoComplete:!0,autoCorrect:!0,autoFocus:!0,defaultValue:!0,disabled:!0,lang:!0,maxLength:!0,onChange:!0,onScroll:!0,placeholder:!0,pointerEvents:!0,readOnly:!0,rows:!0,spellCheck:!0,value:!0,type:!0}),MW=t=>yT(t,OW);function NW(t){return t.isComposing||t.keyCode===229}var S_=null,Qn=I.forwardRef((t,e)=>{var n=t.autoCapitalize,r=n===void 0?"sentences":n,i=t.autoComplete,s=t.autoCompleteType,o=t.autoCorrect,a=o===void 0?!0:o,l=t.blurOnSubmit,u=t.caretHidden,c=t.clearTextOnFocus,d=t.dir,f=t.editable,p=t.enterKeyHint,g=t.inputMode,S=t.keyboardType,T=t.multiline,_=T===void 0?!1:T,y=t.numberOfLines,v=t.onBlur,C=t.onChange,D=t.onChangeText,O=t.onContentSizeChange,b=t.onFocus,E=t.onKeyPress,R=t.onLayout,x=t.onMoveShouldSetResponder,P=t.onMoveShouldSetResponderCapture,N=t.onResponderEnd,k=t.onResponderGrant,de=t.onResponderMove,fe=t.onResponderReject,je=t.onResponderRelease,Re=t.onResponderStart,U=t.onResponderTerminate,Y=t.onResponderTerminationRequest,ie=t.onScrollShouldSetResponder,we=t.onScrollShouldSetResponderCapture,Pe=t.onSelectionChange,hn=t.onSelectionChangeShouldSetResponder,lt=t.onSelectionChangeShouldSetResponderCapture,zt=t.onStartShouldSetResponder,gt=t.onStartShouldSetResponderCapture,Ke=t.onSubmitEditing,Nt=t.placeholderTextColor,Mn=t.readOnly,Ri=Mn===void 0?!1:Mn,fs=t.returnKeyType,wr=t.rows,zr=t.secureTextEntry,nr=zr===void 0?!1:zr,Lo=t.selection,ps=t.selectTextOnFocus,Vo=t.showSoftInputOnFocus,ms=t.spellCheck,De,et;if(g!=null)et=g,g==="email"?De="email":g==="tel"?De="tel":g==="search"?De="search":g==="url"?De="url":De="text";else if(S!=null)switch(S){case"email-address":De="email";break;case"number-pad":case"numeric":et="numeric";break;case"decimal-pad":et="decimal";break;case"phone-pad":De="tel";break;case"search":case"web-search":De="search";break;case"url":De="url";break;default:De="text"}nr&&(De="password");var Nn=I.useRef({height:null,width:null}),rr=I.useRef(null),gs=I.useRef(null),Fo=I.useRef(!1);I.useEffect(()=>{rr.current&&gs.current&&Ax(rr.current,gs.current),Fo.current=nr},[nr]);var Sr=I.useCallback(ee=>{if(_&&O&&ee!=null){var Qe=ee.scrollHeight,Lt=ee.scrollWidth;(Qe!==Nn.current.height||Lt!==Nn.current.width)&&(Nn.current.height=Qe,Nn.current.width=Lt,O({nativeEvent:{contentSize:{height:Nn.current.height,width:Nn.current.width}}}))}},[_,O]),Bo=I.useMemo(()=>ee=>{ee!=null&&(ee.clear=function(){ee!=null&&(ee.value="")},ee.isFocused=function(){return ee!=null&&ji.currentlyFocusedField()===ee},Sr(ee))},[Sr]);function rl(ee){ji._currentlyFocusedNode=null,v&&(ee.nativeEvent.text=ee.target.value,v(ee))}function ys(ee){var Qe=ee.target,Lt=Qe.value;ee.nativeEvent.text=Lt,Sr(Qe),C&&C(ee),D&&D(Lt)}function fc(ee){var Qe=ee.target;b&&(ee.nativeEvent.text=Qe.value,b(ee)),Qe!=null&&(ji._currentlyFocusedNode=Qe,c&&(Qe.value=""),ps&&(S_!=null&&clearTimeout(S_),S_=setTimeout(()=>{Qe!=null&&document.activeElement===Qe&&Qe.select()},0)))}function il(ee){var Qe=ee.target;ee.stopPropagation();var Lt=!_,Er=l??Lt,Hr=ee.nativeEvent,ul=NW(Hr);E&&E(ee),ee.key==="Enter"&&!ee.shiftKey&&!ul&&!ee.isDefaultPrevented()&&((l||!_)&&Ke&&(ee.preventDefault(),Hr.text=ee.target.value,Ke(ee)),Er&&Qe!=null&&setTimeout(()=>Qe.blur(),0))}function sl(ee){try{var Qe=ee.target,Lt=Qe.selectionStart,Er=Qe.selectionEnd,Hr={start:Lt,end:Er};Pe&&(ee.nativeEvent.selection=Hr,ee.nativeEvent.text=ee.target.value,Pe(ee)),Fo.current===nr&&(gs.current=Hr)}catch{}}CS(()=>{var ee=rr.current;ee!=null&&Lo!=null&&Ax(ee,Lo),document.activeElement===ee&&(ji._currentlyFocusedNode=ee)},[rr,Lo]);var jo=_?"textarea":"input";vT(rr,R),ST(rr,{onMoveShouldSetResponder:x,onMoveShouldSetResponderCapture:P,onResponderEnd:N,onResponderGrant:k,onResponderMove:de,onResponderReject:fe,onResponderRelease:je,onResponderStart:Re,onResponderTerminate:U,onResponderTerminationRequest:Y,onScrollShouldSetResponder:ie,onScrollShouldSetResponderCapture:we,onSelectionChangeShouldSetResponder:hn,onSelectionChangeShouldSetResponderCapture:lt,onStartShouldSetResponder:zt,onStartShouldSetResponderCapture:gt});var Ci=lT(),vs=Ci.direction,Ue=MW(t);Ue.autoCapitalize=r,Ue.autoComplete=i||s||"on",Ue.autoCorrect=a?"on":"off",Ue.dir=d!==void 0?d:"auto",Ue.enterKeyHint=p||fs,Ue.inputMode=et,Ue.onBlur=rl,Ue.onChange=ys,Ue.onFocus=fc,Ue.onKeyDown=il,Ue.onSelect=sl,Ue.readOnly=Ri===!0||f===!1,Ue.rows=_?wr??y:1,Ue.spellCheck=ms??a,Ue.style=[{"--placeholderTextColor":Nt},E_.textinput$raw,E_.placeholder,t.style,u&&E_.caretHidden],Ue.type=_?void 0:De,Ue.virtualkeyboardpolicy=Vo===!1?"manual":"auto";var ir=_T(Ue),ol=Yd(rr,ir,Bo,e);Ue.ref=ol;var xi=t.lang!=null?Cy(t.lang):null,al=t.dir||xi,Wr=al||vs,ll=Qu(jo,Ue,{writingDirection:Wr});return ll});Qn.displayName="TextInput";Qn.State=ji;var E_=Ae.create({textinput$raw:{MozAppearance:"textfield",WebkitAppearance:"none",backgroundColor:"transparent",border:"0 solid black",borderRadius:0,boxSizing:"border-box",font:"14px System",margin:0,padding:0,resize:"none"},placeholder:{placeholderTextColor:"var(--placeholderTextColor)"},caretHidden:{caretColor:"transparent"}});/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Px="popstate";function LW(t={}){function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=el(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),VS("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:Sd(s))}function r(i,s){_r(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return FW(e,n,r,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _r(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VW(){return Math.random().toString(36).substring(2,10)}function kx(t,e){return{usr:t.state,key:t.key,idx:e}}function VS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?el(e):e,state:n,key:e&&e.key||r||VW()}}function Sd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function el(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function FW(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let T=c(),_=T==null?null:T-u;u=T,l&&l({action:a,location:S.location,delta:_})}function f(T,_){a="PUSH";let y=VS(S.location,T,_);n&&n(y,T),u=c()+1;let v=kx(y,u),C=S.createHref(y);try{o.pushState(v,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(C)}s&&l&&l({action:a,location:S.location,delta:1})}function p(T,_){a="REPLACE";let y=VS(S.location,T,_);n&&n(y,T),u=c();let v=kx(y,u),C=S.createHref(y);o.replaceState(v,"",C),s&&l&&l({action:a,location:S.location,delta:0})}function g(T){return BW(T)}let S={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Px,d),l=T,()=>{i.removeEventListener(Px,d),l=null}},createHref(T){return e(i,T)},createURL:g,encodeLocation(T){let _=g(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(T){return o.go(T)}};return S}function BW(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),st(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Sd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function XM(t,e,n="/"){return jW(t,e,n,!1)}function jW(t,e,n,r){let i=typeof e=="string"?el(e):e,s=Ji(i.pathname||"/",n);if(s==null)return null;let o=QM(t);UW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=JW(s);a=QW(o[l],u,r)}return a}function QM(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;st(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=Ki([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(st(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),QM(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:GW(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of YM(o.path))s(o,a,!0,u)}),e}function YM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=YM(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function UW(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XW(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var $W=/^:[\w-]+$/,zW=3,WW=2,HW=1,KW=10,qW=-2,Dx=t=>t==="*";function GW(t,e){let n=t.split("/"),r=n.length;return n.some(Dx)&&(r+=qW),e&&(r+=WW),n.filter(i=>!Dx(i)).reduce((i,s)=>i+($W.test(s)?zW:s===""?HW:KW),r)}function XW(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function QW(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=gg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=gg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ki([s,d.pathname]),pathnameBase:r8(Ki([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ki([s,d.pathnameBase]))}return o}function gg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=YW(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function YW(t,e=!1,n=!0){_r(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function JW(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _r(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ji(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var ZW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e8=t=>ZW.test(t);function t8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?el(t):t,s;if(n)if(e8(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),_r(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=Ox(n.substring(1),"/"):s=Ox(n,e)}else s=e;return{pathname:s,search:i8(r),hash:s8(i)}}function Ox(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function T_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function n8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function JM(t){let e=n8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function ZM(t,e,n,r=!1){let i;typeof t=="string"?i=el(t):(i={...t},st(!i.pathname||!i.pathname.includes("?"),T_("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),T_("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),T_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=t8(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Ki=t=>t.join("/").replace(/\/\/+/g,"/"),r8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),i8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,s8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function o8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function a8(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eN=["POST","PUT","PATCH","DELETE"];new Set(eN);var l8=["GET",...eN];new Set(l8);var Yu=I.createContext(null);Yu.displayName="DataRouter";var ky=I.createContext(null);ky.displayName="DataRouterState";I.createContext(!1);var tN=I.createContext({isTransitioning:!1});tN.displayName="ViewTransition";var u8=I.createContext(new Map);u8.displayName="Fetchers";var c8=I.createContext(null);c8.displayName="Await";var $r=I.createContext(null);$r.displayName="Navigation";var Zd=I.createContext(null);Zd.displayName="Location";var as=I.createContext({outlet:null,matches:[],isDataRoute:!1});as.displayName="Route";var ET=I.createContext(null);ET.displayName="RouteError";function h8(t,{relative:e}={}){st(ef(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext($r),{hash:i,pathname:s,search:o}=tf(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Ki([n,s])),r.createHref({pathname:a,search:o,hash:i})}function ef(){return I.useContext(Zd)!=null}function bi(){return st(ef(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Zd).location}var nN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rN(t){I.useContext($r).static||I.useLayoutEffect(t)}function Ju(){let{isDataRoute:t}=I.useContext(as);return t?b8():d8()}function d8(){st(ef(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(Yu),{basename:e,navigator:n}=I.useContext($r),{matches:r}=I.useContext(as),{pathname:i}=bi(),s=JSON.stringify(JM(r)),o=I.useRef(!1);return rN(()=>{o.current=!0}),I.useCallback((l,u={})=>{if(_r(o.current,nN),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=ZM(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Ki([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}I.createContext(null);function tf(t,{relative:e}={}){let{matches:n}=I.useContext(as),{pathname:r}=bi(),i=JSON.stringify(JM(n));return I.useMemo(()=>ZM(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function f8(t,e){return iN(t,e)}function iN(t,e,n,r,i){var y;st(ef(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I.useContext($r),{matches:o}=I.useContext(as),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let v=d&&d.path||"";sN(u,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=bi(),p;if(e){let v=typeof e=="string"?el(e):e;st(c==="/"||((y=v.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${v.pathname}" was given in the \`location\` prop.`),p=v}else p=f;let g=p.pathname||"/",S=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");S="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let T=XM(t,{pathname:S});_r(d||T!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),_r(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=v8(T&&T.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Ki([c,s.encodeLocation?s.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Ki([c,s.encodeLocation?s.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,i);return e&&_?I.createElement(Zd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},_):_}function p8(){let t=T8(),e=o8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:s},"ErrorBoundary")," or"," ",I.createElement("code",{style:s},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,o)}var m8=I.createElement(p8,null),g8=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?I.createElement(as.Provider,{value:this.props.routeContext},I.createElement(ET.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function y8({routeContext:t,match:e,children:n}){let r=I.useContext(Yu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(as.Provider,{value:t},n)}function v8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);st(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&r?(c,d)=>{var f,p;r(c,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:a8(n.matches),errorInfo:d})}:void 0;return s.reduceRight((c,d,f)=>{let p,g=!1,S=null,T=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,S=d.route.errorElement||m8,a&&(l<0&&f===0?(sN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,T=null):l===f&&(g=!0,T=d.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,f+1)),y=()=>{let v;return p?v=S:g?v=T:d.route.Component?v=I.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=c,I.createElement(y8,{match:d,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?I.createElement(g8,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:u}):y()},null)}function TT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _8(t){let e=I.useContext(Yu);return st(e,TT(t)),e}function w8(t){let e=I.useContext(ky);return st(e,TT(t)),e}function S8(t){let e=I.useContext(as);return st(e,TT(t)),e}function bT(t){let e=S8(t),n=e.matches[e.matches.length-1];return st(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function E8(){return bT("useRouteId")}function T8(){var r;let t=I.useContext(ET),e=w8("useRouteError"),n=bT("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function b8(){let{router:t}=_8("useNavigate"),e=bT("useNavigate"),n=I.useRef(!1);return rN(()=>{n.current=!0}),I.useCallback(async(i,s={})=>{_r(n.current,nN),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Mx={};function sN(t,e,n){!e&&!Mx[t]&&(Mx[t]=!0,_r(!1,n))}I.memo(I8);function I8({routes:t,future:e,state:n,unstable_onError:r}){return iN(t,void 0,n,r,e)}function kl(t){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function R8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){st(!ef(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=el(n));let{pathname:u="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,g=I.useMemo(()=>{let S=Ji(u,a);return S==null?null:{location:{pathname:S,search:c,hash:d,state:f,key:p},navigationType:r}},[a,u,c,d,f,p,r]);return _r(g!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:I.createElement($r.Provider,{value:l},I.createElement(Zd.Provider,{children:e,value:g}))}function C8({children:t,location:e}){return f8(FS(t),e)}function FS(t,e=[]){let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,FS(r.props.children,s));return}st(r.type===kl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=FS(r.props.children,s)),n.push(o)}),n}var sm="get",om="application/x-www-form-urlencoded";function Dy(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function x8(t){return Dy(t)&&t.tagName.toLowerCase()==="button"}function A8(t){return Dy(t)&&t.tagName.toLowerCase()==="form"}function P8(t){return Dy(t)&&t.tagName.toLowerCase()==="input"}function k8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function D8(t,e){return t.button===0&&(!e||e==="_self")&&!k8(t)}var _p=null;function O8(){if(_p===null)try{new FormData(document.createElement("form"),0),_p=!1}catch{_p=!0}return _p}var M8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b_(t){return t!=null&&!M8.has(t)?(_r(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${om}"`),null):t}function N8(t,e){let n,r,i,s,o;if(A8(t)){let a=t.getAttribute("action");r=a?Ji(a,e):null,n=t.getAttribute("method")||sm,i=b_(t.getAttribute("enctype"))||om,s=new FormData(t)}else if(x8(t)||P8(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ji(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||sm,i=b_(t.getAttribute("formenctype"))||b_(a.getAttribute("enctype"))||om,s=new FormData(a,t),!O8()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(Dy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sm,r=null,i=om,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function IT(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function L8(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ji(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function V8(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function F8(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function B8(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await V8(s,n);return o.links?o.links():[]}return[]}));return z8(r.flat(1).filter(F8).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Nx(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function j8(t,e,{includeHydrateFallback:n}={}){return U8(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function U8(t){return[...new Set(t)]}function $8(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function z8(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify($8(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function oN(){let t=I.useContext(Yu);return IT(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function W8(){let t=I.useContext(ky);return IT(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var RT=I.createContext(void 0);RT.displayName="FrameworkContext";function aN(){let t=I.useContext(RT);return IT(t,"You must render this element inside a <HydratedRouter> element"),t}function H8(t,e){let n=I.useContext(RT),[r,i]=I.useState(!1),[s,o]=I.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=I.useRef(null);I.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=_=>{_.forEach(y=>{o(y.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return f.current&&T.observe(f.current),()=>{T.disconnect()}}},[t]),I.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:zc(a,p),onBlur:zc(l,g),onMouseEnter:zc(u,p),onMouseLeave:zc(c,g),onTouchStart:zc(d,p)}]:[!1,f,{}]}function zc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function K8({page:t,...e}){let{router:n}=oN(),r=I.useMemo(()=>XM(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?I.createElement(G8,{page:t,matches:r,...e}):null}function q8(t){let{manifest:e,routeModules:n}=aN(),[r,i]=I.useState([]);return I.useEffect(()=>{let s=!1;return B8(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function G8({page:t,matches:e,...n}){let r=bi(),{manifest:i,routeModules:s}=aN(),{basename:o}=oN(),{loaderData:a,matches:l}=W8(),u=I.useMemo(()=>Nx(t,e,l,i,r,"data"),[t,e,l,i,r]),c=I.useMemo(()=>Nx(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=I.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,S=!1;if(e.forEach(_=>{var v;let y=i.routes[_.route.id];!y||!y.hasLoader||(!u.some(C=>C.route.id===_.route.id)&&_.route.id in a&&((v=s[_.route.id])!=null&&v.shouldRevalidate)||y.hasClientLoader?S=!0:g.add(_.route.id))}),g.size===0)return[];let T=L8(t,o,"data");return S&&g.size>0&&T.searchParams.set("_routes",e.filter(_=>g.has(_.route.id)).map(_=>_.route.id).join(",")),[T.pathname+T.search]},[o,a,r,i,u,e,t,s]),f=I.useMemo(()=>j8(c,i),[c,i]),p=q8(c);return I.createElement(I.Fragment,null,d.map(g=>I.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>I.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:S})=>I.createElement("link",{key:g,nonce:n.nonce,...S})))}function X8(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lN&&(window.__reactRouterVersion="7.10.1")}catch{}function Q8({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=I.useRef();i.current==null&&(i.current=LW({window:r,v5Compat:!0}));let s=i.current,[o,a]=I.useState({action:s.action,location:s.location}),l=I.useCallback(u=>{n===!1?a(u):I.startTransition(()=>a(u))},[n]);return I.useLayoutEffect(()=>s.listen(l),[s,l]),I.createElement(R8,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n===!0})}var uN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cN=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},p){let{basename:g,unstable_useTransitions:S}=I.useContext($r),T=typeof u=="string"&&uN.test(u),_,y=!1;if(typeof u=="string"&&T&&(_=u,lN))try{let x=new URL(window.location.href),P=u.startsWith("//")?new URL(x.protocol+u):new URL(u),N=Ji(P.pathname,g);P.origin===x.origin&&N!=null?u=N+P.search+P.hash:y=!0}catch{_r(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=h8(u,{relative:i}),[C,D,O]=H8(r,f),b=eH(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d,unstable_useTransitions:S});function E(x){e&&e(x),x.defaultPrevented||b(x)}let R=I.createElement("a",{...f,...O,href:_||v,onClick:y||s?e:E,ref:X8(p,D),target:l,"data-discover":!T&&n==="render"?"true":void 0});return C&&!T?I.createElement(I.Fragment,null,R,I.createElement(K8,{page:v})):R});cN.displayName="Link";var Y8=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=tf(o,{relative:u.relative}),f=bi(),p=I.useContext(ky),{navigator:g,basename:S}=I.useContext($r),T=p!=null&&sH(d)&&a===!0,_=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,y=f.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(y=y.toLowerCase(),v=v?v.toLowerCase():null,_=_.toLowerCase()),v&&S&&(v=Ji(v,S)||v);const C=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=y===_||!i&&y.startsWith(_)&&y.charAt(C)==="/",O=v!=null&&(v===_||!i&&v.startsWith(_)&&v.charAt(_.length)==="/"),b={isActive:D,isPending:O,isTransitioning:T},E=D?e:void 0,R;typeof r=="function"?R=r(b):R=[r,D?"active":null,O?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let x=typeof s=="function"?s(b):s;return I.createElement(cN,{...u,"aria-current":E,className:R,ref:c,style:x,to:o,viewTransition:a},typeof l=="function"?l(b):l)});Y8.displayName="NavLink";var J8=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=sm,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},p)=>{let{unstable_useTransitions:g}=I.useContext($r),S=rH(),T=iH(a,{relative:u}),_=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&uN.test(a),v=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let D=C.nativeEvent.submitter,O=(D==null?void 0:D.getAttribute("formmethod"))||o,b=()=>S(D||C.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d});g&&n!==!1?I.startTransition(()=>b()):b()};return I.createElement("form",{ref:p,method:_,action:T,onSubmit:r?l:v,...f,"data-discover":!y&&t==="render"?"true":void 0})});J8.displayName="Form";function Z8(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hN(t){let e=I.useContext(Yu);return st(e,Z8(t)),e}function eH(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_useTransitions:a}={}){let l=Ju(),u=bi(),c=tf(t,{relative:s});return I.useCallback(d=>{if(D8(d,e)){d.preventDefault();let f=n!==void 0?n:Sd(u)===Sd(c),p=()=>l(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o});a?I.startTransition(()=>p()):p()}},[u,l,c,n,r,e,t,i,s,o,a])}var tH=0,nH=()=>`__${String(++tH)}__`;function rH(){let{router:t}=hN("useSubmit"),{basename:e}=I.useContext($r),n=E8(),r=t.fetch,i=t.navigate;return I.useCallback(async(s,o={})=>{let{action:a,method:l,encType:u,formData:c,body:d}=N8(s,e);if(o.navigate===!1){let f=o.fetcherKey||nH();await r(f,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function iH(t,{relative:e}={}){let{basename:n}=I.useContext($r),r=I.useContext(as);st(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...tf(t||".",{relative:e})},o=bi();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ki([n,s.pathname])),Sd(s)}function sH(t,{relative:e}={}){let n=I.useContext(tN);st(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hN("useViewTransitionState"),i=tf(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ji(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ji(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gg(i.pathname,o)!=null||gg(i.pathname,s)!=null}const oH=()=>{};var Lx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[c],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new lH;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uH=function(t){const e=dN(t);return fN.encodeByteArray(e,!0)},yg=function(t){return uH(t).replace(/\./g,"")},pN=function(t){try{return fN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=()=>mN().__FIREBASE_DEFAULTS__,hH=()=>{if(typeof process>"u"||typeof Lx>"u")return;const t=Lx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pN(t[1]);return e&&JSON.parse(e)},Oy=()=>{try{return oH()||cH()||hH()||dH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gN=t=>{var e,n;return(n=(e=Oy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},fH=t=>{const e=gN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yN=()=>{var t;return(t=Oy())==null?void 0:t.config},vN=t=>{var e;return(e=Oy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yg(JSON.stringify(n)),yg(JSON.stringify(o)),""].join(".")}const Mh={};function gH(){const t={prod:[],emulator:[]};for(const e of Object.keys(Mh))Mh[e]?t.emulator.push(e):t.prod.push(e);return t}function yH(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Vx=!1;function _N(t,e){if(typeof window>"u"||typeof document>"u"||!xo(window.location.host)||Mh[t]===e||Mh[t]||Vx)return;Mh[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=gH().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Vx=!0,o()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=yH(r),p=n("text"),g=document.getElementById(p)||document.createElement("span"),S=n("learnmore"),T=document.getElementById(S)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),c(T,S);const C=u();l(y,_),v.append(y,g,T,C),document.body.appendChild(v)}s?(g.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function wN(){var e;const t=(e=Oy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _H(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EH(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SN(){return!wN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EN(){return!wN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function TN(){try{return typeof indexedDB=="object"}catch{return!1}}function TH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH="FirebaseError";class Ii extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bH,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nf.prototype.create)}}class nf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?IH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ii(i,a,r)}}function IH(t,e){return t.replace(RH,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const RH=/\{\$([^}]+)}/g;function CH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Fx(s)&&Fx(o)){if(!Fa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ih(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function sh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xH(t,e){const n=new AH(t,e);return n.subscribe.bind(n)}class AH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PH(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=I_),i.error===void 0&&(i.error=I_),i.complete===void 0&&(i.complete=I_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function I_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pH;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OH(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DH(t){return t===na?void 0:t}function OH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const NH={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},LH=Ee.INFO,VH={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},FH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=VH[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xT{constructor(e){this.name=e,this._logLevel=LH,this._logHandler=FH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const BH=(t,e)=>e.some(n=>t instanceof n);let Bx,jx;function jH(){return Bx||(Bx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UH(){return jx||(jx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bN=new WeakMap,BS=new WeakMap,IN=new WeakMap,R_=new WeakMap,AT=new WeakMap;function $H(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(uo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bN.set(n,t)}).catch(()=>{}),AT.set(e,t),e}function zH(t){if(BS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});BS.set(t,e)}let jS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return BS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WH(t){jS=t(jS)}function HH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(C_(this),e,...n);return IN.set(r,e.sort?e.sort():[e]),uo(r)}:UH().includes(t)?function(...e){return t.apply(C_(this),e),uo(bN.get(this))}:function(...e){return uo(t.apply(C_(this),e))}}function KH(t){return typeof t=="function"?HH(t):(t instanceof IDBTransaction&&zH(t),BH(t,jH())?new Proxy(t,jS):t)}function uo(t){if(t instanceof IDBRequest)return $H(t);if(R_.has(t))return R_.get(t);const e=KH(t);return e!==t&&(R_.set(t,e),AT.set(e,t)),e}const C_=t=>AT.get(t);function qH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=uo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(uo(o.result),l.oldVersion,l.newVersion,uo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const GH=["get","getKey","getAll","getAllKeys","count"],XH=["put","add","delete","clear"],x_=new Map;function Ux(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(x_.get(e))return x_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=XH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GH.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return x_.set(e,s),s}WH(t=>({...t,get:(e,n,r)=>Ux(e,n)||t.get(e,n,r),has:(e,n)=>!!Ux(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const US="@firebase/app",$x="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new xT("@firebase/app"),JH="@firebase/app-compat",ZH="@firebase/analytics-compat",eK="@firebase/analytics",tK="@firebase/app-check-compat",nK="@firebase/app-check",rK="@firebase/auth",iK="@firebase/auth-compat",sK="@firebase/database",oK="@firebase/data-connect",aK="@firebase/database-compat",lK="@firebase/functions",uK="@firebase/functions-compat",cK="@firebase/installations",hK="@firebase/installations-compat",dK="@firebase/messaging",fK="@firebase/messaging-compat",pK="@firebase/performance",mK="@firebase/performance-compat",gK="@firebase/remote-config",yK="@firebase/remote-config-compat",vK="@firebase/storage",_K="@firebase/storage-compat",wK="@firebase/firestore",SK="@firebase/ai",EK="@firebase/firestore-compat",TK="firebase",bK="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="[DEFAULT]",IK={[US]:"fire-core",[JH]:"fire-core-compat",[eK]:"fire-analytics",[ZH]:"fire-analytics-compat",[nK]:"fire-app-check",[tK]:"fire-app-check-compat",[rK]:"fire-auth",[iK]:"fire-auth-compat",[sK]:"fire-rtdb",[oK]:"fire-data-connect",[aK]:"fire-rtdb-compat",[lK]:"fire-fn",[uK]:"fire-fn-compat",[cK]:"fire-iid",[hK]:"fire-iid-compat",[dK]:"fire-fcm",[fK]:"fire-fcm-compat",[pK]:"fire-perf",[mK]:"fire-perf-compat",[gK]:"fire-rc",[yK]:"fire-rc-compat",[vK]:"fire-gcs",[_K]:"fire-gcs-compat",[wK]:"fire-fst",[EK]:"fire-fst-compat",[SK]:"fire-vertex","fire-js":"fire-js",[TK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new Map,RK=new Map,zS=new Map;function zx(t,e){try{t.container.addComponent(e)}catch(n){Zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ba(t){const e=t.name;if(zS.has(e))return Zi.debug(`There were multiple attempts to register component ${e}.`),!1;zS.set(e,t);for(const n of vg.values())zx(n,t);for(const n of RK.values())zx(n,t);return!0}function My(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new nf("app","Firebase",CK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=bK;function RN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:$S,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw co.create("bad-app-name",{appName:String(i)});if(n||(n=yN()),!n)throw co.create("no-options");const s=vg.get(i);if(s){if(Fa(n,s.options)&&Fa(r,s.config))return s;throw co.create("duplicate-app",{appName:i})}const o=new MH(i);for(const l of zS.values())o.addComponent(l);const a=new xK(n,r,o);return vg.set(i,a),a}function CN(t=$S){const e=vg.get(t);if(!e&&t===$S&&yN())return RN();if(!e)throw co.create("no-app",{appName:t});return e}function pi(t,e,n){let r=IK[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zi.warn(o.join(" "));return}Ba(new yo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK="firebase-heartbeat-database",PK=1,Ed="firebase-heartbeat-store";let A_=null;function xN(){return A_||(A_=qH(AK,PK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ed)}catch(n){console.warn(n)}}}}).catch(t=>{throw co.create("idb-open",{originalErrorMessage:t.message})})),A_}async function kK(t){try{const n=(await xN()).transaction(Ed),r=await n.objectStore(Ed).get(AN(t));return await n.done,r}catch(e){if(e instanceof Ii)Zi.warn(e.message);else{const n=co.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zi.warn(n.message)}}}async function Wx(t,e){try{const r=(await xN()).transaction(Ed,"readwrite");await r.objectStore(Ed).put(e,AN(t)),await r.done}catch(n){if(n instanceof Ii)Zi.warn(n.message);else{const r=co.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zi.warn(r.message)}}}function AN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK=1024,OK=30;class MK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>OK){const o=VK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hx(),{heartbeatsToSend:r,unsentEntries:i}=NK(this._heartbeatsCache.heartbeats),s=yg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Zi.warn(n),""}}}function Hx(){return new Date().toISOString().substring(0,10)}function NK(t,e=DK){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Kx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TN()?TH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kx(t){return yg(JSON.stringify({version:2,heartbeats:t})).length}function VK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FK(t){Ba(new yo("platform-logger",e=>new QH(e),"PRIVATE")),Ba(new yo("heartbeat",e=>new MK(e),"PRIVATE")),pi(US,$x,t),pi(US,$x,"esm2020"),pi("fire-js","")}FK("");var BK="firebase",jK="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(BK,jK,"app");var qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,PN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,E){function R(){}R.prototype=E.prototype,b.F=E.prototype,b.prototype=new R,b.prototype.constructor=b,b.D=function(x,P,N){for(var k=Array(arguments.length-2),de=2;de<arguments.length;de++)k[de-2]=arguments[de];return E.prototype[P].apply(x,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,E,R){R||(R=0);const x=Array(16);if(typeof E=="string")for(var P=0;P<16;++P)x[P]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(P=0;P<16;++P)x[P]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=b.g[0],R=b.g[1],P=b.g[2];let N=b.g[3],k;k=E+(N^R&(P^N))+x[0]+3614090360&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(P^E&(R^P))+x[1]+3905402710&4294967295,N=E+(k<<12&4294967295|k>>>20),k=P+(R^N&(E^R))+x[2]+606105819&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(E^P&(N^E))+x[3]+3250441966&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(N^R&(P^N))+x[4]+4118548399&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(P^E&(R^P))+x[5]+1200080426&4294967295,N=E+(k<<12&4294967295|k>>>20),k=P+(R^N&(E^R))+x[6]+2821735955&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(E^P&(N^E))+x[7]+4249261313&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(N^R&(P^N))+x[8]+1770035416&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(P^E&(R^P))+x[9]+2336552879&4294967295,N=E+(k<<12&4294967295|k>>>20),k=P+(R^N&(E^R))+x[10]+4294925233&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(E^P&(N^E))+x[11]+2304563134&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(N^R&(P^N))+x[12]+1804603682&4294967295,E=R+(k<<7&4294967295|k>>>25),k=N+(P^E&(R^P))+x[13]+4254626195&4294967295,N=E+(k<<12&4294967295|k>>>20),k=P+(R^N&(E^R))+x[14]+2792965006&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(E^P&(N^E))+x[15]+1236535329&4294967295,R=P+(k<<22&4294967295|k>>>10),k=E+(P^N&(R^P))+x[1]+4129170786&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(E^R))+x[6]+3225465664&4294967295,N=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(N^E))+x[11]+643717713&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(P^N))+x[0]+3921069994&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(P^N&(R^P))+x[5]+3593408605&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(E^R))+x[10]+38016083&4294967295,N=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(N^E))+x[15]+3634488961&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(P^N))+x[4]+3889429448&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(P^N&(R^P))+x[9]+568446438&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(E^R))+x[14]+3275163606&4294967295,N=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(N^E))+x[3]+4107603335&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(P^N))+x[8]+1163531501&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(P^N&(R^P))+x[13]+2850285829&4294967295,E=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(E^R))+x[2]+4243563512&4294967295,N=E+(k<<9&4294967295|k>>>23),k=P+(E^R&(N^E))+x[7]+1735328473&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^E&(P^N))+x[12]+2368359562&4294967295,R=P+(k<<20&4294967295|k>>>12),k=E+(R^P^N)+x[5]+4294588738&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^P)+x[8]+2272392833&4294967295,N=E+(k<<11&4294967295|k>>>21),k=P+(N^E^R)+x[11]+1839030562&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^E)+x[14]+4259657740&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(R^P^N)+x[1]+2763975236&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^P)+x[4]+1272893353&4294967295,N=E+(k<<11&4294967295|k>>>21),k=P+(N^E^R)+x[7]+4139469664&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^E)+x[10]+3200236656&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(R^P^N)+x[13]+681279174&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^P)+x[0]+3936430074&4294967295,N=E+(k<<11&4294967295|k>>>21),k=P+(N^E^R)+x[3]+3572445317&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^E)+x[6]+76029189&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(R^P^N)+x[9]+3654602809&4294967295,E=R+(k<<4&4294967295|k>>>28),k=N+(E^R^P)+x[12]+3873151461&4294967295,N=E+(k<<11&4294967295|k>>>21),k=P+(N^E^R)+x[15]+530742520&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^E)+x[2]+3299628645&4294967295,R=P+(k<<23&4294967295|k>>>9),k=E+(P^(R|~N))+x[0]+4096336452&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~P))+x[7]+1126891415&4294967295,N=E+(k<<10&4294967295|k>>>22),k=P+(E^(N|~R))+x[14]+2878612391&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~E))+x[5]+4237533241&4294967295,R=P+(k<<21&4294967295|k>>>11),k=E+(P^(R|~N))+x[12]+1700485571&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~P))+x[3]+2399980690&4294967295,N=E+(k<<10&4294967295|k>>>22),k=P+(E^(N|~R))+x[10]+4293915773&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~E))+x[1]+2240044497&4294967295,R=P+(k<<21&4294967295|k>>>11),k=E+(P^(R|~N))+x[8]+1873313359&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~P))+x[15]+4264355552&4294967295,N=E+(k<<10&4294967295|k>>>22),k=P+(E^(N|~R))+x[6]+2734768916&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~E))+x[13]+1309151649&4294967295,R=P+(k<<21&4294967295|k>>>11),k=E+(P^(R|~N))+x[4]+4149444226&4294967295,E=R+(k<<6&4294967295|k>>>26),k=N+(R^(E|~P))+x[11]+3174756917&4294967295,N=E+(k<<10&4294967295|k>>>22),k=P+(E^(N|~R))+x[2]+718787259&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~E))+x[9]+3951481745&4294967295,b.g[0]=b.g[0]+E&4294967295,b.g[1]=b.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.v=function(b,E){E===void 0&&(E=b.length);const R=E-this.blockSize,x=this.C;let P=this.h,N=0;for(;N<E;){if(P==0)for(;N<=R;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<E;)if(x[P++]=b.charCodeAt(N++),P==this.blockSize){i(this,x),P=0;break}}else for(;N<E;)if(x[P++]=b[N++],P==this.blockSize){i(this,x),P=0;break}}this.h=P,this.o+=E},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var E=1;E<b.length-8;++E)b[E]=0;E=this.o*8;for(var R=b.length-8;R<b.length;++R)b[R]=E&255,E/=256;for(this.v(b),b=Array(16),E=0,R=0;R<4;++R)for(let x=0;x<32;x+=8)b[E++]=this.g[R]>>>x&255;return b};function s(b,E){var R=a;return Object.prototype.hasOwnProperty.call(R,b)?R[b]:R[b]=E(b)}function o(b,E){this.h=E;const R=[];let x=!0;for(let P=b.length-1;P>=0;P--){const N=b[P]|0;x&&N==E||(R[P]=N,x=!1)}this.g=R}var a={};function l(b){return-128<=b&&b<128?s(b,function(E){return new o([E|0],E<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(b<0)return T(u(-b));const E=[];let R=1;for(let x=0;b>=R;x++)E[x]=b/R|0,R*=4294967296;return new o(E,0)}function c(b,E){if(b.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b.charAt(0)=="-")return T(c(b.substring(1),E));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(E,8));let x=d;for(let N=0;N<b.length;N+=8){var P=Math.min(8,b.length-N);const k=parseInt(b.substring(N,N+P),E);P<8?(P=u(Math.pow(E,P)),x=x.j(P).add(u(k))):(x=x.j(R),x=x.add(u(k)))}return x}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-T(this).m();let b=0,E=1;for(let R=0;R<this.g.length;R++){const x=this.i(R);b+=(x>=0?x:4294967296+x)*E,E*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(g(this))return"0";if(S(this))return"-"+T(this).toString(b);const E=u(Math.pow(b,6));var R=this;let x="";for(;;){const P=C(R,E).g;R=_(R,P.j(E));let N=((R.g.length>0?R.g[0]:R.h)>>>0).toString(b);if(R=P,g(R))return N+x;for(;N.length<6;)N="0"+N;x=N+x}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function g(b){if(b.h!=0)return!1;for(let E=0;E<b.g.length;E++)if(b.g[E]!=0)return!1;return!0}function S(b){return b.h==-1}t.l=function(b){return b=_(this,b),S(b)?-1:g(b)?0:1};function T(b){const E=b.g.length,R=[];for(let x=0;x<E;x++)R[x]=~b.g[x];return new o(R,~b.h).add(f)}t.abs=function(){return S(this)?T(this):this},t.add=function(b){const E=Math.max(this.g.length,b.g.length),R=[];let x=0;for(let P=0;P<=E;P++){let N=x+(this.i(P)&65535)+(b.i(P)&65535),k=(N>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);x=k>>>16,N&=65535,k&=65535,R[P]=k<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function _(b,E){return b.add(T(E))}t.j=function(b){if(g(this)||g(b))return d;if(S(this))return S(b)?T(this).j(T(b)):T(T(this).j(b));if(S(b))return T(this.j(T(b)));if(this.l(p)<0&&b.l(p)<0)return u(this.m()*b.m());const E=this.g.length+b.g.length,R=[];for(var x=0;x<2*E;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(let P=0;P<b.g.length;P++){const N=this.i(x)>>>16,k=this.i(x)&65535,de=b.i(P)>>>16,fe=b.i(P)&65535;R[2*x+2*P]+=k*fe,y(R,2*x+2*P),R[2*x+2*P+1]+=N*fe,y(R,2*x+2*P+1),R[2*x+2*P+1]+=k*de,y(R,2*x+2*P+1),R[2*x+2*P+2]+=N*de,y(R,2*x+2*P+2)}for(b=0;b<E;b++)R[b]=R[2*b+1]<<16|R[2*b];for(b=E;b<2*E;b++)R[b]=0;return new o(R,0)};function y(b,E){for(;(b[E]&65535)!=b[E];)b[E+1]+=b[E]>>>16,b[E]&=65535,E++}function v(b,E){this.g=b,this.h=E}function C(b,E){if(g(E))throw Error("division by zero");if(g(b))return new v(d,d);if(S(b))return E=C(T(b),E),new v(T(E.g),T(E.h));if(S(E))return E=C(b,T(E)),new v(T(E.g),E.h);if(b.g.length>30){if(S(b)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var R=f,x=E;x.l(b)<=0;)R=D(R),x=D(x);var P=O(R,1),N=O(x,1);for(x=O(x,2),R=O(R,2);!g(x);){var k=N.add(x);k.l(b)<=0&&(P=P.add(R),N=k),x=O(x,1),R=O(R,1)}return E=_(b,P.j(E)),new v(P,E)}for(P=d;b.l(E)>=0;){for(R=Math.max(1,Math.floor(b.m()/E.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),N=u(R),k=N.j(E);S(k)||k.l(b)>0;)R-=x,N=u(R),k=N.j(E);g(N)&&(N=f),P=P.add(N),b=_(b,k)}return new v(P,b)}t.B=function(b){return C(this,b).h},t.and=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let x=0;x<E;x++)R[x]=this.i(x)&b.i(x);return new o(R,this.h&b.h)},t.or=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let x=0;x<E;x++)R[x]=this.i(x)|b.i(x);return new o(R,this.h|b.h)},t.xor=function(b){const E=Math.max(this.g.length,b.g.length),R=[];for(let x=0;x<E;x++)R[x]=this.i(x)^b.i(x);return new o(R,this.h^b.h)};function D(b){const E=b.g.length+1,R=[];for(let x=0;x<E;x++)R[x]=b.i(x)<<1|b.i(x-1)>>>31;return new o(R,b.h)}function O(b,E){const R=E>>5;E%=32;const x=b.g.length-R,P=[];for(let N=0;N<x;N++)P[N]=E>0?b.i(N+R)>>>E|b.i(N+R+1)<<32-E:b.i(N+R);return new o(P,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,ho=o}).apply(typeof qx<"u"?qx:typeof self<"u"?self:typeof window<"u"?window:{});var wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kN,oh,DN,am,WS,ON,MN,NN;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof wp=="object"&&wp];for(var m=0;m<h.length;++m){var w=h[m];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(h,m){if(m)e:{var w=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var V=h[A];if(!(V in w))break e;w=w[V]}h=h[h.length-1],A=w[h],m=m(A),m!=A&&m!=null&&e(w,h,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(m){var w=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&w.push([A,m[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(h){var m=typeof h;return m=="object"&&h!=null||m=="function"}function l(h,m,w){return h.call.apply(h.bind,arguments)}function u(h,m,w){return u=l,u.apply(null,arguments)}function c(h,m){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function d(h,m){function w(){}w.prototype=m.prototype,h.Z=m.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(A,V,B){for(var K=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)K[pe-2]=arguments[pe];return m.prototype[V].apply(A,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function p(h){const m=h.length;if(m>0){const w=Array(m);for(let A=0;A<m;A++)w[A]=h[A];return w}return[]}function g(h,m){for(let A=1;A<arguments.length;A++){const V=arguments[A];var w=typeof V;if(w=w!="object"?w:V?Array.isArray(V)?"array":w:"null",w=="array"||w=="object"&&typeof V.length=="number"){w=h.length||0;const B=V.length||0;h.length=w+B;for(let K=0;K<B;K++)h[w+K]=V[K]}else h.push(V)}}class S{constructor(m,w){this.i=m,this.j=w,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function T(h){o.setTimeout(()=>{throw h},0)}function _(){var h=b;let m=null;return h.g&&(m=h.g,h.g=h.g.next,h.g||(h.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,w){const A=v.get();A.set(m,w),this.h?this.h.next=A:this.g=A,this.h=A}}var v=new S(()=>new C,h=>h.reset());class C{constructor(){this.next=this.g=this.h=null}set(m,w){this.h=m,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let D,O=!1,b=new y,E=()=>{const h=Promise.resolve(void 0);D=()=>{h.then(R)}};function R(){for(var h;h=_();){try{h.h.call(h.g)}catch(w){T(w)}var m=v;m.j(h),m.h<100&&(m.h++,h.next=m.g,m.g=h)}O=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,m){this.type=h,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,m=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};o.addEventListener("test",w,m),o.removeEventListener("test",w,m)}catch{}return h}();function k(h){return/^[\s\xa0]*$/.test(h)}function de(h,m){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,m)}d(de,P),de.prototype.init=function(h,m){const w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=m,m=h.relatedTarget,m||(w=="mouseover"?m=h.fromElement:w=="mouseout"&&(m=h.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),je=0;function Re(h,m,w,A,V){this.listener=h,this.proxy=null,this.src=m,this.type=w,this.capture=!!A,this.ha=V,this.key=++je,this.da=this.fa=!1}function U(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Y(h,m,w){for(const A in h)m.call(w,h[A],A,h)}function ie(h,m){for(const w in h)m.call(void 0,h[w],w,h)}function we(h){const m={};for(const w in h)m[w]=h[w];return m}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hn(h,m){let w,A;for(let V=1;V<arguments.length;V++){A=arguments[V];for(w in A)h[w]=A[w];for(let B=0;B<Pe.length;B++)w=Pe[B],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function lt(h){this.src=h,this.g={},this.h=0}lt.prototype.add=function(h,m,w,A,V){const B=h.toString();h=this.g[B],h||(h=this.g[B]=[],this.h++);const K=gt(h,m,A,V);return K>-1?(m=h[K],w||(m.fa=!1)):(m=new Re(m,this.src,B,!!A,V),m.fa=w,h.push(m)),m};function zt(h,m){const w=m.type;if(w in h.g){var A=h.g[w],V=Array.prototype.indexOf.call(A,m,void 0),B;(B=V>=0)&&Array.prototype.splice.call(A,V,1),B&&(U(m),h.g[w].length==0&&(delete h.g[w],h.h--))}}function gt(h,m,w,A){for(let V=0;V<h.length;++V){const B=h[V];if(!B.da&&B.listener==m&&B.capture==!!w&&B.ha==A)return V}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Nt={};function Mn(h,m,w,A,V){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Mn(h,m[B],w,A,V);return null}return w=ms(w),h&&h[fe]?h.J(m,w,a(A)?!!A.capture:!1,V):Ri(h,m,w,!1,A,V)}function Ri(h,m,w,A,V,B){if(!m)throw Error("Invalid event type");const K=a(V)?!!V.capture:!!V;let pe=ps(h);if(pe||(h[Ke]=pe=new lt(h)),w=pe.add(m,w,A,K,B),w.proxy)return w;if(A=fs(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)N||(V=K),V===void 0&&(V=!1),h.addEventListener(m.toString(),A,V);else if(h.attachEvent)h.attachEvent(nr(m.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function fs(){function h(w){return m.call(h.src,h.listener,w)}const m=Lo;return h}function wr(h,m,w,A,V){if(Array.isArray(m))for(var B=0;B<m.length;B++)wr(h,m[B],w,A,V);else A=a(A)?!!A.capture:!!A,w=ms(w),h&&h[fe]?(h=h.i,B=String(m).toString(),B in h.g&&(m=h.g[B],w=gt(m,w,A,V),w>-1&&(U(m[w]),Array.prototype.splice.call(m,w,1),m.length==0&&(delete h.g[B],h.h--)))):h&&(h=ps(h))&&(m=h.g[m.toString()],h=-1,m&&(h=gt(m,w,A,V)),(w=h>-1?m[h]:null)&&zr(w))}function zr(h){if(typeof h!="number"&&h&&!h.da){var m=h.src;if(m&&m[fe])zt(m.i,h);else{var w=h.type,A=h.proxy;m.removeEventListener?m.removeEventListener(w,A,h.capture):m.detachEvent?m.detachEvent(nr(w),A):m.addListener&&m.removeListener&&m.removeListener(A),(w=ps(m))?(zt(w,h),w.h==0&&(w.src=null,m[Ke]=null)):U(h)}}}function nr(h){return h in Nt?Nt[h]:Nt[h]="on"+h}function Lo(h,m){if(h.da)h=!0;else{m=new de(m,this);const w=h.listener,A=h.ha||h.src;h.fa&&zr(h),h=w.call(A,m)}return h}function ps(h){return h=h[Ke],h instanceof lt?h:null}var Vo="__closure_events_fn_"+(Math.random()*1e9>>>0);function ms(h){return typeof h=="function"?h:(h[Vo]||(h[Vo]=function(m){return h.handleEvent(m)}),h[Vo])}function De(){x.call(this),this.i=new lt(this),this.M=this,this.G=null}d(De,x),De.prototype[fe]=!0,De.prototype.removeEventListener=function(h,m,w,A){wr(this,h,m,w,A)};function et(h,m){var w,A=h.G;if(A)for(w=[];A;A=A.G)w.push(A);if(h=h.M,A=m.type||m,typeof m=="string")m=new P(m,h);else if(m instanceof P)m.target=m.target||h;else{var V=m;m=new P(A,h),hn(m,V)}V=!0;let B,K;if(w)for(K=w.length-1;K>=0;K--)B=m.g=w[K],V=Nn(B,A,!0,m)&&V;if(B=m.g=h,V=Nn(B,A,!0,m)&&V,V=Nn(B,A,!1,m)&&V,w)for(K=0;K<w.length;K++)B=m.g=w[K],V=Nn(B,A,!1,m)&&V}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var h=this.i;for(const m in h.g){const w=h.g[m];for(let A=0;A<w.length;A++)U(w[A]);delete h.g[m],h.h--}}this.G=null},De.prototype.J=function(h,m,w,A){return this.i.add(String(h),m,!1,w,A)},De.prototype.K=function(h,m,w,A){return this.i.add(String(h),m,!0,w,A)};function Nn(h,m,w,A){if(m=h.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let B=0;B<m.length;++B){const K=m[B];if(K&&!K.da&&K.capture==w){const pe=K.listener,Rt=K.ha||K.src;K.fa&&zt(h.i,K),V=pe.call(Rt,A)!==!1&&V}}return V&&!A.defaultPrevented}function rr(h,m){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(h,m||0)}function gs(h){h.g=rr(()=>{h.g=null,h.i&&(h.i=!1,gs(h))},h.l);const m=h.h;h.h=null,h.m.apply(null,m)}class Fo extends x{constructor(m,w){super(),this.m=m,this.l=w,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:gs(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(h){x.call(this),this.h=h,this.g={}}d(Sr,x);var Bo=[];function rl(h){Y(h.g,function(m,w){this.g.hasOwnProperty(w)&&zr(m)},h),h.g={}}Sr.prototype.N=function(){Sr.Z.N.call(this),rl(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=o.JSON.stringify,fc=o.JSON.parse,il=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function sl(){}function jo(){}var Ci={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vs(){P.call(this,"d")}d(vs,P);function Ue(){P.call(this,"c")}d(Ue,P);var ir={},ol=null;function xi(){return ol=ol||new De}ir.Ia="serverreachability";function al(h){P.call(this,ir.Ia,h)}d(al,P);function Wr(h){const m=xi();et(m,new al(m))}ir.STAT_EVENT="statevent";function ll(h,m){P.call(this,ir.STAT_EVENT,h),this.stat=m}d(ll,P);function ee(h){const m=xi();et(m,new ll(m,h))}ir.Ja="timingevent";function Qe(h,m){P.call(this,ir.Ja,h),this.size=m}d(Qe,P);function Lt(h,m){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},m)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Hr(h,m,w,A,V,B){h.info(function(){if(h.g)if(B){var K="",pe=B.split("&");for(let $e=0;$e<pe.length;$e++){var Rt=pe[$e].split("=");if(Rt.length>1){const Vt=Rt[0];Rt=Rt[1];const Xr=Vt.split("_");K=Xr.length>=2&&Xr[1]=="type"?K+(Vt+"="+Rt+"&"):K+(Vt+"=redacted&")}}}else K=null;else K=B;return"XMLHTTP REQ ("+A+") [attempt "+V+"]: "+m+`
`+w+`
`+K})}function ul(h,m,w,A,V,B,K){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+V+"]: "+m+`
`+w+`
`+B+" "+K})}function Ai(h,m,w,A){h.info(function(){return"XMLHTTP TEXT ("+m+"): "+If(h,w)+(A?" "+A:"")})}function Sv(h,m){h.info(function(){return"TIMEOUT: "+m})}Er.prototype.info=function(){};function If(h,m){if(!h.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(h=0;h<B.length;h++)if(Array.isArray(B[h])){var w=B[h];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var V=A[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return ys(B)}catch{return m}}var cl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rf;function hl(){}d(hl,sl),hl.prototype.g=function(){return new XMLHttpRequest},Rf=new hl;function Uo(h){return encodeURIComponent(String(h))}function Cf(h){var m=1;h=h.split(":");const w=[];for(;m>0&&h.length;)w.push(h.shift()),m--;return h.length&&w.push(h.join(":")),w}function Kr(h,m,w,A){this.j=h,this.i=m,this.l=w,this.S=A||1,this.V=new Sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var zo={},dl={};function mc(h,m,w){h.M=1,h.A=Wo(Vn(m)),h.u=w,h.R=!0,gc(h,null)}function gc(h,m){h.F=Date.now(),Q(h),h.B=Vn(h.A);var w=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),xc(w.i,"t",A),h.C=0,w=h.j.L,h.h=new $o,h.g=cR(h.j,w?m:null,!h.u),h.P>0&&(h.O=new Fo(u(h.Y,h,h.g),h.P)),m=h.V,w=h.g,A=h.ba;var V="readystatechange";Array.isArray(V)||(V&&(Bo[0]=V.toString()),V=Bo);for(let B=0;B<V.length;B++){const K=Mn(w,V[B],A||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=h.J?we(h.J):{},h.u?(h.v||(h.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,m)):(h.v="GET",h.g.ea(h.B,h.v,null,m)),Wr(),Hr(h.i,h.v,h.B,h.l,h.S,h.u)}Kr.prototype.ba=function(h){h=h.target;const m=this.O;m&&Rs(h)==3?m.j():this.Y(h)},Kr.prototype.Y=function(h){try{if(h==this.g)e:{const pe=Rs(this.g),Rt=this.g.ya(),$e=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||ZI(this.g)))){this.K||pe!=4||Rt==7||(Rt==8||$e<=0?Wr(3):Wr(2)),Ln(this);var m=this.g.ca();this.X=m;var w=Ev(this);if(this.o=m==200,ul(this.i,this.v,this.B,this.l,this.S,pe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var A,V=this.g;if((A=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(A)){var B=A;break t}}B=null}if(h=B)Ai(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fl(this,h);else{this.o=!1,this.m=3,ee(12),qr(this),ws(this);break e}}if(this.R){h=!0;let Vt;for(;!this.K&&this.C<w.length;)if(Vt=xf(this,w),Vt==dl){pe==4&&(this.m=4,ee(14),h=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==zo){this.m=4,ee(15),Ai(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Ai(this.i,this.l,Vt,null),fl(this,Vt);if(_s(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||w.length!=0||this.h.h||(this.m=1,ee(16),h=!1),this.o=this.o&&h,!h)Ai(this.i,this.l,w,"[Invalid Chunked Response]"),qr(this),ws(this);else if(w.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Iv(K),K.P=!0,ee(11))}}else Ai(this.i,this.l,w,null),fl(this,w);pe==4&&qr(this),this.o&&!this.K&&(pe==4?oR(this.j,this):(this.o=!1,Q(this)))}else hU(this.g),m==400&&w.indexOf("Unknown SID")>0?(this.m=3,ee(12)):(this.m=0,ee(13)),qr(this),ws(this)}}}catch{}finally{}};function Ev(h){if(!_s(h))return h.g.la();const m=ZI(h.g);if(m==="")return"";let w="";const A=m.length,V=Rs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return qr(h),ws(h),"";h.h.i=new o.TextDecoder}for(let B=0;B<A;B++)h.h.h=!0,w+=h.h.i.decode(m[B],{stream:!(V&&B==A-1)});return m.length=0,h.h.g+=w,h.C=0,h.h.g}function _s(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function xf(h,m){var w=h.C,A=m.indexOf(`
`,w);return A==-1?dl:(w=Number(m.substring(w,A)),isNaN(w)?zo:(A+=1,A+w>m.length?dl:(m=m.slice(A,A+w),h.C=A+w,m)))}Kr.prototype.cancel=function(){this.K=!0,qr(this)};function Q(h){h.T=Date.now()+h.H,Af(h,h.H)}function Af(h,m){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Lt(u(h.aa,h),m)}function Ln(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Kr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sv(this.i,this.B),this.M!=2&&(Wr(),ee(17)),qr(this),this.m=2,ws(this)):Af(this,this.T-h)};function ws(h){h.j.I==0||h.K||oR(h.j,h)}function qr(h){Ln(h);var m=h.O;m&&typeof m.dispose=="function"&&m.dispose(),h.O=null,rl(h.V),h.g&&(m=h.g,h.g=null,m.abort(),m.dispose())}function fl(h,m){try{var w=h.j;if(w.I!=0&&(w.g==h||pl(w.h,h))){if(!h.L&&pl(w.h,h)&&w.I==3){try{var A=w.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var V=A;if(V[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Hf(w),zf(w);else break e;bv(w),ee(18)}}else w.xa=V[1],0<w.xa-w.K&&V[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Lt(u(w.Va,w),6e3));_c(w.h)<=1&&w.ta&&(w.ta=void 0)}else qo(w,11)}else if((h.L||w.g==h)&&Hf(w),!k(m))for(V=w.Ba.g.parse(m),m=0;m<V.length;m++){let $e=V[m];const Vt=$e[0];if(!(Vt<=w.K))if(w.K=Vt,$e=$e[1],w.I==2)if($e[0]=="c"){w.M=$e[1],w.ba=$e[2];const Xr=$e[3];Xr!=null&&(w.ka=Xr,w.j.info("VER="+w.ka));const Go=$e[4];Go!=null&&(w.za=Go,w.j.info("SVER="+w.za));const Cs=$e[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(A=1.5*Cs,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const xs=h.g;if(xs){const qf=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qf){var B=A.h;B.g||qf.indexOf("spdy")==-1&&qf.indexOf("quic")==-1&&qf.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(ml(B,B.h),B.h=null))}if(A.G){const Rv=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;Rv&&(A.wa=Rv,Be(A.J,A.G,Rv))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var K=h;if(A.na=uR(A,A.L?A.ba:null,A.W),K.L){wc(A.h,K);var pe=K,Rt=A.O;Rt&&(pe.H=Rt),pe.D&&(Ln(pe),Q(pe)),A.g=K}else iR(A);w.i.length>0&&Wf(w)}else $e[0]!="stop"&&$e[0]!="close"||qo(w,7);else w.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?qo(w,7):Tv(w):$e[0]!="noop"&&w.l&&w.l.qa($e),w.A=0)}}Wr(4)}catch{}}var Pf=class{constructor(h,m){this.g=h,this.map=m}};function yc(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function _c(h){return h.h?1:h.g?h.g.size:0}function pl(h,m){return h.h?h.h==m:h.g?h.g.has(m):!1}function ml(h,m){h.g?h.g.add(m):h.h=m}function wc(h,m){h.h&&h.h==m?h.h=null:h.g&&h.g.has(m)&&h.g.delete(m)}yc.prototype.cancel=function(){if(this.i=Sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Sc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let m=h.i;for(const w of h.g.values())m=m.concat(w.G);return m}return p(h.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kf(h,m){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const A=h[w].indexOf("=");let V,B=null;A>=0?(V=h[w].substring(0,A),B=h[w].substring(A+1)):V=h[w],m(V,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Tr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;h instanceof Tr?(this.l=h.l,Ss(this,h.j),this.o=h.o,this.g=h.g,Es(this,h.u),this.h=h.h,gl(this,Ac(h.i)),this.m=h.m):h&&(m=String(h).match(Ec))?(this.l=!1,Ss(this,m[1]||"",!0),this.o=Ts(m[2]||""),this.g=Ts(m[3]||"",!0),Es(this,m[4]),this.h=Ts(m[5]||"",!0),gl(this,m[6]||"",!0),this.m=Ts(m[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}Tr.prototype.toString=function(){const h=[];var m=this.j;m&&h.push(bs(m,bc,!0),":");var w=this.g;return(w||m=="file")&&(h.push("//"),(m=this.o)&&h.push(bs(m,bc,!0),"@"),h.push(Uo(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(bs(w,w.charAt(0)=="/"?Of:Df,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",bs(w,Nf)),h.join("")},Tr.prototype.resolve=function(h){const m=Vn(this);let w=!!h.j;w?Ss(m,h.j):w=!!h.o,w?m.o=h.o:w=!!h.g,w?m.g=h.g:w=h.u!=null;var A=h.h;if(w)Es(m,h.u);else if(w=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var V=m.h.lastIndexOf("/");V!=-1&&(A=m.h.slice(0,V+1)+A)}if(V=A,V==".."||V==".")A="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){A=V.lastIndexOf("/",0)==0,V=V.split("/");const B=[];for(let K=0;K<V.length;){const pe=V[K++];pe=="."?A&&K==V.length&&B.push(""):pe==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&K==V.length&&B.push("")):(B.push(pe),A=!0)}A=B.join("/")}else A=V}return w?m.h=A:w=h.i.toString()!=="",w?gl(m,Ac(h.i)):w=!!h.m,w&&(m.m=h.m),m};function Vn(h){return new Tr(h)}function Ss(h,m,w){h.j=w?Ts(m,!0):m,h.j&&(h.j=h.j.replace(/:$/,""))}function Es(h,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);h.u=m}else h.u=null}function gl(h,m,w){m instanceof Is?(h.i=m,Lf(h.i,h.l)):(w||(m=bs(m,Mf)),h.i=new Is(m,h.l))}function Be(h,m,w){h.i.set(m,w)}function Wo(h){return Be(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ts(h,m){return h?m?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function bs(h,m,w){return typeof h=="string"?(h=encodeURI(h).replace(m,Tc),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var bc=/[#\/\?@]/g,Df=/[#\?:]/g,Of=/[#\?]/g,Mf=/[#\?@]/g,Nf=/#/g;function Is(h,m){this.h=this.g=null,this.i=h||null,this.j=!!m}function Gr(h){h.g||(h.g=new Map,h.h=0,h.i&&kf(h.i,function(m,w){h.add(decodeURIComponent(m.replace(/\+/g," ")),w)}))}t=Is.prototype,t.add=function(h,m){Gr(this),this.i=null,h=Pi(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(m),this.h+=1,this};function Ic(h,m){Gr(h),m=Pi(h,m),h.g.has(m)&&(h.i=null,h.h-=h.g.get(m).length,h.g.delete(m))}function Rc(h,m){return Gr(h),m=Pi(h,m),h.g.has(m)}t.forEach=function(h,m){Gr(this),this.g.forEach(function(w,A){w.forEach(function(V){h.call(m,V,A,this)},this)},this)};function Cc(h,m){Gr(h);let w=[];if(typeof m=="string")Rc(h,m)&&(w=w.concat(h.g.get(Pi(h,m))));else for(h=Array.from(h.g.values()),m=0;m<h.length;m++)w=w.concat(h[m]);return w}t.set=function(h,m){return Gr(this),this.i=null,h=Pi(this,h),Rc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[m]),this.h+=1,this},t.get=function(h,m){return h?(h=Cc(this,h),h.length>0?String(h[0]):m):m};function xc(h,m,w){Ic(h,m),w.length>0&&(h.i=null,h.g.set(Pi(h,m),p(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var w=m[A];const V=Uo(w);w=Cc(this,w);for(let B=0;B<w.length;B++){let K=V;w[B]!==""&&(K+="="+Uo(w[B])),h.push(K)}}return this.i=h.join("&")};function Ac(h){const m=new Is;return m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),m}function Pi(h,m){return m=String(m),h.j&&(m=m.toLowerCase()),m}function Lf(h,m){m&&!h.j&&(Gr(h),h.i=null,h.g.forEach(function(w,A){const V=A.toLowerCase();A!=V&&(Ic(this,A),xc(this,V,w))},h)),h.j=m}function Vf(h,m){const w=new Er;if(o.Image){const A=new Image;A.onload=c(br,w,"TestLoadImage: loaded",!0,m,A),A.onerror=c(br,w,"TestLoadImage: error",!1,m,A),A.onabort=c(br,w,"TestLoadImage: abort",!1,m,A),A.ontimeout=c(br,w,"TestLoadImage: timeout",!1,m,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else m(!1)}function Ff(h,m){const w=new Er,A=new AbortController,V=setTimeout(()=>{A.abort(),br(w,"TestPingServer: timeout",!1,m)},1e4);fetch(h,{signal:A.signal}).then(B=>{clearTimeout(V),B.ok?br(w,"TestPingServer: ok",!0,m):br(w,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),br(w,"TestPingServer: error",!1,m)})}function br(h,m,w,A,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),A(w)}catch{}}function Bf(){this.g=new il}function yl(h){this.i=h.Sb||null,this.h=h.ab||!1}d(yl,sl),yl.prototype.g=function(){return new Ho(this.i,this.h)};function Ho(h,m){De.call(this),this.H=h,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Ho,De),t=Ho.prototype,t.open=function(h,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=m,this.readyState=1,Ko(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(m.body=h),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ko(this)),this.g&&(this.readyState=3,Ko(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pc(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pc(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var m=h.value?h.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!h.done}))&&(this.response=this.responseText+=m)}h.done?ki(this):Ko(this),this.readyState==3&&Pc(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,ki(this))},t.Na=function(h){this.g&&(this.response=h,ki(this))},t.ga=function(){this.g&&ki(this)};function ki(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ko(h)}t.setRequestHeader=function(h,m){this.A.append(h,m)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],m=this.h.entries();for(var w=m.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=m.next();return h.join(`\r
`)};function Ko(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function kc(h){let m="";return Y(h,function(w,A){m+=A,m+=":",m+=w,m+=`\r
`}),m}function vl(h,m,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=kc(w),typeof h=="string"?w!=null&&Uo(w):Be(h,m,w))}function qe(h){De.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(qe,De);var jf=/^https?$/i,Uf=["POST","PUT"];t=qe.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,m,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);m=m?m.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rf.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(h),!0),this.B=!1}catch(B){QI(this,B);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var V in A)w.set(V,A[V]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())w.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(B=>B.toLowerCase()=="content-type"),V=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(Uf,m,void 0)>=0)||A||V||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of w)this.g.setRequestHeader(B,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(B){QI(this,B)}};function QI(h,m){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=m,h.o=5,YI(h),$f(h)}function YI(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,et(this,"complete"),et(this,"abort"),$f(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$f(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?JI(this):this.Xa())},t.Xa=function(){JI(this)};function JI(h){if(h.h&&typeof s<"u"){if(h.v&&Rs(h)==4)setTimeout(h.Ca.bind(h),0);else if(et(h,"readystatechange"),Rs(h)==4){h.h=!1;try{const B=h.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var w;if(!(w=m)){var A;if(A=B===0){let K=String(h.D).match(Ec)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!jf.test(K?K.toLowerCase():"")}w=A}if(w)et(h,"complete"),et(h,"success");else{h.o=6;try{var V=Rs(h)>2?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.ca()+"]",YI(h)}}finally{$f(h)}}}}function $f(h,m){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,m||et(h,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rs(h){return h.g?h.g.readyState:0}t.ca=function(){try{return Rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var m=this.g.responseText;return h&&m.indexOf(h)==0&&(m=m.substring(h.length)),fc(m)}};function ZI(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function hU(h){const m={};h=(h.g&&Rs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(k(h[A]))continue;var w=Cf(h[A]);const V=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const B=m[V]||[];m[V]=B,B.push(w)}ie(m,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dc(h,m,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||m}function eR(h){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dc("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dc("baseRetryDelayMs",5e3,h),this.Za=Dc("retryDelaySeedMs",1e4,h),this.Ta=Dc("forwardChannelMaxRetries",2,h),this.va=Dc("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new yc(h&&h.concurrentRequestLimit),this.Ba=new Bf,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=eR.prototype,t.ka=8,t.I=1,t.connect=function(h,m,w,A){ee(0),this.W=h,this.H=m||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=uR(this,null,this.W),Wf(this)};function Tv(h){if(tR(h),h.I==3){var m=h.V++,w=Vn(h.J);if(Be(w,"SID",h.M),Be(w,"RID",m),Be(w,"TYPE","terminate"),Oc(h,w),m=new Kr(h,h.j,m),m.M=2,m.A=Wo(Vn(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=m.A,w=!0),w||(m.g=cR(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Q(m)}lR(h)}function zf(h){h.g&&(Iv(h),h.g.cancel(),h.g=null)}function tR(h){zf(h),h.v&&(o.clearTimeout(h.v),h.v=null),Hf(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function Wf(h){if(!vc(h.h)&&!h.m){h.m=!0;var m=h.Ea;D||E(),O||(D(),O=!0),b.add(m,h),h.D=0}}function dU(h,m){return _c(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=m.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Lt(u(h.Ea,h,m),aR(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const V=new Kr(this,this.j,h);let B=this.o;if(this.U&&(B?(B=we(B),hn(B,this.U)):B=this.U),this.u!==null||this.R||(V.J=B,B=null),this.S)e:{for(var m=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=w;break e}if(m===4096||w===this.i.length-1){m=w+1;break e}}m=1e3}else m=1e3;m=rR(this,V,m),w=Vn(this.J),Be(w,"RID",h),Be(w,"CVER",22),this.G&&Be(w,"X-HTTP-Session-Id",this.G),Oc(this,w),B&&(this.R?m="headers="+Uo(kc(B))+"&"+m:this.u&&vl(w,this.u,B)),ml(this.h,V),this.Ra&&Be(w,"TYPE","init"),this.S?(Be(w,"$req",m),Be(w,"SID","null"),V.U=!0,mc(V,w,null)):mc(V,w,m),this.I=2}}else this.I==3&&(h?nR(this,h):this.i.length==0||vc(this.h)||nR(this))};function nR(h,m){var w;m?w=m.l:w=h.V++;const A=Vn(h.J);Be(A,"SID",h.M),Be(A,"RID",w),Be(A,"AID",h.K),Oc(h,A),h.u&&h.o&&vl(A,h.u,h.o),w=new Kr(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),m&&(h.i=m.G.concat(h.i)),m=rR(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ml(h.h,w),mc(w,A,m)}function Oc(h,m){h.H&&Y(h.H,function(w,A){Be(m,A,w)}),h.l&&Y({},function(w,A){Be(m,A,w)})}function rR(h,m,w){w=Math.min(h.i.length,w);const A=h.l?u(h.l.Ka,h.l,h):null;e:{var V=h.i;let pe=-1;for(;;){const Rt=["count="+w];pe==-1?w>0?(pe=V[0].g,Rt.push("ofs="+pe)):pe=0:Rt.push("ofs="+pe);let $e=!0;for(let Vt=0;Vt<w;Vt++){var B=V[Vt].g;const Xr=V[Vt].map;if(B-=pe,B<0)pe=Math.max(0,V[Vt].g-100),$e=!1;else try{B="req"+B+"_"||"";try{var K=Xr instanceof Map?Xr:Object.entries(Xr);for(const[Go,Cs]of K){let xs=Cs;a(Cs)&&(xs=ys(Cs)),Rt.push(B+Go+"="+encodeURIComponent(xs))}}catch(Go){throw Rt.push(B+"type="+encodeURIComponent("_badmap")),Go}}catch{A&&A(Xr)}}if($e){K=Rt.join("&");break e}}K=void 0}return h=h.i.splice(0,w),m.G=h,K}function iR(h){if(!h.g&&!h.v){h.Y=1;var m=h.Da;D||E(),O||(D(),O=!0),b.add(m,h),h.A=0}}function bv(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Lt(u(h.Da,h),aR(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,sR(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Lt(u(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ee(10),zf(this),sR(this))};function Iv(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function sR(h){h.g=new Kr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var m=Vn(h.na);Be(m,"RID","rpc"),Be(m,"SID",h.M),Be(m,"AID",h.K),Be(m,"CI",h.F?"0":"1"),!h.F&&h.ia&&Be(m,"TO",h.ia),Be(m,"TYPE","xmlhttp"),Oc(h,m),h.u&&h.o&&vl(m,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Wo(Vn(m)),w.u=null,w.R=!0,gc(w,h)}t.Va=function(){this.C!=null&&(this.C=null,zf(this),bv(this),ee(19))};function Hf(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function oR(h,m){var w=null;if(h.g==m){Hf(h),Iv(h),h.g=null;var A=2}else if(pl(h.h,m))w=m.G,wc(h.h,m),A=1;else return;if(h.I!=0){if(m.o)if(A==1){w=m.u?m.u.length:0,m=Date.now()-m.F;var V=h.D;A=xi(),et(A,new Qe(A,w)),Wf(h)}else iR(h);else if(V=m.m,V==3||V==0&&m.X>0||!(A==1&&dU(h,m)||A==2&&bv(h)))switch(w&&w.length>0&&(m=h.h,m.i=m.i.concat(w)),V){case 1:qo(h,5);break;case 4:qo(h,10);break;case 3:qo(h,6);break;default:qo(h,2)}}}function aR(h,m){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*m}function qo(h,m){if(h.j.info("Error code "+m),m==2){var w=u(h.bb,h),A=h.Ua;const V=!A;A=new Tr(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ss(A,"https"),Wo(A),V?Vf(A.toString(),w):Ff(A.toString(),w)}else ee(2);h.I=0,h.l&&h.l.pa(m),lR(h),tR(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function lR(h){if(h.I=0,h.ja=[],h.l){const m=Sc(h.h);(m.length!=0||h.i.length!=0)&&(g(h.ja,m),g(h.ja,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.oa()}}function uR(h,m,w){var A=w instanceof Tr?Vn(w):new Tr(w);if(A.g!="")m&&(A.g=m+"."+A.g),Es(A,A.u);else{var V=o.location;A=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const B=new Tr(null);A&&Ss(B,A),m&&(B.g=m),V&&Es(B,V),w&&(B.h=w),A=B}return w=h.G,m=h.wa,w&&m&&Be(A,w,m),Be(A,"VER",h.ka),Oc(h,A),A}function cR(h,m,w){if(m&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=h.Aa&&!h.ma?new qe(new yl({ab:w})):new qe(h.ma),m.Fa(h.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hR(){}t=hR.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kf(){}Kf.prototype.g=function(h,m){return new Fn(h,m)};function Fn(h,m){De.call(this),this.g=new eR(m),this.l=h,this.h=m&&m.messageUrlParams||null,h=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(h?h["X-WebChannel-Content-Type"]=m.messageContentType:h={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(h?h["X-WebChannel-Client-Profile"]=m.sa:h={"X-WebChannel-Client-Profile":m.sa}),this.g.U=h,(h=m&&m.Qb)&&!k(h)&&(this.g.u=h),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,h=this.h,h!==null&&m in h&&(h=this.h,m in h&&delete h[m])),this.j=new _l(this)}d(Fn,De),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Tv(this.g)},Fn.prototype.o=function(h){var m=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=ys(h),h=w);m.i.push(new Pf(m.Ya++,h)),m.I==3&&Wf(m)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Tv(this.g),delete this.g,Fn.Z.N.call(this)};function dR(h){vs.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var m=h.__sm__;if(m){e:{for(const w in m){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,m=m!==null&&h in m?m[h]:void 0),this.data=m}else this.data=h}d(dR,vs);function fR(){Ue.call(this),this.status=1}d(fR,Ue);function _l(h){this.g=h}d(_l,hR),_l.prototype.ra=function(){et(this.g,"a")},_l.prototype.qa=function(h){et(this.g,new dR(h))},_l.prototype.pa=function(h){et(this.g,new fR)},_l.prototype.oa=function(){et(this.g,"b")},Kf.prototype.createWebChannel=Kf.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,NN=function(){return new Kf},MN=function(){return xi()},ON=ir,WS={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,am=cl,pc.COMPLETE="complete",DN=pc,jo.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",De.prototype.listen=De.prototype.J,oh=jo,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,kN=qe}).apply(typeof wp<"u"?wp:typeof self<"u"?self:typeof window<"u"?window:{});const Gx="@firebase/firestore",Xx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new xT("@firebase/firestore");function Dl(){return ja.logLevel}function $(t,...e){if(ja.logLevel<=Ee.DEBUG){const n=e.map(PT);ja.debug(`Firestore (${Zu}): ${t}`,...n)}}function _t(t,...e){if(ja.logLevel<=Ee.ERROR){const n=e.map(PT);ja.error(`Firestore (${Zu}): ${t}`,...n)}}function Td(t,...e){if(ja.logLevel<=Ee.WARN){const n=e.map(PT);ja.warn(`Firestore (${Zu}): ${t}`,...n)}}function PT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,LN(t,r,n)}function LN(t,e,n){let r=`FIRESTORE (${Zu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _t(r),new Error(r)}function re(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||LN(e,i,r)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $K{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class zK{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string",31837,{l:r}),new UK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class WK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KK{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){re(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=qK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function HS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return P_(i)===P_(s)?he(i,s):P_(i)?1:-1}return he(t.length,e.length)}const GK=55296,XK=57343;function P_(t){const e=t.charCodeAt(0);return e>=GK&&e<=XK}function Cu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function VN(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="__name__";class ei{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ei.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=ei.isNumericId(e),i=ei.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ei.extractNumericId(e).compare(ei.extractNumericId(n)):HS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}}class Oe extends ei{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const QK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends ei{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return QK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yx}static keyField(){return new nt([Yx])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(Oe.fromString(e))}static fromName(e){return new q(Oe.fromString(e).popFirst(5))}static empty(){return new q(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YK(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jx(t){if(!q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zx(t){if(q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function BN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ny(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ny(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function sf(t,e){if(!BN(t))throw new H(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new H(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=-62135596800,tA=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tA);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eA)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tA}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sf(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:bt("string",Ne._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ne(0,0))}static max(){return new ae(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=-1;class _g{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function KS(t){return t.fields.find(e=>e.kind===2)}function ra(t){return t.fields.filter(e=>e.kind!==2)}_g.UNKNOWN_ID=-1;class lm{constructor(e,n){this.fieldPath=e,this.kind=n}}class bd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new bd(0,Zn.min())}}function jN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new Zn(i,q.empty(),e)}function UN(t){return new Zn(t.readTime,t.key,xu)}class Zn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zn(ae.min(),q.empty(),xu)}static max(){return new Zn(ae.max(),q.empty(),xu)}}function DT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==$N)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="SimpleDb";class Ly{static open(e,n,r,i){try{return new Ly(n,e.transaction(i,r))}catch(s){throw new Nh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new mi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Nh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=OT(r.target.error);this.S.reject(new Nh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(zn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new ZK(n)}}class fo{static delete(e){return $(zn,"Removing database:",e),aa(mN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!TN())return!1;if(fo.F())return!0;const e=Ot(),n=fo.M(e),r=0<n&&n<10,i=WN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,fo.M(Ot())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(zn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Nh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Nh(e,o))},i.onupgradeneeded=s=>{$(zn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{$(zn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Ly.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if($(zn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function WN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class JK{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return aa(this.U.delete())}}class Nh extends H{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Po(t){return t.name==="IndexedDbTransactionError"}class ZK{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($(zn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):($(zn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return $(zn,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next(n=>(n===void 0&&(n=null),$(zn,"GET",this.store.name,e,n),n))}delete(e){return $(zn,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return $(zn,"COUNT",this.store.name),aa(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){$(zn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=OT(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new JK(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const c=u.catch(d=>(l.done(),L.reject(d)));r.push(c)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function aa(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=OT(r.target.error);n(i)}})}let nA=!1;function OT(t){const e=fo.M(Ot());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nA||(nA=!0,setTimeout(()=>{throw r},0)),r}}return t}const Lh="IndexBackfiller";class eq{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(Lh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();$(Lh,`Documents written: ${n}`)}catch(n){Po(n)?$(Lh,"Ignoring IndexedDB error during index backfill: ",n):await Ao(n)}await this.re(6e4)})}}class tq{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $(Lh,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>($(Lh,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=UN(s);DT(o,r)>0&&(r=o)}),new Zn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;function Vy(t){return t==null}function Id(t){return t===0&&1/t==-1/0}function HN(t){return typeof t=="number"&&Number.isInteger(t)&&!Id(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="";function ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rA(e)),e=nq(t.get(n),e);return rA(e)}function nq(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case wg:n+="";break;default:n+=s}}return n}function rA(t){return t+wg+""}function li(t){const e=t.length;if(re(e>=2,64408,{path:t}),e===2)return re(t.charAt(0)===wg&&t.charAt(1)==="",56145,{path:t}),Oe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(wg,s);switch((o<0||o>n)&&Z(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Z(61167,{path:t})}s=o+2}return new Oe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="remoteDocuments",of="owner",El="owner",Rd="mutationQueues",rq="userId",Mr="mutations",iA="batchId",va="userMutationsIndex",sA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e){return[t,ln(e)]}function KN(t,e,n){return[t,ln(e),n]}const iq={},Au="documentMutations",Sg="remoteDocumentsV14",sq=["prefixPath","collectionGroup","readTime","documentId"],cm="documentKeyIndex",oq=["prefixPath","collectionGroup","documentId"],qN="collectionGroupIndex",aq=["collectionGroup","readTime","prefixPath","documentId"],Cd="remoteDocumentGlobal",qS="remoteDocumentGlobalKey",Pu="targets",GN="queryTargetsIndex",lq=["canonicalId","targetId"],ku="targetDocuments",uq=["targetId","path"],MT="documentTargetsIndex",cq=["path","targetId"],Eg="targetGlobalKey",Ra="targetGlobal",xd="collectionParents",hq=["collectionId","parent"],Du="clientMetadata",dq="clientId",Fy="bundles",fq="bundleId",By="namedQueries",pq="name",NT="indexConfiguration",mq="indexId",GS="collectionGroupIndex",gq="collectionGroup",Vh="indexState",yq=["indexId","uid"],XN="sequenceNumberIndex",vq=["uid","sequenceNumber"],Fh="indexEntries",_q=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QN="documentKeyIndex",wq=["indexId","uid","orderedDocumentKey"],jy="documentOverlays",Sq=["userId","collectionPath","documentId"],XS="collectionPathOverlayIndex",Eq=["userId","collectionPath","largestBatchId"],YN="collectionGroupOverlayIndex",Tq=["userId","collectionGroup","largestBatchId"],LT="globals",bq="name",JN=[Rd,Mr,Au,ia,Pu,of,Ra,ku,Du,Cd,xd,Fy,By],Iq=[...JN,jy],ZN=[Rd,Mr,Au,Sg,Pu,of,Ra,ku,Du,Cd,xd,Fy,By,jy],eL=ZN,VT=[...eL,NT,Vh,Fh],Rq=VT,tL=[...VT,LT],Cq=tL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends zN{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Mt(t,e){const n=ne(t);return fo.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sp(this.root,e,this.comparator,!0)}}class Sp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=i??Gt.EMPTY,this.right=s??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aA(this.data.getIterator())}getIteratorFrom(e){return new aA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class aA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Fe(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new rL("Invalid base64 string: "+s):s}}(e);return new wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const xq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(re(!!t,39018),typeof t=="string"){let e=0;const n=xq.exec(t);if(re(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="server_timestamp",sL="__type__",oL="__previous_value__",aL="__local_write_time__";function FT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sL])==null?void 0:r.stringValue)===iL}function Uy(t){const e=t.mapValue.fields[oL];return FT(e)?Uy(e):e}function Ad(t){const e=es(t.mapValue.fields[aL].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const Tg="(default)";class Ua{constructor(e,n){this.projectId=e,this.database=n||Tg}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database===Tg}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="__type__",lL="__max__",eo={mapValue:{fields:{__type__:{stringValue:lL}}}},jT="__vector__",Ou="value",hm={nullValue:"NULL_VALUE"};function vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?FT(t)?4:uL(t)?9007199254740991:$y(t)?10:11:Z(28295,{value:t})}function Ti(t,e){if(t===e)return!0;const n=vo(t);if(n!==vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ad(t).isEqual(Ad(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=es(i.timestampValue),a=es(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Id(o)===Id(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Cu(t.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(oA(o)!==oA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ti(o[l],a[l])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function Pd(t,e){return(t.values||[]).find(n=>Ti(n,e))!==void 0}function _o(t,e){if(t===e)return 0;const n=vo(t),r=vo(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return lA(t.timestampValue,e.timestampValue);case 4:return lA(Ad(t),Ad(e));case 5:return HS(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ts(s),l=ts(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=he(a[u],l[u]);if(c!==0)return c}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Ye(s.latitude),Ye(o.latitude));return a!==0?a:he(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,p,g,S;const a=s.fields||{},l=o.fields||{},u=(f=a[Ou])==null?void 0:f.arrayValue,c=(p=l[Ou])==null?void 0:p.arrayValue,d=he(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((S=c==null?void 0:c.values)==null?void 0:S.length)||0);return d!==0?d:uA(u,c)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===eo.mapValue&&o===eo.mapValue)return 0;if(s===eo.mapValue)return 1;if(o===eo.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=HS(l[d],c[d]);if(f!==0)return f;const p=_o(a[l[d]],u[c[d]]);if(p!==0)return p}return he(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function lA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=es(t),r=es(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function uA(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_o(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Mu(t){return YS(t)}function YS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=YS(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${YS(n.fields[o])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function dm(t){switch(vo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uy(t);return e?16+dm(e):16;case 5:return 2*t.stringValue.length;case 6:return ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+dm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ko(r.fields,(s,o)=>{i+=s.length+dm(o)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function kd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function JS(t){return!!t&&"integerValue"in t}function Dd(t){return!!t&&"arrayValue"in t}function cA(t){return!!t&&"nullValue"in t}function hA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fm(t){return!!t&&"mapValue"in t}function $y(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[BT])==null?void 0:r.stringValue)===jT}function Bh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bh(t.arrayValue.values[n]);return e}return{...t}}function uL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lL}const cL={mapValue:{fields:{[BT]:{stringValue:jT},[Ou]:{arrayValue:{}}}}};function Pq(t){return"nullValue"in t?hm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?kd(Ua.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?$y(t)?cL:{mapValue:{}}:Z(35942,{value:t})}function kq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?kd(Ua.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?cL:"mapValue"in t?$y(t)?{mapValue:{}}:eo:Z(61959,{value:t})}function dA(t,e){const n=_o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function fA(t,e){const n=_o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bh(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Bh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ko(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new on(Bh(this.value))}}function hL(t){const e=[];return ko(t.fields,(n,r)=>{const i=new nt([n]);if(fm(r)){const s=hL(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,ae.min(),ae.min(),ae.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,ae.min(),ae.min(),on.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,ae.min(),ae.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.position=e,this.inclusive=n}}function pA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=_o(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function Dq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{}class Te extends dL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Oq(e,n,r):n==="array-contains"?new Lq(e,r):n==="in"?new vL(e,r):n==="not-in"?new Vq(e,r):n==="array-contains-any"?new Fq(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mq(e,r):new Nq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_o(n,this.value)):n!==null&&vo(this.value)===vo(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends dL{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Le(e,n)}matches(e){return Lu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lu(t){return t.op==="and"}function ZS(t){return t.op==="or"}function UT(t){return fL(t)&&Lu(t)}function fL(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}function e0(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+Mu(t.value);if(UT(t))return t.filters.map(e=>e0(e)).join(",");{const e=t.filters.map(n=>e0(n)).join(",");return`${t.op}(${e})`}}function pL(t,e){return t instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&Ti(r.value,i.value)}(t,e):t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&pL(o,i.filters[a]),!0):!1}(t,e):void Z(19439)}function mL(t,e){const n=t.filters.concat(e);return Le.create(n,t.op)}function gL(t){return t instanceof Te?function(n){return`${n.field.canonicalString()} ${n.op} ${Mu(n.value)}`}(t):t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(gL).join(" ,")+"}"}(t):"Filter"}class Oq extends Te{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mq extends Te{constructor(e,n){super(e,"in",n),this.keys=yL("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Nq extends Te{constructor(e,n){super(e,"not-in",n),this.keys=yL("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yL(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class Lq extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dd(n)&&Pd(n.arrayValue,this.value)}}class vL extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pd(this.value.arrayValue,n)}}class Vq extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pd(this.value.arrayValue,n)}}class Fq extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function t0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Bq(t,e,n,r,i,s,o)}function $a(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>e0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mu(r)).join(",")),e.Te=n}return e.Te}function af(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Dq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mA(t.startAt,e.startAt)&&mA(t.endAt,e.endAt)}function bg(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ig(t,e){return t.filters.filter(n=>n instanceof Te&&n.field.isEqual(e))}function gA(t,e,n){let r=hm,i=!0;for(const s of Ig(t,e)){let o=hm,a=!0;switch(s.op){case"<":case"<=":o=Pq(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=hm}dA({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];dA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function yA(t,e,n){let r=eo,i=!0;for(const s of Ig(t,e)){let o=eo,a=!0;switch(s.op){case">=":case">":o=kq(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=eo}fA({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];fA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _L(t,e,n,r,i,s,o,a){return new ec(t,e,n,r,i,s,o,a)}function lf(t){return new ec(t)}function vA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wL(t){return t.collectionGroup!==null}function jh(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Od(s,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new Od(nt.keyField(),r))}return e.Ie}function Yn(t){const e=ne(t);return e.Ee||(e.Ee=jq(e,jh(t))),e.Ee}function jq(t,e){if(t.limitType==="F")return t0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Od(i.field,s)});const n=t.endAt?new Nu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nu(t.startAt.position,t.startAt.inclusive):null;return t0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function n0(t,e){const n=t.filters.concat([e]);return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function r0(t,e,n){return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zy(t,e){return af(Yn(t),Yn(e))&&t.limitType===e.limitType}function SL(t){return`${$a(Yn(t))}|lt:${t.limitType}`}function Ol(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>gL(i)).join(", ")}]`),Vy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mu(i)).join(",")),`Target(${r})`}(Yn(t))}; limitType=${t.limitType})`}function uf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of jh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=pA(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,jh(r),i)||r.endAt&&!function(o,a,l){const u=pA(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,jh(r),i))}(t,e)}function EL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TL(t){return(e,n)=>{let r=!1;for(const i of jh(t)){const s=Uq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Uq(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?_o(l,u):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return nL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q=new He(q.comparator);function qn(){return $q}const bL=new He(q.comparator);function ah(...t){let e=bL;for(const n of t)e=e.insert(n.key,n);return e}function IL(t){let e=bL;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ui(){return Uh()}function RL(){return Uh()}function Uh(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const zq=new He(q.comparator),Wq=new Fe(q.comparator);function _e(...t){let e=Wq;for(const n of t)e=e.add(n);return e}const Hq=new Fe(he);function $T(){return Hq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function CL(t){return{integerValue:""+t}}function Kq(t,e){return HN(e)?CL(e):zT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this._=void 0}}function qq(t,e,n){return t instanceof Md?function(i,s){const o={fields:{[sL]:{stringValue:iL},[aL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&FT(s)&&(s=Uy(s)),s&&(o.fields[oL]=s),{mapValue:o}}(n,e):t instanceof Vu?AL(t,e):t instanceof Fu?PL(t,e):function(i,s){const o=xL(i,s),a=_A(o)+_A(i.Ae);return JS(o)&&JS(i.Ae)?CL(a):zT(i.serializer,a)}(t,e)}function Gq(t,e,n){return t instanceof Vu?AL(t,e):t instanceof Fu?PL(t,e):n}function xL(t,e){return t instanceof Nd?function(r){return JS(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Md extends Wy{}class Vu extends Wy{constructor(e){super(),this.elements=e}}function AL(t,e){const n=kL(e);for(const r of t.elements)n.some(i=>Ti(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fu extends Wy{constructor(e){super(),this.elements=e}}function PL(t,e){let n=kL(e);for(const r of t.elements)n=n.filter(i=>!Ti(i,r));return{arrayValue:{values:n}}}class Nd extends Wy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _A(t){return Ye(t.integerValue||t.doubleValue)}function kL(t){return Dd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e,n){this.field=e,this.transform=n}}function Qq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Vu&&i instanceof Vu||r instanceof Fu&&i instanceof Fu?Cu(r.elements,i.elements,Ti):r instanceof Nd&&i instanceof Nd?Ti(r.Ae,i.Ae):r instanceof Md&&i instanceof Md}(t.transform,e.transform)}class Yq{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hy{}function DL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ky(t.key,gn.none()):new tc(t.key,t.data,gn.none());{const n=t.data,r=on.empty();let i=new Fe(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new us(t.key,r,new xn(i.toArray()),gn.none())}}function Jq(t,e,n){t instanceof tc?function(i,s,o){const a=i.value.clone(),l=SA(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof us?function(i,s,o){if(!pm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=SA(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(OL(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $h(t,e,n,r){return t instanceof tc?function(s,o,a,l){if(!pm(s.precondition,o))return a;const u=s.value.clone(),c=EA(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(s,o,a,l){if(!pm(s.precondition,o))return a;const u=EA(s.fieldTransforms,l,o),c=o.data;return c.setAll(OL(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return pm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Zq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xL(r.transform,i||null);s!=null&&(n===null&&(n=on.empty()),n.set(r.field,s))}return n||null}function wA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cu(r,i,(s,o)=>Qq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tc extends Hy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class us extends Hy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function SA(t,e,n){const r=new Map;re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Gq(o,a,n[i]))}return r}function EA(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,qq(s,o,e))}return r}class Ky extends Hy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ML extends Hy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Jq(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$h(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$h(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=DL(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Cu(this.mutations,e.mutations,(n,r)=>wA(n,r))&&Cu(this.baseMutations,e.baseMutations,(n,r)=>wA(n,r))}}class HT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return zq}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new HT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,be;function t7(t){switch(t){case j.OK:return Z(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function NL(t){if(t===void 0)return _t("GRPC error has no .code"),j.UNKNOWN;switch(t){case St.OK:return j.OK;case St.CANCELLED:return j.CANCELLED;case St.UNKNOWN:return j.UNKNOWN;case St.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case St.INTERNAL:return j.INTERNAL;case St.UNAVAILABLE:return j.UNAVAILABLE;case St.UNAUTHENTICATED:return j.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case St.NOT_FOUND:return j.NOT_FOUND;case St.ALREADY_EXISTS:return j.ALREADY_EXISTS;case St.PERMISSION_DENIED:return j.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case St.ABORTED:return j.ABORTED;case St.OUT_OF_RANGE:return j.OUT_OF_RANGE;case St.UNIMPLEMENTED:return j.UNIMPLEMENTED;case St.DATA_LOSS:return j.DATA_LOSS;default:return Z(39323,{code:t})}}(be=St||(St={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=new ho([4294967295,4294967295],0);function TA(t){const e=n7().encode(t),n=new PN;return n.update(e),new Uint8Array(n.digest())}function bA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ho([n,r],0),new ho([i,s],0)]}class qT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lh(`Invalid padding: ${n}`);if(r<0)throw new lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ho.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ho.fromNumber(r)));return i.compare(r7)===1&&(i=new ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=TA(e),[r,i]=bA(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new qT(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=TA(e),[r,i]=bA(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cf(ae.min(),i,new He(he),qn(),_e())}}class hf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hf(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class LL{constructor(e,n){this.targetId=e,this.Ce=n}}class VL{constructor(e,n,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class IA{constructor(){this.ve=0,this.Fe=RA(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new hf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=RA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i7{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Ep(),this.He=Ep(),this.Ye=new He(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(bg(s))if(r===0){const o=new q(s.path);this.et(n,o,dt.newNoDocument(o,ae.min()))}else re(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ts(r).toUint8Array()}catch(l){if(l instanceof rL)return Td("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new qT(o,i,s)}catch(l){return Td(l instanceof lh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&bg(a.target)){const l=new q(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,dt.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=_e();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new cf(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Ep(),this.He=Ep(),this.Ye=new He(he),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new IA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new IA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ep(){return new He(q.comparator)}function RA(){return new He(q.comparator)}const s7={asc:"ASCENDING",desc:"DESCENDING"},o7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a7={and:"AND",or:"OR"};class l7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i0(t,e){return t.useProto3Json||Vy(e)?e:{value:e}}function Bu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u7(t,e){return Bu(t,e.toTimestamp())}function wn(t){return re(!!t,49232),ae.fromTimestamp(function(n){const r=es(n);return new Ne(r.seconds,r.nanos)}(t))}function GT(t,e){return s0(t,e).canonicalString()}function s0(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BL(t){const e=Oe.fromString(t);return re(GL(e),10190,{key:e.toString()}),e}function Rg(t,e){return GT(t.databaseId,e.path)}function Ca(t,e){const n=BL(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q($L(n))}function jL(t,e){return GT(t.databaseId,e)}function UL(t){const e=BL(t);return e.length===4?Oe.emptyPath():$L(e)}function o0(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $L(t){return re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CA(t,e,n){return{name:Rg(t,e),fields:n.value.mapValue.fields}}function c7(t,e,n){const r=Ca(t,e.name),i=wn(e.updateTime),s=e.createTime?wn(e.createTime):ae.min(),o=new on({mapValue:{fields:e.fields}}),a=dt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function h7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(re(c===void 0||typeof c=="string",58123),wt.fromBase64String(c||"")):(re(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),wt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?j.UNKNOWN:NL(u.code);return new H(c,u.message||"")}(o);n=new VL(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ca(t,r.document.name),s=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):ae.min(),a=new on({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new mm(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ca(t,r.document),s=r.readTime?wn(r.readTime):ae.min(),o=dt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new mm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ca(t,r.document),s=r.removedTargetIds||[];n=new mm([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new e7(i,s),a=r.targetId;n=new LL(a,o)}}return n}function Cg(t,e){let n;if(e instanceof tc)n={update:CA(t,e.key,e.value)};else if(e instanceof Ky)n={delete:Rg(t,e.key)};else if(e instanceof us)n={update:CA(t,e.key,e.data),updateMask:y7(e.fieldMask)};else{if(!(e instanceof ML))return Z(16599,{Vt:e.type});n={verify:Rg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Md)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function a0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?gn.updateTime(wn(s.updateTime)):s.exists!==void 0?gn.exists(s.exists):gn.none()}(e.currentDocument):gn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Md;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new Vu(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new Fu(c)}else"increment"in a?l=new Nd(o,a.increment):Z(16584,{proto:a});const u=nt.fromServerFormat(a.fieldPath);return new Xq(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Ca(t,e.update.name),s=new on({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new xn(u.map(c=>nt.fromServerFormat(c)))}(e.updateMask);return new us(i,s,o,n,r)}return new tc(i,s,n,r)}if(e.delete){const i=Ca(t,e.delete);return new Ky(i,n)}if(e.verify){const i=Ca(t,e.verify);return new ML(i,n)}return Z(1463,{proto:e})}function d7(t,e){return t&&t.length>0?(re(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?wn(i.updateTime):wn(s);return o.isEqual(ae.min())&&(o=wn(s)),new Yq(o,i.transformResults||[])}(n,e))):[]}function zL(t,e){return{documents:[jL(t,e.path)]}}function WL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jL(t,i);const s=function(u){if(u.length!==0)return qL(Le.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Ml(f.field),direction:p7(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=i0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function HL(t){let e=UL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=KL(d);return f instanceof Le&&UT(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(g){return new Od(Nl(g.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Vy(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Nu(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,p=d.values||[];return new Nu(p,f)}(n.endAt)),_L(e,i,o,s,a,"F",l,u)}function f7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nl(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nl(n.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nl(n.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nl(n.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Te.create(Nl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(r=>KL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function p7(t){return s7[t]}function m7(t){return o7[t]}function g7(t){return a7[t]}function Ml(t){return{fieldPath:t.canonicalString()}}function Nl(t){return nt.fromServerFormat(t.fieldPath)}function qL(t){return t instanceof Te?function(n){if(n.op==="=="){if(hA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NAN"}};if(cA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NOT_NAN"}};if(cA(n.value))return{unaryFilter:{field:Ml(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(n.field),op:m7(n.op),value:n.value}}}(t):t instanceof Le?function(n){const r=n.getFilters().map(i=>qL(i));return r.length===1?r[0]:{compositeFilter:{op:g7(n.op),filters:r}}}(t):Z(54877,{filter:t})}function y7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.yt=e}}function v7(t,e){let n;if(e.document)n=c7(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),i=Wa(e.noDocument.readTime);n=dt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z(56709);{const r=q.fromSegments(e.unknownDocument.path),i=Wa(e.unknownDocument.version);n=dt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ne(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function xA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Rg(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Bu(s,o.version.toTimestamp()),createTime:Bu(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:za(e.version)};else{if(!e.isUnknownDocument())return Z(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:za(e.version)}}return r}function xg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function za(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wa(t){const e=new Ne(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function la(t,e){const n=(e.baseMutations||[]).map(s=>a0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>a0(t.yt,s)),i=Ne.fromMillis(e.localWriteTimeMs);return new WT(e.batchId,i,n,r)}function uh(t){const e=Wa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wa(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return re(o===1,1966,{count:o}),Yn(lf(UL(s.documents[0])))}(t.query):function(s){return Yn(HL(s))}(t.query),new Ui(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wt.fromBase64String(t.resumeToken))}function QL(t,e){const n=za(e.snapshotVersion),r=za(e.lastLimboFreeSnapshotVersion);let i;i=bg(e.target)?zL(t.yt,e.target):WL(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$a(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function YL(t){const e=HL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?r0(e,e.limit,"L"):e}function k_(t,e){return new KT(e.largestBatchId,a0(t.yt,e.overlayMutation))}function AA(t,e){const n=e.path.lastSegment();return[t,ln(e.path.popLast()),n]}function PA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:za(r.readTime),documentKey:ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{getBundleMetadata(e,n){return kA(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Wa(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return kA(e).put(function(i){return{bundleId:i.id,createTime:za(wn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return DA(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:YL(s.bundledQuery),readTime:Wa(s.readTime)}}(r)})}saveNamedQuery(e,n){return DA(e).put(function(i){return{name:i.name,readTime:za(wn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function kA(t){return Mt(t,Fy)}function DA(t){return Mt(t,By)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new qy(e,r)}getOverlay(e,n){return Wc(e).get(AA(this.userId,n)).next(r=>r?k_(this.serializer,r):null)}getOverlays(e,n){const r=ui();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new KT(n,o);i.push(this.St(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ln(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Wc(e).Z(XS,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ui(),s=ln(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wc(e).J(XS,o).next(a=>{for(const l of a){const u=k_(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ui();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Wc(e).ee({index:YN,range:a},(l,u,c)=>{const d=k_(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}St(e,n){return Wc(e).put(function(i,s,o){const[a,l,u]=AA(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Cg(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Wc(t){return Mt(t,jy)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{bt(e){return Mt(e,LT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ye(e.integerValue));else if("doubleValue"in e){const r=Ye(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Id(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=es(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ts(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?uL(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):$y(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Z(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Ou,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ye(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),q.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ua.Kt=new ua;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=255;function S7(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function OA(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=S7(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class E7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=OA(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=OA(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(bl),this.sn(255)}_n(){this.an(bl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===bl?(this.sn(bl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===bl?(this.an(bl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class T7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class b7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hc{constructor(){this.cn=new E7,this.ln=new T7(this.cn),this.hn=new b7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ca(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:gm(this.En),directionalValue:gm(this.dn),orderedDocumentKey:gm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Os(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=MA(t.En,e.En),n!==0?n:(n=MA(t.dn,e.dn),n!==0?n:q.comparator(t.In,e.In)))}function MA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function gm(t){return EN()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function NA(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class LA{constructor(e){this.mn=new Fe((n,r)=>nt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=KS(e);if(n!==void 0&&!this.wn(n))return!1;const r=ra(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Fe(nt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new lm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new lm(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new lm(r.field,r.dir==="asc"?0:1)));return new _g(_g.UNKNOWN_ID,this.collectionId,n,bd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){var n,r;if(re(t instanceof Te||t instanceof Le,20012),t instanceof Te){if(t instanceof vL){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>Te.create(t.field,"==",s)))||[];return Le.create(i,"or")}return t}const e=t.filters.map(i=>JL(i));return Le.create(e,t.op)}function I7(t){if(t.getFilters().length===0)return[];const e=c0(JL(t));return re(ZL(e),7391),l0(e)||u0(e)?[e]:e.getFilters()}function l0(t){return t instanceof Te}function u0(t){return t instanceof Le&&UT(t)}function ZL(t){return l0(t)||u0(t)||function(n){if(n instanceof Le&&ZS(n)){for(const r of n.getFilters())if(!l0(r)&&!u0(r))return!1;return!0}return!1}(t)}function c0(t){if(re(t instanceof Te||t instanceof Le,34018),t instanceof Te)return t;if(t.filters.length===1)return c0(t.filters[0]);const e=t.filters.map(r=>c0(r));let n=Le.create(e,t.op);return n=Ag(n),ZL(n)?n:(re(n instanceof Le,64498),re(Lu(n),40251),re(n.filters.length>1,57927),n.filters.reduce((r,i)=>XT(r,i)))}function XT(t,e){let n;return re(t instanceof Te||t instanceof Le,38388),re(e instanceof Te||e instanceof Le,25473),n=t instanceof Te?e instanceof Te?function(i,s){return Le.create([i,s],"and")}(t,e):VA(t,e):e instanceof Te?VA(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0,48005),Lu(i)&&Lu(s))return mL(i,s.getFilters());const o=ZS(i)?i:s,a=ZS(i)?s:i,l=o.filters.map(u=>XT(u,a));return Le.create(l,"or")}(t,e),Ag(n)}function VA(t,e){if(Lu(e))return mL(e,t.getFilters());{const n=e.filters.map(r=>XT(t,r));return Le.create(n,"or")}}function Ag(t){if(re(t instanceof Te||t instanceof Le,11850),t instanceof Te)return t;const e=t.getFilters();if(e.length===1)return Ag(e[0]);if(fL(t))return t;const n=e.map(i=>Ag(i)),r=[];return n.forEach(i=>{i instanceof Te?r.push(i):i instanceof Le&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Le.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(){this.Cn=new QT}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Zn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class QT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="IndexedDbIndexManager",Tp=new Uint8Array(0);class C7{constructor(e,n){this.databaseId=n,this.vn=new QT,this.Fn=new ls(r=>$a(r),(r,i)=>af(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:ln(i)};return BA(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[VN(n),""],!1,!0);return BA(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(li(o.parent))}return r})}addFieldIndex(e,n){const r=Kc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Rl(e);return s.next(a=>{o.put(PA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Kc(e),i=Rl(e),s=Il(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Kc(e),r=Il(e),i=Rl(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new LA(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Il(e);let i=!0;const s=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_e();const a=[];return L.forEach(s,(l,u)=>{$(FA,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${$a(n)}`);const c=function(v,C){const D=KS(C);if(D===void 0)return null;for(const O of Ig(v,D.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(u,l),d=function(v,C){const D=new Map;for(const O of ra(C))for(const b of Ig(v,O.fieldPath))switch(b.op){case"==":case"in":D.set(O.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return D.set(O.fieldPath.canonicalString(),b.value),Array.from(D.values())}return null}(u,l),f=function(v,C){const D=[];let O=!0;for(const b of ra(C)){const E=b.kind===0?gA(v,b.fieldPath,v.startAt):yA(v,b.fieldPath,v.startAt);D.push(E.value),O&&(O=E.inclusive)}return new Nu(D,O)}(u,l),p=function(v,C){const D=[];let O=!0;for(const b of ra(C)){const E=b.kind===0?yA(v,b.fieldPath,v.endAt):gA(v,b.fieldPath,v.endAt);D.push(E.value),O&&(O=E.inclusive)}return new Nu(D,O)}(u,l),g=this.On(l,u,f),S=this.On(l,u,p),T=this.Nn(l,u,d),_=this.Bn(l.indexId,c,g,f.inclusive,S,p.inclusive,T);return L.forEach(_,y=>r.Y(y,n.limit).next(v=>{v.forEach(C=>{const D=q.fromSegments(C.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=I7(Le.create(e.filters,"and")).map(r=>t0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/u]):Tp,p=this.kn(e,f,r[d%u],i),g=this.qn(e,f,s[d%u],o),S=a.map(T=>this.kn(e,f,T,!0));c.push(...this.createRange(p,g,S))}return c}kn(e,n,r,i){const s=new ca(e,q.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new ca(e,q.empty(),n,r);return i?s.An():s}xn(e,n){const r=new LA(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return L.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Fe(nt.comparator),c=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Hc;for(const i of ra(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ua.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Hc;return ua.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Hc;return ua.Kt.Dt(kd(this.databaseId,n),r.Pn(function(s){const o=ra(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Hc);let s=0;for(const o of ra(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Dd(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ua.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Hc;l.seed(a.un()),ua.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Kc(e),i=Rl(e);return(n?r.J(GS,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const f=d?new bd(d.sequenceNumber,new Zn(Wa(d.readTime),new q(li(d.documentKey)),d.largestBatchId)):bd.empty(),p=c.fields.map(([g,S])=>new lm(nt.fromServerFormat(g),S));return new _g(c.indexId,c.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Kc(e),s=Rl(e);return this.Gn(e).next(o=>i.J(GS,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(PA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.zn(e,i,l).next(u=>{const c=this.jn(s,l);return u.isEqual(c)?L.resolve():this.Jn(e,s,l,u,c)}))))})}Hn(e,n,r,i){return Il(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Il(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Il(e);let s=new Fe(Os);return i.ee({index:QN,range:IDBKeyRange.only([r.indexId,this.uid,gm(this.$n(r,n))])},(o,a)=>{s=s.add(new ca(r.indexId,n,NA(a.arrayValue),NA(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Fe(Os);const i=this.Qn(n,e);if(i==null)return r;const s=KS(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Dd(o))for(const a of o.arrayValue.values||[])r=r.add(new ca(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ca(n.indexId,e.key,Tp,i));return r}Jn(e,n,r,i,s){$(FA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,f){const p=l.getIterator(),g=u.getIterator();let S=Tl(p),T=Tl(g);for(;S||T;){let _=!1,y=!1;if(S&&T){const v=c(S,T);v<0?y=!0:v>0&&(_=!0)}else S!=null?y=!0:_=!0;_?(d(T),T=Tl(g)):y?(f(S),S=Tl(p)):(S=Tl(p),T=Tl(g))}}(i,s,Os,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return Rl(e).ee({index:XN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Os(o,a)).filter((o,a,l)=>!a||Os(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Os(o,e),l=Os(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Tp,q.empty()),l=i[o+1].Vn(this.uid,Tp,q.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Os(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(jA)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||Z(44426))).next(jA)}}function BA(t){return Mt(t,xd)}function Il(t){return Mt(t,Fh)}function Kc(t){return Mt(t,NT)}function Rl(t){return Mt(t,Vh)}function jA(t){re(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;DT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Zn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eV=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t,e,n){const r=t.store(Mr),i=t.store(Au),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(c,d,f)=>(a++,f.delete()));s.push(l.next(()=>{re(a===1,47070,{batchId:n.batchId})}));const u=[];for(const c of n.mutations){const d=KN(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return L.waitFor(s).next(()=>u)}function Pg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(eV,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Gy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){re(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Gy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ms(e).ee({index:va,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ll(e),o=Ms(e);return o.add({}).next(a=>{re(typeof a=="number",49019);const l=new WT(a,n,r,i),u=function(p,g,S){const T=S.baseMutations.map(y=>Cg(p.yt,y)),_=S.mutations.map(y=>Cg(p.yt,y));return{userId:g,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:T,mutations:_}}(this.serializer,this.userId,l),c=[];let d=new Fe((f,p)=>he(f.canonicalString(),p.canonicalString()));for(const f of i){const p=KN(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),c.push(o.put(u)),c.push(s.put(p,iq))}return d.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Ms(e).get(n).next(r=>r?(re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),la(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ms(e).ee({index:va,range:i},(o,a,l)=>{a.userId===this.userId&&(re(a.batchId>=r,47524,{tr:r}),s=la(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ia;return Ms(e).ee({index:va,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ia],[this.userId,Number.POSITIVE_INFINITY]);return Ms(e).J(va,n).next(r=>r.map(i=>la(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=um(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ll(e).ee({range:i},(o,a,l)=>{const[u,c,d]=o,f=li(c);if(u===this.userId&&n.path.isEqual(f))return Ms(e).get(d).next(p=>{if(!p)throw Z(61480,{nr:o,batchId:d});re(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(la(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);const i=[];return n.forEach(s=>{const o=um(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ll(e).ee({range:a},(u,c,d)=>{const[f,p,g]=u,S=li(p);f===this.userId&&s.path.isEqual(S)?r=r.add(g):d.done()});i.push(l)}),L.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=um(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Fe(he);return Ll(e).ee({range:o},(l,u,c)=>{const[d,f,p]=l,g=li(f);d===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(p)):c.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ms(e).get(s).next(o=>{if(o===null)throw Z(35274,{batchId:s});re(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(la(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return tV(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ll(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=li(s[1]);i.push(l)}else a.done()}).next(()=>{re(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return nV(e,this.userId,n)}_r(e){return rV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ia,lastStreamToken:""})}}function nV(t,e,n){const r=um(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ll(t).ee({range:s,X:!0},(a,l,u)=>{const[c,d,f]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Ms(t){return Mt(t,Mr)}function Ll(t){return Mt(t,Au)}function rV(t){return Mt(t,Rd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ha(0)}static cr(){return new Ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Ha(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ae.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Cl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(re(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Cl(e).ee((o,a)=>{const l=uh(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Cl(e).ee((r,i)=>{const s=uh(i);n(s)})}lr(e){return $A(e).get(Eg).next(n=>(re(n!==null,2888),n))}hr(e,n){return $A(e).put(Eg,n)}Pr(e,n){return Cl(e).put(QL(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$a(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Cl(e).ee({range:i,index:GN},(o,a,l)=>{const u=uh(a);af(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ks(e);return n.forEach(o=>{const a=ln(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ks(e);return L.forEach(n,s=>{const o=ln(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ks(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ks(e);let s=_e();return i.ee({range:r,X:!0},(o,a,l)=>{const u=li(o[1]),c=new q(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=ln(n.path),i=IDBKeyRange.bound([r],[VN(r)],!1,!0);let s=0;return Ks(e).ee({index:MT,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return Cl(e).get(n).next(r=>r?uh(r):null)}}function Cl(t){return Mt(t,Pu)}function $A(t){return Mt(t,Ra)}function Ks(t){return Mt(t,ku)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="LruGarbageCollector",iV=1048576;function WA([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class A7{constructor(e){this.Ir=e,this.buffer=new Fe(WA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();WA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(zA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Po(n)?$(zA,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)})}}class P7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Cn.ce);const r=new A7(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(UA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Dl()<=Ee.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function oV(t,e){return new P7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e,n){this.db=e,this.garbageCollector=oV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return bp(e,r)}removeReference(e,n,r){return bp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return bp(e,n)}br(e,n){return function(i,s){let o=!1;return rV(i).te(a=>nV(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Ks(e).delete(function(d){return[0,ln(d.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return bp(e,n)}Sr(e,n){const r=Ks(e);let i,s=Cn.ce;return r.ee({index:MT},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Cn.ce&&n(new q(li(i)),s),s=u,i=l):s=Cn.ce}).next(()=>{s!==Cn.ce&&n(new q(li(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bp(t,e){return Ks(t).put(function(r,i){return{targetId:0,path:ln(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Jo(e).put(r)}removeEntry(e,n,r){return Jo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=dt.newInvalidDocument(n);return Jo(e).ee({index:cm,range:IDBKeyRange.only(qc(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:dt.newInvalidDocument(n)};return Jo(e).ee({index:cm,range:IDBKeyRange.only(qc(n))},(i,s)=>{r={document:this.Cr(n,s),size:Pg(s)}}).next(()=>r)}getEntries(e,n){let r=qn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=qn(),i=new He(q.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Pg(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Fe(qA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(qc(i.first()),qc(i.last())),o=i.getIterator();let a=o.getNext();return Jo(e).ee({index:cm,range:s},(l,u,c)=>{const d=q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&qA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j(qc(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),xg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=qn();for(const d of u){const f=this.Cr(q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(uf(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=qn();const o=KA(n,r),a=KA(n,Zn.max());return Jo(e).ee({index:qN,range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.Cr(q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new O7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return HA(e).get(qS).next(n=>(re(!!n,20021),n))}Dr(e,n){return HA(e).put(qS,n)}Cr(e,n){if(n){const r=v7(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return dt.newInvalidDocument(e)}}function lV(t){return new D7(t)}class O7 extends aV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ls(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Fe((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=xA(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Pg(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=xA(this.Nr.serializer,o.convertToNoDocument(ae.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function HA(t){return Mt(t,Cd)}function Jo(t){return Mt(t,Sg)}function qc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function KA(t,e){const n=e.documentKey.path.toArray();return[t,xg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function qA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$h(r.mutation,i,xn.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ah();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qn();const o=Uh(),a=function(){return Uh()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof us)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),$h(c.mutation,u,c.mutation.getFieldMask(),Ne.now())):o.set(u.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>a.set(u,new M7(c,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Uh();let i=new He((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||xn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=RL();c.forEach(f=>{if(!s.has(f)){const p=DL(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(ui());let a=xu,l=s;return o.next(u=>L.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?L.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(c=>({batchId:a,changes:IL(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=ah();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ah();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(d,f){return new ec(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,dt.newInvalidDocument(c)))});let a=ah();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&$h(c.mutation,u,xn.empty(),Ne.now()),uf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:YL(i.bundledQuery),readTime:wn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.overlays=new He(q.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ui();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=ui(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new He((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ui(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ui(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return L.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KT(n,r));let s=this.qr.get(n);s===void 0&&(s=_e(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.Qr=new Fe(jt.$r),this.Ur=new Fe(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new q(new Oe([])),r=new jt(n,e),i=new jt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new q(new Oe([])),r=new jt(n,e),i=new jt(n,e+1);let s=_e();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(jt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new WT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Ia:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),i=new jt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);return n.forEach(i=>{const s=new jt(i,0),o=new jt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new jt(new q(s),0);let a=new Fe(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new jt(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e){this.ri=e,this.docs=function(){return new He(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qn();const o=n.path,a=new q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||DT(UN(c),r)<=0||(i.has(c.key)||uf(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j7(this)}getSize(e){return L.resolve(this.size)}}class j7 extends aV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.persistence=e,this.si=new ls(n=>$a(n),af),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new YT,this.targetCount=0,this.ai=Ha.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ha(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cn(0),this.li=!1,this.li=!0,this.hi=new V7,this.referenceDelegate=e(this),this.Pi=new U7(this),this.indexManager=new R7,this.remoteDocumentCache=function(i){return new B7(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new XL(n),this.Ii=new N7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new F7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new $7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class $7 extends zN{constructor(e){super(),this.currentSequenceNumber=e}}class Xy{constructor(e){this.persistence=e,this.Ri=new YT,this.Vi=null}static mi(e){return new Xy(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kg{constructor(e,n){this.persistence=e,this.pi=new ls(r=>ln(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=oV(this,n)}static mi(e,n){return new kg(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dm(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.serializer=e}k(e,n,r,i){const s=new Ly("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(of)}(e),function(l){l.createObjectStore(Rd,{keyPath:rq}),l.createObjectStore(Mr,{keyPath:iA,autoIncrement:!0}).createIndex(va,sA,{unique:!0}),l.createObjectStore(Au)}(e),GA(e),function(l){l.createObjectStore(ia)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(ku),l.deleteObjectStore(Pu),l.deleteObjectStore(Ra)}(e),GA(e)),o=o.next(()=>function(l){const u=l.store(Ra),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put(Eg,c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Mr).J().next(d=>{l.deleteObjectStore(Mr),l.createObjectStore(Mr,{keyPath:iA,autoIncrement:!0}).createIndex(va,sA,{unique:!0});const f=u.store(Mr),p=d.map(g=>f.put(g));return L.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Du,{keyPath:dq})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Cd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Fy,{keyPath:fq})})(e),function(l){l.createObjectStore(By,{keyPath:pq})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(jy,{keyPath:Sq});u.createIndex(XS,Eq,{unique:!1}),u.createIndex(YN,Tq,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Sg,{keyPath:sq});u.createIndex(cm,oq),u.createIndex(qN,aq)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(ia))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(NT,{keyPath:mq,autoIncrement:!0}).createIndex(GS,gq,{unique:!1}),l.createObjectStore(Vh,{keyPath:yq}).createIndex(XN,vq,{unique:!1}),l.createObjectStore(Fh,{keyPath:_q}).createIndex(QN,wq,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Vh).clear()}).next(()=>{n.objectStore(Fh).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(LT,{keyPath:bq})})(e)})),r<18&&i>=18&&EN()&&(o=o.next(()=>{n.objectStore(Vh).clear()}).next(()=>{n.objectStore(Fh).clear()})),o}wi(e){let n=0;return e.store(ia).ee((r,i)=>{n+=Pg(i)}).next(()=>{const r={byteSize:n};return e.store(Cd).put(qS,r)})}yi(e){const n=e.store(Rd),r=e.store(Mr);return n.J().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Ia],[s.userId,s.lastAcknowledgedBatchId]);return r.J(va,o).next(a=>L.forEach(a,l=>{re(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=la(this.serializer,l);return tV(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(ku),r=e.store(ia);return e.store(Ra).get(Eg).next(i=>{const s=[];return r.ee((o,a)=>{const l=new Oe(o),u=function(d){return[0,ln(d)]}(l);s.push(n.get(u).next(c=>c?L.resolve():(d=>n.put({targetId:0,path:ln(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}bi(e,n){e.createObjectStore(xd,{keyPath:hq});const r=n.store(xd),i=new QT,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ln(l)})}};return n.store(ia).ee({X:!0},(o,a)=>{const l=new Oe(o);return s(l.popLast())}).next(()=>n.store(Au).ee({X:!0},([o,a,l],u)=>{const c=li(a);return s(c.popLast())}))}Di(e){const n=e.store(Pu);return n.ee((r,i)=>{const s=uh(i),o=QL(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(ia),i=[];return r.ee((s,o)=>{const a=n.store(Sg),l=function(d){return d.document?new q(Oe.fromString(d.document.name).popFirst(5)):d.noDocument?q.fromSegments(d.noDocument.path):d.unknownDocument?q.fromSegments(d.unknownDocument.path):Z(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}Fi(e,n){const r=n.store(Mr),i=lV(this.serializer),s=new JT(Xy.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??_e();la(this.serializer,l).keys().forEach(c=>u=u.add(c)),a.set(l.userId,u)}),L.forEach(a,(l,u)=>{const c=new nn(u),d=qy.wt(this.serializer,c),f=s.getIndexManager(c),p=Gy.wt(c,this.serializer,f,s.referenceDelegate);return new uV(i,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new QS(n,Cn.ce),l).next()})})}}function GA(t){t.createObjectStore(ku,{keyPath:uq}).createIndex(MT,cq,{unique:!0}),t.createObjectStore(Pu,{keyPath:"targetId"}).createIndex(GN,lq,{unique:!0}),t.createObjectStore(Ra)}const Ns="IndexedDbPersistence",D_=18e5,O_=5e3,M_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",W7="main";class ZT{constructor(e,n,r,i,s,o,a,l,u,c,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=c,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!ZT.v())throw new H(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k7(this,i),this.$i=n+W7,this.serializer=new XL(l),this.Ui=new fo(this.$i,this.Ni,new z7(this.serializer)),this.hi=new w7,this.Pi=new x7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lV(this.serializer),this.Ii=new _7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,c===!1&&_t(Ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,M_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Cn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ip(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Po(e))return $(Ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(Ns,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Gc(e).get(El).next(n=>L.resolve(this.es(n)))}ts(e){return Ip(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,D_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Mt(n,Du);return r.J().next(i=>{const s=this.ss(i,D_),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Gc(e).get(El).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,O_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,M_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ip(e).J().next(r=>this.ss(r,O_).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$(Ns,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[of,Du],e=>{const n=new QS(e,Cn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Ip(e).J().next(n=>this.ss(n,D_).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Gy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new C7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return qy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){$(Ns,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?Cq:l===17?tL:l===16?Rq:l===15?VT:l===14?eL:l===13?ZN:l===12?Iq:l===11?JN:void Z(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new QS(a,this.ci?this.ci.next():Cn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new H(j.FAILED_PRECONDITION,$N);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Gc(e).get(El).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,O_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(j.FAILED_PRECONDITION,M_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gc(e).put(El,n)}static v(){return fo.v()}Zi(e){const n=Gc(e);return n.get(El).next(r=>this.es(r)?($(Ns,"Releasing primary lease."),n.delete(El)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;SN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return $(Ns,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t(Ns,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gc(t){return Mt(t,of)}function Ip(t){return Mt(t,Du)}function cV(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new eb(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return SN()?8:WN(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new H7;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Dl()<=Ee.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Dl()<=Ee.DEBUG&&$("QueryEngine","Query:",Ol(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Dl()<=Ee.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):L.resolve())}ys(e,n){if(vA(n))return L.resolve(null);let r=Yn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=r0(n,null,"F"),r=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,r0(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return vA(n)||i.isEqual(ae.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(Dl()<=Ee.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ol(n)),this.vs(e,o,n,jN(i,xu)).next(a=>a))})}Ds(e,n){let r=new Fe(TL(e));return n.forEach((i,s)=>{uf(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Dl()<=Ee.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ol(n)),this.ps.getDocumentsMatchingQuery(e,n,Zn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="LocalStore",K7=3e8;class q7{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new He(he),this.xs=new ls(s=>$a(s),af),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function dV(t,e,n,r){return new q7(t,e,n,r)}async function fV(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function G7(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let p=L.resolve();return f.forEach(g=>{p=p.next(()=>c.getEntry(l,g)).next(S=>{const T=u.docVersions.get(g);re(T!==null,48541),S.version.compareTo(T)<0&&(d.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),c.addEntry(S)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pV(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function X7(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(wt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(d,p),function(S,T,_){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=K7?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,c)&&a.push(n.Pi.updateTargetData(s,p))});let l=qn(),u=_e();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Q7(s,o,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!r.isEqual(ae.min())){const c=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Q7(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(tb,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function Y7(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ia),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dg(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Ui(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ju(t,e,n){const r=ne(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Po(o))throw o;$(tb,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function h0(t,e,n){const r=ne(t);let i=ae.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=ne(l),f=d.xs.get(c);return f!==void 0?L.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,c)}(r,o,Yn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:_e())).next(a=>(yV(r,EL(e),a),{documents:a,Qs:s})))}function mV(t,e){const n=ne(t),r=ne(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function gV(t,e){const n=ne(t),r=n.Os.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,jN(r,xu),Number.MAX_SAFE_INTEGER)).then(i=>(yV(n,e,i),i))}function yV(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="firestore_clients";function XA(t,e){return`${vV}_${t}_${e}`}const _V="firestore_mutations";function QA(t,e,n){let r=`${_V}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const wV="firestore_targets";function N_(t,e){return`${wV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="SharedClientState";class Og{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new H(i.error.code,i.error.message))),o?new Og(e,n,i.state,s):(_t(ni,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new H(r.error.code,r.error.message))),s?new zh(e,r.state,i):(_t(ni,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=$T();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=HN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Mg(e,s):(_t(ni,`Failed to parse client data for instance '${e}': ${n}`),null)}}class nb{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new nb(n.clientId,n.onlineState):(_t(ni,`Failed to parse online state: ${e}`),null)}}class d0{constructor(){this.activeTargetIds=$T()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class L_{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new He(he),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=XA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new d0),this.ro=new RegExp(`^${vV}_${o}_([^_]*)$`),this.io=new RegExp(`^${_V}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${wV}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(XA(this.persistenceKey,r));if(i){const s=Mg.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(N_(this.persistenceKey,e));if(i){const s=zh.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(N_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $(ni,"READ",e,n),n}setItem(e,n){$(ni,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){$(ni,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if($(ni,"EVENT",n.key,n.newValue),n.key===this.eo)return void _t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=Cn.ce;if(s!=null)try{const a=JSON.parse(s);re(typeof a=="number",30636,{So:s}),o=a}catch(a){_t(ni,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Og(this.currentUser,e,n,r),s=QA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=QA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=N_(this.persistenceKey,e),s=new zh(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Mg.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Og.Ws(new nn(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return zh.Ws(i,n)}uo(e){return nb.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(ni,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=$T();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class SV{constructor(){this.Mo=new d0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new d0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="ConnectivityMonitor";class JA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(YA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(YA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp=null;function f0(){return Rp===null?Rp=function(){return 268435456+Math.round(2147483648*Math.random())}():Rp++,"0x"+Rp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="RestConnection",Z7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eG{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Tg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=f0(),a=this.zo(e,n.toUriEncodedString());$(V_,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),c=xo(u);return this.Jo(e,a,l,r,c).then(d=>($(V_,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Td(V_,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Z7[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class nG extends eG{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=f0();return new Promise((a,l)=>{const u=new kN;u.setWithCredentials(!0),u.listenOnce(DN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case am.NO_ERROR:const d=u.getResponseJson();$(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case am.TIMEOUT:$(en,`RPC '${e}' ${o} timed out`),l(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case am.HTTP_ERROR:const f=u.getStatus();if($(en,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const S=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(y)>=0?y:j.UNKNOWN}(g.status);l(new H(S,g.message))}else l(new H(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(j.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$(en,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);$(en,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}T_(e,n,r){const i=f0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NN(),a=MN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");$(en,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.I_(d);let f=!1,p=!1;const g=new tG({Yo:T=>{p?$(en,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||($(en,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),$(en,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},Zo:()=>d.close()}),S=(T,_,y)=>{T.listen(_,v=>{try{y(v)}catch(C){setTimeout(()=>{throw C},0)}})};return S(d,oh.EventType.OPEN,()=>{p||($(en,`RPC '${e}' stream ${i} transport opened.`),g.o_())}),S(d,oh.EventType.CLOSE,()=>{p||(p=!0,$(en,`RPC '${e}' stream ${i} transport closed`),g.a_(),this.E_(d))}),S(d,oh.EventType.ERROR,T=>{p||(p=!0,Td(en,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),g.a_(new H(j.UNAVAILABLE,"The operation could not be completed")))}),S(d,oh.EventType.MESSAGE,T=>{var _;if(!p){const y=T.data[0];re(!!y,16349);const v=y,C=(v==null?void 0:v.error)||((_=v[0])==null?void 0:_.error);if(C){$(en,`RPC '${e}' stream ${i} received error:`,C);const D=C.status;let O=function(R){const x=St[R];if(x!==void 0)return NL(x)}(D),b=C.message;O===void 0&&(O=j.INTERNAL,b="Unknown error status: "+D+" with message "+C.message),p=!0,g.a_(new H(O,b)),d.close()}else $(en,`RPC '${e}' stream ${i} received:`,y),g.u_(y)}}),S(a,ON.STAT_EVENT,T=>{T.stat===WS.PROXY?$(en,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===WS.NOPROXY&&$(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(){return typeof window<"u"?window:null}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){return new l7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="PersistentStream";class bV{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TV(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(ZA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(ZA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rG extends bV{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=h7(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?wn(o.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=o0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=bg(l)?{documents:zL(s,l)}:{query:WL(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FL(s,o.resumeToken);const u=i0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Bu(s,o.snapshotVersion.toTimestamp());const u=i0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=f7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=o0(this.serializer),n.removeTarget=e,this.q_(n)}}class iG extends bV{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=d7(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=o0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Cg(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{}class oG extends sG{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,s0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,s0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_t(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class lG{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{nl(this)&&($(Ka,"Restarting streams for network reachability change."),await async function(l){const u=ne(l);u.Ea.add(4),await df(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Yy(u)}(this))})}),this.Ra=new aG(r,i)}}async function Yy(t){if(nl(t))for(const e of t.da)await e(!0)}async function df(t){for(const e of t.da)await e(!1)}function Jy(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sb(n)?ib(n):rc(n).O_()&&rb(n,e))}function Uu(t,e){const n=ne(t),r=rc(n);n.Ia.delete(e),r.O_()&&IV(n,e),n.Ia.size===0&&(r.O_()?r.L_():nl(n)&&n.Ra.set("Unknown"))}function rb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rc(t).Y_(e)}function IV(t,e){t.Va.Ue(e),rc(t).Z_(e)}function ib(t){t.Va=new i7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),rc(t).start(),t.Ra.ua()}function sb(t){return nl(t)&&!rc(t).x_()&&t.Ia.size>0}function nl(t){return ne(t).Ea.size===0}function RV(t){t.Va=void 0}async function uG(t){t.Ra.set("Online")}async function cG(t){t.Ia.forEach((e,n)=>{rb(t,e)})}async function hG(t,e){RV(t),sb(t)?(t.Ra.ha(e),ib(t)):t.Ra.set("Unknown")}async function dG(t,e,n){if(t.Ra.set("Online"),e instanceof VL&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){$(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ng(t,r)}else if(e instanceof mm?t.Va.Ze(e):e instanceof LL?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await pV(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(wt.EMPTY_BYTE_STRING,c.snapshotVersion)),IV(s,l);const d=new Ui(c.target,l,u,c.sequenceNumber);rb(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$(Ka,"Failed to raise snapshot:",r),await Ng(t,r)}}async function Ng(t,e,n){if(!Po(e))throw e;t.Ea.add(1),await df(t),t.Ra.set("Offline"),n||(n=()=>pV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Ka,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Yy(t)})}function CV(t,e){return e().catch(n=>Ng(t,n,e))}async function nc(t){const e=ne(t),n=wo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ia;for(;fG(e);)try{const i=await Y7(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,pG(e,i)}catch(i){await Ng(e,i)}xV(e)&&AV(e)}function fG(t){return nl(t)&&t.Ta.length<10}function pG(t,e){t.Ta.push(e);const n=wo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function xV(t){return nl(t)&&!wo(t).x_()&&t.Ta.length>0}function AV(t){wo(t).start()}async function mG(t){wo(t).ra()}async function gG(t){const e=wo(t);for(const n of t.Ta)e.ea(n.mutations)}async function yG(t,e,n){const r=t.Ta.shift(),i=HT.from(r,e,n);await CV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nc(t)}async function vG(t,e){e&&wo(t).X_&&await async function(r,i){if(function(o){return t7(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();wo(r).B_(),await CV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await nc(r)}}(t,e),xV(t)&&AV(t)}async function eP(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),$(Ka,"RemoteStore received new credentials");const r=nl(n);n.Ea.add(3),await df(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Yy(n)}async function p0(t,e){const n=ne(t);e?(n.Ea.delete(2),await Yy(n)):e||(n.Ea.add(2),await df(n),n.Ra.set("Unknown"))}function rc(t){return t.ma||(t.ma=function(n,r,i){const s=ne(n);return s.sa(),new rG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:uG.bind(null,t),t_:cG.bind(null,t),r_:hG.bind(null,t),H_:dG.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),sb(t)?ib(t):t.Ra.set("Unknown")):(await t.ma.stop(),RV(t))})),t.ma}function wo(t){return t.fa||(t.fa=function(n,r,i){const s=ne(n);return s.sa(),new iG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:mG.bind(null,t),r_:vG.bind(null,t),ta:gG.bind(null,t),na:yG.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await nc(t)):(await t.fa.stop(),t.Ta.length>0&&($(Ka,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ob(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ab(t,e){if(_t("AsyncQueue",`${e}: ${t}`),Po(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{static emptySet(e){return new pu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=ah(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.ga=new He(q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $u{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $u(e,n,pu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class wG{constructor(){this.queries=nP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=nP(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function nP(){return new ls(t=>SL(t),zy)}async function lb(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new _G,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=ab(o,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&cb(n)}async function ub(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SG(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&cb(n)}function EG(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function cb(t){t.Ca.forEach(e=>{e.next()})}var m0,rP;(rP=m0||(m0={})).Ma="default",rP.Cache="cache";class hb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $u(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$u.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.key=e}}class kV{constructor(e){this.key=e}}class TG{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=TL(e),this.tu=new pu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new tP,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=uf(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),S=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let T=!1;f&&p?f.data.isEqual(p.data)?g!==S&&(r.track({type:3,doc:p}),T=!0):this.su(f,p)||(r.track({type:2,doc:p}),T=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),T=!0):f&&!p&&(r.track({type:1,doc:f}),T=!0,(l||u)&&(a=!0)),T&&(p?(o=o.add(p),s=S?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((c,d)=>function(p,g){const S=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:T})}};return S(p)-S(g)}(c.type,d.type)||this.eu(c.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new $u(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new kV(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new PV(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $u.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ic="SyncEngine";class bG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IG{constructor(e){this.key=e,this.hu=!1}}class RG{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ls(a=>SL(a),zy),this.Iu=new Map,this.Eu=new Set,this.du=new He(q.comparator),this.Au=new Map,this.Ru=new YT,this.Vu={},this.mu=new Map,this.fu=Ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CG(t,e,n=!0){const r=Zy(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await DV(r,e,n,!0),i}async function xG(t,e){const n=Zy(t);await DV(n,e,!0,!1)}async function DV(t,e,n,r){const i=await Dg(t.localStore,Yn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await db(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Jy(t.remoteStore,i),a}async function db(t,e,n,r,i){t.pu=(d,f,p)=>async function(S,T,_,y){let v=T.view.ru(_);v.Cs&&(v=await h0(S.localStore,T.query,!1).then(({documents:b})=>T.view.ru(b,v)));const C=y&&y.targetChanges.get(T.targetId),D=y&&y.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(v,S.isPrimaryClient,C,D);return g0(S,T.targetId,O.au),O.snapshot}(t,d,f,p);const s=await h0(t.localStore,e,!0),o=new TG(e,s.Qs),a=o.ru(s.documents),l=hf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);g0(t,n,u.au);const c=new bG(e,n,o);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function AG(t,e,n){const r=ne(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!zy(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ju(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Uu(r.remoteStore,i.targetId),zu(r,i.targetId)}).catch(Ao)):(zu(r,i.targetId),await ju(r.localStore,i.targetId,!0))}async function PG(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Uu(n.remoteStore,r.targetId))}async function kG(t,e,n){const r=gb(t);try{const i=await function(o,a){const l=ne(o),u=Ne.now(),c=a.reduce((p,g)=>p.add(g.key),_e());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=qn(),S=_e();return l.Ns.getEntries(p,c).next(T=>{g=T,g.forEach((_,y)=>{y.isValidDocument()||(S=S.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(T=>{d=T;const _=[];for(const y of a){const v=Zq(y,d.get(y.key).overlayedDocument);v!=null&&_.push(new us(y.key,v,hL(v.value.mapValue),gn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,_,a)}).next(T=>{f=T;const _=T.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(p,T.batchId,_)})}).then(()=>({batchId:f.batchId,changes:IL(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new He(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Do(r,i.changes),await nc(r.remoteStore)}catch(i){const s=ab(i,"Failed to persist write");n.reject(s)}}async function OV(t,e){const n=ne(t);try{const r=await X7(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?re(o.hu,14607):i.removedDocuments.size>0&&(re(o.hu,42227),o.hu=!1))}),await Do(n,r,e)}catch(r){await Ao(r)}}function iP(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&cb(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DG(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new He(q.comparator);o=o.insert(s,dt.newNoDocument(s,ae.min()));const a=_e().add(s),l=new cf(ae.min(),new Map,new He(he),o,a);await OV(r,l),r.du=r.du.remove(s),r.Au.delete(e),mb(r)}else await ju(r.localStore,e,!1).then(()=>zu(r,e,n)).catch(Ao)}async function OG(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await G7(n.localStore,e);pb(n,r,null),fb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Do(n,i)}catch(i){await Ao(i)}}async function MG(t,e,n){const r=ne(t);try{const i=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(re(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);pb(r,e,n),fb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Do(r,i)}catch(i){await Ao(i)}}function fb(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function pb(t,e,n){const r=ne(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function zu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||MV(t,r)})}function MV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Uu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),mb(t))}function g0(t,e,n){for(const r of n)r instanceof PV?(t.Ru.addReference(r.key,e),NG(t,r)):r instanceof kV?($(ic,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||MV(t,r.key)):Z(19791,{wu:r})}function NG(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(ic,"New document in limbo: "+n),t.Eu.add(r),mb(t))}function mb(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(Oe.fromString(e)),r=t.fu.next();t.Au.set(r,new IG(n)),t.du=t.du.insert(n,r),Jy(t.remoteStore,new Ui(Yn(lf(n.path)),r,"TargetPurposeLimboResolution",Cn.ce))}}async function Do(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=eb.As(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const c=ne(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(u,f=>L.forEach(f.Es,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>L.forEach(f.ds,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Po(d))throw d;$(tb,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const p=c.Ms.get(f),g=p.snapshotVersion,S=p.withLastLimboFreeSnapshotVersion(g);c.Ms=c.Ms.insert(f,S)}}}(r.localStore,s))}async function LG(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){$(ic,"User change. New user:",e.toKey());const r=await fV(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new H(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(n,r.Ls)}}function VG(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function FG(t,e){const n=ne(t),r=await h0(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&g0(n,e.targetId,i.au),i}async function BG(t,e){const n=ne(t);return gV(n.localStore,e).then(r=>Do(n,r))}async function jG(t,e,n,r){const i=ne(t),s=await function(a,l){const u=ne(a),c=ne(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.er(d,l).next(f=>f?u.localDocuments.getDocuments(d,f):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await nc(i.remoteStore):n==="acknowledged"||n==="rejected"?(pb(i,e,r||null),fb(i,e),function(a,l){ne(ne(a).mutationQueue).ir(l)}(i.localStore,e)):Z(6720,"Unknown batchState",{Su:n}),await Do(i,s)):$(ic,"Cannot apply mutation batch with id: "+e)}async function UG(t,e){const n=ne(t);if(Zy(n),gb(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await sP(n,r.toArray());n.gu=!0,await p0(n.remoteStore,!0);for(const s of i)Jy(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(zu(n,o),ju(n.localStore,o,!0))),Uu(n.remoteStore,o)}),await i,await sP(n,r),function(o){const a=ne(o);a.Au.forEach((l,u)=>{Uu(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new He(q.comparator)}(n),n.gu=!1,await p0(n.remoteStore,!1)}}async function sP(t,e,n){const r=ne(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Dg(r.localStore,Yn(l[0]));for(const u of l){const c=r.Tu.get(u),d=await FG(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await mV(r.localStore,o);a=await Dg(r.localStore,u),await db(r,NV(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function NV(t){return _L(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $G(t){return function(n){return ne(ne(n).persistence).Ts()}(ne(t).localStore)}async function zG(t,e,n,r){const i=ne(t);if(i.gu)return void $(ic,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await gV(i.localStore,EL(s[0])),a=cf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",wt.EMPTY_BYTE_STRING);await Do(i,o,a);break}case"rejected":await ju(i.localStore,e,!0),zu(i,e,r);break;default:Z(64155,n)}}async function WG(t,e,n){const r=Zy(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$(ic,"Adding an already active target "+i);continue}const s=await mV(r.localStore,i),o=await Dg(r.localStore,s);await db(r,NV(s),o.targetId,!1,o.resumeToken),Jy(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await ju(r.localStore,i,!1).then(()=>{Uu(r.remoteStore,i),zu(r,i)}).catch(Ao)}}function Zy(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DG.bind(null,e),e.Pu.H_=SG.bind(null,e.eventManager),e.Pu.yu=EG.bind(null,e.eventManager),e}function gb(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MG.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dV(this.persistence,new hV,e.initialUser,this.serializer)}Cu(e){return new JT(Xy.mi,this.serializer)}Du(e){return new SV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class HG extends Ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){re(this.persistence.referenceDelegate instanceof kg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new JT(r=>kg.mi(r,n),this.serializer)}}class LV extends Ld{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await gb(this.xu.syncEngine),await nc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return dV(this.persistence,new hV,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new sV(r,e.asyncQueue,n)}Mu(e,n){const r=new tq(n,this.persistence);return new eq(e.asyncQueue,r)}Cu(e){const n=cV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ZT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,EV(),ym(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new SV}}class KG extends LV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof L_&&(this.sharedClientState.syncEngine={Co:jG.bind(null,n),vo:zG.bind(null,n),Fo:WG.bind(null,n),Ts:$G.bind(null,n),Do:BG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await UG(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=EV();if(!L_.v(n))throw new H(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new L_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LG.bind(null,this.syncEngine),await p0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wG}()}createDatastore(e){const n=Qy(e.databaseInfo.databaseId),r=function(s){return new nG(s)}(e.databaseInfo);return function(s,o,a,l){return new oG(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new lG(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>iP(this.syncEngine,n,0),function(){return JA.v()?new JA:new J7}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new RG(i,s,o,a,l,u);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);$(Ka,"RemoteStore shutting down."),s.Ea.add(5),await df(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vd.provider={build:()=>new Vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="FirestoreClient";class qG{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=kT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(So,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(So,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ab(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function F_(t,e){t.asyncQueue.verifyOperationInProgress(),$(So,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function oP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GG(t);$(So,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>eP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>eP(e.remoteStore,i)),t._onlineComponents=e}async function GG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(So,"Using user provided OfflineComponentProvider");try{await F_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Td("Error using user provided cache. Falling back to memory cache: "+n),await F_(t,new Ld)}}else $(So,"Using default OfflineComponentProvider"),await F_(t,new HG(void 0));return t._offlineComponents}async function VV(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(So,"Using user provided OnlineComponentProvider"),await oP(t,t._uninitializedComponentsProvider._online)):($(So,"Using default OnlineComponentProvider"),await oP(t,new Vd))),t._onlineComponents}function XG(t){return VV(t).then(e=>e.syncEngine)}async function Lg(t){const e=await VV(t),n=e.eventManager;return n.onListen=CG.bind(null,e.syncEngine),n.onUnlisten=AG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PG.bind(null,e.syncEngine),n}function QG(t,e,n={}){const r=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new yb({next:f=>{c.Nu(),o.enqueueAndForget(()=>ub(s,d));const p=f.docs.has(a);!p&&f.fromCache?u.reject(new H(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?u.reject(new H(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new hb(lf(a.path),c,{includeMetadataChanges:!0,qa:!0});return lb(s,d)}(await Lg(t),t.asyncQueue,e,n,r)),r.promise}function YG(t,e,n={}){const r=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new yb({next:f=>{c.Nu(),o.enqueueAndForget(()=>ub(s,d)),f.fromCache&&l.source==="server"?u.reject(new H(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new hb(a,c,{includeMetadataChanges:!0,qa:!0});return lb(s,d)}(await Lg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG="firestore.googleapis.com",lP=!0;class uP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JG,this.ssl=lP}else this.host=e.host,this.ssl=e.ssl??lP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iV)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FV(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vb{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $K;switch(r.type){case"firstParty":return new HK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=aP.get(n);r&&($("ComponentProvider","Removing Datastore"),aP.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sf(n,ft._jsonSchema))return new ft(e,r||null,new q(Oe.fromString(n.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:bt("string",ft._jsonSchemaVersion),referencePath:bt("string")};class po extends Oo{constructor(e,n,r){super(e,n,lf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new q(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function _b(t,e,...n){if(t=at(t),FN("collection","path",e),t instanceof vb){const r=Oe.fromString(e,...n);return Zx(r),new po(t,null,r)}{if(!(t instanceof ft||t instanceof po))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Zx(r),new po(t.firestore,null,r)}}function sc(t,e,...n){if(t=at(t),arguments.length===1&&(e=kT.newId()),FN("doc","path",e),t instanceof vb){const r=Oe.fromString(e,...n);return Jx(r),new ft(t,null,new q(r))}{if(!(t instanceof ft||t instanceof po))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Jx(r),new ft(t.firestore,t instanceof po?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="AsyncQueue";class hP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TV(this,"async_queue_retry"),this._c=()=>{const r=ym();r&&$(cP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ym();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new mi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;$(cP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_t("INTERNAL UNHANDLED ERROR: ",dP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ob.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:dP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Eo extends vb{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new hP,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hP(e),this._firestoreClient=void 0,await e}}}function ZG(t,e,n){n||(n=Tg);const r=My(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Fa(s,e))return i;throw new H(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new H(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iV)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&xo(e.host)&&CT(e.host),r.initialize({options:e,instanceIdentifier:n})}function ev(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eX(t),t._firestoreClient}function eX(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,c){return new Aq(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,FV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new qG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ur(wt.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ur(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sf(e,ur._jsonSchema))return ur.fromBase64String(e.bytes)}}ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:bt("string",ur._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(sf(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:bt("string",gi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sf(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yi(e.vectorValues);throw new H(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:bt("string",yi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tX=/^__.*__$/;class nX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new tc(e,this.data,n,this.fieldTransforms)}}class BV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Sb{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jV(this.Ac)&&tX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qy(e)}Cc(e,n,r,i=!1){return new Sb({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eb(t){const e=t._freezeSettings(),n=Qy(t._databaseId);return new rX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iX(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Tb("Data must be an object, but it was:",o,r);const a=UV(r,o);let l,u;if(s.merge)l=new xn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=y0(e,d,n);if(!o.contains(f))throw new H(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);zV(c,f)||c.push(f)}l=new xn(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new nX(new on(a),l,u)}class nv extends wb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nv}}function sX(t,e,n,r){const i=t.Cc(1,e,n);Tb("Data must be an object, but it was:",i,r);const s=[],o=on.empty();ko(r,(l,u)=>{const c=bb(e,l,n);u=at(u);const d=i.yc(c);if(u instanceof nv)s.push(c);else{const f=ff(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new xn(s);return new BV(o,a,i.fieldTransforms)}function oX(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[y0(e,r,n)],l=[i];if(s.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(y0(e,s[f])),l.push(s[f+1]);const u=[],c=on.empty();for(let f=a.length-1;f>=0;--f)if(!zV(u,a[f])){const p=a[f];let g=l[f];g=at(g);const S=o.yc(p);if(g instanceof nv)u.push(p);else{const T=ff(g,S);T!=null&&(u.push(p),c.set(p,T))}}const d=new xn(u);return new BV(c,d,o.fieldTransforms)}function aX(t,e,n,r=!1){return ff(n,t.Cc(r?4:3,e))}function ff(t,e){if($V(t=at(t)))return Tb("Unsupported field value:",e,t),UV(t,e);if(t instanceof wb)return function(r,i){if(!jV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ff(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ne.fromDate(r);return{timestampValue:Bu(i.serializer,s)}}if(r instanceof Ne){const s=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bu(i.serializer,s)}}if(r instanceof gi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:FL(i.serializer,r._byteString)};if(r instanceof ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:GT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yi)return function(o,a){return{mapValue:{fields:{[BT]:{stringValue:jT},[Ou]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return zT(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Ny(r)}`)}(t,e)}function UV(t,e){const n={};return nL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(r,i)=>{const s=ff(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $V(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof gi||t instanceof ur||t instanceof ft||t instanceof wb||t instanceof yi)}function Tb(t,e,n){if(!$V(n)||!BN(n)){const r=Ny(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function y0(t,e,n){if((e=at(e))instanceof tv)return e._internalPath;if(typeof e=="string")return bb(t,e);throw Vg("Field path arguments must be of type string or ",t,!1,void 0,n)}const lX=new RegExp("[~\\*/\\[\\]]");function bb(t,e,n){if(e.search(lX)>=0)throw Vg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tv(...e.split("."))._internalPath}catch{throw Vg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(j.INVALID_ARGUMENT,a+t+l)}function zV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ib("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uX extends WV{data(){return super.data()}}function Ib(t,e){return typeof e=="string"?bb(t,e):e instanceof tv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rb{}class KV extends Rb{}function qV(t,e,...n){let r=[];e instanceof Rb&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof xb).length,a=s.filter(l=>l instanceof Cb).length;if(o>1||o>0&&a>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Cb extends KV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Cb(e,n,r)}_apply(e){const n=this._parse(e);return GV(e._query,n),new Oo(e.firestore,e.converter,n0(e._query,n))}_parse(e){const n=Eb(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){mP(d,c);const g=[];for(const S of d)g.push(pP(l,s,S));f={arrayValue:{values:g}}}else f=pP(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||mP(d,c),f=aX(a,o,d,c==="in"||c==="not-in");return Te.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class xb extends Rb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)GV(o,l),o=n0(o,l)}(e._query,n),new Oo(e.firestore,e.converter,n0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ab extends KV{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ab(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Od(s,o)}(e._query,this._field,this._direction);return new Oo(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ec(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function cX(t,e="asc"){const n=e,r=Ib("orderBy",t);return Ab._create(r,n)}function pP(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wL(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!q.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kd(t,new q(r))}if(n instanceof ft)return kd(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ny(n)}.`)}function mP(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GV(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hX{convertValue(e,n="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ko(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ou].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ye(o.doubleValue));return new yi(n)}convertGeoPoint(e){return new gi(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ad(e));default:return null}}convertTimestamp(e){const n=es(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);re(GL(r),9688,{name:e});const i=new Ua(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||_t(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dX(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ch{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends WV{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ib("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:bt("string",xa._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class vm extends xa{data(e={}){return super.data(e)}}class Aa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ch(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vm(this._firestore,this._userDataWriter,r.key,r,new ch(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new vm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ch(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new vm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ch(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:fX(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pX(t){t=mr(t,ft);const e=mr(t.firestore,Eo);return QG(ev(e),t._key).then(n=>XV(e,t,n))}Aa._jsonSchemaVersion="firestore/querySnapshot/1.0",Aa._jsonSchema={type:bt("string",Aa._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class Pb extends hX{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function mX(t){t=mr(t,Oo);const e=mr(t.firestore,Eo),n=ev(e),r=new Pb(e);return HV(t._query),YG(n,t._query).then(i=>new Aa(e,r,t,i))}function kb(t,e,n){t=mr(t,ft);const r=mr(t.firestore,Eo),i=dX(t.converter,e,n);return Db(r,[iX(Eb(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gn.none())])}function gX(t,e,n,...r){t=mr(t,ft);const i=mr(t.firestore,Eo),s=Eb(i);let o;return o=typeof(e=at(e))=="string"||e instanceof tv?oX(s,"updateDoc",t._key,e,n,r):sX(s,"updateDoc",t._key,e),Db(i,[o.toMutation(t._key,gn.exists(!0))])}function yX(t){return Db(mr(t.firestore,Eo),[new Ky(t._key,gn.none())])}function vX(t,...e){var l,u,c;t=at(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||fP(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(fP(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(u=d.error)==null?void 0:u.bind(d),e[r+2]=(c=d.complete)==null?void 0:c.bind(d)}let s,o,a;if(t instanceof ft)o=mr(t.firestore,Eo),a=lf(t._key.path),s={next:d=>{e[r]&&e[r](XV(o,t,d))},error:e[r+1],complete:e[r+2]};else{const d=mr(t,Oo);o=mr(d.firestore,Eo),a=d._query;const f=new Pb(o);s={next:p=>{e[r]&&e[r](new Aa(o,f,d,p))},error:e[r+1],complete:e[r+2]},HV(t._query)}return function(f,p,g,S){const T=new yb(S),_=new hb(p,T,g);return f.asyncQueue.enqueueAndForget(async()=>lb(await Lg(f),_)),()=>{T.Nu(),f.asyncQueue.enqueueAndForget(async()=>ub(await Lg(f),_))}}(ev(o),a,i,s)}function Db(t,e){return function(r,i){const s=new mi;return r.asyncQueue.enqueueAndForget(async()=>kG(await XG(r),i,s)),s.promise}(ev(t),e)}function XV(t,e,n){const r=n.docs.get(e._key),i=new Pb(t);return new xa(t,i,e._key,r,new ch(n.hasPendingWrites,n.fromCache),e.converter)}class _X{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=TX(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function wX(t){return new _X(t)}class SX{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vd.provider,this._offlineComponentProvider={build:n=>new LV(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class EX{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vd.provider,this._offlineComponentProvider={build:n=>new KG(n,e==null?void 0:e.cacheSizeBytes)}}}function TX(t){return new SX(t==null?void 0:t.forceOwnership)}function bX(){return new EX}(function(e,n=!0){(function(i){Zu=i})(tl),Ba(new yo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Eo(new zK(r.getProvider("auth-internal")),new KK(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(u.options.projectId,c)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),pi(Gx,Xx,e),pi(Gx,Xx,"esm2020")})();function QV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IX=QV,YV=new nf("auth","Firebase",QV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new xT("@firebase/auth");function RX(t,...e){Fg.logLevel<=Ee.WARN&&Fg.warn(`Auth (${tl}): ${t}`,...e)}function _m(t,...e){Fg.logLevel<=Ee.ERROR&&Fg.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,...e){throw Ob(t,...e)}function vi(t,...e){return Ob(t,...e)}function JV(t,e,n){const r={...IX(),[e]:n};return new nf("auth","Firebase",r).create(e,{appName:t.name})}function qi(t){return JV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ob(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YV.create(t,...e)}function le(t,e,...n){if(!t)throw Ob(e,...n)}function $i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _m(e),new Error(e)}function ns(t,e){t||$i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function CX(){return gP()==="http:"||gP()==="https:"}function gP(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CX()||wH()||"connection"in navigator)?navigator.onLine:!0}function AX(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.shortDelay=e,this.longDelay=n,ns(n>e,"Short delay should be less than long delay!"),this.isMobile=vH()||SH()}get(){return xX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e){ns(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DX=new pf(3e4,6e4);function cs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function hs(t,e,n,r,i={}){return e2(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=rf({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return _H()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&xo(t.emulatorConfig.host)&&(u.credentials="include"),ZV.fetch()(await t2(t,t.config.apiHost,n,a),u)})}async function e2(t,e,n){t._canInitEmulator=!1;const r={...PX,...e};try{const i=new MX(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Cp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Cp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Cp(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw JV(t,c,u);Ur(t,c)}}catch(i){if(i instanceof Ii)throw i;Ur(t,"network-request-failed",{message:String(i)})}}async function mf(t,e,n,r,i={}){const s=await hs(t,e,n,r,i);return"mfaPendingCredential"in s&&Ur(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function t2(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Mb(t.config,i):`${t.config.apiScheme}://${i}`;return kX.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function OX(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vi(this.auth,"network-request-failed")),DX.get())})}}function Cp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vi(t,e,r);return i.customData._tokenResponse=n,i}function yP(t){return t!==void 0&&t.enterprise!==void 0}class NX{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return OX(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function LX(t,e){return hs(t,"GET","/v2/recaptchaConfig",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VX(t,e){return hs(t,"POST","/v1/accounts:delete",e)}async function Bg(t,e){return hs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FX(t,e=!1){const n=at(t),r=await n.getIdToken(e),i=Nb(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wh(B_(i.auth_time)),issuedAtTime:Wh(B_(i.iat)),expirationTime:Wh(B_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function B_(t){return Number(t)*1e3}function Nb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _m("JWT malformed, contained fewer than 3 sections"),null;try{const i=pN(n);return i?JSON.parse(i):(_m("Failed to decode base64 JWT payload"),null)}catch(i){return _m("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vP(t){const e=Nb(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ii&&BX(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function BX({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wh(this.lastLoginAt),this.creationTime=Wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jg(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Fd(t,Bg(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?n2(i.providerUserInfo):[],o=$X(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _0(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function UX(t){const e=at(t);await jg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $X(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function n2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zX(t,e){const n=await e2(t,{},async()=>{const r=rf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await t2(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&xo(t.emulatorConfig.host)&&(l.credentials="include"),ZV.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WX(t,e){return hs(t,"POST","/v2/accounts:revokeToken",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=vP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zX(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new mu;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mu,this.toJSON())}_performRefresh(){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new jX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Fd(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FX(this,e)}reload(){return UX(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await Fd(this,VX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:g,stsTokenManager:S}=n;le(d&&S,e,"internal-error");const T=mu.fromJSON(this.name,S);le(typeof d=="string",e,"internal-error"),Ls(r,e.name),Ls(i,e.name),le(typeof f=="boolean",e,"internal-error"),le(typeof p=="boolean",e,"internal-error"),Ls(s,e.name),Ls(o,e.name),Ls(a,e.name),Ls(l,e.name),Ls(u,e.name),Ls(c,e.name);const _=new Vr({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:T,createdAt:u,lastLoginAt:c});return g&&Array.isArray(g)&&(_.providerData=g.map(y=>({...y}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new mu;i.updateFromServerResponse(n);const s=new Vr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?n2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new mu;a.updateFromIdToken(r);const l=new Vr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=new Map;function zi(t){ns(t instanceof Function,"Expected a class definition");let e=_P.get(t);return e?(ns(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_P.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}r2.type="NONE";const wP=r2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e,n){return`firebase:${t}:${e}:${n}`}class gu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=wm(this.userKey,i.apiKey,s),this.fullPersistenceKey=wm("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bg(this.auth,{idToken:e}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gu(zi(wP),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||zi(wP);const o=wm(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await Bg(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Vr._fromGetAccountInfoResponse(e,f,c)}else d=Vr._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new gu(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new gu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u2(e))return"Blackberry";if(c2(e))return"Webos";if(s2(e))return"Safari";if((e.includes("chrome/")||o2(e))&&!e.includes("edge/"))return"Chrome";if(l2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function i2(t=Ot()){return/firefox\//i.test(t)}function s2(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o2(t=Ot()){return/crios\//i.test(t)}function a2(t=Ot()){return/iemobile/i.test(t)}function l2(t=Ot()){return/android/i.test(t)}function u2(t=Ot()){return/blackberry/i.test(t)}function c2(t=Ot()){return/webos/i.test(t)}function Lb(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HX(t=Ot()){var e;return Lb(t)&&!!((e=window.navigator)!=null&&e.standalone)}function KX(){return EH()&&document.documentMode===10}function h2(t=Ot()){return Lb(t)||l2(t)||c2(t)||u2(t)||/windows phone/i.test(t)||a2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e=[]){let n;switch(t){case"Browser":n=SP(Ot());break;case"Worker":n=`${SP(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GX(t,e={}){return hs(t,"GET","/v2/passwordPolicy",cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XX=6;class QX{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??XX,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YX{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EP(this),this.idTokenSubscription=new EP(this),this.beforeStateQueue=new qX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await gu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bg(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(qi(this));const n=e?at(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GX(this),n=new QX(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WX(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await gu.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&RX(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mo(t){return at(t)}class EP{constructor(e){this.auth=e,this.observer=null,this.addObserver=xH(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JX(t){rv=t}function f2(t){return rv.loadJS(t)}function ZX(){return rv.recaptchaEnterpriseScript}function eQ(){return rv.gapiScript}function tQ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class nQ{constructor(){this.enterprise=new rQ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rQ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const iQ="recaptcha-enterprise",p2="NO_RECAPTCHA";class sQ{constructor(e){this.type=iQ,this.auth=Mo(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{LX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new NX(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;yP(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(p2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nQ().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&yP(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ZX();l.length!==0&&(l+=a),f2(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function TP(t,e,n,r=!1,i=!1){const s=new sQ(t);let o;if(i)o=p2;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ug(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await TP(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await TP(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(t,e){const n=My(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Fa(s,e??{}))return i;Ur(i,"already-initialized")}return n.initialize({options:e})}function aQ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lQ(t,e,n){const r=Mo(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=m2(e),{host:o,port:a}=uQ(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Fa(u,r.config.emulator)&&Fa(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,xo(o)?(CT(`${s}//${o}${l}`),_N("Auth",!0)):cQ()}function m2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uQ(t){const e=m2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:bP(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:bP(o)}}}function bP(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cQ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,n){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}}async function hQ(t,e){return hs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dQ(t,e){return mf(t,"POST","/v1/accounts:signInWithPassword",cs(t,e))}async function fQ(t,e){return hs(t,"POST","/v1/accounts:sendOobCode",cs(t,e))}async function pQ(t,e){return fQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mQ(t,e){return mf(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}async function gQ(t,e){return mf(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends Vb{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,n,"signInWithPassword",dQ);case"emailLink":return mQ(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,r,"signUpPassword",hQ);case"emailLink":return gQ(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t,e){return mf(t,"POST","/v1/accounts:signInWithIdp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQ="http://localhost";class qa extends Vb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new qa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yu(e,n)}buildRequest(){const e={requestUri:yQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _Q(t){const e=ih(sh(t)).link,n=e?ih(sh(e)).deep_link_id:null,r=ih(sh(t)).deep_link_id;return(r?ih(sh(r)).link:null)||r||n||e||t}class Fb{constructor(e){const n=ih(sh(e)),r=n.apiKey??null,i=n.oobCode??null,s=vQ(n.mode??null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_Q(e);try{return new Fb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.providerId=oc.PROVIDER_ID}static credential(e,n){return Bd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fb.parseLink(n);return le(r,"argument-error"),Bd._fromEmailAndCode(e,r.code,r.tenantId)}}oc.PROVIDER_ID="password";oc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends g2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends gf{constructor(){super("facebook.com")}static credential(e){return qa._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends gf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qa._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.GOOGLE_SIGN_IN_METHOD="google.com";Gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends gf{constructor(){super("github.com")}static credential(e){return qa._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends gf{constructor(){super("twitter.com")}static credential(e,n){return qa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qs.credential(n,r)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wQ(t,e){return mf(t,"POST","/v1/accounts:signUp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Vr._fromIdTokenResponse(e,r,i),o=IP(r);return new Ga({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=IP(r);return new Ga({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function IP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends Ii{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$g.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $g(e,n,r,i)}}function y2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$g._fromErrorAndOperation(t,s,e,r):s})}async function SQ(t,e,n=!1){const r=await Fd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ga._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EQ(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(qi(r));const i="reauthenticate";try{const s=await Fd(t,y2(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Nb(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Ga._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(t,e,n=!1){if(Hn(t.app))return Promise.reject(qi(t));const r="signIn",i=await y2(t,r,e),s=await Ga._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function TQ(t,e){return v2(Mo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t){const e=Mo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bQ(t,e,n){const r=Mo(t);await Ug(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pQ)}async function IQ(t,e,n){if(Hn(t.app))return Promise.reject(qi(t));const r=Mo(t),o=await Ug(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wQ).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_2(t),l}),a=await Ga._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function RQ(t,e,n){return Hn(t.app)?Promise.reject(qi(t)):TQ(at(t),oc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_2(t),r})}function CQ(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function xQ(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function AQ(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function PQ(t){return at(t).signOut()}const zg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zg,"1"),this.storage.removeItem(zg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kQ=1e3,DQ=10;class S2 extends w2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);KX()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,DQ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S2.type="LOCAL";const OQ=S2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2 extends w2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}E2.type="SESSION";const T2=E2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MQ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new iv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await MQ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}iv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Bb("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function LQ(t){_i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function VQ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FQ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function BQ(){return b2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="firebaseLocalStorageDb",jQ=1,Wg="firebaseLocalStorage",R2="fbase_key";class yf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sv(t,e){return t.transaction([Wg],e?"readwrite":"readonly").objectStore(Wg)}function UQ(){const t=indexedDB.deleteDatabase(I2);return new yf(t).toPromise()}function w0(){const t=indexedDB.open(I2,jQ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wg,{keyPath:R2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wg)?e(r):(r.close(),await UQ(),e(await w0()))})})}async function RP(t,e,n){const r=sv(t,!0).put({[R2]:e,value:n});return new yf(r).toPromise()}async function $Q(t,e){const n=sv(t,!1).get(e),r=await new yf(n).toPromise();return r===void 0?null:r.value}function CP(t,e){const n=sv(t,!0).delete(e);return new yf(n).toPromise()}const zQ=800,WQ=3;class C2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return b2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iv._getInstance(BQ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await VQ(),!this.activeServiceWorker)return;this.sender=new NQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w0();return await RP(e,zg,"1"),await CP(e,zg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>RP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$Q(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=sv(i,!1).getAll();return new yf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C2.type="LOCAL";const HQ=C2;new pf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KQ(t,e){return e?zi(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Vb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qQ(t){return v2(t.auth,new jb(t),t.bypassAuthState)}function GQ(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),EQ(n,new jb(t),t.bypassAuthState)}async function XQ(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),SQ(n,new jb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qQ;case"linkViaPopup":case"linkViaRedirect":return XQ;case"reauthViaPopup":case"reauthViaRedirect":return GQ;default:Ur(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=new pf(2e3,1e4);class Jl extends x2{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Jl.currentPopupAction&&Jl.currentPopupAction.cancel(),Jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=Bb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QQ.get())};e()}}Jl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ="pendingRedirect",Sm=new Map;class JQ extends x2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sm.get(this.auth._key());if(!e){try{const r=await ZQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sm.set(this.auth._key(),e)}return this.bypassAuthState||Sm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZQ(t,e){const n=nY(e),r=tY(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function eY(t,e){Sm.set(t._key(),e)}function tY(t){return zi(t._redirectPersistence)}function nY(t){return wm(YQ,t.config.apiKey,t.name)}async function rY(t,e,n=!1){if(Hn(t.app))return Promise.reject(qi(t));const r=Mo(t),i=KQ(r,e),o=await new JQ(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iY=10*60*1e3;class sY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!A2(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(vi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iY&&this.cachedEventUids.clear(),this.cachedEventUids.has(xP(e))}saveEventToCache(e){this.cachedEventUids.add(xP(e)),this.lastProcessedEventTime=Date.now()}}function xP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function A2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aY(t,e={}){return hs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uY=/^https?/;async function cY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aY(t);for(const n of e)try{if(hY(n))return}catch{}Ur(t,"unauthorized-domain")}function hY(t){const e=v0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uY.test(n))return!1;if(lY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY=new pf(3e4,6e4);function AP(){const t=_i().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fY(t){return new Promise((e,n)=>{var i,s,o;function r(){AP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AP(),n(vi(t,"network-request-failed"))},timeout:dY.get()})}if((s=(i=_i().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=_i().gapi)!=null&&o.load)r();else{const a=tQ("iframefcb");return _i()[a]=()=>{gapi.load?r():n(vi(t,"network-request-failed"))},f2(`${eQ()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Em=null,e})}let Em=null;function pY(t){return Em=Em||fY(t),Em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY=new pf(5e3,15e3),gY="__/auth/iframe",yY="emulator/auth/iframe",vY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_Y=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wY(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mb(e,yY):`https://${t.config.authDomain}/${gY}`,r={apiKey:e.apiKey,appName:t.name,v:tl},i=_Y.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rf(r).slice(1)}`}async function SY(t){const e=await pY(t),n=_i().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:wY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vY,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=vi(t,"network-request-failed"),a=_i().setTimeout(()=>{s(o)},mY.get());function l(){_i().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TY=500,bY=600,IY="_blank",RY="http://localhost";class PP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CY(t,e,n,r=TY,i=bY){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...EY,width:r.toString(),height:i.toString(),top:s,left:o},u=Ot().toLowerCase();n&&(a=o2(u)?IY:n),i2(u)&&(e=e||RY,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(HX(u)&&a!=="_self")return xY(e||"",a),new PP(null);const d=window.open(e||"",a,c);le(d,t,"popup-blocked");try{d.focus()}catch{}return new PP(d)}function xY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY="__/auth/handler",PY="emulator/auth/handler",kY=encodeURIComponent("fac");async function kP(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tl,eventId:i};if(e instanceof g2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",CH(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof gf){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${kY}=${encodeURIComponent(l)}`:"";return`${DY(t)}?${rf(a).slice(1)}${u}`}function DY({config:t}){return t.emulator?Mb(t,PY):`https://${t.authDomain}/${AY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="webStorageSupport";class OY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T2,this._completeRedirectFn=rY,this._overrideRedirectResult=eY}async _openPopup(e,n,r,i){var o;ns((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await kP(e,n,r,v0(),i);return CY(e,s,Bb())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await kP(e,n,r,v0(),i);return LQ(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ns(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await SY(e),r=new sY(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(j_,{type:j_},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[j_];s!==void 0&&n(!!s),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return h2()||s2()||Lb()}}const MY=OY;var DP="@firebase/auth",OP="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VY(t){Ba(new yo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d2(t)},u=new YX(r,i,s,l);return aQ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ba(new yo("auth-internal",e=>{const n=Mo(e.getProvider("auth").getImmediate());return(r=>new NY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(DP,OP,LY(t)),pi(DP,OP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY=5*60,BY=vN("authIdTokenMaxAge")||FY;let MP=null;const jY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BY)return;const i=n==null?void 0:n.token;MP!==i&&(MP=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UY(t=CN()){const e=My(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oQ(t,{popupRedirectResolver:MY,persistence:[HQ,OQ,T2]}),r=vN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=jY(s.toString());xQ(n,o,()=>o(n.currentUser)),CQ(n,a=>o(a))}}const i=gN("auth");return i&&lQ(n,`http://${i}`),n}function $Y(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}JX({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=vi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$Y().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VY("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="firebasestorage.googleapis.com",k2="storageBucket",zY=2*60*1e3,WY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends Ii{constructor(e,n,r=0){super(U_(e),`Firebase Storage: ${n} (${U_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return U_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function U_(t){return"storage/"+t}function Ub(){const t="An unknown error occurred, please check the error payload for server response.";return new mt(pt.UNKNOWN,t)}function HY(t){return new mt(pt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function KY(t){return new mt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(pt.UNAUTHENTICATED,t)}function GY(){return new mt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XY(t){return new mt(pt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function QY(){return new mt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YY(){return new mt(pt.CANCELED,"User canceled the upload/download.")}function JY(t){return new mt(pt.INVALID_URL,"Invalid URL '"+t+"'.")}function ZY(t){return new mt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function eJ(){return new mt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+k2+"' property when initializing the app?")}function tJ(){return new mt(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nJ(){return new mt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rJ(t){return new mt(pt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function S0(t){return new mt(pt.INVALID_ARGUMENT,t)}function D2(){return new mt(pt.APP_DELETED,"The Firebase app was deleted.")}function iJ(t){return new mt(pt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hh(t,e){return new mt(pt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xc(t){throw new mt(pt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw ZY(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},S=n===P2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",_=new RegExp(`^https?://${S}/${i}/${T}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<v.length;C++){const D=v[C],O=D.regex.exec(e);if(O){const b=O[D.indices.bucket];let E=O[D.indices.path];E||(E=""),r=new Gn(b,E),D.postModify(r);break}}if(r==null)throw JY(e);return r}}class sJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oJ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...T){u||(u=!0,e.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,t(p,l())},T)}function f(){s&&clearTimeout(s)}function p(T,..._){if(u){f();return}if(T){f(),c.call(null,T,..._);return}if(l()||o){f(),c.call(null,T,..._);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,d(v)}let g=!1;function S(T){g||(g=!0,f(),!u&&(i!==null?(T||(a=2),clearTimeout(i),d(0)):T||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function aJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(t){return t!==void 0}function uJ(t){return typeof t=="object"&&!Array.isArray(t)}function $b(t){return typeof t=="string"||t instanceof String}function NP(t){return zb()&&t instanceof Blob}function zb(){return typeof Blob<"u"}function LP(t,e,n,r){if(r<e)throw S0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw S0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function O2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Pa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Pa||(Pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cJ(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(e,n,r,i,s,o,a,l,u,c,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,S)=>{this.resolve_=g,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new xp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Pa.NO_ERROR,l=s.getStatus();if(!a||cJ(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Pa.ABORT;r(!1,new xp(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new xp(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());lJ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Ub();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?D2():YY();o(l)}else{const l=QY();o(l)}};this.canceled_?n(!1,new xp(!1,null,!0)):this.backoffId_=oJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function dJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function gJ(t,e,n,r,i,s,o=!0,a=!1){const l=O2(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return pJ(c,e),dJ(c,n),fJ(c,s),mJ(c,r),new hJ(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vJ(...t){const e=yJ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zb())return new Blob(t);throw new mt(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _J(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wJ(t){if(typeof atob>"u")throw rJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $_{constructor(e,n){this.data=e,this.contentType=n||null}}function SJ(t,e){switch(t){case ci.RAW:return new $_(M2(e));case ci.BASE64:case ci.BASE64URL:return new $_(N2(t,e));case ci.DATA_URL:return new $_(TJ(e),bJ(e))}throw Ub()}function M2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function EJ(t){let e;try{e=decodeURIComponent(t)}catch{throw Hh(ci.DATA_URL,"Malformed data URL.")}return M2(e)}function N2(t,e){switch(t){case ci.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Hh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ci.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Hh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wJ(e)}catch(i){throw i.message.includes("polyfill")?i:Hh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class L2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Hh(ci.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function TJ(t){const e=new L2(t);return e.base64?N2(ci.BASE64,e.rest):EJ(e.rest)}function bJ(t){return new L2(t).contentType}function IJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){let r=0,i="";NP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(NP(this.data_)){const r=this.data_,i=_J(r,e,n);return i===null?null:new Ys(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ys(r,!0)}}static getBlob(...e){if(zb()){const n=e.map(r=>r instanceof Ys?r.data_:r);return new Ys(vJ.apply(null,n))}else{const n=e.map(o=>$b(o)?SJ(ci.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ys(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){let e;try{e=JSON.parse(t)}catch{return null}return uJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function F2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xJ(t,e){return e}class dn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||xJ}}let Ap=null;function AJ(t){return!$b(t)||t.length<2?t:F2(t)}function B2(){if(Ap)return Ap;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(s,o){return AJ(o)}const n=new dn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new dn("size");return i.xform=r,t.push(i),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),Ap=t,Ap}function PJ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Gn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function kJ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return PJ(r,t),r}function j2(t,e,n){const r=V2(e);return r===null?null:kJ(t,r,n)}function DJ(t,e,n,r){const i=V2(e);if(i===null||!$b(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,d=t.fullPath,f="/b/"+o(c)+"/o/"+o(d),p=Wb(f,n,r),g=O2({alt:"media",token:u});return p+g})[0]}function OJ(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class U2{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){if(!t)throw Ub()}function MJ(t,e){function n(r,i){const s=j2(t,i,e);return $2(s!==null),s}return n}function NJ(t,e){function n(r,i){const s=j2(t,i,e);return $2(s!==null),DJ(s,i,t.host,t._protocol)}return n}function z2(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=GY():i=qY():n.getStatus()===402?i=KY(t.bucket):n.getStatus()===403?i=XY(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function LJ(t){const e=z2(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=HY(t.path)),s.serverResponse=i.serverResponse,s}return n}function VJ(t,e,n){const r=e.fullServerUrl(),i=Wb(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new U2(i,s,NJ(t,n),o);return a.errorHandler=LJ(e),a}function FJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BJ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=FJ(null,e)),r}function jJ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let C=0;C<2;C++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=BJ(e,r,i),c=OJ(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Ys.getBlob(d,r,f);if(p===null)throw tJ();const g={name:u.fullPath},S=Wb(s,t.host,t._protocol),T="POST",_=t.maxUploadRetryTime,y=new U2(S,T,MJ(t,n),_);return y.urlParams=g,y.headers=o,y.body=p.uploadData(),y.errorHandler=z2(e),y}class UJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Xc("cannot .send() more than once");if(xo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $J extends UJ{initXhr(){this.xhr_.responseType="text"}}function W2(){return new $J}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xa(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return F2(this._location.path)}get storage(){return this._service}get parent(){const e=RJ(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new Xa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw iJ(e)}}function zJ(t,e,n){t._throwIfRoot("uploadBytes");const r=jJ(t.storage,t._location,B2(),new Ys(e,!0),n);return t.storage.makeRequestWithTokens(r,W2).then(i=>({metadata:i,ref:t}))}function WJ(t){t._throwIfRoot("getDownloadURL");const e=VJ(t.storage,t._location,B2());return t.storage.makeRequestWithTokens(e,W2).then(n=>{if(n===null)throw nJ();return n})}function HJ(t,e){const n=CJ(t._location.path,e),r=new Gn(t._location.bucket,n);return new Xa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(t){return/^[A-Za-z]+:\/\//.test(t)}function qJ(t,e){return new Xa(t,e)}function H2(t,e){if(t instanceof Hb){const n=t;if(n._bucket==null)throw eJ();const r=new Xa(n,n._bucket);return e!=null?H2(r,e):r}else return e!==void 0?HJ(t,e):t}function GJ(t,e){if(e&&KJ(e)){if(t instanceof Hb)return qJ(t,e);throw S0("To use ref(service, url), the first argument must be a Storage instance.")}else return H2(t,e)}function VP(t,e){const n=e==null?void 0:e[k2];return n==null?null:Gn.makeFromBucketSpec(n,t)}function XJ(t,e,n,r={}){t.host=`${e}:${n}`;const i=xo(e);i&&(CT(`https://${t.host}/b`),_N("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:mH(s,t.app.options.projectId))}class Hb{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=P2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zY,this._maxUploadRetryTime=WY,this._requests=new Set,i!=null?this._bucket=Gn.makeFromBucketSpec(i,this._host):this._bucket=VP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=VP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new sJ(D2());{const o=gJ(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const FP="@firebase/storage",BP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="storage";function QJ(t,e,n){return t=at(t),zJ(t,e,n)}function YJ(t){return t=at(t),WJ(t)}function JJ(t,e){return t=at(t),GJ(t,e)}function ZJ(t=CN(),e){t=at(t);const r=My(t,K2).getImmediate({identifier:e}),i=fH("storage");return i&&eZ(r,...i),r}function eZ(t,e,n,r={}){XJ(t,e,n,r)}function tZ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Hb(n,r,i,e,tl)}function nZ(){Ba(new yo(K2,tZ,"PUBLIC").setMultipleInstances(!0)),pi(FP,BP,""),pi(FP,BP,"esm2020")}nZ();const rZ={apiKey:"AIzaSyBbUnVpOyU1eSSFrQi79ztijFjT0bvMosc",authDomain:"pocket-stylist-3c0fe.firebaseapp.com",projectId:"pocket-stylist-3c0fe",storageBucket:"pocket-stylist-3c0fe.firebasestorage.app",messagingSenderId:"274246899324",appId:"1:274246899324:web:845c91cdaab06299df1bf9"},Kb=RN(rZ),ac=UY(Kb),iZ=ZJ(Kb);let z_=null;const ds=()=>(z_||(z_=ZG(Kb,{localCache:wX({tabManager:bX()})})),z_);new Proxy({},{get:function(t,e){return ds()[e]}});const sZ=(t,e)=>RQ(ac,t,e),oZ=(t,e)=>IQ(ac,t,e),aZ=()=>PQ(ac),lZ=t=>bQ(ac,t),q2=I.createContext();function qb(){return I.useContext(q2)}function uZ({children:t}){const[e,n]=I.useState(null),[r,i]=I.useState(!0);I.useEffect(()=>AQ(ac,a=>{n(a),i(!1)}),[]);const s={currentUser:e,loading:r};return M.jsx(q2.Provider,{value:s,children:!r&&t})}const cZ="Left",hZ="Right",dZ="Up",fZ="Down",Zl={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},E0={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},jP="mousemove",UP="mouseup",pZ="touchend",mZ="touchmove",gZ="touchstart";function yZ(t,e,n,r){return t>e?n>0?hZ:cZ:r>0?fZ:dZ}function $P(t,e){if(e===0)return t;const n=Math.PI/180*e,r=t[0]*Math.cos(n)+t[1]*Math.sin(n),i=t[1]*Math.cos(n)-t[0]*Math.sin(n);return[r,i]}function vZ(t,e){const n=c=>{const d="touches"in c;d&&c.touches.length>1||t((f,p)=>{p.trackMouse&&!d&&(document.addEventListener(jP,r),document.addEventListener(UP,o));const{clientX:g,clientY:S}=d?c.touches[0]:c,T=$P([g,S],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},f),E0),{initial:T.slice(),xy:T,start:c.timeStamp||0})})},r=c=>{t((d,f)=>{const p="touches"in c;if(p&&c.touches.length>1)return d;if(c.timeStamp-d.start>f.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:g,clientY:S}=p?c.touches[0]:c,[T,_]=$P([g,S],f.rotationAngle),y=T-d.xy[0],v=_-d.xy[1],C=Math.abs(y),D=Math.abs(v),O=(c.timeStamp||0)-d.start,b=Math.sqrt(C*C+D*D)/(O||1),E=[y/(O||1),v/(O||1)],R=yZ(C,D,y,v),x=typeof f.delta=="number"?f.delta:f.delta[R.toLowerCase()]||Zl.delta;if(C<x&&D<x&&!d.swiping)return d;const P={absX:C,absY:D,deltaX:y,deltaY:v,dir:R,event:c,first:d.first,initial:d.initial,velocity:b,vxvy:E};P.first&&f.onSwipeStart&&f.onSwipeStart(P),f.onSwiping&&f.onSwiping(P);let N=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${R}`])&&(N=!0),N&&f.preventScrollOnSwipe&&f.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:P,swiping:!0})})},i=c=>{t((d,f)=>{let p;if(d.swiping&&d.eventData){if(c.timeStamp-d.start<f.swipeDuration){p=Object.assign(Object.assign({},d.eventData),{event:c}),f.onSwiped&&f.onSwiped(p);const g=f[`onSwiped${p.dir}`];g&&g(p)}}else f.onTap&&f.onTap({event:c});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},d),E0),{eventData:p})})},s=()=>{document.removeEventListener(jP,r),document.removeEventListener(UP,o)},o=c=>{s(),i(c)},a=(c,d)=>{let f=()=>{};if(c&&c.addEventListener){const p=Object.assign(Object.assign({},Zl.touchEventOptions),d.touchEventOptions),g=[[gZ,n,p],[mZ,r,Object.assign(Object.assign({},p),d.preventScrollOnSwipe?{passive:!1}:{})],[pZ,i,p]];g.forEach(([S,T,_])=>c.addEventListener(S,T,_)),f=()=>g.forEach(([S,T])=>c.removeEventListener(S,T))}return f},u={ref:c=>{c!==null&&t((d,f)=>{if(d.el===c)return d;const p={};return d.el&&d.el!==c&&d.cleanUpTouch&&(d.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&c&&(p.cleanUpTouch=a(c,f)),Object.assign(Object.assign(Object.assign({},d),{el:c}),p)})}};return e.trackMouse&&(u.onMouseDown=n),[u,a]}function _Z(t,e,n,r){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==n.preventScrollOnSwipe||e.touchEventOptions.passive!==n.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})}function wZ(t){const{trackMouse:e}=t,n=I.useRef(Object.assign({},E0)),r=I.useRef(Object.assign({},Zl)),i=I.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},Zl),t);let s;for(s in Zl)r.current[s]===void 0&&(r.current[s]=Zl[s]);const[o,a]=I.useMemo(()=>vZ(l=>n.current=l(n.current,r.current),{trackMouse:e}),[e]);return n.current=_Z(n.current,r.current,i.current,a),o}var G2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zP=yt.createContext&&yt.createContext(G2),SZ=["attr","size","title"];function EZ(t,e){if(t==null)return{};var n=TZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hg(){return Hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hg.apply(this,arguments)}function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(n),!0).forEach(function(r){bZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bZ(t,e,n){return e=IZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IZ(t){var e=RZ(t,"string");return typeof e=="symbol"?e:e+""}function RZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X2(t){return t&&t.map((e,n)=>yt.createElement(e.tag,Kg({key:n},e.attr),X2(e.child)))}function CZ(t){return e=>yt.createElement(xZ,Hg({attr:Kg({},t.attr)},e),X2(t.child))}function xZ(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=EZ(t,SZ),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),yt.createElement("svg",Hg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Kg(Kg({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&yt.createElement("title",null,s),t.children)};return zP!==void 0?yt.createElement(zP.Consumer,null,n=>e(n)):e(G2)}function AZ(t){return CZ({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}const Gb=I.createContext({});function Xb(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const Qb=typeof window<"u",Q2=Qb?I.useLayoutEffect:I.useEffect,ov=I.createContext(null);function Yb(t,e){t.indexOf(e)===-1&&t.push(e)}function Jb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const rs=(t,e,n)=>n>e?e:n<t?t:n;let Zb=()=>{};const is={},Y2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function J2(t){return typeof t=="object"&&t!==null}const Z2=t=>/^0[^.\s]+$/u.test(t);function eI(t){let e;return()=>(e===void 0&&(e=t()),e)}const gr=t=>t,PZ=(t,e)=>n=>e(t(n)),vf=(...t)=>t.reduce(PZ),jd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class tI{constructor(){this.subscriptions=[]}add(e){return Yb(this.subscriptions,e),()=>Jb(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wi=t=>t*1e3,hr=t=>t/1e3;function eF(t,e){return e?t*(1e3/e):0}const tF=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kZ=1e-7,DZ=12;function OZ(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=tF(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>kZ&&++a<DZ);return o}function _f(t,e,n,r){if(t===e&&n===r)return gr;const i=s=>OZ(s,0,1,t,n);return s=>s===0||s===1?s:tF(i(s),e,r)}const nF=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,rF=t=>e=>1-t(1-e),iF=_f(.33,1.53,.69,.99),nI=rF(iF),sF=nF(nI),oF=t=>(t*=2)<1?.5*nI(t):.5*(2-Math.pow(2,-10*(t-1))),rI=t=>1-Math.sin(Math.acos(t)),aF=rF(rI),lF=nF(rI),MZ=_f(.42,0,1,1),NZ=_f(0,0,.58,1),uF=_f(.42,0,.58,1),LZ=t=>Array.isArray(t)&&typeof t[0]!="number",cF=t=>Array.isArray(t)&&typeof t[0]=="number",VZ={linear:gr,easeIn:MZ,easeInOut:uF,easeOut:NZ,circIn:rI,circInOut:lF,circOut:aF,backIn:nI,backInOut:sF,backOut:iF,anticipate:oF},FZ=t=>typeof t=="string",HP=t=>{if(cF(t)){Zb(t.length===4);const[e,n,r,i]=t;return _f(e,n,r,i)}else if(FZ(t))return VZ[t];return t},Pp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function BZ(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),t()),c(a)}const u={schedule:(c,d=!1,f=!1)=>{const g=f&&i?n:r;return d&&o.add(c),g.has(c)||g.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const jZ=40;function hF(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Pp.reduce((v,C)=>(v[C]=BZ(s),v),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:f,render:p,postRender:g}=o,S=()=>{const v=is.useManualTiming?i.timestamp:performance.now();n=!1,is.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,jZ),1)),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},T=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:Pp.reduce((v,C)=>{const D=o[C];return v[C]=(O,b=!1,E=!1)=>(n||T(),D.schedule(O,b,E)),v},{}),cancel:v=>{for(let C=0;C<Pp.length;C++)o[Pp[C]].cancel(v)},state:i,steps:o}}const{schedule:Ze,cancel:To,state:Ht,steps:W_}=hF(typeof requestAnimationFrame<"u"?requestAnimationFrame:gr,!0);let Tm;function UZ(){Tm=void 0}const An={now:()=>(Tm===void 0&&An.set(Ht.isProcessing||is.useManualTiming?Ht.timestamp:performance.now()),Tm),set:t=>{Tm=t,queueMicrotask(UZ)}},dF=t=>e=>typeof e=="string"&&e.startsWith(t),fF=dF("--"),$Z=dF("var(--"),iI=t=>$Z(t)?zZ.test(t.split("/*")[0].trim()):!1,zZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ud={...lc,transform:t=>rs(0,1,t)},kp={...lc,default:1},Kh=t=>Math.round(t*1e5)/1e5,sI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WZ(t){return t==null}const HZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,oI=(t,e)=>n=>!!(typeof n=="string"&&HZ.test(n)&&n.startsWith(t)||e&&!WZ(n)&&Object.prototype.hasOwnProperty.call(n,e)),pF=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(sI);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},KZ=t=>rs(0,255,t),H_={...lc,transform:t=>Math.round(KZ(t))},_a={test:oI("rgb","red"),parse:pF("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+H_.transform(t)+", "+H_.transform(e)+", "+H_.transform(n)+", "+Kh(Ud.transform(r))+")"};function qZ(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const T0={test:oI("#"),parse:qZ,transform:_a.transform},wf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),js=wf("deg"),Si=wf("%"),ue=wf("px"),GZ=wf("vh"),XZ=wf("vw"),KP={...Si,parse:t=>Si.parse(t)/100,transform:t=>Si.transform(t*100)},eu={test:oI("hsl","hue"),parse:pF("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Si.transform(Kh(e))+", "+Si.transform(Kh(n))+", "+Kh(Ud.transform(r))+")"},Et={test:t=>_a.test(t)||T0.test(t)||eu.test(t),parse:t=>_a.test(t)?_a.parse(t):eu.test(t)?eu.parse(t):T0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_a.transform(t):eu.transform(t),getAnimatableNone:t=>{const e=Et.parse(t);return e.alpha=0,Et.transform(e)}},QZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YZ(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(sI))==null?void 0:e.length)||0)+(((n=t.match(QZ))==null?void 0:n.length)||0)>0}const mF="number",gF="color",JZ="var",ZZ="var(",qP="${}",eee=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $d(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(eee,l=>(Et.test(l)?(r.color.push(s),i.push(gF),n.push(Et.parse(l))):l.startsWith(ZZ)?(r.var.push(s),i.push(JZ),n.push(l)):(r.number.push(s),i.push(mF),n.push(parseFloat(l))),++s,qP)).split(qP);return{values:n,split:a,indexes:r,types:i}}function yF(t){return $d(t).values}function vF(t){const{split:e,types:n}=$d(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===mF?s+=Kh(i[o]):a===gF?s+=Et.transform(i[o]):s+=i[o]}return s}}const tee=t=>typeof t=="number"?0:Et.test(t)?Et.getAnimatableNone(t):t;function nee(t){const e=yF(t);return vF(t)(e.map(tee))}const bo={test:YZ,parse:yF,createTransformer:vF,getAnimatableNone:nee};function K_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function ree({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=K_(l,a,t+1/3),s=K_(l,a,t),o=K_(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function qg(t,e){return n=>n>0?e:t}const rt=(t,e,n)=>t+(e-t)*n,q_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},iee=[T0,_a,eu],see=t=>iee.find(e=>e.test(t));function GP(t){const e=see(t);if(!e)return!1;let n=e.parse(t);return e===eu&&(n=ree(n)),n}const XP=(t,e)=>{const n=GP(t),r=GP(e);if(!n||!r)return qg(t,e);const i={...n};return s=>(i.red=q_(n.red,r.red,s),i.green=q_(n.green,r.green,s),i.blue=q_(n.blue,r.blue,s),i.alpha=rt(n.alpha,r.alpha,s),_a.transform(i))},b0=new Set(["none","hidden"]);function oee(t,e){return b0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function aee(t,e){return n=>rt(t,e,n)}function aI(t){return typeof t=="number"?aee:typeof t=="string"?iI(t)?qg:Et.test(t)?XP:cee:Array.isArray(t)?_F:typeof t=="object"?Et.test(t)?XP:lee:qg}function _F(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>aI(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function lee(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=aI(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function uee(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const cee=(t,e)=>{const n=bo.createTransformer(e),r=$d(t),i=$d(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?b0.has(t)&&!i.values.length||b0.has(e)&&!r.values.length?oee(t,e):vf(_F(uee(r,i),i.values),n):qg(t,e)};function wF(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rt(t,e,n):aI(t)(t,e)}const hee=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ze.update(e,n),stop:()=>To(e),now:()=>Ht.isProcessing?Ht.timestamp:An.now()}},SF=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gg=2e4;function lI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Gg;)e+=n,r=t.next(e);return e>=Gg?1/0:e}function dee(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(lI(r),Gg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:hr(i)}}const fee=5;function EF(t,e,n){const r=Math.max(e-fee,0);return eF(n-t(r),e-r)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},G_=.001;function pee({duration:t=ct.duration,bounce:e=ct.bounce,velocity:n=ct.velocity,mass:r=ct.mass}){let i,s,o=1-e;o=rs(ct.minDamping,ct.maxDamping,o),t=rs(ct.minDuration,ct.maxDuration,hr(t)),o<1?(i=u=>{const c=u*o,d=c*t,f=c-n,p=I0(u,o),g=Math.exp(-d);return G_-f/p*g},s=u=>{const d=u*o*t,f=d*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-d),S=I0(Math.pow(u,2),o);return(-i(u)+G_>0?-1:1)*((f-p)*g)/S}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-G_+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=gee(i,s,a);if(t=wi(t),isNaN(l))return{stiffness:ct.stiffness,damping:ct.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const mee=12;function gee(t,e,n){let r=n;for(let i=1;i<mee;i++)r=r-t(r)/e(r);return r}function I0(t,e){return t*Math.sqrt(1-e*e)}const yee=["duration","bounce"],vee=["stiffness","damping","mass"];function QP(t,e){return e.some(n=>t[n]!==void 0)}function _ee(t){let e={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...t};if(!QP(t,vee)&&QP(t,yee))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*rs(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ct.mass,stiffness:i,damping:s}}else{const n=pee(t);e={...e,...n,mass:ct.mass},e.isResolvedFromDuration=!0}return e}function Xg(t=ct.visualDuration,e=ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=_ee({...n,velocity:-hr(n.velocity||0)}),g=f||0,S=u/(2*Math.sqrt(l*c)),T=o-s,_=hr(Math.sqrt(l/c)),y=Math.abs(T)<5;r||(r=y?ct.restSpeed.granular:ct.restSpeed.default),i||(i=y?ct.restDelta.granular:ct.restDelta.default);let v;if(S<1){const D=I0(_,S);v=O=>{const b=Math.exp(-S*_*O);return o-b*((g+S*_*T)/D*Math.sin(D*O)+T*Math.cos(D*O))}}else if(S===1)v=D=>o-Math.exp(-_*D)*(T+(g+_*T)*D);else{const D=_*Math.sqrt(S*S-1);v=O=>{const b=Math.exp(-S*_*O),E=Math.min(D*O,300);return o-b*((g+S*_*T)*Math.sinh(E)+D*T*Math.cosh(E))/D}}const C={calculatedDuration:p&&d||null,next:D=>{const O=v(D);if(p)a.done=D>=d;else{let b=D===0?g:0;S<1&&(b=D===0?wi(g):EF(v,D,O));const E=Math.abs(b)<=r,R=Math.abs(o-O)<=i;a.done=E&&R}return a.value=a.done?o:O,a},toString:()=>{const D=Math.min(lI(C),Gg),O=SF(b=>C.next(D*b).value,D,30);return D+"ms "+O},toTransition:()=>{}};return C}Xg.applyToOptions=t=>{const e=dee(t,100,Xg);return t.ease=e.ease,t.duration=wi(e.duration),t.type="keyframes",t};function R0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,g=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let S=n*e;const T=d+S,_=o===void 0?T:o(T);_!==T&&(S=_-d);const y=E=>-S*Math.exp(-E/r),v=E=>_+y(E),C=E=>{const R=y(E),x=v(E);f.done=Math.abs(R)<=u,f.value=f.done?_:x};let D,O;const b=E=>{p(f.value)&&(D=E,O=Xg({keyframes:[f.value,g(f.value)],velocity:EF(v,E,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return b(0),{calculatedDuration:null,next:E=>{let R=!1;return!O&&D===void 0&&(R=!0,C(E),b(E)),D!==void 0&&E>=D?O.next(E-D):(!R&&C(E),f)}}}function wee(t,e,n){const r=[],i=n||is.mix||wF,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||gr:e;a=vf(l,a)}r.push(a)}return r}function See(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Zb(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=wee(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const f=jd(t[d],t[d+1],c);return a[d](f)};return n?c=>u(rs(t[0],t[s-1],c)):u}function Eee(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=jd(0,e,r);t.push(rt(n,1,i))}}function Tee(t){const e=[0];return Eee(e,t.length-1),e}function bee(t,e){return t.map(n=>n*e)}function Iee(t,e){return t.map(()=>e||uF).splice(0,t.length-1)}function qh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=LZ(r)?r.map(HP):HP(r),s={done:!1,value:e[0]},o=bee(n&&n.length===e.length?n:Tee(e),t),a=See(o,e,{ease:Array.isArray(i)?i:Iee(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Ree=t=>t!==null;function uI(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Ree),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Cee={decay:R0,inertia:R0,tween:qh,keyframes:qh,spring:Xg};function TF(t){typeof t.type=="string"&&(t.type=Cee[t.type])}class cI{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xee=t=>t/100;class hI extends cI{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==An.now()&&this.tick(An.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;TF(e);const{type:n=qh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||qh;l!==qh&&typeof a[0]!="number"&&(this.mixKeyframes=vf(xee,wF(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=lI(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:f,repeatDelay:p,type:g,onUpdate:S,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,C=r;if(d){const E=Math.min(this.currentTime,i)/a;let R=Math.floor(E),x=E%1;!x&&E>=1&&(x=1),x===1&&R--,R=Math.min(R,d+1),!!(R%2)&&(f==="reverse"?(x=1-x,p&&(x-=p/a)):f==="mirror"&&(C=o)),v=rs(0,1,x)*a}const D=y?{done:!1,value:c[0]}:C.next(v);s&&(D.value=s(D.value));let{done:O}=D;!y&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return b&&g!==R0&&(D.value=uI(c,this.options,T,this.speed)),S&&S(D.value),b&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return hr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+hr(e)}get time(){return hr(this.currentTime)}set time(e){var n;e=wi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(An.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=hr(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=hee,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(An.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Aee(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wa=t=>t*180/Math.PI,C0=t=>{const e=wa(Math.atan2(t[1],t[0]));return x0(e)},Pee={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:C0,rotateZ:C0,skewX:t=>wa(Math.atan(t[1])),skewY:t=>wa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},x0=t=>(t=t%360,t<0&&(t+=360),t),YP=C0,JP=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ZP=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:JP,scaleY:ZP,scale:t=>(JP(t)+ZP(t))/2,rotateX:t=>x0(wa(Math.atan2(t[6],t[5]))),rotateY:t=>x0(wa(Math.atan2(-t[2],t[0]))),rotateZ:YP,rotate:YP,skewX:t=>wa(Math.atan(t[4])),skewY:t=>wa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function A0(t){return t.includes("scale")?1:0}function P0(t,e){if(!t||t==="none")return A0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=kee,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Pee,i=a}if(!i)return A0(e);const s=r[e],o=i[1].split(",").map(Oee);return typeof s=="function"?s(o):o[s]}const Dee=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return P0(n,e)};function Oee(t){return parseFloat(t.trim())}const uc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cc=new Set(uc),e1=t=>t===lc||t===ue,Mee=new Set(["x","y","z"]),Nee=uc.filter(t=>!Mee.has(t));function Lee(t){const e=[];return Nee.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ka={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>P0(e,"x"),y:(t,{transform:e})=>P0(e,"y")};ka.translateX=ka.x;ka.translateY=ka.y;const Da=new Set;let k0=!1,D0=!1,O0=!1;function bF(){if(D0){const t=Array.from(Da).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Lee(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}D0=!1,k0=!1,Da.forEach(t=>t.complete(O0)),Da.clear()}function IF(){Da.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(D0=!0)})}function Vee(){O0=!0,IF(),bF(),O0=!1}class dI{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Da.add(this),k0||(k0=!0,Ze.read(IF),Ze.resolveKeyframes(bF))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Aee(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Da.delete(this)}cancel(){this.state==="scheduled"&&(Da.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Fee=t=>t.startsWith("--");function Bee(t,e,n){Fee(e)?t.style.setProperty(e,n):t.style[e]=n}const jee=eI(()=>window.ScrollTimeline!==void 0),Uee={};function $ee(t,e){const n=eI(t);return()=>Uee[e]??n()}const RF=$ee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,t1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hh([0,.65,.55,1]),circOut:hh([.55,0,1,.45]),backIn:hh([.31,.01,.66,-.59]),backOut:hh([.33,1.53,.69,.99])};function CF(t,e){if(t)return typeof t=="function"?RF()?SF(t,e):"ease-out":cF(t)?hh(t):Array.isArray(t)?t.map(n=>CF(n,e)||t1.easeOut):t1[t]}function zee(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:n};l&&(c.offset=l);const d=CF(a,i);Array.isArray(d)&&(c.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(c,f)}function xF(t){return typeof t=="function"&&"applyToOptions"in t}function Wee({type:t,...e}){return xF(t)&&RF()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Hee extends cI{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Zb(typeof e.type!="string");const u=Wee(e);this.animation=zee(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=uI(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):Bee(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return hr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+hr(e)}get time(){return hr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=wi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&jee()?(this.animation.timeline=e,gr):n(this)}}const AF={anticipate:oF,backInOut:sF,circInOut:lF};function Kee(t){return t in AF}function qee(t){typeof t.ease=="string"&&Kee(t.ease)&&(t.ease=AF[t.ease])}const n1=10;class Gee extends Hee{constructor(e){qee(e),TF(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new hI({...o,autoplay:!1}),l=wi(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-n1).value,a.sample(l).value,n1),a.stop()}}const r1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(bo.test(t)||t==="0")&&!t.startsWith("url("));function Xee(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Qee(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=r1(i,e),a=r1(s,e);return!o||!a?!1:Xee(t)||(n==="spring"||xF(n))&&r}function M0(t){t.duration=0,t.type="keyframes"}const Yee=new Set(["opacity","clipPath","filter","transform"]),Jee=eI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Zee(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return Jee()&&n&&Yee.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const ete=40;class tte extends cI{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var g;super(),this.stop=()=>{var S,T;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=An.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},p=(c==null?void 0:c.KeyframeResolver)||dI;this.keyframeResolver=new p(a,(S,T,_)=>this.onKeyframesResolved(S,T,f,!_),l,u,c),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=An.now(),Qee(e,s,o,a)||((is.instantAnimations||!l)&&(c==null||c(uI(e,r,n))),e[0]=e[e.length-1],M0(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ete?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&Zee(f)?new Gee({...f,element:f.motionValue.owner.current}):new hI(f);p.finished.then(()=>this.notifyFinished()).catch(gr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Vee()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const nte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rte(t){const e=nte.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function PF(t,e,n=1){const[r,i]=rte(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Y2(o)?parseFloat(o):o}return iI(i)?PF(i,e,n+1):i}function fI(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const kF=new Set(["width","height","top","left","right","bottom",...uc]),ite={test:t=>t==="auto",parse:t=>t},DF=t=>e=>e.test(t),OF=[lc,ue,Si,js,XZ,GZ,ite],i1=t=>OF.find(DF(t));function ste(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Z2(t):!0}const ote=new Set(["brightness","contrast","saturate","opacity"]);function ate(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(sI)||[];if(!r)return t;const i=n.replace(r,"");let s=ote.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const lte=/\b([a-z-]*)\(.*?\)/gu,N0={...bo,getAnimatableNone:t=>{const e=t.match(lte);return e?e.map(ate).join(" "):t}},s1={...lc,transform:Math.round},ute={rotate:js,rotateX:js,rotateY:js,rotateZ:js,scale:kp,scaleX:kp,scaleY:kp,scaleZ:kp,skew:js,skewX:js,skewY:js,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:Ud,originX:KP,originY:KP,originZ:ue},pI={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue,...ute,zIndex:s1,fillOpacity:Ud,strokeOpacity:Ud,numOctaves:s1},cte={...pI,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:N0,WebkitFilter:N0},MF=t=>cte[t];function NF(t,e){let n=MF(t);return n!==N0&&(n=bo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hte=new Set(["auto","none","0"]);function dte(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!hte.has(s)&&$d(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=NF(n,i)}class fte extends dI{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),iI(u))){const c=PF(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!kF.has(r)||e.length!==2)return;const[i,s]=e,o=i1(i),a=i1(s);if(o!==a)if(e1(o)&&e1(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else ka[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||ste(e[i]))&&r.push(i);r.length&&dte(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ka[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=ka[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function pte(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const LF=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function VF(t){return J2(t)&&"offsetHeight"in t}const o1=30,mte=t=>!isNaN(parseFloat(t));class gte{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=An.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=An.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mte(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new tI);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=An.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>o1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,o1);return eF(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wu(t,e){return new gte(t,e)}const{schedule:mI}=hF(queueMicrotask,!1),Pr={x:!1,y:!1};function FF(){return Pr.x||Pr.y}function yte(t){return t==="x"||t==="y"?Pr[t]?null:(Pr[t]=!0,()=>{Pr[t]=!1}):Pr.x||Pr.y?null:(Pr.x=Pr.y=!0,()=>{Pr.x=Pr.y=!1})}function BF(t,e){const n=pte(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function a1(t){return!(t.pointerType==="touch"||FF())}function vte(t,e,n={}){const[r,i,s]=BF(t,n),o=a=>{if(!a1(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{a1(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const jF=(t,e)=>e?t===e?!0:jF(t,e.parentElement):!1,gI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_te=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wte(t){return _te.has(t.tagName)||t.tabIndex!==-1}const bm=new WeakSet;function l1(t){return e=>{e.key==="Enter"&&t(e)}}function X_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ste=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=l1(()=>{if(bm.has(n))return;X_(n,"down");const i=l1(()=>{X_(n,"up")}),s=()=>X_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function u1(t){return gI(t)&&!FF()}function Ete(t,e,n={}){const[r,i,s]=BF(t,n),o=a=>{const l=a.currentTarget;if(!u1(a))return;bm.add(l);const u=e(l,a),c=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),bm.has(l)&&bm.delete(l),u1(p)&&typeof u=="function"&&u(p,{success:g})},d=p=>{c(p,l===window||l===document||n.useGlobalTarget||jF(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),VF(a)&&(a.addEventListener("focus",u=>Ste(u,i)),!wte(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function UF(t){return J2(t)&&"ownerSVGElement"in t}function Tte(t){return UF(t)&&t.tagName==="svg"}const an=t=>!!(t&&t.getVelocity),bte=[...OF,Et,bo],Ite=t=>bte.find(DF(t)),yI=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function c1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Rte(...t){return e=>{let n=!1;const r=t.map(i=>{const s=c1(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():c1(t[i],null)}}}}function Cte(...t){return I.useCallback(Rte(...t),t)}class xte extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=VF(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ate({children:t,isPresent:e,anchorX:n,root:r}){const i=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=I.useContext(yI),l=Cte(s,t==null?void 0:t.ref);return I.useInsertionEffect(()=>{const{width:u,height:c,top:d,left:f,right:p}=o.current;if(e||!s.current||!u||!c)return;const g=n==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");a&&(S.nonce=a);const T=r??document.head;return T.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{T.contains(S)&&T.removeChild(S)}},[e]),M.jsx(xte,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(t,{ref:l})})}const Pte=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=Xb(kte),c=I.useId();let d=!0,f=I.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:i,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return s&&d&&(f={...f}),I.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),I.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=M.jsx(Ate,{isPresent:n,anchorX:a,root:l,children:t})),M.jsx(ov.Provider,{value:f,children:t})};function kte(){return new Map}function $F(t=!0){const e=I.useContext(ov);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=I.useId();I.useEffect(()=>{if(t)return i(s)},[t]);const o=I.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Dp=t=>t.key||"";function h1(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const Dte=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=$F(o),d=I.useMemo(()=>h1(t),[t]),f=o&&!u?[]:d.map(Dp),p=I.useRef(!0),g=I.useRef(d),S=Xb(()=>new Map),[T,_]=I.useState(d),[y,v]=I.useState(d);Q2(()=>{p.current=!1,g.current=d;for(let O=0;O<y.length;O++){const b=Dp(y[O]);f.includes(b)?S.delete(b):S.get(b)!==!0&&S.set(b,!1)}},[y,f.length,f.join("-")]);const C=[];if(d!==T){let O=[...d];for(let b=0;b<y.length;b++){const E=y[b],R=Dp(E);f.includes(R)||(O.splice(b,0,E),C.push(E))}return s==="wait"&&C.length&&(O=C),v(h1(O)),_(d),null}const{forceRender:D}=I.useContext(Gb);return M.jsx(M.Fragment,{children:y.map(O=>{const b=Dp(O),E=o&&!u?!1:d===y||f.includes(b),R=()=>{if(S.has(b))S.set(b,!0);else return;let x=!0;S.forEach(P=>{P||(x=!1)}),x&&(D==null||D(),v(g.current),o&&(c==null||c()),r&&r())};return M.jsx(Pte,{isPresent:E,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:E?void 0:R,anchorX:a,children:O},b)})})},zF=I.createContext({strict:!1}),d1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hu={};for(const t in d1)Hu[t]={isEnabled:e=>d1[t].some(n=>!!e[n])};function Ote(t){for(const e in t)Hu[e]={...Hu[e],...t[e]}}const Mte=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Mte.has(t)}let WF=t=>!Qg(t);function Nte(t){typeof t=="function"&&(WF=e=>e.startsWith("on")?!Qg(e):t(e))}try{Nte(require("@emotion/is-prop-valid").default)}catch{}function Lte(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(WF(i)||n===!0&&Qg(i)||!e&&!Qg(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const av=I.createContext({});function lv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function zd(t){return typeof t=="string"||Array.isArray(t)}const vI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_I=["initial",...vI];function uv(t){return lv(t.animate)||_I.some(e=>zd(t[e]))}function HF(t){return!!(uv(t)||t.variants)}function Vte(t,e){if(uv(t)){const{initial:n,animate:r}=t;return{initial:n===!1||zd(n)?n:void 0,animate:zd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Fte(t){const{initial:e,animate:n}=Vte(t,I.useContext(av));return I.useMemo(()=>({initial:e,animate:n}),[f1(e),f1(n)])}function f1(t){return Array.isArray(t)?t.join(" "):t}function p1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Qc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=p1(t,e.target.x),r=p1(t,e.target.y);return`${n}% ${r}%`}},Bte={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=bo.parse(t);if(i.length>5)return r;const s=bo.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=rt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},L0={borderRadius:{...Qc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qc,borderTopRightRadius:Qc,borderBottomLeftRadius:Qc,borderBottomRightRadius:Qc,boxShadow:Bte};function KF(t,{layout:e,layoutId:n}){return cc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!L0[t]||t==="opacity")}const jte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ute=uc.length;function $te(t,e,n){let r="",i=!0;for(let s=0;s<Ute;s++){const o=uc[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=LF(a,pI[o]);if(!l){i=!1;const c=jte[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function wI(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(cc.has(l)){o=!0;continue}else if(fF(l)){i[l]=u;continue}else{const c=LF(u,pI[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=$te(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const SI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qF(t,e,n){for(const r in e)!an(e[r])&&!KF(r,n)&&(t[r]=e[r])}function zte({transformTemplate:t},e){return I.useMemo(()=>{const n=SI();return wI(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Wte(t,e){const n=t.style||{},r={};return qF(r,n,t),Object.assign(r,zte(t,e)),r}function Hte(t,e){const n={},r=Wte(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Kte={offset:"stroke-dashoffset",array:"stroke-dasharray"},qte={offset:"strokeDashoffset",array:"strokeDasharray"};function Gte(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Kte:qte;t[s.offset]=ue.transform(-r);const o=ue.transform(e),a=ue.transform(n);t[s.array]=`${o} ${a}`}function GF(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(wI(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f}=t;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&Gte(d,i,s,o,!1)}const XF=()=>({...SI(),attrs:{}}),QF=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Xte(t,e,n,r){const i=I.useMemo(()=>{const s=XF();return GF(s,e,QF(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};qF(s,t.style,t),i.style={...s,...i.style}}return i}const Qte=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function EI(t){return typeof t!="string"||t.includes("-")?!1:!!(Qte.indexOf(t)>-1||/[A-Z]/u.test(t))}function Yte(t,e,n,{latestValues:r},i,s=!1){const a=(EI(t)?Xte:Hte)(e,r,i,t),l=Lte(e,typeof t=="string",s),u=t!==I.Fragment?{...l,...a,ref:n}:{},{children:c}=e,d=I.useMemo(()=>an(c)?c.get():c,[c]);return I.createElement(t,{...u,children:d})}function m1(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function TI(t,e,n,r){if(typeof e=="function"){const[i,s]=m1(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=m1(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Im(t){return an(t)?t.get():t}function Jte({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Zte(n,r,i,t),renderState:e()}}function Zte(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Im(s[f]);let{initial:o,animate:a}=t;const l=uv(t),u=HF(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!lv(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=TI(t,f[p]);if(g){const{transitionEnd:S,transition:T,..._}=g;for(const y in _){let v=_[y];if(Array.isArray(v)){const C=c?v.length-1:0;v=v[C]}v!==null&&(i[y]=v)}for(const y in S)i[y]=S[y]}}}return i}const YF=t=>(e,n)=>{const r=I.useContext(av),i=I.useContext(ov),s=()=>Jte(t,e,r,i);return n?s():Xb(s)};function bI(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(an(r[o])||e.style&&an(e.style[o])||KF(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const ene=YF({scrapeMotionValuesFromProps:bI,createRenderState:SI});function JF(t,e,n){const r=bI(t,e,n);for(const i in t)if(an(t[i])||an(e[i])){const s=uc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const tne=YF({scrapeMotionValuesFromProps:JF,createRenderState:XF}),nne=Symbol.for("motionComponentSymbol");function tu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rne(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):tu(n)&&(n.current=r))},[e])}const II=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ine="framerAppearId",ZF="data-"+II(ine),eB=I.createContext({});function sne(t,e,n,r,i){var S,T;const{visualElement:s}=I.useContext(av),o=I.useContext(zF),a=I.useContext(ov),l=I.useContext(yI).reducedMotion,u=I.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=I.useContext(eB);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&one(u.current,n,i,d);const f=I.useRef(!1);I.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const p=n[ZF],g=I.useRef(!!p&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,p))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,p)));return Q2(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),g.current&&c.animationState&&c.animationState.animateChanges())}),I.useEffect(()=>{c&&(!g.current&&c.animationState&&c.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,p)}),g.current=!1),c.enteringChildren=void 0)}),c}function one(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:tB(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&tu(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function tB(t){if(t)return t.options.allowProjection!==!1?t.projection:tB(t.parent)}function Q_(t,{forwardMotionProps:e=!1}={},n,r){n&&Ote(n);const i=EI(t)?tne:ene;function s(a,l){let u;const c={...I.useContext(yI),...a,layoutId:ane(a)},{isStatic:d}=c,f=Fte(a),p=i(a,d);if(!d&&Qb){lne();const g=une(c);u=g.MeasureLayout,f.visualElement=sne(t,p,c,r,g.ProjectionNode)}return M.jsxs(av.Provider,{value:f,children:[u&&f.visualElement?M.jsx(u,{visualElement:f.visualElement,...c}):null,Yte(t,a,rne(p,f.visualElement,l),p,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=I.forwardRef(s);return o[nne]=t,o}function ane({layoutId:t}){const e=I.useContext(Gb).id;return e&&t!==void 0?e+"-"+t:t}function lne(t,e){I.useContext(zF).strict}function une(t){const{drag:e,layout:n}=Hu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function cne(t,e){if(typeof Proxy>"u")return Q_;const n=new Map,r=(s,o)=>Q_(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Q_(o,void 0,t,e)),n.get(o))})}function nB({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function hne({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function dne(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Y_(t){return t===void 0||t===1}function V0({scale:t,scaleX:e,scaleY:n}){return!Y_(t)||!Y_(e)||!Y_(n)}function sa(t){return V0(t)||rB(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rB(t){return g1(t.x)||g1(t.y)}function g1(t){return t&&t!=="0%"}function Yg(t,e,n){const r=t-n,i=e*r;return n+i}function y1(t,e,n,r,i){return i!==void 0&&(t=Yg(t,i,r)),Yg(t,n,r)+e}function F0(t,e=0,n=1,r,i){t.min=y1(t.min,e,n,r,i),t.max=y1(t.max,e,n,r,i)}function iB(t,{x:e,y:n}){F0(t.x,e.translate,e.scale,e.originPoint),F0(t.y,n.translate,n.scale,n.originPoint)}const v1=.999999999999,_1=1.0000000000001;function fne(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ru(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,iB(t,o)),r&&sa(s.latestValues)&&ru(t,s.latestValues))}e.x<_1&&e.x>v1&&(e.x=1),e.y<_1&&e.y>v1&&(e.y=1)}function nu(t,e){t.min=t.min+e,t.max=t.max+e}function w1(t,e,n,r,i=.5){const s=rt(t.min,t.max,i);F0(t,e,n,s,r)}function ru(t,e){w1(t.x,e.x,e.scaleX,e.scale,e.originX),w1(t.y,e.y,e.scaleY,e.scale,e.originY)}function sB(t,e){return nB(dne(t.getBoundingClientRect(),e))}function pne(t,e,n){const r=sB(t,n),{scroll:i}=e;return i&&(nu(r.x,i.offset.x),nu(r.y,i.offset.y)),r}const S1=()=>({translate:0,scale:1,origin:0,originPoint:0}),iu=()=>({x:S1(),y:S1()}),E1=()=>({min:0,max:0}),At=()=>({x:E1(),y:E1()}),B0={current:null},oB={current:!1};function mne(){if(oB.current=!0,!!Qb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>B0.current=t.matches;t.addEventListener("change",e),e()}else B0.current=!1}const gne=new WeakMap;function yne(t,e,n){for(const r in e){const i=e[r],s=n[r];if(an(i))t.addValue(r,i);else if(an(s))t.addValue(r,Wu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Wu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const T1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vne{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=An.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=uv(n),this.isVariantNode=HF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&an(p)&&p.set(l[f])}}mount(e){var n;this.current=e,gne.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),oB.current||mne(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:B0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),To(this.notifyUpdate),To(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=cc.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Hu){const n=Hu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<T1.length;r++){const i=T1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=yne(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Wu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Y2(r)||Z2(r))?r=parseFloat(r):!Ite(r)&&bo.test(n)&&(r=NF(e,n)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=TI(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!an(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new tI),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){mI.render(this.render)}}class aB extends vne{constructor(){super(...arguments),this.KeyframeResolver=fte}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function lB(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function _ne(t){return window.getComputedStyle(t)}class wne extends aB{constructor(){super(...arguments),this.type="html",this.renderInstance=lB}readValueFromInstance(e,n){var r;if(cc.has(n))return(r=this.projection)!=null&&r.isProjecting?A0(n):Dee(e,n);{const i=_ne(e),s=(fF(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sB(e,n)}build(e,n,r){wI(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return bI(e,n,r)}}const uB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Sne(t,e,n,r){lB(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(uB.has(i)?i:II(i),e.attrs[i])}class Ene extends aB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=At}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(cc.has(n)){const r=MF(n);return r&&r.default||0}return n=uB.has(n)?n:II(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return JF(e,n,r)}build(e,n,r){GF(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Sne(e,n,r,i)}mount(e){this.isSVGTag=QF(e.tagName),super.mount(e)}}const Tne=(t,e)=>EI(t)?new Ene(e):new wne(e,{allowProjection:t!==I.Fragment});function vu(t,e,n){const r=t.getProps();return TI(r,e,n!==void 0?n:r.custom,t)}const j0=t=>Array.isArray(t);function bne(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Wu(n))}function Ine(t){return j0(t)?t[t.length-1]||0:t}function Rne(t,e){const n=vu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Ine(s[o]);bne(t,o,a)}}function Cne(t){return!!(an(t)&&t.add)}function U0(t,e){const n=t.getValue("willChange");if(Cne(n))return n.add(e);if(!n&&is.WillChange){const r=new is.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function cB(t){return t.props[ZF]}const xne=t=>t!==null;function Ane(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(xne),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Pne={type:"spring",stiffness:500,damping:25,restSpeed:10},kne=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Dne={type:"keyframes",duration:.8},One={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mne=(t,{keyframes:e})=>e.length>2?Dne:cc.has(t)?t.startsWith("scale")?kne(e[1]):Pne:One;function Nne({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const RI=(t,e,n,r={},i,s)=>o=>{const a=fI(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-wi(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Nne(a)||Object.assign(c,Mne(t,c)),c.duration&&(c.duration=wi(c.duration)),c.repeatDelay&&(c.repeatDelay=wi(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(M0(c),c.delay===0&&(d=!0)),(is.instantAnimations||is.skipAnimations)&&(d=!0,M0(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const f=Ane(c.keyframes,a);if(f!==void 0){Ze.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new hI(c):new tte(c)};function Lne({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function hB(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const d=t.getValue(c,t.latestValues[c]??null),f=a[c];if(f===void 0||u&&Lne(u,c))continue;const p={delay:n,...fI(s||{},c)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const _=cB(t);if(_){const y=window.MotionHandoffAnimation(_,c,Ze);y!==null&&(p.startTime=y,S=!0)}}U0(t,c),d.start(RI(c,d,f,t.shouldReduceMotion&&kF.has(c)?{type:!1}:p,t,S));const T=d.animation;T&&l.push(T)}return o&&Promise.all(l).then(()=>{Ze.update(()=>{o&&Rne(t,o)})}),l}function dB(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function $0(t,e,n={}){var l;const r=vu(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(hB(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return Vne(t,e,u,c,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function Vne(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push($0(l,e,{...o,delay:n+(typeof r=="function"?0:r)+dB(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Fne(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>$0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=$0(t,e,n);else{const i=typeof e=="function"?vu(t,e,n.custom):e;r=Promise.all(hB(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function fB(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Bne=_I.length;function pB(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?pB(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Bne;n++){const r=_I[n],i=t.props[r];(zd(i)||i===!1)&&(e[r]=i)}return e}const jne=[...vI].reverse(),Une=vI.length;function $ne(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Fne(t,n,r)))}function zne(t){let e=$ne(t),n=b1(),r=!0;const i=l=>(u,c)=>{var f;const d=vu(t,c,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,...S}=d;u={...u,...S,...g}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=pB(t.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let T=0;T<Une;T++){const _=jne[T],y=n[_],v=u[_]!==void 0?u[_]:c[_],C=zd(v),D=_===l?y.isActive:null;D===!1&&(g=T);let O=v===c[_]&&v!==u[_]&&C;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),y.protectedKeys={...p},!y.isActive&&D===null||!v&&!y.prevProp||lv(v)||typeof v=="boolean")continue;const b=Wne(y.prevProp,v);let E=b||_===l&&y.isActive&&!O&&C||T>g&&C,R=!1;const x=Array.isArray(v)?v:[v];let P=x.reduce(i(_),{});D===!1&&(P={});const{prevResolvedValues:N={}}=y,k={...N,...P},de=Re=>{E=!0,f.has(Re)&&(R=!0,f.delete(Re)),y.needsAnimating[Re]=!0;const U=t.getValue(Re);U&&(U.liveStyle=!1)};for(const Re in k){const U=P[Re],Y=N[Re];if(p.hasOwnProperty(Re))continue;let ie=!1;j0(U)&&j0(Y)?ie=!fB(U,Y):ie=U!==Y,ie?U!=null?de(Re):f.add(Re):U!==void 0&&f.has(Re)?de(Re):y.protectedKeys[Re]=!0}y.prevProp=v,y.prevResolvedValues=P,y.isActive&&(p={...p,...P}),r&&t.blockInitialAnimation&&(E=!1);const fe=O&&b;E&&(!fe||R)&&d.push(...x.map(Re=>{const U={type:_};if(typeof Re=="string"&&r&&!fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,ie=vu(Y,Re);if(Y.enteringChildren&&ie){const{delayChildren:we}=ie.transition||{};U.delay=dB(Y.enteringChildren,t,we)}}return{animation:Re,options:U}}))}if(f.size){const T={};if(typeof u.initial!="boolean"){const _=vu(t,Array.isArray(u.initial)?u.initial[0]:u.initial);_&&_.transition&&(T.transition=_.transition)}f.forEach(_=>{const y=t.getBaseTarget(_),v=t.getValue(_);v&&(v.liveStyle=!0),T[_]=y??null}),d.push({animation:T})}let S=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=b1()}}}function Wne(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fB(e,t):!1}function Zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function b1(){return{animate:Zo(!0),whileInView:Zo(),whileHover:Zo(),whileTap:Zo(),whileDrag:Zo(),whileFocus:Zo(),exit:Zo()}}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Hne extends No{constructor(e){super(e),e.animationState||(e.animationState=zne(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Kne=0;class qne extends No{constructor(){super(...arguments),this.id=Kne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Gne={animation:{Feature:Hne},exit:{Feature:qne}};function Wd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Sf(t){return{point:{x:t.pageX,y:t.pageY}}}const Xne=t=>e=>gI(e)&&t(e,Sf(e));function Gh(t,e,n,r){return Wd(t,e,Xne(n),r)}const mB=1e-4,Qne=1-mB,Yne=1+mB,gB=.01,Jne=0-gB,Zne=0+gB;function yn(t){return t.max-t.min}function ere(t,e,n){return Math.abs(t-e)<=n}function I1(t,e,n,r=.5){t.origin=r,t.originPoint=rt(e.min,e.max,t.origin),t.scale=yn(n)/yn(e),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Qne&&t.scale<=Yne||isNaN(t.scale))&&(t.scale=1),(t.translate>=Jne&&t.translate<=Zne||isNaN(t.translate))&&(t.translate=0)}function Xh(t,e,n,r){I1(t.x,e.x,n.x,r?r.originX:void 0),I1(t.y,e.y,n.y,r?r.originY:void 0)}function R1(t,e,n){t.min=n.min+e.min,t.max=t.min+yn(e)}function tre(t,e,n){R1(t.x,e.x,n.x),R1(t.y,e.y,n.y)}function C1(t,e,n){t.min=e.min-n.min,t.max=t.min+yn(e)}function Jg(t,e,n){C1(t.x,e.x,n.x),C1(t.y,e.y,n.y)}function sr(t){return[t("x"),t("y")]}const yB=({current:t})=>t?t.ownerDocument.defaultView:null,x1=(t,e)=>Math.abs(t-e);function nre(t,e){const n=x1(t.x,e.x),r=x1(t.y,e.y);return Math.sqrt(n**2+r**2)}class vB{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Z_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=nre(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:S}=f,{timestamp:T}=Ht;this.history.push({...S,timestamp:T});const{onStart:_,onMove:y}=this.handlers;p||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=J_(p,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:S,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Z_(f.type==="pointercancel"?this.lastMoveEventInfo:J_(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,_),S&&S(f,_)},!gI(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Sf(e),l=J_(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Ht;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,Z_(l,this.history)),this.removeListeners=vf(Gh(this.contextWindow,"pointermove",this.handlePointerMove),Gh(this.contextWindow,"pointerup",this.handlePointerUp),Gh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),To(this.updatePoint)}}function J_(t,e){return e?{point:e(t.point)}:t}function A1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Z_({point:t},e){return{point:t,delta:A1(t,_B(e)),offset:A1(t,rre(e)),velocity:ire(e,.1)}}function rre(t){return t[0]}function _B(t){return t[t.length-1]}function ire(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=_B(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>wi(e)));)n--;if(!r)return{x:0,y:0};const s=hr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function sre(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?rt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?rt(n,t,r.max):Math.min(t,n)),t}function P1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function ore(t,{top:e,left:n,bottom:r,right:i}){return{x:P1(t.x,n,i),y:P1(t.y,e,r)}}function k1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function are(t,e){return{x:k1(t.x,e.x),y:k1(t.y,e.y)}}function lre(t,e){let n=.5;const r=yn(t),i=yn(e);return i>r?n=jd(e.min,e.max-r,t.min):r>i&&(n=jd(t.min,t.max-i,e.min)),rs(0,1,n)}function ure(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const z0=.35;function cre(t=z0){return t===!1?t=0:t===!0&&(t=z0),{x:D1(t,"left","right"),y:D1(t,"top","bottom")}}function D1(t,e,n){return{min:O1(t,e),max:O1(t,n)}}function O1(t,e){return typeof t=="number"?t:t[e]||0}const hre=new WeakMap;class dre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Sf(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:S}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=yte(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(_=>{let y=this.getAxisMotionValue(_).get()||0;if(Si.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const C=v.layout.layoutBox[_];C&&(y=yn(C)*(parseFloat(y)/100))}}this.originPoint[_]=y}),S&&Ze.postRender(()=>S(d,f)),U0(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:S,onDrag:T}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:_}=f;if(g&&this.currentDirection===null){this.currentDirection=fre(_),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),T&&T(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>sr(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new vB(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:yB(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ze.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Op(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=sre(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&tu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=ore(r.layoutBox,e):this.constraints=!1,this.elastic=cre(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ure(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=pne(r,i.root,this.visualElement.getTransformPagePoint());let o=are(i.layout.layoutBox,s);if(n){const a=n(hne(o));this.hasMutatedConstraints=!!a,a&&(o=nB(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=sr(c=>{if(!Op(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return U0(this.visualElement,e),r.start(RI(e,r,0,n,this.visualElement,!1))}stopAnimation(){sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sr(n=>{const{drag:r}=this.getProps();if(!Op(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-rt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};sr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=lre({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(o=>{if(!Op(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(rt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;hre.set(this.visualElement,this);const e=this.visualElement.current,n=Gh(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();tu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ze.read(r);const o=Wd(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(sr(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=z0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Op(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function fre(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class pre extends No{constructor(e){super(e),this.removeGroupControls=gr,this.removeListeners=gr,this.controls=new dre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gr}unmount(){this.removeGroupControls(),this.removeListeners()}}const M1=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class mre extends No{constructor(){super(...arguments),this.removePointerDownListener=gr}onPointerDown(e){this.session=new vB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yB(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:M1(e),onStart:M1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ze.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Gh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let ew=!1;class gre extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),ew&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Rm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,ew=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),mI.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;ew=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wB(t){const[e,n]=$F(),r=I.useContext(Gb);return M.jsx(gre,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(eB),isPresent:e,safeToRemove:n})}function yre(t,e,n){const r=an(t)?t:Wu(t);return r.start(RI("",r,e,n)),r.animation}const vre=(t,e)=>t.depth-e.depth;class _re{constructor(){this.children=[],this.isDirty=!1}add(e){Yb(this.children,e),this.isDirty=!0}remove(e){Jb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vre),this.isDirty=!1,this.children.forEach(e)}}function wre(t,e){const n=An.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(To(r),t(s-e))};return Ze.setup(r,!0),()=>To(r)}const SB=["TopLeft","TopRight","BottomLeft","BottomRight"],Sre=SB.length,N1=t=>typeof t=="string"?parseFloat(t):t,L1=t=>typeof t=="number"||ue.test(t);function Ere(t,e,n,r,i,s){i?(t.opacity=rt(0,n.opacity??1,Tre(r)),t.opacityExit=rt(e.opacity??1,0,bre(r))):s&&(t.opacity=rt(e.opacity??1,n.opacity??1,r));for(let o=0;o<Sre;o++){const a=`border${SB[o]}Radius`;let l=V1(e,a),u=V1(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||L1(l)===L1(u)?(t[a]=Math.max(rt(N1(l),N1(u),r),0),(Si.test(u)||Si.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,r))}function V1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Tre=EB(0,.5,aF),bre=EB(.5,.95,gr);function EB(t,e,n){return r=>r<t?0:r>e?1:n(jd(t,e,r))}function F1(t,e){t.min=e.min,t.max=e.max}function xr(t,e){F1(t.x,e.x),F1(t.y,e.y)}function B1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function j1(t,e,n,r,i){return t-=e,t=Yg(t,1/n,r),i!==void 0&&(t=Yg(t,1/i,r)),t}function Ire(t,e=0,n=1,r=.5,i,s=t,o=t){if(Si.test(e)&&(e=parseFloat(e),e=rt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=rt(s.min,s.max,r);t===s&&(a-=e),t.min=j1(t.min,e,n,a,i),t.max=j1(t.max,e,n,a,i)}function U1(t,e,[n,r,i],s,o){Ire(t,e[n],e[r],e[i],e.scale,s,o)}const Rre=["x","scaleX","originX"],Cre=["y","scaleY","originY"];function $1(t,e,n,r){U1(t.x,e,Rre,n?n.x:void 0,r?r.x:void 0),U1(t.y,e,Cre,n?n.y:void 0,r?r.y:void 0)}function z1(t){return t.translate===0&&t.scale===1}function TB(t){return z1(t.x)&&z1(t.y)}function W1(t,e){return t.min===e.min&&t.max===e.max}function xre(t,e){return W1(t.x,e.x)&&W1(t.y,e.y)}function H1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function bB(t,e){return H1(t.x,e.x)&&H1(t.y,e.y)}function K1(t){return yn(t.x)/yn(t.y)}function q1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Are{constructor(){this.members=[]}add(e){Yb(this.members,e),e.scheduleRender()}remove(e){if(Jb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pre(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:p,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const tw=["","X","Y","Z"],kre=1e3;let Dre=0;function nw(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function IB(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=cB(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&IB(r)}function RB({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Dre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Nre),this.nodes.forEach(Bre),this.nodes.forEach(jre),this.nodes.forEach(Lre)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _re)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tI),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=UF(o)&&!Tte(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c,d=0;const f=()=>this.root.updateBlockedByResize=!1;Ze.read(()=>{d=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,c&&c(),c=wre(f,250),Rm.hasAnimatedSinceResize&&(Rm.hasAnimatedSinceResize=!1,this.nodes.forEach(Q1)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Hre,{onLayoutAnimationStart:S,onLayoutAnimationComplete:T}=u.getProps(),_=!this.targetLayout||!bB(this.targetLayout,p),y=!d&&f;if(this.options.layoutRoot||this.resumeFrom||y||d&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...fI(g,"layout"),onPlay:S,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(c,y)}else d||Q1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),To(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ure),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&IB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(G1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(X1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Fre),this.nodes.forEach(Ore),this.nodes.forEach(Mre)):this.nodes.forEach(X1),this.clearAllSnapshots();const a=An.now();Ht.delta=rs(0,1e3/60,a-Ht.timestamp),Ht.timestamp=a,Ht.isProcessing=!0,W_.update.process(Ht),W_.preRender.process(Ht),W_.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Vre),this.sharedNodes.forEach($re)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yn(this.snapshot.measuredBox.x)&&!yn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!TB(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||sa(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Kre(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return At();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(qre))){const{scroll:c}=this.root;c&&(nu(a.x,c.offset.x),nu(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=At();if(xr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&xr(a,o),nu(a.x,d.offset.x),nu(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=At();xr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ru(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),sa(c.latestValues)&&ru(l,c.latestValues)}return sa(this.latestValues)&&ru(l,this.latestValues),l}removeTransform(o){const a=At();xr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!sa(u.latestValues))continue;V0(u.latestValues)&&u.updateSnapshot();const c=At(),d=u.measurePageBox();xr(c,d),$1(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return sa(this.latestValues)&&$1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!this.layout||!(c||d))return;this.resolvedRelativeTargetAt=Ht.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xr(this.target,this.layout.layoutBox),iB(this.target,this.targetDelta)):xr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||V0(this.parent.latestValues)||rB(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Jg(this.relativeTargetOrigin,a,l),xr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;xr(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;fne(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=At());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(B1(this.prevProjectionDelta.x,this.projectionDelta.x),B1(this.prevProjectionDelta.y,this.projectionDelta.y)),Xh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!q1(this.projectionDelta.x,this.prevProjectionDelta.x)||!q1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iu(),this.projectionDelta=iu(),this.projectionDeltaWithTransform=iu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=At(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,S=p!==g,T=this.getStack(),_=!T||T.members.length<=1,y=!!(S&&!_&&this.options.crossfade===!0&&!this.path.some(Wre));this.animationProgress=0;let v;this.mixTargetDelta=C=>{const D=C/1e3;Y1(d.x,o.x,D),Y1(d.y,o.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jg(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zre(this.relativeTarget,this.relativeTargetOrigin,f,D),v&&xre(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=At()),xr(v,this.relativeTarget)),S&&(this.animationValues=c,Ere(c,u,this.latestValues,D,y,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(To(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{Rm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wu(0)),this.currentAnimation=yre(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&CB(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||At();const d=yn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=yn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}xr(a,l),ru(a,c),Xh(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Are),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&nw("z",o,u,this.animationValues);for(let c=0;c<tw.length;c++)nw(`rotate${tw[c]}`,o,u,this.animationValues),nw(`skew${tw[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Im(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Im(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!sa(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Pre(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const g in L0){if(c[g]===void 0)continue;const{correct:S,applyTo:T,isCSSVariable:_}=L0[g],y=d==="none"?c[g]:S(c[g],u);if(T){const v=T.length;for(let C=0;C<v;C++)o[T[C]]=y}else _?this.options.visualElement.renderState.vars[g]=y:o[g]=y}this.options.layoutId&&(o.pointerEvents=u===this?Im(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(G1),this.root.sharedNodes.clear()}}}function Ore(t){t.updateLayout()}function Mre(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?sr(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=yn(f);f.min=r[d].min,f.max=f.min+p}):CB(s,e.layoutBox,r)&&sr(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=yn(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=iu();Xh(a,r,e.layoutBox);const l=iu();o?Xh(l,t.applyTransform(i,!0),e.measuredBox):Xh(l,r,e.layoutBox);const u=!TB(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=At();Jg(g,e.layoutBox,f.layoutBox);const S=At();Jg(S,r,p.layoutBox),bB(g,S)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Nre(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Lre(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Vre(t){t.clearSnapshot()}function G1(t){t.clearMeasurements()}function X1(t){t.isLayoutDirty=!1}function Fre(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Q1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Bre(t){t.resolveTargetDelta()}function jre(t){t.calcProjection()}function Ure(t){t.resetSkewAndRotation()}function $re(t){t.removeLeadSnapshot()}function Y1(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function J1(t,e,n,r){t.min=rt(e.min,n.min,r),t.max=rt(e.max,n.max,r)}function zre(t,e,n,r){J1(t.x,e.x,n.x,r),J1(t.y,e.y,n.y,r)}function Wre(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hre={duration:.45,ease:[.4,0,.1,1]},Z1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ek=Z1("applewebkit/")&&!Z1("chrome/")?Math.round:gr;function tk(t){t.min=ek(t.min),t.max=ek(t.max)}function Kre(t){tk(t.x),tk(t.y)}function CB(t,e,n){return t==="position"||t==="preserve-aspect"&&!ere(K1(e),K1(n),.2)}function qre(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Gre=RB({attachResizeListener:(t,e)=>Wd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rw={current:void 0},xB=RB({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rw.current){const t=new Gre({});t.mount(window),t.setOptions({layoutScroll:!0}),rw.current=t}return rw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Xre={pan:{Feature:mre},drag:{Feature:pre,ProjectionNode:xB,MeasureLayout:wB}};function nk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ze.postRender(()=>s(e,Sf(e)))}class Qre extends No{mount(){const{current:e}=this.node;e&&(this.unmount=vte(e,(n,r)=>(nk(this.node,r,"Start"),i=>nk(this.node,i,"End"))))}unmount(){}}class Yre extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vf(Wd(this.node.current,"focus",()=>this.onFocus()),Wd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ze.postRender(()=>s(e,Sf(e)))}class Jre extends No{mount(){const{current:e}=this.node;e&&(this.unmount=Ete(e,(n,r)=>(rk(this.node,r,"Start"),(i,{success:s})=>rk(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const W0=new WeakMap,iw=new WeakMap,Zre=t=>{const e=W0.get(t.target);e&&e(t)},eie=t=>{t.forEach(Zre)};function tie({root:t,...e}){const n=t||document;iw.has(n)||iw.set(n,{});const r=iw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(eie,{root:t,...e})),r[i]}function nie(t,e,n){const r=tie(e);return W0.set(t,n),r.observe(t),()=>{W0.delete(t),r.unobserve(t)}}const rie={some:0,all:1};class iie extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:rie[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return nie(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sie(e,n))&&this.startObserver()}unmount(){}}function sie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oie={inView:{Feature:iie},tap:{Feature:Jre},focus:{Feature:Yre},hover:{Feature:Qre}},aie={layout:{ProjectionNode:xB,MeasureLayout:wB}},lie={...Gne,...oie,...Xre,...aie},uie=cne(lie,Tne),cie=""+new URL("banner-CAwNRSLn.png",import.meta.url).href,si={colors:{background:"#fff9ec",highlight:"#ff8e52",text:"#00202b",secondaryText:"#666666",border:"#eee"}};function hie(){return M.jsxs(X,{style:ik.container,children:[M.jsx(G,{style:ik.title,children:"Pocket Stylist"}),M.jsx(G,{children:"Welcome to your personal style assistant."})]})}const ik=Ae.create({container:{flex:1,padding:20,alignItems:"center",justifyContent:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:10}}),die=async(t,e)=>{const n=sc(ds(),"users",t);await kb(n,e,{merge:!0})},fie=async t=>{const e=sc(ds(),"users",t),n=pX(e);return(await n).exists()?(await n).data():null},pie=(t,e)=>{const n=_b(ds(),"users",t,"closet"),r=qV(n,cX("createdAt","desc"));return vX(r,i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)})},mie=async(t,e)=>{console.log("addItemToDb called for user:",t);try{const n=_b(ds(),"users",t,"closet"),r=sc(n);console.log("Generated ID:",r.id),console.log("Writing document to Firestore (setDoc)...");const i=kb(r,e),s=new Promise((o,a)=>setTimeout(()=>a(new Error("Database write timed out after 30 seconds")),3e4));return await Promise.race([i,s]),console.log("Document written successfully"),{...e,id:r.id}}catch(n){throw console.error("Error in addItemToDb:",n),n}},gie=async(t,e,n)=>{const r=sc(ds(),"users",t,"closet",e);await gX(r,n)},yie=async(t,e)=>{const n=sc(ds(),"users",t,"closet",e);await yX(n)},vie=async(t,e,n)=>{const r=sc(ds(),"users",t,"schedule",e);await kb(r,{date:e,...n},{merge:!0})},_ie=async t=>{const e=_b(ds(),"users",t,"schedule"),n=qV(e),r=await mX(n),i={};return r.forEach(s=>{i[s.id]=s.data()}),i},wie=async(t,e)=>{try{const n=`closet/${Date.now()}_${Math.random().toString(36).substring(7)}.jpg`,r=JJ(iZ,`users/${t}/${n}`);console.log("Starting upload...");const s=await(await fetch(e)).blob(),o=QJ(r,s),a=new Promise((c,d)=>setTimeout(()=>d(new Error("Upload timed out after 30 seconds")),3e4)),l=await Promise.race([o,a]);return console.log("Upload successful, getting URL..."),await YJ(l.ref)}catch(n){throw console.error("Error uploading image to storage:",n),n}},AB=I.createContext();function cv(){return I.useContext(AB)}function Sie({children:t}){const{currentUser:e}=qb(),[n,r]=I.useState([]),[i,s]=I.useState({}),[o,a]=I.useState(!0);I.useEffect(()=>{if(e){const g=pie(e.uid,S=>{const T=S.filter(_=>_.type!=="test_connection");r(T),a(!1)});return _ie(e.uid).then(s),()=>g()}else r([]),s({}),a(!1)},[e]);const p={items:n,schedule:i,loading:o,addItem:async g=>{if(!e)throw new Error("User not authenticated");const S=Date.now().toString(),T={...g,id:S,rating:3,wearCount:0,createdAt:new Date().toISOString(),isOptimistic:!0};r(_=>[T,..._]);try{let _=g.imageUri;g.imageUri&&g.imageUri.startsWith("data:")&&(_=await wie(e.uid,g.imageUri));const y={...g,imageUri:_,rating:3,wearCount:0,createdAt:new Date().toISOString()};console.log("Saving item to DB. Size approx:",JSON.stringify(y).length,"bytes"),await mie(e.uid,y),r(v=>v.filter(C=>C.id!==S))}catch(_){throw console.error("Error adding item:",_),alert(`Failed to save item: ${_.message}. 
Check console for details.`),r(y=>y.filter(v=>v.id!==S)),_}},updateItem:async(g,S)=>{if(e){r(T=>T.map(_=>_.id===g?{..._,...S}:_));try{await gie(e.uid,g,S)}catch(T){console.error("Error updating item:",T)}}},deleteItem:async g=>{if(e){r(S=>S.filter(T=>T.id!==g));try{console.log("Deleting item from DB:",g),await yie(e.uid,g),console.log("Item deleted successfully:",g)}catch(S){console.error("Error deleting item:",S)}}},addToSchedule:async(g,S)=>{if(e){s(T=>({...T,[g]:{date:g,...S}}));try{await vie(e.uid,g,S)}catch(T){console.error("Error saving schedule:",T)}}},isItemAvailable:g=>{if(!g.lastWorn)return!0;const S=new Date(g.lastWorn),_=Math.abs(new Date-S);return Math.ceil(_/(1e3*60*60*24))>7}};return M.jsx(AB.Provider,{value:p,children:t})}const PB=2,Eie=cg.get("window").width,Tie=(Eie-40)/PB,bie=({uri:t,style:e,alt:n})=>M.jsx("div",{style:{...Ae.flatten(e),overflow:"hidden"},children:M.jsx("img",{src:t,alt:n,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},loading:"lazy",onError:r=>{r.target.onerror=null,console.warn("Image failed to load:",t)}})}),Iie=yt.memo(({item:t,onPress:e,isAvailable:n})=>M.jsx(Ce,{onPress:()=>e(t),children:M.jsxs(X,{style:[me.itemContainer,!n&&me.unavailableItem],children:[M.jsx(bie,{uri:t.imageUri||t.image,style:me.image,alt:t.type}),M.jsxs(X,{style:me.infoContainer,children:[M.jsx(G,{style:me.itemType,children:t.type}),!n&&M.jsx(G,{style:me.unavailableText,children:"In Wash"})]})]})}));function Rie(){const{items:t,isItemAvailable:e,deleteItem:n,updateItem:r}=cv(),{currentUser:i}=qb(),s=Ju(),[o,a]=I.useState(!1),[l,u]=I.useState(!1),[c,d]=I.useState(null),f=I.useRef(null),p=I.useRef(null),g=v=>{const C=v.target.files[0];if(C){a(!1);const D=new FileReader;D.onloadend=()=>{s("/camera",{state:{image:D.result}})},D.readAsDataURL(C)}},S=v=>{d(v),u(!0)},T=()=>{confirm("Are you sure you want to delete this item?")&&(n(c.id),u(!1))},_=v=>{d(C=>({...C,rating:v})),r(c.id,{rating:v})},y=({item:v})=>M.jsx(Iie,{item:v,onPress:S,isAvailable:e(v)});return M.jsxs(X,{style:me.container,children:[M.jsxs(X,{style:me.header,children:[M.jsx(G,{style:me.title,children:"Virtual Closet"}),M.jsx(Ce,{style:me.addButton,onPress:()=>a(!0),children:M.jsx(G,{style:me.addButtonText,children:"+ Add"})}),M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:f,style:{display:"none"},onChange:g}),M.jsx("input",{type:"file",accept:"image/*",ref:p,style:{display:"none"},onChange:g})]}),M.jsx(K9,{data:t,renderItem:y,keyExtractor:v=>v.id,numColumns:PB,contentContainerStyle:me.listContent,ListEmptyComponent:M.jsx(G,{style:me.emptyText,children:"No items in closet. Add some!"})}),M.jsx(wd,{animationType:"fade",transparent:!0,visible:o,onRequestClose:()=>a(!1),children:M.jsxs(X,{style:me.modalOverlay,children:[M.jsx(Ce,{style:me.modalBackdrop,onPress:()=>a(!1)}),M.jsxs(X,{style:me.modalContent,children:[M.jsx(G,{style:me.modalTitle,children:"Add New Item"}),M.jsx(Ce,{style:me.modalButton,onPress:()=>{a(!1),f.current.click()},children:M.jsx(G,{style:me.modalButtonText,children:"Take Photo"})}),M.jsx(Ce,{style:me.modalButton,onPress:()=>{a(!1),p.current.click()},children:M.jsx(G,{style:me.modalButtonText,children:"Choose from Library"})}),M.jsx(Ce,{style:[me.modalButton,me.cancelButton],onPress:()=>a(!1),children:M.jsx(G,{style:me.cancelButtonText,children:"Cancel"})})]})]})}),M.jsx(wd,{animationType:"slide",visible:l,onRequestClose:()=>u(!1),children:M.jsx(X,{style:me.detailContainer,children:c&&M.jsxs(Lr,{children:[M.jsx(Ei,{source:{uri:c.imageUri},style:me.detailImage,resizeMode:"contain"}),M.jsxs(X,{style:me.detailInfo,children:[M.jsx(G,{style:me.detailTitle,children:c.type}),M.jsxs(G,{style:me.detailText,children:["Color: ",c.color]}),M.jsxs(G,{style:me.detailText,children:["Style: ",c.style]}),M.jsxs(G,{style:me.detailText,children:["Worn: ",c.wearCount||0," times"]}),M.jsx(G,{style:me.sectionTitle,children:"Rating"}),M.jsx(X,{style:me.ratingContainer,children:[1,2,3,4,5].map(v=>M.jsx(Ce,{onPress:()=>_(v),children:M.jsx(G,{style:[me.star,(c.rating||0)>=v?me.starFilled:me.starEmpty],children:""})},v))}),M.jsx(Ce,{style:me.deleteButton,onPress:T,children:M.jsx(G,{style:me.deleteButtonText,children:"Delete Item"})}),M.jsx(Ce,{style:me.closeDetailButton,onPress:()=>u(!1),children:M.jsx(G,{style:me.closeDetailButtonText,children:"Close"})})]})]})})})]})}const me=Ae.create({container:{flex:1,padding:10,backgroundColor:"#fff"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingHorizontal:10},title:{fontSize:24,fontWeight:"bold"},addButton:{backgroundColor:"#007AFF",paddingVertical:8,paddingHorizontal:15,borderRadius:20},addButtonText:{color:"#fff",fontWeight:"bold"},listContent:{paddingBottom:20},itemContainer:{width:Tie,margin:5,backgroundColor:"#f9f9f9",borderRadius:10,overflow:"hidden",elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41},unavailableItem:{opacity:.5,backgroundColor:"#eee"},image:{width:"100%",height:150},infoContainer:{padding:10},itemType:{textTransform:"capitalize",fontWeight:"bold"},unavailableText:{color:"red",fontSize:12,marginTop:5},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalBackdrop:{...Ae.absoluteFillObject},modalContent:{width:"80%",maxWidth:300,backgroundColor:"white",borderRadius:20,padding:20,alignItems:"center",elevation:5},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},modalButton:{width:"100%",padding:15,backgroundColor:"#f0f0f0",borderRadius:10,marginBottom:10,alignItems:"center"},modalButtonText:{fontSize:16,color:"#007AFF"},cancelButton:{backgroundColor:"transparent",marginTop:5},cancelButtonText:{fontSize:16,color:"#FF3B30",fontWeight:"bold"},detailContainer:{flex:1,backgroundColor:"#fff"},detailImage:{width:"100%",height:400,backgroundColor:"#f0f0f0"},detailInfo:{padding:20},detailTitle:{fontSize:28,fontWeight:"bold",marginBottom:10,textTransform:"capitalize"},detailText:{fontSize:16,marginBottom:5,color:"#333"},sectionTitle:{fontSize:18,fontWeight:"bold",marginTop:20,marginBottom:10},ratingContainer:{flexDirection:"row",marginBottom:20},star:{fontSize:30,marginRight:5},starFilled:{color:"#FFD700"},starEmpty:{color:"#ddd"},deleteButton:{backgroundColor:"#FF3B30",padding:15,borderRadius:10,alignItems:"center",marginTop:20},deleteButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},closeDetailButton:{padding:15,alignItems:"center",marginTop:10},closeDetailButtonText:{color:"#007AFF",fontSize:16},emptyText:{textAlign:"center",marginTop:50,fontSize:18,color:"#999"}});function ce(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function F(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let kB=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return kB=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function H0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const K0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class oe extends Error{}class Yt extends oe{constructor(e,n,r,i){super(`${Yt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new hv({message:r,cause:K0(n)});const s=n==null?void 0:n.error;return e===400?new DB(e,s,r,i):e===401?new OB(e,s,r,i):e===403?new MB(e,s,r,i):e===404?new NB(e,s,r,i):e===409?new LB(e,s,r,i):e===422?new VB(e,s,r,i):e===429?new FB(e,s,r,i):e>=500?new BB(e,s,r,i):new Yt(e,s,r,i)}}class dr extends Yt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class hv extends Yt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class CI extends hv{constructor({message:e}={}){super({message:e??"Request timed out."})}}class DB extends Yt{}class OB extends Yt{}class MB extends Yt{}class NB extends Yt{}class LB extends Yt{}class VB extends Yt{}class FB extends Yt{}class BB extends Yt{}class jB extends oe{constructor(){super("Could not parse response content as the length limit was reached")}}class UB extends oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class dh extends Error{constructor(e){super(e)}}const Cie=/^[a-z][a-z0-9+.-]*:/i,xie=t=>Cie.test(t);let bn=t=>(bn=Array.isArray,bn(t)),sk=bn;function $B(t){return typeof t!="object"?{}:t??{}}function Aie(t){if(!t)return!0;for(const e in t)return!1;return!0}function Pie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sw(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const kie=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new oe(`${t} must be an integer`);if(e<0)throw new oe(`${t} must be a positive integer`);return e},Die=t=>{try{return JSON.parse(t)}catch{return}},Ef=t=>new Promise(e=>setTimeout(e,t)),Vl="6.10.0",Oie=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Mie(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Nie=()=>{var n;const t=Mie();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":ak(Deno.build.os),"X-Stainless-Arch":ok(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":ak(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ok(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Lie();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Lie(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const ok=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ak=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let lk;const Vie=()=>lk??(lk=Nie());function Fie(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function zB(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function WB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return zB({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function HB(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Bie(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const jie=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),KB="RFC3986",qB=t=>String(t),uk={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:qB},Uie="RFC1738";let q0=(t,e)=>(q0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),q0(t,e));const Yr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),ow=1024,$ie=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=ow){const l=s.length>=ow?s.slice(a,a+ow):s,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Uie&&(d===40||d===41)){u[u.length]=l.charAt(c);continue}if(d<128){u[u.length]=Yr[d];continue}if(d<2048){u[u.length]=Yr[192|d>>6]+Yr[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Yr[224|d>>12]+Yr[128|d>>6&63]+Yr[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=Yr[240|d>>18]+Yr[128|d>>12&63]+Yr[128|d>>6&63]+Yr[128|d&63]}o+=u.join("")}return o};function zie(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function ck(t,e){if(bn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const GB={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},XB=function(t,e){Array.prototype.push.apply(t,bn(e)?e:[e])};let hk;const xt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:$ie,encodeValuesOnly:!1,format:KB,formatter:qB,indices:!1,serializeDate(t){return(hk??(hk=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Wie(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const aw={};function QB(t,e,n,r,i,s,o,a,l,u,c,d,f,p,g,S,T,_){let y=t,v=_,C=0,D=!1;for(;(v=v.get(aw))!==void 0&&!D;){const x=v.get(t);if(C+=1,typeof x<"u"){if(x===C)throw new RangeError("Cyclic object value");D=!0}typeof v.get(aw)>"u"&&(C=0)}if(typeof u=="function"?y=u(e,y):y instanceof Date?y=f==null?void 0:f(y):n==="comma"&&bn(y)&&(y=ck(y,function(x){return x instanceof Date?f==null?void 0:f(x):x})),y===null){if(s)return l&&!S?l(e,xt.encoder,T,"key",p):e;y=""}if(Wie(y)||zie(y)){if(l){const x=S?e:l(e,xt.encoder,T,"key",p);return[(g==null?void 0:g(x))+"="+(g==null?void 0:g(l(y,xt.encoder,T,"value",p)))]}return[(g==null?void 0:g(e))+"="+(g==null?void 0:g(String(y)))]}const O=[];if(typeof y>"u")return O;let b;if(n==="comma"&&bn(y))S&&l&&(y=ck(y,l)),b=[{value:y.length>0?y.join(",")||null:void 0}];else if(bn(u))b=u;else{const x=Object.keys(y);b=c?x.sort(c):x}const E=a?String(e).replace(/\./g,"%2E"):String(e),R=r&&bn(y)&&y.length===1?E+"[]":E;if(i&&bn(y)&&y.length===0)return R+"[]";for(let x=0;x<b.length;++x){const P=b[x],N=typeof P=="object"&&typeof P.value<"u"?P.value:y[P];if(o&&N===null)continue;const k=d&&a?P.replace(/\./g,"%2E"):P,de=bn(y)?typeof n=="function"?n(R,k):R:R+(d?"."+k:"["+k+"]");_.set(t,C);const fe=new WeakMap;fe.set(aw,_),XB(O,QB(N,de,n,r,i,s,o,a,n==="comma"&&S&&bn(y)?null:l,u,c,d,f,p,g,S,T,fe))}return O}function Hie(t=xt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||xt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=KB;if(typeof t.format<"u"){if(!q0(uk,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=uk[n];let i=xt.filter;(typeof t.filter=="function"||bn(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in GB?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=xt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:xt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:xt.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:xt.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:xt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?xt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:xt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:xt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:xt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:xt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:xt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:xt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:xt.strictNullHandling}}function Kie(t,e={}){let n=t;const r=Hie(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):bn(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=GB[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const p=i[f];r.skipNulls&&n[p]===null||XB(o,QB(n[p],p,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}function qie(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let dk;function xI(t){let e;return(dk??(e=new globalThis.TextEncoder,dk=e.encode.bind(e)))(t)}let fk;function pk(t){let e;return(fk??(e=new globalThis.TextDecoder,fk=e.decode.bind(e)))(t)}var Bn,jn;class dv{constructor(){Bn.set(this,void 0),jn.set(this,void 0),ce(this,Bn,new Uint8Array),ce(this,jn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xI(e):e;ce(this,Bn,qie([F(this,Bn,"f"),n]));const r=[];let i;for(;(i=Gie(F(this,Bn,"f"),F(this,jn,"f")))!=null;){if(i.carriage&&F(this,jn,"f")==null){ce(this,jn,i.index);continue}if(F(this,jn,"f")!=null&&(i.index!==F(this,jn,"f")+1||i.carriage)){r.push(pk(F(this,Bn,"f").subarray(0,F(this,jn,"f")-1))),ce(this,Bn,F(this,Bn,"f").subarray(F(this,jn,"f"))),ce(this,jn,null);continue}const s=F(this,jn,"f")!==null?i.preceding-1:i.preceding,o=pk(F(this,Bn,"f").subarray(0,s));r.push(o),ce(this,Bn,F(this,Bn,"f").subarray(i.index)),ce(this,jn,null)}return r}flush(){return F(this,Bn,"f").length?this.decode(`
`):[]}}Bn=new WeakMap,jn=new WeakMap;dv.NEWLINE_CHARS=new Set([`
`,"\r"]);dv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Gie(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Xie(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Zg={off:0,error:200,warn:300,info:400,debug:500},mk=(t,e,n)=>{if(t){if(Pie(Zg,t))return t;Kt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Zg))}`)}};function fh(){}function Mp(t,e,n){return!e||Zg[t]>Zg[n]?fh:e[t].bind(e)}const Qie={error:fh,warn:fh,info:fh,debug:fh};let gk=new WeakMap;function Kt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Qie;const r=gk.get(e);if(r&&r[0]===n)return r[1];const i={error:Mp("error",e,n),warn:Mp("warn",e,n),info:Mp("info",e,n),debug:Mp("debug",e,n)};return gk.set(e,[n,i]),i}const oa=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Yc;class hi{constructor(e,n,r){this.iterator=e,Yc.set(this,void 0),this.controller=n,ce(this,Yc,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Kt(r):console;async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of Yie(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(c){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),c}if(u&&u.error)throw new Yt(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(l.event=="error")throw new Yt(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(H0(l))return;throw l}finally{a||n.abort()}}return new hi(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new dv,l=HB(e);for await(const u of l)for(const c of a.decode(u))yield c;for(const u of a.flush())yield u}async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of s())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(H0(l))return;throw l}finally{a||n.abort()}}return new hi(o,n,r)}[(Yc=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new hi(()=>i(e),this.controller,F(this,Yc,"f")),new hi(()=>i(n),this.controller,F(this,Yc,"f"))]}toReadableStream(){const e=this;let n;return zB({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=xI(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*Yie(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new oe("Attempted to iterate over a response with no body");const n=new Zie,r=new dv,i=HB(t.body);for await(const s of Jie(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*Jie(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?xI(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=Xie(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class Zie{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=ese(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function ese(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function YB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var d;if(e.options.stream)return Kt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):hi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),l=(d=a==null?void 0:a.split(";")[0])==null?void 0:d.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const f=await n.json();return JB(f,n)}return await n.text()})();return Kt(t).debug(`[${r}] response parsed`,oa({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function JB(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ph;class fv extends Promise{constructor(e,n,r=YB){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,ph.set(this,void 0),ce(this,ph,e)}_thenUnwrap(e){return new fv(F(this,ph,"f"),this.responsePromise,async(n,r)=>JB(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(F(this,ph,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ph=new WeakMap;var Np;class AI{constructor(e,n,r,i){Np.set(this,void 0),ce(this,Np,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await F(this,Np,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Np=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class tse extends fv{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await YB(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class pv extends AI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class It extends AI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...$B(this.options.query),after:n}}:null}}class ey extends AI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...$B(this.options.query),after:e}}:null}}const ZB=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Qh(t,e,n){return ZB(),new File(t,e??"unknown_file",n)}function Cm(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const PI=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",yk=async(t,e)=>G0(t.body)?{...t,body:await ej(t.body,e)}:t,Qa=async(t,e)=>({...t,body:await ej(t.body,e)}),vk=new WeakMap;function nse(t){const e=typeof t=="function"?t:t.fetch,n=vk.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return vk.set(e,r),r}const ej=async(t,e)=>{if(!await nse(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>X0(n,r,i))),n},tj=t=>t instanceof Blob&&"name"in t,rse=t=>typeof t=="object"&&t!==null&&(t instanceof Response||PI(t)||tj(t)),G0=t=>{if(rse(t))return!0;if(Array.isArray(t))return t.some(G0);if(t&&typeof t=="object"){for(const e in t)if(G0(t[e]))return!0}return!1},X0=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Qh([await n.blob()],Cm(n)));else if(PI(n))t.append(e,Qh([await new Response(WB(n)).blob()],Cm(n)));else if(tj(n))t.append(e,n,Cm(n));else if(Array.isArray(n))await Promise.all(n.map(r=>X0(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>X0(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},nj=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ise=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&nj(t),sse=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function ose(t,e,n){if(ZB(),t=await t,ise(t))return t instanceof File?t:Qh([await t.arrayBuffer()],t.name);if(sse(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Qh(await Q0(i),e,n)}const r=await Q0(t);if(e||(e=Cm(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return Qh(r,e,n)}async function Q0(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(nj(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(PI(t))for await(const r of t)e.push(...await Q0(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${ase(t)}`)}return e}function ase(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class se{constructor(e){this._client=e}}function rj(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const _k=Object.freeze(Object.create(null)),lse=(t=rj)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((c,d,f)=>{var S;/[?#]/.test(d)&&(i=!0);const p=r[f];let g=(i?encodeURIComponent:t)(""+p);return f!==r.length&&(p==null||typeof p=="object"&&p.toString===((S=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??_k)??_k))==null?void 0:S.toString))&&(g=p+"",s.push({start:c.length+d.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),c+d+(f===r.length?"":g)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((c,d)=>c.start-d.start),s.length>0){let c=0;const d=s.reduce((f,p)=>{const g=" ".repeat(p.start-c),S="^".repeat(p.length);return c=p.start+p.length,f+g+S},"");throw new oe(`Path parameters result in path with invalid segments:
${s.map(f=>f.error).join(`
`)}
${o}
${d}`)}return o},z=lse(rj);let ij=class extends se{list(e,n={},r){return this._client.getAPIList(z`/chat/completions/${e}/messages`,It,{query:n,...r})}};function ty(t){return t!==void 0&&"function"in t&&t.function!==void 0}function kI(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Tf(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function use(t,e){return!e||!sj(e)?{...t,choices:t.choices.map(n=>(oj(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:DI(t,e)}function DI(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new jB;if(r.finish_reason==="content_filter")throw new UB;return oj(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>hse(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?cse(e,r.message.content):null}}});return{...t,choices:n}}function cse(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function hse(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return ty(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Tf(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function dse(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return ty(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return ty(n)&&(Tf(n)||(n==null?void 0:n.function.strict)||!1)}function sj(t){var e;return kI(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Tf(n)||n.type==="function"&&n.function.strict===!0))??!1}function oj(t){for(const e of t||[])if(e.type!=="function")throw new oe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function fse(t){for(const e of t??[]){if(e.type!=="function")throw new oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const ny=t=>(t==null?void 0:t.role)==="assistant",aj=t=>(t==null?void 0:t.role)==="tool";var Y0,xm,Am,mh,gh,Pm,yh,Mi,vh,ry,iy,Fl,lj;class OI{constructor(){Y0.add(this),this.controller=new AbortController,xm.set(this,void 0),Am.set(this,()=>{}),mh.set(this,()=>{}),gh.set(this,void 0),Pm.set(this,()=>{}),yh.set(this,()=>{}),Mi.set(this,{}),vh.set(this,!1),ry.set(this,!1),iy.set(this,!1),Fl.set(this,!1),ce(this,xm,new Promise((e,n)=>{ce(this,Am,e,"f"),ce(this,mh,n,"f")})),ce(this,gh,new Promise((e,n)=>{ce(this,Pm,e,"f"),ce(this,yh,n,"f")})),F(this,xm,"f").catch(()=>{}),F(this,gh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},F(this,Y0,"m",lj).bind(this))},0)}_connected(){this.ended||(F(this,Am,"f").call(this),this._emit("connect"))}get ended(){return F(this,vh,"f")}get errored(){return F(this,ry,"f")}get aborted(){return F(this,iy,"f")}abort(){this.controller.abort()}on(e,n){return(F(this,Mi,"f")[e]||(F(this,Mi,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=F(this,Mi,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(F(this,Mi,"f")[e]||(F(this,Mi,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ce(this,Fl,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ce(this,Fl,!0),await F(this,gh,"f")}_emit(e,...n){if(F(this,vh,"f"))return;e==="end"&&(ce(this,vh,!0),F(this,Pm,"f").call(this));const r=F(this,Mi,"f")[e];if(r&&(F(this,Mi,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!F(this,Fl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,mh,"f").call(this,i),F(this,yh,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!F(this,Fl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,mh,"f").call(this,i),F(this,yh,"f").call(this,i),this._emit("end")}}_emitFinal(){}}xm=new WeakMap,Am=new WeakMap,mh=new WeakMap,gh=new WeakMap,Pm=new WeakMap,yh=new WeakMap,Mi=new WeakMap,vh=new WeakMap,ry=new WeakMap,iy=new WeakMap,Fl=new WeakMap,Y0=new WeakSet,lj=function(e){if(ce(this,ry,!0),e instanceof Error&&e.name==="AbortError"&&(e=new dr),e instanceof dr)return ce(this,iy,!0),this._emit("abort",e);if(e instanceof oe)return this._emit("error",e);if(e instanceof Error){const n=new oe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new oe(String(e)))};function pse(t){return typeof t.parse=="function"}var fn,J0,sy,Z0,eE,tE,uj,cj;const mse=10;class hj extends OI{constructor(){super(...arguments),fn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),aj(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(ny(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),F(this,fn,"m",J0).call(this)}async finalMessage(){return await this.done(),F(this,fn,"m",sy).call(this)}async finalFunctionToolCall(){return await this.done(),F(this,fn,"m",Z0).call(this)}async finalFunctionToolCallResult(){return await this.done(),F(this,fn,"m",eE).call(this)}async totalUsage(){return await this.done(),F(this,fn,"m",tE).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=F(this,fn,"m",sy).call(this);n&&this._emit("finalMessage",n);const r=F(this,fn,"m",J0).call(this);r&&this._emit("finalContent",r);const i=F(this,fn,"m",Z0).call(this);i&&this._emit("finalFunctionToolCall",i);const s=F(this,fn,"m",eE).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",F(this,fn,"m",tE).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,fn,"m",uj).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(DI(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var p,g,S;const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s.type==="function"&&((p=s==null?void 0:s.function)==null?void 0:p.name),{maxChatCompletions:u=mse}=r||{},c=n.tools.map(T=>{if(Tf(T)){if(!T.$callback)throw new oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:T.$callback,name:T.function.name,description:T.function.description||"",parameters:T.function.parameters,parse:T.$parseRaw,strict:!0}}}return T}),d={};for(const T of c)T.type==="function"&&(d[T.function.name||T.function.function.name]=T.function);const f="tools"in n?c.map(T=>T.type==="function"?{type:"function",function:{name:T.function.name||T.function.function.name,parameters:T.function.parameters,description:T.function.description,strict:T.function.strict}}:T):void 0;for(const T of n.messages)this._addMessage(T,!1);for(let T=0;T<u;++T){const y=(g=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:f,messages:[...this.messages]},r)).choices[0])==null?void 0:g.message;if(!y)throw new oe("missing message in ChatCompletion response");if(!((S=y.tool_calls)!=null&&S.length))return;for(const v of y.tool_calls){if(v.type!=="function")continue;const C=v.id,{name:D,arguments:O}=v.function,b=d[D];if(b){if(l&&l!==D){const P=`Invalid tool_call: ${JSON.stringify(D)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:C,content:P});continue}}else{const P=`Invalid tool_call: ${JSON.stringify(D)}. Available options are: ${Object.keys(d).map(N=>JSON.stringify(N)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:C,content:P});continue}let E;try{E=pse(b)?await b.parse(O):O}catch(P){const N=P instanceof Error?P.message:String(P);this._addMessage({role:i,tool_call_id:C,content:N});continue}const R=await b.function(E,this),x=F(this,fn,"m",cj).call(this,R);if(this._addMessage({role:i,tool_call_id:C,content:x}),l)return}}}}fn=new WeakSet,J0=function(){return F(this,fn,"m",sy).call(this).content??null},sy=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(ny(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new oe("stream ended without producing a ChatCompletionMessage with role=assistant")},Z0=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(ny(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},eE=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(aj(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},tE=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},uj=function(e){if(e.n!=null&&e.n>1)throw new oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},cj=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class MI extends hj{static runTools(e,n,r){const i=new MI,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),ny(e)&&e.content&&this._emit("content",e.content)}}const dj=1,fj=2,pj=4,mj=8,gj=16,yj=32,vj=64,_j=128,wj=256,Sj=_j|wj,Ej=gj|yj|Sj|vj,Tj=dj|fj|Ej,bj=pj|mj,gse=Tj|bj,Bt={STR:dj,NUM:fj,ARR:pj,OBJ:mj,NULL:gj,BOOL:yj,NAN:vj,INFINITY:_j,MINUS_INFINITY:wj,INF:Sj,SPECIAL:Ej,ATOM:Tj,COLLECTION:bj,ALL:gse};class yse extends Error{}class vse extends Error{}function _se(t,e=Bt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return wse(t.trim(),e)}const wse=(t,e)=>{const n=t.length;let r=0;const i=f=>{throw new yse(`${f} at position ${r}`)},s=f=>{throw new vse(`${f} at position ${r}`)},o=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||Bt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Bt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Bt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Bt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Bt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Bt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):c()),a=()=>{const f=r;let p=!1;for(r++;r<n&&(t[r]!=='"'||p&&t[r-1]==="\\");)p=t[r]==="\\"?!p:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(f,++r-Number(p)))}catch(g){s(String(g))}else if(Bt.STR&e)try{return JSON.parse(t.substring(f,r-Number(p))+'"')}catch{return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;t[r]!=="}";){if(d(),r>=n&&Bt.OBJ&e)return f;const p=a();d(),r++;try{const g=o();Object.defineProperty(f,p,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(Bt.OBJ&e)return f;throw g}d(),t[r]===","&&r++}}catch{if(Bt.OBJ&e)return f;i("Expected '}' at end of object")}return r++,f},u=()=>{r++;const f=[];try{for(;t[r]!=="]";)f.push(o()),d(),t[r]===","&&r++}catch{if(Bt.ARR&e)return f;i("Expected ']' at end of array")}return r++,f},c=()=>{if(r===0){t==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(Bt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(p))}}const f=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Bt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(f,r))}catch{t.substring(f,r)==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(g){s(String(g))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},wk=t=>_se(t,Bt.ALL^Bt.NUM);var Ct,Oi,xl,Vs,lw,Lp,uw,cw,hw,Vp,dw,Sk;class Hd extends hj{constructor(e){super(),Ct.add(this),Oi.set(this,void 0),xl.set(this,void 0),Vs.set(this,void 0),ce(this,Oi,e),ce(this,xl,[])}get currentChatCompletionSnapshot(){return F(this,Vs,"f")}static fromReadableStream(e){const n=new Hd(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Hd(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,Ct,"m",lw).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)F(this,Ct,"m",uw).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new dr;return this._addChatCompletion(F(this,Ct,"m",Vp).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),F(this,Ct,"m",lw).call(this),this._connected();const i=hi.fromReadableStream(e,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(F(this,Ct,"m",Vp).call(this)),F(this,Ct,"m",uw).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new dr;return this._addChatCompletion(F(this,Ct,"m",Vp).call(this))}[(Oi=new WeakMap,xl=new WeakMap,Vs=new WeakMap,Ct=new WeakSet,lw=function(){this.ended||ce(this,Vs,void 0)},Lp=function(n){let r=F(this,xl,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},F(this,xl,"f")[n.index]=r,r)},uw=function(n){var i,s,o,a,l,u,c,d,f,p,g,S,T,_,y;if(this.ended)return;const r=F(this,Ct,"m",Sk).call(this,n);this._emit("chunk",n,r);for(const v of n.choices){const C=r.choices[v.index];v.delta.content!=null&&((i=C.message)==null?void 0:i.role)==="assistant"&&((s=C.message)!=null&&s.content)&&(this._emit("content",v.delta.content,C.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:C.message.content,parsed:C.message.parsed})),v.delta.refusal!=null&&((o=C.message)==null?void 0:o.role)==="assistant"&&((a=C.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:C.message.refusal}),((l=v.logprobs)==null?void 0:l.content)!=null&&((u=C.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=v.logprobs)==null?void 0:c.content,snapshot:((d=C.logprobs)==null?void 0:d.content)??[]}),((f=v.logprobs)==null?void 0:f.refusal)!=null&&((p=C.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=v.logprobs)==null?void 0:g.refusal,snapshot:((S=C.logprobs)==null?void 0:S.refusal)??[]});const D=F(this,Ct,"m",Lp).call(this,C);C.finish_reason&&(F(this,Ct,"m",hw).call(this,C),D.current_tool_call_index!=null&&F(this,Ct,"m",cw).call(this,C,D.current_tool_call_index));for(const O of v.delta.tool_calls??[])D.current_tool_call_index!==O.index&&(F(this,Ct,"m",hw).call(this,C),D.current_tool_call_index!=null&&F(this,Ct,"m",cw).call(this,C,D.current_tool_call_index)),D.current_tool_call_index=O.index;for(const O of v.delta.tool_calls??[]){const b=(T=C.message.tool_calls)==null?void 0:T[O.index];b!=null&&b.type&&((b==null?void 0:b.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(_=b.function)==null?void 0:_.name,index:O.index,arguments:b.function.arguments,parsed_arguments:b.function.parsed_arguments,arguments_delta:((y=O.function)==null?void 0:y.arguments)??""}):(b==null||b.type,void 0))}}},cw=function(n,r){var o,a,l;if(F(this,Ct,"m",Lp).call(this,n).done_tool_calls.has(r))return;const s=(o=n.message.tool_calls)==null?void 0:o[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(a=F(this,Oi,"f"))==null?void 0:a.tools)==null?void 0:l.find(c=>ty(c)&&c.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Tf(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},hw=function(n){var i,s;const r=F(this,Ct,"m",Lp).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=F(this,Ct,"m",dw).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Vp=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,Vs,"f");if(!n)throw new oe("request ended without sending any chunks");return ce(this,Vs,void 0),ce(this,xl,[]),Sse(n,F(this,Oi,"f"))},dw=function(){var r;const n=(r=F(this,Oi,"f"))==null?void 0:r.response_format;return kI(n)?n:null},Sk=function(n){var r,i,s,o;let a=F(this,Vs,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=ce(this,Vs,{...u,choices:[]});for(const{delta:c,finish_reason:d,index:f,logprobs:p=null,...g}of n.choices){let S=a.choices[f];if(S||(S=a.choices[f]={finish_reason:d,index:f,message:{},logprobs:p,...g}),p)if(!S.logprobs)S.logprobs=Object.assign({},p);else{const{content:O,refusal:b,...E}=p;Object.assign(S.logprobs,E),O&&((r=S.logprobs).content??(r.content=[]),S.logprobs.content.push(...O)),b&&((i=S.logprobs).refusal??(i.refusal=[]),S.logprobs.refusal.push(...b))}if(d&&(S.finish_reason=d,F(this,Oi,"f")&&sj(F(this,Oi,"f")))){if(d==="length")throw new jB;if(d==="content_filter")throw new UB}if(Object.assign(S,g),!c)continue;const{content:T,refusal:_,function_call:y,role:v,tool_calls:C,...D}=c;if(Object.assign(S.message,D),_&&(S.message.refusal=(S.message.refusal||"")+_),v&&(S.message.role=v),y&&(S.message.function_call?(y.name&&(S.message.function_call.name=y.name),y.arguments&&((s=S.message.function_call).arguments??(s.arguments=""),S.message.function_call.arguments+=y.arguments)):S.message.function_call=y),T&&(S.message.content=(S.message.content||"")+T,!S.message.refusal&&F(this,Ct,"m",dw).call(this)&&(S.message.parsed=wk(S.message.content))),C){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:O,id:b,type:E,function:R,...x}of C){const P=(o=S.message.tool_calls)[O]??(o[O]={});Object.assign(P,x),b&&(P.id=b),E&&(P.type=E),R&&(P.function??(P.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(P.function.name=R.name),R!=null&&R.arguments&&(P.function.arguments+=R.arguments,dse(F(this,Oi,"f"),P)&&(P.function.parsed_arguments=wk(P.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new hi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Sse(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:f,...p})=>{if(!c)throw new oe(`missing finish_reason for choice ${d}`);const{content:g=null,function_call:S,tool_calls:T,..._}=u,y=u.role;if(!y)throw new oe(`missing role for choice ${d}`);if(S){const{arguments:v,name:C}=S;if(v==null)throw new oe(`missing function_call.arguments for choice ${d}`);if(!C)throw new oe(`missing function_call.name for choice ${d}`);return{...p,message:{content:g,function_call:{arguments:v,name:C},role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}return T?{...p,index:d,finish_reason:c,logprobs:f,message:{..._,role:y,content:g,refusal:u.refusal??null,tool_calls:T.map((v,C)=>{const{function:D,type:O,id:b,...E}=v,{arguments:R,name:x,...P}=D||{};if(b==null)throw new oe(`missing choices[${d}].tool_calls[${C}].id
${Fp(t)}`);if(O==null)throw new oe(`missing choices[${d}].tool_calls[${C}].type
${Fp(t)}`);if(x==null)throw new oe(`missing choices[${d}].tool_calls[${C}].function.name
${Fp(t)}`);if(R==null)throw new oe(`missing choices[${d}].tool_calls[${C}].function.arguments
${Fp(t)}`);return{...E,id:b,type:O,function:{...P,name:x,arguments:R}}})}}:{...p,message:{..._,content:g,role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return use(l,e)}function Fp(t){return JSON.stringify(t)}class oy extends Hd{static fromReadableStream(e){const n=new oy(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new oy(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let NI=class extends se{constructor(){super(...arguments),this.messages=new ij(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(z`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(z`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/chat/completions/${e}`,n)}parse(e,n){return fse(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>DI(r,e))}runTools(e,n){return e.stream?oy.runTools(this._client,e,n):MI.runTools(this._client,e,n)}stream(e,n){return Hd.createChatCompletion(this._client,e,n)}};NI.Messages=ij;class LI extends se{constructor(){super(...arguments),this.completions=new NI(this._client)}}LI.Completions=NI;const Ij=Symbol("brand.privateNullableHeaders");function*Ese(t){if(!t)return;if(Ij in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():sk(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=sk(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const te=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Ese(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[Ij]:!0,values:e,nulls:n}};class Rj extends se{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:te([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class Cj extends se{create(e,n){return this._client.post("/audio/transcriptions",Qa({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class xj extends se{create(e,n){return this._client.post("/audio/translations",Qa({body:e,...n,__metadata:{model:e.model}},this._client))}}class bf extends se{constructor(){super(...arguments),this.transcriptions=new Cj(this._client),this.translations=new xj(this._client),this.speech=new Rj(this._client)}}bf.Transcriptions=Cj;bf.Translations=xj;bf.Speech=Rj;class Aj extends se{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(z`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",It,{query:e,...n})}cancel(e,n){return this._client.post(z`/batches/${e}/cancel`,n)}}class Pj extends se{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/assistants/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",It,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let kj=class extends se{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class Dj extends se{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let mv=class extends se{constructor(){super(...arguments),this.sessions=new kj(this._client),this.transcriptionSessions=new Dj(this._client)}};mv.Sessions=kj;mv.TranscriptionSessions=Dj;class Oj extends se{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(z`/chatkit/sessions/${e}/cancel`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let Mj=class extends se{retrieve(e,n){return this._client.get(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",ey,{query:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(z`/chatkit/threads/${e}/items`,ey,{query:n,...r,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class gv extends se{constructor(){super(...arguments),this.sessions=new Oj(this._client),this.threads=new Mj(this._client)}}gv.Sessions=Oj;gv.Threads=Mj;class Nj extends se{create(e,n,r){return this._client.post(z`/threads/${e}/messages`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/messages/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/messages`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Lj extends se{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(z`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(z`/threads/${i}/runs/${e}/steps`,It,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const Tse=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var fw={};const Al=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=fw==null?void 0:fw[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var qt,Sa,nE,ti,km,Dr,Ea,su,ha,ay,Un,Dm,Om,Yh,_h,wh,Ek,Tk,bk,Ik,Rk,Ck,xk;class Jh extends OI{constructor(){super(...arguments),qt.add(this),nE.set(this,[]),ti.set(this,{}),km.set(this,{}),Dr.set(this,void 0),Ea.set(this,void 0),su.set(this,void 0),ha.set(this,void 0),ay.set(this,void 0),Un.set(this,void 0),Dm.set(this,void 0),Om.set(this,void 0),Yh.set(this,void 0)}[(nE=new WeakMap,ti=new WeakMap,km=new WeakMap,Dr=new WeakMap,Ea=new WeakMap,su=new WeakMap,ha=new WeakMap,ay=new WeakMap,Un=new WeakMap,Dm=new WeakMap,Om=new WeakMap,Yh=new WeakMap,qt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Sa;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=hi.fromReadableStream(e,this.controller);for await(const o of i)F(this,qt,"m",_h).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new dr;return this._addRun(F(this,qt,"m",wh).call(this))}toReadableStream(){return new hi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new Sa;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,qt,"m",_h).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new dr;return this._addRun(F(this,qt,"m",wh).call(this))}static createThreadAssistantStream(e,n,r){const i=new Sa;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new Sa;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return F(this,Dm,"f")}currentRun(){return F(this,Om,"f")}currentMessageSnapshot(){return F(this,Dr,"f")}currentRunStepSnapshot(){return F(this,Yh,"f")}async finalRunSteps(){return await this.done(),Object.values(F(this,ti,"f"))}async finalMessages(){return await this.done(),Object.values(F(this,km,"f"))}async finalRun(){if(await this.done(),!F(this,Ea,"f"))throw Error("Final run was not received.");return F(this,Ea,"f")}async _createThreadAssistantStream(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of o)F(this,qt,"m",_h).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new dr;return this._addRun(F(this,qt,"m",wh).call(this))}async _createAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,qt,"m",_h).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new dr;return this._addRun(F(this,qt,"m",wh).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(sw(s)&&sw(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!sw(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];l==null?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}Sa=Jh,_h=function(e){if(!this.ended)switch(ce(this,Dm,e),F(this,qt,"m",bk).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":F(this,qt,"m",xk).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":F(this,qt,"m",Tk).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":F(this,qt,"m",Ek).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wh=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");if(!F(this,Ea,"f"))throw Error("Final run has not been received");return F(this,Ea,"f")},Ek=function(e){const[n,r]=F(this,qt,"m",Rk).call(this,e,F(this,Dr,"f"));ce(this,Dr,n),F(this,km,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=F(this,su,"f")){if(F(this,ha,"f"))switch(F(this,ha,"f").type){case"text":this._emit("textDone",F(this,ha,"f").text,F(this,Dr,"f"));break;case"image_file":this._emit("imageFileDone",F(this,ha,"f").image_file,F(this,Dr,"f"));break}ce(this,su,i.index)}ce(this,ha,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(F(this,su,"f")!==void 0){const i=e.data.content[F(this,su,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,F(this,Dr,"f"));break;case"text":this._emit("textDone",i.text,F(this,Dr,"f"));break}}F(this,Dr,"f")&&this._emit("messageDone",e.data),ce(this,Dr,void 0)}},Tk=function(e){const n=F(this,qt,"m",Ik).call(this,e);switch(ce(this,Yh,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==F(this,ay,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(F(this,Un,"f")&&this._emit("toolCallDone",F(this,Un,"f")),ce(this,ay,s.index),ce(this,Un,n.step_details.tool_calls[s.index]),F(this,Un,"f")&&this._emit("toolCallCreated",F(this,Un,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,Yh,void 0),e.data.step_details.type=="tool_calls"&&F(this,Un,"f")&&(this._emit("toolCallDone",F(this,Un,"f")),ce(this,Un,void 0)),this._emit("runStepDone",e.data,n);break}},bk=function(e){F(this,nE,"f").push(e),this._emit("event",e)},Ik=function(e){switch(e.event){case"thread.run.step.created":return F(this,ti,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=F(this,ti,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Sa.accumulateDelta(n,r.delta);F(this,ti,"f")[e.data.id]=i}return F(this,ti,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":F(this,ti,"f")[e.data.id]=e.data;break}if(F(this,ti,"f")[e.data.id])return F(this,ti,"f")[e.data.id];throw new Error("No snapshot available")},Rk=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=F(this,qt,"m",Ck).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ck=function(e,n){return Sa.accumulateDelta(n,e)},xk=function(e){switch(ce(this,Om,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ce(this,Ea,e.data),F(this,Un,"f")&&(this._emit("toolCallDone",F(this,Un,"f")),ce(this,Un,void 0));break}};let VI=class extends se{constructor(){super(...arguments),this.steps=new Lj(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/runs/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/runs`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(z`/threads/${i}/runs/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return Jh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Ef(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return Jh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return Jh.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};VI.Steps=Lj;class yv extends se{constructor(){super(...arguments),this.runs=new VI(this._client),this.messages=new Nj(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/threads/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Jh.createThreadAssistantStream(e,this._client.beta.threads,n)}}yv.Runs=VI;yv.Messages=Nj;class hc extends se{constructor(){super(...arguments),this.realtime=new mv(this._client),this.chatkit=new gv(this._client),this.assistants=new Pj(this._client),this.threads=new yv(this._client)}}hc.Realtime=mv;hc.ChatKit=gv;hc.Assistants=Pj;hc.Threads=yv;class Vj extends se{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class Fj extends se{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}/content`,{...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let FI=class extends se{constructor(){super(...arguments),this.content=new Fj(this._client)}create(e,n,r){return this._client.post(z`/containers/${e}/files`,Qa({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/containers/${e}/files`,It,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(z`/containers/${i}/files/${e}`,{...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}};FI.Content=Fj;class BI extends se{constructor(){super(...arguments),this.files=new FI(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(z`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/containers/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}}BI.Files=FI;class Bj extends se{create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(z`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(z`/conversations/${e}/items`,ey,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(z`/conversations/${i}/items/${e}`,r)}}class jI extends se{constructor(){super(...arguments),this.items=new Bj(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(z`/conversations/${e}`,n)}update(e,n,r){return this._client.post(z`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(z`/conversations/${e}`,n)}}jI.Items=Bj;class jj extends se{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Kt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Kt(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=Tse(l)}),o)))}}class Uj extends se{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(z`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(z`/evals/${i}/runs/${e}/output_items`,It,{query:s,...r})}}class UI extends se{constructor(){super(...arguments),this.outputItems=new Uj(this._client)}create(e,n,r){return this._client.post(z`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(z`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/evals/${e}/runs`,It,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(z`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(z`/evals/${i}/runs/${e}`,r)}}UI.OutputItems=Uj;class $I extends se{constructor(){super(...arguments),this.runs=new UI(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(z`/evals/${e}`,n)}update(e,n,r){return this._client.post(z`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/evals/${e}`,n)}}$I.Runs=UI;let $j=class extends se{create(e,n){return this._client.post("/files",Qa({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/files/${e}`,n)}content(e,n){return this._client.get(z`/files/${e}/content`,{...n,headers:te([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Ef(n),o=await this.retrieve(e),Date.now()-s>r)throw new CI({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class zj extends se{}let Wj=class extends se{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class zI extends se{constructor(){super(...arguments),this.graders=new Wj(this._client)}}zI.Graders=Wj;class Hj extends se{create(e,n,r){return this._client.getAPIList(z`/fine_tuning/checkpoints/${e}/permissions`,pv,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(z`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(z`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let WI=class extends se{constructor(){super(...arguments),this.permissions=new Hj(this._client)}};WI.Permissions=Hj;class Kj extends se{list(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/checkpoints`,It,{query:n,...r})}}class HI extends se{constructor(){super(...arguments),this.checkpoints=new Kj(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(z`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",It,{query:e,...n})}cancel(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/events`,It,{query:n,...r})}pause(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/resume`,n)}}HI.Checkpoints=Kj;class dc extends se{constructor(){super(...arguments),this.methods=new zj(this._client),this.jobs=new HI(this._client),this.checkpoints=new WI(this._client),this.alpha=new zI(this._client)}}dc.Methods=zj;dc.Jobs=HI;dc.Checkpoints=WI;dc.Alpha=zI;class qj extends se{}class KI extends se{constructor(){super(...arguments),this.graderModels=new qj(this._client)}}KI.GraderModels=qj;class Gj extends se{createVariation(e,n){return this._client.post("/images/variations",Qa({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Qa({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class Xj extends se{retrieve(e,n){return this._client.get(z`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",pv,e)}delete(e,n){return this._client.delete(z`/models/${e}`,n)}}class Qj extends se{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class Yj extends se{accept(e,n,r){return this._client.post(z`/realtime/calls/${e}/accept`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(z`/realtime/calls/${e}/hangup`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(z`/realtime/calls/${e}/refer`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(z`/realtime/calls/${e}/reject`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}}class Jj extends se{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class vv extends se{constructor(){super(...arguments),this.clientSecrets=new Jj(this._client),this.calls=new Yj(this._client)}}vv.ClientSecrets=Jj;vv.Calls=Yj;function bse(t,e){return!e||!Rse(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:Zj(t,e)}function Zj(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Ase(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:Ise(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||rE(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function Ise(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function Rse(t){var e;return!!kI((e=t.text)==null?void 0:e.format)}function Cse(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function xse(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Ase(t,e){const n=xse(t.tools??[],e.name);return{...e,...e,parsed_arguments:Cse(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function rE(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Pl,Bp,Fs,jp,Ak,Pk,kk,Dk;class qI extends OI{constructor(e){super(),Pl.add(this),Bp.set(this,void 0),Fs.set(this,void 0),jp.set(this,void 0),ce(this,Bp,e)}static createResponse(e,n,r){const i=new qI(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,Pl,"m",Ak).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of s)F(this,Pl,"m",Pk).call(this,l,o);if((a=s.controller.signal)!=null&&a.aborted)throw new dr;return F(this,Pl,"m",kk).call(this)}[(Bp=new WeakMap,Fs=new WeakMap,jp=new WeakMap,Pl=new WeakSet,Ak=function(){this.ended||ce(this,Fs,void 0)},Pk=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=F(this,Pl,"m",Dk).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new oe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},kk=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,Fs,"f");if(!n)throw new oe("request ended without sending any events");ce(this,Fs,void 0);const r=Pse(n,F(this,Bp,"f"));return ce(this,jp,r),r},Dk=function(n){var i;let r=F(this,Fs,"f");if(!r){if(n.type!=="response.created")throw new oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ce(this,Fs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);const o=s.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?s.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const o=(i=s.content)==null?void 0:i[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new oe(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{ce(this,Fs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=F(this,jp,"f");if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}}function Pse(t,e){return bse(t,e)}class eU extends se{list(e,n={},r){return this._client.getAPIList(z`/responses/${e}/input_items`,It,{query:n,...r})}}class tU extends se{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class _v extends se{constructor(){super(...arguments),this.inputItems=new eU(this._client),this.inputTokens=new tU(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&rE(r),r))}retrieve(e,n={},r){return this._client.get(z`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&rE(i),i))}delete(e,n){return this._client.delete(z`/responses/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>Zj(r,e))}stream(e,n){return qI.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(z`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}_v.InputItems=eU;_v.InputTokens=tU;class nU extends se{create(e,n,r){return this._client.post(z`/uploads/${e}/parts`,Qa({body:n,...r},this._client))}}class GI extends se{constructor(){super(...arguments),this.parts=new nU(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(z`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(z`/uploads/${e}/complete`,{body:n,...r})}}GI.Parts=nU;const kse=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class rU extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/file_batches`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/file_batches/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(z`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(z`/vector_stores/${i}/file_batches/${e}/files`,It,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Ef(l);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(s,n.length),a=this._client,l=n.values(),u=[...r];async function c(f){for(let p of f){const g=await a.files.create({file:p,purpose:"assistants"},i);u.push(g.id)}}const d=Array(o).fill(l).map(c);return await kse(d),await this.createAndPoll(e,{file_ids:u})}}class iU extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/files`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(z`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/vector_stores/${e}/files`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),a=o.data;switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Ef(l);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(z`/vector_stores/${i}/files/${e}/content`,pv,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class wv extends se{constructor(){super(...arguments),this.files=new iU(this._client),this.fileBatches=new rU(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/vector_stores/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",It,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(z`/vector_stores/${e}/search`,pv,{body:n,method:"post",...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}wv.Files=iU;wv.FileBatches=rU;class sU extends se{create(e,n){return this._client.post("/videos",yk({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",ey,{query:e,...n})}delete(e,n){return this._client.delete(z`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(z`/videos/${e}/content`,{query:n,...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(z`/videos/${e}/remix`,yk({body:n,...r},this._client))}}var Bl,oU,Mm;class aU extends se{constructor(){super(...arguments),Bl.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");F(this,Bl,"m",oU).call(this,r);const s=te([n]).values,o=F(this,Bl,"m",Mm).call(this,s,"webhook-signature"),a=F(this,Bl,"m",Mm).call(this,s,"webhook-timestamp"),l=F(this,Bl,"m",Mm).call(this,s,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new dh("Invalid webhook timestamp format");const c=Math.floor(Date.now()/1e3);if(c-u>i)throw new dh("Webhook timestamp is too old");if(u>c+i)throw new dh("Webhook timestamp is too new");const d=o.split(" ").map(S=>S.startsWith("v1,")?S.substring(3):S),f=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),p=l?`${l}.${a}.${e}`:`${a}.${e}`,g=await crypto.subtle.importKey("raw",f,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const S of d)try{const T=Buffer.from(S,"base64");if(await crypto.subtle.verify("HMAC",g,T,new TextEncoder().encode(p)))return}catch{continue}throw new dh("The given webhook signature does not match the expected signature")}}Bl=new WeakSet,oU=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Mm=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var iE,XI,Nm,lU;class ve{constructor({baseURL:e=Al("OPENAI_BASE_URL"),apiKey:n=Al("OPENAI_API_KEY"),organization:r=Al("OPENAI_ORG_ID")??null,project:i=Al("OPENAI_PROJECT_ID")??null,webhookSecret:s=Al("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(iE.add(this),Nm.set(this,void 0),this.completions=new Vj(this),this.chat=new LI(this),this.embeddings=new jj(this),this.files=new $j(this),this.images=new Gj(this),this.audio=new bf(this),this.moderations=new Qj(this),this.models=new Xj(this),this.fineTuning=new dc(this),this.graders=new KI(this),this.vectorStores=new wv(this),this.webhooks=new aU(this),this.beta=new hc(this),this.batches=new Aj(this),this.uploads=new GI(this),this.responses=new _v(this),this.realtime=new vv(this),this.conversations=new jI(this),this.evals=new $I(this),this.containers=new BI(this),this.videos=new sU(this),n===void 0)throw new oe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Oie())throw new oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??XI.DEFAULT_TIMEOUT,this.logger=a.logger??console;const l="warn";this.logLevel=l,this.logLevel=mk(a.logLevel,"ClientOptions.logLevel",this)??mk(Al("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Fie(),ce(this,Nm,jie),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return te([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Kie(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Vl}`}defaultIdempotencyKey(){return`stainless-node-retry-${kB()}`}makeStatusError(e,n,r,i){return Yt.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof oe?r:new oe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new oe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!F(this,iE,"m",lU).call(this)&&r||this.baseURL,s=xie(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Aie(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new fv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var _,y;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:l}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Kt(this).debug(`[${u}] sending request`,oa({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),(_=i.signal)!=null&&_.aborted)throw new dr;const f=new AbortController,p=await this.fetchWithTimeout(a,o,l,f).catch(K0),g=Date.now();if(p instanceof globalThis.Error){const v=`retrying, ${n} attempts remaining`;if((y=i.signal)!=null&&y.aborted)throw new dr;const C=H0(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return Kt(this).info(`[${u}] connection ${C?"timed out":"failed"} - ${v}`),Kt(this).debug(`[${u}] connection ${C?"timed out":"failed"} (${v})`,oa({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),this.retryRequest(i,n,r??u);throw Kt(this).info(`[${u}] connection ${C?"timed out":"failed"} - error; no more retries left`),Kt(this).debug(`[${u}] connection ${C?"timed out":"failed"} (error; no more retries left)`,oa({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),C?new CI:new hv({cause:p})}const S=[...p.headers.entries()].filter(([v])=>v==="x-request-id").map(([v,C])=>", "+v+": "+JSON.stringify(C)).join(""),T=`[${u}${c}${S}] ${o.method} ${a} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${g-d}ms`;if(!p.ok){const v=await this.shouldRetry(p);if(n&&v){const R=`retrying, ${n} attempts remaining`;return await Bie(p.body),Kt(this).info(`${T} - ${R}`),Kt(this).debug(`[${u}] response error (${R})`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),this.retryRequest(i,n,r??u,p.headers)}const C=v?"error; no more retries left":"error; not retryable";Kt(this).info(`${T} - ${C}`);const D=await p.text().catch(R=>K0(R).message),O=Die(D),b=O?void 0:D;throw Kt(this).debug(`[${u}] response error (${C})`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:b,durationMs:Date.now()-d})),this.makeStatusError(p.status,O,b,p.headers)}return Kt(this).info(T),Kt(this).debug(`[${u}] response start`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),{response:p,options:i,controller:f,requestLogID:u,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new tse(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,c={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...a};o&&(c.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i==null?void 0:i.get("retry-after-ms");if(o){const l=parseFloat(o);Number.isNaN(l)||(s=l)}const a=i==null?void 0:i.get("retry-after");if(a&&!s){const l=parseFloat(a);Number.isNaN(l)?s=Date.parse(a)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Ef(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,l=this.buildURL(s,o,a);"timeout"in r&&kie("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:c}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=te([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Vie(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=te([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:WB(e)}:F(this,Nm,"f").call(this,{body:e,headers:r})}}XI=ve,Nm=new WeakMap,iE=new WeakSet,lU=function(){return this.baseURL!=="https://api.openai.com/v1"};ve.OpenAI=XI;ve.DEFAULT_TIMEOUT=6e5;ve.OpenAIError=oe;ve.APIError=Yt;ve.APIConnectionError=hv;ve.APIConnectionTimeoutError=CI;ve.APIUserAbortError=dr;ve.NotFoundError=NB;ve.ConflictError=LB;ve.RateLimitError=FB;ve.BadRequestError=DB;ve.AuthenticationError=OB;ve.InternalServerError=BB;ve.PermissionDeniedError=MB;ve.UnprocessableEntityError=VB;ve.InvalidWebhookSignatureError=dh;ve.toFile=ose;ve.Completions=Vj;ve.Chat=LI;ve.Embeddings=jj;ve.Files=$j;ve.Images=Gj;ve.Audio=bf;ve.Moderations=Qj;ve.Models=Xj;ve.FineTuning=dc;ve.Graders=KI;ve.VectorStores=wv;ve.Webhooks=aU;ve.Beta=hc;ve.Batches=Aj;ve.Uploads=GI;ve.Responses=_v;ve.Realtime=vv;ve.Conversations=jI;ve.Evals=$I;ve.Containers=BI;ve.Videos=sU;const Dse=()=>localStorage.getItem("openai_api_key"),uU=()=>{const t=Dse();if(!t)throw new Error("OpenAI API Key not found. Please add it in the Account settings.");return new ve({apiKey:t,dangerouslyAllowBrowser:!0})};async function Ose(t){try{const n=await uU().chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"Analyze this clothing item. Return a JSON object with the following fields: 'type' (e.g., shirt, pants, dress), 'color' (primary color), 'style' (e.g., casual, formal, sporty), 'tags' (array of 3-5 descriptive keywords), and 'refreshCycle' (suggested number of days before re-wearing, e.g., 1 for underwear, 7 for shirts, 14 for pants)."},{type:"image_url",image_url:{url:t}}]}],response_format:{type:"json_object"}});return JSON.parse(n.choices[0].message.content)}catch(e){return console.error("Error analyzing image:",e),{type:"unknown",color:"unknown",style:"unknown",tags:["manual-entry"],refreshCycle:7}}}async function cU(t,e){try{const n=t.map(a=>({id:a.id,type:a.type,color:a.color,tags:a.tags,style:a.style,rating:a.rating||3,wearCount:a.wearCount||0})),r=`
      I need 3 outfit suggestions from the following wardrobe items:
      ${JSON.stringify(n)}

      Criteria:
      - Destination: ${e.destination}
      - Temperature: ${e.temperature}
      - Style Preference: ${e.style}

      Rules:
      1. Prioritize items with higher 'rating'.
      2. Consider 'wearCount' - if an item has a high rating but low wear count, suggest it more.
      3. Ensure the outfits are appropriate for the temperature and destination.

      Please select 3 distinct outfits. For each outfit, provide:
      1. A short summary explaining why it fits the criteria.
      2. The list of item IDs used in the outfit.
      
      Return the result as a JSON object with a key "outfits" containing an array of the 3 suggestions.
    `,s=await uU().chat.completions.create({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful fashion stylist assistant."},{role:"user",content:r}],response_format:{type:"json_object"}});return JSON.parse(s.choices[0].message.content).outfits}catch(n){return console.error("Error generating outfits:",n),[]}}const Ok=(t,e=1024,n=1024)=>new Promise(r=>{let i=new Image;i.src=t,i.onload=()=>{let s=document.createElement("canvas"),o=i.width,a=i.height;o>a?o>e&&(a*=e/o,o=e):a>n&&(o*=n/a,a=n),s.width=o,s.height=a,s.getContext("2d").drawImage(i,0,0,o,a),r(s.toDataURL("image/jpeg",.7))}});function Mse(){const[t,e]=I.useState(null),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(null),l=I.useRef(null),{addItem:u}=cv(),c=Ju(),d=bi();I.useEffect(()=>{var T;(T=d.state)!=null&&T.image&&(async()=>{const y=await Ok(d.state.image);e(y),p(y)})()},[]);const f=T=>{const _=T.target.files[0];if(_){const y=new FileReader;y.onloadend=async()=>{const v=await Ok(y.result);e(v),p(v)},y.readAsDataURL(_)}},p=async T=>{r(!0);try{const _=await Ose(T);a(_)}catch(_){console.error("Analysis failed",_),alert("Failed to analyze image. Please try again.")}finally{r(!1)}},g=async()=>{if(t&&o&&!i){s(!0);const _=t.length*3/4/1024;console.log(`Attempting to save image. Size: ${_.toFixed(2)} KB`);try{u({imageUri:t,...o,lastWorn:null}).catch(y=>{console.error("Background save failed:",y)}),c("/closet")}catch(y){console.error("Failed to save item:",y),alert(`Failed to save item: ${y.message}.`),s(!1)}}},S=()=>{e(null),a(null),l.current&&l.current.click()};return M.jsxs(Lr,{style:{flex:1},contentContainerStyle:Me.container,children:[M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:l,style:{display:"none"},onChange:f}),M.jsx(G,{style:Me.title,children:"Add New Item"}),t?M.jsxs(X,{style:Me.previewContainer,children:[M.jsx(Ei,{source:{uri:t},style:Me.previewImage}),n?M.jsxs(X,{style:Me.loadingContainer,children:[M.jsx(Jd,{size:"large",color:"#007AFF"}),M.jsx(G,{style:Me.loadingText,children:"Analyzing your item..."})]}):o?M.jsxs(X,{style:Me.formContainer,children:[M.jsxs(X,{style:Me.rowContainer,children:[M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Type"}),M.jsx(Qn,{style:Me.compactInput,value:o.type,onChangeText:T=>a({...o,type:T})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Color"}),M.jsx(Qn,{style:Me.compactInput,value:o.color,onChangeText:T=>a({...o,color:T})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Style"}),M.jsx(Qn,{style:Me.compactInput,value:o.style,onChangeText:T=>a({...o,style:T})})]})]}),M.jsx(G,{style:Me.label,children:"Tags"}),M.jsx(X,{style:Me.tagsContainer,children:o.tags.map((T,_)=>M.jsx(X,{style:Me.tagBadge,children:M.jsx(G,{style:Me.tagText,children:T})},_))}),M.jsxs(X,{style:Me.buttonGroup,children:[M.jsx(Ce,{style:[Me.button,Me.secondaryButton],onPress:S,children:M.jsx(G,{style:Me.secondaryButtonText,children:"Retake"})}),M.jsx(Ce,{style:Me.button,onPress:g,disabled:i,children:M.jsx(G,{style:Me.buttonText,children:i?"Saving...":"Save to Closet"})})]})]}):null]}):M.jsx(X,{style:Me.uploadContainer,children:M.jsx(Ce,{style:Me.button,onPress:()=>l.current.click(),children:M.jsx(G,{style:Me.buttonText,children:"Take Photo / Upload"})})})]})}const Me=Ae.create({container:{flexGrow:1,padding:20,alignItems:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:20},uploadContainer:{flex:1,justifyContent:"center",alignItems:"center",width:"100%"},previewContainer:{width:"100%",alignItems:"center"},previewImage:{width:300,height:300,borderRadius:10,marginBottom:20},loadingContainer:{alignItems:"center"},loadingText:{marginTop:10,color:"#666"},formContainer:{width:"100%"},rowContainer:{flexDirection:"row",justifyContent:"space-between",marginBottom:15},inputGroup:{width:"30%"},label:{fontWeight:"600",fontSize:12,color:"#666",marginBottom:4,textTransform:"uppercase"},compactInput:{borderWidth:1,borderColor:"#eee",padding:8,borderRadius:8,backgroundColor:"#f9f9f9",fontSize:14},tagsContainer:{flexDirection:"row",flexWrap:"wrap",marginBottom:20,marginTop:5},tagBadge:{backgroundColor:"#f0f0f0",paddingHorizontal:10,paddingVertical:5,borderRadius:15,marginRight:8,marginBottom:8},tagText:{fontSize:12,color:"#333"},buttonGroup:{flexDirection:"row",justifyContent:"space-between",marginTop:20},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",flex:1,marginHorizontal:5},buttonText:{color:"#fff",fontWeight:"bold"},secondaryButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#007AFF"},secondaryButtonText:{color:"#007AFF",fontWeight:"bold"}});function Nse(){const{items:t,isItemAvailable:e,addToSchedule:n}=cv(),r=Ju(),[i,s]=I.useState(""),[o,a]=I.useState(""),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState([]),[g,S]=I.useState(null),[T,_]=I.useState(!1),[y,v]=I.useState(new Date().toISOString().split("T")[0]),C=async()=>{if(!i||!o||!l){alert("Please fill in all fields");return}d(!0);const E=t.filter(e);try{const R=await cU(E,{destination:i,temperature:o,style:l});p(R)}catch(R){console.error("Failed to generate outfits",R),alert("Failed to generate suggestions. Please try again.")}finally{d(!1)}},D=E=>{S(E),_(!0)},O=()=>{g&&y&&(n(y,g.items),_(!1),S(null),alert("Outfit scheduled!"),r("/schedule"))},b=E=>t.find(R=>R.id===E);return M.jsxs(Lr,{contentContainerStyle:ke.container,children:[M.jsx(G,{style:ke.title,children:"Virtual Dressing Room"}),M.jsxs(X,{style:ke.form,children:[M.jsx(G,{style:ke.label,children:"Destination / Occasion"}),M.jsx(Qn,{style:ke.input,placeholder:"e.g. Work, Date Night, Gym",value:i,onChangeText:s}),M.jsx(G,{style:ke.label,children:"Temperature"}),M.jsx(Qn,{style:ke.input,placeholder:"e.g. 75F, Cold, Rainy",value:o,onChangeText:a}),M.jsx(G,{style:ke.label,children:"Style Preference"}),M.jsx(Qn,{style:ke.input,placeholder:"e.g. Casual, Chic, Edgy",value:l,onChangeText:u}),M.jsx(Ce,{style:[ke.button,c&&ke.disabledButton],onPress:C,disabled:c,children:c?M.jsx(Jd,{color:"#fff"}):M.jsx(G,{style:ke.buttonText,children:"Generate Outfits"})})]}),f.length>0&&M.jsxs(X,{style:ke.results,children:[M.jsx(G,{style:ke.subtitle,children:"Suggestions"}),f.map((E,R)=>M.jsxs(X,{style:ke.outfitCard,children:[M.jsx(G,{style:ke.outfitSummary,children:E.summary}),M.jsx(Lr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:ke.itemsRow,children:E.items.map(x=>{const P=b(x);return P?M.jsxs(X,{style:ke.itemPreview,children:[M.jsx(Ei,{source:{uri:P.imageUri},style:ke.itemImage}),M.jsx(G,{style:ke.itemType,children:P.type})]},x):null})}),M.jsx(Ce,{style:ke.scheduleButton,onPress:()=>D(E),children:M.jsx(G,{style:ke.scheduleButtonText,children:"Schedule This Outfit"})})]},R))]}),M.jsx(wd,{visible:T,transparent:!0,animationType:"slide",children:M.jsx(X,{style:ke.modalContainer,children:M.jsxs(X,{style:ke.modalContent,children:[M.jsx(G,{style:ke.modalTitle,children:"Select Date"}),M.jsx("input",{type:"date",value:y,onChange:E=>v(E.target.value),style:ke.dateInput}),M.jsxs(X,{style:ke.modalButtons,children:[M.jsx(Ce,{style:[ke.button,ke.cancelButton],onPress:()=>_(!1),children:M.jsx(G,{style:ke.cancelButtonText,children:"Cancel"})}),M.jsx(Ce,{style:ke.button,onPress:O,children:M.jsx(G,{style:ke.buttonText,children:"Confirm"})})]})]})})})]})}const ke=Ae.create({container:{flexGrow:1,padding:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},form:{backgroundColor:"#fff",padding:20,borderRadius:10,marginBottom:20,elevation:2},label:{fontWeight:"bold",marginBottom:5,color:"#333"},input:{borderWidth:1,borderColor:"#ddd",padding:10,borderRadius:5,marginBottom:15,backgroundColor:"#f9f9f9"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center"},disabledButton:{backgroundColor:"#99c9ff"},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},results:{marginTop:10,paddingBottom:40},subtitle:{fontSize:20,fontWeight:"bold",marginBottom:15},outfitCard:{backgroundColor:"#fff",padding:15,borderRadius:10,marginBottom:15,elevation:2},outfitSummary:{fontSize:16,marginBottom:10,lineHeight:22},itemsRow:{flexDirection:"row",marginTop:10,marginBottom:15},itemPreview:{marginRight:15,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:5,marginBottom:5},itemType:{fontSize:12,color:"#666",textTransform:"capitalize"},scheduleButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center"},scheduleButtonText:{color:"#fff",fontWeight:"bold"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"#fff",padding:20,borderRadius:10,width:"80%",alignItems:"center"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},dateInput:{padding:10,fontSize:16,marginBottom:20,width:"100%",border:"1px solid #ddd",borderRadius:5},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},cancelButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#ddd",marginRight:10},cancelButtonText:{color:"#333"}}),pw=async(t,e)=>{try{const r=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&daily=temperature_2m_max,temperature_2m_min,weathercode&temperature_unit=fahrenheit&timezone=auto`)).json(),i={};return r.daily.time.forEach((s,o)=>{i[s]={max:Math.round(r.daily.temperature_2m_max[o]),min:Math.round(r.daily.temperature_2m_min[o]),code:r.daily.weathercode[o]}}),i}catch(n){return console.error("Error fetching weather:",n),null}},Lse=t=>({0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",95:"Thunderstorm"})[t]||"Variable";function Vse(){const{schedule:t,items:e,markAsWorn:n,addToSchedule:r,isItemAvailable:i}=cv(),[s,o]=I.useState({}),[a,l]=I.useState(!1),[u,c]=I.useState(null),[d,f]=I.useState(!1),[p,g]=I.useState([]),[S,T]=I.useState({destination:"",style:"",temperature:""});I.useEffect(()=>{(async()=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async P=>{const N=await pw(P.coords.latitude,P.coords.longitude);N&&o(N)},async()=>{const P=await pw(40.7128,-74.006);P&&o(P)});else{const P=await pw(40.7128,-74.006);P&&o(P)}})()},[]);const _=()=>{const E=[];for(let R=0;R<7;R++){const x=new Date;x.setDate(x.getDate()+R),E.push(x.toISOString().split("T")[0])}return E},y=E=>e.find(R=>R.id===E),v=(E,R)=>{confirm("Mark this outfit as worn? Items will be unavailable for their refresh cycle.")&&n(R,E)},C=E=>{c(E),g([]),T({destination:"",style:"",temperature:""}),l(!0)},D=async()=>{f(!0);try{const E=s[u],R=E?`${E.max}F / ${E.min}F`:"Unknown",x=e.filter(i),P=await cU(x,{destination:S.destination,temperature:S.temperature||R,style:S.style});P&&P.outfits&&g(P.outfits)}catch(E){console.error("Generation failed",E),alert("Failed to generate outfits. Check your API key.")}finally{f(!1)}},O=E=>{r(u,E.itemIds),l(!1)},b=_();return M.jsxs(Lr,{contentContainerStyle:Ie.container,children:[M.jsx(G,{style:Ie.title,children:"Outfit Schedule"}),b.map(E=>{const R=t[E],x=new Date(E),P=x.toLocaleDateString("en-US",{weekday:"long"}),N=x.toLocaleDateString("en-US",{month:"short",day:"numeric"}),k=s[E];return M.jsxs(X,{style:Ie.dayCard,children:[M.jsxs(X,{style:Ie.dateHeader,children:[M.jsxs(X,{children:[M.jsx(G,{style:Ie.dayName,children:P}),M.jsx(G,{style:Ie.dateText,children:N})]}),k&&M.jsxs(X,{style:Ie.weatherContainer,children:[M.jsxs(G,{style:Ie.weatherTemp,children:[k.max," / ",k.min,""]}),M.jsx(G,{style:Ie.weatherDesc,children:Lse(k.code)})]})]}),R?M.jsxs(X,{children:[M.jsx(Lr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Ie.itemsRow,children:R.map(de=>{const fe=y(de);return fe?M.jsxs(X,{style:Ie.itemPreview,children:[M.jsx(Ei,{source:{uri:fe.imageUri||fe.image},style:Ie.itemImage}),M.jsx(G,{style:Ie.itemType,children:fe.type})]},de):null})}),M.jsx(Ce,{style:Ie.wearButton,onPress:()=>v(E,R),children:M.jsx(G,{style:Ie.wearButtonText,children:"Wear This Outfit"})})]}):M.jsx(Ce,{style:Ie.generateButton,onPress:()=>C(E),children:M.jsx(G,{style:Ie.generateButtonText,children:"+ Generate Outfit"})})]},E)}),M.jsx(wd,{visible:a,animationType:"slide",onRequestClose:()=>l(!1),children:M.jsxs(X,{style:Ie.modalContainer,children:[M.jsxs(G,{style:Ie.modalTitle,children:["Plan for ",u]}),M.jsxs(Lr,{style:{flex:1},children:[M.jsxs(X,{style:{marginBottom:20},children:[M.jsx(G,{style:Ie.label,children:"Destination / Occasion"}),M.jsx(Qn,{style:Ie.input,placeholder:"e.g. Work, Date Night, Gym",value:S.destination,onChangeText:E=>T(R=>({...R,destination:E}))}),M.jsx(G,{style:Ie.label,children:"Temperature"}),M.jsx(Qn,{style:Ie.input,placeholder:"e.g. 75F, Cold, Rainy (Leave blank to use forecast)",value:S.temperature,onChangeText:E=>T(R=>({...R,temperature:E}))}),M.jsx(G,{style:Ie.label,children:"Style Preference"}),M.jsx(Qn,{style:Ie.input,placeholder:"e.g. Casual, Chic, Edgy",value:S.style,onChangeText:E=>T(R=>({...R,style:E}))})]}),M.jsx(Ce,{style:[Ie.genButton,d&&{opacity:.7}],onPress:D,disabled:d,children:d?M.jsx(Jd,{color:"#fff"}):M.jsx(G,{style:Ie.genButtonText,children:"Generate Suggestions"})}),p.map((E,R)=>M.jsxs(Ce,{style:Ie.suggestionCard,onPress:()=>O(E),children:[M.jsx(G,{style:Ie.suggestionSummary,children:E.reason||E.summary}),M.jsx(Lr,{horizontal:!0,children:E.itemIds.map(x=>{const P=y(x);return P?M.jsx(Ei,{source:{uri:P.imageUri||P.image},style:Ie.smallImage},x):null})}),M.jsx(X,{style:Ie.selectButton,children:M.jsx(G,{style:Ie.selectButtonText,children:"Select This Outfit"})})]},R))]}),M.jsx(Ce,{style:Ie.closeButton,onPress:()=>l(!1),children:M.jsx(G,{style:Ie.closeButtonText,children:"Close"})})]})})]})}const Ie=Ae.create({container:{flexGrow:1,padding:20,paddingBottom:80},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},dayCard:{backgroundColor:"#fff",borderRadius:10,padding:15,marginBottom:15,elevation:2},dateHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},weatherContainer:{alignItems:"flex-end"},weatherTemp:{fontSize:16,fontWeight:"bold"},weatherDesc:{fontSize:12,color:"#666"},generateButton:{backgroundColor:"#f0f0f0",padding:15,borderRadius:8,alignItems:"center",borderWidth:1,borderColor:"#ddd",borderStyle:"dashed"},generateButtonText:{color:"#007AFF",fontSize:16},modalContainer:{flex:1,padding:20,backgroundColor:"#fff"},modalTitle:{fontSize:22,fontWeight:"bold",marginBottom:10,textAlign:"center"},modalWeather:{textAlign:"center",marginBottom:20,color:"#666"},genButton:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",marginBottom:10},genButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},suggestionCard:{borderWidth:1,borderColor:"#ddd",borderRadius:10,padding:15,marginBottom:20},suggestionSummary:{marginBottom:10,fontStyle:"italic"},smallImage:{width:60,height:60,borderRadius:5,marginRight:5},selectButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center",marginTop:10},selectButtonText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:15,alignItems:"center"},closeButtonText:{color:"red"},dayName:{fontSize:18,fontWeight:"bold"},dateText:{color:"#666"},itemsRow:{flexDirection:"row",marginBottom:10},itemPreview:{marginRight:10,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:8,marginBottom:5},itemType:{fontSize:12},wearButton:{backgroundColor:"#007AFF",padding:10,borderRadius:5,alignItems:"center"},wearButtonText:{color:"#fff",fontWeight:"bold"},emptyText:{textAlign:"center",color:"#999",fontStyle:"italic",padding:10}});function Fse(){const[t,e]=I.useState(""),[n,r]=I.useState(""),[i,s]=I.useState(!0),[o,a]=I.useState(!1),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState(""),g=async()=>{u(""),p(""),a(!0);try{c?(await lZ(t),p("Check your email for password reset instructions."),d(!1)):i?await sZ(t,n):await oZ(t,n)}catch(S){u(S.message.replace("Firebase: ",""))}finally{a(!1)}};return M.jsxs(X,{style:Tn.container,children:[M.jsx(Ei,{source:{uri:"/pwa-192x192.png"},style:{width:100,height:100,marginBottom:20,alignSelf:"center"}}),M.jsxs(X,{style:Tn.card,children:[M.jsx(G,{style:Tn.title,children:c?"Reset Password":i?"Pocket Stylist Login":"Create Account"}),l?M.jsx(G,{style:Tn.error,children:l}):null,f?M.jsx(G,{style:Tn.success,children:f}):null,M.jsx(Qn,{style:Tn.input,placeholder:"Email",value:t,onChangeText:e,autoCapitalize:"none",keyboardType:"email-address"}),!c&&M.jsx(Qn,{style:Tn.input,placeholder:"Password",value:n,onChangeText:r,secureTextEntry:!0}),M.jsx(Ce,{style:Tn.button,onPress:g,disabled:o,children:o?M.jsx(Jd,{color:"#fff"}):M.jsx(G,{style:Tn.buttonText,children:c?"Send Reset Email":i?"Log In":"Sign Up"})}),M.jsx(X,{style:Tn.footer,children:c?M.jsx(Ce,{onPress:()=>d(!1),children:M.jsx(G,{style:Tn.link,children:"Back to Login"})}):M.jsxs(M.Fragment,{children:[M.jsx(Ce,{onPress:()=>s(!i),children:M.jsx(G,{style:Tn.link,children:i?"Need an account? Sign Up":"Have an account? Log In"})}),M.jsx(Ce,{onPress:()=>d(!0),children:M.jsx(G,{style:[Tn.link,Tn.forgotLink],children:"Forgot Password?"})})]})})]})]})}const Tn=Ae.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5",padding:20,height:"100vh"},card:{backgroundColor:"#fff",padding:30,borderRadius:15,width:"100%",maxWidth:400,elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center",color:"#333"},input:{backgroundColor:"#f9f9f9",padding:15,borderRadius:8,marginBottom:15,borderWidth:1,borderColor:"#eee"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:8,alignItems:"center",marginTop:10},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},error:{color:"red",marginBottom:15,textAlign:"center"},success:{color:"green",marginBottom:15,textAlign:"center"},footer:{marginTop:20,alignItems:"center"},link:{color:"#007AFF",marginTop:10},forgotLink:{color:"#666",fontSize:12}});function Bse({onNavigate:t}){const e=Ju(),n=bi(),r=s=>{t?t(s):e(s)},i=[{name:"Home",path:"/"},{name:"Closet",path:"/closet"},{name:"Style",path:"/outfits"},{name:"Plan",path:"/schedule"}];return M.jsx(X,{style:Jc.navBar,children:i.map(s=>{const o=n.pathname===s.path;return M.jsx(Ce,{style:[Jc.tab,o&&Jc.activeTab],onPress:()=>r(s.path),children:M.jsx(G,{style:[Jc.tabText,o&&Jc.activeTabText],children:s.name})},s.name)})})}const Jc=Ae.create({navBar:{flexDirection:"row",justifyContent:"space-around",backgroundColor:si.colors.background,borderTopWidth:1,borderTopColor:si.colors.border,paddingBottom:20,paddingTop:10,position:"absolute",bottom:0,left:0,right:0},tab:{alignItems:"center",padding:10},activeTab:{borderBottomWidth:2,borderBottomColor:si.colors.highlight},tabText:{fontSize:16,color:si.colors.secondaryText},activeTabText:{color:si.colors.highlight,fontWeight:"bold"}});function jse({visible:t,onClose:e}){const n=ac.currentUser,[r,i]=I.useState("");I.useEffect(()=>{n&&fie(n.uid).then(a=>{if(a!=null&&a.openai_api_key)i(a.openai_api_key),localStorage.setItem("openai_api_key",a.openai_api_key);else{const l=localStorage.getItem("openai_api_key");l&&i(l)}})},[n,t]);const s=async()=>{n&&(await die(n.uid,{openai_api_key:r}),localStorage.setItem("openai_api_key",r),alert("API Key saved to account!"))},o=async()=>{try{await aZ(),e()}catch(a){console.error("Failed to log out",a)}};return M.jsx(wd,{visible:t,transparent:!0,animationType:"fade",onRequestClose:e,children:M.jsxs(X,{style:tn.overlay,children:[M.jsx(Ce,{style:Ae.absoluteFill,activeOpacity:1,onPress:e}),M.jsxs(X,{style:tn.modalContent,children:[M.jsx(G,{style:tn.title,children:"Account"}),M.jsxs(X,{style:tn.info,children:[M.jsx(G,{style:tn.label,children:"Email"}),M.jsx(G,{style:tn.value,children:n==null?void 0:n.email})]}),M.jsxs(X,{style:tn.section,children:[M.jsx(G,{style:tn.label,children:"OpenAI API Key"}),M.jsx("input",{type:"password",style:{width:"100%",padding:10,marginBottom:10,border:"1px solid #ddd",borderRadius:8,fontSize:16,boxSizing:"border-box"},placeholder:"sk-...",value:r,onChange:a=>i(a.target.value)}),M.jsx(Ce,{style:tn.saveButton,onPress:s,children:M.jsx(G,{style:tn.saveButtonText,children:"Save Key"})})]}),M.jsx(Ce,{style:tn.refreshButton,onPress:()=>window.location.reload(),children:M.jsx(G,{style:tn.refreshButtonText,children:"Refresh App"})}),M.jsx(Ce,{style:tn.logoutButton,onPress:o,children:M.jsx(G,{style:tn.logoutText,children:"Log Out"})}),M.jsx(Ce,{style:tn.closeButton,onPress:e,children:M.jsx(G,{style:tn.closeText,children:"Close"})})]})]})})}const tn=Ae.create({overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",width:"80%",maxWidth:300,borderRadius:15,padding:20,alignItems:"center",elevation:5},title:{fontSize:20,fontWeight:"bold",marginBottom:20},info:{marginBottom:20,alignItems:"center"},section:{width:"100%",marginBottom:20},label:{color:"#666",fontSize:12,marginBottom:5},value:{fontSize:16,fontWeight:"500"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:10,marginBottom:10,width:"100%"},saveButton:{backgroundColor:"#007AFF",padding:10,borderRadius:8,alignItems:"center"},saveButtonText:{color:"#fff",fontWeight:"bold"},refreshButton:{backgroundColor:"#34C759",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},refreshButtonText:{color:"#fff",fontWeight:"bold"},logoutButton:{backgroundColor:"#FF3B30",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},logoutText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:10},closeText:{color:"#007AFF"}}),Use={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:t=>({zIndex:0,x:t<0?"100%":"-100%",opacity:0})},Zc=({children:t,direction:e})=>M.jsx(uie.div,{custom:e,variants:Use,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",ease:"easeInOut",duration:.3},style:{height:"100%",width:"100%",backgroundColor:"#ffffff",overflowY:"auto",overflowX:"hidden",position:"absolute",top:0,left:0,paddingBottom:"80px"},children:t});function $se(){const{currentUser:t}=qb(),[e,n]=I.useState(!1),[r,i]=I.useState(0),s=Ju(),o=bi(),a=["/","/closet","/outfits","/schedule"],l=c=>{const d=a.indexOf(o.pathname),f=a.indexOf(c);i(f>d?1:-1),s(c)},u=wZ({onSwipedLeft:()=>{const c=a.indexOf(o.pathname);c<a.length-1&&(i(1),s(a[c+1]))},onSwipedRight:()=>{const c=a.indexOf(o.pathname);c>0&&(i(-1),s(a[c-1]))},preventScrollOnSwipe:!1,trackMouse:!0,delta:50});return t?M.jsxs(X,{style:mw.container,children:[M.jsxs(X,{style:mw.header,children:[M.jsx(X,{style:{flexDirection:"row",alignItems:"center",flex:1},children:M.jsx(Ei,{source:{uri:cie},style:{width:260,height:52,resizeMode:"contain",marginLeft:10}})}),M.jsx(Ce,{onPress:()=>n(!0),children:M.jsx(AZ,{size:34,color:si.colors.highlight})})]}),M.jsx(X,{style:mw.content,...u,children:M.jsx(Dte,{mode:"popLayout",custom:r,children:M.jsxs(C8,{location:o,children:[M.jsx(kl,{path:"/",element:M.jsx(Zc,{direction:r,children:M.jsx(hie,{})})}),M.jsx(kl,{path:"/closet",element:M.jsx(Zc,{direction:r,children:M.jsx(Rie,{})})}),M.jsx(kl,{path:"/camera",element:M.jsx(Zc,{direction:r,children:M.jsx(Mse,{})})}),M.jsx(kl,{path:"/outfits",element:M.jsx(Zc,{direction:r,children:M.jsx(Nse,{})})}),M.jsx(kl,{path:"/schedule",element:M.jsx(Zc,{direction:r,children:M.jsx(Vse,{})})})]},o.pathname)})}),M.jsx(Bse,{onNavigate:l}),M.jsx(jse,{visible:e,onClose:()=>n(!1)})]}):M.jsx(Fse,{})}function zse(){return M.jsx(Q8,{children:M.jsx($se,{})})}const mw=Ae.create({container:{flex:1,height:"100vh",maxHeight:"100dvh",backgroundColor:"#ffffff",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:15,backgroundColor:si.colors.background,borderBottomWidth:1,borderBottomColor:si.colors.border,paddingTop:15,zIndex:10,height:70},headerTitle:{fontSize:18,fontWeight:"bold",color:si.colors.text},accountButton:{color:si.colors.highlight,fontWeight:"500"},content:{flex:1,paddingBottom:60,overflow:"hidden"}});"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){for(let e of t)console.log("Unregistering Service Worker:",e),e.unregister()});gw.createRoot(document.getElementById("root")).render(M.jsx(yt.StrictMode,{children:M.jsx(uZ,{children:M.jsx(Sie,{children:M.jsx(zse,{})})})}));
