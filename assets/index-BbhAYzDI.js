(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Gu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Nk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Lk={exports:{}},ay={},Vk={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=Symbol.for("react.element"),vU=Symbol.for("react.portal"),_U=Symbol.for("react.fragment"),wU=Symbol.for("react.strict_mode"),SU=Symbol.for("react.profiler"),EU=Symbol.for("react.provider"),TU=Symbol.for("react.context"),bU=Symbol.for("react.forward_ref"),IU=Symbol.for("react.suspense"),RU=Symbol.for("react.memo"),CU=Symbol.for("react.lazy"),dR=Symbol.iterator;function xU(t){return t===null||typeof t!="object"?null:(t=dR&&t[dR]||t["@@iterator"],typeof t=="function"?t:null)}var Fk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bk=Object.assign,jk={};function Xu(t,e,n){this.props=t,this.context=e,this.refs=jk,this.updater=n||Fk}Xu.prototype.isReactComponent={};Xu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uk(){}Uk.prototype=Xu.prototype;function oE(t,e,n){this.props=t,this.context=e,this.refs=jk,this.updater=n||Fk}var aE=oE.prototype=new Uk;aE.constructor=oE;Bk(aE,Xu.prototype);aE.isPureReactComponent=!0;var fR=Array.isArray,$k=Object.prototype.hasOwnProperty,lE={current:null},zk={key:!0,ref:!0,__self:!0,__source:!0};function Wk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$k.call(e,r)&&!zk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Kd,type:t,key:s,ref:o,props:i,_owner:lE.current}}function AU(t,e){return{$$typeof:Kd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uE(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kd}function PU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pR=/\/+/g;function Av(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PU(""+t.key):e.toString(36)}function jp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kd:case vU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Av(o,0):r,fR(i)?(n="",t!=null&&(n=t.replace(pR,"$&/")+"/"),jp(i,e,n,"",function(u){return u})):i!=null&&(uE(i)&&(i=AU(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(pR,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",fR(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Av(s,a);o+=jp(s,e,n,l,i)}else if(l=xU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Av(s,a++),o+=jp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qf(t,e,n){if(t==null)return t;var r=[],i=0;return jp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function kU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sn={current:null},Up={transition:null},DU={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:Up,ReactCurrentOwner:lE};function Hk(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:qf,forEach:function(t,e,n){qf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qf(t,function(){e++}),e},toArray:function(t){return qf(t,function(e){return e})||[]},only:function(t){if(!uE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Xu;Se.Fragment=_U;Se.Profiler=SU;Se.PureComponent=oE;Se.StrictMode=wU;Se.Suspense=IU;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DU;Se.act=Hk;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Bk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$k.call(e,l)&&!zk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Kd,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:TU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EU,_context:t},t.Consumer=t};Se.createElement=Wk;Se.createFactory=function(t){var e=Wk.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:bU,render:t}};Se.isValidElement=uE;Se.lazy=function(t){return{$$typeof:CU,_payload:{_status:-1,_result:t},_init:kU}};Se.memo=function(t,e){return{$$typeof:RU,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Up.transition;Up.transition={};try{t()}finally{Up.transition=e}};Se.unstable_act=Hk;Se.useCallback=function(t,e){return Sn.current.useCallback(t,e)};Se.useContext=function(t){return Sn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return Sn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return Sn.current.useEffect(t,e)};Se.useId=function(){return Sn.current.useId()};Se.useImperativeHandle=function(t,e,n){return Sn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return Sn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return Sn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return Sn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return Sn.current.useReducer(t,e,n)};Se.useRef=function(t){return Sn.current.useRef(t)};Se.useState=function(t){return Sn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return Sn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return Sn.current.useTransition()};Se.version="18.3.1";Vk.exports=Se;var I=Vk.exports;const gt=Gu(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OU=I,MU=Symbol.for("react.element"),NU=Symbol.for("react.fragment"),LU=Object.prototype.hasOwnProperty,VU=OU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FU={key:!0,ref:!0,__self:!0,__source:!0};function Kk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)LU.call(e,r)&&!FU.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:MU,type:t,key:s,ref:o,props:i,_owner:VU.current}}ay.Fragment=NU;ay.jsx=Kk;ay.jsxs=Kk;Lk.exports=ay;var M=Lk.exports,yw={},qk={exports:{}},er={},Gk={exports:{}},Xk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Y){var ie=U.length;U.push(Y);e:for(;0<ie;){var we=ie-1>>>1,Ae=U[we];if(0<i(Ae,Y))U[we]=Y,U[ie]=Ae,ie=we;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],ie=U.pop();if(ie!==Y){U[0]=ie;e:for(var we=0,Ae=U.length,hn=Ae>>>1;we<hn;){var lt=2*(we+1)-1,zt=U[lt],mt=lt+1,Ke=U[mt];if(0>i(zt,ie))mt<Ae&&0>i(Ke,zt)?(U[we]=Ke,U[mt]=ie,we=mt):(U[we]=zt,U[lt]=ie,we=lt);else if(mt<Ae&&0>i(Ke,ie))U[we]=Ke,U[mt]=ie,we=mt;else break e}}return Y}function i(U,Y){var ie=U.sortIndex-Y.sortIndex;return ie!==0?ie:U.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,g=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=U)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function x(U){if(E=!1,w(U),!g)if(n(l)!==null)g=!0,je(O);else{var Y=n(u);Y!==null&&Re(x,Y.startTime-U)}}function O(U,Y){g=!1,E&&(E=!1,S(v),v=-1),p=!0;var ie=f;try{for(w(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||U&&!A());){var we=d.callback;if(typeof we=="function"){d.callback=null,f=d.priorityLevel;var Ae=we(d.expirationTime<=Y);Y=t.unstable_now(),typeof Ae=="function"?d.callback=Ae:d===n(l)&&r(l),w(Y)}else r(l);d=n(l)}if(d!==null)var hn=!0;else{var lt=n(u);lt!==null&&Re(x,lt.startTime-Y),hn=!1}return hn}finally{d=null,f=ie,p=!1}}var k=!1,T=null,v=-1,R=5,C=-1;function A(){return!(t.unstable_now()-C<R)}function N(){if(T!==null){var U=t.unstable_now();C=U;var Y=!0;try{Y=T(!0,U)}finally{Y?D():(k=!1,T=null)}}else k=!1}var D;if(typeof y=="function")D=function(){y(N)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,fe=de.port2;de.port1.onmessage=N,D=function(){fe.postMessage(null)}}else D=function(){b(N,0)};function je(U){T=U,k||(k=!0,D())}function Re(U,Y){v=b(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,je(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var ie=f;f=Y;try{return U()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=f;f=U;try{return Y()}finally{f=ie}},t.unstable_scheduleCallback=function(U,Y,ie){var we=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?we+ie:we):ie=we,U){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=ie+Ae,U={id:c++,callback:Y,priorityLevel:U,startTime:ie,expirationTime:Ae,sortIndex:-1},ie>we?(U.sortIndex=ie,e(u,U),n(l)===null&&U===n(u)&&(E?(S(v),v=-1):E=!0,Re(x,ie-we))):(U.sortIndex=Ae,e(l,U),g||p||(g=!0,je(O))),U},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(U){var Y=f;return function(){var ie=f;f=Y;try{return U.apply(this,arguments)}finally{f=ie}}}})(Xk);Gk.exports=Xk;var BU=Gk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jU=I,Jn=BU;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qk=new Set,ed={};function Ya(t,e){Eu(t,e),Eu(t+"Capture",e)}function Eu(t,e){for(ed[t]=e,t=0;t<e.length;t++)Qk.add(e[t])}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vw=Object.prototype.hasOwnProperty,UU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mR={},gR={};function $U(t){return vw.call(gR,t)?!0:vw.call(mR,t)?!1:UU.test(t)?gR[t]=!0:(mR[t]=!0,!1)}function zU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WU(t,e,n,r){if(e===null||typeof e>"u"||zU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var cE=/[\-:]([a-z])/g;function hE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cE,hE);Qt[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cE,hE);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cE,hE);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function dE(t,e,n,r){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WU(e,n,i,r)&&(n=null),r||i===null?$U(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ss=jU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gf=Symbol.for("react.element"),Ul=Symbol.for("react.portal"),$l=Symbol.for("react.fragment"),fE=Symbol.for("react.strict_mode"),_w=Symbol.for("react.profiler"),Yk=Symbol.for("react.provider"),Jk=Symbol.for("react.context"),pE=Symbol.for("react.forward_ref"),ww=Symbol.for("react.suspense"),Sw=Symbol.for("react.suspense_list"),mE=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),Zk=Symbol.for("react.offscreen"),yR=Symbol.iterator;function Lc(t){return t===null||typeof t!="object"?null:(t=yR&&t[yR]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,Pv;function nh(t){if(Pv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pv=e&&e[1]||""}return`
`+Pv+t}var kv=!1;function Dv(t,e){if(!t||kv)return"";kv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{kv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nh(t):""}function HU(t){switch(t.tag){case 5:return nh(t.type);case 16:return nh("Lazy");case 13:return nh("Suspense");case 19:return nh("SuspenseList");case 0:case 2:case 15:return t=Dv(t.type,!1),t;case 11:return t=Dv(t.type.render,!1),t;case 1:return t=Dv(t.type,!0),t;default:return""}}function Ew(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $l:return"Fragment";case Ul:return"Portal";case _w:return"Profiler";case fE:return"StrictMode";case ww:return"Suspense";case Sw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jk:return(t.displayName||"Context")+".Consumer";case Yk:return(t._context.displayName||"Context")+".Provider";case pE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mE:return e=t.displayName||null,e!==null?e:Ew(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return Ew(t(e))}catch{}}return null}function KU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ew(e);case 8:return e===fE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qU(t){var e=eD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xf(t){t._valueTracker||(t._valueTracker=qU(t))}function tD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tw(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nD(t,e){e=e.checked,e!=null&&dE(t,"checked",e,!1)}function bw(t,e){nD(t,e);var n=mo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Iw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Iw(t,e.type,mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _R(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Iw(t,e,n){(e!=="number"||Nm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rh=Array.isArray;function au(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(rh(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mo(n)}}function rD(t,e){var n=mo(e.value),r=mo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function SR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qf,sD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qf=Qf||document.createElement("div"),Qf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function td(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Th={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GU=["Webkit","ms","Moz","O"];Object.keys(Th).forEach(function(t){GU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Th[e]=Th[t]})});function oD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Th.hasOwnProperty(t)&&Th[t]?(""+e).trim():e+"px"}function aD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var XU=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xw(t,e){if(e){if(XU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Aw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pw=null;function gE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kw=null,lu=null,uu=null;function ER(t){if(t=Xd(t)){if(typeof kw!="function")throw Error(H(280));var e=t.stateNode;e&&(e=dy(e),kw(t.stateNode,t.type,e))}}function lD(t){lu?uu?uu.push(t):uu=[t]:lu=t}function uD(){if(lu){var t=lu,e=uu;if(uu=lu=null,ER(t),e)for(t=0;t<e.length;t++)ER(e[t])}}function cD(t,e){return t(e)}function hD(){}var Ov=!1;function dD(t,e,n){if(Ov)return t(e,n);Ov=!0;try{return cD(t,e,n)}finally{Ov=!1,(lu!==null||uu!==null)&&(hD(),uD())}}function nd(t,e){var n=t.stateNode;if(n===null)return null;var r=dy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Dw=!1;if(qi)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){Dw=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{Dw=!1}function QU(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var bh=!1,Lm=null,Vm=!1,Ow=null,YU={onError:function(t){bh=!0,Lm=t}};function JU(t,e,n,r,i,s,o,a,l){bh=!1,Lm=null,QU.apply(YU,arguments)}function ZU(t,e,n,r,i,s,o,a,l){if(JU.apply(this,arguments),bh){if(bh){var u=Lm;bh=!1,Lm=null}else throw Error(H(198));Vm||(Vm=!0,Ow=u)}}function Ja(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TR(t){if(Ja(t)!==t)throw Error(H(188))}function e4(t){var e=t.alternate;if(!e){if(e=Ja(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return TR(i),t;if(s===r)return TR(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function pD(t){return t=e4(t),t!==null?mD(t):null}function mD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mD(t);if(e!==null)return e;t=t.sibling}return null}var gD=Jn.unstable_scheduleCallback,bR=Jn.unstable_cancelCallback,t4=Jn.unstable_shouldYield,n4=Jn.unstable_requestPaint,yt=Jn.unstable_now,r4=Jn.unstable_getCurrentPriorityLevel,yE=Jn.unstable_ImmediatePriority,yD=Jn.unstable_UserBlockingPriority,Fm=Jn.unstable_NormalPriority,i4=Jn.unstable_LowPriority,vD=Jn.unstable_IdlePriority,ly=null,hi=null;function s4(t){if(hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(ly,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:l4,o4=Math.log,a4=Math.LN2;function l4(t){return t>>>=0,t===0?32:31-(o4(t)/a4|0)|0}var Yf=64,Jf=4194304;function ih(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ih(a):(s&=o,s!==0&&(r=ih(s)))}else o=n&~i,o!==0?r=ih(o):s!==0&&(r=ih(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fr(e),i=1<<n,r|=t[n],e&=~i;return r}function u4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=u4(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Mw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _D(){var t=Yf;return Yf<<=1,!(Yf&4194240)&&(Yf=64),t}function Mv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=n}function h4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function wD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SD,_E,ED,TD,bD,Nw=!1,Zf=[],to=null,no=null,ro=null,rd=new Map,id=new Map,Ws=[],d4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IR(t,e){switch(t){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":rd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(e.pointerId)}}function Fc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xd(e),e!==null&&_E(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function f4(t,e,n,r,i){switch(e){case"focusin":return to=Fc(to,t,e,n,r,i),!0;case"dragenter":return no=Fc(no,t,e,n,r,i),!0;case"mouseover":return ro=Fc(ro,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return rd.set(s,Fc(rd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,id.set(s,Fc(id.get(s)||null,t,e,n,r,i)),!0}return!1}function ID(t){var e=da(t.target);if(e!==null){var n=Ja(e);if(n!==null){if(e=n.tag,e===13){if(e=fD(n),e!==null){t.blockedOn=e,bD(t.priority,function(){ED(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $p(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pw=r,n.target.dispatchEvent(r),Pw=null}else return e=Xd(n),e!==null&&_E(e),t.blockedOn=n,!1;e.shift()}return!0}function RR(t,e,n){$p(t)&&n.delete(e)}function p4(){Nw=!1,to!==null&&$p(to)&&(to=null),no!==null&&$p(no)&&(no=null),ro!==null&&$p(ro)&&(ro=null),rd.forEach(RR),id.forEach(RR)}function Bc(t,e){t.blockedOn===e&&(t.blockedOn=null,Nw||(Nw=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,p4)))}function sd(t){function e(i){return Bc(i,t)}if(0<Zf.length){Bc(Zf[0],t);for(var n=1;n<Zf.length;n++){var r=Zf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(to!==null&&Bc(to,t),no!==null&&Bc(no,t),ro!==null&&Bc(ro,t),rd.forEach(e),id.forEach(e),n=0;n<Ws.length;n++)r=Ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)ID(n),n.blockedOn===null&&Ws.shift()}var cu=ss.ReactCurrentBatchConfig,jm=!0;function m4(t,e,n,r){var i=Ve,s=cu.transition;cu.transition=null;try{Ve=1,wE(t,e,n,r)}finally{Ve=i,cu.transition=s}}function g4(t,e,n,r){var i=Ve,s=cu.transition;cu.transition=null;try{Ve=4,wE(t,e,n,r)}finally{Ve=i,cu.transition=s}}function wE(t,e,n,r){if(jm){var i=Lw(t,e,n,r);if(i===null)Wv(t,e,r,Um,n),IR(t,r);else if(f4(i,t,e,n,r))r.stopPropagation();else if(IR(t,r),e&4&&-1<d4.indexOf(t)){for(;i!==null;){var s=Xd(i);if(s!==null&&SD(s),s=Lw(t,e,n,r),s===null&&Wv(t,e,r,Um,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wv(t,e,r,null,n)}}var Um=null;function Lw(t,e,n,r){if(Um=null,t=gE(r),t=da(t),t!==null)if(e=Ja(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Um=t,null}function RD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r4()){case yE:return 1;case yD:return 4;case Fm:case i4:return 16;case vD:return 536870912;default:return 16}default:return 16}}var Js=null,SE=null,zp=null;function CD(){if(zp)return zp;var t,e=SE,n=e.length,r,i="value"in Js?Js.value:Js.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return zp=i.slice(t,1<r?1-r:void 0)}function Wp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ep(){return!0}function CR(){return!1}function tr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ep:CR,this.isPropagationStopped=CR,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ep)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ep)},persist:function(){},isPersistent:ep}),e}var Qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},EE=tr(Qu),Gd=ot({},Qu,{view:0,detail:0}),y4=tr(Gd),Nv,Lv,jc,uy=ot({},Gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jc&&(jc&&t.type==="mousemove"?(Nv=t.screenX-jc.screenX,Lv=t.screenY-jc.screenY):Lv=Nv=0,jc=t),Nv)},movementY:function(t){return"movementY"in t?t.movementY:Lv}}),xR=tr(uy),v4=ot({},uy,{dataTransfer:0}),_4=tr(v4),w4=ot({},Gd,{relatedTarget:0}),Vv=tr(w4),S4=ot({},Qu,{animationName:0,elapsedTime:0,pseudoElement:0}),E4=tr(S4),T4=ot({},Qu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),b4=tr(T4),I4=ot({},Qu,{data:0}),AR=tr(I4),R4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=x4[t])?!!e[t]:!1}function TE(){return A4}var P4=ot({},Gd,{key:function(t){if(t.key){var e=R4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TE,charCode:function(t){return t.type==="keypress"?Wp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k4=tr(P4),D4=ot({},uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PR=tr(D4),O4=ot({},Gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TE}),M4=tr(O4),N4=ot({},Qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),L4=tr(N4),V4=ot({},uy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F4=tr(V4),B4=[9,13,27,32],bE=qi&&"CompositionEvent"in window,Ih=null;qi&&"documentMode"in document&&(Ih=document.documentMode);var j4=qi&&"TextEvent"in window&&!Ih,xD=qi&&(!bE||Ih&&8<Ih&&11>=Ih),kR=" ",DR=!1;function AD(t,e){switch(t){case"keyup":return B4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zl=!1;function U4(t,e){switch(t){case"compositionend":return PD(e);case"keypress":return e.which!==32?null:(DR=!0,kR);case"textInput":return t=e.data,t===kR&&DR?null:t;default:return null}}function $4(t,e){if(zl)return t==="compositionend"||!bE&&AD(t,e)?(t=CD(),zp=SE=Js=null,zl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xD&&e.locale!=="ko"?null:e.data;default:return null}}var z4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z4[t.type]:e==="textarea"}function kD(t,e,n,r){lD(r),e=$m(e,"onChange"),0<e.length&&(n=new EE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rh=null,od=null;function W4(t){$D(t,0)}function cy(t){var e=Kl(t);if(tD(e))return t}function H4(t,e){if(t==="change")return e}var DD=!1;if(qi){var Fv;if(qi){var Bv="oninput"in document;if(!Bv){var MR=document.createElement("div");MR.setAttribute("oninput","return;"),Bv=typeof MR.oninput=="function"}Fv=Bv}else Fv=!1;DD=Fv&&(!document.documentMode||9<document.documentMode)}function NR(){Rh&&(Rh.detachEvent("onpropertychange",OD),od=Rh=null)}function OD(t){if(t.propertyName==="value"&&cy(od)){var e=[];kD(e,od,t,gE(t)),dD(W4,e)}}function K4(t,e,n){t==="focusin"?(NR(),Rh=e,od=n,Rh.attachEvent("onpropertychange",OD)):t==="focusout"&&NR()}function q4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cy(od)}function G4(t,e){if(t==="click")return cy(e)}function X4(t,e){if(t==="input"||t==="change")return cy(e)}function Q4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:Q4;function ad(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vw.call(e,i)||!jr(t[i],e[i]))return!1}return!0}function LR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function VR(t,e){var n=LR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=LR(n)}}function MD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ND(){for(var t=window,e=Nm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nm(t.document)}return e}function IE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y4(t){var e=ND(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MD(n.ownerDocument.documentElement,n)){if(r!==null&&IE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=VR(n,s);var o=VR(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var J4=qi&&"documentMode"in document&&11>=document.documentMode,Wl=null,Vw=null,Ch=null,Fw=!1;function FR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fw||Wl==null||Wl!==Nm(r)||(r=Wl,"selectionStart"in r&&IE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ch&&ad(Ch,r)||(Ch=r,r=$m(Vw,"onSelect"),0<r.length&&(e=new EE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wl)))}function tp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hl={animationend:tp("Animation","AnimationEnd"),animationiteration:tp("Animation","AnimationIteration"),animationstart:tp("Animation","AnimationStart"),transitionend:tp("Transition","TransitionEnd")},jv={},LD={};qi&&(LD=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function hy(t){if(jv[t])return jv[t];if(!Hl[t])return t;var e=Hl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LD)return jv[t]=e[n];return t}var VD=hy("animationend"),FD=hy("animationiteration"),BD=hy("animationstart"),jD=hy("transitionend"),UD=new Map,BR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(t,e){UD.set(t,e),Ya(e,[t])}for(var Uv=0;Uv<BR.length;Uv++){var $v=BR[Uv],Z4=$v.toLowerCase(),e$=$v[0].toUpperCase()+$v.slice(1);Io(Z4,"on"+e$)}Io(VD,"onAnimationEnd");Io(FD,"onAnimationIteration");Io(BD,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(jD,"onTransitionEnd");Eu("onMouseEnter",["mouseout","mouseover"]);Eu("onMouseLeave",["mouseout","mouseover"]);Eu("onPointerEnter",["pointerout","pointerover"]);Eu("onPointerLeave",["pointerout","pointerover"]);Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t$=new Set("cancel close invalid load scroll toggle".split(" ").concat(sh));function jR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ZU(r,e,void 0,t),t.currentTarget=null}function $D(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jR(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jR(i,a,u),s=l}}}if(Vm)throw t=Ow,Vm=!1,Ow=null,t}function Ge(t,e){var n=e[zw];n===void 0&&(n=e[zw]=new Set);var r=t+"__bubble";n.has(r)||(zD(e,t,2,!1),n.add(r))}function zv(t,e,n){var r=0;e&&(r|=4),zD(n,t,r,e)}var np="_reactListening"+Math.random().toString(36).slice(2);function ld(t){if(!t[np]){t[np]=!0,Qk.forEach(function(n){n!=="selectionchange"&&(t$.has(n)||zv(n,!1,t),zv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[np]||(e[np]=!0,zv("selectionchange",!1,e))}}function zD(t,e,n,r){switch(RD(e)){case 1:var i=m4;break;case 4:i=g4;break;default:i=wE}n=i.bind(null,e,n,t),i=void 0,!Dw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wv(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=da(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}dD(function(){var u=s,c=gE(n),d=[];e:{var f=UD.get(t);if(f!==void 0){var p=EE,g=t;switch(t){case"keypress":if(Wp(n)===0)break e;case"keydown":case"keyup":p=k4;break;case"focusin":g="focus",p=Vv;break;case"focusout":g="blur",p=Vv;break;case"beforeblur":case"afterblur":p=Vv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=M4;break;case VD:case FD:case BD:p=E4;break;case jD:p=L4;break;case"scroll":p=y4;break;case"wheel":p=F4;break;case"copy":case"cut":case"paste":p=b4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=PR}var E=(e&4)!==0,b=!E&&t==="scroll",S=E?f!==null?f+"Capture":null:f;E=[];for(var y=u,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,S!==null&&(x=nd(y,S),x!=null&&E.push(ud(y,x,w)))),b)break;y=y.return}0<E.length&&(f=new p(f,g,null,n,c),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Pw&&(g=n.relatedTarget||n.fromElement)&&(da(g)||g[Gi]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?da(g):null,g!==null&&(b=Ja(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(E=xR,x="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=PR,x="onPointerLeave",S="onPointerEnter",y="pointer"),b=p==null?f:Kl(p),w=g==null?f:Kl(g),f=new E(x,y+"leave",p,n,c),f.target=b,f.relatedTarget=w,x=null,da(c)===u&&(E=new E(S,y+"enter",g,n,c),E.target=w,E.relatedTarget=b,x=E),b=x,p&&g)t:{for(E=p,S=g,y=0,w=E;w;w=Sl(w))y++;for(w=0,x=S;x;x=Sl(x))w++;for(;0<y-w;)E=Sl(E),y--;for(;0<w-y;)S=Sl(S),w--;for(;y--;){if(E===S||S!==null&&E===S.alternate)break t;E=Sl(E),S=Sl(S)}E=null}else E=null;p!==null&&UR(d,f,p,E,!1),g!==null&&b!==null&&UR(d,b,g,E,!0)}}e:{if(f=u?Kl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var O=H4;else if(OR(f))if(DD)O=X4;else{O=q4;var k=K4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=G4);if(O&&(O=O(t,u))){kD(d,O,n,c);break e}k&&k(t,f,u),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Iw(f,"number",f.value)}switch(k=u?Kl(u):window,t){case"focusin":(OR(k)||k.contentEditable==="true")&&(Wl=k,Vw=u,Ch=null);break;case"focusout":Ch=Vw=Wl=null;break;case"mousedown":Fw=!0;break;case"contextmenu":case"mouseup":case"dragend":Fw=!1,FR(d,n,c);break;case"selectionchange":if(J4)break;case"keydown":case"keyup":FR(d,n,c)}var T;if(bE)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zl?AD(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(xD&&n.locale!=="ko"&&(zl||v!=="onCompositionStart"?v==="onCompositionEnd"&&zl&&(T=CD()):(Js=c,SE="value"in Js?Js.value:Js.textContent,zl=!0)),k=$m(u,v),0<k.length&&(v=new AR(v,t,null,n,c),d.push({event:v,listeners:k}),T?v.data=T:(T=PD(n),T!==null&&(v.data=T)))),(T=j4?U4(t,n):$4(t,n))&&(u=$m(u,"onBeforeInput"),0<u.length&&(c=new AR("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}$D(d,e)})}function ud(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $m(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nd(t,n),s!=null&&r.unshift(ud(t,s,i)),s=nd(t,e),s!=null&&r.push(ud(t,s,i))),t=t.return}return r}function Sl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function UR(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=nd(n,s),l!=null&&o.unshift(ud(n,l,a))):i||(l=nd(n,s),l!=null&&o.push(ud(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var n$=/\r\n?/g,r$=/\u0000|\uFFFD/g;function $R(t){return(typeof t=="string"?t:""+t).replace(n$,`
`).replace(r$,"")}function rp(t,e,n){if(e=$R(e),$R(t)!==e&&n)throw Error(H(425))}function zm(){}var Bw=null,jw=null;function Uw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $w=typeof setTimeout=="function"?setTimeout:void 0,i$=typeof clearTimeout=="function"?clearTimeout:void 0,zR=typeof Promise=="function"?Promise:void 0,s$=typeof queueMicrotask=="function"?queueMicrotask:typeof zR<"u"?function(t){return zR.resolve(null).then(t).catch(o$)}:$w;function o$(t){setTimeout(function(){throw t})}function Hv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sd(e)}function io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function WR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yu=Math.random().toString(36).slice(2),ri="__reactFiber$"+Yu,cd="__reactProps$"+Yu,Gi="__reactContainer$"+Yu,zw="__reactEvents$"+Yu,a$="__reactListeners$"+Yu,l$="__reactHandles$"+Yu;function da(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gi]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=WR(t);t!==null;){if(n=t[ri])return n;t=WR(t)}return e}t=n,n=t.parentNode}return null}function Xd(t){return t=t[ri]||t[Gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function dy(t){return t[cd]||null}var Ww=[],ql=-1;function Ro(t){return{current:t}}function Xe(t){0>ql||(t.current=Ww[ql],Ww[ql]=null,ql--)}function We(t,e){ql++,Ww[ql]=t.current,t.current=e}var go={},un=Ro(go),Pn=Ro(!1),Da=go;function Tu(t,e){var n=t.type.contextTypes;if(!n)return go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kn(t){return t=t.childContextTypes,t!=null}function Wm(){Xe(Pn),Xe(un)}function HR(t,e,n){if(un.current!==go)throw Error(H(168));We(un,e),We(Pn,n)}function WD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,KU(t)||"Unknown",i));return ot({},n,r)}function Hm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||go,Da=un.current,We(un,t),We(Pn,Pn.current),!0}function KR(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=WD(t,e,Da),r.__reactInternalMemoizedMergedChildContext=t,Xe(Pn),Xe(un),We(un,t)):Xe(Pn),We(Pn,n)}var Li=null,fy=!1,Kv=!1;function HD(t){Li===null?Li=[t]:Li.push(t)}function u$(t){fy=!0,HD(t)}function Co(){if(!Kv&&Li!==null){Kv=!0;var t=0,e=Ve;try{var n=Li;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Li=null,fy=!1}catch(i){throw Li!==null&&(Li=Li.slice(t+1)),gD(yE,Co),i}finally{Ve=e,Kv=!1}}return null}var Gl=[],Xl=0,Km=null,qm=0,ar=[],lr=0,Oa=null,Vi=1,Fi="";function ea(t,e){Gl[Xl++]=qm,Gl[Xl++]=Km,Km=t,qm=e}function KD(t,e,n){ar[lr++]=Vi,ar[lr++]=Fi,ar[lr++]=Oa,Oa=t;var r=Vi;t=Fi;var i=32-Fr(r)-1;r&=~(1<<i),n+=1;var s=32-Fr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vi=1<<32-Fr(e)+i|n<<i|r,Fi=s+t}else Vi=1<<s|n<<i|r,Fi=t}function RE(t){t.return!==null&&(ea(t,1),KD(t,1,0))}function CE(t){for(;t===Km;)Km=Gl[--Xl],Gl[Xl]=null,qm=Gl[--Xl],Gl[Xl]=null;for(;t===Oa;)Oa=ar[--lr],ar[lr]=null,Fi=ar[--lr],ar[lr]=null,Vi=ar[--lr],ar[lr]=null}var Xn=null,Kn=null,Je=!1,Mr=null;function qD(t,e){var n=cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oa!==null?{id:Vi,overflow:Fi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Kn=null,!0):!1;default:return!1}}function Hw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kw(t){if(Je){var e=Kn;if(e){var n=e;if(!qR(t,e)){if(Hw(t))throw Error(H(418));e=io(n.nextSibling);var r=Xn;e&&qR(t,e)?qD(r,n):(t.flags=t.flags&-4097|2,Je=!1,Xn=t)}}else{if(Hw(t))throw Error(H(418));t.flags=t.flags&-4097|2,Je=!1,Xn=t}}}function GR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function ip(t){if(t!==Xn)return!1;if(!Je)return GR(t),Je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uw(t.type,t.memoizedProps)),e&&(e=Kn)){if(Hw(t))throw GD(),Error(H(418));for(;e;)qD(t,e),e=io(e.nextSibling)}if(GR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kn=io(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kn=null}}else Kn=Xn?io(t.stateNode.nextSibling):null;return!0}function GD(){for(var t=Kn;t;)t=io(t.nextSibling)}function bu(){Kn=Xn=null,Je=!1}function xE(t){Mr===null?Mr=[t]:Mr.push(t)}var c$=ss.ReactCurrentBatchConfig;function Uc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function sp(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function XR(t){var e=t._init;return e(t._payload)}function XD(t){function e(S,y){if(t){var w=S.deletions;w===null?(S.deletions=[y],S.flags|=16):w.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function r(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function i(S,y){return S=lo(S,y),S.index=0,S.sibling=null,S}function s(S,y,w){return S.index=w,t?(w=S.alternate,w!==null?(w=w.index,w<y?(S.flags|=2,y):w):(S.flags|=2,y)):(S.flags|=1048576,y)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,y,w,x){return y===null||y.tag!==6?(y=Zv(w,S.mode,x),y.return=S,y):(y=i(y,w),y.return=S,y)}function l(S,y,w,x){var O=w.type;return O===$l?c(S,y,w.props.children,x,w.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Us&&XR(O)===y.type)?(x=i(y,w.props),x.ref=Uc(S,y,w),x.return=S,x):(x=Yp(w.type,w.key,w.props,null,S.mode,x),x.ref=Uc(S,y,w),x.return=S,x)}function u(S,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=e_(w,S.mode,x),y.return=S,y):(y=i(y,w.children||[]),y.return=S,y)}function c(S,y,w,x,O){return y===null||y.tag!==7?(y=ba(w,S.mode,x,O),y.return=S,y):(y=i(y,w),y.return=S,y)}function d(S,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Zv(""+y,S.mode,w),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gf:return w=Yp(y.type,y.key,y.props,null,S.mode,w),w.ref=Uc(S,null,y),w.return=S,w;case Ul:return y=e_(y,S.mode,w),y.return=S,y;case Us:var x=y._init;return d(S,x(y._payload),w)}if(rh(y)||Lc(y))return y=ba(y,S.mode,w,null),y.return=S,y;sp(S,y)}return null}function f(S,y,w,x){var O=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(S,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gf:return w.key===O?l(S,y,w,x):null;case Ul:return w.key===O?u(S,y,w,x):null;case Us:return O=w._init,f(S,y,O(w._payload),x)}if(rh(w)||Lc(w))return O!==null?null:c(S,y,w,x,null);sp(S,w)}return null}function p(S,y,w,x,O){if(typeof x=="string"&&x!==""||typeof x=="number")return S=S.get(w)||null,a(y,S,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gf:return S=S.get(x.key===null?w:x.key)||null,l(y,S,x,O);case Ul:return S=S.get(x.key===null?w:x.key)||null,u(y,S,x,O);case Us:var k=x._init;return p(S,y,w,k(x._payload),O)}if(rh(x)||Lc(x))return S=S.get(w)||null,c(y,S,x,O,null);sp(y,x)}return null}function g(S,y,w,x){for(var O=null,k=null,T=y,v=y=0,R=null;T!==null&&v<w.length;v++){T.index>v?(R=T,T=null):R=T.sibling;var C=f(S,T,w[v],x);if(C===null){T===null&&(T=R);break}t&&T&&C.alternate===null&&e(S,T),y=s(C,y,v),k===null?O=C:k.sibling=C,k=C,T=R}if(v===w.length)return n(S,T),Je&&ea(S,v),O;if(T===null){for(;v<w.length;v++)T=d(S,w[v],x),T!==null&&(y=s(T,y,v),k===null?O=T:k.sibling=T,k=T);return Je&&ea(S,v),O}for(T=r(S,T);v<w.length;v++)R=p(T,S,v,w[v],x),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?v:R.key),y=s(R,y,v),k===null?O=R:k.sibling=R,k=R);return t&&T.forEach(function(A){return e(S,A)}),Je&&ea(S,v),O}function E(S,y,w,x){var O=Lc(w);if(typeof O!="function")throw Error(H(150));if(w=O.call(w),w==null)throw Error(H(151));for(var k=O=null,T=y,v=y=0,R=null,C=w.next();T!==null&&!C.done;v++,C=w.next()){T.index>v?(R=T,T=null):R=T.sibling;var A=f(S,T,C.value,x);if(A===null){T===null&&(T=R);break}t&&T&&A.alternate===null&&e(S,T),y=s(A,y,v),k===null?O=A:k.sibling=A,k=A,T=R}if(C.done)return n(S,T),Je&&ea(S,v),O;if(T===null){for(;!C.done;v++,C=w.next())C=d(S,C.value,x),C!==null&&(y=s(C,y,v),k===null?O=C:k.sibling=C,k=C);return Je&&ea(S,v),O}for(T=r(S,T);!C.done;v++,C=w.next())C=p(T,S,v,C.value,x),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?v:C.key),y=s(C,y,v),k===null?O=C:k.sibling=C,k=C);return t&&T.forEach(function(N){return e(S,N)}),Je&&ea(S,v),O}function b(S,y,w,x){if(typeof w=="object"&&w!==null&&w.type===$l&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Gf:e:{for(var O=w.key,k=y;k!==null;){if(k.key===O){if(O=w.type,O===$l){if(k.tag===7){n(S,k.sibling),y=i(k,w.props.children),y.return=S,S=y;break e}}else if(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Us&&XR(O)===k.type){n(S,k.sibling),y=i(k,w.props),y.ref=Uc(S,k,w),y.return=S,S=y;break e}n(S,k);break}else e(S,k);k=k.sibling}w.type===$l?(y=ba(w.props.children,S.mode,x,w.key),y.return=S,S=y):(x=Yp(w.type,w.key,w.props,null,S.mode,x),x.ref=Uc(S,y,w),x.return=S,S=x)}return o(S);case Ul:e:{for(k=w.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(S,y.sibling),y=i(y,w.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=e_(w,S.mode,x),y.return=S,S=y}return o(S);case Us:return k=w._init,b(S,y,k(w._payload),x)}if(rh(w))return g(S,y,w,x);if(Lc(w))return E(S,y,w,x);sp(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(S,y.sibling),y=i(y,w),y.return=S,S=y):(n(S,y),y=Zv(w,S.mode,x),y.return=S,S=y),o(S)):n(S,y)}return b}var Iu=XD(!0),QD=XD(!1),Gm=Ro(null),Xm=null,Ql=null,AE=null;function PE(){AE=Ql=Xm=null}function kE(t){var e=Gm.current;Xe(Gm),t._currentValue=e}function qw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hu(t,e){Xm=t,AE=Ql=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function gr(t){var e=t._currentValue;if(AE!==t)if(t={context:t,memoizedValue:e,next:null},Ql===null){if(Xm===null)throw Error(H(308));Ql=t,Xm.dependencies={lanes:0,firstContext:t}}else Ql=Ql.next=t;return e}var fa=null;function DE(t){fa===null?fa=[t]:fa.push(t)}function YD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,DE(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xi(t,r)}function Xi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $s=!1;function OE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function so(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xi(t,n)}return i=r.interleaved,i===null?(e.next=e,DE(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xi(t,n)}function Hp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vE(t,n)}}function QR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qm(t,e,n,r){var i=t.updateQueue;$s=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,E=a;switch(f=e,p=n,E.tag){case 1:if(g=E.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=E.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=ot({},d,f);break e;case 2:$s=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Na|=o,t.lanes=o,t.memoizedState=d}}function YR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var Qd={},di=Ro(Qd),hd=Ro(Qd),dd=Ro(Qd);function pa(t){if(t===Qd)throw Error(H(174));return t}function ME(t,e){switch(We(dd,e),We(hd,t),We(di,Qd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cw(e,t)}Xe(di),We(di,e)}function Ru(){Xe(di),Xe(hd),Xe(dd)}function ZD(t){pa(dd.current);var e=pa(di.current),n=Cw(e,t.type);e!==n&&(We(hd,t),We(di,n))}function NE(t){hd.current===t&&(Xe(di),Xe(hd))}var tt=Ro(0);function Ym(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qv=[];function LE(){for(var t=0;t<qv.length;t++)qv[t]._workInProgressVersionPrimary=null;qv.length=0}var Kp=ss.ReactCurrentDispatcher,Gv=ss.ReactCurrentBatchConfig,Ma=0,it=null,Pt=null,Ut=null,Jm=!1,xh=!1,fd=0,h$=0;function Jt(){throw Error(H(321))}function VE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function FE(t,e,n,r,i,s){if(Ma=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kp.current=t===null||t.memoizedState===null?m$:g$,t=n(r,i),xh){s=0;do{if(xh=!1,fd=0,25<=s)throw Error(H(301));s+=1,Ut=Pt=null,e.updateQueue=null,Kp.current=y$,t=n(r,i)}while(xh)}if(Kp.current=Zm,e=Pt!==null&&Pt.next!==null,Ma=0,Ut=Pt=it=null,Jm=!1,e)throw Error(H(300));return t}function BE(){var t=fd!==0;return fd=0,t}function Zr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?it.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function yr(){if(Pt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Pt.next;var e=Ut===null?it.memoizedState:Ut.next;if(e!==null)Ut=e,Pt=t;else{if(t===null)throw Error(H(310));Pt=t,t={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Ut===null?it.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function pd(t,e){return typeof e=="function"?e(t):e}function Xv(t){var e=yr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ma&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,it.lanes|=c,Na|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,jr(r,e.memoizedState)||(Rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,Na|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qv(t){var e=yr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jr(s,e.memoizedState)||(Rn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function eO(){}function tO(t,e){var n=it,r=yr(),i=e(),s=!jr(r.memoizedState,i);if(s&&(r.memoizedState=i,Rn=!0),r=r.queue,jE(iO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,md(9,rO.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(H(349));Ma&30||nO(n,e,i)}return i}function nO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rO(t,e,n,r){e.value=n,e.getSnapshot=r,sO(e)&&oO(t)}function iO(t,e,n){return n(function(){sO(e)&&oO(t)})}function sO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jr(t,n)}catch{return!0}}function oO(t){var e=Xi(t,1);e!==null&&Br(e,t,1,-1)}function JR(t){var e=Zr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pd,lastRenderedState:t},e.queue=t,t=t.dispatch=p$.bind(null,it,t),[e.memoizedState,t]}function md(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aO(){return yr().memoizedState}function qp(t,e,n,r){var i=Zr();it.flags|=t,i.memoizedState=md(1|e,n,void 0,r===void 0?null:r)}function py(t,e,n,r){var i=yr();r=r===void 0?null:r;var s=void 0;if(Pt!==null){var o=Pt.memoizedState;if(s=o.destroy,r!==null&&VE(r,o.deps)){i.memoizedState=md(e,n,s,r);return}}it.flags|=t,i.memoizedState=md(1|e,n,s,r)}function ZR(t,e){return qp(8390656,8,t,e)}function jE(t,e){return py(2048,8,t,e)}function lO(t,e){return py(4,2,t,e)}function uO(t,e){return py(4,4,t,e)}function cO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hO(t,e,n){return n=n!=null?n.concat([t]):null,py(4,4,cO.bind(null,e,t),n)}function UE(){}function dO(t,e){var n=yr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fO(t,e){var n=yr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pO(t,e,n){return Ma&21?(jr(n,e)||(n=_D(),it.lanes|=n,Na|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=n)}function d$(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Gv.transition;Gv.transition={};try{t(!1),e()}finally{Ve=n,Gv.transition=r}}function mO(){return yr().memoizedState}function f$(t,e,n){var r=ao(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gO(t))yO(e,n);else if(n=YD(t,e,n,r),n!==null){var i=vn();Br(n,t,r,i),vO(n,e,r)}}function p$(t,e,n){var r=ao(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gO(t))yO(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,jr(a,o)){var l=e.interleaved;l===null?(i.next=i,DE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YD(t,e,i,r),n!==null&&(i=vn(),Br(n,t,r,i),vO(n,e,r))}}function gO(t){var e=t.alternate;return t===it||e!==null&&e===it}function yO(t,e){xh=Jm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vE(t,n)}}var Zm={readContext:gr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},m$={readContext:gr,useCallback:function(t,e){return Zr().memoizedState=[t,e===void 0?null:e],t},useContext:gr,useEffect:ZR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qp(4194308,4,cO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qp(4194308,4,t,e)},useInsertionEffect:function(t,e){return qp(4,2,t,e)},useMemo:function(t,e){var n=Zr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=f$.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Zr();return t={current:t},e.memoizedState=t},useState:JR,useDebugValue:UE,useDeferredValue:function(t){return Zr().memoizedState=t},useTransition:function(){var t=JR(!1),e=t[0];return t=d$.bind(null,t[1]),Zr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Zr();if(Je){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),$t===null)throw Error(H(349));Ma&30||nO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ZR(iO.bind(null,r,s,t),[t]),r.flags|=2048,md(9,rO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zr(),e=$t.identifierPrefix;if(Je){var n=Fi,r=Vi;n=(r&~(1<<32-Fr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=h$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g$={readContext:gr,useCallback:dO,useContext:gr,useEffect:jE,useImperativeHandle:hO,useInsertionEffect:lO,useLayoutEffect:uO,useMemo:fO,useReducer:Xv,useRef:aO,useState:function(){return Xv(pd)},useDebugValue:UE,useDeferredValue:function(t){var e=yr();return pO(e,Pt.memoizedState,t)},useTransition:function(){var t=Xv(pd)[0],e=yr().memoizedState;return[t,e]},useMutableSource:eO,useSyncExternalStore:tO,useId:mO,unstable_isNewReconciler:!1},y$={readContext:gr,useCallback:dO,useContext:gr,useEffect:jE,useImperativeHandle:hO,useInsertionEffect:lO,useLayoutEffect:uO,useMemo:fO,useReducer:Qv,useRef:aO,useState:function(){return Qv(pd)},useDebugValue:UE,useDeferredValue:function(t){var e=yr();return Pt===null?e.memoizedState=t:pO(e,Pt.memoizedState,t)},useTransition:function(){var t=Qv(pd)[0],e=yr().memoizedState;return[t,e]},useMutableSource:eO,useSyncExternalStore:tO,useId:mO,unstable_isNewReconciler:!1};function Pr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var my={isMounted:function(t){return(t=t._reactInternals)?Ja(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),i=ao(t),s=zi(r,i);s.payload=e,n!=null&&(s.callback=n),e=so(t,s,i),e!==null&&(Br(e,t,i,r),Hp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),i=ao(t),s=zi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=so(t,s,i),e!==null&&(Br(e,t,i,r),Hp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=ao(t),i=zi(n,r);i.tag=2,e!=null&&(i.callback=e),e=so(t,i,r),e!==null&&(Br(e,t,r,n),Hp(e,t,r))}};function eC(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ad(n,r)||!ad(i,s):!0}function _O(t,e,n){var r=!1,i=go,s=e.contextType;return typeof s=="object"&&s!==null?s=gr(s):(i=kn(e)?Da:un.current,r=e.contextTypes,s=(r=r!=null)?Tu(t,i):go),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=my,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function tC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&my.enqueueReplaceState(e,e.state,null)}function Xw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},OE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gr(s):(s=kn(e)?Da:un.current,i.context=Tu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Gw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&my.enqueueReplaceState(i,i.state,null),Qm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cu(t,e){try{var n="",r=e;do n+=HU(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Yv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v$=typeof WeakMap=="function"?WeakMap:Map;function wO(t,e,n){n=zi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tg||(tg=!0,oS=r),Qw(t,e)},n}function SO(t,e,n){n=zi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Qw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Qw(t,e),typeof r!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=D$.bind(null,t,e,n),e.then(t,t))}function rC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zi(-1,1),e.tag=2,so(n,e,1))),n.lanes|=1),t)}var _$=ss.ReactCurrentOwner,Rn=!1;function mn(t,e,n,r){e.child=t===null?QD(e,null,n,r):Iu(e,t.child,n,r)}function sC(t,e,n,r,i){n=n.render;var s=e.ref;return hu(e,i),r=FE(t,e,n,r,s,i),n=BE(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(Je&&n&&RE(e),e.flags|=1,mn(t,e,r,i),e.child)}function oC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!XE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,EO(t,e,s,r,i)):(t=Yp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ad,n(o,r)&&t.ref===e.ref)return Qi(t,e,i)}return e.flags|=1,t=lo(s,r),t.ref=e.ref,t.return=e,e.child=t}function EO(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ad(s,r)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,Qi(t,e,i)}return Yw(t,e,n,r,i)}function TO(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Jl,$n),$n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(Jl,$n),$n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(Jl,$n),$n|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,We(Jl,$n),$n|=r;return mn(t,e,i,n),e.child}function bO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yw(t,e,n,r,i){var s=kn(n)?Da:un.current;return s=Tu(e,s),hu(e,i),n=FE(t,e,n,r,s,i),r=BE(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(Je&&r&&RE(e),e.flags|=1,mn(t,e,n,i),e.child)}function aC(t,e,n,r,i){if(kn(n)){var s=!0;Hm(e)}else s=!1;if(hu(e,i),e.stateNode===null)Gp(t,e),_O(e,n,r),Xw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gr(u):(u=kn(n)?Da:un.current,u=Tu(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&tC(e,o,r,u),$s=!1;var f=e.memoizedState;o.state=f,Qm(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Pn.current||$s?(typeof c=="function"&&(Gw(e,n,c,r),l=e.memoizedState),(a=$s||eC(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,JD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Pr(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gr(l):(l=kn(n)?Da:un.current,l=Tu(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&tC(e,o,r,l),$s=!1,f=e.memoizedState,o.state=f,Qm(e,r,o,i);var g=e.memoizedState;a!==d||f!==g||Pn.current||$s?(typeof p=="function"&&(Gw(e,n,p,r),g=e.memoizedState),(u=$s||eC(e,n,u,r,f,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Jw(t,e,n,r,s,i)}function Jw(t,e,n,r,i,s){bO(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&KR(e,n,!1),Qi(t,e,s);r=e.stateNode,_$.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Iu(e,t.child,null,s),e.child=Iu(e,null,a,s)):mn(t,e,a,s),e.memoizedState=r.state,i&&KR(e,n,!0),e.child}function IO(t){var e=t.stateNode;e.pendingContext?HR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&HR(t,e.context,!1),ME(t,e.containerInfo)}function lC(t,e,n,r,i){return bu(),xE(i),e.flags|=256,mn(t,e,n,r),e.child}var Zw={dehydrated:null,treeContext:null,retryLane:0};function eS(t){return{baseLanes:t,cachePool:null,transitions:null}}function RO(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),We(tt,i&1),t===null)return Kw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=vy(o,r,0,null),t=ba(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=eS(n),e.memoizedState=Zw,t):$E(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return w$(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=lo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=lo(a,s):(s=ba(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?eS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zw,r}return s=t.child,t=s.sibling,r=lo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $E(t,e){return e=vy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function op(t,e,n,r){return r!==null&&xE(r),Iu(e,t.child,null,n),t=$E(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w$(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Yv(Error(H(422))),op(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=vy({mode:"visible",children:r.children},i,0,null),s=ba(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Iu(e,t.child,null,o),e.child.memoizedState=eS(o),e.memoizedState=Zw,s);if(!(e.mode&1))return op(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=Yv(s,r,void 0),op(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rn||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xi(t,i),Br(r,t,i,-1))}return GE(),r=Yv(Error(H(421))),op(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=O$.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kn=io(i.nextSibling),Xn=e,Je=!0,Mr=null,t!==null&&(ar[lr++]=Vi,ar[lr++]=Fi,ar[lr++]=Oa,Vi=t.id,Fi=t.overflow,Oa=e),e=$E(e,r.children),e.flags|=4096,e)}function uC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qw(t.return,e,n)}function Jv(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function CO(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uC(t,n,e);else if(t.tag===19)uC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ym(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Jv(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ym(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Jv(e,!0,n,null,s);break;case"together":Jv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Na|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=lo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function S$(t,e,n){switch(e.tag){case 3:IO(e),bu();break;case 5:ZD(e);break;case 1:kn(e.type)&&Hm(e);break;case 4:ME(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;We(Gm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?RO(t,e,n):(We(tt,tt.current&1),t=Qi(t,e,n),t!==null?t.sibling:null);We(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return CO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,TO(t,e,n)}return Qi(t,e,n)}var xO,tS,AO,PO;xO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tS=function(){};AO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pa(di.current);var s=null;switch(n){case"input":i=Tw(t,i),r=Tw(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=Rw(t,i),r=Rw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zm)}xw(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ed.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ed.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ge("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};PO=function(t,e,n,r){n!==r&&(e.flags|=4)};function $c(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function E$(t,e,n){var r=e.pendingProps;switch(CE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return kn(e.type)&&Wm(),Zt(e),null;case 3:return r=e.stateNode,Ru(),Xe(Pn),Xe(un),LE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ip(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(uS(Mr),Mr=null))),tS(t,e),Zt(e),null;case 5:NE(e);var i=pa(dd.current);if(n=e.type,t!==null&&e.stateNode!=null)AO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Zt(e),null}if(t=pa(di.current),ip(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ri]=e,r[cd]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<sh.length;i++)Ge(sh[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":vR(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":wR(r,s),Ge("invalid",r)}xw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&rp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&rp(r.textContent,a,t),i=["children",""+a]):ed.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Xf(r),_R(r,s,!0);break;case"textarea":Xf(r),SR(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ri]=e,t[cd]=r,xO(t,e,!1,!1),e.stateNode=t;e:{switch(o=Aw(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<sh.length;i++)Ge(sh[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":vR(t,r),i=Tw(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":wR(t,r),i=Rw(t,r),Ge("invalid",t);break;default:i=r}xw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?aD(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sD(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&td(t,l):typeof l=="number"&&td(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ed.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",t):l!=null&&dE(t,s,l,o))}switch(n){case"input":Xf(t),_R(t,r,!1);break;case"textarea":Xf(t),SR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?au(t,!!r.multiple,s,!1):r.defaultValue!=null&&au(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)PO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=pa(dd.current),pa(di.current),ip(e)){if(r=e.stateNode,n=e.memoizedProps,r[ri]=e,(s=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:rp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ri]=e,e.stateNode=r}return Zt(e),null;case 13:if(Xe(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&Kn!==null&&e.mode&1&&!(e.flags&128))GD(),bu(),e.flags|=98560,s=!1;else if(s=ip(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[ri]=e}else bu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else Mr!==null&&(uS(Mr),Mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?kt===0&&(kt=3):GE())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Ru(),tS(t,e),t===null&&ld(e.stateNode.containerInfo),Zt(e),null;case 10:return kE(e.type._context),Zt(e),null;case 17:return kn(e.type)&&Wm(),Zt(e),null;case 19:if(Xe(tt),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$c(s,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ym(t),o!==null){for(e.flags|=128,$c(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&yt()>xu&&(e.flags|=128,r=!0,$c(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ym(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$c(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Je)return Zt(e),null}else 2*yt()-s.renderingStartTime>xu&&n!==1073741824&&(e.flags|=128,r=!0,$c(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yt(),e.sibling=null,n=tt.current,We(tt,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return qE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$n&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function T$(t,e){switch(CE(e),e.tag){case 1:return kn(e.type)&&Wm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ru(),Xe(Pn),Xe(un),LE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NE(e),null;case 13:if(Xe(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));bu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(tt),null;case 4:return Ru(),null;case 10:return kE(e.type._context),null;case 22:case 23:return qE(),null;case 24:return null;default:return null}}var ap=!1,sn=!1,b$=typeof WeakSet=="function"?WeakSet:Set,J=null;function Yl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function nS(t,e,n){try{n()}catch(r){ht(t,e,r)}}var cC=!1;function I$(t,e){if(Bw=jm,t=ND(),IE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jw={focusedElem:t,selectionRange:n},jm=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var E=g.memoizedProps,b=g.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:Pr(e.type,E),b);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(x){ht(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return g=cC,cC=!1,g}function Ah(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nS(e,n,s)}i=i.next}while(i!==r)}}function gy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kO(t){var e=t.alternate;e!==null&&(t.alternate=null,kO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[cd],delete e[zw],delete e[a$],delete e[l$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function DO(t){return t.tag===5||t.tag===3||t.tag===4}function hC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||DO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zm));else if(r!==4&&(t=t.child,t!==null))for(iS(t,e,n),t=t.sibling;t!==null;)iS(t,e,n),t=t.sibling}function sS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sS(t,e,n),t=t.sibling;t!==null;)sS(t,e,n),t=t.sibling}var Wt=null,Dr=!1;function As(t,e,n){for(n=n.child;n!==null;)OO(t,e,n),n=n.sibling}function OO(t,e,n){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(ly,n)}catch{}switch(n.tag){case 5:sn||Yl(n,e);case 6:var r=Wt,i=Dr;Wt=null,As(t,e,n),Wt=r,Dr=i,Wt!==null&&(Dr?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(Dr?(t=Wt,n=n.stateNode,t.nodeType===8?Hv(t.parentNode,n):t.nodeType===1&&Hv(t,n),sd(t)):Hv(Wt,n.stateNode));break;case 4:r=Wt,i=Dr,Wt=n.stateNode.containerInfo,Dr=!0,As(t,e,n),Wt=r,Dr=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nS(n,e,o),i=i.next}while(i!==r)}As(t,e,n);break;case 1:if(!sn&&(Yl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}As(t,e,n);break;case 21:As(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,As(t,e,n),sn=r):As(t,e,n);break;default:As(t,e,n)}}function dC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b$),e.forEach(function(r){var i=M$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function br(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wt=a.stateNode,Dr=!1;break e;case 3:Wt=a.stateNode.containerInfo,Dr=!0;break e;case 4:Wt=a.stateNode.containerInfo,Dr=!0;break e}a=a.return}if(Wt===null)throw Error(H(160));OO(s,o,i),Wt=null,Dr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ht(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MO(e,t),e=e.sibling}function MO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(br(e,t),Qr(t),r&4){try{Ah(3,t,t.return),gy(3,t)}catch(E){ht(t,t.return,E)}try{Ah(5,t,t.return)}catch(E){ht(t,t.return,E)}}break;case 1:br(e,t),Qr(t),r&512&&n!==null&&Yl(n,n.return);break;case 5:if(br(e,t),Qr(t),r&512&&n!==null&&Yl(n,n.return),t.flags&32){var i=t.stateNode;try{td(i,"")}catch(E){ht(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nD(i,s),Aw(a,o);var u=Aw(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?aD(i,d):c==="dangerouslySetInnerHTML"?sD(i,d):c==="children"?td(i,d):dE(i,c,d,u)}switch(a){case"input":bw(i,s);break;case"textarea":rD(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?au(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?au(i,!!s.multiple,s.defaultValue,!0):au(i,!!s.multiple,s.multiple?[]:"",!1))}i[cd]=s}catch(E){ht(t,t.return,E)}}break;case 6:if(br(e,t),Qr(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){ht(t,t.return,E)}}break;case 3:if(br(e,t),Qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sd(e.containerInfo)}catch(E){ht(t,t.return,E)}break;case 4:br(e,t),Qr(t);break;case 13:br(e,t),Qr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(HE=yt())),r&4&&dC(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(u=sn)||c,br(e,t),sn=u):br(e,t),Qr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(J=t,c=t.child;c!==null;){for(d=J=c;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ah(4,f,f.return);break;case 1:Yl(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(E){ht(r,n,E)}}break;case 5:Yl(f,f.return);break;case 22:if(f.memoizedState!==null){pC(d);continue}}p!==null?(p.return=f,J=p):pC(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oD("display",o))}catch(E){ht(t,t.return,E)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){ht(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:br(e,t),Qr(t),r&4&&dC(t);break;case 21:break;default:br(e,t),Qr(t)}}function Qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(DO(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(td(i,""),r.flags&=-33);var s=hC(t);sS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hC(t);iS(t,a,o);break;default:throw Error(H(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function R$(t,e,n){J=t,NO(t)}function NO(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ap;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||sn;a=ap;var u=sn;if(ap=o,(sn=l)&&!u)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?mC(i):l!==null?(l.return=o,J=l):mC(i);for(;s!==null;)J=s,NO(s),s=s.sibling;J=i,ap=a,sn=u}fC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):fC(t)}}function fC(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||gy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&YR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}YR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&sd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}sn||e.flags&512&&rS(e)}catch(f){ht(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function pC(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function mC(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gy(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ht(e,i,l)}}var s=e.return;try{rS(e)}catch(l){ht(e,s,l)}break;case 5:var o=e.return;try{rS(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var C$=Math.ceil,eg=ss.ReactCurrentDispatcher,zE=ss.ReactCurrentOwner,fr=ss.ReactCurrentBatchConfig,xe=0,$t=null,Tt=null,Xt=0,$n=0,Jl=Ro(0),kt=0,gd=null,Na=0,yy=0,WE=0,Ph=null,In=null,HE=0,xu=1/0,Mi=null,tg=!1,oS=null,oo=null,lp=!1,Zs=null,ng=0,kh=0,aS=null,Xp=-1,Qp=0;function vn(){return xe&6?yt():Xp!==-1?Xp:Xp=yt()}function ao(t){return t.mode&1?xe&2&&Xt!==0?Xt&-Xt:c$.transition!==null?(Qp===0&&(Qp=_D()),Qp):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:RD(t.type)),t):1}function Br(t,e,n,r){if(50<kh)throw kh=0,aS=null,Error(H(185));qd(t,n,r),(!(xe&2)||t!==$t)&&(t===$t&&(!(xe&2)&&(yy|=n),kt===4&&Hs(t,Xt)),Dn(t,r),n===1&&xe===0&&!(e.mode&1)&&(xu=yt()+500,fy&&Co()))}function Dn(t,e){var n=t.callbackNode;c4(t,e);var r=Bm(t,t===$t?Xt:0);if(r===0)n!==null&&bR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bR(n),e===1)t.tag===0?u$(gC.bind(null,t)):HD(gC.bind(null,t)),s$(function(){!(xe&6)&&Co()}),n=null;else{switch(wD(r)){case 1:n=yE;break;case 4:n=yD;break;case 16:n=Fm;break;case 536870912:n=vD;break;default:n=Fm}n=zO(n,LO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LO(t,e){if(Xp=-1,Qp=0,xe&6)throw Error(H(327));var n=t.callbackNode;if(du()&&t.callbackNode!==n)return null;var r=Bm(t,t===$t?Xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rg(t,r);else{e=r;var i=xe;xe|=2;var s=FO();($t!==t||Xt!==e)&&(Mi=null,xu=yt()+500,Ta(t,e));do try{P$();break}catch(a){VO(t,a)}while(!0);PE(),eg.current=s,xe=i,Tt!==null?e=0:($t=null,Xt=0,e=kt)}if(e!==0){if(e===2&&(i=Mw(t),i!==0&&(r=i,e=lS(t,i))),e===1)throw n=gd,Ta(t,0),Hs(t,r),Dn(t,yt()),n;if(e===6)Hs(t,r);else{if(i=t.current.alternate,!(r&30)&&!x$(i)&&(e=rg(t,r),e===2&&(s=Mw(t),s!==0&&(r=s,e=lS(t,s))),e===1))throw n=gd,Ta(t,0),Hs(t,r),Dn(t,yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:ta(t,In,Mi);break;case 3:if(Hs(t,r),(r&130023424)===r&&(e=HE+500-yt(),10<e)){if(Bm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$w(ta.bind(null,t,In,Mi),e);break}ta(t,In,Mi);break;case 4:if(Hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*C$(r/1960))-r,10<r){t.timeoutHandle=$w(ta.bind(null,t,In,Mi),r);break}ta(t,In,Mi);break;case 5:ta(t,In,Mi);break;default:throw Error(H(329))}}}return Dn(t,yt()),t.callbackNode===n?LO.bind(null,t):null}function lS(t,e){var n=Ph;return t.current.memoizedState.isDehydrated&&(Ta(t,e).flags|=256),t=rg(t,e),t!==2&&(e=In,In=n,e!==null&&uS(e)),t}function uS(t){In===null?In=t:In.push.apply(In,t)}function x$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hs(t,e){for(e&=~WE,e&=~yy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fr(e),r=1<<n;t[n]=-1,e&=~r}}function gC(t){if(xe&6)throw Error(H(327));du();var e=Bm(t,0);if(!(e&1))return Dn(t,yt()),null;var n=rg(t,e);if(t.tag!==0&&n===2){var r=Mw(t);r!==0&&(e=r,n=lS(t,r))}if(n===1)throw n=gd,Ta(t,0),Hs(t,e),Dn(t,yt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ta(t,In,Mi),Dn(t,yt()),null}function KE(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(xu=yt()+500,fy&&Co())}}function La(t){Zs!==null&&Zs.tag===0&&!(xe&6)&&du();var e=xe;xe|=1;var n=fr.transition,r=Ve;try{if(fr.transition=null,Ve=1,t)return t()}finally{Ve=r,fr.transition=n,xe=e,!(xe&6)&&Co()}}function qE(){$n=Jl.current,Xe(Jl)}function Ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,i$(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(CE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wm();break;case 3:Ru(),Xe(Pn),Xe(un),LE();break;case 5:NE(r);break;case 4:Ru();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:kE(r.type._context);break;case 22:case 23:qE()}n=n.return}if($t=t,Tt=t=lo(t.current,null),Xt=$n=e,kt=0,gd=null,WE=yy=Na=0,In=Ph=null,fa!==null){for(e=0;e<fa.length;e++)if(n=fa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}fa=null}return t}function VO(t,e){do{var n=Tt;try{if(PE(),Kp.current=Zm,Jm){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Jm=!1}if(Ma=0,Ut=Pt=it=null,xh=!1,fd=0,zE.current=null,n===null||n.return===null){kt=1,gd=e,Tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=rC(o);if(p!==null){p.flags&=-257,iC(p,o,a,s,e),p.mode&1&&nC(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var E=new Set;E.add(l),e.updateQueue=E}else g.add(l);break e}else{if(!(e&1)){nC(s,u,e),GE();break e}l=Error(H(426))}}else if(Je&&a.mode&1){var b=rC(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),iC(b,o,a,s,e),xE(Cu(l,a));break e}}s=l=Cu(l,a),kt!==4&&(kt=2),Ph===null?Ph=[s]:Ph.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=wO(s,l,e);QR(s,S);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oo===null||!oo.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=SO(s,a,e);QR(s,x);break e}}s=s.return}while(s!==null)}jO(n)}catch(O){e=O,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function FO(){var t=eg.current;return eg.current=Zm,t===null?Zm:t}function GE(){(kt===0||kt===3||kt===2)&&(kt=4),$t===null||!(Na&268435455)&&!(yy&268435455)||Hs($t,Xt)}function rg(t,e){var n=xe;xe|=2;var r=FO();($t!==t||Xt!==e)&&(Mi=null,Ta(t,e));do try{A$();break}catch(i){VO(t,i)}while(!0);if(PE(),xe=n,eg.current=r,Tt!==null)throw Error(H(261));return $t=null,Xt=0,kt}function A$(){for(;Tt!==null;)BO(Tt)}function P$(){for(;Tt!==null&&!t4();)BO(Tt)}function BO(t){var e=$O(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?jO(t):Tt=e,zE.current=null}function jO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=T$(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,Tt=null;return}}else if(n=E$(n,e,$n),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);kt===0&&(kt=5)}function ta(t,e,n){var r=Ve,i=fr.transition;try{fr.transition=null,Ve=1,k$(t,e,n,r)}finally{fr.transition=i,Ve=r}return null}function k$(t,e,n,r){do du();while(Zs!==null);if(xe&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(h4(t,s),t===$t&&(Tt=$t=null,Xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lp||(lp=!0,zO(Fm,function(){return du(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fr.transition,fr.transition=null;var o=Ve;Ve=1;var a=xe;xe|=4,zE.current=null,I$(t,n),MO(n,t),Y4(jw),jm=!!Bw,jw=Bw=null,t.current=n,R$(n),n4(),xe=a,Ve=o,fr.transition=s}else t.current=n;if(lp&&(lp=!1,Zs=t,ng=i),s=t.pendingLanes,s===0&&(oo=null),s4(n.stateNode),Dn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tg)throw tg=!1,t=oS,oS=null,t;return ng&1&&t.tag!==0&&du(),s=t.pendingLanes,s&1?t===aS?kh++:(kh=0,aS=t):kh=0,Co(),null}function du(){if(Zs!==null){var t=wD(ng),e=fr.transition,n=Ve;try{if(fr.transition=null,Ve=16>t?16:t,Zs===null)var r=!1;else{if(t=Zs,Zs=null,ng=0,xe&6)throw Error(H(331));var i=xe;for(xe|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:Ah(8,c,s)}var d=c.child;if(d!==null)d.return=c,J=d;else for(;J!==null;){c=J;var f=c.sibling,p=c.return;if(kO(c),c===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var g=s.alternate;if(g!==null){var E=g.child;if(E!==null){g.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ah(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,J=S;break e}J=s.return}}var y=t.current;for(J=y;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=y;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gy(9,a)}}catch(O){ht(a,a.return,O)}if(a===o){J=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,J=x;break e}J=a.return}}if(xe=i,Co(),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(ly,t)}catch{}r=!0}return r}finally{Ve=n,fr.transition=e}}return!1}function yC(t,e,n){e=Cu(n,e),e=wO(t,e,1),t=so(t,e,1),e=vn(),t!==null&&(qd(t,1,e),Dn(t,e))}function ht(t,e,n){if(t.tag===3)yC(t,t,n);else for(;e!==null;){if(e.tag===3){yC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oo===null||!oo.has(r))){t=Cu(n,t),t=SO(e,t,1),e=so(e,t,1),t=vn(),e!==null&&(qd(e,1,t),Dn(e,t));break}}e=e.return}}function D$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Xt&n)===n&&(kt===4||kt===3&&(Xt&130023424)===Xt&&500>yt()-HE?Ta(t,0):WE|=n),Dn(t,e)}function UO(t,e){e===0&&(t.mode&1?(e=Jf,Jf<<=1,!(Jf&130023424)&&(Jf=4194304)):e=1);var n=vn();t=Xi(t,e),t!==null&&(qd(t,e,n),Dn(t,n))}function O$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),UO(t,n)}function M$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),UO(t,n)}var $O;$O=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rn=!1,S$(t,e,n);Rn=!!(t.flags&131072)}else Rn=!1,Je&&e.flags&1048576&&KD(e,qm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gp(t,e),t=e.pendingProps;var i=Tu(e,un.current);hu(e,n),i=FE(null,e,r,t,i,n);var s=BE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(s=!0,Hm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,OE(e),i.updater=my,e.stateNode=i,i._reactInternals=e,Xw(e,r,t,n),e=Jw(null,e,r,!0,s,n)):(e.tag=0,Je&&s&&RE(e),mn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=L$(r),t=Pr(r,t),i){case 0:e=Yw(null,e,r,t,n);break e;case 1:e=aC(null,e,r,t,n);break e;case 11:e=sC(null,e,r,t,n);break e;case 14:e=oC(null,e,r,Pr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pr(r,i),Yw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pr(r,i),aC(t,e,r,i,n);case 3:e:{if(IO(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,JD(t,e),Qm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cu(Error(H(423)),e),e=lC(t,e,r,n,i);break e}else if(r!==i){i=Cu(Error(H(424)),e),e=lC(t,e,r,n,i);break e}else for(Kn=io(e.stateNode.containerInfo.firstChild),Xn=e,Je=!0,Mr=null,n=QD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bu(),r===i){e=Qi(t,e,n);break e}mn(t,e,r,n)}e=e.child}return e;case 5:return ZD(e),t===null&&Kw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Uw(r,i)?o=null:s!==null&&Uw(r,s)&&(e.flags|=32),bO(t,e),mn(t,e,o,n),e.child;case 6:return t===null&&Kw(e),null;case 13:return RO(t,e,n);case 4:return ME(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Iu(e,null,r,n):mn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pr(r,i),sC(t,e,r,i,n);case 7:return mn(t,e,e.pendingProps,n),e.child;case 8:return mn(t,e,e.pendingProps.children,n),e.child;case 12:return mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,We(Gm,r._currentValue),r._currentValue=o,s!==null)if(jr(s.value,o)){if(s.children===i.children&&!Pn.current){e=Qi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=zi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),qw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hu(e,n),i=gr(i),r=r(i),e.flags|=1,mn(t,e,r,n),e.child;case 14:return r=e.type,i=Pr(r,e.pendingProps),i=Pr(r.type,i),oC(t,e,r,i,n);case 15:return EO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pr(r,i),Gp(t,e),e.tag=1,kn(r)?(t=!0,Hm(e)):t=!1,hu(e,n),_O(e,r,i),Xw(e,r,i,n),Jw(null,e,r,!0,t,n);case 19:return CO(t,e,n);case 22:return TO(t,e,n)}throw Error(H(156,e.tag))};function zO(t,e){return gD(t,e)}function N$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(t,e,n,r){return new N$(t,e,n,r)}function XE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function L$(t){if(typeof t=="function")return XE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pE)return 11;if(t===mE)return 14}return 2}function lo(t,e){var n=t.alternate;return n===null?(n=cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")XE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $l:return ba(n.children,i,s,e);case fE:o=8,i|=8;break;case _w:return t=cr(12,n,e,i|2),t.elementType=_w,t.lanes=s,t;case ww:return t=cr(13,n,e,i),t.elementType=ww,t.lanes=s,t;case Sw:return t=cr(19,n,e,i),t.elementType=Sw,t.lanes=s,t;case Zk:return vy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yk:o=10;break e;case Jk:o=9;break e;case pE:o=11;break e;case mE:o=14;break e;case Us:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=cr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ba(t,e,n,r){return t=cr(7,t,r,e),t.lanes=n,t}function vy(t,e,n,r){return t=cr(22,t,r,e),t.elementType=Zk,t.lanes=n,t.stateNode={isHidden:!1},t}function Zv(t,e,n){return t=cr(6,t,null,e),t.lanes=n,t}function e_(t,e,n){return e=cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function V$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mv(0),this.expirationTimes=Mv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QE(t,e,n,r,i,s,o,a,l){return t=new V$(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},OE(s),t}function F$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ul,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WO(t){if(!t)return go;t=t._reactInternals;e:{if(Ja(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(kn(n))return WD(t,n,e)}return e}function HO(t,e,n,r,i,s,o,a,l){return t=QE(n,r,!0,t,i,s,o,a,l),t.context=WO(null),n=t.current,r=vn(),i=ao(n),s=zi(r,i),s.callback=e??null,so(n,s,i),t.current.lanes=i,qd(t,i,r),Dn(t,r),t}function _y(t,e,n,r){var i=e.current,s=vn(),o=ao(i);return n=WO(n),e.context===null?e.context=n:e.pendingContext=n,e=zi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=so(i,e,o),t!==null&&(Br(t,i,o,s),Hp(t,i,o)),o}function ig(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function YE(t,e){vC(t,e),(t=t.alternate)&&vC(t,e)}function B$(){return null}var KO=typeof reportError=="function"?reportError:function(t){console.error(t)};function JE(t){this._internalRoot=t}wy.prototype.render=JE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));_y(t,e,null,null)};wy.prototype.unmount=JE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;La(function(){_y(null,t,null,null)}),e[Gi]=null}};function wy(t){this._internalRoot=t}wy.prototype.unstable_scheduleHydration=function(t){if(t){var e=TD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ws.length&&e!==0&&e<Ws[n].priority;n++);Ws.splice(n,0,t),n===0&&ID(t)}};function ZE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _C(){}function j$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ig(o);s.call(u)}}var o=HO(e,r,t,0,null,!1,!1,"",_C);return t._reactRootContainer=o,t[Gi]=o.current,ld(t.nodeType===8?t.parentNode:t),La(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ig(l);a.call(u)}}var l=QE(t,0,!1,null,null,!1,!1,"",_C);return t._reactRootContainer=l,t[Gi]=l.current,ld(t.nodeType===8?t.parentNode:t),La(function(){_y(e,l,n,r)}),l}function Ey(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ig(o);a.call(l)}}_y(e,o,t,i)}else o=j$(n,e,t,i,r);return ig(o)}SD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ih(e.pendingLanes);n!==0&&(vE(e,n|1),Dn(e,yt()),!(xe&6)&&(xu=yt()+500,Co()))}break;case 13:La(function(){var r=Xi(t,1);if(r!==null){var i=vn();Br(r,t,1,i)}}),YE(t,1)}};_E=function(t){if(t.tag===13){var e=Xi(t,134217728);if(e!==null){var n=vn();Br(e,t,134217728,n)}YE(t,134217728)}};ED=function(t){if(t.tag===13){var e=ao(t),n=Xi(t,e);if(n!==null){var r=vn();Br(n,t,e,r)}YE(t,e)}};TD=function(){return Ve};bD=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};kw=function(t,e,n){switch(e){case"input":if(bw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dy(r);if(!i)throw Error(H(90));tD(r),bw(r,i)}}}break;case"textarea":rD(t,n);break;case"select":e=n.value,e!=null&&au(t,!!n.multiple,e,!1)}};cD=KE;hD=La;var U$={usingClientEntryPoint:!1,Events:[Xd,Kl,dy,lD,uD,KE]},zc={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$$={bundleType:zc.bundleType,version:zc.version,rendererPackageName:zc.rendererPackageName,rendererConfig:zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pD(t),t===null?null:t.stateNode},findFiberByHostInstance:zc.findFiberByHostInstance||B$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!up.isDisabled&&up.supportsFiber)try{ly=up.inject($$),hi=up}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U$;er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZE(e))throw Error(H(200));return F$(t,e,null,n)};er.createRoot=function(t,e){if(!ZE(t))throw Error(H(299));var n=!1,r="",i=KO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=QE(t,1,!1,null,null,n,!1,r,i),t[Gi]=e.current,ld(t.nodeType===8?t.parentNode:t),new JE(e)};er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=pD(e),t=t===null?null:t.stateNode,t};er.flushSync=function(t){return La(t)};er.hydrate=function(t,e,n){if(!Sy(e))throw Error(H(200));return Ey(null,t,e,!0,n)};er.hydrateRoot=function(t,e,n){if(!ZE(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=KO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=HO(e,null,t,1,n??null,i,!1,s,o),t[Gi]=e.current,ld(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new wy(e)};er.render=function(t,e,n){if(!Sy(e))throw Error(H(200));return Ey(null,t,e,!1,n)};er.unmountComponentAtNode=function(t){if(!Sy(t))throw Error(H(40));return t._reactRootContainer?(La(function(){Ey(null,null,t,!1,function(){t._reactRootContainer=null,t[Gi]=null})}),!0):!1};er.unstable_batchedUpdates=KE;er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sy(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Ey(t,e,n,!1,r)};er.version="18.3.1-next-f1338f8080-20240426";function qO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qO)}catch(t){console.error(t)}}qO(),qk.exports=er;var GO=qk.exports;const z$=Gu(GO);var wC=GO;yw.createRoot=wC.createRoot,yw.hydrateRoot=wC.hydrateRoot;var W$=t=>t.disabled||Array.isArray(t.accessibilityStates)&&t.accessibilityStates.indexOf("disabled")>-1,H$={adjustable:"slider",button:"button",header:"heading",image:"img",imagebutton:null,keyboardkey:null,label:null,link:"link",none:"presentation",search:"search",summary:"region",text:null},XO=t=>{var e=t.accessibilityRole,n=t.role,r=n||e;if(r){var i=H$[r];if(i!==null)return i||r}},K$={article:"article",banner:"header",blockquote:"blockquote",button:"button",code:"code",complementary:"aside",contentinfo:"footer",deletion:"del",emphasis:"em",figure:"figure",insertion:"ins",form:"form",list:"ul",listitem:"li",main:"main",navigation:"nav",paragraph:"p",region:"section",strong:"strong"},q$={},G$=function(e){e===void 0&&(e=q$);var n=e.role||e.accessibilityRole;if(n==="label")return"label";var r=XO(e);if(r){if(r==="heading"){var i=e.accessibilityLevel||e["aria-level"];return i!=null?"h"+i:"h1"}return K$[r]}},QO={isDisabled:W$,propsToAccessibilityComponent:G$,propsToAriaRole:XO};function yd(t){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(t)}function X$(t,e){if(yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q$(t){var e=X$(t,"string");return yd(e)=="symbol"?e:e+""}function Y$(t,e,n){return(e=Q$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SC(Object(n),!0).forEach(function(r){Y$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function On(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},J$=["ms","Moz","O","Webkit"],Z$=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(Jp).forEach(t=>{J$.forEach(e=>{Jp[Z$(e,t)]=Jp[t]})});var e6=t=>t==="currentcolor"||t==="currentColor"||t==="inherit"||t.indexOf("var(")===0;function t6(t){if(typeof t=="number")return t>>>0===t&&t>=0&&t<=4294967295?t:null;if(typeof t!="string")return null;const e=r6();let n;if(n=e.hex6.exec(t))return parseInt(n[1]+"ff",16)>>>0;const r=i6(t);return r??((n=e.rgb.exec(t))?(ki(n[1])<<24|ki(n[2])<<16|ki(n[3])<<8|255)>>>0:(n=e.rgba.exec(t))?n[6]!==void 0?(ki(n[6])<<24|ki(n[7])<<16|ki(n[8])<<8|hp(n[9]))>>>0:(ki(n[2])<<24|ki(n[3])<<16|ki(n[4])<<8|hp(n[5]))>>>0:(n=e.hex3.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=e.hex8.exec(t))?parseInt(n[1],16)>>>0:(n=e.hex4.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=e.hsl.exec(t))?(t_(cp(n[1]),ks(n[2]),ks(n[3]))|255)>>>0:(n=e.hsla.exec(t))?n[6]!==void 0?(t_(cp(n[6]),ks(n[7]),ks(n[8]))|hp(n[9]))>>>0:(t_(cp(n[2]),ks(n[3]),ks(n[4]))|hp(n[5]))>>>0:(n=e.hwb.exec(t))?(n6(cp(n[1]),ks(n[2]),ks(n[3]))|255)>>>0:null)}function fu(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function t_(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=fu(i,r,t+1/3),o=fu(i,r,t),a=fu(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function n6(t,e,n){if(e+n>=1){const o=Math.round(e*255/(e+n));return o<<24|o<<16|o<<8}const r=fu(0,1,t+1/3)*(1-e-n)+e,i=fu(0,1,t)*(1-e-n)+e,s=fu(0,1,t-1/3)*(1-e-n)+e;return Math.round(r*255)<<24|Math.round(i*255)<<16|Math.round(s*255)<<8}const Ft="[-+]?\\d*\\.?\\d+",Ps=Ft+"%";function n_(...t){return"\\(\\s*("+t.join(")\\s*,?\\s*(")+")\\s*\\)"}function EC(...t){return"\\(\\s*("+t.slice(0,t.length-1).join(")\\s*,?\\s*(")+")\\s*/\\s*("+t[t.length-1]+")\\s*\\)"}function TC(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}let r_;function r6(){return r_===void 0&&(r_={rgb:new RegExp("rgb"+n_(Ft,Ft,Ft)),rgba:new RegExp("rgba("+TC(Ft,Ft,Ft,Ft)+"|"+EC(Ft,Ft,Ft,Ft)+")"),hsl:new RegExp("hsl"+n_(Ft,Ps,Ps)),hsla:new RegExp("hsla("+TC(Ft,Ps,Ps,Ft)+"|"+EC(Ft,Ps,Ps,Ft)+")"),hwb:new RegExp("hwb"+n_(Ft,Ps,Ps)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/}),r_}function ki(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function cp(t){return(parseFloat(t)%360+360)%360/360}function hp(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ks(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function i6(t){switch(t){case"transparent":return 0;case"aliceblue":return 4042850303;case"antiquewhite":return 4209760255;case"aqua":return 16777215;case"aquamarine":return 2147472639;case"azure":return 4043309055;case"beige":return 4126530815;case"bisque":return 4293182719;case"black":return 255;case"blanchedalmond":return 4293643775;case"blue":return 65535;case"blueviolet":return 2318131967;case"brown":return 2771004159;case"burlywood":return 3736635391;case"burntsienna":return 3934150143;case"cadetblue":return 1604231423;case"chartreuse":return 2147418367;case"chocolate":return 3530104575;case"coral":return 4286533887;case"cornflowerblue":return 1687547391;case"cornsilk":return 4294499583;case"crimson":return 3692313855;case"cyan":return 16777215;case"darkblue":return 35839;case"darkcyan":return 9145343;case"darkgoldenrod":return 3095792639;case"darkgray":return 2846468607;case"darkgreen":return 6553855;case"darkgrey":return 2846468607;case"darkkhaki":return 3182914559;case"darkmagenta":return 2332068863;case"darkolivegreen":return 1433087999;case"darkorange":return 4287365375;case"darkorchid":return 2570243327;case"darkred":return 2332033279;case"darksalmon":return 3918953215;case"darkseagreen":return 2411499519;case"darkslateblue":return 1211993087;case"darkslategray":return 793726975;case"darkslategrey":return 793726975;case"darkturquoise":return 13554175;case"darkviolet":return 2483082239;case"deeppink":return 4279538687;case"deepskyblue":return 12582911;case"dimgray":return 1768516095;case"dimgrey":return 1768516095;case"dodgerblue":return 512819199;case"firebrick":return 2988581631;case"floralwhite":return 4294635775;case"forestgreen":return 579543807;case"fuchsia":return 4278255615;case"gainsboro":return 3705462015;case"ghostwhite":return 4177068031;case"gold":return 4292280575;case"goldenrod":return 3668254975;case"gray":return 2155905279;case"green":return 8388863;case"greenyellow":return 2919182335;case"grey":return 2155905279;case"honeydew":return 4043305215;case"hotpink":return 4285117695;case"indianred":return 3445382399;case"indigo":return 1258324735;case"ivory":return 4294963455;case"khaki":return 4041641215;case"lavender":return 3873897215;case"lavenderblush":return 4293981695;case"lawngreen":return 2096890111;case"lemonchiffon":return 4294626815;case"lightblue":return 2916673279;case"lightcoral":return 4034953471;case"lightcyan":return 3774873599;case"lightgoldenrodyellow":return 4210742015;case"lightgray":return 3553874943;case"lightgreen":return 2431553791;case"lightgrey":return 3553874943;case"lightpink":return 4290167295;case"lightsalmon":return 4288707327;case"lightseagreen":return 548580095;case"lightskyblue":return 2278488831;case"lightslategray":return 2005441023;case"lightslategrey":return 2005441023;case"lightsteelblue":return 2965692159;case"lightyellow":return 4294959359;case"lime":return 16711935;case"limegreen":return 852308735;case"linen":return 4210091775;case"magenta":return 4278255615;case"maroon":return 2147483903;case"mediumaquamarine":return 1724754687;case"mediumblue":return 52735;case"mediumorchid":return 3126187007;case"mediumpurple":return 2473647103;case"mediumseagreen":return 1018393087;case"mediumslateblue":return 2070474495;case"mediumspringgreen":return 16423679;case"mediumturquoise":return 1221709055;case"mediumvioletred":return 3340076543;case"midnightblue":return 421097727;case"mintcream":return 4127193855;case"mistyrose":return 4293190143;case"moccasin":return 4293178879;case"navajowhite":return 4292783615;case"navy":return 33023;case"oldlace":return 4260751103;case"olive":return 2155872511;case"olivedrab":return 1804477439;case"orange":return 4289003775;case"orangered":return 4282712319;case"orchid":return 3664828159;case"palegoldenrod":return 4008225535;case"palegreen":return 2566625535;case"paleturquoise":return 2951671551;case"palevioletred":return 3681588223;case"papayawhip":return 4293907967;case"peachpuff":return 4292524543;case"peru":return 3448061951;case"pink":return 4290825215;case"plum":return 3718307327;case"powderblue":return 2967529215;case"purple":return 2147516671;case"rebeccapurple":return 1714657791;case"red":return 4278190335;case"rosybrown":return 3163525119;case"royalblue":return 1097458175;case"saddlebrown":return 2336560127;case"salmon":return 4202722047;case"sandybrown":return 4104413439;case"seagreen":return 780883967;case"seashell":return 4294307583;case"sienna":return 2689740287;case"silver":return 3233857791;case"skyblue":return 2278484991;case"slateblue":return 1784335871;case"slategray":return 1887473919;case"slategrey":return 1887473919;case"snow":return 4294638335;case"springgreen":return 16744447;case"steelblue":return 1182971135;case"tan":return 3535047935;case"teal":return 8421631;case"thistle":return 3636451583;case"tomato":return 4284696575;case"turquoise":return 1088475391;case"violet":return 4001558271;case"wheat":return 4125012991;case"white":return 4294967295;case"whitesmoke":return 4126537215;case"yellow":return 4294902015;case"yellowgreen":return 2597139199}return null}var s6=t6;const o6=Gu(s6);var a6=t=>{if(t==null)return t;var e=o6(t);if(e!=null)return e=(e<<24|e>>>8)>>>0,e},YO=function(e,n){if(n===void 0&&(n=1),e!=null){if(typeof e=="string"&&e6(e))return e;var r=a6(e);if(r!=null){var i=r>>16&255,s=r>>8&255,o=r&255,a=(r>>24&255)/255,l=(a*n).toFixed(2);return"rgba("+i+","+s+","+o+","+l+")"}}},l6={backgroundColor:!0,borderColor:!0,borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0,color:!0,shadowColor:!0,textDecorationColor:!0,textShadowColor:!0};function oi(t,e){var n=t;return(e==null||!Jp[e])&&typeof t=="number"?n=t+"px":e!=null&&l6[e]&&(n=YO(t)),n}var Dt=!!(typeof window<"u"&&window.document&&window.document.createElement),u6={},c6=!Dt||window.CSS!=null&&window.CSS.supports!=null&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),h6="monospace,monospace",bC='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif',d6={borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderBlockColor:["borderTopColor","borderBottomColor"],borderInlineColor:["borderRightColor","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderInlineStyle:["borderRightStyle","borderLeftStyle"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderInlineWidth:["borderRightWidth","borderLeftWidth"],insetBlock:["top","bottom"],insetInline:["left","right"],marginBlock:["marginTop","marginBottom"],marginInline:["marginRight","marginLeft"],paddingBlock:["paddingTop","paddingBottom"],paddingInline:["paddingRight","paddingLeft"],overflow:["overflowX","overflowY"],overscrollBehavior:["overscrollBehaviorX","overscrollBehaviorY"],borderBlockStartColor:["borderTopColor"],borderBlockStartStyle:["borderTopStyle"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndColor:["borderBottomColor"],borderBlockEndStyle:["borderBottomStyle"],borderBlockEndWidth:["borderBottomWidth"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],insetBlockEnd:["bottom"],insetBlockStart:["top"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"]},JO=(t,e)=>{if(!t)return u6;var n={},r=function(){var a=t[i];if(a==null)return"continue";if(i==="backgroundClip")a==="text"&&(n.backgroundClip=a,n.WebkitBackgroundClip=a);else if(i==="flex")a===-1?(n.flexGrow=0,n.flexShrink=1,n.flexBasis="auto"):n.flex=a;else if(i==="font")n[i]=a.replace("System",bC);else if(i==="fontFamily")if(a.indexOf("System")>-1){var l=a.split(/,\s*/);l[l.indexOf("System")]=bC,n[i]=l.join(",")}else a==="monospace"?n[i]=h6:n[i]=a;else if(i==="textDecorationLine")c6?n.textDecorationLine=a:n.textDecoration=a;else if(i==="writingDirection")n.direction=a;else{var u=oi(t[i],i),c=d6[i];e&&i==="inset"?(t.insetInline==null&&(n.left=u,n.right=u),t.insetBlock==null&&(n.top=u,n.bottom=u)):e&&i==="margin"?(t.marginInline==null&&(n.marginLeft=u,n.marginRight=u),t.marginBlock==null&&(n.marginTop=u,n.marginBottom=u)):e&&i==="padding"?(t.paddingInline==null&&(n.paddingLeft=u,n.paddingRight=u),t.paddingBlock==null&&(n.paddingTop=u,n.paddingBottom=u)):c?c.forEach((d,f)=>{t[d]==null&&(n[d]=u)}):n[i]=u}};for(var i in t)var s=r();return n};function f6(t,e){for(var n=t.length,r=e^n,i=0,s;n>=4;)s=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),s^=s>>>24,s=(s&65535)*1540483477+(((s>>>16)*1540483477&65535)<<16),r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)^s,n-=4,++i;switch(n){case 3:r^=(t.charCodeAt(i+2)&255)<<16;case 2:r^=(t.charCodeAt(i+1)&255)<<8;case 1:r^=t.charCodeAt(i)&255,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16)}return r^=r>>>13,r=(r&65535)*1540483477+(((r>>>16)*1540483477&65535)<<16),r^=r>>>15,r>>>0}var p6=t=>f6(t,1).toString(36),m6=/[A-Z]/g,g6=/^ms-/,i_={};function y6(t){return"-"+t.toLowerCase()}function v6(t){if(t in i_)return i_[t];var e=t.replace(m6,y6);return i_[t]=g6.test(e)?"-"+e:e}var ZO={},eT={},Ty={};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.default=_6;function _6(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(eT,"__esModule",{value:!0});eT.default=T6;var w6=Ty,S6=E6(w6);function E6(t){return t&&t.__esModule?t:{default:t}}function T6(t,e,n){var r=t[e];if(r&&n.hasOwnProperty(e))for(var i=(0,S6.default)(e),s=0;s<r.length;++s){var o=r[s]+i;n[o]||(n[o]=n[e])}return n}var tT={};Object.defineProperty(tT,"__esModule",{value:!0});tT.default=b6;function b6(t,e,n,r,i){for(var s=0,o=t.length;s<o;++s){var a=t[s](e,n,r,i);if(a)return a}}var nT={};Object.defineProperty(nT,"__esModule",{value:!0});nT.default=I6;function IC(t,e){t.indexOf(e)===-1&&t.push(e)}function I6(t,e){if(Array.isArray(e))for(var n=0,r=e.length;n<r;++n)IC(t,e[n]);else IC(t,e)}var rT={};Object.defineProperty(rT,"__esModule",{value:!0});rT.default=R6;function R6(t){return t instanceof Object&&!Array.isArray(t)}Object.defineProperty(ZO,"__esModule",{value:!0});var C6=ZO.default=N6,x6=eT,A6=by(x6),P6=tT,RC=by(P6),k6=nT,D6=by(k6),O6=rT,M6=by(O6);function by(t){return t&&t.__esModule?t:{default:t}}function N6(t){var e=t.prefixMap,n=t.plugins;return function r(i){for(var s in i){var o=i[s];if((0,M6.default)(o))i[s]=r(o);else if(Array.isArray(o)){for(var a=[],l=0,u=o.length;l<u;++l){var c=(0,RC.default)(n,s,o[l],i,e);(0,D6.default)(a,c||o[l])}a.length>0&&(i[s]=a)}else{var d=(0,RC.default)(n,s,o,i,e);d&&(i[s]=d),i=(0,A6.default)(e,s,i)}}return i}}var eM={};Object.defineProperty(eM,"__esModule",{value:!0});var L6=eM.default=V6;function V6(){return null}var tM={};function Zp(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zp=function(n){return typeof n}:Zp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zp(t)}function F6(t){return $6(t)||U6(t)||j6(t)||B6()}function B6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j6(t,e){if(t){if(typeof t=="string")return cS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cS(t,e)}}function U6(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function $6(t){if(Array.isArray(t))return cS(t)}function cS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CC(t){return t.filter(function(e,n){return t.lastIndexOf(e)===n})}function nM(t){for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;++e){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];for(var i in r){var s=r[i],o=t[i];if(o&&s){if(Array.isArray(o)){t[i]=CC(o.concat(s));continue}if(Array.isArray(s)){t[i]=CC([o].concat(F6(s)));continue}if(Zp(s)==="object"){t[i]=nM({},o,s);continue}}t[i]=s}}return t}var z6=/-([a-z])/g,W6=/^Ms/g,s_={};function H6(t){return t[1].toUpperCase()}function rM(t){if(s_.hasOwnProperty(t))return s_[t];var e=t.replace(z6,H6).replace(W6,"ms");return s_[t]=e,e}var K6=/[A-Z]/g,q6=/^ms-/,o_={};function G6(t){return"-"+t.toLowerCase()}function iM(t){if(o_.hasOwnProperty(t))return o_[t];var e=t.replace(K6,G6);return o_[t]=q6.test(e)?"-"+e:e}const X6=Object.freeze(Object.defineProperty({__proto__:null,default:iM},Symbol.toStringTag,{value:"Module"}));function Iy(t){return iM(t)}function sM(t,e){return Iy(t)+":"+e}function Q6(t){var e="";for(var n in t){var r=t[n];typeof r!="string"&&typeof r!="number"||(e&&(e+=";"),e+=sM(n,r))}return e}var Y6=/^(Webkit|Moz|O|ms)/;function J6(t){return Y6.test(t)}var Z6=/-webkit-|-moz-|-ms-/;function e3(t){return typeof t=="string"&&Z6.test(t)}var vd={borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xC=["animationIterationCount","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineClamp","order"],AC=["Webkit","ms","Moz","O"];function t3(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}for(var a_=0,n3=xC.length;a_<n3;++a_){var PC=xC[a_];vd[PC]=!0;for(var l_=0,r3=AC.length;l_<r3;++l_)vd[t3(AC[l_],PC)]=!0}for(var i3 in vd)vd[Iy(i3)]=!0;function s3(t){return vd.hasOwnProperty(t)}var o3=/^(ms|Webkit|Moz|O)/;function oM(t){var e=t.replace(o3,"");return e.charAt(0).toLowerCase()+e.slice(1)}function a3(t){return oM(rM(t))}function l3(t,e){return e.join(";"+Iy(t)+":")}var u3=/(-ms-|-webkit-|-moz-|-o-)/g;function c3(t){return typeof t=="string"?t.replace(u3,""):t}const h3=Object.freeze(Object.defineProperty({__proto__:null,assignStyle:nM,camelCaseProperty:rM,cssifyDeclaration:sM,cssifyObject:Q6,hyphenateProperty:Iy,isPrefixedProperty:J6,isPrefixedValue:e3,isUnitlessProperty:s3,normalizeProperty:a3,resolveArrayValue:l3,unprefixProperty:oM,unprefixValue:c3},Symbol.toStringTag,{value:"Module"})),aM=Nk(h3);Object.defineProperty(tM,"__esModule",{value:!0});var d3=tM.default=g3,f3=aM,p3=/cross-fade\(/g,m3=["-webkit-",""];function g3(t,e){if(typeof e=="string"&&!(0,f3.isPrefixedValue)(e)&&e.indexOf("cross-fade(")!==-1)return m3.map(function(n){return e.replace(p3,n+"cross-fade(")})}var lM={};Object.defineProperty(lM,"__esModule",{value:!0});var y3=lM.default=w3,v3=["-webkit-","-moz-",""],_3={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function w3(t,e){if(t==="cursor"&&_3.hasOwnProperty(e))return v3.map(function(n){return n+e})}var uM={};Object.defineProperty(uM,"__esModule",{value:!0});var S3=uM.default=I3,E3=aM,T3=/filter\(/g,b3=["-webkit-",""];function I3(t,e){if(typeof e=="string"&&!(0,E3.isPrefixedValue)(e)&&e.indexOf("filter(")!==-1)return b3.map(function(n){return e.replace(T3,n+"filter(")})}var cM={},iT={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=/-webkit-|-moz-|-ms-/;function n(r){return typeof r=="string"&&e.test(r)}})(iT);Object.defineProperty(cM,"__esModule",{value:!0});var R3=cM.default=k3,C3=iT,x3=A3(C3);function A3(t){return t&&t.__esModule?t:{default:t}}var P3=["-webkit-",""];function k3(t,e){if(typeof e=="string"&&!(0,x3.default)(e)&&e.indexOf("image-set(")>-1)return P3.map(function(n){return e.replace(/image-set\(/g,n+"image-set(")})}var hM={};Object.defineProperty(hM,"__esModule",{value:!0});var D3=hM.default=O3,kC={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]};function O3(t,e,n){if(Object.prototype.hasOwnProperty.call(kC,t))for(var r=kC[t],i=0,s=r.length;i<s;++i)n[r[i]]=e}var dM={};Object.defineProperty(dM,"__esModule",{value:!0});var M3=dM.default=N3;function N3(t,e){if(t==="position"&&e==="sticky")return["-webkit-sticky","sticky"]}var fM={};Object.defineProperty(fM,"__esModule",{value:!0});var L3=fM.default=j3,V3=["-webkit-","-moz-",""],F3={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},B3={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function j3(t,e){if(F3.hasOwnProperty(t)&&B3.hasOwnProperty(e))return V3.map(function(n){return n+e})}var pM={},mM={};const U3=Nk(X6);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var e=U3,n=r(e);function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,n.default)(s)}})(mM);Object.defineProperty(pM,"__esModule",{value:!0});var $3=pM.default=Y3,z3=mM,W3=sT(z3),H3=iT,K3=sT(H3),q3=Ty,DC=sT(q3);function sT(t){return t&&t.__esModule?t:{default:t}}var G3={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},X3={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function Q3(t,e){if((0,K3.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,i=n.length;r<i;++r){var s=n[r],o=[s];for(var a in e){var l=(0,W3.default)(a);if(s.indexOf(l)>-1&&l!=="order")for(var u=e[a],c=0,d=u.length;c<d;++c)o.unshift(s.replace(l,X3[u[c]]+l))}n[r]=o.join(",")}return n.join(",")}function Y3(t,e,n,r){if(typeof e=="string"&&G3.hasOwnProperty(t)){var i=Q3(e,r),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-moz-|-ms-/.test(a)}).join(",");if(t.indexOf("Webkit")>-1)return s;var o=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(a){return!/-webkit-|-ms-/.test(a)}).join(",");return t.indexOf("Moz")>-1?o:(n["Webkit"+(0,DC.default)(t)]=s,n["Moz"+(0,DC.default)(t)]=o,i)}}var ze=["Webkit"],J3=["Moz"],Z3=["Webkit","Moz"],ut=["Webkit","ms"],ez=["Webkit","Moz","ms"];const tz={plugins:[L6,d3,y3,S3,R3,D3,M3,L3,$3],prefixMap:{appearance:ez,userSelect:Z3,textEmphasisPosition:ut,textEmphasis:ut,textEmphasisStyle:ut,textEmphasisColor:ut,boxDecorationBreak:ut,clipPath:ze,maskImage:ut,maskMode:ut,maskRepeat:ut,maskPosition:ut,maskClip:ut,maskOrigin:ut,maskSize:ut,maskComposite:ut,mask:ut,maskBorderSource:ut,maskBorderMode:ut,maskBorderSlice:ut,maskBorderWidth:ut,maskBorderOutset:ut,maskBorderRepeat:ut,maskBorder:ut,maskType:ut,textDecorationStyle:ze,textDecorationSkip:ze,textDecorationLine:ze,textDecorationColor:ze,filter:ze,breakAfter:ze,breakBefore:ze,breakInside:ze,columnCount:ze,columnFill:ze,columnGap:ze,columnRule:ze,columnRuleColor:ze,columnRuleStyle:ze,columnRuleWidth:ze,columns:ze,columnSpan:ze,columnWidth:ze,backdropFilter:ze,hyphens:ze,flowInto:ze,flowFrom:ze,regionFragment:ze,textOrientation:ze,tabSize:J3,fontKerning:ze,textSizeAdjust:ze}};var nz=C6(tz),rz=["animationKeyframes"],OC=new Map,iz={},sz=1,oz=3,az={borderColor:2,borderRadius:2,borderStyle:2,borderWidth:2,display:2,flex:2,inset:2,margin:2,overflow:2,overscrollBehavior:2,padding:2,insetBlock:2.1,insetInline:2.1,marginInline:2.1,marginBlock:2.1,paddingInline:2.1,paddingBlock:2.1,borderBlockStartColor:2.2,borderBlockStartStyle:2.2,borderBlockStartWidth:2.2,borderBlockEndColor:2.2,borderBlockEndStyle:2.2,borderBlockEndWidth:2.2,borderInlineStartColor:2.2,borderInlineStartStyle:2.2,borderInlineStartWidth:2.2,borderInlineEndColor:2.2,borderInlineEndStyle:2.2,borderInlineEndWidth:2.2,borderEndStartRadius:2.2,borderEndEndRadius:2.2,borderStartStartRadius:2.2,borderStartEndRadius:2.2,insetBlockEnd:2.2,insetBlockStart:2.2,insetInlineEnd:2.2,insetInlineStart:2.2,marginBlockStart:2.2,marginBlockEnd:2.2,marginInlineStart:2.2,marginInlineEnd:2.2,paddingBlockStart:2.2,paddingBlockEnd:2.2,paddingInlineStart:2.2,paddingInlineEnd:2.2},hS="borderTopLeftRadius",dS="borderTopRightRadius",fS="borderBottomLeftRadius",pS="borderBottomRightRadius",mS="borderLeftColor",gS="borderLeftStyle",yS="borderLeftWidth",vS="borderRightColor",_S="borderRightStyle",wS="borderRightWidth",SS="right",ES="marginLeft",TS="marginRight",bS="paddingLeft",IS="paddingRight",RS="left",sg={[hS]:dS,[dS]:hS,[fS]:pS,[pS]:fS,[mS]:vS,[gS]:_S,[yS]:wS,[vS]:mS,[_S]:gS,[wS]:yS,[RS]:SS,[ES]:TS,[TS]:ES,[bS]:IS,[IS]:bS,[SS]:RS},Dh={borderStartStartRadius:hS,borderStartEndRadius:dS,borderEndStartRadius:fS,borderEndEndRadius:pS,borderInlineStartColor:mS,borderInlineStartStyle:gS,borderInlineStartWidth:yS,borderInlineEndColor:vS,borderInlineEndStyle:_S,borderInlineEndWidth:wS,insetInlineEnd:SS,insetInlineStart:RS,marginInlineStart:ES,marginInlineEnd:TS,paddingInlineStart:bS,paddingInlineEnd:IS},gM=["clear","float","textAlign"];function lz(t){var e={$$css:!0},n=[];function r(i,s,o){var a=hz(o,s),l=s+a,u=OC.get(l),c;if(u!=null)c=u[0],n.push(u[1]);else{var d=i!==s?l:a;c=oT("r",i,d);var f=az[i]||oz,p=dz(c,s,o),g=[p,f];n.push(g),OC.set(l,[c,g])}return c}return Object.keys(t).sort().forEach(i=>{var s=t[i];if(s!=null){var o;if(gM.indexOf(i)>-1){var a=r(i,i,"left"),l=r(i,i,"right");s==="start"?o=[a,l]:s==="end"&&(o=[l,a])}var u=Dh[i];if(u!=null){var c=r(i,u,s),d=r(i,sg[u],s);o=[c,d]}if(i==="transitionProperty"){for(var f=Array.isArray(s)?s:[s],p=[],g=0;g<f.length;g++){var E=f[g];typeof E=="string"&&Dh[E]!=null&&p.push(g)}if(p.length>0){var b=[...f],S=[...f];p.forEach(y=>{var w=b[y];if(typeof w=="string"){var x=Dh[w],O=sg[x];b[y]=x,S[y]=O;var k=r(i,i,b),T=r(i,i,S);o=[k,T]}})}}o==null?o=r(i,i,s):e.$$css$localize=!0,e[i]=o}}),[e,n]}function uz(t,e){var n={$$css:!0},r=[],i=t.animationKeyframes,s=On(t,rz),o=oT("css",e,JSON.stringify(t)),a="."+o,l;if(i!=null){var u=yM(i),c=u[0],d=u[1];l=c.join(","),r.push(...d)}var f=Ni(ge(ge({},s),{},{animationName:l}));return r.push(""+a+f),n[o]=o,[n,[[r,sz]]]}function cz(t,e){var n=t||iz,r={},i={},s=function(){var u=n[o],c=o,d=u;if(!Object.prototype.hasOwnProperty.call(n,o)||u==null)return"continue";gM.indexOf(o)>-1&&(u==="start"?d=e?"right":"left":u==="end"&&(d=e?"left":"right"));var f=Dh[o];if(f!=null&&(c=e?sg[f]:f),o==="transitionProperty"){var p=Array.isArray(u)?u:[u];p.forEach((g,E)=>{if(typeof g=="string"){var b=Dh[g];b!=null&&(p[E]=e?sg[b]:b,d=p.join(" "))}})}r[c]||(i[c]=d),c===o&&(r[c]=!0)};for(var o in n)var a=s();return JO(i,!0)}function hz(t,e){var n=oi(t,e);return typeof n!="string"?JSON.stringify(n||""):n}function dz(t,e,n){var r=[],i="."+t;switch(e){case"animationKeyframes":{var s=yM(n),o=s[0],a=s[1],l=Ni({animationName:o.join(",")});r.push(""+i+l,...a);break}case"placeholderTextColor":{var u=Ni({color:n,opacity:1});r.push(i+"::-webkit-input-placeholder"+u,i+"::-moz-placeholder"+u,i+":-ms-input-placeholder"+u,i+"::placeholder"+u);break}case"pointerEvents":{var c=n;if(n==="auto"||n==="box-only"){if(c="auto!important",n==="box-only"){var d=Ni({pointerEvents:"none"});r.push(i+">*"+d)}}else if((n==="none"||n==="box-none")&&(c="none!important",n==="box-none")){var f=Ni({pointerEvents:"auto"});r.push(i+">*"+f)}var p=Ni({pointerEvents:c});r.push(""+i+p);break}case"scrollbarWidth":{n==="none"&&r.push(i+"::-webkit-scrollbar{display:none}");var g=Ni({scrollbarWidth:n});r.push(""+i+g);break}default:{var E=Ni({[e]:n});r.push(""+i+E);break}}return r}function Ni(t){var e=nz(JO(t)),n=Object.keys(e).map(r=>{var i=e[r],s=v6(r);return Array.isArray(i)?i.map(o=>s+":"+o).join(";"):s+":"+i}).sort().join(";");return"{"+n+";}"}function oT(t,e,n){var r=p6(e+n);return t+"-"+r}function fz(t){var e=["-webkit-",""],n=oT("r","animation",JSON.stringify(t)),r="{"+Object.keys(t).map(s=>{var o=t[s],a=Ni(o);return""+s+a}).join("")+"}",i=e.map(s=>"@"+s+"keyframes "+n+r);return[n,i]}function yM(t){if(typeof t=="number")throw new Error("Invalid CSS keyframes type: "+typeof t);var e=[],n=[],r=Array.isArray(t)?t:[t];return r.forEach(i=>{if(typeof i=="string")e.push(i);else{var s=fz(i),o=s[0],a=s[1];e.push(o),n.push(...a)}}),[e,n]}function u_(t,e,n){if(Dt){var r=e??document,i=r.getElementById(t);if(i==null)if(i=document.createElement("style"),i.setAttribute("id",t),typeof n=="string"&&i.appendChild(document.createTextNode(n)),r instanceof ShadowRoot)r.insertBefore(i,r.firstChild);else{var s=r.head;s&&s.insertBefore(i,s.firstChild)}return i.sheet}else return null}var pz=Array.prototype.slice;function c_(t){var e={},n={};if(t!=null){var r;pz.call(t.cssRules).forEach((o,a)=>{var l=o.cssText;if(l.indexOf("stylesheet-group")>-1)r=yz(o),e[r]={start:a,rules:[l]};else{var u=NC(l);u!=null&&(n[u]=!0,e[r].rules.push(l))}})}function i(o,a,l){var u=MC(e),c=u.indexOf(a),d=c+1,f=u[d],p=f!=null&&e[f].start!=null?e[f].start:o.cssRules.length,g=_z(o,l,p);if(g){e[a].start==null&&(e[a].start=p);for(var E=d;E<u.length;E+=1){var b=u[E],S=e[b].start||0;e[b].start=S+1}}return g}var s={getTextContent(){return MC(e).map(o=>{var a=e[o].rules,l=a.shift();return a.sort(),a.unshift(l),a.join(`
`)}).join(`
`)},insert(o,a){var l=Number(a);if(e[l]==null){var u=mz(l);e[l]={start:null,rules:[u]},t!=null&&i(t,l,u)}var c=NC(o);if(c!=null&&n[c]==null&&(n[c]=!0,e[l].rules.push(o),t!=null)){var d=i(t,l,o);d||e[l].rules.pop()}}};return s}function mz(t){return'[stylesheet-group="'+t+'"]{}'}var gz=/["']/g;function yz(t){return Number(t.selectorText.split(gz)[1])}function MC(t){return Object.keys(t).map(Number).sort((e,n)=>e>n?1:-1)}var vz=/\s*([,])\s*/g;function NC(t){var e=t.split("{")[0].trim();return e!==""?e.replace(vz,"$1"):null}function _z(t,e,n){try{return t.insertRule(e,n),!0}catch{return!1}}var wz="react-native-stylesheet",h_=new WeakMap,Ir=[],LC=["html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0);}","body{margin:0;}","button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}","input::-webkit-search-cancel-button,input::-webkit-search-decoration,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}"];function Sz(t,e){e===void 0&&(e=wz);var n;if(Dt){var r=document;if(Ir.length===0)n=c_(u_(e)),LC.forEach(a=>{n.insert(a,0)}),h_.set(r,Ir.length),Ir.push(n);else{var i=h_.get(r);if(i==null){var s=Ir[0],o=s!=null?s.getTextContent():"";n=c_(u_(e,r,o)),h_.set(r,Ir.length),Ir.push(n)}else n=Ir[i]}}else Ir.length===0?(n=c_(u_(e)),LC.forEach(a=>{n.insert(a,0)}),Ir.push(n)):n=Ir[0];return{getTextContent(){return n.getTextContent()},id:e,insert(a,l){Ir.forEach(u=>{u.insert(a,l)})}}}var aT={};Object.defineProperty(aT,"__esModule",{value:!0});aT.localizeStyle=Ez;var dp=new WeakMap,vM="$$css$localize";function VC(t,e){var n={};for(var r in t)if(r!==vM){var i=t[r];Array.isArray(i)?n[r]=e?i[1]:i[0]:n[r]=i}return n}function Ez(t,e){if(t[vM]!=null){var n=e?1:0;if(dp.has(t)){var r=dp.get(t),i=r[n];return i==null&&(i=VC(t,e),r[n]=i,dp.set(t,r)),i}var s=VC(t,e),o=new Array(2);return o[n]=s,dp.set(t,o),s}return t}var Tz=aT,bz={},_M={height:0,width:0},wM=t=>{var e=t.shadowColor,n=t.shadowOffset,r=t.shadowOpacity,i=t.shadowRadius,s=n||_M,o=s.height,a=s.width,l=oi(a),u=oi(o),c=oi(i||0),d=YO(e||"black",r);if(d!=null&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},Iz=t=>{var e=t.textShadowColor,n=t.textShadowOffset,r=t.textShadowRadius,i=n||_M,s=i.height,o=i.width,a=r||0,l=oi(o),u=oi(s),c=oi(a),d=oi(e,"textShadowColor");if(d&&(s!==0||o!==0||a!==0)&&l!=null&&u!=null&&c!=null)return l+" "+u+" "+c+" "+d},Rz=t=>{var e=Object.keys(t)[0],n=t[e];if(e==="matrix"||e==="matrix3d")return e+"("+n.join(",")+")";var r=oi(n,e);return e+"("+r+")"},Cz=t=>t.map(Rz).join(" "),xz={borderBottomEndRadius:"borderEndEndRadius",borderBottomStartRadius:"borderEndStartRadius",borderTopEndRadius:"borderStartEndRadius",borderTopStartRadius:"borderStartStartRadius",borderEndColor:"borderInlineEndColor",borderEndStyle:"borderInlineEndStyle",borderEndWidth:"borderInlineEndWidth",borderStartColor:"borderInlineStartColor",borderStartStyle:"borderInlineStartStyle",borderStartWidth:"borderInlineStartWidth",end:"insetInlineEnd",marginEnd:"marginInlineEnd",marginHorizontal:"marginInline",marginStart:"marginInlineStart",marginVertical:"marginBlock",paddingEnd:"paddingInlineEnd",paddingHorizontal:"paddingInline",paddingStart:"paddingInlineStart",paddingVertical:"paddingBlock",start:"insetInlineStart"},Az={elevation:!0,overlayColor:!0,resizeMode:!0,tintColor:!0},SM=function(e,n){n===void 0&&(n={});var r=e||bz,i={};if(n.shadow,r.shadowColor!=null||r.shadowOffset!=null||r.shadowOpacity!=null||r.shadowRadius!=null){var s=wM(r);if(s!=null&&i.boxShadow==null){var o=r.boxShadow,a=o?o+", "+s:s;i.boxShadow=a}}if(n.textShadow,r.textShadowColor!=null||r.textShadowOffset!=null||r.textShadowRadius!=null){var l=Iz(r);if(l!=null&&i.textShadow==null){var u=r.textShadow,c=u?u+", "+l:l;i.textShadow=c}}for(var d in r)if(!(Az[d]!=null||d==="shadowColor"||d==="shadowOffset"||d==="shadowOpacity"||d==="shadowRadius"||d==="textShadowColor"||d==="textShadowOffset"||d==="textShadowRadius")){var f=r[d],p=xz[d]||d,g=f;!Object.prototype.hasOwnProperty.call(r,d)||p!==d&&r[p]!=null||(p==="aspectRatio"&&typeof g=="number"?i[p]=g.toString():p==="fontVariant"?(Array.isArray(g)&&g.length>0&&(g=g.join(" ")),i[p]=g):p==="textAlignVertical"?r.verticalAlign==null&&(i.verticalAlign=g==="center"?"middle":g):p==="transform"?(Array.isArray(g)&&(g=Cz(g)),i.transform=g):i[p]=g)}return i},lT={};Object.defineProperty(lT,"__esModule",{value:!0});var EM=lT.styleq=void 0,Pz=new WeakMap,kz="$$css";function TM(t){var e,n,r;return t!=null&&(e=t.disableCache===!0,n=t.disableMix===!0,r=t.transform),function(){for(var s=[],o="",a=null,l=e?null:Pz,u=new Array(arguments.length),c=0;c<arguments.length;c++)u[c]=arguments[c];for(;u.length>0;){var d=u.pop();if(!(d==null||d===!1)){if(Array.isArray(d)){for(var f=0;f<d.length;f++)u.push(d[f]);continue}var p=r!=null?r(d):d;if(p.$$css){var g="";if(l!=null&&l.has(p)){var E=l.get(p);E!=null&&(g=E[0],s.push.apply(s,E[1]),l=E[2])}else{var b=[];for(var S in p){var y=p[S];S!==kz&&(typeof y=="string"||y===null?s.includes(S)||(s.push(S),l!=null&&b.push(S),typeof y=="string"&&(g+=g?" "+y:y)):console.error("styleq: ".concat(S," typeof ").concat(String(y),' is not "string" or "null".')))}if(l!=null){var w=new WeakMap;l.set(p,[g,b,w]),l=w}}g&&(o=o?g+" "+o:g)}else if(n)a==null&&(a={}),a=Object.assign({},p,a);else{var x=null;for(var O in p){var k=p[O];k!==void 0&&(s.includes(O)||(k!=null&&(a==null&&(a={}),x==null&&(x={}),x[O]=k),s.push(O),l=null))}x!=null&&(a=Object.assign(x,a))}}}var T=[o,a];return T}}var bM=TM();EM=lT.styleq=bM;bM.factory=TM;var Dz=["writingDirection"],IM=new WeakMap,og=Sz(),RM={shadow:!0,textShadow:!0};function Oz(t,e){e===void 0&&(e={});var n=e,r=n.writingDirection,i=On(n,Dz),s=r==="rtl";return EM.factory({transform(o){var a=IM.get(o);return a!=null?Tz.localizeStyle(a,s):SM(o,ge(ge({},RM),i))}})(t)}function CM(t){t.forEach(e=>{var n=e[0],r=e[1];og!=null&&n.forEach(i=>{og.insert(i,r)})})}function Mz(t){var e=lz(SM(t,RM)),n=e[0],r=e[1];return CM(r),n}function Nz(t,e){var n=uz(t,e),r=n[0],i=n[1];return CM(i),r}var xM={position:"absolute",left:0,right:0,top:0,bottom:0},Lz=AM({x:ge({},xM)}).x;function AM(t){return Object.keys(t).forEach(e=>{var n=t[e];if(n!=null&&n.$$css!==!0){var r;e.indexOf("$raw")>-1?r=Nz(n,e.split("$raw")[0]):r=Mz(n),IM.set(n,r)}}),t}function Vz(t,e){return[t,e]}function Fz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.flat(1/0),i={},s=0;s<r.length;s++){var o=r[s];o!=null&&typeof o=="object"&&Object.assign(i,o)}return i}function Bz(){return{id:og.id,textContent:og.getTextContent()}}function os(t,e){e===void 0&&(e={});var n=e.writingDirection==="rtl",r=Oz(t,e);return Array.isArray(r)&&r[1]!=null&&(r[1]=cz(r[1],n)),r}os.absoluteFill=Lz;os.absoluteFillObject=xM;os.create=AM;os.compose=Vz;os.flatten=Fz;os.getSheet=Bz;os.hairlineWidth=1;Dt&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.resolveRNStyle=os.flatten);var De=os,jz=["aria-activedescendant","accessibilityActiveDescendant","aria-atomic","accessibilityAtomic","aria-autocomplete","accessibilityAutoComplete","aria-busy","accessibilityBusy","aria-checked","accessibilityChecked","aria-colcount","accessibilityColumnCount","aria-colindex","accessibilityColumnIndex","aria-colspan","accessibilityColumnSpan","aria-controls","accessibilityControls","aria-current","accessibilityCurrent","aria-describedby","accessibilityDescribedBy","aria-details","accessibilityDetails","aria-disabled","accessibilityDisabled","aria-errormessage","accessibilityErrorMessage","aria-expanded","accessibilityExpanded","aria-flowto","accessibilityFlowTo","aria-haspopup","accessibilityHasPopup","aria-hidden","accessibilityHidden","aria-invalid","accessibilityInvalid","aria-keyshortcuts","accessibilityKeyShortcuts","aria-label","accessibilityLabel","aria-labelledby","accessibilityLabelledBy","aria-level","accessibilityLevel","aria-live","accessibilityLiveRegion","aria-modal","accessibilityModal","aria-multiline","accessibilityMultiline","aria-multiselectable","accessibilityMultiSelectable","aria-orientation","accessibilityOrientation","aria-owns","accessibilityOwns","aria-placeholder","accessibilityPlaceholder","aria-posinset","accessibilityPosInSet","aria-pressed","accessibilityPressed","aria-readonly","accessibilityReadOnly","aria-required","accessibilityRequired","role","accessibilityRole","aria-roledescription","accessibilityRoleDescription","aria-rowcount","accessibilityRowCount","aria-rowindex","accessibilityRowIndex","aria-rowspan","accessibilityRowSpan","aria-selected","accessibilitySelected","aria-setsize","accessibilitySetSize","aria-sort","accessibilitySort","aria-valuemax","accessibilityValueMax","aria-valuemin","accessibilityValueMin","aria-valuenow","accessibilityValueNow","aria-valuetext","accessibilityValueText","dataSet","focusable","id","nativeID","pointerEvents","style","tabIndex","testID"],Uz={},$z=Object.prototype.hasOwnProperty,zz=Array.isArray,Wz=/[A-Z]/g;function Hz(t){return"-"+t.toLowerCase()}function Kz(t){return t.replace(Wz,Hz)}function El(t){return zz(t)?t.join(" "):t}var qz=De.create({auto:{pointerEvents:"auto"},"box-none":{pointerEvents:"box-none"},"box-only":{pointerEvents:"box-only"},none:{pointerEvents:"none"}}),Gz=(t,e,n)=>{e||(e=Uz);var r=e,i=r["aria-activedescendant"],s=r.accessibilityActiveDescendant,o=r["aria-atomic"],a=r.accessibilityAtomic,l=r["aria-autocomplete"],u=r.accessibilityAutoComplete,c=r["aria-busy"],d=r.accessibilityBusy,f=r["aria-checked"],p=r.accessibilityChecked,g=r["aria-colcount"],E=r.accessibilityColumnCount,b=r["aria-colindex"],S=r.accessibilityColumnIndex,y=r["aria-colspan"],w=r.accessibilityColumnSpan,x=r["aria-controls"],O=r.accessibilityControls,k=r["aria-current"],T=r.accessibilityCurrent,v=r["aria-describedby"],R=r.accessibilityDescribedBy,C=r["aria-details"],A=r.accessibilityDetails,N=r["aria-disabled"],D=r.accessibilityDisabled,de=r["aria-errormessage"],fe=r.accessibilityErrorMessage,je=r["aria-expanded"],Re=r.accessibilityExpanded,U=r["aria-flowto"],Y=r.accessibilityFlowTo,ie=r["aria-haspopup"],we=r.accessibilityHasPopup,Ae=r["aria-hidden"],hn=r.accessibilityHidden,lt=r["aria-invalid"],zt=r.accessibilityInvalid,mt=r["aria-keyshortcuts"],Ke=r.accessibilityKeyShortcuts,Nt=r["aria-label"],Mn=r.accessibilityLabel,Ii=r["aria-labelledby"],fs=r.accessibilityLabelledBy,_r=r["aria-level"],zr=r.accessibilityLevel,nr=r["aria-live"],Lo=r.accessibilityLiveRegion,ps=r["aria-modal"],Vo=r.accessibilityModal,ms=r["aria-multiline"],Oe=r.accessibilityMultiline,et=r["aria-multiselectable"],Nn=r.accessibilityMultiSelectable,rr=r["aria-orientation"],gs=r.accessibilityOrientation,Fo=r["aria-owns"],wr=r.accessibilityOwns,Bo=r["aria-placeholder"],il=r.accessibilityPlaceholder,ys=r["aria-posinset"],mc=r.accessibilityPosInSet,sl=r["aria-pressed"],ol=r.accessibilityPressed,jo=r["aria-readonly"],Ri=r.accessibilityReadOnly,vs=r["aria-required"],Ue=r.accessibilityRequired;r.role,r.accessibilityRole;var ir=r["aria-roledescription"],al=r.accessibilityRoleDescription,Ci=r["aria-rowcount"],ll=r.accessibilityRowCount,Wr=r["aria-rowindex"],ul=r.accessibilityRowIndex,ee=r["aria-rowspan"],Qe=r.accessibilityRowSpan,Lt=r["aria-selected"],Sr=r.accessibilitySelected,Hr=r["aria-setsize"],cl=r.accessibilitySetSize,xi=r["aria-sort"],Tv=r.accessibilitySort,bf=r["aria-valuemax"],hl=r.accessibilityValueMax,gc=r["aria-valuemin"],If=r.accessibilityValueMin,dl=r["aria-valuenow"],Uo=r.accessibilityValueNow,Rf=r["aria-valuetext"],Kr=r.accessibilityValueText,$o=r.dataSet,zo=r.focusable,fl=r.id,yc=r.nativeID,vc=r.pointerEvents,bv=r.style,_s=r.tabIndex,Cf=r.testID,Q=On(r,jz),xf=N||D,Ln=QO.propsToAriaRole(e),ws=i??s;ws!=null&&(Q["aria-activedescendant"]=ws);var qr=o!=null?i:a;qr!=null&&(Q["aria-atomic"]=qr);var pl=l??u;pl!=null&&(Q["aria-autocomplete"]=pl);var Af=c??d;Af!=null&&(Q["aria-busy"]=Af);var _c=f??p;_c!=null&&(Q["aria-checked"]=_c);var wc=g??E;wc!=null&&(Q["aria-colcount"]=wc);var Sc=b??S;Sc!=null&&(Q["aria-colindex"]=Sc);var ml=y??w;ml!=null&&(Q["aria-colspan"]=ml);var gl=x??O;gl!=null&&(Q["aria-controls"]=El(gl));var Ec=k??T;Ec!=null&&(Q["aria-current"]=Ec);var Tc=v??R;Tc!=null&&(Q["aria-describedby"]=El(Tc));var bc=C??A;bc!=null&&(Q["aria-details"]=bc),xf===!0&&(Q["aria-disabled"]=!0,(t==="button"||t==="form"||t==="input"||t==="select"||t==="textarea")&&(Q.disabled=!0));var Pf=de??fe;Pf!=null&&(Q["aria-errormessage"]=Pf);var Er=je??Re;Er!=null&&(Q["aria-expanded"]=Er);var Vn=U??Y;Vn!=null&&(Q["aria-flowto"]=El(Vn));var Ss=ie??we;Ss!=null&&(Q["aria-haspopup"]=Ss);var Es=Ae??hn;Es===!0&&(Q["aria-hidden"]=Es);var yl=lt??zt;yl!=null&&(Q["aria-invalid"]=yl);var Be=mt??Ke;Be!=null&&(Q["aria-keyshortcuts"]=El(Be));var Wo=Nt??Mn;Wo!=null&&(Q["aria-label"]=Wo);var Ts=Ii??fs;Ts!=null&&(Q["aria-labelledby"]=El(Ts));var bs=_r??zr;bs!=null&&(Q["aria-level"]=bs);var Ic=nr??Lo;Ic!=null&&(Q["aria-live"]=Ic==="none"?"off":Ic);var Rc=ps??Vo;Rc!=null&&(Q["aria-modal"]=Rc);var kf=ms??Oe;kf!=null&&(Q["aria-multiline"]=kf);var Df=et??Nn;Df!=null&&(Q["aria-multiselectable"]=Df);var Of=rr??gs;Of!=null&&(Q["aria-orientation"]=Of);var Mf=Fo??wr;Mf!=null&&(Q["aria-owns"]=El(Mf));var Is=Bo??il;Is!=null&&(Q["aria-placeholder"]=Is);var Gr=ys??mc;Gr!=null&&(Q["aria-posinset"]=Gr);var Cc=sl??ol;Cc!=null&&(Q["aria-pressed"]=Cc);var xc=jo??Ri;xc!=null&&(Q["aria-readonly"]=xc,(t==="input"||t==="select"||t==="textarea")&&(Q.readOnly=!0));var Ac=vs??Ue;Ac!=null&&(Q["aria-required"]=Ac,(t==="input"||t==="select"||t==="textarea")&&(Q.required=Ue)),Ln!=null&&(Q.role=Ln==="none"?"presentation":Ln);var Pc=ir??al;Pc!=null&&(Q["aria-roledescription"]=Pc);var kc=Ci??ll;kc!=null&&(Q["aria-rowcount"]=kc);var Ai=Wr??ul;Ai!=null&&(Q["aria-rowindex"]=Ai);var Nf=ee??Qe;Nf!=null&&(Q["aria-rowspan"]=Nf);var Lf=Lt??Sr;Lf!=null&&(Q["aria-selected"]=Lf);var Vf=Hr??cl;Vf!=null&&(Q["aria-setsize"]=Vf);var Tr=xi??Tv;Tr!=null&&(Q["aria-sort"]=Tr);var Ff=bf??hl;Ff!=null&&(Q["aria-valuemax"]=Ff);var vl=gc??If;vl!=null&&(Q["aria-valuemin"]=vl);var Ho=dl??Uo;Ho!=null&&(Q["aria-valuenow"]=Ho);var Dc=Rf??Kr;if(Dc!=null&&(Q["aria-valuetext"]=Dc),$o!=null){for(var Pi in $o)if($z.call($o,Pi)){var Ko=Kz(Pi),Oc=$o[Pi];Oc!=null&&(Q["data-"+Ko]=Oc)}}_s===0||_s==="0"||_s===-1||_s==="-1"?Q.tabIndex=_s:(zo===!1&&(Q.tabIndex="-1"),t==="a"||t==="button"||t==="input"||t==="select"||t==="textarea"?(zo===!1||D===!0)&&(Q.tabIndex="-1"):Ln==="button"||Ln==="checkbox"||Ln==="link"||Ln==="radio"||Ln==="textbox"||Ln==="switch"?zo!==!1&&(Q.tabIndex="0"):zo===!0&&(Q.tabIndex="0"));var _l=De([bv,vc&&qz[vc]],ge({writingDirection:"ltr"},n)),qe=_l[0],Bf=_l[1];qe&&(Q.className=qe),Bf&&(Q.style=Bf);var jf=fl??yc;return jf!=null&&(Q.id=jf),Cf!=null&&(Q["data-testid"]=Cf),Q.type==null&&t==="button"&&(Q.type="button"),Q},Xz=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),FC=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","far","glk","he","iw","khw","ks","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]),BC=new Map;function Qz(t){var e=BC.get(t);if(e)return e;var n=!1;if(Intl.Locale)try{var r=new Intl.Locale(t).maximize().script;n=Xz.has(r)}catch{var i=t.split("-")[0];n=FC.has(i)}else{var s=t.split("-")[0];n=FC.has(s)}return BC.set(t,n),n}var Yz={direction:"ltr",locale:"en-US"},PM=I.createContext(Yz);function Ry(t){return Qz(t)?"rtl":"ltr"}function Jz(t){var e=t.direction,n=t.locale,r=t.children,i=e||n;return i?gt.createElement(PM.Provider,{children:r,value:{direction:n?Ry(n):e,locale:n}}):r}function uT(){return I.useContext(PM)}var Ju=(t,e,n)=>{var r;t&&t.constructor===String&&(r=QO.propsToAccessibilityComponent(e));var i=r||t,s=Gz(i,e,n),o=gt.createElement(i,s),a=s.dir?gt.createElement(Jz,{children:o,direction:s.dir,locale:s.lang}):o;return a},CS=t=>{if(t!=null){var e=t.nodeType===1;if(e&&typeof t.getBoundingClientRect=="function")return t.getBoundingClientRect()}},Oh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},Zz=["ms","Moz","O","Webkit"],e5=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1);Object.keys(Oh).forEach(t=>{Zz.forEach(e=>{Oh[e5(e,t)]=Oh[t]})});function t5(t,e,n){var r=e==null||typeof e=="boolean"||e==="";return r?"":!n&&typeof e=="number"&&e!==0&&!(Oh.hasOwnProperty(t)&&Oh[t])?e+"px":(""+e).trim()}function n5(t,e){var n=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=t5(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var jC=t=>{var e=t.offsetHeight,n=t.offsetWidth,r=t.offsetLeft,i=t.offsetTop;for(t=t.offsetParent;t&&t.nodeType===1;)r+=t.offsetLeft+t.clientLeft-t.scrollLeft,i+=t.offsetTop+t.clientTop-t.scrollTop,t=t.offsetParent;return i-=window.scrollY,r-=window.scrollX,{width:n,height:e,top:i,left:r}},UC=(t,e,n)=>{var r=e||t&&t.parentNode;t&&r&&setTimeout(()=>{if(t.isConnected&&r.isConnected){var i=jC(r),s=jC(t),o=s.height,a=s.left,l=s.top,u=s.width,c=a-i.left,d=l-i.top;n(c,d,u,o,a,l)}},0)},r5={A:!0,BODY:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0},Wi={blur(t){try{t.blur()}catch{}},focus(t){try{var e=t.nodeName;t.getAttribute("tabIndex")==null&&t.isContentEditable!==!0&&r5[e]==null&&t.setAttribute("tabIndex","-1"),t.focus()}catch{}},measure(t,e){UC(t,null,e)},measureInWindow(t,e){t&&setTimeout(()=>{var n=CS(t),r=n.height,i=n.left,s=n.top,o=n.width;e(i,s,o,r)},0)},measureLayout(t,e,n,r){UC(t,e,r)},updateView(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];switch(n){case"style":{n5(t,r);break}case"class":case"className":{t.setAttribute("class",r);break}case"text":case"value":t.value=r;break;default:t.setAttribute(n,r)}}},configureNextLayoutAnimation(t,e){e()},setLayoutAnimationEnabledExperimental(){}},i5={OS:"web"};function cn(){return cn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cn.apply(null,arguments)}var cT={children:!0,dataSet:!0,dir:!0,id:!0,ref:!0,suppressHydrationWarning:!0,tabIndex:!0,testID:!0,focusable:!0,nativeID:!0},hT={"aria-activedescendant":!0,"aria-atomic":!0,"aria-autocomplete":!0,"aria-busy":!0,"aria-checked":!0,"aria-colcount":!0,"aria-colindex":!0,"aria-colspan":!0,"aria-controls":!0,"aria-current":!0,"aria-describedby":!0,"aria-details":!0,"aria-disabled":!0,"aria-errormessage":!0,"aria-expanded":!0,"aria-flowto":!0,"aria-haspopup":!0,"aria-hidden":!0,"aria-invalid":!0,"aria-keyshortcuts":!0,"aria-label":!0,"aria-labelledby":!0,"aria-level":!0,"aria-live":!0,"aria-modal":!0,"aria-multiline":!0,"aria-multiselectable":!0,"aria-orientation":!0,"aria-owns":!0,"aria-placeholder":!0,"aria-posinset":!0,"aria-pressed":!0,"aria-readonly":!0,"aria-required":!0,role:!0,"aria-roledescription":!0,"aria-rowcount":!0,"aria-rowindex":!0,"aria-rowspan":!0,"aria-selected":!0,"aria-setsize":!0,"aria-sort":!0,"aria-valuemax":!0,"aria-valuemin":!0,"aria-valuenow":!0,"aria-valuetext":!0,accessibilityActiveDescendant:!0,accessibilityAtomic:!0,accessibilityAutoComplete:!0,accessibilityBusy:!0,accessibilityChecked:!0,accessibilityColumnCount:!0,accessibilityColumnIndex:!0,accessibilityColumnSpan:!0,accessibilityControls:!0,accessibilityCurrent:!0,accessibilityDescribedBy:!0,accessibilityDetails:!0,accessibilityDisabled:!0,accessibilityErrorMessage:!0,accessibilityExpanded:!0,accessibilityFlowTo:!0,accessibilityHasPopup:!0,accessibilityHidden:!0,accessibilityInvalid:!0,accessibilityKeyShortcuts:!0,accessibilityLabel:!0,accessibilityLabelledBy:!0,accessibilityLevel:!0,accessibilityLiveRegion:!0,accessibilityModal:!0,accessibilityMultiline:!0,accessibilityMultiSelectable:!0,accessibilityOrientation:!0,accessibilityOwns:!0,accessibilityPlaceholder:!0,accessibilityPosInSet:!0,accessibilityPressed:!0,accessibilityReadOnly:!0,accessibilityRequired:!0,accessibilityRole:!0,accessibilityRoleDescription:!0,accessibilityRowCount:!0,accessibilityRowIndex:!0,accessibilityRowSpan:!0,accessibilitySelected:!0,accessibilitySetSize:!0,accessibilitySort:!0,accessibilityValueMax:!0,accessibilityValueMin:!0,accessibilityValueNow:!0,accessibilityValueText:!0},dT={onClick:!0,onAuxClick:!0,onContextMenu:!0,onGotPointerCapture:!0,onLostPointerCapture:!0,onPointerCancel:!0,onPointerDown:!0,onPointerEnter:!0,onPointerMove:!0,onPointerLeave:!0,onPointerOut:!0,onPointerOver:!0,onPointerUp:!0},fT={onBlur:!0,onFocus:!0},pT={onKeyDown:!0,onKeyDownCapture:!0,onKeyUp:!0,onKeyUpCapture:!0},mT={onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0},gT={onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0},yT={style:!0};function vT(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&e[r]===!0&&(n[r]=t[r]);return n}var xS=Dt?I.useLayoutEffect:I.useEffect,AS="__reactLayoutHandler",d_=null;function s5(){return Dt&&typeof window.ResizeObserver<"u"&&d_==null&&(d_=new window.ResizeObserver(function(t){t.forEach(e=>{var n=e.target,r=n[AS];typeof r=="function"&&Wi.measure(n,(i,s,o,a,l,u)=>{var c={nativeEvent:{layout:{x:i,y:s,width:o,height:a,left:l,top:u}},timeStamp:Date.now()};Object.defineProperty(c.nativeEvent,"target",{enumerable:!0,get:()=>e.target}),r(c)})})})),d_}function _T(t,e){var n=s5();xS(()=>{var r=t.current;r!=null&&(r[AS]=e)},[t,e]),xS(()=>{var r=t.current;return r!=null&&n!=null&&(typeof r[AS]=="function"?n.observe(r):n.unobserve(r)),()=>{r!=null&&n!=null&&n.unobserve(r)}},[t,n])}function kM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){e.forEach(s=>{if(s!=null){if(typeof s=="function"){s(i);return}if(typeof s=="object"){s.current=i;return}console.error("mergeRefs cannot handle Refs of type boolean, number or string, received ref "+String(s))}})}}function Yd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.useMemo(()=>kM(...e),[...e])}var $C=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():Object.freeze({});function o5(t){var e=I.useRef($C);return e.current===$C&&(e.current=t()),e.current}function wT(t){t.pointerEvents,t.style;var e=o5(()=>n=>{n!=null&&(n.measure=r=>Wi.measure(n,r),n.measureLayout=(r,i,s)=>Wi.measureLayout(n,r,s,i),n.measureInWindow=r=>Wi.measureInWindow(n,r))});return e}var zC=()=>{},a5={},l5=[];function WC(t){return t>20?t%20:t}function DM(t,e){var n,r=!1,i,s,o=t.changedTouches,a=t.type,l=t.metaKey===!0,u=t.shiftKey===!0,c=o&&o[0].force||0,d=WC(o&&o[0].identifier||0),f=o&&o[0].clientX||t.clientX,p=o&&o[0].clientY||t.clientY,g=o&&o[0].pageX||t.pageX,E=o&&o[0].pageY||t.pageY,b=typeof t.preventDefault=="function"?t.preventDefault.bind(t):zC,S=t.timeStamp;function y(T){return Array.prototype.slice.call(T).map(v=>({force:v.force,identifier:WC(v.identifier),get locationX(){return O(v.clientX)},get locationY(){return k(v.clientY)},pageX:v.pageX,pageY:v.pageY,target:v.target,timestamp:S}))}if(o!=null)i=y(o),s=y(t.touches);else{var w=[{force:c,identifier:d,get locationX(){return O(f)},get locationY(){return k(p)},pageX:g,pageY:E,target:t.target,timestamp:S}];i=w,s=a==="mouseup"||a==="dragstart"?l5:w}var x={bubbles:!0,cancelable:!0,currentTarget:null,defaultPrevented:t.defaultPrevented,dispatchConfig:a5,eventPhase:t.eventPhase,isDefaultPrevented(){return t.defaultPrevented},isPropagationStopped(){return r},isTrusted:t.isTrusted,nativeEvent:{altKey:!1,ctrlKey:!1,metaKey:l,shiftKey:u,changedTouches:i,force:c,identifier:d,get locationX(){return O(f)},get locationY(){return k(p)},pageX:g,pageY:E,target:t.target,timestamp:S,touches:s,type:a},persist:zC,preventDefault:b,stopPropagation(){r=!0},target:t.target,timeStamp:S,touchHistory:e.touchHistory};function O(T){if(n=n||CS(x.currentTarget),n)return T-n.left}function k(T){if(n=n||CS(x.currentTarget),n)return T-n.top}return x}var u5="mousedown",c5="mousemove",h5="mouseup",d5="dragstart",f5="touchstart",p5="touchmove",m5="touchend",g5="touchcancel",y5="scroll",v5="select",_5="selectionchange";function OM(t){return t===f5||t===u5}function MM(t){return t===p5||t===c5}function NM(t){return t===m5||t===h5||LM(t)}function LM(t){return t===g5||t===d5}function w5(t){return t===y5}function S5(t){return t===v5||t===_5}function E5(){var t=window.getSelection(),e=t.toString(),n=t.anchorNode,r=t.focusNode,i=n&&n.nodeType===window.Node.TEXT_NODE||r&&r.nodeType===window.Node.TEXT_NODE;return e.length>=1&&e!==`
`&&i}var VM="__reactResponderId";function T5(t){if(t.type==="selectionchange"){var e=window.getSelection().anchorNode;return HC(e)}else{var n=t.composedPath!=null?t.composedPath():HC(t.target);return n}}function HC(t){for(var e=[];t!=null&&t!==document.body;)e.push(t),t=t.parentNode;return e}function b5(t){return t!=null?t[VM]:null}function I5(t,e){t!=null&&(t[VM]=e)}function R5(t){for(var e=[],n=[],r=T5(t),i=0;i<r.length;i++){var s=r[i],o=b5(s);o!=null&&(e.push(o),n.push(s))}return{idPath:e,nodePath:n}}function C5(t,e){var n=t.length,r=e.length;if(n===0||r===0||t[n-1]!==e[r-1])return null;var i=t[0],s=0,o=e[0],a=0;n-r>0&&(s=n-r,i=t[s],n=r),r-n>0&&(a=r-n,o=e[a],r=n);for(var l=n;l--;){if(i===o)return i;i=t[s++],o=e[a++]}return null}function x5(t,e){if(!e||e.length===0)return!1;for(var n=0;n<e.length;n++){var r=e[n].target;if(r!=null&&t.contains(r))return!0}return!1}function A5(t){return t.type==="selectionchange"?E5():t.type==="select"}function P5(t){var e=t.altKey,n=t.button,r=t.buttons,i=t.ctrlKey,s=t.type,o=s==="touchstart"||s==="touchmove",a=s==="mousedown"&&(n===0||r===1),l=s==="mousemove"&&r===1,u=e===!1&&i===!1;return!!(o||a&&u||l&&u)}var KC=20;function pr(t){return t.timeStamp||t.timestamp}function k5(t){return{touchActive:!0,startPageX:t.pageX,startPageY:t.pageY,startTimeStamp:pr(t),currentPageX:t.pageX,currentPageY:t.pageY,currentTimeStamp:pr(t),previousPageX:t.pageX,previousPageY:t.pageY,previousTimeStamp:pr(t)}}function D5(t,e){t.touchActive=!0,t.startPageX=e.pageX,t.startPageY=e.pageY,t.startTimeStamp=pr(e),t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=pr(e),t.previousPageX=e.pageX,t.previousPageY=e.pageY,t.previousTimeStamp=pr(e)}function ST(t){var e=t.identifier;return e==null&&console.error("Touch object is missing identifier."),e}function O5(t,e){var n=ST(t),r=e.touchBank[n];r?D5(r,t):e.touchBank[n]=k5(t),e.mostRecentTimeStamp=pr(t)}function M5(t,e){var n=e.touchBank[ST(t)];n?(n.touchActive=!0,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=pr(t),e.mostRecentTimeStamp=pr(t)):console.warn(`Cannot record touch move without a touch start.
`,"Touch Move: "+FM(t)+`
`,"Touch Bank: "+BM(e))}function N5(t,e){var n=e.touchBank[ST(t)];n?(n.touchActive=!1,n.previousPageX=n.currentPageX,n.previousPageY=n.currentPageY,n.previousTimeStamp=n.currentTimeStamp,n.currentPageX=t.pageX,n.currentPageY=t.pageY,n.currentTimeStamp=pr(t),e.mostRecentTimeStamp=pr(t)):console.warn(`Cannot record touch end without a touch start.
`,"Touch End: "+FM(t)+`
`,"Touch Bank: "+BM(e))}function FM(t){return JSON.stringify({identifier:t.identifier,pageX:t.pageX,pageY:t.pageY,timestamp:pr(t)})}function BM(t){var e=t.touchBank,n=JSON.stringify(e.slice(0,KC));return e.length>KC&&(n+=" (original size: "+e.length+")"),n}class L5{constructor(){this._touchHistory={touchBank:[],numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0}}recordTouchTrack(e,n){var r=this._touchHistory;if(MM(e))n.changedTouches.forEach(a=>M5(a,r));else if(OM(e))n.changedTouches.forEach(a=>O5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1&&(r.indexOfSingleActiveTouch=n.touches[0].identifier);else if(NM(e)&&(n.changedTouches.forEach(a=>N5(a,r)),r.numberActiveTouches=n.touches.length,r.numberActiveTouches===1))for(var i=r.touchBank,s=0;s<i.length;s++){var o=i[s];if(o!=null&&o.touchActive){r.indexOfSingleActiveTouch=s;break}}}get touchHistory(){return this._touchHistory}}var V5={},qC=["onStartShouldSetResponderCapture","onStartShouldSetResponder",{bubbles:!0}],GC=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder",{bubbles:!0}],F5=["onScrollShouldSetResponderCapture","onScrollShouldSetResponder",{bubbles:!1}],B5={touchstart:qC,mousedown:qC,touchmove:GC,mousemove:GC,scroll:F5},PS={id:null,idPath:null,node:null},ag=new Map,Bs=!1,Jr=0,ii={id:null,node:null,idPath:null},kS=new L5;function _d(t){ii=t}function wd(t){var e=ag.get(t);return e??V5}function f_(t){var e=t.type,n=t.target;if(e==="touchstart"&&(Bs=!0),(e==="touchmove"||Jr>1)&&(Bs=!1),!(e==="mousedown"&&Bs||e==="mousemove"&&Bs||e==="mousemove"&&Jr<1)){if(Bs&&e==="mouseup"){Jr===0&&(Bs=!1);return}var r=OM(e)&&P5(t),i=MM(e),s=NM(e),o=w5(e),a=S5(e),l=DM(t,kS);(r||i||s)&&(t.touches?Jr=t.touches.length:r?Jr=1:s&&(Jr=0),kS.recordTouchTrack(e,l.nativeEvent));var u=R5(t),c=!1,d;if(r||i||o&&Jr>0){var f=ii.idPath,p=u.idPath;if(f!=null&&p!=null){var g=C5(f,p);if(g!=null){var E=p.indexOf(g),b=E+(g===ii.id?1:0);u={idPath:p.slice(b),nodePath:u.nodePath.slice(b)}}else u=null}u!=null&&(d=j5(u,t,l),d!=null&&(U5(l,d),c=!0))}if(ii.id!=null&&ii.node!=null){var S=ii,y=S.id,w=S.node,x=wd(y),O=x.onResponderStart,k=x.onResponderMove,T=x.onResponderEnd,v=x.onResponderRelease,R=x.onResponderTerminate,C=x.onResponderTerminationRequest;if(l.bubbles=!1,l.cancelable=!1,l.currentTarget=w,r)O!=null&&(l.dispatchConfig.registrationName="onResponderStart",O(l));else if(i)k!=null&&(l.dispatchConfig.registrationName="onResponderMove",k(l));else{var A=LM(e)||e==="contextmenu"||e==="blur"&&n===window||e==="blur"&&n.contains(w)&&t.relatedTarget!==w||o&&Jr===0||o&&n.contains(w)&&n!==w||a&&A5(t),N=s&&!A&&!x5(w,t.touches);if(s&&T!=null&&(l.dispatchConfig.registrationName="onResponderEnd",T(l)),N&&(v!=null&&(l.dispatchConfig.registrationName="onResponderRelease",v(l)),_d(PS)),A){var D=!0;(e==="contextmenu"||e==="scroll"||e==="selectionchange")&&(c?D=!1:C!=null&&(l.dispatchConfig.registrationName="onResponderTerminationRequest",C(l)===!1&&(D=!1))),D&&(R!=null&&(l.dispatchConfig.registrationName="onResponderTerminate",R(l)),_d(PS),Bs=!1,Jr=0)}}}}}function j5(t,e,n){var r=B5[e.type];if(r!=null){for(var i=t.idPath,s=t.nodePath,o=r[0],a=r[1],l=r[2].bubbles,u=function(k,T,v){var R=wd(k),C=R[v];if(C!=null&&(n.currentTarget=T,C(n)===!0)){var A=i.slice(i.indexOf(k));return{id:k,node:T,idPath:A}}},c=i.length-1;c>=0;c--){var d=i[c],f=s[c],p=u(d,f,o);if(p!=null)return p;if(n.isPropagationStopped()===!0)return}if(l)for(var g=0;g<i.length;g++){var E=i[g],b=s[g],S=u(E,b,a);if(S!=null)return S;if(n.isPropagationStopped()===!0)return}else{var y=i[0],w=s[0],x=e.target;if(x===w)return u(y,w,a)}}}function U5(t,e){var n=ii,r=n.id,i=n.node,s=e.id,o=e.node,a=wd(s),l=a.onResponderGrant,u=a.onResponderReject;if(t.bubbles=!1,t.cancelable=!1,t.currentTarget=o,r==null)l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),_d(e);else{var c=wd(r),d=c.onResponderTerminate,f=c.onResponderTerminationRequest,p=!0;f!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminationRequest",f(t)===!1&&(p=!1)),p?(d!=null&&(t.currentTarget=i,t.dispatchConfig.registrationName="onResponderTerminate",d(t)),l!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderGrant",l(t)),_d(e)):u!=null&&(t.currentTarget=o,t.dispatchConfig.registrationName="onResponderReject",u(t))}}var $5=["blur","scroll"],z5=["mousedown","mousemove","mouseup","dragstart","touchstart","touchmove","touchend","touchcancel","contextmenu","select","selectionchange"];function W5(){Dt&&window.__reactResponderSystemActive==null&&(window.addEventListener("blur",f_),z5.forEach(t=>{document.addEventListener(t,f_)}),$5.forEach(t=>{document.addEventListener(t,f_,!0)}),window.__reactResponderSystemActive=!0)}function H5(t,e,n){I5(e,t),ag.set(t,n)}function XC(t){ii.id===t&&K5(),ag.has(t)&&ag.delete(t)}function K5(){var t=ii,e=t.id,n=t.node;if(e!=null&&n!=null){var r=wd(e),i=r.onResponderTerminate;if(i!=null){var s=DM({},kS);s.currentTarget=n,i(s)}_d(PS)}Bs=!1,Jr=0}function q5(){return ii.node}var G5={},X5=0;function Q5(t){var e=I.useRef(null);return e.current==null&&(e.current=t()),e.current}function ET(t,e){e===void 0&&(e=G5);var n=Q5(()=>X5++),r=I.useRef(!1);I.useEffect(()=>(W5(),()=>{XC(n)}),[n]),I.useEffect(()=>{var i=e,s=i.onMoveShouldSetResponder,o=i.onMoveShouldSetResponderCapture,a=i.onScrollShouldSetResponder,l=i.onScrollShouldSetResponderCapture,u=i.onSelectionChangeShouldSetResponder,c=i.onSelectionChangeShouldSetResponderCapture,d=i.onStartShouldSetResponder,f=i.onStartShouldSetResponderCapture,p=s!=null||o!=null||a!=null||l!=null||u!=null||c!=null||d!=null||f!=null,g=t.current;p?(H5(n,g,e),r.current=!0):r.current&&(XC(n),r.current=!1)},[e,t,n]),I.useDebugValue({isResponder:t.current===q5()}),I.useDebugValue(e)}var lg=I.createContext(!1),Y5=["hrefAttrs","onLayout","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture"],J5=Object.assign({},cT,hT,dT,fT,pT,mT,gT,yT,{href:!0,lang:!0,onScroll:!0,onWheel:!0,pointerEvents:!0}),Z5=t=>vT(t,J5),X=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.onLayout,i=t.onMoveShouldSetResponder,s=t.onMoveShouldSetResponderCapture,o=t.onResponderEnd,a=t.onResponderGrant,l=t.onResponderMove,u=t.onResponderReject,c=t.onResponderRelease,d=t.onResponderStart,f=t.onResponderTerminate,p=t.onResponderTerminationRequest,g=t.onScrollShouldSetResponder,E=t.onScrollShouldSetResponderCapture,b=t.onSelectionChangeShouldSetResponder,S=t.onSelectionChangeShouldSetResponderCapture,y=t.onStartShouldSetResponder,w=t.onStartShouldSetResponderCapture,x=On(t,Y5),O=I.useContext(lg),k=I.useRef(null),T=uT(),v=T.direction;_T(k,r),ET(k,{onMoveShouldSetResponder:i,onMoveShouldSetResponderCapture:s,onResponderEnd:o,onResponderGrant:a,onResponderMove:l,onResponderReject:u,onResponderRelease:c,onResponderStart:d,onResponderTerminate:f,onResponderTerminationRequest:p,onScrollShouldSetResponder:g,onScrollShouldSetResponderCapture:E,onSelectionChangeShouldSetResponder:b,onSelectionChangeShouldSetResponderCapture:S,onStartShouldSetResponder:y,onStartShouldSetResponderCapture:w});var R="div",C=t.lang!=null?Ry(t.lang):null,A=t.dir||C,N=A||v,D=Z5(x);if(D.dir=A,D.style=[QC.view$raw,O&&QC.inline,t.style],t.href!=null&&(R="a",n!=null)){var de=n.download,fe=n.rel,je=n.target;de!=null&&(D.download=de),fe!=null&&(D.rel=fe),typeof je=="string"&&(D.target=je.charAt(0)!=="_"?"_"+je:je)}var Re=wT(D),U=Yd(k,Re,e);return D.ref=U,Ju(R,D,{writingDirection:N})});X.displayName="View";var QC=De.create({view$raw:{alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",zIndex:0},inline:{display:"inline-flex"}}),e9=function t(e,n,r){if(r===void 0&&(r=-1),r===0)return!0;if(e===n||typeof e=="function"&&typeof n=="function")return!1;if(typeof e!="object"||e===null)return e!==n;if(typeof n!="object"||n===null||e.constructor!==n.constructor)return!0;if(Array.isArray(e)){var i=e.length;if(n.length!==i)return!0;for(var s=0;s<i;s++)if(t(e[s],n[s],r-1))return!0}else{for(var o in e)if(t(e[o],n[o],r-1))return!0;for(var a in n)if(e[a]===void 0&&n[a]!==void 0)return!0}return!1};function t9(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!t){var s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;s=new Error(e.replace(/%s/g,function(){return String(r[o++])})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}var n9=t9;const me=Gu(n9);function YC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function r9(t,e){if(t){if(typeof t=="string")return YC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YC(t,e):void 0}}function ma(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=r9(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i9=["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"];function s9(t){t.colors,t.enabled,t.onRefresh,t.progressBackgroundColor,t.progressViewOffset,t.refreshing,t.size,t.tintColor,t.title,t.titleColor;var e=On(t,i9);return gt.createElement(X,e)}var ga={window:{fontScale:1,height:0,scale:1,width:0},screen:{fontScale:1,height:0,scale:1,width:0}},zs={},JC=Dt;function jM(){if(Dt){var t=window,e,n;if(t.visualViewport){var r=t.visualViewport;e=Math.round(r.height*r.scale),n=Math.round(r.width*r.scale)}else{var i=t.document.documentElement;e=i.clientHeight,n=i.clientWidth}ga.window={fontScale:1,height:e,scale:t.devicePixelRatio||1,width:n},ga.screen={fontScale:1,height:t.screen.height,scale:t.devicePixelRatio||1,width:t.screen.width}}}function ZC(){jM(),Array.isArray(zs.change)&&zs.change.forEach(t=>t(ga))}class ug{static get(e){return JC&&(JC=!1,jM()),me(ga[e],"No dimension set for key "+e),ga[e]}static set(e){e&&(Dt?me(!1,"Dimensions cannot be set in the browser"):(e.screen!=null&&(ga.screen=e.screen),e.window!=null&&(ga.window=e.window)))}static addEventListener(e,n){return zs[e]=zs[e]||[],zs[e].push(n),{remove:()=>{this.removeEventListener(e,n)}}}static removeEventListener(e,n){Array.isArray(zs[e])&&(zs[e]=zs[e].filter(r=>r!==n))}}Dt&&(window.visualViewport?window.visualViewport.addEventListener("resize",ZC,!1):window.addEventListener("resize",ZC,!1));var Bi={_currentlyFocusedNode:null,currentlyFocusedField(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput(t){t!==null&&(this._currentlyFocusedNode=t,document.activeElement!==t&&Wi.focus(t))},blurTextInput(t){t!==null&&(this._currentlyFocusedNode=null,document.activeElement===t&&Wi.blur(t))}},o9=()=>{Bi.blurTextInput(Bi.currentlyFocusedField())},a9=["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"];function ex(t){return{nativeEvent:{contentOffset:{get x(){return t.target.scrollLeft},get y(){return t.target.scrollTop}},contentSize:{get height(){return t.target.scrollHeight},get width(){return t.target.scrollWidth}},layoutMeasurement:{get height(){return t.target.offsetHeight},get width(){return t.target.offsetWidth}}},timeStamp:Date.now()}}function l9(t,e){var n=Date.now()-t;return e>0&&n>=e}var u9=I.forwardRef((t,e)=>{var n=t.onScroll,r=t.onTouchMove,i=t.onWheel,s=t.scrollEnabled,o=s===void 0?!0:s,a=t.scrollEventThrottle,l=a===void 0?0:a,u=t.showsHorizontalScrollIndicator,c=t.showsVerticalScrollIndicator,d=t.style,f=On(t,a9),p=I.useRef({isScrolling:!1,scrollLastTick:0}),g=I.useRef(null),E=I.useRef(null);function b(k){return T=>{o&&k&&k(T)}}function S(k){k.stopPropagation(),k.target===E.current&&(k.persist(),g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{x(k)},100),p.current.isScrolling?l9(p.current.scrollLastTick,l)&&w(k):y(k))}function y(k){p.current.isScrolling=!0,w(k)}function w(k){p.current.scrollLastTick=Date.now(),n&&n(ex(k))}function x(k){p.current.isScrolling=!1,n&&n(ex(k))}var O=u===!1||c===!1;return I.createElement(X,cn({},f,{onScroll:S,onTouchMove:b(r),onWheel:b(i),ref:Yd(E,e),style:[d,!o&&tx.scrollDisabled,O&&tx.hideScrollbar]}))}),tx=De.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});function Cy(t){return function(){return t}}var Za=function(){};Za.thatReturns=Cy;Za.thatReturnsFalse=Cy(!1);Za.thatReturnsTrue=Cy(!0);Za.thatReturnsNull=Cy(null);Za.thatReturnsThis=function(){return this};Za.thatReturnsArgument=function(t){return t};var c9=Za,h9=c9,d9=h9,f9=d9;const p9=Gu(f9);var m9=["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll","centerContent"],nx={},g9=16;class y9 extends gt.Component{constructor(){super(...arguments),this._scrollNodeRef=null,this._innerViewRef=null,this.isTouching=!1,this.lastMomentumScrollBeginTime=0,this.lastMomentumScrollEndTime=0,this.observedScrollSinceBecomingResponder=!1,this.becameResponderWhileAnimating=!1,this.scrollResponderHandleScrollShouldSetResponder=()=>this.isTouching,this.scrollResponderHandleStartShouldSetResponderCapture=e=>this.scrollResponderIsAnimating(),this.scrollResponderHandleTerminationRequest=()=>!this.observedScrollSinceBecomingResponder,this.scrollResponderHandleTouchEnd=e=>{var n=e.nativeEvent;this.isTouching=n.touches.length!==0,this.props.onTouchEnd&&this.props.onTouchEnd(e)},this.scrollResponderHandleResponderRelease=e=>{this.props.onResponderRelease&&this.props.onResponderRelease(e);var n=Bi.currentlyFocusedField();!this.props.keyboardShouldPersistTaps&&n!=null&&e.target!==n&&!this.observedScrollSinceBecomingResponder&&!this.becameResponderWhileAnimating&&(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),Bi.blurTextInput(n))},this.scrollResponderHandleScroll=e=>{this.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},this.scrollResponderHandleResponderGrant=e=>{this.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},this.scrollResponderHandleScrollBeginDrag=e=>{this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},this.scrollResponderHandleScrollEndDrag=e=>{this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},this.scrollResponderHandleMomentumScrollBegin=e=>{this.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},this.scrollResponderHandleMomentumScrollEnd=e=>{this.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},this.scrollResponderHandleTouchStart=e=>{this.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},this.scrollResponderHandleTouchMove=e=>{this.props.onTouchMove&&this.props.onTouchMove(e)},this.scrollResponderIsAnimating=()=>{var e=Date.now(),n=e-this.lastMomentumScrollEndTime,r=n<g9||this.lastMomentumScrollEndTime<this.lastMomentumScrollBeginTime;return r},this.scrollResponderScrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||nx;e=i.x,n=i.y,r=i.animated}var s=this.getScrollableNode(),o=e||0,a=n||0;s!=null&&(typeof s.scroll=="function"?s.scroll({top:a,left:o,behavior:r?"smooth":"auto"}):(s.scrollLeft=o,s.scrollTop=a))},this.scrollResponderZoomTo=(e,n)=>{me("zoomToRect is not implemented")},this.scrollResponderScrollNativeHandleToKeyboard=(e,n,r)=>{this.additionalScrollOffset=n||0,this.preventNegativeScrollOffset=!!r,Wi.measureLayout(e,this.getInnerViewNode(),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},this.scrollResponderInputMeasureAndScrollToKeyboard=(e,n,r,i)=>{var s=ug.get("window").height;this.keyboardWillOpenTo&&(s=this.keyboardWillOpenTo.endCoordinates.screenY);var o=n-s+i+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(o=Math.max(0,o)),this.scrollResponderScrollTo({x:0,y:o,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},this.scrollResponderKeyboardWillShow=e=>{this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},this.scrollResponderKeyboardWillHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},this.scrollResponderKeyboardDidShow=e=>{e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},this.scrollResponderKeyboardDidHide=e=>{this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)},this.flashScrollIndicators=()=>{this.scrollResponderFlashScrollIndicators()},this.getScrollResponder=()=>this,this.getScrollableNode=()=>this._scrollNodeRef,this.getInnerViewRef=()=>this._innerViewRef,this.getInnerViewNode=()=>this._innerViewRef,this.getNativeScrollRef=()=>this._scrollNodeRef,this.scrollTo=(e,n,r)=>{if(typeof e=="number")console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var i=e||nx;n=i.x,e=i.y,r=i.animated}this.scrollResponderScrollTo({x:n||0,y:e||0,animated:r!==!1})},this.scrollToEnd=e=>{var n=(e&&e.animated)!==!1,r=this.props.horizontal,i=this.getScrollableNode(),s=r?i.scrollWidth:0,o=r?0:i.scrollHeight;this.scrollResponderScrollTo({x:s,y:o,animated:n})},this._handleContentOnLayout=e=>{var n=e.nativeEvent.layout,r=n.width,i=n.height;this.props.onContentSizeChange(r,i)},this._handleScroll=e=>{this.props.keyboardDismissMode==="on-drag"&&o9(),this.scrollResponderHandleScroll(e)},this._setInnerViewRef=e=>{this._innerViewRef=e},this._setScrollNodeRef=e=>{this._scrollNodeRef=e,e!=null&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard);var n=kM(this.props.forwardedRef);n(e)}}scrollResponderHandleStartShouldSetResponder(){return!1}scrollResponderHandleResponderReject(){p9(!1,"ScrollView doesn't take rejection well - scrolls anyway")}scrollResponderFlashScrollIndicators(){}scrollResponderTextInputFocusError(e){console.error("Error measuring text field: ",e)}render(){var e=this.props,n=e.contentContainerStyle,r=e.horizontal,i=e.onContentSizeChange,s=e.refreshControl,o=e.stickyHeaderIndices,a=e.pagingEnabled;e.forwardedRef,e.keyboardDismissMode,e.onScroll;var l=e.centerContent,u=On(e,m9),c={};i&&(c={onLayout:this._handleContentOnLayout});var d=!r&&Array.isArray(o),f=d||a?gt.Children.map(this.props.children,(w,x)=>{var O=d&&o.indexOf(x)>-1;return w!=null&&(O||a)?gt.createElement(X,{style:[O&&Ds.stickyHeader,a&&Ds.pagingEnabledChild]},w):w}):this.props.children,p=gt.createElement(X,cn({},c,{children:f,collapsable:!1,ref:this._setInnerViewRef,style:[r&&Ds.contentContainerHorizontal,l&&Ds.contentContainerCenterContent,n]})),g=r?Ds.baseHorizontal:Ds.baseVertical,E=r?Ds.pagingEnabledHorizontal:Ds.pagingEnabledVertical,b=ge(ge({},u),{},{style:[g,a&&E,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),S=u9;me(S!==void 0,"ScrollViewClass must not be undefined");var y=gt.createElement(S,cn({},b,{ref:this._setScrollNodeRef}),p);return s?gt.cloneElement(s,{style:b.style},y):y}}var rx={flexGrow:1,flexShrink:1,transform:"translateZ(0)",WebkitOverflowScrolling:"touch"},Ds=De.create({baseVertical:ge(ge({},rx),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:ge(ge({},rx),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},contentContainerCenterContent:{justifyContent:"center",flexGrow:1},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),Nr=gt.forwardRef((t,e)=>gt.createElement(y9,cn({},t,{forwardedRef:e})));Nr.displayName="ScrollView";class v9{constructor(e){var n=e.onMoreTasks;this._onMoreTasks=n,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(n=>this.enqueue(n))}cancelTasks(e){this._queueStack=this._queueStack.map(n=>ge(ge({},n),{},{tasks:n.tasks.filter(r=>e.indexOf(r)===-1)})).filter((n,r)=>n.tasks.length>0||r===0)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var n=e.shift();try{typeof n=="object"&&n.gen?this._genPromise(n):typeof n=="object"&&n.run?n.run():(me(typeof n=="function",`Expected Function, SimpleTask, or PromiseTask, but got:
`+JSON.stringify(n,null,2)),n())}catch(r){throw r.message="TaskQueue: Error with task "+(n.name||"")+": "+r.message,r}}}_getCurrentQueue(){var e=this._queueStack.length-1,n=this._queueStack[e];return n.popable&&n.tasks.length===0&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}_genPromise(e){var n=this._queueStack.push({tasks:[],popable:!1}),r=n-1,i=this._queueStack[r];e.gen().then(()=>{i.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(s=>{setTimeout(()=>{throw s.message="TaskQueue: Error resolving Promise in task "+e.name+": "+s.message,s},0)})}}class _9{constructor(){this._registry={}}addListener(e,n,r){var i=w9(this._registry,e),s={context:r,listener:n,remove(){i.delete(s)}};return i.add(s),s}emit(e){var n=this._registry[e];if(n!=null){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var o=0,a=[...n];o<a.length;o++){var l=a[o];l.listener.apply(l.context,i)}}}removeAllListeners(e){e==null?this._registry={}:delete this._registry[e]}listenerCount(e){var n=this._registry[e];return n==null?0:n.size}}function w9(t,e){var n=t[e];return n==null&&(n=new Set,t[e]=n),n}var S9=function(e,n){return setTimeout(()=>{var r=Date.now();e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-r))}})},1)},E9=Dt&&typeof window.requestIdleCallback<"u",T9=E9?window.requestIdleCallback:S9,cg=new _9,DS={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions(t){var e=[],n=new Promise(r=>{Mh(),t&&e.push(t),e.push({run:r,name:"resolve "+(t&&t.name||"?")}),dg.enqueueTasks(e)});return{then:n.then.bind(n),done:n.then.bind(n),cancel:()=>{dg.cancelTasks(e)}}},createInteractionHandle(){Mh();var t=++b9;return hg.add(t),t},clearInteractionHandle(t){me(!!t,"Must provide a handle to clear."),Mh(),hg.delete(t),OS.add(t)},addListener:cg.addListener.bind(cg),setDeadline(t){fg=t}},fp=new Set,hg=new Set,OS=new Set,dg=new v9({onMoreTasks:Mh}),em=0,b9=0,fg=-1;function Mh(){em||(fg>0?em=setTimeout(ix):em=T9(ix))}function ix(){em=0;var t=fp.size;hg.forEach(r=>fp.add(r)),OS.forEach(r=>fp.delete(r));var e=fp.size;if(t!==0&&e===0?cg.emit(DS.Events.interactionComplete):t===0&&e!==0&&cg.emit(DS.Events.interactionStart),e===0){for(var n=Date.now();dg.hasTasksToProcess();)if(dg.processNext(),fg>0&&Date.now()-n>=fg){Mh();break}}hg.clear(),OS.clear()}class I9{constructor(e,n){this._delay=n,this._callback=e}dispose(e){e===void 0&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)}schedule(){if(!this._taskHandle){var e=setTimeout(()=>{this._taskHandle=DS.runAfterInteractions(()=>{this._taskHandle=null,this._callback()})},this._delay);this._taskHandle={cancel:()=>clearTimeout(e)}}}}function sx(t,e,n){return e<t?t:e>n?n:e}function R9(){return console.log(...arguments)}class C9{constructor(e){me(e>=0,"CellRenderMask must contain a non-negative number os cells"),this._numCells=e,e===0?this._regions=[]:this._regions=[{first:0,last:e-1,isSpacer:!0}]}enumerateRegions(){return this._regions}addCells(e){if(me(e.first>=0&&e.first<this._numCells&&e.last>=-1&&e.last<this._numCells&&e.last>=e.first-1,"CellRenderMask.addCells called with invalid cell range"),!(e.last<e.first)){var n=this._findRegion(e.first),r=n[0],i=n[1],s=this._findRegion(e.last),o=s[0],a=s[1];if(!(i===a&&!r.isSpacer)){var l=[],u=[],c=ge(ge({},e),{},{isSpacer:!1});r.first<c.first&&(r.isSpacer?l.push({first:r.first,last:c.first-1,isSpacer:!0}):c.first=r.first),o.last>c.last&&(o.isSpacer?u.push({first:c.last+1,last:o.last,isSpacer:!0}):c.last=o.last);var d=[...l,c,...u],f=a-i+1;this._regions.splice(i,f,...d)}}}numCells(){return this._numCells}equals(e){return this._numCells===e._numCells&&this._regions.length===e._regions.length&&this._regions.every((n,r)=>n.first===e._regions[r].first&&n.last===e._regions[r].last&&n.isSpacer===e._regions[r].isSpacer)}_findRegion(e){for(var n=0,r=this._regions.length-1;n<=r;){var i=Math.floor((n+r)/2),s=this._regions[i];if(e>=s.first&&e<=s.last)return[s,i];e<s.first?r=i-1:e>s.last&&(n=i+1)}me(!1,"A region was not found containing cellIdx "+e)}}class x9{constructor(){this._cellKeyToChildren=new Map,this._childrenToCellKey=new Map}add(e,n){var r;me(!this._childrenToCellKey.has(e),"Trying to add already present child list");var i=(r=this._cellKeyToChildren.get(n))!==null&&r!==void 0?r:new Set;i.add(e),this._cellKeyToChildren.set(n,i),this._childrenToCellKey.set(e,n)}remove(e){var n=this._childrenToCellKey.get(e);me(n!=null,"Trying to remove non-present child list"),this._childrenToCellKey.delete(e);var r=this._cellKeyToChildren.get(n);me(r,"_cellKeyToChildren should contain cellKey"),r.delete(e),r.size===0&&this._cellKeyToChildren.delete(n)}forEach(e){for(var n=ma(this._cellKeyToChildren.values()),r;!(r=n()).done;)for(var i=r.value,s=ma(i),o;!(o=s()).done;){var a=o.value;e(a)}}forEachInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ma(i),o;!(o=s()).done;){var a=o.value;n(a)}}anyInCell(e,n){for(var r,i=(r=this._cellKeyToChildren.get(e))!==null&&r!==void 0?r:[],s=ma(i),o;!(o=s()).done;){var a=o.value;if(n(a))return!0}return!1}size(){return this._childrenToCellKey.size}}class ox{constructor(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0}}var pp=[],ax=10,p_=null;class A9{static addListener(e){return p_===null&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),pp.push(e),{remove:()=>{pp=pp.filter(n=>e!==n)}}}static setSampleRate(e){p_=e}static setMinSampleCount(e){ax=e}constructor(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new ox,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(p_||0)>Math.random(),this._resetData()}activate(){this._enabled&&this._samplesStartTime==null&&(this._samplesStartTime=global.performance.now())}deactivateAndFlush(){if(this._enabled){var e=this._samplesStartTime;if(e!=null){if(this._info.sample_count<ax){this._resetData();return}var n=global.performance.now()-e,r=ge(ge({},this._info),{},{total_time_spent:n});pp.forEach(i=>i(r)),this._resetData()}}}computeBlankness(e,n,r){if(!this._enabled||e.getItemCount(e.data)===0||n.last<n.first||this._samplesStartTime==null)return 0;var i=r.dOffset,s=r.offset,o=r.velocity,a=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(a),this._info.pixels_scrolled+=Math.round(Math.abs(i));var l=Math.round(Math.abs(o)*1e3),u=global.performance.now();this._anyBlankStartTime!=null&&(this._info.any_blank_ms+=u-this._anyBlankStartTime),this._anyBlankStartTime=null,this._mostlyBlankStartTime!=null&&(this._info.mostly_blank_ms+=u-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var c=0,d=n.first,f=this._getFrameMetrics(d,e);d<=n.last&&(!f||!f.inLayout);)f=this._getFrameMetrics(d,e),d++;f&&d>0&&(c=Math.min(a,Math.max(0,f.offset-s)));for(var p=0,g=n.last,E=this._getFrameMetrics(g,e);g>=n.first&&(!E||!E.inLayout);)E=this._getFrameMetrics(g,e),g--;if(E&&g<e.getItemCount(e.data)-1){var b=E.offset+E.length;p=Math.min(a,Math.max(0,s+a-b))}var S=Math.round(c+p),y=S/a;return y>0?(this._anyBlankStartTime=u,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=S,y>.5&&(this._mostlyBlankStartTime=u,this._info.mostly_blank_count++)):(l<.01||Math.abs(i)<1)&&this.deactivateAndFlush(),y}enabled(){return this._enabled}_resetData(){this._anyBlankStartTime=null,this._info=new ox,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}class P9 extends I.PureComponent{constructor(e){super(e),this._inAsyncStateUpdate=!1,this._installSetStateHooks()}setState(e,n){typeof e=="function"?super.setState((r,i)=>{this._inAsyncStateUpdate=!0;var s;try{s=e(r,i)}catch(o){throw o}finally{this._inAsyncStateUpdate=!1}return s},n):super.setState(e,n)}_installSetStateHooks(){var e=this,n=this.props,r=this.state;Object.defineProperty(this,"props",{get(){return me(!e._inAsyncStateUpdate,'"this.props" should not be accessed during state updates'),n},set(i){n=i}}),Object.defineProperty(this,"state",{get(){return me(!e._inAsyncStateUpdate,'"this.state" should not be acceessed during state updates'),r},set(i){r=i}})}}class lx{constructor(e){e===void 0&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,n,r,i,s){var o=e.getItemCount(e.data),a=this._config,l=a.itemVisiblePercentThreshold,u=a.viewAreaCoveragePercentThreshold,c=u!=null,d=c?u:l;me(d!=null&&l!=null!=(u!=null),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var f=[];if(o===0)return f;var p=-1,g=s||{first:0,last:o-1},E=g.first,b=g.last;if(b>=o)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:s,itemCount:o})),[];for(var S=E;S<=b;S++){var y=i(S,e);if(y){var w=y.offset-n,x=w+y.length;if(w<r&&x>0)p=S,k9(c,d,w,x,r,y.length)&&f.push(S);else if(p>=0)break}}return f}onUpdate(e,n,r,i,s,o,a){var l=e.getItemCount(e.data);if(!(this._config.waitForInteraction&&!this._hasInteracted||l===0||!i(0,e))){var u=[];if(l&&(u=this.computeViewableItems(e,n,r,i,a)),!(this._viewableIndices.length===u.length&&this._viewableIndices.every((d,f)=>d===u[f])))if(this._viewableIndices=u,this._config.minimumViewTime){var c=setTimeout(()=>{this._timers.delete(c),this._onUpdateSync(e,u,o,s)},this._config.minimumViewTime);this._timers.add(c)}else this._onUpdateSync(e,u,o,s)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,n,r,i){n=n.filter(y=>this._viewableIndices.includes(y));for(var s=this._viewableItems,o=new Map(n.map(y=>{var w=i(y,!0,e);return[w.key,w]})),a=[],l=ma(o),u;!(u=l()).done;){var c=u.value,d=c[0],f=c[1];s.has(d)||a.push(f)}for(var p=ma(s),g;!(g=p()).done;){var E=g.value,b=E[0],S=E[1];o.has(b)||a.push(ge(ge({},S),{},{isViewable:!1}))}a.length>0&&(this._viewableItems=o,r({viewableItems:Array.from(o.values()),changed:a,viewabilityConfig:this._config}))}}function k9(t,e,n,r,i,s){if(O9(n,r,i))return!0;var o=D9(n,r,i),a=100*(t?o/i:o/s);return a>=e}function D9(t,e,n){var r=Math.min(e,n)-Math.max(t,0);return Math.max(0,r)}function O9(t,e,n){return t>=0&&e<=n&&e>t}var pg=I.createContext(null);function M9(t){var e=t.children,n=t.value,r=I.useMemo(()=>({cellKey:null,getScrollMetrics:n.getScrollMetrics,horizontal:n.horizontal,getOutermostParentListRef:n.getOutermostParentListRef,registerAsNestedChild:n.registerAsNestedChild,unregisterAsNestedChild:n.unregisterAsNestedChild}),[n.getScrollMetrics,n.horizontal,n.getOutermostParentListRef,n.registerAsNestedChild,n.unregisterAsNestedChild]);return I.createElement(pg.Provider,{value:r},e)}function tm(t){var e=t.cellKey,n=t.children,r=I.useContext(pg),i=I.useMemo(()=>r==null?null:ge(ge({},r),{},{cellKey:e}),[r,e]);return I.createElement(pg.Provider,{value:i},n)}class N9 extends I.Component{constructor(){super(...arguments),this.state={separatorProps:{highlighted:!1,leadingItem:this.props.item}},this._separators={highlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!0})},unhighlight:()=>{var e=this.props,n=e.cellKey,r=e.prevCellKey;this.props.onUpdateSeparators([n,r],{highlighted:!1})},updateProps:(e,n)=>{var r=this.props,i=r.cellKey,s=r.prevCellKey;this.props.onUpdateSeparators([e==="leading"?s:i],n)}},this._onLayout=e=>{this.props.onCellLayout&&this.props.onCellLayout(e,this.props.cellKey,this.props.index)}}static getDerivedStateFromProps(e,n){return{separatorProps:ge(ge({},n.separatorProps),{},{leadingItem:e.item})}}updateSeparatorProps(e){this.setState(n=>({separatorProps:ge(ge({},n.separatorProps),e)}))}componentWillUnmount(){this.props.onUnmount(this.props.cellKey)}_renderElement(e,n,r,i){if(e&&n&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),n)return I.createElement(n,{item:r,index:i,separators:this._separators});if(e)return e({item:r,index:i,separators:this._separators});me(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")}render(){var e=this.props,n=e.CellRendererComponent,r=e.ItemSeparatorComponent,i=e.ListItemComponent,s=e.cellKey,o=e.horizontal,a=e.item,l=e.index,u=e.inversionStyle,c=e.onCellFocusCapture,d=e.onCellLayout,f=e.renderItem,p=this._renderElement(f,i,a,l),g=I.isValidElement(r)?r:r&&I.createElement(r,this.state.separatorProps),E=u?o?[m_.rowReverse,u]:[m_.columnReverse,u]:o?[m_.row,u]:u,b=n?I.createElement(n,cn({cellKey:s,index:l,item:a,style:E,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g):I.createElement(X,cn({style:E,onFocusCapture:c},d&&{onLayout:this._onLayout}),p,g);return I.createElement(tm,{cellKey:this.props.cellKey},b)}}var m_=De.create({row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"}});function L9(t,e,n,r){r===void 0&&(r=1);for(var i=e.getItemCount(e.data),s=[],o=0;o<t.length;o++)for(var a=t[o],l=0,u=i-1;l<=u;){var c=l+(u-l>>>1),d=n(c,e),f=d.offset*r,p=(d.offset+d.length)*r;if(c===0&&a<f||c!==0&&a<=f)u=c-1;else if(a>p)l=c+1;else{s[o]=c;break}}return s}function V9(t,e){return e.last-e.first+1-Math.max(0,1+Math.min(e.last,t.last)-Math.max(e.first,t.first))}function F9(t,e,n,r,i,s){var o=t.getItemCount(t.data);if(o===0)return{first:0,last:-1};var a=s.offset,l=s.velocity,u=s.visibleLength,c=s.zoomScale,d=c===void 0?1:c,f=Math.max(0,a),p=f+u,g=(n-1)*u,E=.5,b=l>1?"after":l<-1?"before":"none",S=Math.max(0,f-(1-E)*g),y=Math.max(0,p+E*g),w=i(o-1,t).offset*d;if(w<S)return{first:Math.max(0,o-1-e),last:o-1};var x=L9([S,f,p,y],t,i,d),O=x[0],k=x[1],T=x[2],v=x[3];O=O??0,k=k??Math.max(0,O),v=v??o-1,T=T??Math.min(v,k+e-1);for(var R={first:k,last:T},C=V9(r,R);!(k<=O&&T>=v);){var A=C>=e,N=k<=r.first||k>r.last,D=k>O&&(!A||!N),de=T>=r.last||T<r.first,fe=T<v&&(!A||!de);if(A&&!D&&!fe)break;D&&!(b==="after"&&fe&&de)&&(N&&C++,k--),fe&&!(b==="before"&&D&&N)&&(de&&C++,T++)}if(!(T>=k&&k>=0&&T<o&&k>=O&&T<=v&&k<=R.first&&T>=R.last))throw new Error("Bad window calculation "+JSON.stringify({first:k,last:T,itemCount:o,overscanFirst:O,overscanLast:v,visible:R}));return{first:k,last:T}}function MS(t,e){return typeof t=="object"&&(t==null?void 0:t.key)!=null?t.key:typeof t=="object"&&(t==null?void 0:t.id)!=null?t.id:String(e)}var xy={exports:{}};function UM(t,e){if(t!=null)return t;var n=new Error(e!==void 0?e:"Got unexpected "+t);throw n.framesToPop=1,n}xy.exports=UM;xy.exports.default=UM;Object.defineProperty(xy.exports,"__esModule",{value:!0});var B9=xy.exports;const j9=Gu(B9);var ux=.001,g_=!1,y_="";function Xo(t){return t??!1}function U9(t){return t??10}function v_(t){return t??10}function $9(t){return t??2}function cx(t){return t??2}function hx(t,e){return t*e/2}function z9(t){return t??50}function dx(t){return t??21}function W9(t,e){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return t[n];return null}class or extends P9{scrollToEnd(e){var n=e?e.animated:!0,r=this.props.getItemCount(this.props.data)-1;if(!(r<0)){var i=this.__getFrameMetricsApprox(r,this.props),s=Math.max(0,i.offset+i.length+this._footerLength-this._scrollMetrics.visibleLength);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Xo(this.props.horizontal)?{x:s,animated:n}:{y:s,animated:n})}}}scrollToIndex(e){var n=this.props,r=n.data,i=n.horizontal,s=n.getItemCount,o=n.getItemLayout,a=n.onScrollToIndexFailed,l=e.animated,u=e.index,c=e.viewOffset,d=e.viewPosition;if(me(u>=0,"scrollToIndex out of range: requested index "+u+" but minimum is 0"),me(s(r)>=1,"scrollToIndex out of range: item length "+s(r)+" but minimum is 1"),me(u<s(r),"scrollToIndex out of range: requested index "+u+" is out of 0 to "+(s(r)-1)),!o&&u>this._highestMeasuredFrameIndex){me(!!a,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),a({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:u});return}var f=this.__getFrameMetricsApprox(Math.floor(u),this.props),p=Math.max(0,this._getOffsetApprox(u,this.props)-(d||0)*(this._scrollMetrics.visibleLength-f.length))-(c||0);if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(i?{x:p,animated:l}:{y:p,animated:l})}}scrollToItem(e){for(var n=e.item,r=this.props,i=r.data,s=r.getItem,o=r.getItemCount,a=o(i),l=0;l<a;l++)if(s(i,l)===n){this.scrollToIndex(ge(ge({},e),{},{index:l}));break}}scrollToOffset(e){var n=e.animated,r=e.offset;if(this._scrollRef!=null){if(this._scrollRef.scrollTo==null){console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo.");return}this._scrollRef.scrollTo(Xo(this.props.horizontal)?{x:r,animated:n}:{y:r,animated:n})}}recordInteraction(){this._nestedChildLists.forEach(e=>{e.recordInteraction()}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.recordInteraction()}),this._updateViewableItems(this.props,this.state.cellsAroundViewport)}flashScrollIndicators(){this._scrollRef!=null&&this._scrollRef.flashScrollIndicators()}getScrollResponder(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()}getScrollableNode(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():this._scrollRef}getScrollRef(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef}_getCellKey(){var e;return((e=this.context)==null?void 0:e.cellKey)||"rootList"}hasMore(){return this._hasMore}constructor(e){var n;if(super(e),this._getScrollMetrics=()=>this._scrollMetrics,this._getOutermostParentListRef=()=>this._isNestedWithSameOrientation()?this.context.getOutermostParentListRef():this,this._registerAsNestedChild=a=>{this._nestedChildLists.add(a.ref,a.cellKey),this._hasInteracted&&a.ref.recordInteraction()},this._unregisterAsNestedChild=a=>{this._nestedChildLists.remove(a.ref)},this._onUpdateSeparators=(a,l)=>{a.forEach(u=>{var c=u!=null&&this._cellRefs[u];c&&c.updateSeparatorProps(l)})},this._getSpacerKey=a=>a?"height":"width",this._averageCellLength=0,this._cellRefs={},this._frames={},this._footerLength=0,this._hasTriggeredInitialScrollToIndex=!1,this._hasInteracted=!1,this._hasMore=!1,this._hasWarned={},this._headerLength=0,this._hiPriInProgress=!1,this._highestMeasuredFrameIndex=0,this._indicesToKeys=new Map,this._lastFocusedCellKey=null,this._nestedChildLists=new x9,this._offsetFromParentVirtualizedList=0,this._prevParentOffset=0,this._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0,zoomScale:1},this._scrollRef=null,this._sentStartForContentLength=0,this._sentEndForContentLength=0,this._totalCellLength=0,this._totalCellsMeasured=0,this._viewabilityTuples=[],this._captureScrollRef=a=>{this._scrollRef=a},this._defaultRenderScrollComponent=a=>{var l=a.onRefresh;if(this._isNestedWithSameOrientation())return I.createElement(X,a);if(l){var u;return me(typeof a.refreshing=="boolean","`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify((u=a.refreshing)!==null&&u!==void 0?u:"undefined")+"`"),I.createElement(Nr,cn({},a,{refreshControl:a.refreshControl==null?I.createElement(s9,{refreshing:a.refreshing,onRefresh:l,progressViewOffset:a.progressViewOffset}):a.refreshControl}))}else return I.createElement(Nr,a)},this._onCellLayout=(a,l,u)=>{var c=a.nativeEvent.layout,d={offset:this._selectOffset(c),length:this._selectLength(c),index:u,inLayout:!0},f=this._frames[l];!f||d.offset!==f.offset||d.length!==f.length||u!==f.index?(this._totalCellLength+=d.length-(f?f.length:0),this._totalCellsMeasured+=f?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[l]=d,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,u),this._scheduleCellsToRenderUpdate()):this._frames[l].inLayout=!0,this._triggerRemeasureForChildListsInCell(l),this._computeBlankness(),this._updateViewableItems(this.props,this.state.cellsAroundViewport)},this._onCellUnmount=a=>{delete this._cellRefs[a];var l=this._frames[a];l&&(this._frames[a]=ge(ge({},l),{},{inLayout:!1}))},this._onLayout=a=>{this._isNestedWithSameOrientation()?this.measureLayoutRelativeToContainingList():this._scrollMetrics.visibleLength=this._selectLength(a.nativeEvent.layout),this.props.onLayout&&this.props.onLayout(a),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._onLayoutEmpty=a=>{this.props.onLayout&&this.props.onLayout(a)},this._onLayoutFooter=a=>{this._triggerRemeasureForChildListsInCell(this._getFooterCellKey()),this._footerLength=this._selectLength(a.nativeEvent.layout)},this._onLayoutHeader=a=>{this._headerLength=this._selectLength(a.nativeEvent.layout)},this._onContentSizeChange=(a,l)=>{a>0&&l>0&&this.props.initialScrollIndex!=null&&this.props.initialScrollIndex>0&&!this._hasTriggeredInitialScrollToIndex&&(this.props.contentOffset==null&&(this.props.initialScrollIndex<this.props.getItemCount(this.props.data)?this.scrollToIndex({animated:!1,index:j9(this.props.initialScrollIndex)}):this.scrollToEnd({animated:!1})),this._hasTriggeredInitialScrollToIndex=!0),this.props.onContentSizeChange&&this.props.onContentSizeChange(a,l),this._scrollMetrics.contentLength=this._selectLength({height:l,width:a}),this._scheduleCellsToRenderUpdate(),this._maybeCallOnEdgeReached()},this._convertParentScrollMetrics=a=>{var l=a.offset-this._offsetFromParentVirtualizedList,u=a.visibleLength,c=l-this._scrollMetrics.offset,d=this._scrollMetrics.contentLength;return{visibleLength:u,contentLength:d,offset:l,dOffset:c}},this._onScroll=a=>{this._nestedChildLists.forEach(S=>{S._onScroll(a)}),this.props.onScroll&&this.props.onScroll(a);var l=a.timeStamp,u=this._selectLength(a.nativeEvent.layoutMeasurement),c=this._selectLength(a.nativeEvent.contentSize),d=this._selectOffset(a.nativeEvent.contentOffset),f=d-this._scrollMetrics.offset;if(this._isNestedWithSameOrientation()){if(this._scrollMetrics.contentLength===0)return;var p=this._convertParentScrollMetrics({visibleLength:u,offset:d});u=p.visibleLength,c=p.contentLength,d=p.offset,f=p.dOffset}var g=this._scrollMetrics.timestamp?Math.max(1,l-this._scrollMetrics.timestamp):1,E=f/g;g>500&&this._scrollMetrics.dt>500&&c>5*u&&!this._hasWarned.perf&&(R9("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:g,prevDt:this._scrollMetrics.dt,contentLength:c}),this._hasWarned.perf=!0);var b=a.nativeEvent.zoomScale<0?1:a.nativeEvent.zoomScale;this._scrollMetrics={contentLength:c,dt:g,dOffset:f,offset:d,timestamp:l,velocity:E,visibleLength:u,zoomScale:b},this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.props&&(this._maybeCallOnEdgeReached(),E!==0&&this._fillRateHelper.activate(),this._computeBlankness(),this._scheduleCellsToRenderUpdate())},this._onScrollBeginDrag=a=>{this._nestedChildLists.forEach(l=>{l._onScrollBeginDrag(a)}),this._viewabilityTuples.forEach(l=>{l.viewabilityHelper.recordInteraction()}),this._hasInteracted=!0,this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(a)},this._onScrollEndDrag=a=>{this._nestedChildLists.forEach(u=>{u._onScrollEndDrag(a)});var l=a.nativeEvent.velocity;l&&(this._scrollMetrics.velocity=this._selectOffset(l)),this._computeBlankness(),this.props.onScrollEndDrag&&this.props.onScrollEndDrag(a)},this._onMomentumScrollBegin=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollBegin(a)}),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(a)},this._onMomentumScrollEnd=a=>{this._nestedChildLists.forEach(l=>{l._onMomentumScrollEnd(a)}),this._scrollMetrics.velocity=0,this._computeBlankness(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(a)},this._updateCellsToRender=()=>{this._updateViewableItems(this.props,this.state.cellsAroundViewport),this.setState((a,l)=>{var u=this._adjustCellsAroundViewport(l,a.cellsAroundViewport),c=or._createRenderMask(l,u,this._getNonViewportRenderRegions(l));return u.first===a.cellsAroundViewport.first&&u.last===a.cellsAroundViewport.last&&c.equals(a.renderMask)?null:{cellsAroundViewport:u,renderMask:c}})},this._createViewToken=(a,l,u)=>{var c=u.data,d=u.getItem,f=d(c,a);return{index:a,item:f,key:this._keyExtractor(f,a,u),isViewable:l}},this._getOffsetApprox=(a,l)=>{if(Number.isInteger(a))return this.__getFrameMetricsApprox(a,l).offset;var u=this.__getFrameMetricsApprox(Math.floor(a),l),c=a-Math.floor(a);return u.offset+c*u.length},this.__getFrameMetricsApprox=(a,l)=>{var u=this._getFrameMetrics(a,l);if(u&&u.index===a)return u;var c=l.data,d=l.getItemCount,f=l.getItemLayout;return me(a>=0&&a<d(c),"Tried to get frame for out of range index "+a),me(!f,"Should not have to estimate frames when a measurement metrics function is provided"),{length:this._averageCellLength,offset:this._averageCellLength*a}},this._getFrameMetrics=(a,l)=>{var u=l.data,c=l.getItem,d=l.getItemCount,f=l.getItemLayout;me(a>=0&&a<d(u),"Tried to get frame for out of range index "+a);var p=c(u,a),g=this._frames[this._keyExtractor(p,a,l)];return(!g||g.index!==a)&&f?f(u,a):g},this._getNonViewportRenderRegions=a=>{if(!(this._lastFocusedCellKey&&this._cellRefs[this._lastFocusedCellKey]))return[];var l=this._cellRefs[this._lastFocusedCellKey],u=l.props.index,c=a.getItemCount(a.data);if(u>=c||this._keyExtractor(a.getItem(a.data,u),u,a)!==this._lastFocusedCellKey)return[];for(var d=u,f=0,p=d-1;p>=0&&f<this._scrollMetrics.visibleLength;p--)d--,f+=this.__getFrameMetricsApprox(p,a).length;for(var g=u,E=0,b=g+1;b<c&&E<this._scrollMetrics.visibleLength;b++)g++,E+=this.__getFrameMetricsApprox(b,a).length;return[{first:d,last:g}]},this._checkProps(e),this._fillRateHelper=new A9(this._getFrameMetrics),this._updateCellsToRenderBatcher=new I9(this._updateCellsToRender,(n=this.props.updateCellsBatchingPeriod)!==null&&n!==void 0?n:50),this.props.viewabilityConfigCallbackPairs)this._viewabilityTuples=this.props.viewabilityConfigCallbackPairs.map(a=>({viewabilityHelper:new lx(a.viewabilityConfig),onViewableItemsChanged:a.onViewableItemsChanged}));else{var r=this.props,i=r.onViewableItemsChanged,s=r.viewabilityConfig;i&&this._viewabilityTuples.push({viewabilityHelper:new lx(s),onViewableItemsChanged:i})}var o=or._initialRenderRegion(e);this.state={cellsAroundViewport:o,renderMask:or._createRenderMask(e,o)},this.invertedWheelEventHandler=a=>{var l=this.props.horizontal?a.target.scrollLeft:a.target.scrollTop,u=this.props.horizontal?a.target.scrollWidth:a.target.scrollHeight,c=this.props.horizontal?a.target.clientWidth:a.target.clientHeight,d=u>c,f=this.props.horizontal?a.deltaX||a.wheelDeltaX:a.deltaY||a.wheelDeltaY,p=f;d&&(p=f<0?Math.min(f+l,0):Math.max(f-(u-c-l),0));var g=f-p;if(this.props.inverted&&this._scrollRef&&this._scrollRef.getScrollableNode){var E=this._scrollRef.getScrollableNode();if(this.props.horizontal){a.target.scrollLeft+=g;var b=E.scrollLeft-p;E.scrollLeft=this.props.getItemLayout?b:Math.min(b,this._totalCellLength)}else{a.target.scrollTop+=g;var S=E.scrollTop-p;E.scrollTop=this.props.getItemLayout?S:Math.min(S,this._totalCellLength)}a.preventDefault()}}}_checkProps(e){var n=e.onScroll,r=e.windowSize,i=e.getItemCount,s=e.data,o=e.initialScrollIndex;me(!n||!n.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),me(dx(r)>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),me(i,'VirtualizedList: The "getItemCount" prop must be provided');var a=i(s);o!=null&&!this._hasTriggeredInitialScrollToIndex&&(o<0||a>0&&o>=a)&&!this._hasWarned.initialScrollIndex&&(console.warn('initialScrollIndex "'+o+'" is not valid (list has '+a+" items)"),this._hasWarned.initialScrollIndex=!0)}static _createRenderMask(e,n,r){var i=e.getItemCount(e.data);me(n.first>=0&&n.last>=n.first-1&&n.last<i,'Invalid cells around viewport "['+n.first+", "+n.last+']" was passed to VirtualizedList._createRenderMask');var s=new C9(i);if(i>0){for(var o=[n,...r??[]],a=0,l=o;a<l.length;a++){var u=l[a];s.addCells(u)}if(e.initialScrollIndex==null||e.initialScrollIndex<=0){var c=or._initialRenderRegion(e);s.addCells(c)}var d=new Set(e.stickyHeaderIndices);or._ensureClosestStickyHeader(e,d,s,n.first)}return s}static _initialRenderRegion(e){var n,r=e.getItemCount(e.data),i=Math.max(0,Math.min(r-1,Math.floor((n=e.initialScrollIndex)!==null&&n!==void 0?n:0))),s=Math.min(r,i+U9(e.initialNumToRender))-1;return{first:i,last:s}}static _ensureClosestStickyHeader(e,n,r,i){for(var s=e.ListHeaderComponent?1:0,o=i-1;o>=0;o--)if(n.has(o+s)){r.addCells({first:o,last:o});break}}_adjustCellsAroundViewport(e,n){var r=e.data,i=e.getItemCount,s=cx(e.onEndReachedThreshold),o=this._scrollMetrics,a=o.contentLength,l=o.offset,u=o.visibleLength,c=a-u-l;if(u<=0||a<=0)return n.last>=i(r)?or._constrainToItemCount(n,e):n;var d;if(e.disableVirtualization){var f=c<s*u?v_(e.maxToRenderPerBatch):0;d={first:0,last:Math.min(n.last+f,i(r)-1)}}else{if(e.initialScrollIndex&&!this._scrollMetrics.offset&&Math.abs(c)>=Number.EPSILON)return n.last>=i(r)?or._constrainToItemCount(n,e):n;d=F9(e,v_(e.maxToRenderPerBatch),dx(e.windowSize),n,this.__getFrameMetricsApprox,this._scrollMetrics),me(d.last<i(r),"computeWindowedRenderLimits() should return range in-bounds")}if(this._nestedChildLists.size()>0){var p=this._findFirstChildWithMore(d.first,d.last);d.last=p??d.last}return d}_findFirstChildWithMore(e,n){for(var r=e;r<=n;r++){var i=this._indicesToKeys.get(r);if(i!=null&&this._nestedChildLists.anyInCell(i,s=>s.hasMore()))return r}return null}componentDidMount(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({ref:this,cellKey:this.context.cellKey}),this.setupWebWheelHandler()}componentWillUnmount(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({ref:this}),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach(e=>{e.viewabilityHelper.dispose()}),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()}setupWebWheelHandler(){if(this._scrollRef&&this._scrollRef.getScrollableNode)this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler);else{setTimeout(()=>this.setupWebWheelHandler(),50);return}}teardownWebWheelHandler(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)}static getDerivedStateFromProps(e,n){var r=e.getItemCount(e.data);if(r===n.renderMask.numCells())return n;var i=or._constrainToItemCount(n.cellsAroundViewport,e);return{cellsAroundViewport:i,renderMask:or._createRenderMask(e,i)}}_pushCells(e,n,r,i,s,o){var a=this,l=this.props,u=l.CellRendererComponent,c=l.ItemSeparatorComponent,d=l.ListHeaderComponent,f=l.ListItemComponent,p=l.data,g=l.debug,E=l.getItem,b=l.getItemCount,S=l.getItemLayout,y=l.horizontal,w=l.renderItem,x=d?1:0,O=b(p)-1,k;s=Math.min(O,s);for(var T=function(){var C=E(p,v),A=a._keyExtractor(C,v,a.props);a._indicesToKeys.set(v,A),r.has(v+x)&&n.push(e.length);var N=S==null||g||a._fillRateHelper.enabled();e.push(I.createElement(N9,cn({CellRendererComponent:u,ItemSeparatorComponent:v<O?c:void 0,ListItemComponent:f,cellKey:A,horizontal:y,index:v,inversionStyle:o,item:C,key:A,prevCellKey:k,onUpdateSeparators:a._onUpdateSeparators,onCellFocusCapture:D=>a._onCellFocusCapture(A),onUnmount:a._onCellUnmount,ref:D=>{a._cellRefs[A]=D},renderItem:w},N&&{onCellLayout:a._onCellLayout}))),k=A},v=i;v<=s;v++)T()}static _constrainToItemCount(e,n){var r=n.getItemCount(n.data),i=Math.min(r-1,e.last),s=v_(n.maxToRenderPerBatch);return{first:sx(0,r-1-s,e.first),last:i}}_isNestedWithSameOrientation(){var e=this.context;return!!(e&&!!e.horizontal===Xo(this.props.horizontal))}_keyExtractor(e,n,r){if(r.keyExtractor!=null)return r.keyExtractor(e,n);var i=MS(e,n);return i===String(n)&&(g_=!0,e.type&&e.type.displayName&&(y_=e.type.displayName)),i}render(){this._checkProps(this.props);var e=this.props,n=e.ListEmptyComponent,r=e.ListFooterComponent,i=e.ListHeaderComponent,s=this.props,o=s.data,a=s.horizontal,l=this.props.inverted?Xo(this.props.horizontal)?Rr.horizontallyInverted:Rr.verticallyInverted:null,u=[],c=new Set(this.props.stickyHeaderIndices),d=[];if(i){c.has(0)&&d.push(0);var f=I.isValidElement(i)?i:I.createElement(i,null);u.push(I.createElement(tm,{cellKey:this._getCellKey()+"-header",key:"$header"},I.createElement(X,{onLayout:this._onLayoutHeader,style:[l,this.props.ListHeaderComponentStyle]},f)))}var p=this.props.getItemCount(o);if(p===0&&n){var g=I.isValidElement(n)?n:I.createElement(n,null);u.push(I.createElement(tm,{cellKey:this._getCellKey()+"-empty",key:"$empty"},I.cloneElement(g,{onLayout:fe=>{this._onLayoutEmpty(fe),g.props.onLayout&&g.props.onLayout(fe)},style:[l,g.props.style]})))}if(p>0){g_=!1,y_="";for(var E=this._getSpacerKey(!a),b=this.state.renderMask.enumerateRegions(),S=W9(b,fe=>fe.isSpacer),y=ma(b),w;!(w=y()).done;){var x=w.value;if(x.isSpacer){if(this.props.disableVirtualization)continue;var O=x===S,k=O&&!this.props.getItemLayout,T=k?sx(x.first-1,x.last,this._highestMeasuredFrameIndex):x.last,v=this.__getFrameMetricsApprox(x.first,this.props),R=this.__getFrameMetricsApprox(T,this.props),C=R.offset+R.length-v.offset;u.push(I.createElement(X,{key:"$spacer-"+x.first,style:{[E]:C}}))}else this._pushCells(u,d,c,x.first,x.last,l)}!this._hasWarned.keys&&g_&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",y_),this._hasWarned.keys=!0)}if(r){var A=I.isValidElement(r)?r:I.createElement(r,null);u.push(I.createElement(tm,{cellKey:this._getFooterCellKey(),key:"$footer"},I.createElement(X,{onLayout:this._onLayoutFooter,style:[l,this.props.ListFooterComponentStyle]},A)))}var N=ge(ge({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:z9(this.props.scrollEventThrottle),invertStickyHeaders:this.props.invertStickyHeaders!==void 0?this.props.invertStickyHeaders:this.props.inverted,stickyHeaderIndices:d,style:l?[l,this.props.style]:this.props.style});this._hasMore=this.state.cellsAroundViewport.last<p-1;var D=I.createElement(M9,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:Xo(this.props.horizontal),getOutermostParentListRef:this._getOutermostParentListRef,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild}},I.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(N),{ref:this._captureScrollRef},u)),de=D;return this.props.debug?I.createElement(X,{style:Rr.debug},de,this._renderDebugOverlay()):de}componentDidUpdate(e){var n=this.props,r=n.data,i=n.extraData;(r!==e.data||i!==e.extraData)&&this._viewabilityTuples.forEach(o=>{o.viewabilityHelper.resetViewableIndices()});var s=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),s&&(this._hiPriInProgress=!1)}_computeBlankness(){this._fillRateHelper.computeBlankness(this.props,this.state.cellsAroundViewport,this._scrollMetrics)}_onCellFocusCapture(e){this._lastFocusedCellKey=e,this._updateCellsToRender()}_triggerRemeasureForChildListsInCell(e){this._nestedChildLists.forEachInCell(e,n=>{n.measureLayoutRelativeToContainingList()})}measureLayoutRelativeToContainingList(){try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(e,n,r,i)=>{this._offsetFromParentVirtualizedList=this._selectOffset({x:e,y:n}),this._scrollMetrics.contentLength=this._selectLength({width:r,height:i});var s=this._convertParentScrollMetrics(this.context.getScrollMetrics()),o=this._scrollMetrics.visibleLength!==s.visibleLength||this._scrollMetrics.offset!==s.offset;o&&(this._scrollMetrics.visibleLength=s.visibleLength,this._scrollMetrics.offset=s.offset,this._nestedChildLists.forEach(a=>{a.measureLayoutRelativeToContainingList()}))},e=>{console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")})}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}}_getFooterCellKey(){return this._getCellKey()+"-footer"}_renderDebugOverlay(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),n=[],r=this.props.getItemCount(this.props.data),i=0;i<r;i++){var s=this.__getFrameMetricsApprox(i,this.props);s.inLayout&&n.push(s)}var o=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first,this.props).offset,a=this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last,this.props),l=a.offset+a.length-o,u=this._scrollMetrics.offset,c=this._scrollMetrics.visibleLength;return I.createElement(X,{style:[Rr.debugOverlayBase,Rr.debugOverlay]},n.map((d,f)=>I.createElement(X,{key:"f"+f,style:[Rr.debugOverlayBase,Rr.debugOverlayFrame,{top:d.offset*e,height:d.length*e}]})),I.createElement(X,{style:[Rr.debugOverlayBase,Rr.debugOverlayFrameLast,{top:o*e,height:l*e}]}),I.createElement(X,{style:[Rr.debugOverlayBase,Rr.debugOverlayFrameVis,{top:u*e,height:c*e}]}))}_selectLength(e){return Xo(this.props.horizontal)?e.width:e.height}_selectOffset(e){return Xo(this.props.horizontal)?e.x:e.y}_maybeCallOnEdgeReached(){var e=this.props,n=e.data,r=e.getItemCount,i=e.onStartReached,s=e.onStartReachedThreshold,o=e.onEndReached,a=e.onEndReachedThreshold,l=e.initialScrollIndex,u=this._scrollMetrics,c=u.contentLength,d=u.visibleLength,f=u.offset,p=f,g=c-d-f;p<ux&&(p=0),g<ux&&(g=0);var E=2,b=s!=null?s*d:E,S=a!=null?a*d:E,y=p<=b,w=g<=S;o&&this.state.cellsAroundViewport.last===r(n)-1&&w&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,o({distanceFromEnd:g})):i!=null&&this.state.cellsAroundViewport.first===0&&y&&this._scrollMetrics.contentLength!==this._sentStartForContentLength?(!l||this._scrollMetrics.timestamp!==0)&&(this._sentStartForContentLength=this._scrollMetrics.contentLength,i({distanceFromStart:p})):(this._sentStartForContentLength=y?this._sentStartForContentLength:0,this._sentEndForContentLength=w?this._sentEndForContentLength:0)}_scheduleCellsToRenderUpdate(){var e=this.state.cellsAroundViewport,n=e.first,r=e.last,i=this._scrollMetrics,s=i.offset,o=i.visibleLength,a=i.velocity,l=this.props.getItemCount(this.props.data),u=!1,c=$9(this.props.onStartReachedThreshold),d=cx(this.props.onEndReachedThreshold);if(n>0){var f=s-this.__getFrameMetricsApprox(n,this.props).offset;u=f<0||a<-2&&f<hx(c,o)}if(!u&&r>=0&&r<l-1){var p=this.__getFrameMetricsApprox(r,this.props).offset-(s+o);u=p<0||a>2&&p<hx(d,o)}if(u&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress){this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),this._updateCellsToRender();return}else this._updateCellsToRenderBatcher.schedule()}_updateViewableItems(e,n){this._viewabilityTuples.forEach(r=>{r.viewabilityHelper.onUpdate(e,this._scrollMetrics.offset,this._scrollMetrics.visibleLength,this._getFrameMetrics,this._createViewToken,r.onViewableItemsChanged,n)})}}or.contextType=pg;var Rr=De.create({verticallyInverted:{transform:"scaleY(-1)"},horizontallyInverted:{transform:"scaleX(-1)"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),fx=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function H9(t,e){return!!(t===e||fx(t)&&fx(e))}function K9(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!H9(t[n],e[n]))return!1;return!0}function q9(t,e){e===void 0&&(e=K9);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var G9=["numColumns","columnWrapperStyle","removeClippedSubviews","strictMode"];function X9(t){return t??i5.OS==="android"}function Qo(t){return t??1}function Q9(t){return typeof Object(t).length=="number"}class Y9 extends I.PureComponent{scrollToEnd(e){this._listRef&&this._listRef.scrollToEnd(e)}scrollToIndex(e){this._listRef&&this._listRef.scrollToIndex(e)}scrollToItem(e){this._listRef&&this._listRef.scrollToItem(e)}scrollToOffset(e){this._listRef&&this._listRef.scrollToOffset(e)}recordInteraction(){this._listRef&&this._listRef.recordInteraction()}flashScrollIndicators(){this._listRef&&this._listRef.flashScrollIndicators()}getScrollResponder(){if(this._listRef)return this._listRef.getScrollResponder()}getNativeScrollRef(){if(this._listRef)return this._listRef.getScrollRef()}getScrollableNode(){if(this._listRef)return this._listRef.getScrollableNode()}constructor(e){super(e),this._virtualizedListPairs=[],this._captureRef=n=>{this._listRef=n},this._getItem=(n,r)=>{var i=Qo(this.props.numColumns);if(i>1){for(var s=[],o=0;o<i;o++){var a=r*i+o;if(a<n.length){var l=n[a];s.push(l)}}return s}else return n[r]},this._getItemCount=n=>{if(n!=null&&Q9(n)){var r=Qo(this.props.numColumns);return r>1?Math.ceil(n.length/r):n.length}else return 0},this._keyExtractor=(n,r)=>{var i,s=Qo(this.props.numColumns),o=(i=this.props.keyExtractor)!==null&&i!==void 0?i:MS;return s>1?(me(Array.isArray(n),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",s),n.map((a,l)=>o(a,r*s+l)).join(":")):o(n,r)},this._renderer=(n,r,i,s,o)=>{var a=Qo(s),l=c=>n?I.createElement(n,c):r?r(c):null,u=c=>{if(a>1){var d=c.item,f=c.index;return me(Array.isArray(d),"Expected array of items with numColumns > 1"),I.createElement(X,{style:[J9.row,i]},d.map((p,g)=>{var E=l({item:p,index:f*a+g,separators:c.separators});return E!=null?I.createElement(I.Fragment,{key:g},E):null}))}else return l(c)};return n?{ListItemComponent:u}:{renderItem:u}},this._memoizedRenderer=q9(this._renderer),this._checkProps(this.props),this.props.viewabilityConfigCallbackPairs?this._virtualizedListPairs=this.props.viewabilityConfigCallbackPairs.map(n=>({viewabilityConfig:n.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(n.onViewableItemsChanged)})):this.props.onViewableItemsChanged&&this._virtualizedListPairs.push({viewabilityConfig:this.props.viewabilityConfig,onViewableItemsChanged:this._createOnViewableItemsChanged(this.props.onViewableItemsChanged)})}componentDidUpdate(e){me(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),me(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),me(!e9(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),me(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)}_checkProps(e){var n=e.getItem,r=e.getItemCount,i=e.horizontal,s=e.columnWrapperStyle,o=e.onViewableItemsChanged,a=e.viewabilityConfigCallbackPairs,l=Qo(this.props.numColumns);me(!n&&!r,"FlatList does not support custom data formats."),l>1?me(!i,"numColumns does not support horizontal."):me(!s,"columnWrapperStyle not supported for single column lists"),me(!(o&&a),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")}_pushMultiColumnViewable(e,n){var r,i=Qo(this.props.numColumns),s=(r=this.props.keyExtractor)!==null&&r!==void 0?r:MS;n.item.forEach((o,a)=>{me(n.index!=null,"Missing index!");var l=n.index*i+a;e.push(ge(ge({},n),{},{item:o,key:s(o,l),index:l}))})}_createOnViewableItemsChanged(e){return n=>{var r=Qo(this.props.numColumns);if(e)if(r>1){var i=[],s=[];n.viewableItems.forEach(o=>this._pushMultiColumnViewable(s,o)),n.changed.forEach(o=>this._pushMultiColumnViewable(i,o)),e({viewableItems:s,changed:i})}else e(n)}}render(){var e=this.props,n=e.numColumns,r=e.columnWrapperStyle,i=e.removeClippedSubviews,s=e.strictMode,o=s===void 0?!1:s,a=On(e,G9),l=o?this._memoizedRenderer:this._renderer;return I.createElement(or,cn({},a,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs,removeClippedSubviews:X9(i)},l(this.props.ListItemComponent,this.props.renderItem,r,n,this.props.extraData)))}}var J9=De.create({row:{flexDirection:"row"}}),Z9=[];function $M(t){return Z9[t-1]}var eW=/^data:/;class Wn{static has(e){var n=Wn._entries,r=eW.test(e);return r||!!n[e]}static add(e){var n=Wn._entries,r=Date.now();n[e]?(n[e].lastUsedTimestamp=r,n[e].refCount+=1):n[e]={lastUsedTimestamp:r,refCount:1}}static remove(e){var n=Wn._entries;n[e]&&(n[e].refCount-=1),Wn._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var e=Wn._entries,n=Object.keys(e);if(n.length+1>Wn._maximumEntries){var r,i;n.forEach(s=>{var o=e[s];(!i||o.lastUsedTimestamp<i.lastUsedTimestamp)&&o.refCount===0&&(r=s,i=o)}),r&&delete e[r]}}}Wn._maximumEntries=256;Wn._entries={};var __=0,mp={},ai={abort(t){var e=mp[""+t];e&&(e.onerror=null,e.onload=null,e=null,delete mp[""+t])},getSize(t,e,n){var r=!1,i=setInterval(o,16),s=ai.load(t,o,a);function o(){var l=mp[""+s];if(l){var u=l.naturalHeight,c=l.naturalWidth;u&&c&&(e(c,u),r=!0)}r&&(ai.abort(s),clearInterval(i))}function a(){typeof n=="function"&&n(),ai.abort(s),clearInterval(i)}},has(t){return Wn.has(t)},load(t,e,n){__+=1;var r=new window.Image;return r.onerror=n,r.onload=i=>{var s=()=>e({nativeEvent:i});typeof r.decode=="function"?r.decode().then(s,s):setTimeout(s,0)},r.src=t,mp[""+__]=r,__},prefetch(t){return new Promise((e,n)=>{ai.load(t,()=>{Wn.add(t),Wn.remove(t),e()},n)})},queryCache(t){var e={};return t.forEach(n=>{Wn.has(n)&&(e[n]="disk/memory")}),Promise.resolve(e)}};class Nh{static get(){return ug.get("window").scale}static getFontScale(){return ug.get("window").fontScale||Nh.get()}static getPixelSizeForLayoutSize(e){return Math.round(e*Nh.get())}static roundToNearestPixel(e){var n=Nh.get();return Math.round(e*n)/n}}var tW=["aria-label","accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],nW="ERRORED",w_="LOADED",px="LOADING",rW="IDLE",iW=0,sW=/^(data:image\/svg\+xml;utf8,)(.*)/;function oW(t,e){return t&&e!=null?I.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},I.createElement("defs",null,I.createElement("filter",{id:"tint-"+e,suppressHydrationWarning:!0},I.createElement("feFlood",{floodColor:""+t,key:t}),I.createElement("feComposite",{in2:"SourceAlpha",operator:"in"})))):null}function aW(t,e,n,r){var i=De.flatten(t),s=i.filter,o=i.resizeMode,a=i.shadowOffset,l=i.tintColor;i.resizeMode,i.tintColor;var u=[],c=null;if(s&&u.push(s),e&&u.push("blur("+e+"px)"),a){var d=wM(i);d&&u.push("drop-shadow("+d+")")}return(r||l)&&n!=null&&u.push("url(#tint-"+n+")"),u.length>0&&(c=u.join(" ")),[o,c,l]}function lW(t){if(typeof t=="number"){var e=$M(t),n=e.height,r=e.width;return{height:n,width:r}}else if(t!=null&&!Array.isArray(t)&&typeof t=="object"){var i=t.height,s=t.width;return{height:i,width:s}}}function S_(t){var e=null;if(typeof t=="number"){var n=$M(t);if(n==null)throw new Error('Image: asset with ID "'+t+'" could not be found. Please check the image source or packager.');var r=n.scales[0];if(n.scales.length>1){var i=Nh.get();r=n.scales.reduce((c,d)=>Math.abs(d-i)<Math.abs(c-i)?d:c)}var s=r!==1?"@"+r+"x":"";e=n?n.httpServerLocation+"/"+n.name+s+"."+n.type:""}else typeof t=="string"?e=t:t&&typeof t.uri=="string"&&(e=t.uri);if(e){var o=e.match(sW);if(o){var a=o[1],l=o[2],u=encodeURIComponent(l);return""+a+u}}return e}var zM=I.forwardRef((t,e)=>{var n=t["aria-label"],r=t.accessibilityLabel,i=t.blurRadius,s=t.defaultSource,o=t.draggable,a=t.onError,l=t.onLayout,u=t.onLoad,c=t.onLoadEnd,d=t.onLoadStart,f=t.pointerEvents,p=t.source,g=t.style,E=On(t,tW),b=n||r,S=I.useState(()=>{var Ke=S_(p);if(Ke!=null){var Nt=ai.has(Ke);if(Nt)return w_}return rW}),y=S[0],w=S[1],x=I.useState({}),O=x[0],k=x[1],T=I.useContext(lg),v=I.useRef(null),R=I.useRef(iW++),C=I.useRef(null),A=y===w_||y===px&&s==null,N=aW(g,i,R.current,t.tintColor),D=N[0],de=N[1],fe=N[2],je=t.resizeMode||D||"cover",Re=t.tintColor||fe,U=A?p:s,Y=S_(U),ie=lW(U),we=Y?'url("'+Y+'")':null,Ae=lt(),hn=Y?Ju("img",{alt:b||"",style:Wc.accessibilityImage$raw,draggable:o||!1,ref:v,src:Y}):null;function lt(){if(v.current!=null&&(je==="center"||je==="repeat")){var Ke=v.current,Nt=Ke.naturalHeight,Mn=Ke.naturalWidth,Ii=O.height,fs=O.width;if(Nt&&Mn&&Ii&&fs){var _r=Math.min(1,fs/Mn,Ii/Nt),zr=Math.ceil(_r*Mn),nr=Math.ceil(_r*Nt);return zr+"px "+nr+"px"}}}function zt(Ke){if(je==="center"||je==="repeat"||l){var Nt=Ke.nativeEvent.layout;l&&l(Ke),k(Nt)}}var mt=S_(p);return I.useEffect(()=>{Ke(),mt!=null&&(w(px),d&&d(),C.current=ai.load(mt,function(Mn){w(w_),u&&u(Mn),c&&c()},function(){w(nW),a&&a({nativeEvent:{error:"Failed to load resource "+mt}}),c&&c()}));function Ke(){C.current!=null&&(ai.abort(C.current),C.current=null)}return Ke},[mt,C,w,a,u,c,d]),I.createElement(X,cn({},E,{"aria-label":b,onLayout:zt,pointerEvents:f,ref:e,style:[Wc.root,T&&Wc.inline,ie,g,Wc.undo,{boxShadow:null}]}),I.createElement(X,{style:[Wc.image,uW[je],{backgroundImage:we,filter:de},Ae!=null&&{backgroundSize:Ae}],suppressHydrationWarning:!0}),hn,oW(Re,R.current))});zM.displayName="Image";var Si=zM;Si.getSize=function(t,e,n){ai.getSize(t,e,n)};Si.prefetch=function(t){return ai.prefetch(t)};Si.queryCache=function(t){return ai.queryCache(t)};var Wc=De.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},undo:{blurRadius:null,shadowColor:null,shadowOpacity:null,shadowOffset:null,shadowRadius:null,tintColor:null,overlayColor:null,resizeMode:null},image:ge(ge({},De.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:ge(ge({},De.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),uW=De.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}}),cW=["hrefAttrs","numberOfLines","onClick","onLayout","onPress","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture","selectable"],hW=Object.assign({},cT,hT,dT,fT,pT,mT,gT,yT,{href:!0,lang:!0,pointerEvents:!0}),dW=t=>vT(t,hW),G=I.forwardRef((t,e)=>{var n=t.hrefAttrs,r=t.numberOfLines,i=t.onClick,s=t.onLayout,o=t.onPress,a=t.onMoveShouldSetResponder,l=t.onMoveShouldSetResponderCapture,u=t.onResponderEnd,c=t.onResponderGrant,d=t.onResponderMove,f=t.onResponderReject,p=t.onResponderRelease,g=t.onResponderStart,E=t.onResponderTerminate,b=t.onResponderTerminationRequest,S=t.onScrollShouldSetResponder,y=t.onScrollShouldSetResponderCapture,w=t.onSelectionChangeShouldSetResponder,x=t.onSelectionChangeShouldSetResponderCapture,O=t.onStartShouldSetResponder,k=t.onStartShouldSetResponderCapture,T=t.selectable,v=On(t,cW),R=I.useContext(lg),C=I.useRef(null),A=uT(),N=A.direction;_T(C,s),ET(C,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:l,onResponderEnd:u,onResponderGrant:c,onResponderMove:d,onResponderReject:f,onResponderRelease:p,onResponderStart:g,onResponderTerminate:E,onResponderTerminationRequest:b,onScrollShouldSetResponder:S,onScrollShouldSetResponderCapture:y,onSelectionChangeShouldSetResponder:w,onSelectionChangeShouldSetResponderCapture:x,onStartShouldSetResponder:O,onStartShouldSetResponderCapture:k});var D=I.useCallback(zt=>{i!=null?i(zt):o!=null&&(zt.stopPropagation(),o(zt))},[i,o]),de=R?"span":"div",fe=t.lang!=null?Ry(t.lang):null,je=t.dir||fe,Re=je||N,U=dW(v);if(U.dir=je,R||(U.dir=je??"auto"),(i||o)&&(U.onClick=D),U.style=[r!=null&&r>1&&{WebkitLineClamp:r},R===!0?Yo.textHasAncestor$raw:Yo.text$raw,r===1&&Yo.textOneLine,r!=null&&r>1&&Yo.textMultiLine,t.style,T===!0&&Yo.selectable,T===!1&&Yo.notSelectable,o&&Yo.pressable],t.href!=null&&(de="a",n!=null)){var Y=n.download,ie=n.rel,we=n.target;Y!=null&&(U.download=Y),ie!=null&&(U.rel=ie),typeof we=="string"&&(U.target=we.charAt(0)!=="_"?"_"+we:we)}var Ae=wT(U),hn=Yd(C,Ae,e);U.ref=hn;var lt=Ju(de,U,{writingDirection:Re});return R?lt:I.createElement(lg.Provider,{value:!0},lt)});G.displayName="Text";var mx={backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",listStyle:"none",margin:0,padding:0,position:"relative",textAlign:"start",textDecoration:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},Yo=De.create({text$raw:mx,textHasAncestor$raw:ge(ge({},mx),{},{color:"inherit",font:"inherit",textAlign:"inherit",whiteSpace:"inherit"}),textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}}),fW=["animating","color","hidesWhenStopped","size","style"],gx=t=>I.createElement("circle",{cx:"16",cy:"16",fill:"none",r:"14",strokeWidth:"4",style:t}),Jd=I.forwardRef((t,e)=>{var n=t.animating,r=n===void 0?!0:n,i=t.color,s=i===void 0?"#1976D2":i,o=t.hidesWhenStopped,a=o===void 0?!0:o,l=t.size,u=l===void 0?"small":l,c=t.style,d=On(t,fW),f=I.createElement("svg",{height:"100%",viewBox:"0 0 32 32",width:"100%"},gx({stroke:s,opacity:.2}),gx({stroke:s,strokeDasharray:80,strokeDashoffset:60}));return I.createElement(X,cn({},d,{"aria-valuemax":1,"aria-valuemin":0,ref:e,role:"progressbar",style:[gp.container,c]}),I.createElement(X,{children:f,style:[typeof u=="number"?{height:u,width:u}:pW[u],gp.animation,!r&&gp.animationPause,!r&&a&&gp.hidesWhenStopped]}))});Jd.displayName="ActivityIndicator";var gp=De.create({container:{alignItems:"center",justifyContent:"center"},hidesWhenStopped:{visibility:"hidden"},animation:{animationDuration:"0.75s",animationKeyframes:[{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}],animationTimingFunction:"linear",animationIterationCount:"infinite"},animationPause:{animationPlayState:"paused"}}),pW=De.create({small:{width:20,height:20},large:{width:36,height:36}}),yx="DELAY",xr="ERROR",vx="LONG_PRESS_DETECTED",pn="NOT_RESPONDER",Au="RESPONDER_ACTIVE_LONG_PRESS_START",Ay="RESPONDER_ACTIVE_PRESS_START",NS="RESPONDER_INACTIVE_PRESS_START",mW="RESPONDER_GRANT",nm="RESPONDER_RELEASE",WM="RESPONDER_TERMINATED",_x=Object.freeze({NOT_RESPONDER:{DELAY:xr,RESPONDER_GRANT:NS,RESPONDER_RELEASE:xr,RESPONDER_TERMINATED:xr,LONG_PRESS_DETECTED:xr},RESPONDER_INACTIVE_PRESS_START:{DELAY:Ay,RESPONDER_GRANT:xr,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:xr},RESPONDER_ACTIVE_PRESS_START:{DELAY:xr,RESPONDER_GRANT:xr,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Au},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:xr,RESPONDER_GRANT:xr,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:Au},ERROR:{DELAY:pn,RESPONDER_GRANT:NS,RESPONDER_RELEASE:pn,RESPONDER_TERMINATED:pn,LONG_PRESS_DETECTED:pn}}),HM=t=>t.getAttribute("role"),LS=t=>t.tagName.toLowerCase(),wx=t=>t===Ay||t===Au,rm=t=>HM(t)==="button",Sx=t=>t===NS||t===Ay||t===Au,gW=t=>t===WM||t===nm,Ex=t=>{var e=t.key,n=t.target,r=e===" "||e==="Spacebar",i=LS(n)==="button"||rm(n);return e==="Enter"||r&&i},yW=450,vW=50;class _W{constructor(e){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState=pn,this._responderElement=null,this.configure(e)}configure(e){this._config=e}reset(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()}getEventHandlers(){return this._eventHandlers==null&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers}_createEventHandlers(){var e=(i,s)=>{i.persist(),this._cancelPressOutDelayTimeout(),this._longPressDispatched=!1,this._selectionTerminated=!1,this._touchState=pn,this._isPointerTouch=i.nativeEvent.type==="touchstart",this._receiveSignal(mW,i);var o=E_(this._config.delayPressStart,0,vW);s!==!1&&o>0?this._pressDelayTimeout=setTimeout(()=>{this._receiveSignal(yx,i)},o):this._receiveSignal(yx,i);var a=E_(this._config.delayLongPress,10,yW);this._longPressDelayTimeout=setTimeout(()=>{this._handleLongPress(i)},a+o)},n=i=>{this._receiveSignal(nm,i)},r=i=>{var s=this._config.onPress,o=i.target;if(this._touchState!==pn&&Ex(i)){n(i),document.removeEventListener("keyup",r);var a=o.getAttribute("role"),l=LS(o),u=a==="link"||l==="a"||l==="button"||l==="input"||l==="select"||l==="textarea",c=this._responderElement===o;s!=null&&!u&&c&&s(i),this._responderElement=null}};return{onStartShouldSetResponder:i=>{var s=this._config.disabled;return s&&rm(i.currentTarget)&&i.stopPropagation(),s==null?!0:!s},onKeyDown:i=>{var s=this._config.disabled,o=i.key,a=i.target;if(!s&&Ex(i)){this._touchState===pn&&(e(i,!1),this._responderElement=a,document.addEventListener("keyup",r));var l=o===" "||o==="Spacebar",u=HM(a),c=u==="button"||u==="menuitem";l&&c&&LS(a)!=="button"&&i.preventDefault(),i.stopPropagation()}},onResponderGrant:i=>e(i),onResponderMove:i=>{this._config.onPressMove!=null&&this._config.onPressMove(i);var s=Tx(i);if(this._touchActivatePosition!=null){var o=this._touchActivatePosition.pageX-s.pageX,a=this._touchActivatePosition.pageY-s.pageY;Math.hypot(o,a)>10&&this._cancelLongPressDelayTimeout()}},onResponderRelease:i=>n(i),onResponderTerminate:i=>{i.nativeEvent.type==="selectionchange"&&(this._selectionTerminated=!0),this._receiveSignal(WM,i)},onResponderTerminationRequest:i=>{var s=this._config,o=s.cancelable,a=s.disabled,l=s.onLongPress;return!a&&l!=null&&this._isPointerTouch&&i.nativeEvent.type==="contextmenu"?!1:o??!0},onClick:i=>{var s=this._config,o=s.disabled,a=s.onPress;o?rm(i.currentTarget)&&i.stopPropagation():(i.stopPropagation(),this._longPressDispatched||this._selectionTerminated?i.preventDefault():a!=null&&i.altKey===!1&&a(i))},onContextMenu:i=>{var s=this._config,o=s.disabled,a=s.onLongPress;o?rm(i.currentTarget)&&i.stopPropagation():a!=null&&this._isPointerTouch&&!i.defaultPrevented&&(i.preventDefault(),i.stopPropagation())}}}_receiveSignal(e,n){var r=this._touchState,i=null;_x[r]!=null&&(i=_x[r][e]),!(this._touchState===pn&&e===nm)&&(i==null||i===xr?console.error("PressResponder: Invalid signal "+e+" for state "+r+" on responder"):r!==i&&(this._performTransitionSideEffects(r,i,e,n),this._touchState=i))}_performTransitionSideEffects(e,n,r,i){if(gW(r)&&(setTimeout(()=>{this._isPointerTouch=!1},0),this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),Sx(e)&&r===vx){var s=this._config.onLongPress;s!=null&&i.nativeEvent.key==null&&(s(i),this._longPressDispatched=!0)}var o=wx(e),a=wx(n);if(!o&&a?this._activate(i):o&&!a&&this._deactivate(i),Sx(e)&&r===nm){var l=this._config,u=l.onLongPress,c=l.onPress;if(c!=null){var d=u!=null&&e===Au;d||!a&&!o&&(this._activate(i),this._deactivate(i))}}this._cancelPressDelayTimeout()}_activate(e){var n=this._config,r=n.onPressChange,i=n.onPressStart,s=Tx(e);this._touchActivatePosition={pageX:s.pageX,pageY:s.pageY},i!=null&&i(e),r!=null&&r(!0)}_deactivate(e){var n=this._config,r=n.onPressChange,i=n.onPressEnd;function s(){i!=null&&i(e),r!=null&&r(!1)}var o=E_(this._config.delayPressEnd);o>0?this._pressOutDelayTimeout=setTimeout(()=>{s()},o):s()}_handleLongPress(e){(this._touchState===Ay||this._touchState===Au)&&this._receiveSignal(vx,e)}_cancelLongPressDelayTimeout(){this._longPressDelayTimeout!=null&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)}_cancelPressDelayTimeout(){this._pressDelayTimeout!=null&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)}_cancelPressOutDelayTimeout(){this._pressOutDelayTimeout!=null&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)}}function E_(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Math.max(e,t??n)}function Tx(t){var e=t.nativeEvent,n=e.changedTouches,r=e.touches;return r!=null&&r.length>0?r[0]:n!=null&&n.length>0?n[0]:t.nativeEvent}function wW(t,e){var n=I.useRef(null);n.current==null&&(n.current=new _W(e));var r=n.current;return I.useEffect(()=>{r.configure(e)},[e,r]),I.useEffect(()=>()=>{r.reset()},[r]),I.useDebugValue(e),r.getEventHandlers()}var SW=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function EW(t,e){var n=t.activeOpacity,r=t.delayPressIn,i=t.delayPressOut,s=t.delayLongPress,o=t.disabled,a=t.focusable,l=t.onLongPress,u=t.onPress,c=t.onPressIn,d=t.onPressOut,f=t.rejectResponderTermination,p=t.style,g=On(t,SW),E=I.useRef(null),b=Yd(e,E),S=I.useState("0s"),y=S[0],w=S[1],x=I.useState(null),O=x[0],k=x[1],T=I.useCallback((N,D)=>{k(N),w(D?D/1e3+"s":"0s")},[k,w]),v=I.useCallback(N=>{T(n??.2,N)},[n,T]),R=I.useCallback(N=>{T(null,N)},[T]),C=I.useMemo(()=>({cancelable:!f,disabled:o,delayLongPress:s,delayPressStart:r,delayPressEnd:i,onLongPress:l,onPress:u,onPressStart(N){var D=N.dispatchConfig!=null?N.dispatchConfig.registrationName==="onResponderGrant":N.type==="keydown";v(D?0:150),c!=null&&c(N)},onPressEnd(N){R(250),d!=null&&d(N)}}),[s,r,i,o,l,u,c,d,f,v,R]),A=wW(E,C);return I.createElement(X,cn({},g,A,{accessibilityDisabled:o,focusable:!o&&a!==!1,pointerEvents:o?"box-none":void 0,ref:b,style:[bx.root,!o&&bx.actionable,p,O!=null&&{opacity:O},{transitionDuration:y}]}))}var bx=De.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),Ce=I.memo(I.forwardRef(EW));Ce.displayName="TouchableOpacity";function TW(t){var e=t.children,n=I.useRef(null);if(Dt&&!n.current){var r=document.createElement("div");r&&document.body&&(document.body.appendChild(r),n.current=r)}return I.useEffect(()=>{if(Dt)return()=>{document.body&&n.current&&(document.body.removeChild(n.current),n.current=null)}},[]),n.current&&Dt?z$.createPortal(e,n.current):null}var Ix=300;function bW(t,e){return t==="slide"?e?RW:CW:t==="fade"?e?xW:AW:e?_n.container:_n.hidden}function IW(t){var e=t.animationType,n=t.children,r=t.onDismiss,i=t.onShow,s=t.visible,o=I.useState(!1),a=o[0],l=o[1],u=I.useRef(!1),c=I.useRef(!1),d=e&&e!=="none",f=I.useCallback(p=>{p&&p.currentTarget!==p.target||(s?i&&i():l(!1))},[i,s]);return I.useEffect(()=>{c.current&&!a&&r&&r(),c.current=a},[a,r]),I.useEffect(()=>{s&&l(!0),s!==u.current&&!d&&f(),u.current=s},[d,s,f]),a||s?Ju("div",{style:a?bW(e,s):_n.hidden,onAnimationEnd:f,children:n}):null}var _n=De.create({container:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:9999},animatedIn:{animationDuration:Ix+"ms",animationTimingFunction:"ease-in"},animatedOut:{pointerEvents:"none",animationDuration:Ix+"ms",animationTimingFunction:"ease-out"},fadeIn:{opacity:1,animationKeyframes:{"0%":{opacity:0},"100%":{opacity:1}}},fadeOut:{opacity:0,animationKeyframes:{"0%":{opacity:1},"100%":{opacity:0}}},slideIn:{transform:"translateY(0%)",animationKeyframes:{"0%":{transform:"translateY(100%)"},"100%":{transform:"translateY(0%)"}}},slideOut:{transform:"translateY(100%)",animationKeyframes:{"0%":{transform:"translateY(0%)"},"100%":{transform:"translateY(100%)"}}},hidden:{opacity:0}}),RW=[_n.container,_n.animatedIn,_n.slideIn],CW=[_n.container,_n.animatedOut,_n.slideOut],xW=[_n.container,_n.animatedIn,_n.fadeIn],AW=[_n.container,_n.animatedOut,_n.fadeOut],PW=["active","children","onRequestClose","transparent"],kW=I.forwardRef((t,e)=>{var n=t.active,r=t.children,i=t.onRequestClose,s=t.transparent,o=On(t,PW);I.useEffect(()=>{if(Dt){var l=u=>{n&&u.key==="Escape"&&(u.stopPropagation(),i&&i())};return document.addEventListener("keyup",l,!1),()=>document.removeEventListener("keyup",l,!1)}},[n,i]);var a=I.useMemo(()=>[yp.modal,s?yp.modalTransparent:yp.modalOpaque],[s]);return I.createElement(X,cn({},o,{"aria-modal":!0,ref:e,role:n?"dialog":null,style:a}),I.createElement(X,{style:yp.container},r))}),yp=De.create({modal:{position:"fixed",top:0,right:0,bottom:0,left:0},modalTransparent:{backgroundColor:"transparent"},modalOpaque:{backgroundColor:"white"},container:{top:0,flex:1}}),Rx=()=>Ju("div",{role:"none",tabIndex:0,style:OW.focusBracket});function KM(t){if(!Dt)return!1;try{t.focus()}catch{}return document.activeElement===t}function qM(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(KM(n)||qM(n))return!0}return!1}function GM(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(KM(n)||GM(n))return!0}return!1}var DW=t=>{var e=t.active,n=t.children,r=I.useRef(),i=I.useRef({trapFocusInProgress:!1,lastFocusedElement:null});return I.useEffect(()=>{if(Dt){var s=()=>{if(!(r.current==null||i.current.trapFocusInProgress||!e)){try{if(i.current.trapFocusInProgress=!0,document.activeElement instanceof Node&&!r.current.contains(document.activeElement)){var o=qM(r.current);i.current.lastFocusedElement===document.activeElement&&(o=GM(r.current)),!o&&r.current!=null&&document.activeElement&&Wi.focus(r.current)}}finally{i.current.trapFocusInProgress=!1}i.current.lastFocusedElement=document.activeElement}};return s(),document.addEventListener("focus",s,!0),()=>document.removeEventListener("focus",s,!0)}},[e]),I.useEffect(function(){if(Dt){var s=document.activeElement;return function(){s&&document.contains(s)&&Wi.focus(s)}}},[]),I.createElement(I.Fragment,null,I.createElement(Rx,null),I.createElement(X,{ref:r},n),I.createElement(Rx,null))},OW=De.create({focusBracket:{outlineStyle:"none"}}),MW=["animationType","children","onDismiss","onRequestClose","onShow","transparent","visible"],NW=0,ya=[],pu={};function XM(){if(ya.length!==0){var t=ya[ya.length-1];ya.forEach(e=>{e in pu&&pu[e](e===t)})}}function VS(t){t in pu&&(pu[t](!1),delete pu[t]);var e=ya.indexOf(t);e!==-1&&(ya.splice(e,1),XM())}function LW(t,e){VS(t),ya.push(t),pu[t]=e,XM()}var Sd=I.forwardRef((t,e)=>{var n=t.animationType,r=t.children,i=t.onDismiss,s=t.onRequestClose,o=t.onShow,a=t.transparent,l=t.visible,u=l===void 0?!0:l,c=On(t,MW),d=I.useMemo(()=>NW++,[]),f=I.useState(!1),p=f[0],g=f[1],E=I.useCallback(()=>{VS(d),i&&i()},[d,i]),b=I.useCallback(()=>{LW(d,g),o&&o()},[d,o]);return I.useEffect(()=>()=>VS(d),[d]),I.createElement(TW,null,I.createElement(IW,{animationType:n,onDismiss:E,onShow:b,visible:u},I.createElement(DW,{active:p},I.createElement(kW,cn({},c,{active:p,onRequestClose:s,ref:e,transparent:a}),r))))}),VW=(t,e)=>{var n=t.selectionEnd,r=t.selectionStart,i=e.start,s=e.end;return i!==r||s!==n},Cx=(t,e)=>{if(VW(t,e)){var n=e.start,r=e.end;try{t.setSelectionRange(n,r||n)}catch{}}},FW=Object.assign({},cT,hT,dT,fT,pT,mT,gT,yT,{autoCapitalize:!0,autoComplete:!0,autoCorrect:!0,autoFocus:!0,defaultValue:!0,disabled:!0,lang:!0,maxLength:!0,onChange:!0,onScroll:!0,placeholder:!0,pointerEvents:!0,readOnly:!0,rows:!0,spellCheck:!0,value:!0,type:!0}),BW=t=>vT(t,FW);function jW(t){return t.isComposing||t.keyCode===229}var T_=null,Qn=I.forwardRef((t,e)=>{var n=t.autoCapitalize,r=n===void 0?"sentences":n,i=t.autoComplete,s=t.autoCompleteType,o=t.autoCorrect,a=o===void 0?!0:o,l=t.blurOnSubmit,u=t.caretHidden,c=t.clearTextOnFocus,d=t.dir,f=t.editable,p=t.enterKeyHint,g=t.inputMode,E=t.keyboardType,b=t.multiline,S=b===void 0?!1:b,y=t.numberOfLines,w=t.onBlur,x=t.onChange,O=t.onChangeText,k=t.onContentSizeChange,T=t.onFocus,v=t.onKeyPress,R=t.onLayout,C=t.onMoveShouldSetResponder,A=t.onMoveShouldSetResponderCapture,N=t.onResponderEnd,D=t.onResponderGrant,de=t.onResponderMove,fe=t.onResponderReject,je=t.onResponderRelease,Re=t.onResponderStart,U=t.onResponderTerminate,Y=t.onResponderTerminationRequest,ie=t.onScrollShouldSetResponder,we=t.onScrollShouldSetResponderCapture,Ae=t.onSelectionChange,hn=t.onSelectionChangeShouldSetResponder,lt=t.onSelectionChangeShouldSetResponderCapture,zt=t.onStartShouldSetResponder,mt=t.onStartShouldSetResponderCapture,Ke=t.onSubmitEditing,Nt=t.placeholderTextColor,Mn=t.readOnly,Ii=Mn===void 0?!1:Mn,fs=t.returnKeyType,_r=t.rows,zr=t.secureTextEntry,nr=zr===void 0?!1:zr,Lo=t.selection,ps=t.selectTextOnFocus,Vo=t.showSoftInputOnFocus,ms=t.spellCheck,Oe,et;if(g!=null)et=g,g==="email"?Oe="email":g==="tel"?Oe="tel":g==="search"?Oe="search":g==="url"?Oe="url":Oe="text";else if(E!=null)switch(E){case"email-address":Oe="email";break;case"number-pad":case"numeric":et="numeric";break;case"decimal-pad":et="decimal";break;case"phone-pad":Oe="tel";break;case"search":case"web-search":Oe="search";break;case"url":Oe="url";break;default:Oe="text"}nr&&(Oe="password");var Nn=I.useRef({height:null,width:null}),rr=I.useRef(null),gs=I.useRef(null),Fo=I.useRef(!1);I.useEffect(()=>{rr.current&&gs.current&&Cx(rr.current,gs.current),Fo.current=nr},[nr]);var wr=I.useCallback(ee=>{if(S&&k&&ee!=null){var Qe=ee.scrollHeight,Lt=ee.scrollWidth;(Qe!==Nn.current.height||Lt!==Nn.current.width)&&(Nn.current.height=Qe,Nn.current.width=Lt,k({nativeEvent:{contentSize:{height:Nn.current.height,width:Nn.current.width}}}))}},[S,k]),Bo=I.useMemo(()=>ee=>{ee!=null&&(ee.clear=function(){ee!=null&&(ee.value="")},ee.isFocused=function(){return ee!=null&&Bi.currentlyFocusedField()===ee},wr(ee))},[wr]);function il(ee){Bi._currentlyFocusedNode=null,w&&(ee.nativeEvent.text=ee.target.value,w(ee))}function ys(ee){var Qe=ee.target,Lt=Qe.value;ee.nativeEvent.text=Lt,wr(Qe),x&&x(ee),O&&O(Lt)}function mc(ee){var Qe=ee.target;T&&(ee.nativeEvent.text=Qe.value,T(ee)),Qe!=null&&(Bi._currentlyFocusedNode=Qe,c&&(Qe.value=""),ps&&(T_!=null&&clearTimeout(T_),T_=setTimeout(()=>{Qe!=null&&document.activeElement===Qe&&Qe.select()},0)))}function sl(ee){var Qe=ee.target;ee.stopPropagation();var Lt=!S,Sr=l??Lt,Hr=ee.nativeEvent,cl=jW(Hr);v&&v(ee),ee.key==="Enter"&&!ee.shiftKey&&!cl&&!ee.isDefaultPrevented()&&((l||!S)&&Ke&&(ee.preventDefault(),Hr.text=ee.target.value,Ke(ee)),Sr&&Qe!=null&&setTimeout(()=>Qe.blur(),0))}function ol(ee){try{var Qe=ee.target,Lt=Qe.selectionStart,Sr=Qe.selectionEnd,Hr={start:Lt,end:Sr};Ae&&(ee.nativeEvent.selection=Hr,ee.nativeEvent.text=ee.target.value,Ae(ee)),Fo.current===nr&&(gs.current=Hr)}catch{}}xS(()=>{var ee=rr.current;ee!=null&&Lo!=null&&Cx(ee,Lo),document.activeElement===ee&&(Bi._currentlyFocusedNode=ee)},[rr,Lo]);var jo=S?"textarea":"input";_T(rr,R),ET(rr,{onMoveShouldSetResponder:C,onMoveShouldSetResponderCapture:A,onResponderEnd:N,onResponderGrant:D,onResponderMove:de,onResponderReject:fe,onResponderRelease:je,onResponderStart:Re,onResponderTerminate:U,onResponderTerminationRequest:Y,onScrollShouldSetResponder:ie,onScrollShouldSetResponderCapture:we,onSelectionChangeShouldSetResponder:hn,onSelectionChangeShouldSetResponderCapture:lt,onStartShouldSetResponder:zt,onStartShouldSetResponderCapture:mt});var Ri=uT(),vs=Ri.direction,Ue=BW(t);Ue.autoCapitalize=r,Ue.autoComplete=i||s||"on",Ue.autoCorrect=a?"on":"off",Ue.dir=d!==void 0?d:"auto",Ue.enterKeyHint=p||fs,Ue.inputMode=et,Ue.onBlur=il,Ue.onChange=ys,Ue.onFocus=mc,Ue.onKeyDown=sl,Ue.onSelect=ol,Ue.readOnly=Ii===!0||f===!1,Ue.rows=S?_r??y:1,Ue.spellCheck=ms??a,Ue.style=[{"--placeholderTextColor":Nt},b_.textinput$raw,b_.placeholder,t.style,u&&b_.caretHidden],Ue.type=S?void 0:Oe,Ue.virtualkeyboardpolicy=Vo===!1?"manual":"auto";var ir=wT(Ue),al=Yd(rr,ir,Bo,e);Ue.ref=al;var Ci=t.lang!=null?Ry(t.lang):null,ll=t.dir||Ci,Wr=ll||vs,ul=Ju(jo,Ue,{writingDirection:Wr});return ul});Qn.displayName="TextInput";Qn.State=Bi;var b_=De.create({textinput$raw:{MozAppearance:"textfield",WebkitAppearance:"none",backgroundColor:"transparent",border:"0 solid black",borderRadius:0,boxSizing:"border-box",font:"14px System",margin:0,padding:0,resize:"none"},placeholder:{placeholderTextColor:"var(--placeholderTextColor)"},caretHidden:{caretColor:"transparent"}});/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xx="popstate";function UW(t={}){function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=el(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),FS("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:Ed(s))}function r(i,s){vr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return zW(e,n,r,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $W(){return Math.random().toString(36).substring(2,10)}function Ax(t,e){return{usr:t.state,key:t.key,idx:e}}function FS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?el(e):e,state:n,key:e&&e.key||r||$W()}}function Ed({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function el(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function zW(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let b=c(),S=b==null?null:b-u;u=b,l&&l({action:a,location:E.location,delta:S})}function f(b,S){a="PUSH";let y=FS(E.location,b,S);n&&n(y,b),u=c()+1;let w=Ax(y,u),x=E.createHref(y);try{o.pushState(w,"",x)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(x)}s&&l&&l({action:a,location:E.location,delta:1})}function p(b,S){a="REPLACE";let y=FS(E.location,b,S);n&&n(y,b),u=c();let w=Ax(y,u),x=E.createHref(y);o.replaceState(w,"",x),s&&l&&l({action:a,location:E.location,delta:0})}function g(b){return WW(b)}let E={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(xx,d),l=b,()=>{i.removeEventListener(xx,d),l=null}},createHref(b){return e(i,b)},createURL:g,encodeLocation(b){let S=g(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:f,replace:p,go(b){return o.go(b)}};return E}function WW(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),st(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ed(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function QM(t,e,n="/"){return HW(t,e,n,!1)}function HW(t,e,n,r){let i=typeof e=="string"?el(e):e,s=Yi(i.pathname||"/",n);if(s==null)return null;let o=YM(t);KW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=r8(s);a=t8(o[l],u,r)}return a}function YM(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;st(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=Hi([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(st(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),YM(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:ZW(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of JM(o.path))s(o,a,!0,u)}),e}function JM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=JM(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function KW(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:e8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var qW=/^:[\w-]+$/,GW=3,XW=2,QW=1,YW=10,JW=-2,Px=t=>t==="*";function ZW(t,e){let n=t.split("/"),r=n.length;return n.some(Px)&&(r+=JW),e&&(r+=XW),n.filter(i=>!Px(i)).reduce((i,s)=>i+(qW.test(s)?GW:s===""?QW:YW),r)}function e8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function t8(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=mg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=mg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Hi([s,d.pathname]),pathnameBase:l8(Hi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Hi([s,d.pathnameBase]))}return o}function mg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=n8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function n8(t,e=!1,n=!0){vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function r8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var i8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,s8=t=>i8.test(t);function o8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?el(t):t,s;if(n)if(s8(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),vr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=kx(n.substring(1),"/"):s=kx(n,e)}else s=e;return{pathname:s,search:u8(r),hash:c8(i)}}function kx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function I_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function a8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ZM(t){let e=a8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function eN(t,e,n,r=!1){let i;typeof t=="string"?i=el(t):(i={...t},st(!i.pathname||!i.pathname.includes("?"),I_("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),I_("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),I_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=o8(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Hi=t=>t.join("/").replace(/\/\/+/g,"/"),l8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,c8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function h8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function d8(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tN=["POST","PUT","PATCH","DELETE"];new Set(tN);var f8=["GET",...tN];new Set(f8);var Zu=I.createContext(null);Zu.displayName="DataRouter";var Py=I.createContext(null);Py.displayName="DataRouterState";I.createContext(!1);var nN=I.createContext({isTransitioning:!1});nN.displayName="ViewTransition";var p8=I.createContext(new Map);p8.displayName="Fetchers";var m8=I.createContext(null);m8.displayName="Await";var $r=I.createContext(null);$r.displayName="Navigation";var Zd=I.createContext(null);Zd.displayName="Location";var as=I.createContext({outlet:null,matches:[],isDataRoute:!1});as.displayName="Route";var TT=I.createContext(null);TT.displayName="RouteError";function g8(t,{relative:e}={}){st(ef(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext($r),{hash:i,pathname:s,search:o}=tf(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Hi([n,s])),r.createHref({pathname:a,search:o,hash:i})}function ef(){return I.useContext(Zd)!=null}function Ti(){return st(ef(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Zd).location}var rN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iN(t){I.useContext($r).static||I.useLayoutEffect(t)}function ec(){let{isDataRoute:t}=I.useContext(as);return t?A8():y8()}function y8(){st(ef(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(Zu),{basename:e,navigator:n}=I.useContext($r),{matches:r}=I.useContext(as),{pathname:i}=Ti(),s=JSON.stringify(ZM(r)),o=I.useRef(!1);return iN(()=>{o.current=!0}),I.useCallback((l,u={})=>{if(vr(o.current,rN),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=eN(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Hi([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}I.createContext(null);function tf(t,{relative:e}={}){let{matches:n}=I.useContext(as),{pathname:r}=Ti(),i=JSON.stringify(ZM(n));return I.useMemo(()=>eN(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function v8(t,e){return sN(t,e)}function sN(t,e,n,r,i){var y;st(ef(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I.useContext($r),{matches:o}=I.useContext(as),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";oN(u,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=Ti(),p;if(e){let w=typeof e=="string"?el(e):e;st(c==="/"||((y=w.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),p=w}else p=f;let g=p.pathname||"/",E=g;if(c!=="/"){let w=c.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=QM(t,{pathname:E});vr(d||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),vr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=T8(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Hi([c,s.encodeLocation?s.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Hi([c,s.encodeLocation?s.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,i);return e&&S?I.createElement(Zd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},S):S}function _8(){let t=x8(),e=h8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:s},"ErrorBoundary")," or"," ",I.createElement("code",{style:s},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,o)}var w8=I.createElement(_8,null),S8=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?I.createElement(as.Provider,{value:this.props.routeContext},I.createElement(TT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function E8({routeContext:t,match:e,children:n}){let r=I.useContext(Zu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(as.Provider,{value:t},n)}function T8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);st(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&r?(c,d)=>{var f,p;r(c,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:d8(n.matches),errorInfo:d})}:void 0;return s.reduceRight((c,d,f)=>{let p,g=!1,E=null,b=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,E=d.route.errorElement||w8,a&&(l<0&&f===0?(oN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===f&&(g=!0,b=d.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,f+1)),y=()=>{let w;return p?w=E:g?w=b:d.route.Component?w=I.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,I.createElement(E8,{match:d,routeContext:{outlet:c,matches:S,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?I.createElement(S8,{location:n.location,revalidation:n.revalidation,component:E,error:p,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):y()},null)}function bT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b8(t){let e=I.useContext(Zu);return st(e,bT(t)),e}function I8(t){let e=I.useContext(Py);return st(e,bT(t)),e}function R8(t){let e=I.useContext(as);return st(e,bT(t)),e}function IT(t){let e=R8(t),n=e.matches[e.matches.length-1];return st(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function C8(){return IT("useRouteId")}function x8(){var r;let t=I.useContext(TT),e=I8("useRouteError"),n=IT("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function A8(){let{router:t}=b8("useNavigate"),e=IT("useNavigate"),n=I.useRef(!1);return iN(()=>{n.current=!0}),I.useCallback(async(i,s={})=>{vr(n.current,rN),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Dx={};function oN(t,e,n){!e&&!Dx[t]&&(Dx[t]=!0,vr(!1,n))}I.memo(P8);function P8({routes:t,future:e,state:n,unstable_onError:r}){return sN(t,void 0,n,r,e)}function Dl(t){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){st(!ef(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=el(n));let{pathname:u="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,g=I.useMemo(()=>{let E=Yi(u,a);return E==null?null:{location:{pathname:E,search:c,hash:d,state:f,key:p},navigationType:r}},[a,u,c,d,f,p,r]);return vr(g!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:I.createElement($r.Provider,{value:l},I.createElement(Zd.Provider,{children:e,value:g}))}function D8({children:t,location:e}){return v8(BS(t),e)}function BS(t,e=[]){let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,BS(r.props.children,s));return}st(r.type===Dl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=BS(r.props.children,s)),n.push(o)}),n}var im="get",sm="application/x-www-form-urlencoded";function ky(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function O8(t){return ky(t)&&t.tagName.toLowerCase()==="button"}function M8(t){return ky(t)&&t.tagName.toLowerCase()==="form"}function N8(t){return ky(t)&&t.tagName.toLowerCase()==="input"}function L8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function V8(t,e){return t.button===0&&(!e||e==="_self")&&!L8(t)}var vp=null;function F8(){if(vp===null)try{new FormData(document.createElement("form"),0),vp=!1}catch{vp=!0}return vp}var B8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function R_(t){return t!=null&&!B8.has(t)?(vr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sm}"`),null):t}function j8(t,e){let n,r,i,s,o;if(M8(t)){let a=t.getAttribute("action");r=a?Yi(a,e):null,n=t.getAttribute("method")||im,i=R_(t.getAttribute("enctype"))||sm,s=new FormData(t)}else if(O8(t)||N8(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Yi(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||im,i=R_(t.getAttribute("formenctype"))||R_(a.getAttribute("enctype"))||sm,s=new FormData(a,t),!F8()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(ky(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=im,r=null,i=sm,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function RT(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function U8(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Yi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function $8(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function z8(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function W8(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await $8(s,n);return o.links?o.links():[]}return[]}));return G8(r.flat(1).filter(z8).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Ox(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function H8(t,e,{includeHydrateFallback:n}={}){return K8(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function K8(t){return[...new Set(t)]}function q8(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function G8(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(q8(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function aN(){let t=I.useContext(Zu);return RT(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function X8(){let t=I.useContext(Py);return RT(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var CT=I.createContext(void 0);CT.displayName="FrameworkContext";function lN(){let t=I.useContext(CT);return RT(t,"You must render this element inside a <HydratedRouter> element"),t}function Q8(t,e){let n=I.useContext(CT),[r,i]=I.useState(!1),[s,o]=I.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=I.useRef(null);I.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=S=>{S.forEach(y=>{o(y.isIntersecting)})},b=new IntersectionObserver(E,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[t]),I.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Hc(a,p),onBlur:Hc(l,g),onMouseEnter:Hc(u,p),onMouseLeave:Hc(c,g),onTouchStart:Hc(d,p)}]:[!1,f,{}]}function Hc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Y8({page:t,...e}){let{router:n}=aN(),r=I.useMemo(()=>QM(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?I.createElement(Z8,{page:t,matches:r,...e}):null}function J8(t){let{manifest:e,routeModules:n}=lN(),[r,i]=I.useState([]);return I.useEffect(()=>{let s=!1;return W8(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function Z8({page:t,matches:e,...n}){let r=Ti(),{manifest:i,routeModules:s}=lN(),{basename:o}=aN(),{loaderData:a,matches:l}=X8(),u=I.useMemo(()=>Ox(t,e,l,i,r,"data"),[t,e,l,i,r]),c=I.useMemo(()=>Ox(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=I.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,E=!1;if(e.forEach(S=>{var w;let y=i.routes[S.route.id];!y||!y.hasLoader||(!u.some(x=>x.route.id===S.route.id)&&S.route.id in a&&((w=s[S.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?E=!0:g.add(S.route.id))}),g.size===0)return[];let b=U8(t,o,"data");return E&&g.size>0&&b.searchParams.set("_routes",e.filter(S=>g.has(S.route.id)).map(S=>S.route.id).join(",")),[b.pathname+b.search]},[o,a,r,i,u,e,t,s]),f=I.useMemo(()=>H8(c,i),[c,i]),p=J8(c);return I.createElement(I.Fragment,null,d.map(g=>I.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>I.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:E})=>I.createElement("link",{key:g,nonce:n.nonce,...E})))}function eH(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var uN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uN&&(window.__reactRouterVersion="7.10.1")}catch{}function tH({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=I.useRef();i.current==null&&(i.current=UW({window:r,v5Compat:!0}));let s=i.current,[o,a]=I.useState({action:s.action,location:s.location}),l=I.useCallback(u=>{n===!1?a(u):I.startTransition(()=>a(u))},[n]);return I.useLayoutEffect(()=>s.listen(l),[s,l]),I.createElement(k8,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n===!0})}var cN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hN=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},p){let{basename:g,unstable_useTransitions:E}=I.useContext($r),b=typeof u=="string"&&cN.test(u),S,y=!1;if(typeof u=="string"&&b&&(S=u,uN))try{let C=new URL(window.location.href),A=u.startsWith("//")?new URL(C.protocol+u):new URL(u),N=Yi(A.pathname,g);A.origin===C.origin&&N!=null?u=N+A.search+A.hash:y=!0}catch{vr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=g8(u,{relative:i}),[x,O,k]=Q8(r,f),T=sH(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d,unstable_useTransitions:E});function v(C){e&&e(C),C.defaultPrevented||T(C)}let R=I.createElement("a",{...f,...k,href:S||w,onClick:y||s?e:v,ref:eH(p,O),target:l,"data-discover":!b&&n==="render"?"true":void 0});return x&&!b?I.createElement(I.Fragment,null,R,I.createElement(Y8,{page:w})):R});hN.displayName="Link";var nH=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=tf(o,{relative:u.relative}),f=Ti(),p=I.useContext(Py),{navigator:g,basename:E}=I.useContext($r),b=p!=null&&cH(d)&&a===!0,S=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,y=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,S=S.toLowerCase()),w&&E&&(w=Yi(w,E)||w);const x=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=y===S||!i&&y.startsWith(S)&&y.charAt(x)==="/",k=w!=null&&(w===S||!i&&w.startsWith(S)&&w.charAt(S.length)==="/"),T={isActive:O,isPending:k,isTransitioning:b},v=O?e:void 0,R;typeof r=="function"?R=r(T):R=[r,O?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(T):s;return I.createElement(hN,{...u,"aria-current":v,className:R,ref:c,style:C,to:o,viewTransition:a},typeof l=="function"?l(T):l)});nH.displayName="NavLink";var rH=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=im,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},p)=>{let{unstable_useTransitions:g}=I.useContext($r),E=lH(),b=uH(a,{relative:u}),S=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&cN.test(a),w=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let O=x.nativeEvent.submitter,k=(O==null?void 0:O.getAttribute("formmethod"))||o,T=()=>E(O||x.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d});g&&n!==!1?I.startTransition(()=>T()):T()};return I.createElement("form",{ref:p,method:S,action:b,onSubmit:r?l:w,...f,"data-discover":!y&&t==="render"?"true":void 0})});rH.displayName="Form";function iH(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dN(t){let e=I.useContext(Zu);return st(e,iH(t)),e}function sH(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_useTransitions:a}={}){let l=ec(),u=Ti(),c=tf(t,{relative:s});return I.useCallback(d=>{if(V8(d,e)){d.preventDefault();let f=n!==void 0?n:Ed(u)===Ed(c),p=()=>l(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o});a?I.startTransition(()=>p()):p()}},[u,l,c,n,r,e,t,i,s,o,a])}var oH=0,aH=()=>`__${String(++oH)}__`;function lH(){let{router:t}=dN("useSubmit"),{basename:e}=I.useContext($r),n=C8(),r=t.fetch,i=t.navigate;return I.useCallback(async(s,o={})=>{let{action:a,method:l,encType:u,formData:c,body:d}=j8(s,e);if(o.navigate===!1){let f=o.fetcherKey||aH();await r(f,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function uH(t,{relative:e}={}){let{basename:n}=I.useContext($r),r=I.useContext(as);st(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...tf(t||".",{relative:e})},o=Ti();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Hi([n,s.pathname])),Ed(s)}function cH(t,{relative:e}={}){let n=I.useContext(nN);st(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=dN("useViewTransitionState"),i=tf(t,{relative:e});if(!n.isTransitioning)return!1;let s=Yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mg(i.pathname,o)!=null||mg(i.pathname,s)!=null}const hH=()=>{};var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},pN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[c],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new fH;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pH=function(t){const e=fN(t);return pN.encodeByteArray(e,!0)},gg=function(t){return pH(t).replace(/\./g,"")},mN=function(t){try{return pN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=()=>gN().__FIREBASE_DEFAULTS__,gH=()=>{if(typeof process>"u"||typeof Mx>"u")return;const t=Mx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mN(t[1]);return e&&JSON.parse(e)},Dy=()=>{try{return hH()||mH()||gH()||yH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yN=t=>{var e,n;return(n=(e=Dy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},vH=t=>{const e=yN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vN=()=>{var t;return(t=Dy())==null?void 0:t.config},_N=t=>{var e;return(e=Dy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[gg(JSON.stringify(n)),gg(JSON.stringify(o)),""].join(".")}const Lh={};function SH(){const t={prod:[],emulator:[]};for(const e of Object.keys(Lh))Lh[e]?t.emulator.push(e):t.prod.push(e);return t}function EH(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Nx=!1;function wN(t,e){if(typeof window>"u"||typeof document>"u"||!xo(window.location.host)||Lh[t]===e||Lh[t]||Nx)return;Lh[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=SH().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Nx=!0,o()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=EH(r),p=n("text"),g=document.getElementById(p)||document.createElement("span"),E=n("learnmore"),b=document.getElementById(E)||document.createElement("a"),S=n("preprendIcon"),y=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),c(b,E);const x=u();l(y,S),w.append(y,g,b,x),document.body.appendChild(w)}s?(g.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function SN(){var e;const t=(e=Dy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CH(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EN(){return!SN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TN(){return!SN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function bN(){try{return typeof indexedDB=="object"}catch{return!1}}function xH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH="FirebaseError";class bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AH,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nf.prototype.create)}}class nf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bi(i,a,r)}}function PH(t,e){return t.replace(kH,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const kH=/\{\$([^}]+)}/g;function DH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Va(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Lx(s)&&Lx(o)){if(!Va(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ah(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function OH(t,e){const n=new MH(t,e);return n.subscribe.bind(n)}class MH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NH(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=C_),i.error===void 0&&(i.error=C_),i.complete===void 0&&(i.complete=C_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function C_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class yo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _H;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FH(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VH(t){return t===na?void 0:t}function FH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const jH={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},UH=Ee.INFO,$H={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},zH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=$H[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AT{constructor(e){this.name=e,this._logLevel=UH,this._logHandler=zH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const WH=(t,e)=>e.some(n=>t instanceof n);let Vx,Fx;function HH(){return Vx||(Vx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KH(){return Fx||(Fx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IN=new WeakMap,jS=new WeakMap,RN=new WeakMap,x_=new WeakMap,PT=new WeakMap;function qH(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(uo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IN.set(n,t)}).catch(()=>{}),PT.set(e,t),e}function GH(t){if(jS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jS.set(t,e)}let US={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XH(t){US=t(US)}function QH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(A_(this),e,...n);return RN.set(r,e.sort?e.sort():[e]),uo(r)}:KH().includes(t)?function(...e){return t.apply(A_(this),e),uo(IN.get(this))}:function(...e){return uo(t.apply(A_(this),e))}}function YH(t){return typeof t=="function"?QH(t):(t instanceof IDBTransaction&&GH(t),WH(t,HH())?new Proxy(t,US):t)}function uo(t){if(t instanceof IDBRequest)return qH(t);if(x_.has(t))return x_.get(t);const e=YH(t);return e!==t&&(x_.set(t,e),PT.set(e,t)),e}const A_=t=>PT.get(t);function JH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=uo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(uo(o.result),l.oldVersion,l.newVersion,uo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const ZH=["get","getKey","getAll","getAllKeys","count"],eK=["put","add","delete","clear"],P_=new Map;function Bx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(P_.get(e))return P_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=eK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZH.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return P_.set(e,s),s}XH(t=>({...t,get:(e,n,r)=>Bx(e,n)||t.get(e,n,r),has:(e,n)=>!!Bx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $S="@firebase/app",jx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new AT("@firebase/app"),rK="@firebase/app-compat",iK="@firebase/analytics-compat",sK="@firebase/analytics",oK="@firebase/app-check-compat",aK="@firebase/app-check",lK="@firebase/auth",uK="@firebase/auth-compat",cK="@firebase/database",hK="@firebase/data-connect",dK="@firebase/database-compat",fK="@firebase/functions",pK="@firebase/functions-compat",mK="@firebase/installations",gK="@firebase/installations-compat",yK="@firebase/messaging",vK="@firebase/messaging-compat",_K="@firebase/performance",wK="@firebase/performance-compat",SK="@firebase/remote-config",EK="@firebase/remote-config-compat",TK="@firebase/storage",bK="@firebase/storage-compat",IK="@firebase/firestore",RK="@firebase/ai",CK="@firebase/firestore-compat",xK="firebase",AK="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="[DEFAULT]",PK={[$S]:"fire-core",[rK]:"fire-core-compat",[sK]:"fire-analytics",[iK]:"fire-analytics-compat",[aK]:"fire-app-check",[oK]:"fire-app-check-compat",[lK]:"fire-auth",[uK]:"fire-auth-compat",[cK]:"fire-rtdb",[hK]:"fire-data-connect",[dK]:"fire-rtdb-compat",[fK]:"fire-fn",[pK]:"fire-fn-compat",[mK]:"fire-iid",[gK]:"fire-iid-compat",[yK]:"fire-fcm",[vK]:"fire-fcm-compat",[_K]:"fire-perf",[wK]:"fire-perf-compat",[SK]:"fire-rc",[EK]:"fire-rc-compat",[TK]:"fire-gcs",[bK]:"fire-gcs-compat",[IK]:"fire-fst",[CK]:"fire-fst-compat",[RK]:"fire-vertex","fire-js":"fire-js",[xK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=new Map,kK=new Map,WS=new Map;function Ux(t,e){try{t.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fa(t){const e=t.name;if(WS.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;WS.set(e,t);for(const n of yg.values())Ux(n,t);for(const n of kK.values())Ux(n,t);return!0}function Oy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new nf("app","Firebase",DK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=AK;function CN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:zS,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw co.create("bad-app-name",{appName:String(i)});if(n||(n=vN()),!n)throw co.create("no-options");const s=yg.get(i);if(s){if(Va(n,s.options)&&Va(r,s.config))return s;throw co.create("duplicate-app",{appName:i})}const o=new BH(i);for(const l of WS.values())o.addComponent(l);const a=new OK(n,r,o);return yg.set(i,a),a}function xN(t=zS){const e=yg.get(t);if(!e&&t===zS&&vN())return CN();if(!e)throw co.create("no-app",{appName:t});return e}function fi(t,e,n){let r=PK[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(o.join(" "));return}Fa(new yo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK="firebase-heartbeat-database",NK=1,Td="firebase-heartbeat-store";let k_=null;function AN(){return k_||(k_=JH(MK,NK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Td)}catch(n){console.warn(n)}}}}).catch(t=>{throw co.create("idb-open",{originalErrorMessage:t.message})})),k_}async function LK(t){try{const n=(await AN()).transaction(Td),r=await n.objectStore(Td).get(PN(t));return await n.done,r}catch(e){if(e instanceof bi)Ji.warn(e.message);else{const n=co.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ji.warn(n.message)}}}async function $x(t,e){try{const r=(await AN()).transaction(Td,"readwrite");await r.objectStore(Td).put(e,PN(t)),await r.done}catch(n){if(n instanceof bi)Ji.warn(n.message);else{const r=co.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ji.warn(r.message)}}}function PN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK=1024,FK=30;class BK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>FK){const o=$K(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zx(),{heartbeatsToSend:r,unsentEntries:i}=jK(this._heartbeatsCache.heartbeats),s=gg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ji.warn(n),""}}}function zx(){return new Date().toISOString().substring(0,10)}function jK(t,e=VK){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bN()?xH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $x(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $x(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wx(t){return gg(JSON.stringify({version:2,heartbeats:t})).length}function $K(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zK(t){Fa(new yo("platform-logger",e=>new tK(e),"PRIVATE")),Fa(new yo("heartbeat",e=>new BK(e),"PRIVATE")),fi($S,jx,t),fi($S,jx,"esm2020"),fi("fire-js","")}zK("");var WK="firebase",HK="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(WK,HK,"app");var Hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,kN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function R(){}R.prototype=v.prototype,T.F=v.prototype,T.prototype=new R,T.prototype.constructor=T,T.D=function(C,A,N){for(var D=Array(arguments.length-2),de=2;de<arguments.length;de++)D[de-2]=arguments[de];return v.prototype[A].apply(C,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,R){R||(R=0);const C=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)C[A]=v.charCodeAt(R++)|v.charCodeAt(R++)<<8|v.charCodeAt(R++)<<16|v.charCodeAt(R++)<<24;else for(A=0;A<16;++A)C[A]=v[R++]|v[R++]<<8|v[R++]<<16|v[R++]<<24;v=T.g[0],R=T.g[1],A=T.g[2];let N=T.g[3],D;D=v+(N^R&(A^N))+C[0]+3614090360&4294967295,v=R+(D<<7&4294967295|D>>>25),D=N+(A^v&(R^A))+C[1]+3905402710&4294967295,N=v+(D<<12&4294967295|D>>>20),D=A+(R^N&(v^R))+C[2]+606105819&4294967295,A=N+(D<<17&4294967295|D>>>15),D=R+(v^A&(N^v))+C[3]+3250441966&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(N^R&(A^N))+C[4]+4118548399&4294967295,v=R+(D<<7&4294967295|D>>>25),D=N+(A^v&(R^A))+C[5]+1200080426&4294967295,N=v+(D<<12&4294967295|D>>>20),D=A+(R^N&(v^R))+C[6]+2821735955&4294967295,A=N+(D<<17&4294967295|D>>>15),D=R+(v^A&(N^v))+C[7]+4249261313&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(N^R&(A^N))+C[8]+1770035416&4294967295,v=R+(D<<7&4294967295|D>>>25),D=N+(A^v&(R^A))+C[9]+2336552879&4294967295,N=v+(D<<12&4294967295|D>>>20),D=A+(R^N&(v^R))+C[10]+4294925233&4294967295,A=N+(D<<17&4294967295|D>>>15),D=R+(v^A&(N^v))+C[11]+2304563134&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(N^R&(A^N))+C[12]+1804603682&4294967295,v=R+(D<<7&4294967295|D>>>25),D=N+(A^v&(R^A))+C[13]+4254626195&4294967295,N=v+(D<<12&4294967295|D>>>20),D=A+(R^N&(v^R))+C[14]+2792965006&4294967295,A=N+(D<<17&4294967295|D>>>15),D=R+(v^A&(N^v))+C[15]+1236535329&4294967295,R=A+(D<<22&4294967295|D>>>10),D=v+(A^N&(R^A))+C[1]+4129170786&4294967295,v=R+(D<<5&4294967295|D>>>27),D=N+(R^A&(v^R))+C[6]+3225465664&4294967295,N=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(N^v))+C[11]+643717713&4294967295,A=N+(D<<14&4294967295|D>>>18),D=R+(N^v&(A^N))+C[0]+3921069994&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(A^N&(R^A))+C[5]+3593408605&4294967295,v=R+(D<<5&4294967295|D>>>27),D=N+(R^A&(v^R))+C[10]+38016083&4294967295,N=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(N^v))+C[15]+3634488961&4294967295,A=N+(D<<14&4294967295|D>>>18),D=R+(N^v&(A^N))+C[4]+3889429448&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(A^N&(R^A))+C[9]+568446438&4294967295,v=R+(D<<5&4294967295|D>>>27),D=N+(R^A&(v^R))+C[14]+3275163606&4294967295,N=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(N^v))+C[3]+4107603335&4294967295,A=N+(D<<14&4294967295|D>>>18),D=R+(N^v&(A^N))+C[8]+1163531501&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(A^N&(R^A))+C[13]+2850285829&4294967295,v=R+(D<<5&4294967295|D>>>27),D=N+(R^A&(v^R))+C[2]+4243563512&4294967295,N=v+(D<<9&4294967295|D>>>23),D=A+(v^R&(N^v))+C[7]+1735328473&4294967295,A=N+(D<<14&4294967295|D>>>18),D=R+(N^v&(A^N))+C[12]+2368359562&4294967295,R=A+(D<<20&4294967295|D>>>12),D=v+(R^A^N)+C[5]+4294588738&4294967295,v=R+(D<<4&4294967295|D>>>28),D=N+(v^R^A)+C[8]+2272392833&4294967295,N=v+(D<<11&4294967295|D>>>21),D=A+(N^v^R)+C[11]+1839030562&4294967295,A=N+(D<<16&4294967295|D>>>16),D=R+(A^N^v)+C[14]+4259657740&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(R^A^N)+C[1]+2763975236&4294967295,v=R+(D<<4&4294967295|D>>>28),D=N+(v^R^A)+C[4]+1272893353&4294967295,N=v+(D<<11&4294967295|D>>>21),D=A+(N^v^R)+C[7]+4139469664&4294967295,A=N+(D<<16&4294967295|D>>>16),D=R+(A^N^v)+C[10]+3200236656&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(R^A^N)+C[13]+681279174&4294967295,v=R+(D<<4&4294967295|D>>>28),D=N+(v^R^A)+C[0]+3936430074&4294967295,N=v+(D<<11&4294967295|D>>>21),D=A+(N^v^R)+C[3]+3572445317&4294967295,A=N+(D<<16&4294967295|D>>>16),D=R+(A^N^v)+C[6]+76029189&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(R^A^N)+C[9]+3654602809&4294967295,v=R+(D<<4&4294967295|D>>>28),D=N+(v^R^A)+C[12]+3873151461&4294967295,N=v+(D<<11&4294967295|D>>>21),D=A+(N^v^R)+C[15]+530742520&4294967295,A=N+(D<<16&4294967295|D>>>16),D=R+(A^N^v)+C[2]+3299628645&4294967295,R=A+(D<<23&4294967295|D>>>9),D=v+(A^(R|~N))+C[0]+4096336452&4294967295,v=R+(D<<6&4294967295|D>>>26),D=N+(R^(v|~A))+C[7]+1126891415&4294967295,N=v+(D<<10&4294967295|D>>>22),D=A+(v^(N|~R))+C[14]+2878612391&4294967295,A=N+(D<<15&4294967295|D>>>17),D=R+(N^(A|~v))+C[5]+4237533241&4294967295,R=A+(D<<21&4294967295|D>>>11),D=v+(A^(R|~N))+C[12]+1700485571&4294967295,v=R+(D<<6&4294967295|D>>>26),D=N+(R^(v|~A))+C[3]+2399980690&4294967295,N=v+(D<<10&4294967295|D>>>22),D=A+(v^(N|~R))+C[10]+4293915773&4294967295,A=N+(D<<15&4294967295|D>>>17),D=R+(N^(A|~v))+C[1]+2240044497&4294967295,R=A+(D<<21&4294967295|D>>>11),D=v+(A^(R|~N))+C[8]+1873313359&4294967295,v=R+(D<<6&4294967295|D>>>26),D=N+(R^(v|~A))+C[15]+4264355552&4294967295,N=v+(D<<10&4294967295|D>>>22),D=A+(v^(N|~R))+C[6]+2734768916&4294967295,A=N+(D<<15&4294967295|D>>>17),D=R+(N^(A|~v))+C[13]+1309151649&4294967295,R=A+(D<<21&4294967295|D>>>11),D=v+(A^(R|~N))+C[4]+4149444226&4294967295,v=R+(D<<6&4294967295|D>>>26),D=N+(R^(v|~A))+C[11]+3174756917&4294967295,N=v+(D<<10&4294967295|D>>>22),D=A+(v^(N|~R))+C[2]+718787259&4294967295,A=N+(D<<15&4294967295|D>>>17),D=R+(N^(A|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const R=v-this.blockSize,C=this.C;let A=this.h,N=0;for(;N<v;){if(A==0)for(;N<=R;)i(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<v;)if(C[A++]=T.charCodeAt(N++),A==this.blockSize){i(this,C),A=0;break}}else for(;N<v;)if(C[A++]=T[N++],A==this.blockSize){i(this,C),A=0;break}}this.h=A,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var R=T.length-8;R<T.length;++R)T[R]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)T[v++]=this.g[R]>>>C&255;return T};function s(T,v){var R=a;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=v(T)}function o(T,v){this.h=v;const R=[];let C=!0;for(let A=T.length-1;A>=0;A--){const N=T[A]|0;C&&N==v||(R[A]=N,C=!1)}this.g=R}var a={};function l(T){return-128<=T&&T<128?s(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return b(u(-T));const v=[];let R=1;for(let C=0;T>=R;C++)v[C]=T/R|0,R*=4294967296;return new o(v,0)}function c(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return b(c(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(v,8));let C=d;for(let N=0;N<T.length;N+=8){var A=Math.min(8,T.length-N);const D=parseInt(T.substring(N,N+A),v);A<8?(A=u(Math.pow(v,A)),C=C.j(A).add(u(D))):(C=C.j(R),C=C.add(u(D)))}return C}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-b(this).m();let T=0,v=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);T+=(C>=0?C:4294967296+C)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(g(this))return"0";if(E(this))return"-"+b(this).toString(T);const v=u(Math.pow(T,6));var R=this;let C="";for(;;){const A=x(R,v).g;R=S(R,A.j(v));let N=((R.g.length>0?R.g[0]:R.h)>>>0).toString(T);if(R=A,g(R))return N+C;for(;N.length<6;)N="0"+N;C=N+C}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function g(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function E(T){return T.h==-1}t.l=function(T){return T=S(this,T),E(T)?-1:g(T)?0:1};function b(T){const v=T.g.length,R=[];for(let C=0;C<v;C++)R[C]=~T.g[C];return new o(R,~T.h).add(f)}t.abs=function(){return E(this)?b(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),R=[];let C=0;for(let A=0;A<=v;A++){let N=C+(this.i(A)&65535)+(T.i(A)&65535),D=(N>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);C=D>>>16,N&=65535,D&=65535,R[A]=D<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function S(T,v){return T.add(b(v))}t.j=function(T){if(g(this)||g(T))return d;if(E(this))return E(T)?b(this).j(b(T)):b(b(this).j(T));if(E(T))return b(this.j(b(T)));if(this.l(p)<0&&T.l(p)<0)return u(this.m()*T.m());const v=this.g.length+T.g.length,R=[];for(var C=0;C<2*v;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let A=0;A<T.g.length;A++){const N=this.i(C)>>>16,D=this.i(C)&65535,de=T.i(A)>>>16,fe=T.i(A)&65535;R[2*C+2*A]+=D*fe,y(R,2*C+2*A),R[2*C+2*A+1]+=N*fe,y(R,2*C+2*A+1),R[2*C+2*A+1]+=D*de,y(R,2*C+2*A+1),R[2*C+2*A+2]+=N*de,y(R,2*C+2*A+2)}for(T=0;T<v;T++)R[T]=R[2*T+1]<<16|R[2*T];for(T=v;T<2*v;T++)R[T]=0;return new o(R,0)};function y(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function w(T,v){this.g=T,this.h=v}function x(T,v){if(g(v))throw Error("division by zero");if(g(T))return new w(d,d);if(E(T))return v=x(b(T),v),new w(b(v.g),b(v.h));if(E(v))return v=x(T,b(v)),new w(b(v.g),v.h);if(T.g.length>30){if(E(T)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=v;C.l(T)<=0;)R=O(R),C=O(C);var A=k(R,1),N=k(C,1);for(C=k(C,2),R=k(R,2);!g(C);){var D=N.add(C);D.l(T)<=0&&(A=A.add(R),N=D),C=k(C,1),R=k(R,1)}return v=S(T,A.j(v)),new w(A,v)}for(A=d;T.l(v)>=0;){for(R=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),N=u(R),D=N.j(v);E(D)||D.l(T)>0;)R-=C,N=u(R),D=N.j(v);g(N)&&(N=f),A=A.add(N),T=S(T,D)}return new w(A,T)}t.B=function(T){return x(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<v;C++)R[C]=this.i(C)&T.i(C);return new o(R,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<v;C++)R[C]=this.i(C)|T.i(C);return new o(R,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<v;C++)R[C]=this.i(C)^T.i(C);return new o(R,this.h^T.h)};function O(T){const v=T.g.length+1,R=[];for(let C=0;C<v;C++)R[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(R,T.h)}function k(T,v){const R=v>>5;v%=32;const C=T.g.length-R,A=[];for(let N=0;N<C;N++)A[N]=v>0?T.i(N+R)>>>v|T.i(N+R+1)<<32-v:T.i(N+R);return new o(A,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,kN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,ho=o}).apply(typeof Hx<"u"?Hx:typeof self<"u"?self:typeof window<"u"?window:{});var _p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DN,lh,ON,om,HS,MN,NN,LN;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof _p=="object"&&_p];for(var m=0;m<h.length;++m){var _=h[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(h,m){if(m)e:{var _=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var V=h[P];if(!(V in _))break e;_=_[V]}h=h[h.length-1],P=_[h],m=m(P),m!=P&&m!=null&&e(_,h,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(m){var _=[],P;for(P in m)Object.prototype.hasOwnProperty.call(m,P)&&_.push([P,m[P]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(h){var m=typeof h;return m=="object"&&h!=null||m=="function"}function l(h,m,_){return h.call.apply(h.bind,arguments)}function u(h,m,_){return u=l,u.apply(null,arguments)}function c(h,m){var _=Array.prototype.slice.call(arguments,1);return function(){var P=_.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function d(h,m){function _(){}_.prototype=m.prototype,h.Z=m.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(P,V,B){for(var K=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)K[pe-2]=arguments[pe];return m.prototype[V].apply(P,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function p(h){const m=h.length;if(m>0){const _=Array(m);for(let P=0;P<m;P++)_[P]=h[P];return _}return[]}function g(h,m){for(let P=1;P<arguments.length;P++){const V=arguments[P];var _=typeof V;if(_=_!="object"?_:V?Array.isArray(V)?"array":_:"null",_=="array"||_=="object"&&typeof V.length=="number"){_=h.length||0;const B=V.length||0;h.length=_+B;for(let K=0;K<B;K++)h[_+K]=V[K]}else h.push(V)}}class E{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(h){o.setTimeout(()=>{throw h},0)}function S(){var h=T;let m=null;return h.g&&(m=h.g,h.g=h.g.next,h.g||(h.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,_){const P=w.get();P.set(m,_),this.h?this.h.next=P:this.g=P,this.h=P}}var w=new E(()=>new x,h=>h.reset());class x{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let O,k=!1,T=new y,v=()=>{const h=Promise.resolve(void 0);O=()=>{h.then(R)}};function R(){for(var h;h=S();){try{h.h.call(h.g)}catch(_){b(_)}var m=w;m.j(h),m.h<100&&(m.h++,h.next=m.g,m.g=h)}k=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(h,m){this.type=h,this.g=this.target=m,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,m=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};o.addEventListener("test",_,m),o.removeEventListener("test",_,m)}catch{}return h}();function D(h){return/^[\s\xa0]*$/.test(h)}function de(h,m){A.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,m)}d(de,A),de.prototype.init=function(h,m){const _=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=m,m=h.relatedTarget,m||(_=="mouseover"?m=h.fromElement:_=="mouseout"&&(m=h.toElement)),this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),je=0;function Re(h,m,_,P,V){this.listener=h,this.proxy=null,this.src=m,this.type=_,this.capture=!!P,this.ha=V,this.key=++je,this.da=this.fa=!1}function U(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Y(h,m,_){for(const P in h)m.call(_,h[P],P,h)}function ie(h,m){for(const _ in h)m.call(void 0,h[_],_,h)}function we(h){const m={};for(const _ in h)m[_]=h[_];return m}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hn(h,m){let _,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(_ in P)h[_]=P[_];for(let B=0;B<Ae.length;B++)_=Ae[B],Object.prototype.hasOwnProperty.call(P,_)&&(h[_]=P[_])}}function lt(h){this.src=h,this.g={},this.h=0}lt.prototype.add=function(h,m,_,P,V){const B=h.toString();h=this.g[B],h||(h=this.g[B]=[],this.h++);const K=mt(h,m,P,V);return K>-1?(m=h[K],_||(m.fa=!1)):(m=new Re(m,this.src,B,!!P,V),m.fa=_,h.push(m)),m};function zt(h,m){const _=m.type;if(_ in h.g){var P=h.g[_],V=Array.prototype.indexOf.call(P,m,void 0),B;(B=V>=0)&&Array.prototype.splice.call(P,V,1),B&&(U(m),h.g[_].length==0&&(delete h.g[_],h.h--))}}function mt(h,m,_,P){for(let V=0;V<h.length;++V){const B=h[V];if(!B.da&&B.listener==m&&B.capture==!!_&&B.ha==P)return V}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Nt={};function Mn(h,m,_,P,V){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Mn(h,m[B],_,P,V);return null}return _=ms(_),h&&h[fe]?h.J(m,_,a(P)?!!P.capture:!1,V):Ii(h,m,_,!1,P,V)}function Ii(h,m,_,P,V,B){if(!m)throw Error("Invalid event type");const K=a(V)?!!V.capture:!!V;let pe=ps(h);if(pe||(h[Ke]=pe=new lt(h)),_=pe.add(m,_,P,K,B),_.proxy)return _;if(P=fs(),_.proxy=P,P.src=h,P.listener=_,h.addEventListener)N||(V=K),V===void 0&&(V=!1),h.addEventListener(m.toString(),P,V);else if(h.attachEvent)h.attachEvent(nr(m.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return _}function fs(){function h(_){return m.call(h.src,h.listener,_)}const m=Lo;return h}function _r(h,m,_,P,V){if(Array.isArray(m))for(var B=0;B<m.length;B++)_r(h,m[B],_,P,V);else P=a(P)?!!P.capture:!!P,_=ms(_),h&&h[fe]?(h=h.i,B=String(m).toString(),B in h.g&&(m=h.g[B],_=mt(m,_,P,V),_>-1&&(U(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete h.g[B],h.h--)))):h&&(h=ps(h))&&(m=h.g[m.toString()],h=-1,m&&(h=mt(m,_,P,V)),(_=h>-1?m[h]:null)&&zr(_))}function zr(h){if(typeof h!="number"&&h&&!h.da){var m=h.src;if(m&&m[fe])zt(m.i,h);else{var _=h.type,P=h.proxy;m.removeEventListener?m.removeEventListener(_,P,h.capture):m.detachEvent?m.detachEvent(nr(_),P):m.addListener&&m.removeListener&&m.removeListener(P),(_=ps(m))?(zt(_,h),_.h==0&&(_.src=null,m[Ke]=null)):U(h)}}}function nr(h){return h in Nt?Nt[h]:Nt[h]="on"+h}function Lo(h,m){if(h.da)h=!0;else{m=new de(m,this);const _=h.listener,P=h.ha||h.src;h.fa&&zr(h),h=_.call(P,m)}return h}function ps(h){return h=h[Ke],h instanceof lt?h:null}var Vo="__closure_events_fn_"+(Math.random()*1e9>>>0);function ms(h){return typeof h=="function"?h:(h[Vo]||(h[Vo]=function(m){return h.handleEvent(m)}),h[Vo])}function Oe(){C.call(this),this.i=new lt(this),this.M=this,this.G=null}d(Oe,C),Oe.prototype[fe]=!0,Oe.prototype.removeEventListener=function(h,m,_,P){_r(this,h,m,_,P)};function et(h,m){var _,P=h.G;if(P)for(_=[];P;P=P.G)_.push(P);if(h=h.M,P=m.type||m,typeof m=="string")m=new A(m,h);else if(m instanceof A)m.target=m.target||h;else{var V=m;m=new A(P,h),hn(m,V)}V=!0;let B,K;if(_)for(K=_.length-1;K>=0;K--)B=m.g=_[K],V=Nn(B,P,!0,m)&&V;if(B=m.g=h,V=Nn(B,P,!0,m)&&V,V=Nn(B,P,!1,m)&&V,_)for(K=0;K<_.length;K++)B=m.g=_[K],V=Nn(B,P,!1,m)&&V}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var h=this.i;for(const m in h.g){const _=h.g[m];for(let P=0;P<_.length;P++)U(_[P]);delete h.g[m],h.h--}}this.G=null},Oe.prototype.J=function(h,m,_,P){return this.i.add(String(h),m,!1,_,P)},Oe.prototype.K=function(h,m,_,P){return this.i.add(String(h),m,!0,_,P)};function Nn(h,m,_,P){if(m=h.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let B=0;B<m.length;++B){const K=m[B];if(K&&!K.da&&K.capture==_){const pe=K.listener,Rt=K.ha||K.src;K.fa&&zt(h.i,K),V=pe.call(Rt,P)!==!1&&V}}return V&&!P.defaultPrevented}function rr(h,m){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(h,m||0)}function gs(h){h.g=rr(()=>{h.g=null,h.i&&(h.i=!1,gs(h))},h.l);const m=h.h;h.h=null,h.m.apply(null,m)}class Fo extends C{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:gs(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(h){C.call(this),this.h=h,this.g={}}d(wr,C);var Bo=[];function il(h){Y(h.g,function(m,_){this.g.hasOwnProperty(_)&&zr(m)},h),h.g={}}wr.prototype.N=function(){wr.Z.N.call(this),il(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=o.JSON.stringify,mc=o.JSON.parse,sl=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function ol(){}function jo(){}var Ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vs(){A.call(this,"d")}d(vs,A);function Ue(){A.call(this,"c")}d(Ue,A);var ir={},al=null;function Ci(){return al=al||new Oe}ir.Ia="serverreachability";function ll(h){A.call(this,ir.Ia,h)}d(ll,A);function Wr(h){const m=Ci();et(m,new ll(m))}ir.STAT_EVENT="statevent";function ul(h,m){A.call(this,ir.STAT_EVENT,h),this.stat=m}d(ul,A);function ee(h){const m=Ci();et(m,new ul(m,h))}ir.Ja="timingevent";function Qe(h,m){A.call(this,ir.Ja,h),this.size=m}d(Qe,A);function Lt(h,m){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},m)}function Sr(){this.g=!0}Sr.prototype.ua=function(){this.g=!1};function Hr(h,m,_,P,V,B){h.info(function(){if(h.g)if(B){var K="",pe=B.split("&");for(let $e=0;$e<pe.length;$e++){var Rt=pe[$e].split("=");if(Rt.length>1){const Vt=Rt[0];Rt=Rt[1];const Xr=Vt.split("_");K=Xr.length>=2&&Xr[1]=="type"?K+(Vt+"="+Rt+"&"):K+(Vt+"=redacted&")}}}else K=null;else K=B;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+m+`
`+_+`
`+K})}function cl(h,m,_,P,V,B,K){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+m+`
`+_+`
`+B+" "+K})}function xi(h,m,_,P){h.info(function(){return"XMLHTTP TEXT ("+m+"): "+bf(h,_)+(P?" "+P:"")})}function Tv(h,m){h.info(function(){return"TIMEOUT: "+m})}Sr.prototype.info=function(){};function bf(h,m){if(!h.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(h=0;h<B.length;h++)if(Array.isArray(B[h])){var _=B[h];if(!(_.length<2)){var P=_[1];if(Array.isArray(P)&&!(P.length<1)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<P.length;K++)P[K]=""}}}}return ys(B)}catch{return m}}var hl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},If;function dl(){}d(dl,ol),dl.prototype.g=function(){return new XMLHttpRequest},If=new dl;function Uo(h){return encodeURIComponent(String(h))}function Rf(h){var m=1;h=h.split(":");const _=[];for(;m>0&&h.length;)_.push(h.shift()),m--;return h.length&&_.push(h.join(":")),_}function Kr(h,m,_,P){this.j=h,this.i=m,this.l=_,this.S=P||1,this.V=new wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var zo={},fl={};function yc(h,m,_){h.M=1,h.A=Wo(Vn(m)),h.u=_,h.R=!0,vc(h,null)}function vc(h,m){h.F=Date.now(),Q(h),h.B=Vn(h.A);var _=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),Pc(_.i,"t",P),h.C=0,_=h.j.L,h.h=new $o,h.g=lR(h.j,_?m:null,!h.u),h.P>0&&(h.O=new Fo(u(h.Y,h,h.g),h.P)),m=h.V,_=h.g,P=h.ba;var V="readystatechange";Array.isArray(V)||(V&&(Bo[0]=V.toString()),V=Bo);for(let B=0;B<V.length;B++){const K=Mn(_,V[B],P||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=h.J?we(h.J):{},h.u?(h.v||(h.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,m)):(h.v="GET",h.g.ea(h.B,h.v,null,m)),Wr(),Hr(h.i,h.v,h.B,h.l,h.S,h.u)}Kr.prototype.ba=function(h){h=h.target;const m=this.O;m&&Rs(h)==3?m.j():this.Y(h)},Kr.prototype.Y=function(h){try{if(h==this.g)e:{const pe=Rs(this.g),Rt=this.g.ya(),$e=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||YI(this.g)))){this.K||pe!=4||Rt==7||(Rt==8||$e<=0?Wr(3):Wr(2)),Ln(this);var m=this.g.ca();this.X=m;var _=bv(this);if(this.o=m==200,cl(this.i,this.v,this.B,this.l,this.S,pe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var P,V=this.g;if((P=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(P)){var B=P;break t}}B=null}if(h=B)xi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pl(this,h);else{this.o=!1,this.m=3,ee(12),qr(this),ws(this);break e}}if(this.R){h=!0;let Vt;for(;!this.K&&this.C<_.length;)if(Vt=Cf(this,_),Vt==fl){pe==4&&(this.m=4,ee(14),h=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==zo){this.m=4,ee(15),xi(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else xi(this.i,this.l,Vt,null),pl(this,Vt);if(_s(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||_.length!=0||this.h.h||(this.m=1,ee(16),h=!1),this.o=this.o&&h,!h)xi(this.i,this.l,_,"[Invalid Chunked Response]"),qr(this),ws(this);else if(_.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Cv(K),K.P=!0,ee(11))}}else xi(this.i,this.l,_,null),pl(this,_);pe==4&&qr(this),this.o&&!this.K&&(pe==4?iR(this.j,this):(this.o=!1,Q(this)))}else gU(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ee(12)):(this.m=0,ee(13)),qr(this),ws(this)}}}catch{}finally{}};function bv(h){if(!_s(h))return h.g.la();const m=YI(h.g);if(m==="")return"";let _="";const P=m.length,V=Rs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return qr(h),ws(h),"";h.h.i=new o.TextDecoder}for(let B=0;B<P;B++)h.h.h=!0,_+=h.h.i.decode(m[B],{stream:!(V&&B==P-1)});return m.length=0,h.h.g+=_,h.C=0,h.h.g}function _s(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Cf(h,m){var _=h.C,P=m.indexOf(`
`,_);return P==-1?fl:(_=Number(m.substring(_,P)),isNaN(_)?zo:(P+=1,P+_>m.length?fl:(m=m.slice(P,P+_),h.C=P+_,m)))}Kr.prototype.cancel=function(){this.K=!0,qr(this)};function Q(h){h.T=Date.now()+h.H,xf(h,h.H)}function xf(h,m){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Lt(u(h.aa,h),m)}function Ln(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Kr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Tv(this.i,this.B),this.M!=2&&(Wr(),ee(17)),qr(this),this.m=2,ws(this)):xf(this,this.T-h)};function ws(h){h.j.I==0||h.K||iR(h.j,h)}function qr(h){Ln(h);var m=h.O;m&&typeof m.dispose=="function"&&m.dispose(),h.O=null,il(h.V),h.g&&(m=h.g,h.g=null,m.abort(),m.dispose())}function pl(h,m){try{var _=h.j;if(_.I!=0&&(_.g==h||ml(_.h,h))){if(!h.L&&ml(_.h,h)&&_.I==3){try{var P=_.Ba.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Wf(_),$f(_);else break e;Rv(_),ee(18)}}else _.xa=V[1],0<_.xa-_.K&&V[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Lt(u(_.Va,_),6e3));Sc(_.h)<=1&&_.ta&&(_.ta=void 0)}else qo(_,11)}else if((h.L||_.g==h)&&Wf(_),!D(m))for(V=_.Ba.g.parse(m),m=0;m<V.length;m++){let $e=V[m];const Vt=$e[0];if(!(Vt<=_.K))if(_.K=Vt,$e=$e[1],_.I==2)if($e[0]=="c"){_.M=$e[1],_.ba=$e[2];const Xr=$e[3];Xr!=null&&(_.ka=Xr,_.j.info("VER="+_.ka));const Go=$e[4];Go!=null&&(_.za=Go,_.j.info("SVER="+_.za));const Cs=$e[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(P=1.5*Cs,_.O=P,_.j.info("backChannelRequestTimeoutMs_="+P)),P=_;const xs=h.g;if(xs){const Kf=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kf){var B=P.h;B.g||Kf.indexOf("spdy")==-1&&Kf.indexOf("quic")==-1&&Kf.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(gl(B,B.h),B.h=null))}if(P.G){const xv=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;xv&&(P.wa=xv,Be(P.J,P.G,xv))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),P=_;var K=h;if(P.na=aR(P,P.L?P.ba:null,P.W),K.L){Ec(P.h,K);var pe=K,Rt=P.O;Rt&&(pe.H=Rt),pe.D&&(Ln(pe),Q(pe)),P.g=K}else nR(P);_.i.length>0&&zf(_)}else $e[0]!="stop"&&$e[0]!="close"||qo(_,7);else _.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?qo(_,7):Iv(_):$e[0]!="noop"&&_.l&&_.l.qa($e),_.A=0)}}Wr(4)}catch{}}var Af=class{constructor(h,m){this.g=h,this.map=m}};function _c(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Sc(h){return h.h?1:h.g?h.g.size:0}function ml(h,m){return h.h?h.h==m:h.g?h.g.has(m):!1}function gl(h,m){h.g?h.g.add(m):h.h=m}function Ec(h,m){h.h&&h.h==m?h.h=null:h.g&&h.g.has(m)&&h.g.delete(m)}_c.prototype.cancel=function(){if(this.i=Tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let m=h.i;for(const _ of h.g.values())m=m.concat(_.G);return m}return p(h.i)}var bc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pf(h,m){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const P=h[_].indexOf("=");let V,B=null;P>=0?(V=h[_].substring(0,P),B=h[_].substring(P+1)):V=h[_],m(V,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Er(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;h instanceof Er?(this.l=h.l,Ss(this,h.j),this.o=h.o,this.g=h.g,Es(this,h.u),this.h=h.h,yl(this,kc(h.i)),this.m=h.m):h&&(m=String(h).match(bc))?(this.l=!1,Ss(this,m[1]||"",!0),this.o=Ts(m[2]||""),this.g=Ts(m[3]||"",!0),Es(this,m[4]),this.h=Ts(m[5]||"",!0),yl(this,m[6]||"",!0),this.m=Ts(m[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}Er.prototype.toString=function(){const h=[];var m=this.j;m&&h.push(bs(m,Rc,!0),":");var _=this.g;return(_||m=="file")&&(h.push("//"),(m=this.o)&&h.push(bs(m,Rc,!0),"@"),h.push(Uo(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(bs(_,_.charAt(0)=="/"?Df:kf,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",bs(_,Mf)),h.join("")},Er.prototype.resolve=function(h){const m=Vn(this);let _=!!h.j;_?Ss(m,h.j):_=!!h.o,_?m.o=h.o:_=!!h.g,_?m.g=h.g:_=h.u!=null;var P=h.h;if(_)Es(m,h.u);else if(_=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var V=m.h.lastIndexOf("/");V!=-1&&(P=m.h.slice(0,V+1)+P)}if(V=P,V==".."||V==".")P="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){P=V.lastIndexOf("/",0)==0,V=V.split("/");const B=[];for(let K=0;K<V.length;){const pe=V[K++];pe=="."?P&&K==V.length&&B.push(""):pe==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),P&&K==V.length&&B.push("")):(B.push(pe),P=!0)}P=B.join("/")}else P=V}return _?m.h=P:_=h.i.toString()!=="",_?yl(m,kc(h.i)):_=!!h.m,_&&(m.m=h.m),m};function Vn(h){return new Er(h)}function Ss(h,m,_){h.j=_?Ts(m,!0):m,h.j&&(h.j=h.j.replace(/:$/,""))}function Es(h,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);h.u=m}else h.u=null}function yl(h,m,_){m instanceof Is?(h.i=m,Nf(h.i,h.l)):(_||(m=bs(m,Of)),h.i=new Is(m,h.l))}function Be(h,m,_){h.i.set(m,_)}function Wo(h){return Be(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ts(h,m){return h?m?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function bs(h,m,_){return typeof h=="string"?(h=encodeURI(h).replace(m,Ic),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ic(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Rc=/[#\/\?@]/g,kf=/[#\?:]/g,Df=/[#\?]/g,Of=/[#\?@]/g,Mf=/#/g;function Is(h,m){this.h=this.g=null,this.i=h||null,this.j=!!m}function Gr(h){h.g||(h.g=new Map,h.h=0,h.i&&Pf(h.i,function(m,_){h.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=Is.prototype,t.add=function(h,m){Gr(this),this.i=null,h=Ai(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(m),this.h+=1,this};function Cc(h,m){Gr(h),m=Ai(h,m),h.g.has(m)&&(h.i=null,h.h-=h.g.get(m).length,h.g.delete(m))}function xc(h,m){return Gr(h),m=Ai(h,m),h.g.has(m)}t.forEach=function(h,m){Gr(this),this.g.forEach(function(_,P){_.forEach(function(V){h.call(m,V,P,this)},this)},this)};function Ac(h,m){Gr(h);let _=[];if(typeof m=="string")xc(h,m)&&(_=_.concat(h.g.get(Ai(h,m))));else for(h=Array.from(h.g.values()),m=0;m<h.length;m++)_=_.concat(h[m]);return _}t.set=function(h,m){return Gr(this),this.i=null,h=Ai(this,h),xc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[m]),this.h+=1,this},t.get=function(h,m){return h?(h=Ac(this,h),h.length>0?String(h[0]):m):m};function Pc(h,m,_){Cc(h,m),_.length>0&&(h.i=null,h.g.set(Ai(h,m),p(_)),h.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],m=Array.from(this.g.keys());for(let P=0;P<m.length;P++){var _=m[P];const V=Uo(_);_=Ac(this,_);for(let B=0;B<_.length;B++){let K=V;_[B]!==""&&(K+="="+Uo(_[B])),h.push(K)}}return this.i=h.join("&")};function kc(h){const m=new Is;return m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),m}function Ai(h,m){return m=String(m),h.j&&(m=m.toLowerCase()),m}function Nf(h,m){m&&!h.j&&(Gr(h),h.i=null,h.g.forEach(function(_,P){const V=P.toLowerCase();P!=V&&(Cc(this,P),Pc(this,V,_))},h)),h.j=m}function Lf(h,m){const _=new Sr;if(o.Image){const P=new Image;P.onload=c(Tr,_,"TestLoadImage: loaded",!0,m,P),P.onerror=c(Tr,_,"TestLoadImage: error",!1,m,P),P.onabort=c(Tr,_,"TestLoadImage: abort",!1,m,P),P.ontimeout=c(Tr,_,"TestLoadImage: timeout",!1,m,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else m(!1)}function Vf(h,m){const _=new Sr,P=new AbortController,V=setTimeout(()=>{P.abort(),Tr(_,"TestPingServer: timeout",!1,m)},1e4);fetch(h,{signal:P.signal}).then(B=>{clearTimeout(V),B.ok?Tr(_,"TestPingServer: ok",!0,m):Tr(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),Tr(_,"TestPingServer: error",!1,m)})}function Tr(h,m,_,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(_)}catch{}}function Ff(){this.g=new sl}function vl(h){this.i=h.Sb||null,this.h=h.ab||!1}d(vl,ol),vl.prototype.g=function(){return new Ho(this.i,this.h)};function Ho(h,m){Oe.call(this),this.H=h,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Ho,Oe),t=Ho.prototype,t.open=function(h,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=m,this.readyState=1,Ko(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(m.body=h),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ko(this)),this.g&&(this.readyState=3,Ko(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dc(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dc(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var m=h.value?h.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!h.done}))&&(this.response=this.responseText+=m)}h.done?Pi(this):Ko(this),this.readyState==3&&Dc(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Pi(this))},t.Na=function(h){this.g&&(this.response=h,Pi(this))},t.ga=function(){this.g&&Pi(this)};function Pi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ko(h)}t.setRequestHeader=function(h,m){this.A.append(h,m)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=m.next();return h.join(`\r
`)};function Ko(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Oc(h){let m="";return Y(h,function(_,P){m+=P,m+=":",m+=_,m+=`\r
`}),m}function _l(h,m,_){e:{for(P in _){var P=!1;break e}P=!0}P||(_=Oc(_),typeof h=="string"?_!=null&&Uo(_):Be(h,m,_))}function qe(h){Oe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(qe,Oe);var Bf=/^https?$/i,jf=["POST","PUT"];t=qe.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,m,_,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);m=m?m.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():If.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(h),!0),this.B=!1}catch(B){GI(this,B);return}if(h=_||"",_=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)_.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const B of P.keys())_.set(B,P.get(B));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),V=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(jf,m,void 0)>=0)||P||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of _)this.g.setRequestHeader(B,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(B){GI(this,B)}};function GI(h,m){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=m,h.o=5,XI(h),Uf(h)}function XI(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,et(this,"complete"),et(this,"abort"),Uf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uf(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?QI(this):this.Xa())},t.Xa=function(){QI(this)};function QI(h){if(h.h&&typeof s<"u"){if(h.v&&Rs(h)==4)setTimeout(h.Ca.bind(h),0);else if(et(h,"readystatechange"),Rs(h)==4){h.h=!1;try{const B=h.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var P;if(P=B===0){let K=String(h.D).match(bc)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),P=!Bf.test(K?K.toLowerCase():"")}_=P}if(_)et(h,"complete"),et(h,"success");else{h.o=6;try{var V=Rs(h)>2?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.ca()+"]",XI(h)}}finally{Uf(h)}}}}function Uf(h,m){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,m||et(h,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rs(h){return h.g?h.g.readyState:0}t.ca=function(){try{return Rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var m=this.g.responseText;return h&&m.indexOf(h)==0&&(m=m.substring(h.length)),mc(m)}};function YI(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function gU(h){const m={};h=(h.g&&Rs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(D(h[P]))continue;var _=Rf(h[P]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=m[V]||[];m[V]=B,B.push(_)}ie(m,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mc(h,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||m}function JI(h){this.za=0,this.i=[],this.j=new Sr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mc("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mc("baseRetryDelayMs",5e3,h),this.Za=Mc("retryDelaySeedMs",1e4,h),this.Ta=Mc("forwardChannelMaxRetries",2,h),this.va=Mc("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new _c(h&&h.concurrentRequestLimit),this.Ba=new Ff,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=JI.prototype,t.ka=8,t.I=1,t.connect=function(h,m,_,P){ee(0),this.W=h,this.H=m||{},_&&P!==void 0&&(this.H.OSID=_,this.H.OAID=P),this.F=this.X,this.J=aR(this,null,this.W),zf(this)};function Iv(h){if(ZI(h),h.I==3){var m=h.V++,_=Vn(h.J);if(Be(_,"SID",h.M),Be(_,"RID",m),Be(_,"TYPE","terminate"),Nc(h,_),m=new Kr(h,h.j,m),m.M=2,m.A=Wo(Vn(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=m.A,_=!0),_||(m.g=lR(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Q(m)}oR(h)}function $f(h){h.g&&(Cv(h),h.g.cancel(),h.g=null)}function ZI(h){$f(h),h.v&&(o.clearTimeout(h.v),h.v=null),Wf(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function zf(h){if(!wc(h.h)&&!h.m){h.m=!0;var m=h.Ea;O||v(),k||(O(),k=!0),T.add(m,h),h.D=0}}function yU(h,m){return Sc(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=m.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Lt(u(h.Ea,h,m),sR(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const V=new Kr(this,this.j,h);let B=this.o;if(this.U&&(B?(B=we(B),hn(B,this.U)):B=this.U),this.u!==null||this.R||(V.J=B,B=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var P=this.i[_];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=tR(this,V,m),_=Vn(this.J),Be(_,"RID",h),Be(_,"CVER",22),this.G&&Be(_,"X-HTTP-Session-Id",this.G),Nc(this,_),B&&(this.R?m="headers="+Uo(Oc(B))+"&"+m:this.u&&_l(_,this.u,B)),gl(this.h,V),this.Ra&&Be(_,"TYPE","init"),this.S?(Be(_,"$req",m),Be(_,"SID","null"),V.U=!0,yc(V,_,null)):yc(V,_,m),this.I=2}}else this.I==3&&(h?eR(this,h):this.i.length==0||wc(this.h)||eR(this))};function eR(h,m){var _;m?_=m.l:_=h.V++;const P=Vn(h.J);Be(P,"SID",h.M),Be(P,"RID",_),Be(P,"AID",h.K),Nc(h,P),h.u&&h.o&&_l(P,h.u,h.o),_=new Kr(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),m&&(h.i=m.G.concat(h.i)),m=tR(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),gl(h.h,_),yc(_,P,m)}function Nc(h,m){h.H&&Y(h.H,function(_,P){Be(m,P,_)}),h.l&&Y({},function(_,P){Be(m,P,_)})}function tR(h,m,_){_=Math.min(h.i.length,_);const P=h.l?u(h.l.Ka,h.l,h):null;e:{var V=h.i;let pe=-1;for(;;){const Rt=["count="+_];pe==-1?_>0?(pe=V[0].g,Rt.push("ofs="+pe)):pe=0:Rt.push("ofs="+pe);let $e=!0;for(let Vt=0;Vt<_;Vt++){var B=V[Vt].g;const Xr=V[Vt].map;if(B-=pe,B<0)pe=Math.max(0,V[Vt].g-100),$e=!1;else try{B="req"+B+"_"||"";try{var K=Xr instanceof Map?Xr:Object.entries(Xr);for(const[Go,Cs]of K){let xs=Cs;a(Cs)&&(xs=ys(Cs)),Rt.push(B+Go+"="+encodeURIComponent(xs))}}catch(Go){throw Rt.push(B+"type="+encodeURIComponent("_badmap")),Go}}catch{P&&P(Xr)}}if($e){K=Rt.join("&");break e}}K=void 0}return h=h.i.splice(0,_),m.G=h,K}function nR(h){if(!h.g&&!h.v){h.Y=1;var m=h.Da;O||v(),k||(O(),k=!0),T.add(m,h),h.A=0}}function Rv(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Lt(u(h.Da,h),sR(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,rR(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Lt(u(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ee(10),$f(this),rR(this))};function Cv(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function rR(h){h.g=new Kr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var m=Vn(h.na);Be(m,"RID","rpc"),Be(m,"SID",h.M),Be(m,"AID",h.K),Be(m,"CI",h.F?"0":"1"),!h.F&&h.ia&&Be(m,"TO",h.ia),Be(m,"TYPE","xmlhttp"),Nc(h,m),h.u&&h.o&&_l(m,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Wo(Vn(m)),_.u=null,_.R=!0,vc(_,h)}t.Va=function(){this.C!=null&&(this.C=null,$f(this),Rv(this),ee(19))};function Wf(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function iR(h,m){var _=null;if(h.g==m){Wf(h),Cv(h),h.g=null;var P=2}else if(ml(h.h,m))_=m.G,Ec(h.h,m),P=1;else return;if(h.I!=0){if(m.o)if(P==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var V=h.D;P=Ci(),et(P,new Qe(P,_)),zf(h)}else nR(h);else if(V=m.m,V==3||V==0&&m.X>0||!(P==1&&yU(h,m)||P==2&&Rv(h)))switch(_&&_.length>0&&(m=h.h,m.i=m.i.concat(_)),V){case 1:qo(h,5);break;case 4:qo(h,10);break;case 3:qo(h,6);break;default:qo(h,2)}}}function sR(h,m){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*m}function qo(h,m){if(h.j.info("Error code "+m),m==2){var _=u(h.bb,h),P=h.Ua;const V=!P;P=new Er(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ss(P,"https"),Wo(P),V?Lf(P.toString(),_):Vf(P.toString(),_)}else ee(2);h.I=0,h.l&&h.l.pa(m),oR(h),ZI(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function oR(h){if(h.I=0,h.ja=[],h.l){const m=Tc(h.h);(m.length!=0||h.i.length!=0)&&(g(h.ja,m),g(h.ja,h.i),h.h.i.length=0,p(h.i),h.i.length=0),h.l.oa()}}function aR(h,m,_){var P=_ instanceof Er?Vn(_):new Er(_);if(P.g!="")m&&(P.g=m+"."+P.g),Es(P,P.u);else{var V=o.location;P=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const B=new Er(null);P&&Ss(B,P),m&&(B.g=m),V&&Es(B,V),_&&(B.h=_),P=B}return _=h.G,m=h.wa,_&&m&&Be(P,_,m),Be(P,"VER",h.ka),Nc(h,P),P}function lR(h,m,_){if(m&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=h.Aa&&!h.ma?new qe(new vl({ab:_})):new qe(h.ma),m.Fa(h.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uR(){}t=uR.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Hf(){}Hf.prototype.g=function(h,m){return new Fn(h,m)};function Fn(h,m){Oe.call(this),this.g=new JI(m),this.l=h,this.h=m&&m.messageUrlParams||null,h=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(h?h["X-WebChannel-Content-Type"]=m.messageContentType:h={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(h?h["X-WebChannel-Client-Profile"]=m.sa:h={"X-WebChannel-Client-Profile":m.sa}),this.g.U=h,(h=m&&m.Qb)&&!D(h)&&(this.g.u=h),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!D(m)&&(this.g.G=m,h=this.h,h!==null&&m in h&&(h=this.h,m in h&&delete h[m])),this.j=new wl(this)}d(Fn,Oe),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Iv(this.g)},Fn.prototype.o=function(h){var m=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=ys(h),h=_);m.i.push(new Af(m.Ya++,h)),m.I==3&&zf(m)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Iv(this.g),delete this.g,Fn.Z.N.call(this)};function cR(h){vs.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var m=h.__sm__;if(m){e:{for(const _ in m){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,m=m!==null&&h in m?m[h]:void 0),this.data=m}else this.data=h}d(cR,vs);function hR(){Ue.call(this),this.status=1}d(hR,Ue);function wl(h){this.g=h}d(wl,uR),wl.prototype.ra=function(){et(this.g,"a")},wl.prototype.qa=function(h){et(this.g,new cR(h))},wl.prototype.pa=function(h){et(this.g,new hR)},wl.prototype.oa=function(){et(this.g,"b")},Hf.prototype.createWebChannel=Hf.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,LN=function(){return new Hf},NN=function(){return Ci()},MN=ir,HS={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,om=hl,gc.COMPLETE="complete",ON=gc,jo.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,lh=jo,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,DN=qe}).apply(typeof _p<"u"?_p:typeof self<"u"?self:typeof window<"u"?window:{});const Kx="@firebase/firestore",qx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new AT("@firebase/firestore");function Ol(){return Ba.logLevel}function $(t,...e){if(Ba.logLevel<=Ee.DEBUG){const n=e.map(kT);Ba.debug(`Firestore (${tc}): ${t}`,...n)}}function vt(t,...e){if(Ba.logLevel<=Ee.ERROR){const n=e.map(kT);Ba.error(`Firestore (${tc}): ${t}`,...n)}}function bd(t,...e){if(Ba.logLevel<=Ee.WARN){const n=e.map(kT);Ba.warn(`Firestore (${tc}): ${t}`,...n)}}function kT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,VN(t,r,n)}function VN(t,e,n){let r=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vt(r),new Error(r)}function re(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||VN(e,i,r)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class GK{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string",31837,{l:r}),new KK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class XK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new XK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YK{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){re(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Gx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Gx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=JK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function KS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return D_(i)===D_(s)?he(i,s):D_(i)?1:-1}return he(t.length,e.length)}const ZK=55296,eq=57343;function D_(t){const e=t.charCodeAt(0);return e>=ZK&&e<=eq}function Pu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function FN(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="__name__";class ei{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ei.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=ei.isNumericId(e),i=ei.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ei.extractNumericId(e).compare(ei.extractNumericId(n)):KS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}}class ke extends ei{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const tq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends ei{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return tq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xx}static keyField(){return new nt([Xx])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ke.fromString(e))}static fromName(e){return new q(ke.fromString(e).popFirst(5))}static empty(){return new q(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e,n){if(!n)throw new W(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nq(t,e,n,r){if(e===!0&&r===!0)throw new W(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Qx(t){if(!q.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yx(t){if(q.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function My(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Zi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=My(t);throw new W(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rq(t,e){if(e<=0)throw new W(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function sf(t,e){if(!jN(t))throw new W(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=-62135596800,Zx=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Zx);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jx)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zx}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sf(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:bt("string",Ne._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ne(0,0))}static max(){return new ae(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=-1;class vg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function qS(t){return t.fields.find(e=>e.kind===2)}function ra(t){return t.fields.filter(e=>e.kind!==2)}vg.UNKNOWN_ID=-1;class am{constructor(e,n){this.fieldPath=e,this.kind=n}}class Id{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Id(0,Zn.min())}}function UN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new Zn(i,q.empty(),e)}function $N(t){return new Zn(t.readTime,t.key,ku)}class Zn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zn(ae.min(),q.empty(),ku)}static max(){return new Zn(ae.max(),q.empty(),ku)}}function OT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==zN)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="SimpleDb";class Ny{static open(e,n,r,i){try{return new Ny(n,e.transaction(i,r))}catch(s){throw new Vh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new pi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Vh(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=MT(r.target.error);this.S.reject(new Vh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(zn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new sq(n)}}class fo{static delete(e){return $(zn,"Removing database:",e),aa(gN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!bN())return!1;if(fo.F())return!0;const e=Ot(),n=fo.M(e),r=0<n&&n<10,i=HN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,fo.M(Ot())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(zn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Vh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new W(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new W(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vh(e,o))},i.onupgradeneeded=s=>{$(zn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{$(zn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Ny.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if($(zn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function HN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class iq{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return aa(this.U.delete())}}class Vh extends W{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Po(t){return t.name==="IndexedDbTransactionError"}class sq{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($(zn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):($(zn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return $(zn,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next(n=>(n===void 0&&(n=null),$(zn,"GET",this.store.name,e,n),n))}delete(e){return $(zn,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return $(zn,"COUNT",this.store.name),aa(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){$(zn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=MT(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new iq(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const c=u.catch(d=>(l.done(),L.reject(d)));r.push(c)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function aa(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=MT(r.target.error);n(i)}})}let eA=!1;function MT(t){const e=fo.M(Ot());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eA||(eA=!0,setTimeout(()=>{throw r},0)),r}}return t}const Fh="IndexBackfiller";class oq{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(Fh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();$(Fh,`Documents written: ${n}`)}catch(n){Po(n)?$(Fh,"Ignoring IndexedDB error during index backfill: ",n):await Ao(n)}await this.re(6e4)})}}class aq{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $(Fh,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>($(Fh,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=$N(s);OT(o,r)>0&&(r=o)}),new Zn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;function Ly(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function KN(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="";function ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tA(e)),e=lq(t.get(n),e);return tA(e)}function lq(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case _g:n+="";break;default:n+=s}}return n}function tA(t){return t+_g+""}function li(t){const e=t.length;if(re(e>=2,64408,{path:t}),e===2)return re(t.charAt(0)===_g&&t.charAt(1)==="",56145,{path:t}),ke.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(_g,s);switch((o<0||o>n)&&Z(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Z(61167,{path:t})}s=o+2}return new ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="remoteDocuments",of="owner",Tl="owner",Cd="mutationQueues",uq="userId",Or="mutations",nA="batchId",va="userMutationsIndex",rA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e){return[t,ln(e)]}function qN(t,e,n){return[t,ln(e),n]}const cq={},Du="documentMutations",wg="remoteDocumentsV14",hq=["prefixPath","collectionGroup","readTime","documentId"],um="documentKeyIndex",dq=["prefixPath","collectionGroup","documentId"],GN="collectionGroupIndex",fq=["collectionGroup","readTime","prefixPath","documentId"],xd="remoteDocumentGlobal",GS="remoteDocumentGlobalKey",Ou="targets",XN="queryTargetsIndex",pq=["canonicalId","targetId"],Mu="targetDocuments",mq=["targetId","path"],NT="documentTargetsIndex",gq=["path","targetId"],Sg="targetGlobalKey",Ra="targetGlobal",Ad="collectionParents",yq=["collectionId","parent"],Nu="clientMetadata",vq="clientId",Vy="bundles",_q="bundleId",Fy="namedQueries",wq="name",LT="indexConfiguration",Sq="indexId",XS="collectionGroupIndex",Eq="collectionGroup",Bh="indexState",Tq=["indexId","uid"],QN="sequenceNumberIndex",bq=["uid","sequenceNumber"],jh="indexEntries",Iq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YN="documentKeyIndex",Rq=["indexId","uid","orderedDocumentKey"],By="documentOverlays",Cq=["userId","collectionPath","documentId"],QS="collectionPathOverlayIndex",xq=["userId","collectionPath","largestBatchId"],JN="collectionGroupOverlayIndex",Aq=["userId","collectionGroup","largestBatchId"],VT="globals",Pq="name",ZN=[Cd,Or,Du,ia,Ou,of,Ra,Mu,Nu,xd,Ad,Vy,Fy],kq=[...ZN,By],eL=[Cd,Or,Du,wg,Ou,of,Ra,Mu,Nu,xd,Ad,Vy,Fy,By],tL=eL,FT=[...tL,LT,Bh,jh],Dq=FT,nL=[...FT,VT],Oq=nL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS extends WN{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Mt(t,e){const n=ne(t);return fo.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ko(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wp(this.root,e,this.comparator,!1)}getReverseIterator(){return new wp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wp(this.root,e,this.comparator,!0)}}class wp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=i??Gt.EMPTY,this.right=s??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sA(this.data.getIterator())}getIteratorFrom(e){return new sA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class sA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Fe(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iL("Invalid base64 string: "+s):s}}(e);return new wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const Mq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(re(!!t,39018),typeof t=="string"){let e=0;const n=Mq.exec(t);if(re(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="server_timestamp",oL="__type__",aL="__previous_value__",lL="__local_write_time__";function jy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oL])==null?void 0:r.stringValue)===sL}function Uy(t){const e=t.mapValue.fields[aL];return jy(e)?Uy(e):e}function Pd(t){const e=es(t.mapValue.fields[lL].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const Eg="(default)";class ja{constructor(e,n){this.projectId=e,this.database=n||Eg}static empty(){return new ja("","")}get isDefaultDatabase(){return this.database===Eg}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="__type__",uL="__max__",eo={mapValue:{fields:{__type__:{stringValue:uL}}}},jT="__vector__",Lu="value",cm={nullValue:"NULL_VALUE"};function vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jy(t)?4:cL(t)?9007199254740991:$y(t)?10:11:Z(28295,{value:t})}function Ei(t,e){if(t===e)return!0;const n=vo(t);if(n!==vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pd(t).isEqual(Pd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=es(i.timestampValue),a=es(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Rd(o)===Rd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Pu(t.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(iA(o)!==iA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ei(o[l],a[l])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function kd(t,e){return(t.values||[]).find(n=>Ei(n,e))!==void 0}function _o(t,e){if(t===e)return 0;const n=vo(t),r=vo(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return oA(t.timestampValue,e.timestampValue);case 4:return oA(Pd(t),Pd(e));case 5:return KS(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ts(s),l=ts(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=he(a[u],l[u]);if(c!==0)return c}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Ye(s.latitude),Ye(o.latitude));return a!==0?a:he(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,p,g,E;const a=s.fields||{},l=o.fields||{},u=(f=a[Lu])==null?void 0:f.arrayValue,c=(p=l[Lu])==null?void 0:p.arrayValue,d=he(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((E=c==null?void 0:c.values)==null?void 0:E.length)||0);return d!==0?d:aA(u,c)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===eo.mapValue&&o===eo.mapValue)return 0;if(s===eo.mapValue)return 1;if(o===eo.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=KS(l[d],c[d]);if(f!==0)return f;const p=_o(a[l[d]],u[c[d]]);if(p!==0)return p}return he(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function oA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=es(t),r=es(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function aA(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_o(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Vu(t){return JS(t)}function JS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=JS(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${JS(n.fields[o])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function hm(t){switch(vo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uy(t);return e?16+hm(e):16;case 5:return 2*t.stringValue.length;case 6:return ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+hm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ko(r.fields,(s,o)=>{i+=s.length+hm(o)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function Ua(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ZS(t){return!!t&&"integerValue"in t}function Dd(t){return!!t&&"arrayValue"in t}function lA(t){return!!t&&"nullValue"in t}function uA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dm(t){return!!t&&"mapValue"in t}function $y(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[BT])==null?void 0:r.stringValue)===jT}function Uh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ko(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uh(t.arrayValue.values[n]);return e}return{...t}}function cL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uL}const hL={mapValue:{fields:{[BT]:{stringValue:jT},[Lu]:{arrayValue:{}}}}};function Lq(t){return"nullValue"in t?cm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ua(ja.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?$y(t)?hL:{mapValue:{}}:Z(35942,{value:t})}function Vq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ua(ja.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?hL:"mapValue"in t?$y(t)?{mapValue:{}}:eo:Z(61959,{value:t})}function cA(t,e){const n=_o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function hA(t,e){const n=_o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uh(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Uh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());dm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ko(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new on(Uh(this.value))}}function dL(t){const e=[];return ko(t.fields,(n,r)=>{const i=new nt([n]);if(dm(r)){const s=dL(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,ae.min(),ae.min(),ae.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,ae.min(),ae.min(),on.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,ae.min(),ae.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.position=e,this.inclusive=n}}function dA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=_o(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{}class Te extends fL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bq(e,n,r):n==="array-contains"?new $q(e,r):n==="in"?new _L(e,r):n==="not-in"?new zq(e,r):n==="array-contains-any"?new Wq(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jq(e,r):new Uq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_o(n,this.value)):n!==null&&vo(this.value)===vo(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends fL{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Le(e,n)}matches(e){return Fu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fu(t){return t.op==="and"}function e0(t){return t.op==="or"}function UT(t){return pL(t)&&Fu(t)}function pL(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}function t0(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+Vu(t.value);if(UT(t))return t.filters.map(e=>t0(e)).join(",");{const e=t.filters.map(n=>t0(n)).join(",");return`${t.op}(${e})`}}function mL(t,e){return t instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&Ei(r.value,i.value)}(t,e):t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&mL(o,i.filters[a]),!0):!1}(t,e):void Z(19439)}function gL(t,e){const n=t.filters.concat(e);return Le.create(n,t.op)}function yL(t){return t instanceof Te?function(n){return`${n.field.canonicalString()} ${n.op} ${Vu(n.value)}`}(t):t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(yL).join(" ,")+"}"}(t):"Filter"}class Bq extends Te{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class jq extends Te{constructor(e,n){super(e,"in",n),this.keys=vL("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Uq extends Te{constructor(e,n){super(e,"not-in",n),this.keys=vL("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vL(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class $q extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dd(n)&&kd(n.arrayValue,this.value)}}class _L extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kd(this.value.arrayValue,n)}}class zq extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kd(this.value.arrayValue,n)}}class Wq extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function n0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Hq(t,e,n,r,i,s,o)}function $a(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>t0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ly(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vu(r)).join(",")),e.Te=n}return e.Te}function af(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Fq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mL(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fA(t.startAt,e.startAt)&&fA(t.endAt,e.endAt)}function Tg(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function bg(t,e){return t.filters.filter(n=>n instanceof Te&&n.field.isEqual(e))}function pA(t,e,n){let r=cm,i=!0;for(const s of bg(t,e)){let o=cm,a=!0;switch(s.op){case"<":case"<=":o=Lq(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=cm}cA({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];cA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function mA(t,e,n){let r=eo,i=!0;for(const s of bg(t,e)){let o=eo,a=!0;switch(s.op){case">=":case">":o=Vq(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=eo}hA({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];hA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wL(t,e,n,r,i,s,o,a){return new nl(t,e,n,r,i,s,o,a)}function zy(t){return new nl(t)}function gA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $T(t){return t.collectionGroup!==null}function mu(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Od(s,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new Od(nt.keyField(),r))}return e.Ie}function Yn(t){const e=ne(t);return e.Ee||(e.Ee=Kq(e,mu(t))),e.Ee}function Kq(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Od(i.field,s)});const n=t.endAt?new wo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wo(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r0(t,e){const n=t.filters.concat([e]);return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ig(t,e,n){return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wy(t,e){return af(Yn(t),Yn(e))&&t.limitType===e.limitType}function SL(t){return`${$a(Yn(t))}|lt:${t.limitType}`}function Ml(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yL(i)).join(", ")}]`),Ly(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vu(i)).join(",")),`Target(${r})`}(Yn(t))}; limitType=${t.limitType})`}function lf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of mu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=dA(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,mu(r),i)||r.endAt&&!function(o,a,l){const u=dA(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,mu(r),i))}(t,e)}function EL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TL(t){return(e,n)=>{let r=!1;for(const i of mu(t)){const s=qq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qq(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?_o(l,u):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=new He(q.comparator);function qn(){return Gq}const bL=new He(q.comparator);function uh(...t){let e=bL;for(const n of t)e=e.insert(n.key,n);return e}function IL(t){let e=bL;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ui(){return $h()}function RL(){return $h()}function $h(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const Xq=new He(q.comparator),Qq=new Fe(q.comparator);function _e(...t){let e=Qq;for(const n of t)e=e.add(n);return e}const Yq=new Fe(he);function zT(){return Yq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function CL(t){return{integerValue:""+t}}function Jq(t,e){return KN(e)?CL(e):WT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this._=void 0}}function Zq(t,e,n){return t instanceof Md?function(i,s){const o={fields:{[oL]:{stringValue:sL},[lL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jy(s)&&(s=Uy(s)),s&&(o.fields[aL]=s),{mapValue:o}}(n,e):t instanceof Bu?AL(t,e):t instanceof ju?PL(t,e):function(i,s){const o=xL(i,s),a=yA(o)+yA(i.Ae);return ZS(o)&&ZS(i.Ae)?CL(a):WT(i.serializer,a)}(t,e)}function e7(t,e,n){return t instanceof Bu?AL(t,e):t instanceof ju?PL(t,e):n}function xL(t,e){return t instanceof Nd?function(r){return ZS(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Md extends Hy{}class Bu extends Hy{constructor(e){super(),this.elements=e}}function AL(t,e){const n=kL(e);for(const r of t.elements)n.some(i=>Ei(i,r))||n.push(r);return{arrayValue:{values:n}}}class ju extends Hy{constructor(e){super(),this.elements=e}}function PL(t,e){let n=kL(e);for(const r of t.elements)n=n.filter(i=>!Ei(i,r));return{arrayValue:{values:n}}}class Nd extends Hy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yA(t){return Ye(t.integerValue||t.doubleValue)}function kL(t){return Dd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,n){this.field=e,this.transform=n}}function n7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bu&&i instanceof Bu||r instanceof ju&&i instanceof ju?Pu(r.elements,i.elements,Ei):r instanceof Nd&&i instanceof Nd?Ei(r.Ae,i.Ae):r instanceof Md&&i instanceof Md}(t.transform,e.transform)}class r7{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ky{}function DL(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qy(t.key,gn.none()):new nc(t.key,t.data,gn.none());{const n=t.data,r=on.empty();let i=new Fe(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new us(t.key,r,new xn(i.toArray()),gn.none())}}function i7(t,e,n){t instanceof nc?function(i,s,o){const a=i.value.clone(),l=_A(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof us?function(i,s,o){if(!fm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_A(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(OL(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zh(t,e,n,r){return t instanceof nc?function(s,o,a,l){if(!fm(s.precondition,o))return a;const u=s.value.clone(),c=wA(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(s,o,a,l){if(!fm(s.precondition,o))return a;const u=wA(s.fieldTransforms,l,o),c=o.data;return c.setAll(OL(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return fm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function s7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xL(r.transform,i||null);s!=null&&(n===null&&(n=on.empty()),n.set(r.field,s))}return n||null}function vA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pu(r,i,(s,o)=>n7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nc extends Ky{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class us extends Ky{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OL(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _A(t,e,n){const r=new Map;re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,e7(o,a,n[i]))}return r}function wA(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Zq(s,o,e))}return r}class qy extends Ky{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ML extends Ky{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&i7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RL();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=DL(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Pu(this.mutations,e.mutations,(n,r)=>vA(n,r))&&Pu(this.baseMutations,e.baseMutations,(n,r)=>vA(n,r))}}class KT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Xq}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new KT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,be;function a7(t){switch(t){case j.OK:return Z(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function NL(t){if(t===void 0)return vt("GRPC error has no .code"),j.UNKNOWN;switch(t){case St.OK:return j.OK;case St.CANCELLED:return j.CANCELLED;case St.UNKNOWN:return j.UNKNOWN;case St.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case St.INTERNAL:return j.INTERNAL;case St.UNAVAILABLE:return j.UNAVAILABLE;case St.UNAUTHENTICATED:return j.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case St.NOT_FOUND:return j.NOT_FOUND;case St.ALREADY_EXISTS:return j.ALREADY_EXISTS;case St.PERMISSION_DENIED:return j.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case St.ABORTED:return j.ABORTED;case St.OUT_OF_RANGE:return j.OUT_OF_RANGE;case St.UNIMPLEMENTED:return j.UNIMPLEMENTED;case St.DATA_LOSS:return j.DATA_LOSS;default:return Z(39323,{code:t})}}(be=St||(St={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=new ho([4294967295,4294967295],0);function SA(t){const e=l7().encode(t),n=new kN;return n.update(e),new Uint8Array(n.digest())}function EA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ho([n,r],0),new ho([i,s],0)]}class GT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ch(`Invalid padding: ${n}`);if(r<0)throw new ch(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ch(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ch(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ho.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ho.fromNumber(r)));return i.compare(u7)===1&&(i=new ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=SA(e),[r,i]=EA(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new GT(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=SA(e),[r,i]=EA(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,cf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new uf(ae.min(),i,new He(he),qn(),_e())}}class cf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cf(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class LL{constructor(e,n){this.targetId=e,this.Ce=n}}class VL{constructor(e,n,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TA{constructor(){this.ve=0,this.Fe=bA(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new cf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=bA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class c7{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Sp(),this.He=Sp(),this.Ye=new He(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Tg(s))if(r===0){const o=new q(s.path);this.et(n,o,dt.newNoDocument(o,ae.min()))}else re(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ts(r).toUint8Array()}catch(l){if(l instanceof iL)return bd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new GT(o,i,s)}catch(l){return bd(l instanceof ch?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Tg(a.target)){const l=new q(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,dt.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=_e();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new uf(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Sp(),this.He=Sp(),this.Ye=new He(he),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new TA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fe(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fe(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sp(){return new He(q.comparator)}function bA(){return new He(q.comparator)}const h7={asc:"ASCENDING",desc:"DESCENDING"},d7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f7={and:"AND",or:"OR"};class p7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i0(t,e){return t.useProto3Json||Ly(e)?e:{value:e}}function Uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function m7(t,e){return Uu(t,e.toTimestamp())}function wn(t){return re(!!t,49232),ae.fromTimestamp(function(n){const r=es(n);return new Ne(r.seconds,r.nanos)}(t))}function XT(t,e){return s0(t,e).canonicalString()}function s0(t,e){const n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BL(t){const e=ke.fromString(t);return re(GL(e),10190,{key:e.toString()}),e}function Rg(t,e){return XT(t.databaseId,e.path)}function Ca(t,e){const n=BL(e);if(n.get(1)!==t.databaseId.projectId)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q($L(n))}function jL(t,e){return XT(t.databaseId,e)}function UL(t){const e=BL(t);return e.length===4?ke.emptyPath():$L(e)}function o0(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $L(t){return re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function IA(t,e,n){return{name:Rg(t,e),fields:n.value.mapValue.fields}}function g7(t,e,n){const r=Ca(t,e.name),i=wn(e.updateTime),s=e.createTime?wn(e.createTime):ae.min(),o=new on({mapValue:{fields:e.fields}}),a=dt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function y7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(re(c===void 0||typeof c=="string",58123),wt.fromBase64String(c||"")):(re(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),wt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?j.UNKNOWN:NL(u.code);return new W(c,u.message||"")}(o);n=new VL(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ca(t,r.document.name),s=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):ae.min(),a=new on({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new pm(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ca(t,r.document),s=r.readTime?wn(r.readTime):ae.min(),o=dt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ca(t,r.document),s=r.removedTargetIds||[];n=new pm([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new o7(i,s),a=r.targetId;n=new LL(a,o)}}return n}function Cg(t,e){let n;if(e instanceof nc)n={update:IA(t,e.key,e.value)};else if(e instanceof qy)n={delete:Rg(t,e.key)};else if(e instanceof us)n={update:IA(t,e.key,e.data),updateMask:T7(e.fieldMask)};else{if(!(e instanceof ML))return Z(16599,{Vt:e.type});n={verify:Rg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Md)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ju)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:m7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function a0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?gn.updateTime(wn(s.updateTime)):s.exists!==void 0?gn.exists(s.exists):gn.none()}(e.currentDocument):gn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Md;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new Bu(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new ju(c)}else"increment"in a?l=new Nd(o,a.increment):Z(16584,{proto:a});const u=nt.fromServerFormat(a.fieldPath);return new t7(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Ca(t,e.update.name),s=new on({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new xn(u.map(c=>nt.fromServerFormat(c)))}(e.updateMask);return new us(i,s,o,n,r)}return new nc(i,s,n,r)}if(e.delete){const i=Ca(t,e.delete);return new qy(i,n)}if(e.verify){const i=Ca(t,e.verify);return new ML(i,n)}return Z(1463,{proto:e})}function v7(t,e){return t&&t.length>0?(re(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?wn(i.updateTime):wn(s);return o.isEqual(ae.min())&&(o=wn(s)),new r7(o,i.transformResults||[])}(n,e))):[]}function zL(t,e){return{documents:[jL(t,e.path)]}}function WL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jL(t,i);const s=function(u){if(u.length!==0)return qL(Le.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Nl(f.field),direction:w7(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=i0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function HL(t){let e=UL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=KL(d);return f instanceof Le&&UT(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(g){return new Od(Ll(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Ly(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new wo(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,p=d.values||[];return new wo(p,f)}(n.endAt)),wL(e,i,o,s,a,"F",l,u)}function _7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ll(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ll(n.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ll(n.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ll(n.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Te.create(Ll(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(r=>KL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function w7(t){return h7[t]}function S7(t){return d7[t]}function E7(t){return f7[t]}function Nl(t){return{fieldPath:t.canonicalString()}}function Ll(t){return nt.fromServerFormat(t.fieldPath)}function qL(t){return t instanceof Te?function(n){if(n.op==="=="){if(uA(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NAN"}};if(lA(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uA(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NOT_NAN"}};if(lA(n.value))return{unaryFilter:{field:Nl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(n.field),op:S7(n.op),value:n.value}}}(t):t instanceof Le?function(n){const r=n.getFilters().map(i=>qL(i));return r.length===1?r[0]:{compositeFilter:{op:E7(n.op),filters:r}}}(t):Z(54877,{filter:t})}function T7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.yt=e}}function b7(t,e){let n;if(e.document)n=g7(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),i=Wa(e.noDocument.readTime);n=dt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z(56709);{const r=q.fromSegments(e.unknownDocument.path),i=Wa(e.unknownDocument.version);n=dt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ne(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function RA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Rg(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Uu(s,o.version.toTimestamp()),createTime:Uu(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:za(e.version)};else{if(!e.isUnknownDocument())return Z(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:za(e.version)}}return r}function xg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function za(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wa(t){const e=new Ne(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function la(t,e){const n=(e.baseMutations||[]).map(s=>a0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>a0(t.yt,s)),i=Ne.fromMillis(e.localWriteTimeMs);return new HT(e.batchId,i,n,r)}function hh(t){const e=Wa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wa(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return re(o===1,1966,{count:o}),Yn(zy(UL(s.documents[0])))}(t.query):function(s){return Yn(HL(s))}(t.query),new ji(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,wt.fromBase64String(t.resumeToken))}function QL(t,e){const n=za(e.snapshotVersion),r=za(e.lastLimboFreeSnapshotVersion);let i;i=Tg(e.target)?zL(t.yt,e.target):WL(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$a(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function YL(t){const e=HL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ig(e,e.limit,"L"):e}function O_(t,e){return new qT(e.largestBatchId,a0(t.yt,e.overlayMutation))}function CA(t,e){const n=e.path.lastSegment();return[t,ln(e.path.popLast()),n]}function xA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:za(r.readTime),documentKey:ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{getBundleMetadata(e,n){return AA(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Wa(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return AA(e).put(function(i){return{bundleId:i.id,createTime:za(wn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return PA(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:YL(s.bundledQuery),readTime:Wa(s.readTime)}}(r)})}saveNamedQuery(e,n){return PA(e).put(function(i){return{name:i.name,readTime:za(wn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function AA(t){return Mt(t,Vy)}function PA(t){return Mt(t,Fy)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Gy(e,r)}getOverlay(e,n){return Kc(e).get(CA(this.userId,n)).next(r=>r?O_(this.serializer,r):null)}getOverlays(e,n){const r=ui();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new qT(n,o);i.push(this.St(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ln(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Kc(e).Z(QS,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ui(),s=ln(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Kc(e).J(QS,o).next(a=>{for(const l of a){const u=O_(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ui();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Kc(e).ee({index:JN,range:a},(l,u,c)=>{const d=O_(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}St(e,n){return Kc(e).put(function(i,s,o){const[a,l,u]=CA(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Cg(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Kc(t){return Mt(t,By)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{bt(e){return Mt(e,VT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ye(e.integerValue));else if("doubleValue"in e){const r=Ye(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Rd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=es(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ts(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?cL(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):$y(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Z(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Lu,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ye(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),q.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ua.Kt=new ua;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=255;function C7(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function kA(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=C7(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class x7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=kA(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=kA(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Il),this.sn(255)}_n(){this.an(Il),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Il?(this.sn(Il),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Il?(this.an(Il),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class A7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class P7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qc{constructor(){this.cn=new x7,this.ln=new A7(this.cn),this.hn=new P7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ca(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:mm(this.En),directionalValue:mm(this.dn),orderedDocumentKey:mm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Os(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=DA(t.En,e.En),n!==0?n:(n=DA(t.dn,e.dn),n!==0?n:q.comparator(t.In,e.In)))}function DA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function mm(t){return TN()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function OA(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class MA{constructor(e){this.mn=new Fe((n,r)=>nt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=qS(e);if(n!==void 0&&!this.wn(n))return!1;const r=ra(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Fe(nt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new am(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new am(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new am(r.field,r.dir==="asc"?0:1)));return new vg(vg.UNKNOWN_ID,this.collectionId,n,Id.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){var n,r;if(re(t instanceof Te||t instanceof Le,20012),t instanceof Te){if(t instanceof _L){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>Te.create(t.field,"==",s)))||[];return Le.create(i,"or")}return t}const e=t.filters.map(i=>JL(i));return Le.create(e,t.op)}function k7(t){if(t.getFilters().length===0)return[];const e=c0(JL(t));return re(ZL(e),7391),l0(e)||u0(e)?[e]:e.getFilters()}function l0(t){return t instanceof Te}function u0(t){return t instanceof Le&&UT(t)}function ZL(t){return l0(t)||u0(t)||function(n){if(n instanceof Le&&e0(n)){for(const r of n.getFilters())if(!l0(r)&&!u0(r))return!1;return!0}return!1}(t)}function c0(t){if(re(t instanceof Te||t instanceof Le,34018),t instanceof Te)return t;if(t.filters.length===1)return c0(t.filters[0]);const e=t.filters.map(r=>c0(r));let n=Le.create(e,t.op);return n=Ag(n),ZL(n)?n:(re(n instanceof Le,64498),re(Fu(n),40251),re(n.filters.length>1,57927),n.filters.reduce((r,i)=>QT(r,i)))}function QT(t,e){let n;return re(t instanceof Te||t instanceof Le,38388),re(e instanceof Te||e instanceof Le,25473),n=t instanceof Te?e instanceof Te?function(i,s){return Le.create([i,s],"and")}(t,e):NA(t,e):e instanceof Te?NA(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0,48005),Fu(i)&&Fu(s))return gL(i,s.getFilters());const o=e0(i)?i:s,a=e0(i)?s:i,l=o.filters.map(u=>QT(u,a));return Le.create(l,"or")}(t,e),Ag(n)}function NA(t,e){if(Fu(e))return gL(e,t.getFilters());{const n=e.filters.map(r=>QT(t,r));return Le.create(n,"or")}}function Ag(t){if(re(t instanceof Te||t instanceof Le,11850),t instanceof Te)return t;const e=t.getFilters();if(e.length===1)return Ag(e[0]);if(pL(t))return t;const n=e.map(i=>Ag(i)),r=[];return n.forEach(i=>{i instanceof Te?r.push(i):i instanceof Le&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Le.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(){this.Cn=new YT}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Zn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class YT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(ke.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="IndexedDbIndexManager",Ep=new Uint8Array(0);class O7{constructor(e,n){this.databaseId=n,this.vn=new YT,this.Fn=new ls(r=>$a(r),(r,i)=>af(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:ln(i)};return VA(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[FN(n),""],!1,!0);return VA(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(li(o.parent))}return r})}addFieldIndex(e,n){const r=Gc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Cl(e);return s.next(a=>{o.put(xA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Gc(e),i=Cl(e),s=Rl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Gc(e),r=Rl(e),i=Cl(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new MA(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Rl(e);let i=!0;const s=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_e();const a=[];return L.forEach(s,(l,u)=>{$(LA,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${$a(n)}`);const c=function(w,x){const O=qS(x);if(O===void 0)return null;for(const k of bg(w,O.fieldPath))switch(k.op){case"array-contains-any":return k.value.arrayValue.values||[];case"array-contains":return[k.value]}return null}(u,l),d=function(w,x){const O=new Map;for(const k of ra(x))for(const T of bg(w,k.fieldPath))switch(T.op){case"==":case"in":O.set(k.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return O.set(k.fieldPath.canonicalString(),T.value),Array.from(O.values())}return null}(u,l),f=function(w,x){const O=[];let k=!0;for(const T of ra(x)){const v=T.kind===0?pA(w,T.fieldPath,w.startAt):mA(w,T.fieldPath,w.startAt);O.push(v.value),k&&(k=v.inclusive)}return new wo(O,k)}(u,l),p=function(w,x){const O=[];let k=!0;for(const T of ra(x)){const v=T.kind===0?mA(w,T.fieldPath,w.endAt):pA(w,T.fieldPath,w.endAt);O.push(v.value),k&&(k=v.inclusive)}return new wo(O,k)}(u,l),g=this.On(l,u,f),E=this.On(l,u,p),b=this.Nn(l,u,d),S=this.Bn(l.indexId,c,g,f.inclusive,E,p.inclusive,b);return L.forEach(S,y=>r.Y(y,n.limit).next(w=>{w.forEach(x=>{const O=q.fromSegments(x.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=k7(Le.create(e.filters,"and")).map(r=>n0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/u]):Ep,p=this.kn(e,f,r[d%u],i),g=this.qn(e,f,s[d%u],o),E=a.map(b=>this.kn(e,f,b,!0));c.push(...this.createRange(p,g,E))}return c}kn(e,n,r,i){const s=new ca(e,q.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new ca(e,q.empty(),n,r);return i?s.An():s}xn(e,n){const r=new MA(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return L.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Fe(nt.comparator),c=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new qc;for(const i of ra(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ua.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new qc;return ua.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new qc;return ua.Kt.Dt(Ua(this.databaseId,n),r.Pn(function(s){const o=ra(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new qc);let s=0;for(const o of ra(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Dd(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ua.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new qc;l.seed(a.un()),ua.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Gc(e),i=Cl(e);return(n?r.J(XS,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const f=d?new Id(d.sequenceNumber,new Zn(Wa(d.readTime),new q(li(d.documentKey)),d.largestBatchId)):Id.empty(),p=c.fields.map(([g,E])=>new am(nt.fromServerFormat(g),E));return new vg(c.indexId,c.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Gc(e),s=Cl(e);return this.Gn(e).next(o=>i.J(XS,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(xA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.zn(e,i,l).next(u=>{const c=this.jn(s,l);return u.isEqual(c)?L.resolve():this.Jn(e,s,l,u,c)}))))})}Hn(e,n,r,i){return Rl(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Rl(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Rl(e);let s=new Fe(Os);return i.ee({index:YN,range:IDBKeyRange.only([r.indexId,this.uid,mm(this.$n(r,n))])},(o,a)=>{s=s.add(new ca(r.indexId,n,OA(a.arrayValue),OA(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Fe(Os);const i=this.Qn(n,e);if(i==null)return r;const s=qS(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Dd(o))for(const a of o.arrayValue.values||[])r=r.add(new ca(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ca(n.indexId,e.key,Ep,i));return r}Jn(e,n,r,i,s){$(LA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,f){const p=l.getIterator(),g=u.getIterator();let E=bl(p),b=bl(g);for(;E||b;){let S=!1,y=!1;if(E&&b){const w=c(E,b);w<0?y=!0:w>0&&(S=!0)}else E!=null?y=!0:S=!0;S?(d(b),b=bl(g)):y?(f(E),E=bl(p)):(E=bl(p),b=bl(g))}}(i,s,Os,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return Cl(e).ee({index:QN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Os(o,a)).filter((o,a,l)=>!a||Os(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Os(o,e),l=Os(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Ep,q.empty()),l=i[o+1].Vn(this.uid,Ep,q.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Os(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(FA)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||Z(44426))).next(FA)}}function VA(t){return Mt(t,Ad)}function Rl(t){return Mt(t,jh)}function Gc(t){return Mt(t,LT)}function Cl(t){return Mt(t,Bh)}function FA(t){re(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;OT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Zn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eV=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t,e,n){const r=t.store(Or),i=t.store(Du),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(c,d,f)=>(a++,f.delete()));s.push(l.next(()=>{re(a===1,47070,{batchId:n.batchId})}));const u=[];for(const c of n.mutations){const d=qN(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return L.waitFor(s).next(()=>u)}function Pg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(eV,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Xy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){re(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Xy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ms(e).ee({index:va,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Vl(e),o=Ms(e);return o.add({}).next(a=>{re(typeof a=="number",49019);const l=new HT(a,n,r,i),u=function(p,g,E){const b=E.baseMutations.map(y=>Cg(p.yt,y)),S=E.mutations.map(y=>Cg(p.yt,y));return{userId:g,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:b,mutations:S}}(this.serializer,this.userId,l),c=[];let d=new Fe((f,p)=>he(f.canonicalString(),p.canonicalString()));for(const f of i){const p=qN(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),c.push(o.put(u)),c.push(s.put(p,cq))}return d.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Ms(e).get(n).next(r=>r?(re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),la(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ms(e).ee({index:va,range:i},(o,a,l)=>{a.userId===this.userId&&(re(a.batchId>=r,47524,{tr:r}),s=la(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ia;return Ms(e).ee({index:va,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ia],[this.userId,Number.POSITIVE_INFINITY]);return Ms(e).J(va,n).next(r=>r.map(i=>la(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=lm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Vl(e).ee({range:i},(o,a,l)=>{const[u,c,d]=o,f=li(c);if(u===this.userId&&n.path.isEqual(f))return Ms(e).get(d).next(p=>{if(!p)throw Z(61480,{nr:o,batchId:d});re(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(la(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);const i=[];return n.forEach(s=>{const o=lm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Vl(e).ee({range:a},(u,c,d)=>{const[f,p,g]=u,E=li(p);f===this.userId&&s.path.isEqual(E)?r=r.add(g):d.done()});i.push(l)}),L.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=lm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Fe(he);return Vl(e).ee({range:o},(l,u,c)=>{const[d,f,p]=l,g=li(f);d===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(p)):c.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ms(e).get(s).next(o=>{if(o===null)throw Z(35274,{batchId:s});re(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(la(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return tV(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Vl(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=li(s[1]);i.push(l)}else a.done()}).next(()=>{re(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return nV(e,this.userId,n)}_r(e){return rV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ia,lastStreamToken:""})}}function nV(t,e,n){const r=lm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Vl(t).ee({range:s,X:!0},(a,l,u)=>{const[c,d,f]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Ms(t){return Mt(t,Or)}function Vl(t){return Mt(t,Du)}function rV(t){return Mt(t,Cd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ha(0)}static cr(){return new Ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Ha(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ae.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>xl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(re(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return xl(e).ee((o,a)=>{const l=hh(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return xl(e).ee((r,i)=>{const s=hh(i);n(s)})}lr(e){return jA(e).get(Sg).next(n=>(re(n!==null,2888),n))}hr(e,n){return jA(e).put(Sg,n)}Pr(e,n){return xl(e).put(QL(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$a(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return xl(e).ee({range:i,index:XN},(o,a,l)=>{const u=hh(a);af(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ks(e);return n.forEach(o=>{const a=ln(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ks(e);return L.forEach(n,s=>{const o=ln(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ks(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ks(e);let s=_e();return i.ee({range:r,X:!0},(o,a,l)=>{const u=li(o[1]),c=new q(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=ln(n.path),i=IDBKeyRange.bound([r],[FN(r)],!1,!0);let s=0;return Ks(e).ee({index:NT,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return xl(e).get(n).next(r=>r?hh(r):null)}}function xl(t){return Mt(t,Ou)}function jA(t){return Mt(t,Ra)}function Ks(t){return Mt(t,Mu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="LruGarbageCollector",iV=1048576;function $A([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class N7{constructor(e){this.Ir=e,this.buffer=new Fe($A),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$A(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(UA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Po(n)?$(UA,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)})}}class L7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Cn.ce);const r=new N7(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(BA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Ol()<=Ee.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function oV(t,e){return new L7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e,n){this.db=e,this.garbageCollector=oV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Tp(e,r)}removeReference(e,n,r){return Tp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Tp(e,n)}br(e,n){return function(i,s){let o=!1;return rV(i).te(a=>nV(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Ks(e).delete(function(d){return[0,ln(d.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Tp(e,n)}Sr(e,n){const r=Ks(e);let i,s=Cn.ce;return r.ee({index:NT},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Cn.ce&&n(new q(li(i)),s),s=u,i=l):s=Cn.ce}).next(()=>{s!==Cn.ce&&n(new q(li(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tp(t,e){return Ks(t).put(function(r,i){return{targetId:0,path:ln(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Jo(e).put(r)}removeEntry(e,n,r){return Jo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=dt.newInvalidDocument(n);return Jo(e).ee({index:um,range:IDBKeyRange.only(Xc(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:dt.newInvalidDocument(n)};return Jo(e).ee({index:um,range:IDBKeyRange.only(Xc(n))},(i,s)=>{r={document:this.Cr(n,s),size:Pg(s)}}).next(()=>r)}getEntries(e,n){let r=qn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=qn(),i=new He(q.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Pg(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Fe(HA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Xc(i.first()),Xc(i.last())),o=i.getIterator();let a=o.getNext();return Jo(e).ee({index:um,range:s},(l,u,c)=>{const d=q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&HA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j(Xc(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),xg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=qn();for(const d of u){const f=this.Cr(q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(lf(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=qn();const o=WA(n,r),a=WA(n,Zn.max());return Jo(e).ee({index:GN,range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.Cr(q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new B7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return zA(e).get(GS).next(n=>(re(!!n,20021),n))}Dr(e,n){return zA(e).put(GS,n)}Cr(e,n){if(n){const r=b7(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return dt.newInvalidDocument(e)}}function lV(t){return new F7(t)}class B7 extends aV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ls(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Fe((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=RA(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Pg(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=RA(this.Nr.serializer,o.convertToNoDocument(ae.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function zA(t){return Mt(t,xd)}function Jo(t){return Mt(t,wg)}function Xc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WA(t,e){const n=e.documentKey.path.toArray();return[t,xg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function HA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zh(r.mutation,i,xn.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=uh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qn();const o=$h(),a=function(){return $h()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof us)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),zh(c.mutation,u,c.mutation.getFieldMask(),Ne.now())):o.set(u.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>a.set(u,new j7(c,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=$h();let i=new He((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||xn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=RL();c.forEach(f=>{if(!s.has(f)){const p=DL(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$T(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(ui());let a=ku,l=s;return o.next(u=>L.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?L.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(c=>({batchId:a,changes:IL(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=uh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=uh();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(d,f){return new nl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,dt.newInvalidDocument(c)))});let a=uh();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&zh(c.mutation,u,xn.empty(),Ne.now()),lf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:YL(i.bundledQuery),readTime:wn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(){this.overlays=new He(q.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ui();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=ui(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new He((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ui(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ui(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return L.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qT(n,r));let s=this.qr.get(n);s===void 0&&(s=_e(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.Qr=new Fe(jt.$r),this.Ur=new Fe(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new q(new ke([])),r=new jt(n,e),i=new jt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new q(new ke([])),r=new jt(n,e),i=new jt(n,e+1);let s=_e();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(jt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Ia:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),i=new jt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(he);return n.forEach(i=>{const s=new jt(i,0),o=new jt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new jt(new q(s),0);let a=new Fe(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new jt(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e){this.ri=e,this.docs=function(){return new He(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qn();const o=n.path,a=new q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||OT($N(c),r)<=0||(i.has(c.key)||lf(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new K7(this)}getSize(e){return L.resolve(this.size)}}class K7 extends aV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.persistence=e,this.si=new ls(n=>$a(n),af),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new JT,this.targetCount=0,this.ai=Ha.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ha(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cn(0),this.li=!1,this.li=!0,this.hi=new z7,this.referenceDelegate=e(this),this.Pi=new q7(this),this.indexManager=new D7,this.remoteDocumentCache=function(i){return new H7(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new XL(n),this.Ii=new U7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new W7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new G7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class G7 extends WN{constructor(e){super(),this.currentSequenceNumber=e}}class Qy{constructor(e){this.persistence=e,this.Ri=new JT,this.Vi=null}static mi(e){return new Qy(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kg{constructor(e,n){this.persistence=e,this.pi=new ls(r=>ln(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=oV(this,n)}static mi(e,n){return new kg(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hm(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.serializer=e}k(e,n,r,i){const s=new Ny("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(of)}(e),function(l){l.createObjectStore(Cd,{keyPath:uq}),l.createObjectStore(Or,{keyPath:nA,autoIncrement:!0}).createIndex(va,rA,{unique:!0}),l.createObjectStore(Du)}(e),KA(e),function(l){l.createObjectStore(ia)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Mu),l.deleteObjectStore(Ou),l.deleteObjectStore(Ra)}(e),KA(e)),o=o.next(()=>function(l){const u=l.store(Ra),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put(Sg,c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Or).J().next(d=>{l.deleteObjectStore(Or),l.createObjectStore(Or,{keyPath:nA,autoIncrement:!0}).createIndex(va,rA,{unique:!0});const f=u.store(Or),p=d.map(g=>f.put(g));return L.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Nu,{keyPath:vq})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(xd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Vy,{keyPath:_q})})(e),function(l){l.createObjectStore(Fy,{keyPath:wq})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(By,{keyPath:Cq});u.createIndex(QS,xq,{unique:!1}),u.createIndex(JN,Aq,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(wg,{keyPath:hq});u.createIndex(um,dq),u.createIndex(GN,fq)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(ia))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(LT,{keyPath:Sq,autoIncrement:!0}).createIndex(XS,Eq,{unique:!1}),l.createObjectStore(Bh,{keyPath:Tq}).createIndex(QN,bq,{unique:!1}),l.createObjectStore(jh,{keyPath:Iq}).createIndex(YN,Rq,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Bh).clear()}).next(()=>{n.objectStore(jh).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(VT,{keyPath:Pq})})(e)})),r<18&&i>=18&&TN()&&(o=o.next(()=>{n.objectStore(Bh).clear()}).next(()=>{n.objectStore(jh).clear()})),o}wi(e){let n=0;return e.store(ia).ee((r,i)=>{n+=Pg(i)}).next(()=>{const r={byteSize:n};return e.store(xd).put(GS,r)})}yi(e){const n=e.store(Cd),r=e.store(Or);return n.J().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Ia],[s.userId,s.lastAcknowledgedBatchId]);return r.J(va,o).next(a=>L.forEach(a,l=>{re(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=la(this.serializer,l);return tV(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(Mu),r=e.store(ia);return e.store(Ra).get(Sg).next(i=>{const s=[];return r.ee((o,a)=>{const l=new ke(o),u=function(d){return[0,ln(d)]}(l);s.push(n.get(u).next(c=>c?L.resolve():(d=>n.put({targetId:0,path:ln(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}bi(e,n){e.createObjectStore(Ad,{keyPath:yq});const r=n.store(Ad),i=new YT,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ln(l)})}};return n.store(ia).ee({X:!0},(o,a)=>{const l=new ke(o);return s(l.popLast())}).next(()=>n.store(Du).ee({X:!0},([o,a,l],u)=>{const c=li(a);return s(c.popLast())}))}Di(e){const n=e.store(Ou);return n.ee((r,i)=>{const s=hh(i),o=QL(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(ia),i=[];return r.ee((s,o)=>{const a=n.store(wg),l=function(d){return d.document?new q(ke.fromString(d.document.name).popFirst(5)):d.noDocument?q.fromSegments(d.noDocument.path):d.unknownDocument?q.fromSegments(d.unknownDocument.path):Z(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}Fi(e,n){const r=n.store(Or),i=lV(this.serializer),s=new ZT(Qy.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??_e();la(this.serializer,l).keys().forEach(c=>u=u.add(c)),a.set(l.userId,u)}),L.forEach(a,(l,u)=>{const c=new nn(u),d=Gy.wt(this.serializer,c),f=s.getIndexManager(c),p=Xy.wt(c,this.serializer,f,s.referenceDelegate);return new uV(i,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new YS(n,Cn.ce),l).next()})})}}function KA(t){t.createObjectStore(Mu,{keyPath:mq}).createIndex(NT,gq,{unique:!0}),t.createObjectStore(Ou,{keyPath:"targetId"}).createIndex(XN,pq,{unique:!0}),t.createObjectStore(Ra)}const Ns="IndexedDbPersistence",M_=18e5,N_=5e3,L_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Q7="main";class eb{constructor(e,n,r,i,s,o,a,l,u,c,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=c,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!eb.v())throw new W(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V7(this,i),this.$i=n+Q7,this.serializer=new XL(l),this.Ui=new fo(this.$i,this.Ni,new X7(this.serializer)),this.hi=new R7,this.Pi=new M7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lV(this.serializer),this.Ii=new I7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,c===!1&&vt(Ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(j.FAILED_PRECONDITION,L_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Cn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Po(e))return $(Ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(Ns,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Qc(e).get(Tl).next(n=>L.resolve(this.es(n)))}ts(e){return bp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,M_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Mt(n,Nu);return r.J().next(i=>{const s=this.ss(i,M_),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Qc(e).get(Tl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,N_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new W(j.FAILED_PRECONDITION,L_);return!1}}return!(!this.networkEnabled||!this.inForeground)||bp(e).J().next(r=>this.ss(r,N_).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$(Ns,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[of,Nu],e=>{const n=new YS(e,Cn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>bp(e).J().next(n=>this.ss(n,M_).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Xy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new O7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Gy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){$(Ns,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?Oq:l===17?nL:l===16?Dq:l===15?FT:l===14?tL:l===13?eL:l===12?kq:l===11?ZN:void Z(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new YS(a,this.ci?this.ci.next():Cn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new W(j.FAILED_PRECONDITION,zN);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Qc(e).get(Tl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,N_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new W(j.FAILED_PRECONDITION,L_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qc(e).put(Tl,n)}static v(){return fo.v()}Zi(e){const n=Qc(e);return n.get(Tl).next(r=>this.es(r)?($(Ns,"Releasing primary lease."),n.delete(Tl)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;EN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return $(Ns,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt(Ns,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qc(t){return Mt(t,of)}function bp(t){return Mt(t,Nu)}function cV(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new tb(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return EN()?8:HN(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Y7;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ol()<=Ee.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ml(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Ol()<=Ee.DEBUG&&$("QueryEngine","Query:",Ml(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ol()<=Ee.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ml(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):L.resolve())}ys(e,n){if(gA(n))return L.resolve(null);let r=Yn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ig(n,null,"F"),r=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Ig(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return gA(n)||i.isEqual(ae.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(Ol()<=Ee.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ml(n)),this.vs(e,o,n,UN(i,ku)).next(a=>a))})}Ds(e,n){let r=new Fe(TL(e));return n.forEach((i,s)=>{lf(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Ol()<=Ee.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ml(n)),this.ps.getDocumentsMatchingQuery(e,n,Zn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="LocalStore",J7=3e8;class Z7{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new He(he),this.xs=new ls(s=>$a(s),af),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function dV(t,e,n,r){return new Z7(t,e,n,r)}async function fV(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function eG(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let p=L.resolve();return f.forEach(g=>{p=p.next(()=>c.getEntry(l,g)).next(E=>{const b=u.docVersions.get(g);re(b!==null,48541),E.version.compareTo(b)<0&&(d.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),c.addEntry(E)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pV(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function tG(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(wt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(d,p),function(E,b,S){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=J7?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(f,p,c)&&a.push(n.Pi.updateTargetData(s,p))});let l=qn(),u=_e();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(nG(s,o,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!r.isEqual(ae.min())){const c=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function nG(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(nb,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function rG(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ia),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dg(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new ji(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function $u(t,e,n){const r=ne(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Po(o))throw o;$(nb,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function h0(t,e,n){const r=ne(t);let i=ae.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=ne(l),f=d.xs.get(c);return f!==void 0?L.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,c)}(r,o,Yn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:_e())).next(a=>(yV(r,EL(e),a),{documents:a,Qs:s})))}function mV(t,e){const n=ne(t),r=ne(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function gV(t,e){const n=ne(t),r=n.Os.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,UN(r,ku),Number.MAX_SAFE_INTEGER)).then(i=>(yV(n,e,i),i))}function yV(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="firestore_clients";function qA(t,e){return`${vV}_${t}_${e}`}const _V="firestore_mutations";function GA(t,e,n){let r=`${_V}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const wV="firestore_targets";function V_(t,e){return`${wV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="SharedClientState";class Og{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new W(i.error.code,i.error.message))),o?new Og(e,n,i.state,s):(vt(ni,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new W(r.error.code,r.error.message))),s?new Wh(e,r.state,i):(vt(ni,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=zT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=KN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Mg(e,s):(vt(ni,`Failed to parse client data for instance '${e}': ${n}`),null)}}class rb{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new rb(n.clientId,n.onlineState):(vt(ni,`Failed to parse online state: ${e}`),null)}}class d0{constructor(){this.activeTargetIds=zT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F_{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new He(he),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=qA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new d0),this.ro=new RegExp(`^${vV}_${o}_([^_]*)$`),this.io=new RegExp(`^${_V}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${wV}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(qA(this.persistenceKey,r));if(i){const s=Mg.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(V_(this.persistenceKey,e));if(i){const s=Wh.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(V_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $(ni,"READ",e,n),n}setItem(e,n){$(ni,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){$(ni,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if($(ni,"EVENT",n.key,n.newValue),n.key===this.eo)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=Cn.ce;if(s!=null)try{const a=JSON.parse(s);re(typeof a=="number",30636,{So:s}),o=a}catch(a){vt(ni,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Og(this.currentUser,e,n,r),s=GA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=GA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=V_(this.persistenceKey,e),s=new Wh(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Mg.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Og.Ws(new nn(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Wh.Ws(i,n)}uo(e){return rb.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(ni,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=zT();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class SV{constructor(){this.Mo=new d0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new d0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="ConnectivityMonitor";class QA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(XA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(XA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ip=null;function f0(){return Ip===null?Ip=function(){return 268435456+Math.round(2147483648*Math.random())}():Ip++,"0x"+Ip.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="RestConnection",sG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oG{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Eg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=f0(),a=this.zo(e,n.toUriEncodedString());$(B_,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),c=xo(u);return this.Jo(e,a,l,r,c).then(d=>($(B_,`Received RPC '${e}' ${o}: `,d),d),d=>{throw bd(B_,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=sG[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class lG extends oG{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=f0();return new Promise((a,l)=>{const u=new DN;u.setWithCredentials(!0),u.listenOnce(ON.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case om.NO_ERROR:const d=u.getResponseJson();$(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case om.TIMEOUT:$(en,`RPC '${e}' ${o} timed out`),l(new W(j.DEADLINE_EXCEEDED,"Request time out"));break;case om.HTTP_ERROR:const f=u.getStatus();if($(en,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const E=function(S){const y=S.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(y)>=0?y:j.UNKNOWN}(g.status);l(new W(E,g.message))}else l(new W(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(j.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$(en,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);$(en,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}T_(e,n,r){const i=f0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LN(),a=NN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");$(en,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.I_(d);let f=!1,p=!1;const g=new aG({Yo:b=>{p?$(en,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||($(en,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),$(en,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},Zo:()=>d.close()}),E=(b,S,y)=>{b.listen(S,w=>{try{y(w)}catch(x){setTimeout(()=>{throw x},0)}})};return E(d,lh.EventType.OPEN,()=>{p||($(en,`RPC '${e}' stream ${i} transport opened.`),g.o_())}),E(d,lh.EventType.CLOSE,()=>{p||(p=!0,$(en,`RPC '${e}' stream ${i} transport closed`),g.a_(),this.E_(d))}),E(d,lh.EventType.ERROR,b=>{p||(p=!0,bd(en,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new W(j.UNAVAILABLE,"The operation could not be completed")))}),E(d,lh.EventType.MESSAGE,b=>{var S;if(!p){const y=b.data[0];re(!!y,16349);const w=y,x=(w==null?void 0:w.error)||((S=w[0])==null?void 0:S.error);if(x){$(en,`RPC '${e}' stream ${i} received error:`,x);const O=x.status;let k=function(R){const C=St[R];if(C!==void 0)return NL(C)}(O),T=x.message;k===void 0&&(k=j.INTERNAL,T="Unknown error status: "+O+" with message "+x.message),p=!0,g.a_(new W(k,T)),d.close()}else $(en,`RPC '${e}' stream ${i} received:`,y),g.u_(y)}}),E(a,MN.STAT_EVENT,b=>{b.stat===HS.PROXY?$(en,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===HS.NOPROXY&&$(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(){return typeof window<"u"?window:null}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){return new p7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="PersistentStream";class bV{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TV(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(vt(n.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(YA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(YA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uG extends bV{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=y7(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?wn(o.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=o0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Tg(l)?{documents:zL(s,l)}:{query:WL(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FL(s,o.resumeToken);const u=i0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Uu(s,o.snapshotVersion.toTimestamp());const u=i0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=_7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=o0(this.serializer),n.removeTarget=e,this.q_(n)}}class cG extends bV{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=v7(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=o0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Cg(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{}class dG extends hG{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,s0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,s0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class fG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vt(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class pG{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{rl(this)&&($(Ka,"Restarting streams for network reachability change."),await async function(l){const u=ne(l);u.Ea.add(4),await hf(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Jy(u)}(this))})}),this.Ra=new fG(r,i)}}async function Jy(t){if(rl(t))for(const e of t.da)await e(!0)}async function hf(t){for(const e of t.da)await e(!1)}function Zy(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ob(n)?sb(n):ic(n).O_()&&ib(n,e))}function zu(t,e){const n=ne(t),r=ic(n);n.Ia.delete(e),r.O_()&&IV(n,e),n.Ia.size===0&&(r.O_()?r.L_():rl(n)&&n.Ra.set("Unknown"))}function ib(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ic(t).Y_(e)}function IV(t,e){t.Va.Ue(e),ic(t).Z_(e)}function sb(t){t.Va=new c7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ic(t).start(),t.Ra.ua()}function ob(t){return rl(t)&&!ic(t).x_()&&t.Ia.size>0}function rl(t){return ne(t).Ea.size===0}function RV(t){t.Va=void 0}async function mG(t){t.Ra.set("Online")}async function gG(t){t.Ia.forEach((e,n)=>{ib(t,e)})}async function yG(t,e){RV(t),ob(t)?(t.Ra.ha(e),sb(t)):t.Ra.set("Unknown")}async function vG(t,e,n){if(t.Ra.set("Online"),e instanceof VL&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){$(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ng(t,r)}else if(e instanceof pm?t.Va.Ze(e):e instanceof LL?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await pV(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(wt.EMPTY_BYTE_STRING,c.snapshotVersion)),IV(s,l);const d=new ji(c.target,l,u,c.sequenceNumber);ib(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$(Ka,"Failed to raise snapshot:",r),await Ng(t,r)}}async function Ng(t,e,n){if(!Po(e))throw e;t.Ea.add(1),await hf(t),t.Ra.set("Offline"),n||(n=()=>pV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Ka,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Jy(t)})}function CV(t,e){return e().catch(n=>Ng(t,n,e))}async function rc(t){const e=ne(t),n=So(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ia;for(;_G(e);)try{const i=await rG(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,wG(e,i)}catch(i){await Ng(e,i)}xV(e)&&AV(e)}function _G(t){return rl(t)&&t.Ta.length<10}function wG(t,e){t.Ta.push(e);const n=So(t);n.O_()&&n.X_&&n.ea(e.mutations)}function xV(t){return rl(t)&&!So(t).x_()&&t.Ta.length>0}function AV(t){So(t).start()}async function SG(t){So(t).ra()}async function EG(t){const e=So(t);for(const n of t.Ta)e.ea(n.mutations)}async function TG(t,e,n){const r=t.Ta.shift(),i=KT.from(r,e,n);await CV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rc(t)}async function bG(t,e){e&&So(t).X_&&await async function(r,i){if(function(o){return a7(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();So(r).B_(),await CV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rc(r)}}(t,e),xV(t)&&AV(t)}async function JA(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),$(Ka,"RemoteStore received new credentials");const r=rl(n);n.Ea.add(3),await hf(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jy(n)}async function p0(t,e){const n=ne(t);e?(n.Ea.delete(2),await Jy(n)):e||(n.Ea.add(2),await hf(n),n.Ra.set("Unknown"))}function ic(t){return t.ma||(t.ma=function(n,r,i){const s=ne(n);return s.sa(),new uG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:mG.bind(null,t),t_:gG.bind(null,t),r_:yG.bind(null,t),H_:vG.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ob(t)?sb(t):t.Ra.set("Unknown")):(await t.ma.stop(),RV(t))})),t.ma}function So(t){return t.fa||(t.fa=function(n,r,i){const s=ne(n);return s.sa(),new cG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:SG.bind(null,t),r_:bG.bind(null,t),ta:EG.bind(null,t),na:TG.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await rc(t)):(await t.fa.stop(),t.Ta.length>0&&($(Ka,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ab(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lb(t,e){if(vt("AsyncQueue",`${e}: ${t}`),Po(t))return new W(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{static emptySet(e){return new gu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=uh(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.ga=new He(q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wu{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wu(e,n,gu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class RG{constructor(){this.queries=eP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=eP(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new W(j.ABORTED,"Firestore shutting down"))}}function eP(){return new ls(t=>SL(t),Wy)}async function PV(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new IG,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=lb(o,`Initialization of query '${Ml(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&ub(n)}async function kV(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CG(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&ub(n)}function xG(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function ub(t){t.Ca.forEach(e=>{e.next()})}var m0,tP;(tP=m0||(m0={})).Ma="default",tP.Cache="cache";class DV{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.key=e}}class MV{constructor(e){this.key=e}}class AG{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=TL(e),this.tu=new gu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ZA,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=lf(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;f&&p?f.data.isEqual(p.data)?g!==E&&(r.track({type:3,doc:p}),b=!0):this.su(f,p)||(r.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),b=!0):f&&!p&&(r.track({type:1,doc:f}),b=!0,(l||u)&&(a=!0)),b&&(p?(o=o.add(p),s=E?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((c,d)=>function(p,g){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:b})}};return E(p)-E(g)}(c.type,d.type)||this.eu(c.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Wu(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new MV(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new OV(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sc="SyncEngine";class PG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kG{constructor(e){this.key=e,this.hu=!1}}class DG{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ls(a=>SL(a),Wy),this.Iu=new Map,this.Eu=new Set,this.du=new He(q.comparator),this.Au=new Map,this.Ru=new JT,this.Vu={},this.mu=new Map,this.fu=Ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OG(t,e,n=!0){const r=ev(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await NV(r,e,n,!0),i}async function MG(t,e){const n=ev(t);await NV(n,e,!0,!1)}async function NV(t,e,n,r){const i=await Dg(t.localStore,Yn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await cb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Zy(t.remoteStore,i),a}async function cb(t,e,n,r,i){t.pu=(d,f,p)=>async function(E,b,S,y){let w=b.view.ru(S);w.Cs&&(w=await h0(E.localStore,b.query,!1).then(({documents:T})=>b.view.ru(T,w)));const x=y&&y.targetChanges.get(b.targetId),O=y&&y.targetMismatches.get(b.targetId)!=null,k=b.view.applyChanges(w,E.isPrimaryClient,x,O);return g0(E,b.targetId,k.au),k.snapshot}(t,d,f,p);const s=await h0(t.localStore,e,!0),o=new AG(e,s.Qs),a=o.ru(s.documents),l=cf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);g0(t,n,u.au);const c=new PG(e,n,o);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function NG(t,e,n){const r=ne(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Wy(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $u(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zu(r.remoteStore,i.targetId),Hu(r,i.targetId)}).catch(Ao)):(Hu(r,i.targetId),await $u(r.localStore,i.targetId,!0))}async function LG(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zu(n.remoteStore,r.targetId))}async function VG(t,e,n){const r=pb(t);try{const i=await function(o,a){const l=ne(o),u=Ne.now(),c=a.reduce((p,g)=>p.add(g.key),_e());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=qn(),E=_e();return l.Ns.getEntries(p,c).next(b=>{g=b,g.forEach((S,y)=>{y.isValidDocument()||(E=E.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(b=>{d=b;const S=[];for(const y of a){const w=s7(y,d.get(y.key).overlayedDocument);w!=null&&S.push(new us(y.key,w,dL(w.value.mapValue),gn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,S,a)}).next(b=>{f=b;const S=b.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(p,b.batchId,S)})}).then(()=>({batchId:f.batchId,changes:IL(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new He(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Do(r,i.changes),await rc(r.remoteStore)}catch(i){const s=lb(i,"Failed to persist write");n.reject(s)}}async function LV(t,e){const n=ne(t);try{const r=await tG(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?re(o.hu,14607):i.removedDocuments.size>0&&(re(o.hu,42227),o.hu=!1))}),await Do(n,r,e)}catch(r){await Ao(r)}}function nP(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&ub(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FG(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new He(q.comparator);o=o.insert(s,dt.newNoDocument(s,ae.min()));const a=_e().add(s),l=new uf(ae.min(),new Map,new He(he),o,a);await LV(r,l),r.du=r.du.remove(s),r.Au.delete(e),fb(r)}else await $u(r.localStore,e,!1).then(()=>Hu(r,e,n)).catch(Ao)}async function BG(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await eG(n.localStore,e);db(n,r,null),hb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Do(n,i)}catch(i){await Ao(i)}}async function jG(t,e,n){const r=ne(t);try{const i=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(re(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);db(r,e,n),hb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Do(r,i)}catch(i){await Ao(i)}}function hb(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function db(t,e,n){const r=ne(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Hu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VV(t,r)})}function VV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),fb(t))}function g0(t,e,n){for(const r of n)r instanceof OV?(t.Ru.addReference(r.key,e),UG(t,r)):r instanceof MV?($(sc,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VV(t,r.key)):Z(19791,{wu:r})}function UG(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(sc,"New document in limbo: "+n),t.Eu.add(r),fb(t))}function fb(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(ke.fromString(e)),r=t.fu.next();t.Au.set(r,new kG(n)),t.du=t.du.insert(n,r),Zy(t.remoteStore,new ji(Yn(zy(n.path)),r,"TargetPurposeLimboResolution",Cn.ce))}}async function Do(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=tb.As(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const c=ne(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(u,f=>L.forEach(f.Es,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>L.forEach(f.ds,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Po(d))throw d;$(nb,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const p=c.Ms.get(f),g=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(g);c.Ms=c.Ms.insert(f,E)}}}(r.localStore,s))}async function $G(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){$(sc,"User change. New user:",e.toKey());const r=await fV(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new W(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(n,r.Ls)}}function zG(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let i=_e();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function WG(t,e){const n=ne(t),r=await h0(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&g0(n,e.targetId,i.au),i}async function HG(t,e){const n=ne(t);return gV(n.localStore,e).then(r=>Do(n,r))}async function KG(t,e,n,r){const i=ne(t),s=await function(a,l){const u=ne(a),c=ne(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.er(d,l).next(f=>f?u.localDocuments.getDocuments(d,f):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await rc(i.remoteStore):n==="acknowledged"||n==="rejected"?(db(i,e,r||null),hb(i,e),function(a,l){ne(ne(a).mutationQueue).ir(l)}(i.localStore,e)):Z(6720,"Unknown batchState",{Su:n}),await Do(i,s)):$(sc,"Cannot apply mutation batch with id: "+e)}async function qG(t,e){const n=ne(t);if(ev(n),pb(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await rP(n,r.toArray());n.gu=!0,await p0(n.remoteStore,!0);for(const s of i)Zy(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Hu(n,o),$u(n.localStore,o,!0))),zu(n.remoteStore,o)}),await i,await rP(n,r),function(o){const a=ne(o);a.Au.forEach((l,u)=>{zu(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new He(q.comparator)}(n),n.gu=!1,await p0(n.remoteStore,!1)}}async function rP(t,e,n){const r=ne(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Dg(r.localStore,Yn(l[0]));for(const u of l){const c=r.Tu.get(u),d=await WG(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await mV(r.localStore,o);a=await Dg(r.localStore,u),await cb(r,FV(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function FV(t){return wL(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function GG(t){return function(n){return ne(ne(n).persistence).Ts()}(ne(t).localStore)}async function XG(t,e,n,r){const i=ne(t);if(i.gu)return void $(sc,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await gV(i.localStore,EL(s[0])),a=uf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",wt.EMPTY_BYTE_STRING);await Do(i,o,a);break}case"rejected":await $u(i.localStore,e,!0),Hu(i,e,r);break;default:Z(64155,n)}}async function QG(t,e,n){const r=ev(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$(sc,"Adding an already active target "+i);continue}const s=await mV(r.localStore,i),o=await Dg(r.localStore,s);await cb(r,FV(s),o.targetId,!1,o.resumeToken),Zy(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await $u(r.localStore,i,!1).then(()=>{zu(r.remoteStore,i),Hu(r,i)}).catch(Ao)}}function ev(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FG.bind(null,e),e.Pu.H_=CG.bind(null,e.eventManager),e.Pu.yu=xG.bind(null,e.eventManager),e}function pb(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jG.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dV(this.persistence,new hV,e.initialUser,this.serializer)}Cu(e){return new ZT(Qy.mi,this.serializer)}Du(e){return new SV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class YG extends Ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){re(this.persistence.referenceDelegate instanceof kg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ZT(r=>kg.mi(r,n),this.serializer)}}class BV extends Ld{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await pb(this.xu.syncEngine),await rc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return dV(this.persistence,new hV,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new sV(r,e.asyncQueue,n)}Mu(e,n){const r=new aq(n,this.persistence);return new oq(e.asyncQueue,r)}Cu(e){const n=cV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new eb(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,EV(),gm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new SV}}class JG extends BV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof F_&&(this.sharedClientState.syncEngine={Co:KG.bind(null,n),vo:XG.bind(null,n),Fo:QG.bind(null,n),Ts:GG.bind(null,n),Do:HG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await qG(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=EV();if(!F_.v(n))throw new W(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new F_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$G.bind(null,this.syncEngine),await p0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RG}()}createDatastore(e){const n=Yy(e.databaseInfo.databaseId),r=function(s){return new lG(s)}(e.databaseInfo);return function(s,o,a,l){return new dG(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new pG(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>nP(this.syncEngine,n,0),function(){return QA.v()?new QA:new iG}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new DG(i,s,o,a,l,u);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);$(Ka,"RemoteStore shutting down."),s.Ea.add(5),await hf(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vd.provider={build:()=>new Vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="FirestoreClient";class ZG{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=DT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(Eo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lb(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function j_(t,e){t.asyncQueue.verifyOperationInProgress(),$(Eo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eX(t);$(Eo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>JA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>JA(e.remoteStore,i)),t._onlineComponents=e}async function eX(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Eo,"Using user provided OfflineComponentProvider");try{await j_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;bd("Error using user provided cache. Falling back to memory cache: "+n),await j_(t,new Ld)}}else $(Eo,"Using default OfflineComponentProvider"),await j_(t,new YG(void 0));return t._offlineComponents}async function UV(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Eo,"Using user provided OnlineComponentProvider"),await iP(t,t._uninitializedComponentsProvider._online)):($(Eo,"Using default OnlineComponentProvider"),await iP(t,new Vd))),t._onlineComponents}function tX(t){return UV(t).then(e=>e.syncEngine)}async function $V(t){const e=await UV(t),n=e.eventManager;return n.onListen=OG.bind(null,e.syncEngine),n.onUnlisten=NG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LG.bind(null,e.syncEngine),n}function nX(t,e,n={}){const r=new pi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new jV({next:f=>{c.Nu(),o.enqueueAndForget(()=>kV(s,d));const p=f.docs.has(a);!p&&f.fromCache?u.reject(new W(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?u.reject(new W(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new DV(zy(a.path),c,{includeMetadataChanges:!0,qa:!0});return PV(s,d)}(await $V(t),t.asyncQueue,e,n,r)),r.promise}function rX(t,e,n={}){const r=new pi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new jV({next:f=>{c.Nu(),o.enqueueAndForget(()=>kV(s,d)),f.fromCache&&l.source==="server"?u.reject(new W(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new DV(a,c,{includeMetadataChanges:!0,qa:!0});return PV(s,d)}(await $V(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX="firestore.googleapis.com",oP=!0;class aP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iX,this.ssl=oP}else this.host=e.host,this.ssl=e.ssl??oP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iV)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zV(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mb{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qK;switch(r.type){case"firstParty":return new QK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sP.get(n);r&&($("ComponentProvider","Removing Datastore"),sP.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sf(n,_t._jsonSchema))return new _t(e,r||null,new q(ke.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:bt("string",_t._jsonSchemaVersion),referencePath:bt("string")};class po extends cs{constructor(e,n,r){super(e,n,zy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new q(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function gb(t,e,...n){if(t=at(t),BN("collection","path",e),t instanceof mb){const r=ke.fromString(e,...n);return Yx(r),new po(t,null,r)}{if(!(t instanceof _t||t instanceof po))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Yx(r),new po(t.firestore,null,r)}}function oc(t,e,...n){if(t=at(t),arguments.length===1&&(e=DT.newId()),BN("doc","path",e),t instanceof mb){const r=ke.fromString(e,...n);return Qx(r),new _t(t,null,new q(r))}{if(!(t instanceof _t||t instanceof po))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Qx(r),new _t(t.firestore,t instanceof po?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="AsyncQueue";class uP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TV(this,"async_queue_retry"),this._c=()=>{const r=gm();r&&$(lP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new pi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;$(lP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vt("INTERNAL UNHANDLED ERROR: ",cP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ab.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:cP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function cP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ac extends mb{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new uP,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uP(e),this._firestoreClient=void 0,await e}}}function sX(t,e,n){n||(n=Eg);const r=Oy(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Va(s,e))return i;throw new W(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new W(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iV)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&xo(e.host)&&xT(e.host),r.initialize({options:e,instanceIdentifier:n})}function yb(t){if(t._terminated)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oX(t),t._firestoreClient}function oX(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,c){return new Nq(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,zV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ur(wt.fromBase64String(e))}catch(n){throw new W(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ur(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sf(e,ur._jsonSchema))return ur.fromBase64String(e.bytes)}}ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:bt("string",ur._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(e){if(sf(e,mi._jsonSchema))return new mi(e.latitude,e.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:bt("string",mi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sf(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gi(e.vectorValues);throw new W(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:bt("string",gi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX=/^__.*__$/;class lX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new nc(e,this.data,n,this.fieldTransforms)}}class WV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class _b{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _b({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HV(this.Ac)&&aX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yy(e)}Cc(e,n,r,i=!1){return new _b({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nv(t){const e=t._freezeSettings(),n=Yy(t._databaseId);return new uX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cX(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);wb("Data must be an object, but it was:",o,r);const a=qV(r,o);let l,u;if(s.merge)l=new xn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=y0(e,d,n);if(!o.contains(f))throw new W(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);XV(c,f)||c.push(f)}l=new xn(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new lX(new on(a),l,u)}class rv extends vb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rv}}function hX(t,e,n,r){const i=t.Cc(1,e,n);wb("Data must be an object, but it was:",i,r);const s=[],o=on.empty();ko(r,(l,u)=>{const c=Sb(e,l,n);u=at(u);const d=i.yc(c);if(u instanceof rv)s.push(c);else{const f=df(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new xn(s);return new WV(o,a,i.fieldTransforms)}function dX(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[y0(e,r,n)],l=[i];if(s.length%2!=0)throw new W(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(y0(e,s[f])),l.push(s[f+1]);const u=[],c=on.empty();for(let f=a.length-1;f>=0;--f)if(!XV(u,a[f])){const p=a[f];let g=l[f];g=at(g);const E=o.yc(p);if(g instanceof rv)u.push(p);else{const b=df(g,E);b!=null&&(u.push(p),c.set(p,b))}}const d=new xn(u);return new WV(c,d,o.fieldTransforms)}function KV(t,e,n,r=!1){return df(n,t.Cc(r?4:3,e))}function df(t,e){if(GV(t=at(t)))return wb("Unsupported field value:",e,t),qV(t,e);if(t instanceof vb)return function(r,i){if(!HV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=df(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Jq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ne.fromDate(r);return{timestampValue:Uu(i.serializer,s)}}if(r instanceof Ne){const s=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uu(i.serializer,s)}}if(r instanceof mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:FL(i.serializer,r._byteString)};if(r instanceof _t){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gi)return function(o,a){return{mapValue:{fields:{[BT]:{stringValue:jT},[Lu]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return WT(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${My(r)}`)}(t,e)}function qV(t,e){const n={};return rL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(t,(r,i)=>{const s=df(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function GV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof mi||t instanceof ur||t instanceof _t||t instanceof vb||t instanceof gi)}function wb(t,e,n){if(!GV(n)||!jN(n)){const r=My(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function y0(t,e,n){if((e=at(e))instanceof tv)return e._internalPath;if(typeof e=="string")return Sb(t,e);throw Lg("Field path arguments must be of type string or ",t,!1,void 0,n)}const fX=new RegExp("[~\\*/\\[\\]]");function Sb(t,e,n){if(e.search(fX)>=0)throw Lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tv(...e.split("."))._internalPath}catch{throw Lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(j.INVALID_ARGUMENT,a+t+l)}function XV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pX extends Eb{data(){return super.data()}}function Tb(t,e){return typeof e=="string"?Sb(t,e):e instanceof tv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mX(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bb{}class iv extends bb{}function v0(t,e,...n){let r=[];e instanceof bb&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Rb).length,a=s.filter(l=>l instanceof Ib).length;if(o>1||o>0&&a>0)throw new W(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ib extends iv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ib(e,n,r)}_apply(e){const n=this._parse(e);return QV(e._query,n),new cs(e.firestore,e.converter,r0(e._query,n))}_parse(e){const n=nv(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new W(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){pP(d,c);const g=[];for(const E of d)g.push(fP(l,s,E));f={arrayValue:{values:g}}}else f=fP(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||pP(d,c),f=KV(a,o,d,c==="in"||c==="not-in");return Te.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Rb extends bb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)QV(o,l),o=r0(o,l)}(e._query,n),new cs(e.firestore,e.converter,r0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cb extends iv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cb(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new W(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Od(s,o)}(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new nl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function hP(t,e="asc"){const n=e,r=Tb("orderBy",t);return Cb._create(r,n)}class xb extends iv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xb(e,n,r)}_apply(e){return new cs(e.firestore,e.converter,Ig(e._query,this._limit,this._limitType))}}function dP(t){return rq("limit",t),xb._create("limit",t,"F")}class Ab extends iv{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ab(e,n,r)}_apply(e){const n=yX(e,this.type,this._docOrFields,this._inclusive);return new cs(e.firestore,e.converter,function(i,s){return new nl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function gX(...t){return Ab._create("startAfter",t,!1)}function yX(t,e,n,r){if(n[0]=at(n[0]),n[0]instanceof Eb)return function(s,o,a,l,u){if(!l)throw new W(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const d of mu(s))if(d.field.isKeyField())c.push(Ua(o,l.key));else{const f=l.data.field(d.field);if(jy(f))throw new W(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=d.field.canonicalString();throw new W(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}c.push(f)}return new wo(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=nv(t.firestore);return function(o,a,l,u,c,d){const f=o.explicitOrderBy;if(c.length>f.length)throw new W(j.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<c.length;g++){const E=c[g];if(f[g].field.isKeyField()){if(typeof E!="string")throw new W(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof E}`);if(!$T(o)&&E.indexOf("/")!==-1)throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${E}' contains a slash.`);const b=o.path.child(ke.fromString(E));if(!q.isDocumentKey(b))throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const S=new q(b);p.push(Ua(a,S))}else{const b=KV(l,u,E);p.push(b)}}return new wo(p,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function fP(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new W(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$T(e)&&n.indexOf("/")!==-1)throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!q.isDocumentKey(r))throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ua(t,new q(r))}if(n instanceof _t)return Ua(t,n._key);throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${My(n)}.`)}function pP(t,e){if(!Array.isArray(t)||t.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QV(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vX{convertValue(e,n="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ko(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Lu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ye(o.doubleValue));return new gi(n)}convertGeoPoint(e){return new mi(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const n=es(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);re(GL(r),9688,{name:e});const i=new ja(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _X(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class dh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends Eb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:bt("string",xa._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class ym extends xa{data(e={}){return super.data(e)}}class yu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new dh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ym(this._firestore,this._userDataWriter,r.key,r,new dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ym(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ym(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:wX(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=DT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SX(t){t=Zi(t,_t);const e=Zi(t.firestore,ac);return nX(yb(e),t._key).then(n=>bX(e,t,n))}yu._jsonSchemaVersion="firestore/querySnapshot/1.0",yu._jsonSchema={type:bt("string",yu._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class YV extends vX{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function JV(t){t=Zi(t,cs);const e=Zi(t.firestore,ac),n=yb(e),r=new YV(e);return mX(t._query),rX(n,t._query).then(i=>new yu(e,r,t,i))}function Pb(t,e,n){t=Zi(t,_t);const r=Zi(t.firestore,ac),i=_X(t.converter,e,n);return kb(r,[cX(nv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gn.none())])}function EX(t,e,n,...r){t=Zi(t,_t);const i=Zi(t.firestore,ac),s=nv(i);let o;return o=typeof(e=at(e))=="string"||e instanceof tv?dX(s,"updateDoc",t._key,e,n,r):hX(s,"updateDoc",t._key,e),kb(i,[o.toMutation(t._key,gn.exists(!0))])}function TX(t){return kb(Zi(t.firestore,ac),[new qy(t._key,gn.none())])}function kb(t,e){return function(r,i){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>VG(await tX(r),i,s)),s.promise}(yb(t),e)}function bX(t,e,n){const r=n.docs.get(e._key),i=new YV(t);return new xa(t,i,e._key,r,new dh(n.hasPendingWrites,n.fromCache),e.converter)}class IX{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=AX(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function RX(t){return new IX(t)}class CX{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vd.provider,this._offlineComponentProvider={build:n=>new BV(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class xX{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vd.provider,this._offlineComponentProvider={build:n=>new JG(n,e==null?void 0:e.cacheSizeBytes)}}}function AX(t){return new CX(t==null?void 0:t.forceOwnership)}function PX(){return new xX}(function(e,n=!0){(function(i){tc=i})(tl),Fa(new yo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ac(new GK(r.getProvider("auth-internal")),new YK(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(u.options.projectId,c)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fi(Kx,qx,e),fi(Kx,qx,"esm2020")})();function ZV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kX=ZV,e2=new nf("auth","Firebase",ZV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new AT("@firebase/auth");function DX(t,...e){Vg.logLevel<=Ee.WARN&&Vg.warn(`Auth (${tl}): ${t}`,...e)}function vm(t,...e){Vg.logLevel<=Ee.ERROR&&Vg.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,...e){throw Db(t,...e)}function yi(t,...e){return Db(t,...e)}function t2(t,e,n){const r={...kX(),[e]:n};return new nf("auth","Firebase",r).create(e,{appName:t.name})}function Ki(t){return t2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Db(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e2.create(t,...e)}function le(t,e,...n){if(!t)throw Db(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vm(e),new Error(e)}function ns(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function OX(){return mP()==="http:"||mP()==="https:"}function mP(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OX()||IH()||"connection"in navigator)?navigator.onLine:!0}function NX(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.shortDelay=e,this.longDelay=n,ns(n>e,"Short delay should be less than long delay!"),this.isMobile=TH()||RH()}get(){return MX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t,e){ns(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FX=new ff(3e4,6e4);function hs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ds(t,e,n,r,i={}){return r2(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=rf({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return bH()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&xo(t.emulatorConfig.host)&&(u.credentials="include"),n2.fetch()(await i2(t,t.config.apiHost,n,a),u)})}async function r2(t,e,n){t._canInitEmulator=!1;const r={...LX,...e};try{const i=new jX(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Rp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Rp(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw t2(t,c,u);Ur(t,c)}}catch(i){if(i instanceof bi)throw i;Ur(t,"network-request-failed",{message:String(i)})}}async function pf(t,e,n,r,i={}){const s=await ds(t,e,n,r,i);return"mfaPendingCredential"in s&&Ur(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function i2(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Ob(t.config,i):`${t.config.apiScheme}://${i}`;return VX.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function BX(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),FX.get())})}}function Rp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yi(t,e,r);return i.customData._tokenResponse=n,i}function gP(t){return t!==void 0&&t.enterprise!==void 0}class UX{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BX(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $X(t,e){return ds(t,"GET","/v2/recaptchaConfig",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zX(t,e){return ds(t,"POST","/v1/accounts:delete",e)}async function Fg(t,e){return ds(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WX(t,e=!1){const n=at(t),r=await n.getIdToken(e),i=Mb(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Hh(U_(i.auth_time)),issuedAtTime:Hh(U_(i.iat)),expirationTime:Hh(U_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function U_(t){return Number(t)*1e3}function Mb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vm("JWT malformed, contained fewer than 3 sections"),null;try{const i=mN(n);return i?JSON.parse(i):(vm("Failed to decode base64 JWT payload"),null)}catch(i){return vm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yP(t){const e=Mb(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bi&&HX(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HX({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hh(this.lastLoginAt),this.creationTime=Hh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bg(t){var d;const e=t.auth,n=await t.getIdToken(),r=await Fd(t,Fg(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?s2(i.providerUserInfo):[],o=GX(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new w0(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function qX(t){const e=at(t);await Bg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GX(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function s2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XX(t,e){const n=await r2(t,{},async()=>{const r=rf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await i2(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&xo(t.emulatorConfig.host)&&(l.credentials="include"),n2.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QX(t,e){return ds(t,"POST","/v2/accounts:revokeToken",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=yP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XX(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new vu;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vu,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new KX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new w0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Fd(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WX(this,e)}reload(){return qX(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Ki(this.auth));const e=await this.getIdToken();return await Fd(this,zX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:g,stsTokenManager:E}=n;le(d&&E,e,"internal-error");const b=vu.fromJSON(this.name,E);le(typeof d=="string",e,"internal-error"),Ls(r,e.name),Ls(i,e.name),le(typeof f=="boolean",e,"internal-error"),le(typeof p=="boolean",e,"internal-error"),Ls(s,e.name),Ls(o,e.name),Ls(a,e.name),Ls(l,e.name),Ls(u,e.name),Ls(c,e.name);const S=new Lr({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:u,lastLoginAt:c});return g&&Array.isArray(g)&&(S.providerData=g.map(y=>({...y}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new vu;i.updateFromServerResponse(n);const s=new Lr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?s2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new vu;a.updateFromIdToken(r);const l=new Lr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new w0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=new Map;function $i(t){ns(t instanceof Function,"Expected a class definition");let e=vP.get(t);return e?(ns(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o2.type="NONE";const _P=o2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e,n){return`firebase:${t}:${e}:${n}`}class _u{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=_m(this.userKey,i.apiKey,s),this.fullPersistenceKey=_m("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fg(this.auth,{idToken:e}).catch(()=>{});return n?Lr._fromGetAccountInfoResponse(this.auth,n,e):null}return Lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _u($i(_P),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||$i(_P);const o=_m(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await Fg(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Lr._fromGetAccountInfoResponse(e,f,c)}else d=Lr._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new _u(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new _u(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d2(e))return"Blackberry";if(f2(e))return"Webos";if(l2(e))return"Safari";if((e.includes("chrome/")||u2(e))&&!e.includes("edge/"))return"Chrome";if(h2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a2(t=Ot()){return/firefox\//i.test(t)}function l2(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u2(t=Ot()){return/crios\//i.test(t)}function c2(t=Ot()){return/iemobile/i.test(t)}function h2(t=Ot()){return/android/i.test(t)}function d2(t=Ot()){return/blackberry/i.test(t)}function f2(t=Ot()){return/webos/i.test(t)}function Nb(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YX(t=Ot()){var e;return Nb(t)&&!!((e=window.navigator)!=null&&e.standalone)}function JX(){return CH()&&document.documentMode===10}function p2(t=Ot()){return Nb(t)||h2(t)||f2(t)||d2(t)||/windows phone/i.test(t)||c2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e=[]){let n;switch(t){case"Browser":n=wP(Ot());break;case"Worker":n=`${wP(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eQ(t,e={}){return ds(t,"GET","/v2/passwordPolicy",hs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQ=6;class nQ{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tQ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SP(this),this.idTokenSubscription=new SP(this),this.beforeStateQueue=new ZX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await _u.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fg(this,{idToken:e}),r=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Ki(this));const n=e?at(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eQ(this),n=new nQ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QX(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$i(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await _u.create(this,[$i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&DX(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Oo(t){return at(t)}class SP{constructor(e){this.auth=e,this.observer=null,this.addObserver=OH(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iQ(t){sv=t}function g2(t){return sv.loadJS(t)}function sQ(){return sv.recaptchaEnterpriseScript}function oQ(){return sv.gapiScript}function aQ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class lQ{constructor(){this.enterprise=new uQ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uQ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const cQ="recaptcha-enterprise",y2="NO_RECAPTCHA";class hQ{constructor(e){this.type=cQ,this.auth=Oo(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{$X(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new UX(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;gP(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(y2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lQ().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&gP(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=sQ();l.length!==0&&(l+=a),g2(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function EP(t,e,n,r=!1,i=!1){const s=new hQ(t);let o;if(i)o=y2;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function jg(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await EP(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await EP(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t,e){const n=Oy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Va(s,e??{}))return i;Ur(i,"already-initialized")}return n.initialize({options:e})}function fQ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pQ(t,e,n){const r=Oo(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=v2(e),{host:o,port:a}=mQ(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Va(u,r.config.emulator)&&Va(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,xo(o)?(xT(`${s}//${o}${l}`),wN("Auth",!0)):gQ()}function v2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mQ(t){const e=v2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:TP(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:TP(o)}}}function TP(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gQ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function yQ(t,e){return ds(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vQ(t,e){return pf(t,"POST","/v1/accounts:signInWithPassword",hs(t,e))}async function _Q(t,e){return ds(t,"POST","/v1/accounts:sendOobCode",hs(t,e))}async function wQ(t,e){return _Q(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SQ(t,e){return pf(t,"POST","/v1/accounts:signInWithEmailLink",hs(t,e))}async function EQ(t,e){return pf(t,"POST","/v1/accounts:signInWithEmailLink",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends Lb{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jg(e,n,"signInWithPassword",vQ);case"emailLink":return SQ(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jg(e,r,"signUpPassword",yQ);case"emailLink":return EQ(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t,e){return pf(t,"POST","/v1/accounts:signInWithIdp",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TQ="http://localhost";class qa extends Lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new qa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return wu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wu(e,n)}buildRequest(){const e={requestUri:TQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IQ(t){const e=oh(ah(t)).link,n=e?oh(ah(e)).deep_link_id:null,r=oh(ah(t)).deep_link_id;return(r?oh(ah(r)).link:null)||r||n||e||t}class Vb{constructor(e){const n=oh(ah(e)),r=n.apiKey??null,i=n.oobCode??null,s=bQ(n.mode??null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=IQ(e);try{return new Vb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.providerId=lc.PROVIDER_ID}static credential(e,n){return Bd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vb.parseLink(n);return le(r,"argument-error"),Bd._fromEmailAndCode(e,r.code,r.tenantId)}}lc.PROVIDER_ID="password";lc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends _2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends mf{constructor(){super("facebook.com")}static credential(e){return qa._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends mf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qa._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.GOOGLE_SIGN_IN_METHOD="google.com";Gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends mf{constructor(){super("github.com")}static credential(e){return qa._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends mf{constructor(){super("twitter.com")}static credential(e,n){return qa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qs.credential(n,r)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RQ(t,e){return pf(t,"POST","/v1/accounts:signUp",hs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Lr._fromIdTokenResponse(e,r,i),o=bP(r);return new Ga({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=bP(r);return new Ga({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function bP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends bi{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ug.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ug(e,n,r,i)}}function w2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ug._fromErrorAndOperation(t,s,e,r):s})}async function CQ(t,e,n=!1){const r=await Fd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ga._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xQ(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(Ki(r));const i="reauthenticate";try{const s=await Fd(t,w2(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Mb(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Ga._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(t,e,n=!1){if(Hn(t.app))return Promise.reject(Ki(t));const r="signIn",i=await w2(t,r,e),s=await Ga._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function AQ(t,e){return S2(Oo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t){const e=Oo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PQ(t,e,n){const r=Oo(t);await jg(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",wQ)}async function kQ(t,e,n){if(Hn(t.app))return Promise.reject(Ki(t));const r=Oo(t),o=await jg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RQ).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&E2(t),l}),a=await Ga._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function DQ(t,e,n){return Hn(t.app)?Promise.reject(Ki(t)):AQ(at(t),lc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&E2(t),r})}function OQ(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function MQ(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function NQ(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function LQ(t){return at(t).signOut()}const $g="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($g,"1"),this.storage.removeItem($g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ=1e3,FQ=10;class b2 extends T2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);JX()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,FQ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}b2.type="LOCAL";const BQ=b2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2 extends T2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I2.type="SESSION";const R2=I2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jQ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ov(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await jQ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ov.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Fb("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function $Q(t){vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function zQ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WQ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function HQ(){return C2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="firebaseLocalStorageDb",KQ=1,zg="firebaseLocalStorage",A2="fbase_key";class gf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function av(t,e){return t.transaction([zg],e?"readwrite":"readonly").objectStore(zg)}function qQ(){const t=indexedDB.deleteDatabase(x2);return new gf(t).toPromise()}function S0(){const t=indexedDB.open(x2,KQ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zg,{keyPath:A2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zg)?e(r):(r.close(),await qQ(),e(await S0()))})})}async function IP(t,e,n){const r=av(t,!0).put({[A2]:e,value:n});return new gf(r).toPromise()}async function GQ(t,e){const n=av(t,!1).get(e),r=await new gf(n).toPromise();return r===void 0?null:r.value}function RP(t,e){const n=av(t,!0).delete(e);return new gf(n).toPromise()}const XQ=800,QQ=3;class P2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ov._getInstance(HQ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await zQ(),!this.activeServiceWorker)return;this.sender=new UQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await S0();return await IP(e,$g,"1"),await RP(e,$g),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GQ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=av(i,!1).getAll();return new gf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P2.type="LOCAL";const YQ=P2;new ff(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQ(t,e){return e?$i(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZQ(t){return S2(t.auth,new Bb(t),t.bypassAuthState)}function eY(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),xQ(n,new Bb(t),t.bypassAuthState)}async function tY(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),CQ(n,new Bb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZQ;case"linkViaPopup":case"linkViaRedirect":return tY;case"reauthViaPopup":case"reauthViaRedirect":return eY;default:Ur(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY=new ff(2e3,1e4);class Zl extends k2{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Zl.currentPopupAction&&Zl.currentPopupAction.cancel(),Zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=Fb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nY.get())};e()}}Zl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rY="pendingRedirect",wm=new Map;class iY extends k2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wm.get(this.auth._key());if(!e){try{const r=await sY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wm.set(this.auth._key(),e)}return this.bypassAuthState||wm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sY(t,e){const n=lY(e),r=aY(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function oY(t,e){wm.set(t._key(),e)}function aY(t){return $i(t._redirectPersistence)}function lY(t){return _m(rY,t.config.apiKey,t.name)}async function uY(t,e,n=!1){if(Hn(t.app))return Promise.reject(Ki(t));const r=Oo(t),i=JQ(r,e),o=await new iY(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY=10*60*1e3;class hY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!D2(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(yi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cY&&this.cachedEventUids.clear(),this.cachedEventUids.has(CP(e))}saveEventToCache(e){this.cachedEventUids.add(CP(e)),this.lastProcessedEventTime=Date.now()}}function CP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function D2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fY(t,e={}){return ds(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mY=/^https?/;async function gY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fY(t);for(const n of e)try{if(yY(n))return}catch{}Ur(t,"unauthorized-domain")}function yY(t){const e=_0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mY.test(n))return!1;if(pY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vY=new ff(3e4,6e4);function xP(){const t=vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _Y(t){return new Promise((e,n)=>{var i,s,o;function r(){xP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xP(),n(yi(t,"network-request-failed"))},timeout:vY.get()})}if((s=(i=vi().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=vi().gapi)!=null&&o.load)r();else{const a=aQ("iframefcb");return vi()[a]=()=>{gapi.load?r():n(yi(t,"network-request-failed"))},g2(`${oQ()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Sm=null,e})}let Sm=null;function wY(t){return Sm=Sm||_Y(t),Sm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY=new ff(5e3,15e3),EY="__/auth/iframe",TY="emulator/auth/iframe",bY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RY(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ob(e,TY):`https://${t.config.authDomain}/${EY}`,r={apiKey:e.apiKey,appName:t.name,v:tl},i=IY.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rf(r).slice(1)}`}async function CY(t){const e=await wY(t),n=vi().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:RY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bY,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=yi(t,"network-request-failed"),a=vi().setTimeout(()=>{s(o)},SY.get());function l(){vi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AY=500,PY=600,kY="_blank",DY="http://localhost";class AP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OY(t,e,n,r=AY,i=PY){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...xY,width:r.toString(),height:i.toString(),top:s,left:o},u=Ot().toLowerCase();n&&(a=u2(u)?kY:n),a2(u)&&(e=e||DY,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(YX(u)&&a!=="_self")return MY(e||"",a),new AP(null);const d=window.open(e||"",a,c);le(d,t,"popup-blocked");try{d.focus()}catch{}return new AP(d)}function MY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NY="__/auth/handler",LY="emulator/auth/handler",VY=encodeURIComponent("fac");async function PP(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tl,eventId:i};if(e instanceof _2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DH(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof mf){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${VY}=${encodeURIComponent(l)}`:"";return`${FY(t)}?${rf(a).slice(1)}${u}`}function FY({config:t}){return t.emulator?Ob(t,LY):`https://${t.authDomain}/${NY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="webStorageSupport";class BY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R2,this._completeRedirectFn=uY,this._overrideRedirectResult=oY}async _openPopup(e,n,r,i){var o;ns((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await PP(e,n,r,_0(),i);return OY(e,s,Fb())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await PP(e,n,r,_0(),i);return $Q(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ns(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CY(e),r=new hY(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($_,{type:$_},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[$_];s!==void 0&&n(!!s),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p2()||l2()||Nb()}}const jY=BY;var kP="@firebase/auth",DP="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Y(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zY(t){Fa(new yo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m2(t)},u=new rQ(r,i,s,l);return fQ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fa(new yo("auth-internal",e=>{const n=Oo(e.getProvider("auth").getImmediate());return(r=>new UY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(kP,DP,$Y(t)),fi(kP,DP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WY=5*60,HY=_N("authIdTokenMaxAge")||WY;let OP=null;const KY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HY)return;const i=n==null?void 0:n.token;OP!==i&&(OP=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qY(t=xN()){const e=Oy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dQ(t,{popupRedirectResolver:jY,persistence:[YQ,BQ,R2]}),r=_N("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=KY(s.toString());MQ(n,o,()=>o(n.currentUser)),OQ(n,a=>o(a))}}const i=yN("auth");return i&&pQ(n,`http://${i}`),n}function GY(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}iQ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=yi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",GY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zY("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="firebasestorage.googleapis.com",M2="storageBucket",XY=2*60*1e3,QY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends bi{constructor(e,n,r=0){super(z_(e),`Firebase Storage: ${n} (${z_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return z_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ft;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function z_(t){return"storage/"+t}function jb(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(ft.UNKNOWN,t)}function YY(t){return new pt(ft.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JY(t){return new pt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(ft.UNAUTHENTICATED,t)}function eJ(){return new pt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tJ(t){return new pt(ft.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nJ(){return new pt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rJ(){return new pt(ft.CANCELED,"User canceled the upload/download.")}function iJ(t){return new pt(ft.INVALID_URL,"Invalid URL '"+t+"'.")}function sJ(t){return new pt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oJ(){return new pt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+M2+"' property when initializing the app?")}function aJ(){return new pt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lJ(){return new pt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uJ(t){return new pt(ft.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function E0(t){return new pt(ft.INVALID_ARGUMENT,t)}function N2(){return new pt(ft.APP_DELETED,"The Firebase app was deleted.")}function cJ(t){return new pt(ft.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kh(t,e){return new pt(ft.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yc(t){throw new pt(ft.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw sJ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(x){x.path_=decodeURIComponent(x.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},E=n===O2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",S=new RegExp(`^https?://${E}/${i}/${b}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:S,indices:{bucket:1,path:2},postModify:u}];for(let x=0;x<w.length;x++){const O=w[x],k=O.regex.exec(e);if(k){const T=k[O.indices.bucket];let v=k[O.indices.path];v||(v=""),r=new Gn(T,v),O.postModify(r);break}}if(r==null)throw iJ(e);return r}}class hJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dJ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...b){u||(u=!0,e.apply(null,b))}function d(b){i=setTimeout(()=>{i=null,t(p,l())},b)}function f(){s&&clearTimeout(s)}function p(b,...S){if(u){f();return}if(b){f(),c.call(null,b,...S);return}if(l()||o){f(),c.call(null,b,...S);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,d(w)}let g=!1;function E(b){g||(g=!0,f(),!u&&(i!==null?(b||(a=2),clearTimeout(i),d(0)):b||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function fJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pJ(t){return t!==void 0}function mJ(t){return typeof t=="object"&&!Array.isArray(t)}function Ub(t){return typeof t=="string"||t instanceof String}function MP(t){return $b()&&t instanceof Blob}function $b(){return typeof Blob<"u"}function NP(t,e,n,r){if(r<e)throw E0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw E0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function L2(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Aa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Aa||(Aa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(e,n,r,i,s,o,a,l,u,c,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,E)=>{this.resolve_=g,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Cp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Aa.NO_ERROR,l=s.getStatus();if(!a||gJ(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Aa.ABORT;r(!1,new Cp(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Cp(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());pJ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=jb();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?N2():rJ();o(l)}else{const l=nJ();o(l)}};this.canceled_?n(!1,new Cp(!1,null,!0)):this.backoffId_=dJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function vJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _J(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function SJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function EJ(t,e,n,r,i,s,o=!0,a=!1){const l=L2(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return wJ(c,e),vJ(c,n),_J(c,s),SJ(c,r),new yJ(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function bJ(...t){const e=TJ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if($b())return new Blob(t);throw new pt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function IJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(t){if(typeof atob>"u")throw uJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class W_{constructor(e,n){this.data=e,this.contentType=n||null}}function V2(t,e){switch(t){case Vr.RAW:return new W_(F2(e));case Vr.BASE64:case Vr.BASE64URL:return new W_(B2(t,e));case Vr.DATA_URL:return new W_(xJ(e),AJ(e))}throw jb()}function F2(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function CJ(t){let e;try{e=decodeURIComponent(t)}catch{throw Kh(Vr.DATA_URL,"Malformed data URL.")}return F2(e)}function B2(t,e){switch(t){case Vr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Kh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Kh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=RJ(e)}catch(i){throw i.message.includes("polyfill")?i:Kh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class j2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Kh(Vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=PJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function xJ(t){const e=new j2(t);return e.base64?B2(Vr.BASE64,e.rest):CJ(e.rest)}function AJ(t){return new j2(t).contentType}function PJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){let r=0,i="";MP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(MP(this.data_)){const r=this.data_,i=IJ(r,e,n);return i===null?null:new Ys(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ys(r,!0)}}static getBlob(...e){if($b()){const n=e.map(r=>r instanceof Ys?r.data_:r);return new Ys(bJ.apply(null,n))}else{const n=e.map(o=>Ub(o)?V2(Vr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ys(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){let e;try{e=JSON.parse(t)}catch{return null}return mJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function DJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(t,e){return e}class dn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||OJ}}let xp=null;function MJ(t){return!Ub(t)||t.length<2?t:$2(t)}function z2(){if(xp)return xp;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(s,o){return MJ(o)}const n=new dn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new dn("size");return i.xform=r,t.push(i),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),xp=t,xp}function NJ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Gn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function LJ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return NJ(r,t),r}function W2(t,e,n){const r=U2(e);return r===null?null:LJ(t,r,n)}function VJ(t,e,n,r){const i=U2(e);if(i===null||!Ub(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,d=t.fullPath,f="/b/"+o(c)+"/o/"+o(d),p=zb(f,n,r),g=L2({alt:"media",token:u});return p+g})[0]}function FJ(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class H2{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){if(!t)throw jb()}function BJ(t,e){function n(r,i){const s=W2(t,i,e);return K2(s!==null),s}return n}function jJ(t,e){function n(r,i){const s=W2(t,i,e);return K2(s!==null),VJ(s,i,t.host,t._protocol)}return n}function q2(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=eJ():i=ZY():n.getStatus()===402?i=JY(t.bucket):n.getStatus()===403?i=tJ(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function UJ(t){const e=q2(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=YY(t.path)),s.serverResponse=i.serverResponse,s}return n}function $J(t,e,n){const r=e.fullServerUrl(),i=zb(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new H2(i,s,jJ(t,n),o);return a.errorHandler=UJ(e),a}function zJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function WJ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=zJ(null,e)),r}function HJ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let x=0;x<2;x++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=WJ(e,r,i),c=FJ(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Ys.getBlob(d,r,f);if(p===null)throw aJ();const g={name:u.fullPath},E=zb(s,t.host,t._protocol),b="POST",S=t.maxUploadRetryTime,y=new H2(E,b,BJ(t,n),S);return y.urlParams=g,y.headers=o,y.body=p.uploadData(),y.errorHandler=q2(e),y}class KJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Aa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Aa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Aa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Yc("cannot .send() more than once");if(xo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qJ extends KJ{initXhr(){this.xhr_.responseType="text"}}function G2(){return new qJ}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xa(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $2(this._location.path)}get storage(){return this._service}get parent(){const e=kJ(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new Xa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cJ(e)}}function GJ(t,e,n){t._throwIfRoot("uploadBytes");const r=HJ(t.storage,t._location,z2(),new Ys(e,!0),n);return t.storage.makeRequestWithTokens(r,G2).then(i=>({metadata:i,ref:t}))}function XJ(t,e,n=Vr.RAW,r){t._throwIfRoot("uploadString");const i=V2(n,e),s={...r};return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),GJ(t,i.data,s)}function QJ(t){t._throwIfRoot("getDownloadURL");const e=$J(t.storage,t._location,z2());return t.storage.makeRequestWithTokens(e,G2).then(n=>{if(n===null)throw lJ();return n})}function YJ(t,e){const n=DJ(t._location.path,e),r=new Gn(t._location.bucket,n);return new Xa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(t){return/^[A-Za-z]+:\/\//.test(t)}function ZJ(t,e){return new Xa(t,e)}function X2(t,e){if(t instanceof Wb){const n=t;if(n._bucket==null)throw oJ();const r=new Xa(n,n._bucket);return e!=null?X2(r,e):r}else return e!==void 0?YJ(t,e):t}function eZ(t,e){if(e&&JJ(e)){if(t instanceof Wb)return ZJ(t,e);throw E0("To use ref(service, url), the first argument must be a Storage instance.")}else return X2(t,e)}function LP(t,e){const n=e==null?void 0:e[M2];return n==null?null:Gn.makeFromBucketSpec(n,t)}function tZ(t,e,n,r={}){t.host=`${e}:${n}`;const i=xo(e);i&&(xT(`https://${t.host}/b`),wN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:wH(s,t.app.options.projectId))}class Wb{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=O2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XY,this._maxUploadRetryTime=QY,this._requests=new Set,i!=null?this._bucket=Gn.makeFromBucketSpec(i,this._host):this._bucket=LP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=LP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new hJ(N2());{const o=EJ(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const VP="@firebase/storage",FP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="storage";function nZ(t,e,n,r){return t=at(t),XJ(t,e,n,r)}function rZ(t){return t=at(t),QJ(t)}function iZ(t,e){return t=at(t),eZ(t,e)}function sZ(t=xN(),e){t=at(t);const r=Oy(t,Q2).getImmediate({identifier:e}),i=vH("storage");return i&&oZ(r,...i),r}function oZ(t,e,n,r={}){tZ(t,e,n,r)}function aZ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Wb(n,r,i,e,tl)}function lZ(){Fa(new yo(Q2,aZ,"PUBLIC").setMultipleInstances(!0)),fi(VP,FP,""),fi(VP,FP,"esm2020")}lZ();const uZ={apiKey:"AIzaSyBbUnVpOyU1eSSFrQi79ztijFjT0bvMosc",authDomain:"pocket-stylist-3c0fe.firebaseapp.com",projectId:"pocket-stylist-3c0fe",storageBucket:"pocket-stylist-3c0fe.firebasestorage.app",messagingSenderId:"274246899324",appId:"1:274246899324:web:845c91cdaab06299df1bf9"},Hb=CN(uZ),uc=qY(Hb),cZ=sZ(Hb),Mo=sX(Hb,{localCache:RX({tabManager:PX()})}),hZ=(t,e)=>DQ(uc,t,e),dZ=(t,e)=>kQ(uc,t,e),fZ=()=>LQ(uc),pZ=t=>PQ(uc,t),Y2=I.createContext();function J2(){return I.useContext(Y2)}function mZ({children:t}){const[e,n]=I.useState(null),[r,i]=I.useState(!0);I.useEffect(()=>NQ(uc,a=>{n(a),i(!1)}),[]);const s={currentUser:e,loading:r};return M.jsx(Y2.Provider,{value:s,children:!r&&t})}const gZ="Left",yZ="Right",vZ="Up",_Z="Down",eu={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},T0={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},BP="mousemove",jP="mouseup",wZ="touchend",SZ="touchmove",EZ="touchstart";function TZ(t,e,n,r){return t>e?n>0?yZ:gZ:r>0?_Z:vZ}function UP(t,e){if(e===0)return t;const n=Math.PI/180*e,r=t[0]*Math.cos(n)+t[1]*Math.sin(n),i=t[1]*Math.cos(n)-t[0]*Math.sin(n);return[r,i]}function bZ(t,e){const n=c=>{const d="touches"in c;d&&c.touches.length>1||t((f,p)=>{p.trackMouse&&!d&&(document.addEventListener(BP,r),document.addEventListener(jP,o));const{clientX:g,clientY:E}=d?c.touches[0]:c,b=UP([g,E],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},f),T0),{initial:b.slice(),xy:b,start:c.timeStamp||0})})},r=c=>{t((d,f)=>{const p="touches"in c;if(p&&c.touches.length>1)return d;if(c.timeStamp-d.start>f.swipeDuration)return d.swiping?Object.assign(Object.assign({},d),{swiping:!1}):d;const{clientX:g,clientY:E}=p?c.touches[0]:c,[b,S]=UP([g,E],f.rotationAngle),y=b-d.xy[0],w=S-d.xy[1],x=Math.abs(y),O=Math.abs(w),k=(c.timeStamp||0)-d.start,T=Math.sqrt(x*x+O*O)/(k||1),v=[y/(k||1),w/(k||1)],R=TZ(x,O,y,w),C=typeof f.delta=="number"?f.delta:f.delta[R.toLowerCase()]||eu.delta;if(x<C&&O<C&&!d.swiping)return d;const A={absX:x,absY:O,deltaX:y,deltaY:w,dir:R,event:c,first:d.first,initial:d.initial,velocity:T,vxvy:v};A.first&&f.onSwipeStart&&f.onSwipeStart(A),f.onSwiping&&f.onSwiping(A);let N=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${R}`])&&(N=!0),N&&f.preventScrollOnSwipe&&f.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},d),{first:!1,eventData:A,swiping:!0})})},i=c=>{t((d,f)=>{let p;if(d.swiping&&d.eventData){if(c.timeStamp-d.start<f.swipeDuration){p=Object.assign(Object.assign({},d.eventData),{event:c}),f.onSwiped&&f.onSwiped(p);const g=f[`onSwiped${p.dir}`];g&&g(p)}}else f.onTap&&f.onTap({event:c});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},d),T0),{eventData:p})})},s=()=>{document.removeEventListener(BP,r),document.removeEventListener(jP,o)},o=c=>{s(),i(c)},a=(c,d)=>{let f=()=>{};if(c&&c.addEventListener){const p=Object.assign(Object.assign({},eu.touchEventOptions),d.touchEventOptions),g=[[EZ,n,p],[SZ,r,Object.assign(Object.assign({},p),d.preventScrollOnSwipe?{passive:!1}:{})],[wZ,i,p]];g.forEach(([E,b,S])=>c.addEventListener(E,b,S)),f=()=>g.forEach(([E,b])=>c.removeEventListener(E,b))}return f},u={ref:c=>{c!==null&&t((d,f)=>{if(d.el===c)return d;const p={};return d.el&&d.el!==c&&d.cleanUpTouch&&(d.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&c&&(p.cleanUpTouch=a(c,f)),Object.assign(Object.assign(Object.assign({},d),{el:c}),p)})}};return e.trackMouse&&(u.onMouseDown=n),[u,a]}function IZ(t,e,n,r){return!e.trackTouch||!t.el?(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0})):t.cleanUpTouch?e.preventScrollOnSwipe!==n.preventScrollOnSwipe||e.touchEventOptions.passive!==n.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:r(t.el,e)})}function RZ(t){const{trackMouse:e}=t,n=I.useRef(Object.assign({},T0)),r=I.useRef(Object.assign({},eu)),i=I.useRef(Object.assign({},r.current));i.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},eu),t);let s;for(s in eu)r.current[s]===void 0&&(r.current[s]=eu[s]);const[o,a]=I.useMemo(()=>bZ(l=>n.current=l(n.current,r.current),{trackMouse:e}),[e]);return n.current=IZ(n.current,r.current,i.current,a),o}var Z2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$P=gt.createContext&&gt.createContext(Z2),CZ=["attr","size","title"];function xZ(t,e){if(t==null)return{};var n=AZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Wg(){return Wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wg.apply(this,arguments)}function zP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(n),!0).forEach(function(r){PZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PZ(t,e,n){return e=kZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kZ(t){var e=DZ(t,"string");return typeof e=="symbol"?e:e+""}function DZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eF(t){return t&&t.map((e,n)=>gt.createElement(e.tag,Hg({key:n},e.attr),eF(e.child)))}function OZ(t){return e=>gt.createElement(MZ,Wg({attr:Hg({},t.attr)},e),eF(t.child))}function MZ(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=xZ(t,CZ),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),gt.createElement("svg",Wg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Hg(Hg({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&gt.createElement("title",null,s),t.children)};return $P!==void 0?gt.createElement($P.Consumer,null,n=>e(n)):e(Z2)}function NZ(t){return OZ({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}const Kb=I.createContext({});function qb(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gb=typeof window<"u",tF=Gb?I.useLayoutEffect:I.useEffect,lv=I.createContext(null);function Xb(t,e){t.indexOf(e)===-1&&t.push(e)}function Qb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const rs=(t,e,n)=>n>e?e:n<t?t:n;let Yb=()=>{};const is={},nF=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function rF(t){return typeof t=="object"&&t!==null}const iF=t=>/^0[^.\s]+$/u.test(t);function Jb(t){let e;return()=>(e===void 0&&(e=t()),e)}const mr=t=>t,LZ=(t,e)=>n=>e(t(n)),yf=(...t)=>t.reduce(LZ),jd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Zb{constructor(){this.subscriptions=[]}add(e){return Xb(this.subscriptions,e),()=>Qb(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _i=t=>t*1e3,hr=t=>t/1e3;function sF(t,e){return e?t*(1e3/e):0}const oF=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,VZ=1e-7,FZ=12;function BZ(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=oF(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>VZ&&++a<FZ);return o}function vf(t,e,n,r){if(t===e&&n===r)return mr;const i=s=>BZ(s,0,1,t,n);return s=>s===0||s===1?s:oF(i(s),e,r)}const aF=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,lF=t=>e=>1-t(1-e),uF=vf(.33,1.53,.69,.99),eI=lF(uF),cF=aF(eI),hF=t=>(t*=2)<1?.5*eI(t):.5*(2-Math.pow(2,-10*(t-1))),tI=t=>1-Math.sin(Math.acos(t)),dF=lF(tI),fF=aF(tI),jZ=vf(.42,0,1,1),UZ=vf(0,0,.58,1),pF=vf(.42,0,.58,1),$Z=t=>Array.isArray(t)&&typeof t[0]!="number",mF=t=>Array.isArray(t)&&typeof t[0]=="number",zZ={linear:mr,easeIn:jZ,easeInOut:pF,easeOut:UZ,circIn:tI,circInOut:fF,circOut:dF,backIn:eI,backInOut:cF,backOut:uF,anticipate:hF},WZ=t=>typeof t=="string",WP=t=>{if(mF(t)){Yb(t.length===4);const[e,n,r,i]=t;return vf(e,n,r,i)}else if(WZ(t))return zZ[t];return t},Ap=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function HZ(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),t()),c(a)}const u={schedule:(c,d=!1,f=!1)=>{const g=f&&i?n:r;return d&&o.add(c),g.has(c)||g.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const KZ=40;function gF(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Ap.reduce((w,x)=>(w[x]=HZ(s),w),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:f,render:p,postRender:g}=o,E=()=>{const w=is.useManualTiming?i.timestamp:performance.now();n=!1,is.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,KZ),1)),i.timestamp=w,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},b=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:Ap.reduce((w,x)=>{const O=o[x];return w[x]=(k,T=!1,v=!1)=>(n||b(),O.schedule(k,T,v)),w},{}),cancel:w=>{for(let x=0;x<Ap.length;x++)o[Ap[x]].cancel(w)},state:i,steps:o}}const{schedule:Ze,cancel:To,state:Ht,steps:H_}=gF(typeof requestAnimationFrame<"u"?requestAnimationFrame:mr,!0);let Em;function qZ(){Em=void 0}const An={now:()=>(Em===void 0&&An.set(Ht.isProcessing||is.useManualTiming?Ht.timestamp:performance.now()),Em),set:t=>{Em=t,queueMicrotask(qZ)}},yF=t=>e=>typeof e=="string"&&e.startsWith(t),vF=yF("--"),GZ=yF("var(--"),nI=t=>GZ(t)?XZ.test(t.split("/*")[0].trim()):!1,XZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,cc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ud={...cc,transform:t=>rs(0,1,t)},Pp={...cc,default:1},qh=t=>Math.round(t*1e5)/1e5,rI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function QZ(t){return t==null}const YZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,iI=(t,e)=>n=>!!(typeof n=="string"&&YZ.test(n)&&n.startsWith(t)||e&&!QZ(n)&&Object.prototype.hasOwnProperty.call(n,e)),_F=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(rI);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},JZ=t=>rs(0,255,t),K_={...cc,transform:t=>Math.round(JZ(t))},_a={test:iI("rgb","red"),parse:_F("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+K_.transform(t)+", "+K_.transform(e)+", "+K_.transform(n)+", "+qh(Ud.transform(r))+")"};function ZZ(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const b0={test:iI("#"),parse:ZZ,transform:_a.transform},_f=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),js=_f("deg"),wi=_f("%"),ue=_f("px"),eee=_f("vh"),tee=_f("vw"),HP={...wi,parse:t=>wi.parse(t)/100,transform:t=>wi.transform(t*100)},tu={test:iI("hsl","hue"),parse:_F("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wi.transform(qh(e))+", "+wi.transform(qh(n))+", "+qh(Ud.transform(r))+")"},Et={test:t=>_a.test(t)||b0.test(t)||tu.test(t),parse:t=>_a.test(t)?_a.parse(t):tu.test(t)?tu.parse(t):b0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_a.transform(t):tu.transform(t),getAnimatableNone:t=>{const e=Et.parse(t);return e.alpha=0,Et.transform(e)}},nee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ree(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(rI))==null?void 0:e.length)||0)+(((n=t.match(nee))==null?void 0:n.length)||0)>0}const wF="number",SF="color",iee="var",see="var(",KP="${}",oee=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $d(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(oee,l=>(Et.test(l)?(r.color.push(s),i.push(SF),n.push(Et.parse(l))):l.startsWith(see)?(r.var.push(s),i.push(iee),n.push(l)):(r.number.push(s),i.push(wF),n.push(parseFloat(l))),++s,KP)).split(KP);return{values:n,split:a,indexes:r,types:i}}function EF(t){return $d(t).values}function TF(t){const{split:e,types:n}=$d(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===wF?s+=qh(i[o]):a===SF?s+=Et.transform(i[o]):s+=i[o]}return s}}const aee=t=>typeof t=="number"?0:Et.test(t)?Et.getAnimatableNone(t):t;function lee(t){const e=EF(t);return TF(t)(e.map(aee))}const bo={test:ree,parse:EF,createTransformer:TF,getAnimatableNone:lee};function q_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function uee({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=q_(l,a,t+1/3),s=q_(l,a,t),o=q_(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Kg(t,e){return n=>n>0?e:t}const rt=(t,e,n)=>t+(e-t)*n,G_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},cee=[b0,_a,tu],hee=t=>cee.find(e=>e.test(t));function qP(t){const e=hee(t);if(!e)return!1;let n=e.parse(t);return e===tu&&(n=uee(n)),n}const GP=(t,e)=>{const n=qP(t),r=qP(e);if(!n||!r)return Kg(t,e);const i={...n};return s=>(i.red=G_(n.red,r.red,s),i.green=G_(n.green,r.green,s),i.blue=G_(n.blue,r.blue,s),i.alpha=rt(n.alpha,r.alpha,s),_a.transform(i))},I0=new Set(["none","hidden"]);function dee(t,e){return I0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function fee(t,e){return n=>rt(t,e,n)}function sI(t){return typeof t=="number"?fee:typeof t=="string"?nI(t)?Kg:Et.test(t)?GP:gee:Array.isArray(t)?bF:typeof t=="object"?Et.test(t)?GP:pee:Kg}function bF(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>sI(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function pee(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=sI(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function mee(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const gee=(t,e)=>{const n=bo.createTransformer(e),r=$d(t),i=$d(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?I0.has(t)&&!i.values.length||I0.has(e)&&!r.values.length?dee(t,e):yf(bF(mee(r,i),i.values),n):Kg(t,e)};function IF(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rt(t,e,n):sI(t)(t,e)}const yee=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ze.update(e,n),stop:()=>To(e),now:()=>Ht.isProcessing?Ht.timestamp:An.now()}},RF=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},qg=2e4;function oI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<qg;)e+=n,r=t.next(e);return e>=qg?1/0:e}function vee(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(oI(r),qg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:hr(i)}}const _ee=5;function CF(t,e,n){const r=Math.max(e-_ee,0);return sF(n-t(r),e-r)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},X_=.001;function wee({duration:t=ct.duration,bounce:e=ct.bounce,velocity:n=ct.velocity,mass:r=ct.mass}){let i,s,o=1-e;o=rs(ct.minDamping,ct.maxDamping,o),t=rs(ct.minDuration,ct.maxDuration,hr(t)),o<1?(i=u=>{const c=u*o,d=c*t,f=c-n,p=R0(u,o),g=Math.exp(-d);return X_-f/p*g},s=u=>{const d=u*o*t,f=d*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,g=Math.exp(-d),E=R0(Math.pow(u,2),o);return(-i(u)+X_>0?-1:1)*((f-p)*g)/E}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-X_+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=Eee(i,s,a);if(t=_i(t),isNaN(l))return{stiffness:ct.stiffness,damping:ct.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const See=12;function Eee(t,e,n){let r=n;for(let i=1;i<See;i++)r=r-t(r)/e(r);return r}function R0(t,e){return t*Math.sqrt(1-e*e)}const Tee=["duration","bounce"],bee=["stiffness","damping","mass"];function XP(t,e){return e.some(n=>t[n]!==void 0)}function Iee(t){let e={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...t};if(!XP(t,bee)&&XP(t,Tee))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*rs(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ct.mass,stiffness:i,damping:s}}else{const n=wee(t);e={...e,...n,mass:ct.mass},e.isResolvedFromDuration=!0}return e}function Gg(t=ct.visualDuration,e=ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=Iee({...n,velocity:-hr(n.velocity||0)}),g=f||0,E=u/(2*Math.sqrt(l*c)),b=o-s,S=hr(Math.sqrt(l/c)),y=Math.abs(b)<5;r||(r=y?ct.restSpeed.granular:ct.restSpeed.default),i||(i=y?ct.restDelta.granular:ct.restDelta.default);let w;if(E<1){const O=R0(S,E);w=k=>{const T=Math.exp(-E*S*k);return o-T*((g+E*S*b)/O*Math.sin(O*k)+b*Math.cos(O*k))}}else if(E===1)w=O=>o-Math.exp(-S*O)*(b+(g+S*b)*O);else{const O=S*Math.sqrt(E*E-1);w=k=>{const T=Math.exp(-E*S*k),v=Math.min(O*k,300);return o-T*((g+E*S*b)*Math.sinh(v)+O*b*Math.cosh(v))/O}}const x={calculatedDuration:p&&d||null,next:O=>{const k=w(O);if(p)a.done=O>=d;else{let T=O===0?g:0;E<1&&(T=O===0?_i(g):CF(w,O,k));const v=Math.abs(T)<=r,R=Math.abs(o-k)<=i;a.done=v&&R}return a.value=a.done?o:k,a},toString:()=>{const O=Math.min(oI(x),qg),k=RF(T=>x.next(O*T).value,O,30);return O+"ms "+k},toTransition:()=>{}};return x}Gg.applyToOptions=t=>{const e=vee(t,100,Gg);return t.ease=e.ease,t.duration=_i(e.duration),t.type="keyframes",t};function C0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},p=v=>a!==void 0&&v<a||l!==void 0&&v>l,g=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let E=n*e;const b=d+E,S=o===void 0?b:o(b);S!==b&&(E=S-d);const y=v=>-E*Math.exp(-v/r),w=v=>S+y(v),x=v=>{const R=y(v),C=w(v);f.done=Math.abs(R)<=u,f.value=f.done?S:C};let O,k;const T=v=>{p(f.value)&&(O=v,k=Gg({keyframes:[f.value,g(f.value)],velocity:CF(w,v,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:v=>{let R=!1;return!k&&O===void 0&&(R=!0,x(v),T(v)),O!==void 0&&v>=O?k.next(v-O):(!R&&x(v),f)}}}function Ree(t,e,n){const r=[],i=n||is.mix||IF,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||mr:e;a=yf(l,a)}r.push(a)}return r}function Cee(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Yb(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Ree(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const f=jd(t[d],t[d+1],c);return a[d](f)};return n?c=>u(rs(t[0],t[s-1],c)):u}function xee(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=jd(0,e,r);t.push(rt(n,1,i))}}function Aee(t){const e=[0];return xee(e,t.length-1),e}function Pee(t,e){return t.map(n=>n*e)}function kee(t,e){return t.map(()=>e||pF).splice(0,t.length-1)}function Gh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=$Z(r)?r.map(WP):WP(r),s={done:!1,value:e[0]},o=Pee(n&&n.length===e.length?n:Aee(e),t),a=Cee(o,e,{ease:Array.isArray(i)?i:kee(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Dee=t=>t!==null;function aI(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Dee),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Oee={decay:C0,inertia:C0,tween:Gh,keyframes:Gh,spring:Gg};function xF(t){typeof t.type=="string"&&(t.type=Oee[t.type])}class lI{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Mee=t=>t/100;class uI extends lI{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==An.now()&&this.tick(An.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xF(e);const{type:n=Gh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Gh;l!==Gh&&typeof a[0]!="number"&&(this.mixKeyframes=yf(Mee,IF(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=oI(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:f,repeatDelay:p,type:g,onUpdate:E,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,x=r;if(d){const v=Math.min(this.currentTime,i)/a;let R=Math.floor(v),C=v%1;!C&&v>=1&&(C=1),C===1&&R--,R=Math.min(R,d+1),!!(R%2)&&(f==="reverse"?(C=1-C,p&&(C-=p/a)):f==="mirror"&&(x=o)),w=rs(0,1,C)*a}const O=y?{done:!1,value:c[0]}:x.next(w);s&&(O.value=s(O.value));let{done:k}=O;!y&&l!==null&&(k=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return T&&g!==C0&&(O.value=aI(c,this.options,b,this.speed)),E&&E(O.value),T&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return hr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+hr(e)}get time(){return hr(this.currentTime)}set time(e){var n;e=_i(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(An.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=hr(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=yee,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(An.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Nee(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wa=t=>t*180/Math.PI,x0=t=>{const e=wa(Math.atan2(t[1],t[0]));return A0(e)},Lee={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:x0,rotateZ:x0,skewX:t=>wa(Math.atan(t[1])),skewY:t=>wa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},A0=t=>(t=t%360,t<0&&(t+=360),t),QP=x0,YP=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),JP=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Vee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YP,scaleY:JP,scale:t=>(YP(t)+JP(t))/2,rotateX:t=>A0(wa(Math.atan2(t[6],t[5]))),rotateY:t=>A0(wa(Math.atan2(-t[2],t[0]))),rotateZ:QP,rotate:QP,skewX:t=>wa(Math.atan(t[4])),skewY:t=>wa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function P0(t){return t.includes("scale")?1:0}function k0(t,e){if(!t||t==="none")return P0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Vee,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Lee,i=a}if(!i)return P0(e);const s=r[e],o=i[1].split(",").map(Bee);return typeof s=="function"?s(o):o[s]}const Fee=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return k0(n,e)};function Bee(t){return parseFloat(t.trim())}const hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dc=new Set(hc),ZP=t=>t===cc||t===ue,jee=new Set(["x","y","z"]),Uee=hc.filter(t=>!jee.has(t));function $ee(t){const e=[];return Uee.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Pa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>k0(e,"x"),y:(t,{transform:e})=>k0(e,"y")};Pa.translateX=Pa.x;Pa.translateY=Pa.y;const ka=new Set;let D0=!1,O0=!1,M0=!1;function AF(){if(O0){const t=Array.from(ka).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=$ee(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}O0=!1,D0=!1,ka.forEach(t=>t.complete(M0)),ka.clear()}function PF(){ka.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(O0=!0)})}function zee(){M0=!0,PF(),AF(),M0=!1}class cI{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ka.add(this),D0||(D0=!0,Ze.read(PF),Ze.resolveKeyframes(AF))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Nee(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ka.delete(this)}cancel(){this.state==="scheduled"&&(ka.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Wee=t=>t.startsWith("--");function Hee(t,e,n){Wee(e)?t.style.setProperty(e,n):t.style[e]=n}const Kee=Jb(()=>window.ScrollTimeline!==void 0),qee={};function Gee(t,e){const n=Jb(t);return()=>qee[e]??n()}const kF=Gee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,e1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fh([0,.65,.55,1]),circOut:fh([.55,0,1,.45]),backIn:fh([.31,.01,.66,-.59]),backOut:fh([.33,1.53,.69,.99])};function DF(t,e){if(t)return typeof t=="function"?kF()?RF(t,e):"ease-out":mF(t)?fh(t):Array.isArray(t)?t.map(n=>DF(n,e)||e1.easeOut):e1[t]}function Xee(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:n};l&&(c.offset=l);const d=DF(a,i);Array.isArray(d)&&(c.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(c,f)}function OF(t){return typeof t=="function"&&"applyToOptions"in t}function Qee({type:t,...e}){return OF(t)&&kF()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Yee extends lI{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Yb(typeof e.type!="string");const u=Qee(e);this.animation=Xee(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=aI(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):Hee(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return hr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+hr(e)}get time(){return hr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_i(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Kee()?(this.animation.timeline=e,mr):n(this)}}const MF={anticipate:hF,backInOut:cF,circInOut:fF};function Jee(t){return t in MF}function Zee(t){typeof t.ease=="string"&&Jee(t.ease)&&(t.ease=MF[t.ease])}const t1=10;class ete extends Yee{constructor(e){Zee(e),xF(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new uI({...o,autoplay:!1}),l=_i(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-t1).value,a.sample(l).value,t1),a.stop()}}const n1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(bo.test(t)||t==="0")&&!t.startsWith("url("));function tte(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function nte(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=n1(i,e),a=n1(s,e);return!o||!a?!1:tte(t)||(n==="spring"||OF(n))&&r}function N0(t){t.duration=0,t.type="keyframes"}const rte=new Set(["opacity","clipPath","filter","transform"]),ite=Jb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ste(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return ite()&&n&&rte.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const ote=40;class ate extends lI{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var g;super(),this.stop=()=>{var E,b;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=An.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},p=(c==null?void 0:c.KeyframeResolver)||cI;this.keyframeResolver=new p(a,(E,b,S)=>this.onKeyframesResolved(E,b,f,!S),l,u,c),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=An.now(),nte(e,s,o,a)||((is.instantAnimations||!l)&&(c==null||c(aI(e,r,n))),e[0]=e[e.length-1],N0(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ote?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&ste(f)?new ete({...f,element:f.motionValue.owner.current}):new uI(f);p.finished.then(()=>this.notifyFinished()).catch(mr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),zee()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const lte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ute(t){const e=lte.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function NF(t,e,n=1){const[r,i]=ute(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return nF(o)?parseFloat(o):o}return nI(i)?NF(i,e,n+1):i}function hI(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const LF=new Set(["width","height","top","left","right","bottom",...hc]),cte={test:t=>t==="auto",parse:t=>t},VF=t=>e=>e.test(t),FF=[cc,ue,wi,js,tee,eee,cte],r1=t=>FF.find(VF(t));function hte(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||iF(t):!0}const dte=new Set(["brightness","contrast","saturate","opacity"]);function fte(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(rI)||[];if(!r)return t;const i=n.replace(r,"");let s=dte.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const pte=/\b([a-z-]*)\(.*?\)/gu,L0={...bo,getAnimatableNone:t=>{const e=t.match(pte);return e?e.map(fte).join(" "):t}},i1={...cc,transform:Math.round},mte={rotate:js,rotateX:js,rotateY:js,rotateZ:js,scale:Pp,scaleX:Pp,scaleY:Pp,scaleZ:Pp,skew:js,skewX:js,skewY:js,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:Ud,originX:HP,originY:HP,originZ:ue},dI={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue,...mte,zIndex:i1,fillOpacity:Ud,strokeOpacity:Ud,numOctaves:i1},gte={...dI,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:L0,WebkitFilter:L0},BF=t=>gte[t];function jF(t,e){let n=BF(t);return n!==L0&&(n=bo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const yte=new Set(["auto","none","0"]);function vte(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!yte.has(s)&&$d(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=jF(n,i)}class _te extends cI{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),nI(u))){const c=NF(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!LF.has(r)||e.length!==2)return;const[i,s]=e,o=r1(i),a=r1(s);if(o!==a)if(ZP(o)&&ZP(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Pa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||hte(e[i]))&&r.push(i);r.length&&vte(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Pa[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function wte(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const UF=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function $F(t){return rF(t)&&"offsetHeight"in t}const s1=30,Ste=t=>!isNaN(parseFloat(t));class Ete{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=An.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=An.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ste(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Zb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=An.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>s1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,s1);return sF(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ku(t,e){return new Ete(t,e)}const{schedule:fI}=gF(queueMicrotask,!1),Ar={x:!1,y:!1};function zF(){return Ar.x||Ar.y}function Tte(t){return t==="x"||t==="y"?Ar[t]?null:(Ar[t]=!0,()=>{Ar[t]=!1}):Ar.x||Ar.y?null:(Ar.x=Ar.y=!0,()=>{Ar.x=Ar.y=!1})}function WF(t,e){const n=wte(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function o1(t){return!(t.pointerType==="touch"||zF())}function bte(t,e,n={}){const[r,i,s]=WF(t,n),o=a=>{if(!o1(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{o1(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const HF=(t,e)=>e?t===e?!0:HF(t,e.parentElement):!1,pI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Ite=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rte(t){return Ite.has(t.tagName)||t.tabIndex!==-1}const Tm=new WeakSet;function a1(t){return e=>{e.key==="Enter"&&t(e)}}function Q_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Cte=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=a1(()=>{if(Tm.has(n))return;Q_(n,"down");const i=a1(()=>{Q_(n,"up")}),s=()=>Q_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function l1(t){return pI(t)&&!zF()}function xte(t,e,n={}){const[r,i,s]=WF(t,n),o=a=>{const l=a.currentTarget;if(!l1(a))return;Tm.add(l);const u=e(l,a),c=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Tm.has(l)&&Tm.delete(l),l1(p)&&typeof u=="function"&&u(p,{success:g})},d=p=>{c(p,l===window||l===document||n.useGlobalTarget||HF(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),$F(a)&&(a.addEventListener("focus",u=>Cte(u,i)),!Rte(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function KF(t){return rF(t)&&"ownerSVGElement"in t}function Ate(t){return KF(t)&&t.tagName==="svg"}const an=t=>!!(t&&t.getVelocity),Pte=[...FF,Et,bo],kte=t=>Pte.find(VF(t)),mI=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function u1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Dte(...t){return e=>{let n=!1;const r=t.map(i=>{const s=u1(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():u1(t[i],null)}}}}function Ote(...t){return I.useCallback(Dte(...t),t)}class Mte extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=$F(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Nte({children:t,isPresent:e,anchorX:n,root:r}){const i=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=I.useContext(mI),l=Ote(s,t==null?void 0:t.ref);return I.useInsertionEffect(()=>{const{width:u,height:c,top:d,left:f,right:p}=o.current;if(e||!s.current||!u||!c)return;const g=n==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=i;const E=document.createElement("style");a&&(E.nonce=a);const b=r??document.head;return b.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{b.contains(E)&&b.removeChild(E)}},[e]),M.jsx(Mte,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(t,{ref:l})})}const Lte=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=qb(Vte),c=I.useId();let d=!0,f=I.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:i,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return s&&d&&(f={...f}),I.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),I.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=M.jsx(Nte,{isPresent:n,anchorX:a,root:l,children:t})),M.jsx(lv.Provider,{value:f,children:t})};function Vte(){return new Map}function qF(t=!0){const e=I.useContext(lv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=I.useId();I.useEffect(()=>{if(t)return i(s)},[t]);const o=I.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const kp=t=>t.key||"";function c1(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const Fte=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=qF(o),d=I.useMemo(()=>c1(t),[t]),f=o&&!u?[]:d.map(kp),p=I.useRef(!0),g=I.useRef(d),E=qb(()=>new Map),[b,S]=I.useState(d),[y,w]=I.useState(d);tF(()=>{p.current=!1,g.current=d;for(let k=0;k<y.length;k++){const T=kp(y[k]);f.includes(T)?E.delete(T):E.get(T)!==!0&&E.set(T,!1)}},[y,f.length,f.join("-")]);const x=[];if(d!==b){let k=[...d];for(let T=0;T<y.length;T++){const v=y[T],R=kp(v);f.includes(R)||(k.splice(T,0,v),x.push(v))}return s==="wait"&&x.length&&(k=x),w(c1(k)),S(d),null}const{forceRender:O}=I.useContext(Kb);return M.jsx(M.Fragment,{children:y.map(k=>{const T=kp(k),v=o&&!u?!1:d===y||f.includes(T),R=()=>{if(E.has(T))E.set(T,!0);else return;let C=!0;E.forEach(A=>{A||(C=!1)}),C&&(O==null||O(),w(g.current),o&&(c==null||c()),r&&r())};return M.jsx(Lte,{isPresent:v,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:v?void 0:R,anchorX:a,children:k},T)})})},GF=I.createContext({strict:!1}),h1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qu={};for(const t in h1)qu[t]={isEnabled:e=>h1[t].some(n=>!!e[n])};function Bte(t){for(const e in t)qu[e]={...qu[e],...t[e]}}const jte=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jte.has(t)}let XF=t=>!Xg(t);function Ute(t){typeof t=="function"&&(XF=e=>e.startsWith("on")?!Xg(e):t(e))}try{Ute(require("@emotion/is-prop-valid").default)}catch{}function $te(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(XF(i)||n===!0&&Xg(i)||!e&&!Xg(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const uv=I.createContext({});function cv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function zd(t){return typeof t=="string"||Array.isArray(t)}const gI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yI=["initial",...gI];function hv(t){return cv(t.animate)||yI.some(e=>zd(t[e]))}function QF(t){return!!(hv(t)||t.variants)}function zte(t,e){if(hv(t)){const{initial:n,animate:r}=t;return{initial:n===!1||zd(n)?n:void 0,animate:zd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Wte(t){const{initial:e,animate:n}=zte(t,I.useContext(uv));return I.useMemo(()=>({initial:e,animate:n}),[d1(e),d1(n)])}function d1(t){return Array.isArray(t)?t.join(" "):t}function f1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Jc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=f1(t,e.target.x),r=f1(t,e.target.y);return`${n}% ${r}%`}},Hte={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=bo.parse(t);if(i.length>5)return r;const s=bo.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=rt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},V0={borderRadius:{...Jc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jc,borderTopRightRadius:Jc,borderBottomLeftRadius:Jc,borderBottomRightRadius:Jc,boxShadow:Hte};function YF(t,{layout:e,layoutId:n}){return dc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!V0[t]||t==="opacity")}const Kte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qte=hc.length;function Gte(t,e,n){let r="",i=!0;for(let s=0;s<qte;s++){const o=hc[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=UF(a,dI[o]);if(!l){i=!1;const c=Kte[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function vI(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(dc.has(l)){o=!0;continue}else if(vF(l)){i[l]=u;continue}else{const c=UF(u,dI[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=Gte(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const _I=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JF(t,e,n){for(const r in e)!an(e[r])&&!YF(r,n)&&(t[r]=e[r])}function Xte({transformTemplate:t},e){return I.useMemo(()=>{const n=_I();return vI(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Qte(t,e){const n=t.style||{},r={};return JF(r,n,t),Object.assign(r,Xte(t,e)),r}function Yte(t,e){const n={},r=Qte(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Jte={offset:"stroke-dashoffset",array:"stroke-dasharray"},Zte={offset:"strokeDashoffset",array:"strokeDasharray"};function ene(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Jte:Zte;t[s.offset]=ue.transform(-r);const o=ue.transform(e),a=ue.transform(n);t[s.array]=`${o} ${a}`}function ZF(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(vI(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f}=t;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&ene(d,i,s,o,!1)}const eB=()=>({..._I(),attrs:{}}),tB=t=>typeof t=="string"&&t.toLowerCase()==="svg";function tne(t,e,n,r){const i=I.useMemo(()=>{const s=eB();return ZF(s,e,tB(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};JF(s,t.style,t),i.style={...s,...i.style}}return i}const nne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wI(t){return typeof t!="string"||t.includes("-")?!1:!!(nne.indexOf(t)>-1||/[A-Z]/u.test(t))}function rne(t,e,n,{latestValues:r},i,s=!1){const a=(wI(t)?tne:Yte)(e,r,i,t),l=$te(e,typeof t=="string",s),u=t!==I.Fragment?{...l,...a,ref:n}:{},{children:c}=e,d=I.useMemo(()=>an(c)?c.get():c,[c]);return I.createElement(t,{...u,children:d})}function p1(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function SI(t,e,n,r){if(typeof e=="function"){const[i,s]=p1(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=p1(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function bm(t){return an(t)?t.get():t}function ine({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:sne(n,r,i,t),renderState:e()}}function sne(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=bm(s[f]);let{initial:o,animate:a}=t;const l=hv(t),u=QF(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!cv(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=SI(t,f[p]);if(g){const{transitionEnd:E,transition:b,...S}=g;for(const y in S){let w=S[y];if(Array.isArray(w)){const x=c?w.length-1:0;w=w[x]}w!==null&&(i[y]=w)}for(const y in E)i[y]=E[y]}}}return i}const nB=t=>(e,n)=>{const r=I.useContext(uv),i=I.useContext(lv),s=()=>ine(t,e,r,i);return n?s():qb(s)};function EI(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(an(r[o])||e.style&&an(e.style[o])||YF(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const one=nB({scrapeMotionValuesFromProps:EI,createRenderState:_I});function rB(t,e,n){const r=EI(t,e,n);for(const i in t)if(an(t[i])||an(e[i])){const s=hc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const ane=nB({scrapeMotionValuesFromProps:rB,createRenderState:eB}),lne=Symbol.for("motionComponentSymbol");function nu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function une(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):nu(n)&&(n.current=r))},[e])}const TI=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cne="framerAppearId",iB="data-"+TI(cne),sB=I.createContext({});function hne(t,e,n,r,i){var E,b;const{visualElement:s}=I.useContext(uv),o=I.useContext(GF),a=I.useContext(lv),l=I.useContext(mI).reducedMotion,u=I.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=I.useContext(sB);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&dne(u.current,n,i,d);const f=I.useRef(!1);I.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const p=n[iB],g=I.useRef(!!p&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,p))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,p)));return tF(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),g.current&&c.animationState&&c.animationState.animateChanges())}),I.useEffect(()=>{c&&(!g.current&&c.animationState&&c.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,p)}),g.current=!1),c.enteringChildren=void 0)}),c}function dne(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oB(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&nu(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function oB(t){if(t)return t.options.allowProjection!==!1?t.projection:oB(t.parent)}function Y_(t,{forwardMotionProps:e=!1}={},n,r){n&&Bte(n);const i=wI(t)?ane:one;function s(a,l){let u;const c={...I.useContext(mI),...a,layoutId:fne(a)},{isStatic:d}=c,f=Wte(a),p=i(a,d);if(!d&&Gb){pne();const g=mne(c);u=g.MeasureLayout,f.visualElement=hne(t,p,c,r,g.ProjectionNode)}return M.jsxs(uv.Provider,{value:f,children:[u&&f.visualElement?M.jsx(u,{visualElement:f.visualElement,...c}):null,rne(t,a,une(p,f.visualElement,l),p,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=I.forwardRef(s);return o[lne]=t,o}function fne({layoutId:t}){const e=I.useContext(Kb).id;return e&&t!==void 0?e+"-"+t:t}function pne(t,e){I.useContext(GF).strict}function mne(t){const{drag:e,layout:n}=qu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function gne(t,e){if(typeof Proxy>"u")return Y_;const n=new Map,r=(s,o)=>Y_(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Y_(o,void 0,t,e)),n.get(o))})}function aB({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function yne({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function vne(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function J_(t){return t===void 0||t===1}function F0({scale:t,scaleX:e,scaleY:n}){return!J_(t)||!J_(e)||!J_(n)}function sa(t){return F0(t)||lB(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function lB(t){return m1(t.x)||m1(t.y)}function m1(t){return t&&t!=="0%"}function Qg(t,e,n){const r=t-n,i=e*r;return n+i}function g1(t,e,n,r,i){return i!==void 0&&(t=Qg(t,i,r)),Qg(t,n,r)+e}function B0(t,e=0,n=1,r,i){t.min=g1(t.min,e,n,r,i),t.max=g1(t.max,e,n,r,i)}function uB(t,{x:e,y:n}){B0(t.x,e.translate,e.scale,e.originPoint),B0(t.y,n.translate,n.scale,n.originPoint)}const y1=.999999999999,v1=1.0000000000001;function _ne(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&iu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,uB(t,o)),r&&sa(s.latestValues)&&iu(t,s.latestValues))}e.x<v1&&e.x>y1&&(e.x=1),e.y<v1&&e.y>y1&&(e.y=1)}function ru(t,e){t.min=t.min+e,t.max=t.max+e}function _1(t,e,n,r,i=.5){const s=rt(t.min,t.max,i);B0(t,e,n,s,r)}function iu(t,e){_1(t.x,e.x,e.scaleX,e.scale,e.originX),_1(t.y,e.y,e.scaleY,e.scale,e.originY)}function cB(t,e){return aB(vne(t.getBoundingClientRect(),e))}function wne(t,e,n){const r=cB(t,n),{scroll:i}=e;return i&&(ru(r.x,i.offset.x),ru(r.y,i.offset.y)),r}const w1=()=>({translate:0,scale:1,origin:0,originPoint:0}),su=()=>({x:w1(),y:w1()}),S1=()=>({min:0,max:0}),At=()=>({x:S1(),y:S1()}),j0={current:null},hB={current:!1};function Sne(){if(hB.current=!0,!!Gb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>j0.current=t.matches;t.addEventListener("change",e),e()}else j0.current=!1}const Ene=new WeakMap;function Tne(t,e,n){for(const r in e){const i=e[r],s=n[r];if(an(i))t.addValue(r,i);else if(an(s))t.addValue(r,Ku(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Ku(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const E1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bne{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=An.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=hv(n),this.isVariantNode=QF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&an(p)&&p.set(l[f])}}mount(e){var n;this.current=e,Ene.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),hB.current||Sne(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),To(this.notifyUpdate),To(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=dc.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qu){const n=qu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):At()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<E1.length;r++){const i=E1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Tne(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ku(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(nF(r)||iF(r))?r=parseFloat(r):!kte(r)&&bo.test(n)&&(r=jF(e,n)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=SI(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!an(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Zb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){fI.render(this.render)}}class dB extends bne{constructor(){super(...arguments),this.KeyframeResolver=_te}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fB(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function Ine(t){return window.getComputedStyle(t)}class Rne extends dB{constructor(){super(...arguments),this.type="html",this.renderInstance=fB}readValueFromInstance(e,n){var r;if(dc.has(n))return(r=this.projection)!=null&&r.isProjecting?P0(n):Fee(e,n);{const i=Ine(e),s=(vF(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return cB(e,n)}build(e,n,r){vI(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return EI(e,n,r)}}const pB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Cne(t,e,n,r){fB(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(pB.has(i)?i:TI(i),e.attrs[i])}class xne extends dB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=At}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(dc.has(n)){const r=BF(n);return r&&r.default||0}return n=pB.has(n)?n:TI(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return rB(e,n,r)}build(e,n,r){ZF(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Cne(e,n,r,i)}mount(e){this.isSVGTag=tB(e.tagName),super.mount(e)}}const Ane=(t,e)=>wI(t)?new xne(e):new Rne(e,{allowProjection:t!==I.Fragment});function Su(t,e,n){const r=t.getProps();return SI(r,e,n!==void 0?n:r.custom,t)}const U0=t=>Array.isArray(t);function Pne(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ku(n))}function kne(t){return U0(t)?t[t.length-1]||0:t}function Dne(t,e){const n=Su(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=kne(s[o]);Pne(t,o,a)}}function One(t){return!!(an(t)&&t.add)}function $0(t,e){const n=t.getValue("willChange");if(One(n))return n.add(e);if(!n&&is.WillChange){const r=new is.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function mB(t){return t.props[iB]}const Mne=t=>t!==null;function Nne(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Mne),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Lne={type:"spring",stiffness:500,damping:25,restSpeed:10},Vne=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Fne={type:"keyframes",duration:.8},Bne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jne=(t,{keyframes:e})=>e.length>2?Fne:dc.has(t)?t.startsWith("scale")?Vne(e[1]):Lne:Bne;function Une({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const bI=(t,e,n,r={},i,s)=>o=>{const a=hI(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-_i(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Une(a)||Object.assign(c,jne(t,c)),c.duration&&(c.duration=_i(c.duration)),c.repeatDelay&&(c.repeatDelay=_i(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(N0(c),c.delay===0&&(d=!0)),(is.instantAnimations||is.skipAnimations)&&(d=!0,N0(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const f=Nne(c.keyframes,a);if(f!==void 0){Ze.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new uI(c):new ate(c)};function $ne({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function gB(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const d=t.getValue(c,t.latestValues[c]??null),f=a[c];if(f===void 0||u&&$ne(u,c))continue;const p={delay:n,...hI(s||{},c)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const S=mB(t);if(S){const y=window.MotionHandoffAnimation(S,c,Ze);y!==null&&(p.startTime=y,E=!0)}}$0(t,c),d.start(bI(c,d,f,t.shouldReduceMotion&&LF.has(c)?{type:!1}:p,t,E));const b=d.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Ze.update(()=>{o&&Dne(t,o)})}),l}function yB(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function z0(t,e,n={}){var l;const r=Su(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(gB(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=i;return zne(t,e,u,c,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function zne(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(z0(l,e,{...o,delay:n+(typeof r=="function"?0:r)+yB(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Wne(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>z0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=z0(t,e,n);else{const i=typeof e=="function"?Su(t,e,n.custom):e;r=Promise.all(gB(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function vB(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Hne=yI.length;function _B(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?_B(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Hne;n++){const r=yI[n],i=t.props[r];(zd(i)||i===!1)&&(e[r]=i)}return e}const Kne=[...gI].reverse(),qne=gI.length;function Gne(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Wne(t,n,r)))}function Xne(t){let e=Gne(t),n=T1(),r=!0;const i=l=>(u,c)=>{var f;const d=Su(t,c,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,...E}=d;u={...u,...E,...g}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=_B(t.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let b=0;b<qne;b++){const S=Kne[b],y=n[S],w=u[S]!==void 0?u[S]:c[S],x=zd(w),O=S===l?y.isActive:null;O===!1&&(g=b);let k=w===c[S]&&w!==u[S]&&x;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),y.protectedKeys={...p},!y.isActive&&O===null||!w&&!y.prevProp||cv(w)||typeof w=="boolean")continue;const T=Qne(y.prevProp,w);let v=T||S===l&&y.isActive&&!k&&x||b>g&&x,R=!1;const C=Array.isArray(w)?w:[w];let A=C.reduce(i(S),{});O===!1&&(A={});const{prevResolvedValues:N={}}=y,D={...N,...A},de=Re=>{v=!0,f.has(Re)&&(R=!0,f.delete(Re)),y.needsAnimating[Re]=!0;const U=t.getValue(Re);U&&(U.liveStyle=!1)};for(const Re in D){const U=A[Re],Y=N[Re];if(p.hasOwnProperty(Re))continue;let ie=!1;U0(U)&&U0(Y)?ie=!vB(U,Y):ie=U!==Y,ie?U!=null?de(Re):f.add(Re):U!==void 0&&f.has(Re)?de(Re):y.protectedKeys[Re]=!0}y.prevProp=w,y.prevResolvedValues=A,y.isActive&&(p={...p,...A}),r&&t.blockInitialAnimation&&(v=!1);const fe=k&&T;v&&(!fe||R)&&d.push(...C.map(Re=>{const U={type:S};if(typeof Re=="string"&&r&&!fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,ie=Su(Y,Re);if(Y.enteringChildren&&ie){const{delayChildren:we}=ie.transition||{};U.delay=yB(Y.enteringChildren,t,we)}}return{animation:Re,options:U}}))}if(f.size){const b={};if(typeof u.initial!="boolean"){const S=Su(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(b.transition=S.transition)}f.forEach(S=>{const y=t.getBaseTarget(S),w=t.getValue(S);w&&(w.liveStyle=!0),b[S]=y??null}),d.push({animation:b})}let E=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=T1()}}}function Qne(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!vB(e,t):!1}function Zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function T1(){return{animate:Zo(!0),whileInView:Zo(),whileHover:Zo(),whileTap:Zo(),whileDrag:Zo(),whileFocus:Zo(),exit:Zo()}}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Yne extends No{constructor(e){super(e),e.animationState||(e.animationState=Xne(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Jne=0;class Zne extends No{constructor(){super(...arguments),this.id=Jne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ere={animation:{Feature:Yne},exit:{Feature:Zne}};function Wd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function wf(t){return{point:{x:t.pageX,y:t.pageY}}}const tre=t=>e=>pI(e)&&t(e,wf(e));function Xh(t,e,n,r){return Wd(t,e,tre(n),r)}const wB=1e-4,nre=1-wB,rre=1+wB,SB=.01,ire=0-SB,sre=0+SB;function yn(t){return t.max-t.min}function ore(t,e,n){return Math.abs(t-e)<=n}function b1(t,e,n,r=.5){t.origin=r,t.originPoint=rt(e.min,e.max,t.origin),t.scale=yn(n)/yn(e),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=nre&&t.scale<=rre||isNaN(t.scale))&&(t.scale=1),(t.translate>=ire&&t.translate<=sre||isNaN(t.translate))&&(t.translate=0)}function Qh(t,e,n,r){b1(t.x,e.x,n.x,r?r.originX:void 0),b1(t.y,e.y,n.y,r?r.originY:void 0)}function I1(t,e,n){t.min=n.min+e.min,t.max=t.min+yn(e)}function are(t,e,n){I1(t.x,e.x,n.x),I1(t.y,e.y,n.y)}function R1(t,e,n){t.min=e.min-n.min,t.max=t.min+yn(e)}function Yg(t,e,n){R1(t.x,e.x,n.x),R1(t.y,e.y,n.y)}function sr(t){return[t("x"),t("y")]}const EB=({current:t})=>t?t.ownerDocument.defaultView:null,C1=(t,e)=>Math.abs(t-e);function lre(t,e){const n=C1(t.x,e.x),r=C1(t.y,e.y);return Math.sqrt(n**2+r**2)}class TB{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=ew(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=lre(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:E}=f,{timestamp:b}=Ht;this.history.push({...E,timestamp:b});const{onStart:S,onMove:y}=this.handlers;p||(S&&S(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Z_(p,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:E,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=ew(f.type==="pointercancel"?this.lastMoveEventInfo:Z_(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,S),E&&E(f,S)},!pI(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=wf(e),l=Z_(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Ht;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,ew(l,this.history)),this.removeListeners=yf(Xh(this.contextWindow,"pointermove",this.handlePointerMove),Xh(this.contextWindow,"pointerup",this.handlePointerUp),Xh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),To(this.updatePoint)}}function Z_(t,e){return e?{point:e(t.point)}:t}function x1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ew({point:t},e){return{point:t,delta:x1(t,bB(e)),offset:x1(t,ure(e)),velocity:cre(e,.1)}}function ure(t){return t[0]}function bB(t){return t[t.length-1]}function cre(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=bB(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>_i(e)));)n--;if(!r)return{x:0,y:0};const s=hr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function hre(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?rt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?rt(n,t,r.max):Math.min(t,n)),t}function A1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function dre(t,{top:e,left:n,bottom:r,right:i}){return{x:A1(t.x,n,i),y:A1(t.y,e,r)}}function P1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function fre(t,e){return{x:P1(t.x,e.x),y:P1(t.y,e.y)}}function pre(t,e){let n=.5;const r=yn(t),i=yn(e);return i>r?n=jd(e.min,e.max-r,t.min):r>i&&(n=jd(t.min,t.max-i,e.min)),rs(0,1,n)}function mre(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const W0=.35;function gre(t=W0){return t===!1?t=0:t===!0&&(t=W0),{x:k1(t,"left","right"),y:k1(t,"top","bottom")}}function k1(t,e,n){return{min:D1(t,e),max:D1(t,n)}}function D1(t,e){return typeof t=="number"?t:t[e]||0}const yre=new WeakMap;class vre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=At(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wf(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:E}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Tte(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(S=>{let y=this.getAxisMotionValue(S).get()||0;if(wi.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const x=w.layout.layoutBox[S];x&&(y=yn(x)*(parseFloat(y)/100))}}this.originPoint[S]=y}),E&&Ze.postRender(()=>E(d,f)),$0(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:E,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:S}=f;if(g&&this.currentDirection===null){this.currentDirection=_re(S),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,S),this.updateAxis("y",f.point,S),this.visualElement.render(),b&&b(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>sr(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new TB(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:EB(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ze.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Dp(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=hre(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&nu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=dre(r.layoutBox,e):this.constraints=!1,this.elastic=gre(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=mre(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=wne(r,i.root,this.visualElement.getTransformPagePoint());let o=fre(i.layout.layoutBox,s);if(n){const a=n(yne(o));this.hasMutatedConstraints=!!a,a&&(o=aB(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=sr(c=>{if(!Dp(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $0(this.visualElement,e),r.start(bI(e,r,0,n,this.visualElement,!1))}stopAnimation(){sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sr(n=>{const{drag:r}=this.getProps();if(!Dp(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-rt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!nu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};sr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=pre({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(o=>{if(!Dp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(rt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;yre.set(this.visualElement,this);const e=this.visualElement.current,n=Xh(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();nu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ze.read(r);const o=Wd(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(sr(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=W0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Dp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function _re(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class wre extends No{constructor(e){super(e),this.removeGroupControls=mr,this.removeListeners=mr,this.controls=new vre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const O1=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class Sre extends No{constructor(){super(...arguments),this.removePointerDownListener=mr}onPointerDown(e){this.session=new TB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EB(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:O1(e),onStart:O1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ze.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Xh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Im={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let tw=!1;class Ere extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),tw&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Im.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,tw=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fI.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;tw=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function IB(t){const[e,n]=qF(),r=I.useContext(Kb);return M.jsx(Ere,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(sB),isPresent:e,safeToRemove:n})}function Tre(t,e,n){const r=an(t)?t:Ku(t);return r.start(bI("",r,e,n)),r.animation}const bre=(t,e)=>t.depth-e.depth;class Ire{constructor(){this.children=[],this.isDirty=!1}add(e){Xb(this.children,e),this.isDirty=!0}remove(e){Qb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(bre),this.isDirty=!1,this.children.forEach(e)}}function Rre(t,e){const n=An.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(To(r),t(s-e))};return Ze.setup(r,!0),()=>To(r)}const RB=["TopLeft","TopRight","BottomLeft","BottomRight"],Cre=RB.length,M1=t=>typeof t=="string"?parseFloat(t):t,N1=t=>typeof t=="number"||ue.test(t);function xre(t,e,n,r,i,s){i?(t.opacity=rt(0,n.opacity??1,Are(r)),t.opacityExit=rt(e.opacity??1,0,Pre(r))):s&&(t.opacity=rt(e.opacity??1,n.opacity??1,r));for(let o=0;o<Cre;o++){const a=`border${RB[o]}Radius`;let l=L1(e,a),u=L1(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||N1(l)===N1(u)?(t[a]=Math.max(rt(M1(l),M1(u),r),0),(wi.test(u)||wi.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,r))}function L1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Are=CB(0,.5,dF),Pre=CB(.5,.95,mr);function CB(t,e,n){return r=>r<t?0:r>e?1:n(jd(t,e,r))}function V1(t,e){t.min=e.min,t.max=e.max}function Cr(t,e){V1(t.x,e.x),V1(t.y,e.y)}function F1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function B1(t,e,n,r,i){return t-=e,t=Qg(t,1/n,r),i!==void 0&&(t=Qg(t,1/i,r)),t}function kre(t,e=0,n=1,r=.5,i,s=t,o=t){if(wi.test(e)&&(e=parseFloat(e),e=rt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=rt(s.min,s.max,r);t===s&&(a-=e),t.min=B1(t.min,e,n,a,i),t.max=B1(t.max,e,n,a,i)}function j1(t,e,[n,r,i],s,o){kre(t,e[n],e[r],e[i],e.scale,s,o)}const Dre=["x","scaleX","originX"],Ore=["y","scaleY","originY"];function U1(t,e,n,r){j1(t.x,e,Dre,n?n.x:void 0,r?r.x:void 0),j1(t.y,e,Ore,n?n.y:void 0,r?r.y:void 0)}function $1(t){return t.translate===0&&t.scale===1}function xB(t){return $1(t.x)&&$1(t.y)}function z1(t,e){return t.min===e.min&&t.max===e.max}function Mre(t,e){return z1(t.x,e.x)&&z1(t.y,e.y)}function W1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function AB(t,e){return W1(t.x,e.x)&&W1(t.y,e.y)}function H1(t){return yn(t.x)/yn(t.y)}function K1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Nre{constructor(){this.members=[]}add(e){Xb(this.members,e),e.scheduleRender()}remove(e){if(Qb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Lre(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:p,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const nw=["","X","Y","Z"],Vre=1e3;let Fre=0;function rw(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function PB(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=mB(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&PB(r)}function kB({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Fre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ure),this.nodes.forEach(Hre),this.nodes.forEach(Kre),this.nodes.forEach($re)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ire)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Zb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=KF(o)&&!Ate(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c,d=0;const f=()=>this.root.updateBlockedByResize=!1;Ze.read(()=>{d=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,c&&c(),c=Rre(f,250),Im.hasAnimatedSinceResize&&(Im.hasAnimatedSinceResize=!1,this.nodes.forEach(X1)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Yre,{onLayoutAnimationStart:E,onLayoutAnimationComplete:b}=u.getProps(),S=!this.targetLayout||!AB(this.targetLayout,p),y=!d&&f;if(this.options.layoutRoot||this.resumeFrom||y||d&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...hI(g,"layout"),onPlay:E,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(c,y)}else d||X1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),To(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qre),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(q1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(G1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Wre),this.nodes.forEach(Bre),this.nodes.forEach(jre)):this.nodes.forEach(G1),this.clearAllSnapshots();const a=An.now();Ht.delta=rs(0,1e3/60,a-Ht.timestamp),Ht.timestamp=a,Ht.isProcessing=!0,H_.update.process(Ht),H_.preRender.process(Ht),H_.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zre),this.sharedNodes.forEach(Gre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yn(this.snapshot.measuredBox.x)&&!yn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=At(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!xB(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||sa(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Jre(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return At();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Zre))){const{scroll:c}=this.root;c&&(ru(a.x,c.offset.x),ru(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=At();if(Cr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Cr(a,o),ru(a.x,d.offset.x),ru(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=At();Cr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&iu(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),sa(c.latestValues)&&iu(l,c.latestValues)}return sa(this.latestValues)&&iu(l,this.latestValues),l}removeTransform(o){const a=At();Cr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!sa(u.latestValues))continue;F0(u.latestValues)&&u.updateSnapshot();const c=At(),d=u.measurePageBox();Cr(c,d),U1(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return sa(this.latestValues)&&U1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!this.layout||!(c||d))return;this.resolvedRelativeTargetAt=Ht.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=At(),this.targetWithTransforms=At()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),are(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cr(this.target,this.layout.layoutBox),uB(this.target,this.targetDelta)):Cr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||F0(this.parent.latestValues)||lB(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=At(),this.relativeTargetOrigin=At(),Yg(this.relativeTargetOrigin,a,l),Cr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Cr(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;_ne(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=At());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(F1(this.prevProjectionDelta.x,this.projectionDelta.x),F1(this.prevProjectionDelta.y,this.projectionDelta.y)),Qh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!K1(this.projectionDelta.x,this.prevProjectionDelta.x)||!K1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=su(),this.projectionDelta=su(),this.projectionDeltaWithTransform=su()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=su();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=At(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,E=p!==g,b=this.getStack(),S=!b||b.members.length<=1,y=!!(E&&!S&&this.options.crossfade===!0&&!this.path.some(Qre));this.animationProgress=0;let w;this.mixTargetDelta=x=>{const O=x/1e3;Q1(d.x,o.x,O),Q1(d.y,o.y,O),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yg(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Xre(this.relativeTarget,this.relativeTargetOrigin,f,O),w&&Mre(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=At()),Cr(w,this.relativeTarget)),E&&(this.animationValues=c,xre(c,u,this.latestValues,O,y,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(To(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{Im.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ku(0)),this.currentAnimation=Tre(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Vre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&DB(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||At();const d=yn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=yn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Cr(a,l),iu(a,c),Qh(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Nre),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&rw("z",o,u,this.animationValues);for(let c=0;c<nw.length;c++)rw(`rotate${nw[c]}`,o,u,this.animationValues),rw(`skew${nw[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=bm(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=bm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!sa(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Lre(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const g in V0){if(c[g]===void 0)continue;const{correct:E,applyTo:b,isCSSVariable:S}=V0[g],y=d==="none"?c[g]:E(c[g],u);if(b){const w=b.length;for(let x=0;x<w;x++)o[b[x]]=y}else S?this.options.visualElement.renderState.vars[g]=y:o[g]=y}this.options.layoutId&&(o.pointerEvents=u===this?bm(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(q1),this.root.sharedNodes.clear()}}}function Bre(t){t.updateLayout()}function jre(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?sr(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=yn(f);f.min=r[d].min,f.max=f.min+p}):DB(s,e.layoutBox,r)&&sr(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=yn(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=su();Qh(a,r,e.layoutBox);const l=su();o?Qh(l,t.applyTransform(i,!0),e.measuredBox):Qh(l,r,e.layoutBox);const u=!xB(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=At();Yg(g,e.layoutBox,f.layoutBox);const E=At();Yg(E,r,p.layoutBox),AB(g,E)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Ure(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $re(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zre(t){t.clearSnapshot()}function q1(t){t.clearMeasurements()}function G1(t){t.isLayoutDirty=!1}function Wre(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function X1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Hre(t){t.resolveTargetDelta()}function Kre(t){t.calcProjection()}function qre(t){t.resetSkewAndRotation()}function Gre(t){t.removeLeadSnapshot()}function Q1(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Y1(t,e,n,r){t.min=rt(e.min,n.min,r),t.max=rt(e.max,n.max,r)}function Xre(t,e,n,r){Y1(t.x,e.x,n.x,r),Y1(t.y,e.y,n.y,r)}function Qre(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Yre={duration:.45,ease:[.4,0,.1,1]},J1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Z1=J1("applewebkit/")&&!J1("chrome/")?Math.round:mr;function ek(t){t.min=Z1(t.min),t.max=Z1(t.max)}function Jre(t){ek(t.x),ek(t.y)}function DB(t,e,n){return t==="position"||t==="preserve-aspect"&&!ore(H1(e),H1(n),.2)}function Zre(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const eie=kB({attachResizeListener:(t,e)=>Wd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iw={current:void 0},OB=kB({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!iw.current){const t=new eie({});t.mount(window),t.setOptions({layoutScroll:!0}),iw.current=t}return iw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tie={pan:{Feature:Sre},drag:{Feature:wre,ProjectionNode:OB,MeasureLayout:IB}};function tk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ze.postRender(()=>s(e,wf(e)))}class nie extends No{mount(){const{current:e}=this.node;e&&(this.unmount=bte(e,(n,r)=>(tk(this.node,r,"Start"),i=>tk(this.node,i,"End"))))}unmount(){}}class rie extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yf(Wd(this.node.current,"focus",()=>this.onFocus()),Wd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ze.postRender(()=>s(e,wf(e)))}class iie extends No{mount(){const{current:e}=this.node;e&&(this.unmount=xte(e,(n,r)=>(nk(this.node,r,"Start"),(i,{success:s})=>nk(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const H0=new WeakMap,sw=new WeakMap,sie=t=>{const e=H0.get(t.target);e&&e(t)},oie=t=>{t.forEach(sie)};function aie({root:t,...e}){const n=t||document;sw.has(n)||sw.set(n,{});const r=sw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(oie,{root:t,...e})),r[i]}function lie(t,e,n){const r=aie(e);return H0.set(t,n),r.observe(t),()=>{H0.delete(t),r.unobserve(t)}}const uie={some:0,all:1};class cie extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:uie[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return lie(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hie(e,n))&&this.startObserver()}unmount(){}}function hie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const die={inView:{Feature:cie},tap:{Feature:iie},focus:{Feature:rie},hover:{Feature:nie}},fie={layout:{ProjectionNode:OB,MeasureLayout:IB}},pie={...ere,...die,...tie,...fie},mie=gne(pie,Ane),gie=""+new URL("banner-CuJgjCV8.png",import.meta.url).href,si={colors:{background:"#fff9ec",highlight:"#ff8e52",text:"#00202b",secondaryText:"#666666",border:"#eee"}};function yie(){return M.jsxs(X,{style:rk.container,children:[M.jsx(G,{style:rk.title,children:"Pocket Stylist"}),M.jsx(G,{children:"Welcome to your personal style assistant."})]})}const rk=De.create({container:{flex:1,padding:20,alignItems:"center",justifyContent:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:10}}),vie=async(t,e)=>{const n=oc(Mo,"users",t);await Pb(n,e,{merge:!0})},_ie=async t=>{const e=oc(Mo,"users",t),n=SX(e);return(await n).exists()?(await n).data():null},wie=async(t,e)=>{console.log("addItemToDb called for user:",t);try{const n=gb(Mo,"users",t,"closet"),r=oc(n);return console.log("Generated ID:",r.id),console.log("Writing document to Firestore (setDoc)..."),await Pb(r,e),console.log("Document written successfully"),{...e,id:r.id}}catch(n){throw console.error("Error in addItemToDb:",n),n}},ik=async(t,e=null,n=12)=>{const r=gb(Mo,"users",t,"closet");let i;e?i=v0(r,hP("createdAt","desc"),gX(e),dP(n)):i=v0(r,hP("createdAt","desc"),dP(n));const s=await JV(i),o=s.docs.map(l=>({id:l.id,...l.data()})),a=s.docs[s.docs.length-1];return{items:o,lastVisible:a}},sk=async(t,e,n)=>{const r=oc(Mo,"users",t,"closet",e);await EX(r,n)},Sie=async(t,e)=>{const n=oc(Mo,"users",t,"closet",e);await TX(n)},Eie=async(t,e,n)=>{const r=oc(Mo,"users",t,"schedule",e);await Pb(r,{date:e,...n},{merge:!0})},Tie=async t=>{const e=gb(Mo,"users",t,"schedule"),n=v0(e),r=await JV(n),i={};return r.forEach(s=>{i[s.id]=s.data()}),i},bie=async(t,e)=>{try{const n=`closet/${Date.now()}_${Math.random().toString(36).substring(7)}.jpg`,r=iZ(cZ,`users/${t}/${n}`),i=await nZ(r,e,"data_url");return await rZ(i.ref)}catch(n){throw console.error("Error uploading image to storage:",n),n}},MB=I.createContext();function dv(){return I.useContext(MB)}function Iie({children:t}){const{currentUser:e}=J2(),[n,r]=I.useState([]),[i,s]=I.useState({}),[o,a]=I.useState(!0),[l,u]=I.useState(null),[c,d]=I.useState(!0),[f,p]=I.useState(!1);I.useEffect(()=>{e?(async()=>{try{const{items:T,lastVisible:v}=await ik(e.uid);r(T),u(v),d(!!v);const R=await Tie(e.uid);s(R)}catch(T){console.error("Error fetching data:",T)}finally{a(!1)}})():(r([]),s({}),a(!1))},[e]);const O={items:n,schedule:i,loading:o,loadingMore:f,hasMore:c,loadMoreItems:async()=>{if(!(!e||!c||f)){p(!0);try{const{items:k,lastVisible:T}=await ik(e.uid,l);k.length>0?(r(v=>[...v,...k]),u(T),d(!!T)):d(!1)}catch(k){console.error("Error loading more items:",k)}finally{p(!1)}}},addItem:async k=>{if(!e)throw new Error("User not authenticated");const T=Date.now().toString(),v={...k,id:T,rating:3,wearCount:0,createdAt:new Date().toISOString()};r(R=>[v,...R]);try{let R=k.imageUri;if(k.imageUri&&k.imageUri.startsWith("data:"))try{R=await bie(e.uid,k.imageUri)}catch(N){console.error("Failed to upload image to storage, falling back to base64:",N)}const C={...k,imageUri:R,rating:3,wearCount:0,createdAt:new Date().toISOString()},A=await wie(e.uid,C);return r(N=>N.map(D=>D.id===T?A:D)),A}catch(R){throw console.error("Error adding item:",R),r(C=>C.filter(A=>A.id!==T)),R}},updateItem:async(k,T)=>{if(e){r(v=>v.map(R=>R.id===k?{...R,...T}:R));try{await sk(e.uid,k,T)}catch(v){console.error("Error updating item:",v)}}},deleteItem:async k=>{if(!e)return;const T=n.find(v=>v.id===k);r(v=>v.filter(R=>R.id!==k));try{await Sie(e.uid,k)}catch(v){console.error("Error deleting item:",v),T&&r(R=>[...R,T])}},addToSchedule:async(k,T)=>{if(e)try{await Eie(e.uid,k,T),s(v=>({...v,[k]:T}))}catch(v){console.error("Error saving schedule:",v)}},markAsWorn:async(k,T=new Date)=>{if(!e)return;const v=new Date(T).toISOString();r(R=>R.map(C=>k.includes(C.id)?{...C,lastWorn:v,wearCount:(C.wearCount||0)+1}:C));for(const R of k){const C=n.find(A=>A.id===R);C&&await sk(e.uid,R,{lastWorn:v,wearCount:(C.wearCount||0)+1})}},isItemAvailable:k=>{if(!k.lastWorn)return!0;const T=new Date(k.lastWorn),v=new Date(T);return v.setDate(T.getDate()+(k.refreshCycle||1)),new Date>=v}};return M.jsx(MB.Provider,{value:O,children:t})}const NB=2,Rie=ug.get("window").width,Cie=(Rie-40)/NB,xie=gt.memo(({item:t,onPress:e,isAvailable:n})=>M.jsx(Ce,{onPress:()=>e(t),children:M.jsxs(X,{style:[ve.itemContainer,!n&&ve.unavailableItem],children:[M.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:M.jsx("img",{src:t.imageUri||t.image,alt:t.type,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},loading:"lazy",onError:r=>{r.target.onerror=null,console.warn("Image failed to load:",t.id)}})}),M.jsxs(X,{style:ve.infoContainer,children:[M.jsx(G,{style:ve.itemType,children:t.type}),!n&&M.jsx(G,{style:ve.unavailableText,children:"In Wash"})]})]})}));function Aie(){const{items:t,isItemAvailable:e,deleteItem:n,updateItem:r,loadMoreItems:i,hasMore:s,loadingMore:o}=dv(),a=ec(),[l,u]=I.useState(!1),[c,d]=I.useState(!1),[f,p]=I.useState(null),g=I.useRef(null),E=I.useRef(null),b=O=>{const k=O.target.files[0];if(k){u(!1);const T=new FileReader;T.onloadend=()=>{a("/camera",{state:{image:T.result}})},T.readAsDataURL(k)}},S=O=>{p(O),d(!0)},y=()=>{confirm("Are you sure you want to delete this item?")&&(n(f.id),d(!1))},w=O=>{p(k=>({...k,rating:O})),r(f.id,{rating:O})},x=({item:O})=>M.jsx(xie,{item:O,onPress:S,isAvailable:e(O)});return M.jsxs(X,{style:ve.container,children:[M.jsxs(X,{style:ve.header,children:[M.jsx(G,{style:ve.title,children:"Virtual Closet"}),M.jsx(Ce,{style:ve.addButton,onPress:()=>u(!0),children:M.jsx(G,{style:ve.addButtonText,children:"+ Add"})}),M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:g,style:{display:"none"},onChange:b}),M.jsx("input",{type:"file",accept:"image/*",ref:E,style:{display:"none"},onChange:b})]}),M.jsx(Y9,{data:t,renderItem:x,keyExtractor:O=>O.id,numColumns:NB,contentContainerStyle:ve.listContent,ListEmptyComponent:M.jsx(G,{style:ve.emptyText,children:"No items in closet. Add some!"}),onEndReached:i,onEndReachedThreshold:.5,ListFooterComponent:o?M.jsx(G,{style:{textAlign:"center",padding:10},children:"Loading more..."}):null}),M.jsx(Sd,{animationType:"fade",transparent:!0,visible:l,onRequestClose:()=>u(!1),children:M.jsxs(X,{style:ve.modalOverlay,children:[M.jsx(Ce,{style:ve.modalBackdrop,onPress:()=>u(!1)}),M.jsxs(X,{style:ve.modalContent,children:[M.jsx(G,{style:ve.modalTitle,children:"Add New Item"}),M.jsx(Ce,{style:ve.modalButton,onPress:()=>{u(!1),g.current.click()},children:M.jsx(G,{style:ve.modalButtonText,children:"Take Photo"})}),M.jsx(Ce,{style:ve.modalButton,onPress:()=>{u(!1),E.current.click()},children:M.jsx(G,{style:ve.modalButtonText,children:"Choose from Library"})}),M.jsx(Ce,{style:[ve.modalButton,ve.cancelButton],onPress:()=>u(!1),children:M.jsx(G,{style:ve.cancelButtonText,children:"Cancel"})})]})]})}),M.jsx(Sd,{animationType:"slide",visible:c,onRequestClose:()=>d(!1),children:M.jsx(X,{style:ve.detailContainer,children:f&&M.jsxs(Nr,{children:[M.jsx(Si,{source:{uri:f.imageUri},style:ve.detailImage,resizeMode:"contain"}),M.jsxs(X,{style:ve.detailInfo,children:[M.jsx(G,{style:ve.detailTitle,children:f.type}),M.jsxs(G,{style:ve.detailText,children:["Color: ",f.color]}),M.jsxs(G,{style:ve.detailText,children:["Style: ",f.style]}),M.jsxs(G,{style:ve.detailText,children:["Worn: ",f.wearCount||0," times"]}),M.jsx(G,{style:ve.sectionTitle,children:"Rating"}),M.jsx(X,{style:ve.ratingContainer,children:[1,2,3,4,5].map(O=>M.jsx(Ce,{onPress:()=>w(O),children:M.jsx(G,{style:[ve.star,(f.rating||0)>=O?ve.starFilled:ve.starEmpty],children:""})},O))}),M.jsx(Ce,{style:ve.deleteButton,onPress:y,children:M.jsx(G,{style:ve.deleteButtonText,children:"Delete Item"})}),M.jsx(Ce,{style:ve.closeDetailButton,onPress:()=>d(!1),children:M.jsx(G,{style:ve.closeDetailButtonText,children:"Close"})})]})]})})})]})}const ve=De.create({container:{flex:1,padding:10,backgroundColor:"#fff"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingHorizontal:10},title:{fontSize:24,fontWeight:"bold"},addButton:{backgroundColor:"#007AFF",paddingVertical:8,paddingHorizontal:15,borderRadius:20},addButtonText:{color:"#fff",fontWeight:"bold"},listContent:{paddingBottom:20},itemContainer:{width:Cie,margin:5,backgroundColor:"#f9f9f9",borderRadius:10,overflow:"hidden",elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1.41},unavailableItem:{opacity:.5,backgroundColor:"#eee"},image:{width:"100%",height:150},infoContainer:{padding:10},itemType:{textTransform:"capitalize",fontWeight:"bold"},unavailableText:{color:"red",fontSize:12,marginTop:5},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalBackdrop:{...De.absoluteFillObject},modalContent:{width:"80%",maxWidth:300,backgroundColor:"white",borderRadius:20,padding:20,alignItems:"center",elevation:5},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},modalButton:{width:"100%",padding:15,backgroundColor:"#f0f0f0",borderRadius:10,marginBottom:10,alignItems:"center"},modalButtonText:{fontSize:16,color:"#007AFF"},cancelButton:{backgroundColor:"transparent",marginTop:5},cancelButtonText:{fontSize:16,color:"#FF3B30",fontWeight:"bold"},detailContainer:{flex:1,backgroundColor:"#fff"},detailImage:{width:"100%",height:400,backgroundColor:"#f0f0f0"},detailInfo:{padding:20},detailTitle:{fontSize:28,fontWeight:"bold",marginBottom:10,textTransform:"capitalize"},detailText:{fontSize:16,marginBottom:5,color:"#333"},sectionTitle:{fontSize:18,fontWeight:"bold",marginTop:20,marginBottom:10},ratingContainer:{flexDirection:"row",marginBottom:20},star:{fontSize:30,marginRight:5},starFilled:{color:"#FFD700"},starEmpty:{color:"#ddd"},deleteButton:{backgroundColor:"#FF3B30",padding:15,borderRadius:10,alignItems:"center",marginTop:20},deleteButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},closeDetailButton:{padding:15,alignItems:"center",marginTop:10},closeDetailButtonText:{color:"#007AFF",fontSize:16},emptyText:{textAlign:"center",marginTop:50,fontSize:18,color:"#999"}});function ce(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function F(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let LB=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return LB=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function K0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const q0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class oe extends Error{}class Yt extends oe{constructor(e,n,r,i){super(`${Yt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new fv({message:r,cause:q0(n)});const s=n==null?void 0:n.error;return e===400?new VB(e,s,r,i):e===401?new FB(e,s,r,i):e===403?new BB(e,s,r,i):e===404?new jB(e,s,r,i):e===409?new UB(e,s,r,i):e===422?new $B(e,s,r,i):e===429?new zB(e,s,r,i):e>=500?new WB(e,s,r,i):new Yt(e,s,r,i)}}class dr extends Yt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class fv extends Yt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class II extends fv{constructor({message:e}={}){super({message:e??"Request timed out."})}}class VB extends Yt{}class FB extends Yt{}class BB extends Yt{}class jB extends Yt{}class UB extends Yt{}class $B extends Yt{}class zB extends Yt{}class WB extends Yt{}class HB extends oe{constructor(){super("Could not parse response content as the length limit was reached")}}class KB extends oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ph extends Error{constructor(e){super(e)}}const Pie=/^[a-z][a-z0-9+.-]*:/i,kie=t=>Pie.test(t);let bn=t=>(bn=Array.isArray,bn(t)),ok=bn;function qB(t){return typeof t!="object"?{}:t??{}}function Die(t){if(!t)return!0;for(const e in t)return!1;return!0}function Oie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ow(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Mie=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new oe(`${t} must be an integer`);if(e<0)throw new oe(`${t} must be a positive integer`);return e},Nie=t=>{try{return JSON.parse(t)}catch{return}},Sf=t=>new Promise(e=>setTimeout(e,t)),Fl="6.10.0",Lie=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Vie(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Fie=()=>{var n;const t=Vie();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":lk(Deno.build.os),"X-Stainless-Arch":ak(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":lk(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ak(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Bie();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Bie(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const ak=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",lk=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let uk;const jie=()=>uk??(uk=Fie());function Uie(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function GB(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function XB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return GB({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function QB(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function $ie(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const zie=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),YB="RFC3986",JB=t=>String(t),ck={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:JB},Wie="RFC1738";let G0=(t,e)=>(G0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),G0(t,e));const Yr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),aw=1024,Hie=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=aw){const l=s.length>=aw?s.slice(a,a+aw):s,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Wie&&(d===40||d===41)){u[u.length]=l.charAt(c);continue}if(d<128){u[u.length]=Yr[d];continue}if(d<2048){u[u.length]=Yr[192|d>>6]+Yr[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=Yr[224|d>>12]+Yr[128|d>>6&63]+Yr[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=Yr[240|d>>18]+Yr[128|d>>12&63]+Yr[128|d>>6&63]+Yr[128|d&63]}o+=u.join("")}return o};function Kie(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function hk(t,e){if(bn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const ZB={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},ej=function(t,e){Array.prototype.push.apply(t,bn(e)?e:[e])};let dk;const xt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Hie,encodeValuesOnly:!1,format:YB,formatter:JB,indices:!1,serializeDate(t){return(dk??(dk=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function qie(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const lw={};function tj(t,e,n,r,i,s,o,a,l,u,c,d,f,p,g,E,b,S){let y=t,w=S,x=0,O=!1;for(;(w=w.get(lw))!==void 0&&!O;){const C=w.get(t);if(x+=1,typeof C<"u"){if(C===x)throw new RangeError("Cyclic object value");O=!0}typeof w.get(lw)>"u"&&(x=0)}if(typeof u=="function"?y=u(e,y):y instanceof Date?y=f==null?void 0:f(y):n==="comma"&&bn(y)&&(y=hk(y,function(C){return C instanceof Date?f==null?void 0:f(C):C})),y===null){if(s)return l&&!E?l(e,xt.encoder,b,"key",p):e;y=""}if(qie(y)||Kie(y)){if(l){const C=E?e:l(e,xt.encoder,b,"key",p);return[(g==null?void 0:g(C))+"="+(g==null?void 0:g(l(y,xt.encoder,b,"value",p)))]}return[(g==null?void 0:g(e))+"="+(g==null?void 0:g(String(y)))]}const k=[];if(typeof y>"u")return k;let T;if(n==="comma"&&bn(y))E&&l&&(y=hk(y,l)),T=[{value:y.length>0?y.join(",")||null:void 0}];else if(bn(u))T=u;else{const C=Object.keys(y);T=c?C.sort(c):C}const v=a?String(e).replace(/\./g,"%2E"):String(e),R=r&&bn(y)&&y.length===1?v+"[]":v;if(i&&bn(y)&&y.length===0)return R+"[]";for(let C=0;C<T.length;++C){const A=T[C],N=typeof A=="object"&&typeof A.value<"u"?A.value:y[A];if(o&&N===null)continue;const D=d&&a?A.replace(/\./g,"%2E"):A,de=bn(y)?typeof n=="function"?n(R,D):R:R+(d?"."+D:"["+D+"]");S.set(t,x);const fe=new WeakMap;fe.set(lw,S),ej(k,tj(N,de,n,r,i,s,o,a,n==="comma"&&E&&bn(y)?null:l,u,c,d,f,p,g,E,b,fe))}return k}function Gie(t=xt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||xt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=YB;if(typeof t.format<"u"){if(!G0(ck,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=ck[n];let i=xt.filter;(typeof t.filter=="function"||bn(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in ZB?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=xt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:xt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:xt.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:xt.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:xt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?xt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:xt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:xt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:xt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:xt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:xt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:xt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:xt.strictNullHandling}}function Xie(t,e={}){let n=t;const r=Gie(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):bn(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=ZB[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const p=i[f];r.skipNulls&&n[p]===null||ej(o,tj(n[p],p,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}function Qie(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let fk;function RI(t){let e;return(fk??(e=new globalThis.TextEncoder,fk=e.encode.bind(e)))(t)}let pk;function mk(t){let e;return(pk??(e=new globalThis.TextDecoder,pk=e.decode.bind(e)))(t)}var Bn,jn;class pv{constructor(){Bn.set(this,void 0),jn.set(this,void 0),ce(this,Bn,new Uint8Array),ce(this,jn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?RI(e):e;ce(this,Bn,Qie([F(this,Bn,"f"),n]));const r=[];let i;for(;(i=Yie(F(this,Bn,"f"),F(this,jn,"f")))!=null;){if(i.carriage&&F(this,jn,"f")==null){ce(this,jn,i.index);continue}if(F(this,jn,"f")!=null&&(i.index!==F(this,jn,"f")+1||i.carriage)){r.push(mk(F(this,Bn,"f").subarray(0,F(this,jn,"f")-1))),ce(this,Bn,F(this,Bn,"f").subarray(F(this,jn,"f"))),ce(this,jn,null);continue}const s=F(this,jn,"f")!==null?i.preceding-1:i.preceding,o=mk(F(this,Bn,"f").subarray(0,s));r.push(o),ce(this,Bn,F(this,Bn,"f").subarray(i.index)),ce(this,jn,null)}return r}flush(){return F(this,Bn,"f").length?this.decode(`
`):[]}}Bn=new WeakMap,jn=new WeakMap;pv.NEWLINE_CHARS=new Set([`
`,"\r"]);pv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Yie(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Jie(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Jg={off:0,error:200,warn:300,info:400,debug:500},gk=(t,e,n)=>{if(t){if(Oie(Jg,t))return t;Kt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Jg))}`)}};function mh(){}function Op(t,e,n){return!e||Jg[t]>Jg[n]?mh:e[t].bind(e)}const Zie={error:mh,warn:mh,info:mh,debug:mh};let yk=new WeakMap;function Kt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Zie;const r=yk.get(e);if(r&&r[0]===n)return r[1];const i={error:Op("error",e,n),warn:Op("warn",e,n),info:Op("info",e,n),debug:Op("debug",e,n)};return yk.set(e,[n,i]),i}const oa=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Zc;class ci{constructor(e,n,r){this.iterator=e,Zc.set(this,void 0),this.controller=n,ce(this,Zc,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Kt(r):console;async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of ese(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(c){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),c}if(u&&u.error)throw new Yt(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(l.event=="error")throw new Yt(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(K0(l))return;throw l}finally{a||n.abort()}}return new ci(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new pv,l=QB(e);for await(const u of l)for(const c of a.decode(u))yield c;for(const u of a.flush())yield u}async function*o(){if(i)throw new oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of s())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(K0(l))return;throw l}finally{a||n.abort()}}return new ci(o,n,r)}[(Zc=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new ci(()=>i(e),this.controller,F(this,Zc,"f")),new ci(()=>i(n),this.controller,F(this,Zc,"f"))]}toReadableStream(){const e=this;let n;return GB({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=RI(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*ese(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new oe("Attempted to iterate over a response with no body");const n=new nse,r=new pv,i=QB(t.body);for await(const s of tse(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*tse(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?RI(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=Jie(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class nse{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=rse(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function rse(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function nj(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var d;if(e.options.stream)return Kt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ci.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),l=(d=a==null?void 0:a.split(";")[0])==null?void 0:d.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){const f=await n.json();return rj(f,n)}return await n.text()})();return Kt(t).debug(`[${r}] response parsed`,oa({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function rj(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var gh;class mv extends Promise{constructor(e,n,r=nj){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,gh.set(this,void 0),ce(this,gh,e)}_thenUnwrap(e){return new mv(F(this,gh,"f"),this.responsePromise,async(n,r)=>rj(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(F(this,gh,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}gh=new WeakMap;var Mp;class CI{constructor(e,n,r,i){Mp.set(this,void 0),ce(this,Mp,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await F(this,Mp,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Mp=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class ise extends mv{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await nj(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class gv extends CI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class It extends CI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...qB(this.options.query),after:n}}:null}}class Zg extends CI{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...qB(this.options.query),after:e}}:null}}const ij=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Yh(t,e,n){return ij(),new File(t,e??"unknown_file",n)}function Rm(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const xI=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",vk=async(t,e)=>X0(t.body)?{...t,body:await sj(t.body,e)}:t,Qa=async(t,e)=>({...t,body:await sj(t.body,e)}),_k=new WeakMap;function sse(t){const e=typeof t=="function"?t:t.fetch,n=_k.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return _k.set(e,r),r}const sj=async(t,e)=>{if(!await sse(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>Q0(n,r,i))),n},oj=t=>t instanceof Blob&&"name"in t,ose=t=>typeof t=="object"&&t!==null&&(t instanceof Response||xI(t)||oj(t)),X0=t=>{if(ose(t))return!0;if(Array.isArray(t))return t.some(X0);if(t&&typeof t=="object"){for(const e in t)if(X0(t[e]))return!0}return!1},Q0=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Yh([await n.blob()],Rm(n)));else if(xI(n))t.append(e,Yh([await new Response(XB(n)).blob()],Rm(n)));else if(oj(n))t.append(e,n,Rm(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Q0(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Q0(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},aj=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ase=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&aj(t),lse=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function use(t,e,n){if(ij(),t=await t,ase(t))return t instanceof File?t:Yh([await t.arrayBuffer()],t.name);if(lse(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Yh(await Y0(i),e,n)}const r=await Y0(t);if(e||(e=Rm(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return Yh(r,e,n)}async function Y0(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(aj(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(xI(t))for await(const r of t)e.push(...await Y0(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${cse(t)}`)}return e}function cse(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class se{constructor(e){this._client=e}}function lj(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const wk=Object.freeze(Object.create(null)),hse=(t=lj)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((c,d,f)=>{var E;/[?#]/.test(d)&&(i=!0);const p=r[f];let g=(i?encodeURIComponent:t)(""+p);return f!==r.length&&(p==null||typeof p=="object"&&p.toString===((E=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??wk)??wk))==null?void 0:E.toString))&&(g=p+"",s.push({start:c.length+d.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),c+d+(f===r.length?"":g)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((c,d)=>c.start-d.start),s.length>0){let c=0;const d=s.reduce((f,p)=>{const g=" ".repeat(p.start-c),E="^".repeat(p.length);return c=p.start+p.length,f+g+E},"");throw new oe(`Path parameters result in path with invalid segments:
${s.map(f=>f.error).join(`
`)}
${o}
${d}`)}return o},z=hse(lj);let uj=class extends se{list(e,n={},r){return this._client.getAPIList(z`/chat/completions/${e}/messages`,It,{query:n,...r})}};function ey(t){return t!==void 0&&"function"in t&&t.function!==void 0}function AI(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Ef(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function dse(t,e){return!e||!cj(e)?{...t,choices:t.choices.map(n=>(hj(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:PI(t,e)}function PI(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new HB;if(r.finish_reason==="content_filter")throw new KB;return hj(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>pse(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?fse(e,r.message.content):null}}});return{...t,choices:n}}function fse(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function pse(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return ey(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ef(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function mse(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return ey(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return ey(n)&&(Ef(n)||(n==null?void 0:n.function.strict)||!1)}function cj(t){var e;return AI(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Ef(n)||n.type==="function"&&n.function.strict===!0))??!1}function hj(t){for(const e of t||[])if(e.type!=="function")throw new oe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function gse(t){for(const e of t??[]){if(e.type!=="function")throw new oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const ty=t=>(t==null?void 0:t.role)==="assistant",dj=t=>(t==null?void 0:t.role)==="tool";var J0,Cm,xm,yh,vh,Am,_h,Oi,wh,ny,ry,Bl,fj;class kI{constructor(){J0.add(this),this.controller=new AbortController,Cm.set(this,void 0),xm.set(this,()=>{}),yh.set(this,()=>{}),vh.set(this,void 0),Am.set(this,()=>{}),_h.set(this,()=>{}),Oi.set(this,{}),wh.set(this,!1),ny.set(this,!1),ry.set(this,!1),Bl.set(this,!1),ce(this,Cm,new Promise((e,n)=>{ce(this,xm,e,"f"),ce(this,yh,n,"f")})),ce(this,vh,new Promise((e,n)=>{ce(this,Am,e,"f"),ce(this,_h,n,"f")})),F(this,Cm,"f").catch(()=>{}),F(this,vh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},F(this,J0,"m",fj).bind(this))},0)}_connected(){this.ended||(F(this,xm,"f").call(this),this._emit("connect"))}get ended(){return F(this,wh,"f")}get errored(){return F(this,ny,"f")}get aborted(){return F(this,ry,"f")}abort(){this.controller.abort()}on(e,n){return(F(this,Oi,"f")[e]||(F(this,Oi,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=F(this,Oi,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(F(this,Oi,"f")[e]||(F(this,Oi,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ce(this,Bl,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ce(this,Bl,!0),await F(this,vh,"f")}_emit(e,...n){if(F(this,wh,"f"))return;e==="end"&&(ce(this,wh,!0),F(this,Am,"f").call(this));const r=F(this,Oi,"f")[e];if(r&&(F(this,Oi,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!F(this,Bl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,yh,"f").call(this,i),F(this,_h,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!F(this,Bl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),F(this,yh,"f").call(this,i),F(this,_h,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Cm=new WeakMap,xm=new WeakMap,yh=new WeakMap,vh=new WeakMap,Am=new WeakMap,_h=new WeakMap,Oi=new WeakMap,wh=new WeakMap,ny=new WeakMap,ry=new WeakMap,Bl=new WeakMap,J0=new WeakSet,fj=function(e){if(ce(this,ny,!0),e instanceof Error&&e.name==="AbortError"&&(e=new dr),e instanceof dr)return ce(this,ry,!0),this._emit("abort",e);if(e instanceof oe)return this._emit("error",e);if(e instanceof Error){const n=new oe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new oe(String(e)))};function yse(t){return typeof t.parse=="function"}var fn,Z0,iy,eE,tE,nE,pj,mj;const vse=10;class gj extends kI{constructor(){super(...arguments),fn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),dj(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(ty(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),F(this,fn,"m",Z0).call(this)}async finalMessage(){return await this.done(),F(this,fn,"m",iy).call(this)}async finalFunctionToolCall(){return await this.done(),F(this,fn,"m",eE).call(this)}async finalFunctionToolCallResult(){return await this.done(),F(this,fn,"m",tE).call(this)}async totalUsage(){return await this.done(),F(this,fn,"m",nE).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=F(this,fn,"m",iy).call(this);n&&this._emit("finalMessage",n);const r=F(this,fn,"m",Z0).call(this);r&&this._emit("finalContent",r);const i=F(this,fn,"m",eE).call(this);i&&this._emit("finalFunctionToolCall",i);const s=F(this,fn,"m",tE).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",F(this,fn,"m",nE).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,fn,"m",pj).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(PI(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var p,g,E;const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&s.type==="function"&&((p=s==null?void 0:s.function)==null?void 0:p.name),{maxChatCompletions:u=vse}=r||{},c=n.tools.map(b=>{if(Ef(b)){if(!b.$callback)throw new oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),d={};for(const b of c)b.type==="function"&&(d[b.function.name||b.function.function.name]=b.function);const f="tools"in n?c.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<u;++b){const y=(g=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:f,messages:[...this.messages]},r)).choices[0])==null?void 0:g.message;if(!y)throw new oe("missing message in ChatCompletion response");if(!((E=y.tool_calls)!=null&&E.length))return;for(const w of y.tool_calls){if(w.type!=="function")continue;const x=w.id,{name:O,arguments:k}=w.function,T=d[O];if(T){if(l&&l!==O){const A=`Invalid tool_call: ${JSON.stringify(O)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:A});continue}}else{const A=`Invalid tool_call: ${JSON.stringify(O)}. Available options are: ${Object.keys(d).map(N=>JSON.stringify(N)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:A});continue}let v;try{v=yse(T)?await T.parse(k):k}catch(A){const N=A instanceof Error?A.message:String(A);this._addMessage({role:i,tool_call_id:x,content:N});continue}const R=await T.function(v,this),C=F(this,fn,"m",mj).call(this,R);if(this._addMessage({role:i,tool_call_id:x,content:C}),l)return}}}}fn=new WeakSet,Z0=function(){return F(this,fn,"m",iy).call(this).content??null},iy=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(ty(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new oe("stream ended without producing a ChatCompletionMessage with role=assistant")},eE=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(ty(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:n.function}},tE=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(dj(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},nE=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},pj=function(e){if(e.n!=null&&e.n>1)throw new oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},mj=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class DI extends gj{static runTools(e,n,r){const i=new DI,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),ty(e)&&e.content&&this._emit("content",e.content)}}const yj=1,vj=2,_j=4,wj=8,Sj=16,Ej=32,Tj=64,bj=128,Ij=256,Rj=bj|Ij,Cj=Sj|Ej|Rj|Tj,xj=yj|vj|Cj,Aj=_j|wj,_se=xj|Aj,Bt={STR:yj,NUM:vj,ARR:_j,OBJ:wj,NULL:Sj,BOOL:Ej,NAN:Tj,INFINITY:bj,MINUS_INFINITY:Ij,INF:Rj,SPECIAL:Cj,ATOM:xj,COLLECTION:Aj,ALL:_se};class wse extends Error{}class Sse extends Error{}function Ese(t,e=Bt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Tse(t.trim(),e)}const Tse=(t,e)=>{const n=t.length;let r=0;const i=f=>{throw new wse(`${f} at position ${r}`)},s=f=>{throw new Sse(`${f} at position ${r}`)},o=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||Bt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Bt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Bt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Bt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Bt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Bt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):c()),a=()=>{const f=r;let p=!1;for(r++;r<n&&(t[r]!=='"'||p&&t[r-1]==="\\");)p=t[r]==="\\"?!p:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(f,++r-Number(p)))}catch(g){s(String(g))}else if(Bt.STR&e)try{return JSON.parse(t.substring(f,r-Number(p))+'"')}catch{return JSON.parse(t.substring(f,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;t[r]!=="}";){if(d(),r>=n&&Bt.OBJ&e)return f;const p=a();d(),r++;try{const g=o();Object.defineProperty(f,p,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(Bt.OBJ&e)return f;throw g}d(),t[r]===","&&r++}}catch{if(Bt.OBJ&e)return f;i("Expected '}' at end of object")}return r++,f},u=()=>{r++;const f=[];try{for(;t[r]!=="]";)f.push(o()),d(),t[r]===","&&r++}catch{if(Bt.ARR&e)return f;i("Expected ']' at end of array")}return r++,f},c=()=>{if(r===0){t==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(Bt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(p))}}const f=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Bt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(f,r))}catch{t.substring(f,r)==="-"&&Bt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(f,t.lastIndexOf("e")))}catch(g){s(String(g))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},Sk=t=>Ese(t,Bt.ALL^Bt.NUM);var Ct,Di,Al,Vs,uw,Np,cw,hw,dw,Lp,fw,Ek;class Hd extends gj{constructor(e){super(),Ct.add(this),Di.set(this,void 0),Al.set(this,void 0),Vs.set(this,void 0),ce(this,Di,e),ce(this,Al,[])}get currentChatCompletionSnapshot(){return F(this,Vs,"f")}static fromReadableStream(e){const n=new Hd(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Hd(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,Ct,"m",uw).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)F(this,Ct,"m",cw).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new dr;return this._addChatCompletion(F(this,Ct,"m",Lp).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),F(this,Ct,"m",uw).call(this),this._connected();const i=ci.fromReadableStream(e,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(F(this,Ct,"m",Lp).call(this)),F(this,Ct,"m",cw).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new dr;return this._addChatCompletion(F(this,Ct,"m",Lp).call(this))}[(Di=new WeakMap,Al=new WeakMap,Vs=new WeakMap,Ct=new WeakSet,uw=function(){this.ended||ce(this,Vs,void 0)},Np=function(n){let r=F(this,Al,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},F(this,Al,"f")[n.index]=r,r)},cw=function(n){var i,s,o,a,l,u,c,d,f,p,g,E,b,S,y;if(this.ended)return;const r=F(this,Ct,"m",Ek).call(this,n);this._emit("chunk",n,r);for(const w of n.choices){const x=r.choices[w.index];w.delta.content!=null&&((i=x.message)==null?void 0:i.role)==="assistant"&&((s=x.message)!=null&&s.content)&&(this._emit("content",w.delta.content,x.message.content),this._emit("content.delta",{delta:w.delta.content,snapshot:x.message.content,parsed:x.message.parsed})),w.delta.refusal!=null&&((o=x.message)==null?void 0:o.role)==="assistant"&&((a=x.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:w.delta.refusal,snapshot:x.message.refusal}),((l=w.logprobs)==null?void 0:l.content)!=null&&((u=x.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=w.logprobs)==null?void 0:c.content,snapshot:((d=x.logprobs)==null?void 0:d.content)??[]}),((f=w.logprobs)==null?void 0:f.refusal)!=null&&((p=x.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=w.logprobs)==null?void 0:g.refusal,snapshot:((E=x.logprobs)==null?void 0:E.refusal)??[]});const O=F(this,Ct,"m",Np).call(this,x);x.finish_reason&&(F(this,Ct,"m",dw).call(this,x),O.current_tool_call_index!=null&&F(this,Ct,"m",hw).call(this,x,O.current_tool_call_index));for(const k of w.delta.tool_calls??[])O.current_tool_call_index!==k.index&&(F(this,Ct,"m",dw).call(this,x),O.current_tool_call_index!=null&&F(this,Ct,"m",hw).call(this,x,O.current_tool_call_index)),O.current_tool_call_index=k.index;for(const k of w.delta.tool_calls??[]){const T=(b=x.message.tool_calls)==null?void 0:b[k.index];T!=null&&T.type&&((T==null?void 0:T.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(S=T.function)==null?void 0:S.name,index:k.index,arguments:T.function.arguments,parsed_arguments:T.function.parsed_arguments,arguments_delta:((y=k.function)==null?void 0:y.arguments)??""}):(T==null||T.type,void 0))}}},hw=function(n,r){var o,a,l;if(F(this,Ct,"m",Np).call(this,n).done_tool_calls.has(r))return;const s=(o=n.message.tool_calls)==null?void 0:o[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(a=F(this,Di,"f"))==null?void 0:a.tools)==null?void 0:l.find(c=>ey(c)&&c.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Ef(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},dw=function(n){var i,s;const r=F(this,Ct,"m",Np).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=F(this,Ct,"m",fw).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Lp=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,Vs,"f");if(!n)throw new oe("request ended without sending any chunks");return ce(this,Vs,void 0),ce(this,Al,[]),bse(n,F(this,Di,"f"))},fw=function(){var r;const n=(r=F(this,Di,"f"))==null?void 0:r.response_format;return AI(n)?n:null},Ek=function(n){var r,i,s,o;let a=F(this,Vs,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=ce(this,Vs,{...u,choices:[]});for(const{delta:c,finish_reason:d,index:f,logprobs:p=null,...g}of n.choices){let E=a.choices[f];if(E||(E=a.choices[f]={finish_reason:d,index:f,message:{},logprobs:p,...g}),p)if(!E.logprobs)E.logprobs=Object.assign({},p);else{const{content:k,refusal:T,...v}=p;Object.assign(E.logprobs,v),k&&((r=E.logprobs).content??(r.content=[]),E.logprobs.content.push(...k)),T&&((i=E.logprobs).refusal??(i.refusal=[]),E.logprobs.refusal.push(...T))}if(d&&(E.finish_reason=d,F(this,Di,"f")&&cj(F(this,Di,"f")))){if(d==="length")throw new HB;if(d==="content_filter")throw new KB}if(Object.assign(E,g),!c)continue;const{content:b,refusal:S,function_call:y,role:w,tool_calls:x,...O}=c;if(Object.assign(E.message,O),S&&(E.message.refusal=(E.message.refusal||"")+S),w&&(E.message.role=w),y&&(E.message.function_call?(y.name&&(E.message.function_call.name=y.name),y.arguments&&((s=E.message.function_call).arguments??(s.arguments=""),E.message.function_call.arguments+=y.arguments)):E.message.function_call=y),b&&(E.message.content=(E.message.content||"")+b,!E.message.refusal&&F(this,Ct,"m",fw).call(this)&&(E.message.parsed=Sk(E.message.content))),x){E.message.tool_calls||(E.message.tool_calls=[]);for(const{index:k,id:T,type:v,function:R,...C}of x){const A=(o=E.message.tool_calls)[k]??(o[k]={});Object.assign(A,C),T&&(A.id=T),v&&(A.type=v),R&&(A.function??(A.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(A.function.name=R.name),R!=null&&R.arguments&&(A.function.arguments+=R.arguments,mse(F(this,Di,"f"),A)&&(A.function.parsed_arguments=Sk(A.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ci(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function bse(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:f,...p})=>{if(!c)throw new oe(`missing finish_reason for choice ${d}`);const{content:g=null,function_call:E,tool_calls:b,...S}=u,y=u.role;if(!y)throw new oe(`missing role for choice ${d}`);if(E){const{arguments:w,name:x}=E;if(w==null)throw new oe(`missing function_call.arguments for choice ${d}`);if(!x)throw new oe(`missing function_call.name for choice ${d}`);return{...p,message:{content:g,function_call:{arguments:w,name:x},role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}return b?{...p,index:d,finish_reason:c,logprobs:f,message:{...S,role:y,content:g,refusal:u.refusal??null,tool_calls:b.map((w,x)=>{const{function:O,type:k,id:T,...v}=w,{arguments:R,name:C,...A}=O||{};if(T==null)throw new oe(`missing choices[${d}].tool_calls[${x}].id
${Vp(t)}`);if(k==null)throw new oe(`missing choices[${d}].tool_calls[${x}].type
${Vp(t)}`);if(C==null)throw new oe(`missing choices[${d}].tool_calls[${x}].function.name
${Vp(t)}`);if(R==null)throw new oe(`missing choices[${d}].tool_calls[${x}].function.arguments
${Vp(t)}`);return{...v,id:T,type:k,function:{...A,name:C,arguments:R}}})}}:{...p,message:{...S,content:g,role:y,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return dse(l,e)}function Vp(t){return JSON.stringify(t)}class sy extends Hd{static fromReadableStream(e){const n=new sy(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new sy(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let OI=class extends se{constructor(){super(...arguments),this.messages=new uj(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(z`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(z`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/chat/completions/${e}`,n)}parse(e,n){return gse(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>PI(r,e))}runTools(e,n){return e.stream?sy.runTools(this._client,e,n):DI.runTools(this._client,e,n)}stream(e,n){return Hd.createChatCompletion(this._client,e,n)}};OI.Messages=uj;class MI extends se{constructor(){super(...arguments),this.completions=new OI(this._client)}}MI.Completions=OI;const Pj=Symbol("brand.privateNullableHeaders");function*Ise(t){if(!t)return;if(Pj in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():ok(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=ok(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const te=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Ise(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[Pj]:!0,values:e,nulls:n}};class kj extends se{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:te([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class Dj extends se{create(e,n){return this._client.post("/audio/transcriptions",Qa({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Oj extends se{create(e,n){return this._client.post("/audio/translations",Qa({body:e,...n,__metadata:{model:e.model}},this._client))}}class Tf extends se{constructor(){super(...arguments),this.transcriptions=new Dj(this._client),this.translations=new Oj(this._client),this.speech=new kj(this._client)}}Tf.Transcriptions=Dj;Tf.Translations=Oj;Tf.Speech=kj;class Mj extends se{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(z`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",It,{query:e,...n})}cancel(e,n){return this._client.post(z`/batches/${e}/cancel`,n)}}class Nj extends se{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/assistants/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",It,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/assistants/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Lj=class extends se{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class Vj extends se{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let yv=class extends se{constructor(){super(...arguments),this.sessions=new Lj(this._client),this.transcriptionSessions=new Vj(this._client)}};yv.Sessions=Lj;yv.TranscriptionSessions=Vj;class Fj extends se{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(z`/chatkit/sessions/${e}/cancel`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let Bj=class extends se{retrieve(e,n){return this._client.get(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Zg,{query:e,...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/chatkit/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(z`/chatkit/threads/${e}/items`,Zg,{query:n,...r,headers:te([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class vv extends se{constructor(){super(...arguments),this.sessions=new Fj(this._client),this.threads=new Bj(this._client)}}vv.Sessions=Fj;vv.Threads=Bj;class jj extends se{create(e,n,r){return this._client.post(z`/threads/${e}/messages`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/messages/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/messages`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(z`/threads/${i}/messages/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Uj extends se{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(z`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(z`/threads/${i}/runs/${e}/steps`,It,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const Rse=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var pw={};const Pl=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=pw==null?void 0:pw[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var qt,Sa,rE,ti,Pm,kr,Ea,ou,ha,oy,Un,km,Dm,Jh,Sh,Eh,Tk,bk,Ik,Rk,Ck,xk,Ak;class Zh extends kI{constructor(){super(...arguments),qt.add(this),rE.set(this,[]),ti.set(this,{}),Pm.set(this,{}),kr.set(this,void 0),Ea.set(this,void 0),ou.set(this,void 0),ha.set(this,void 0),oy.set(this,void 0),Un.set(this,void 0),km.set(this,void 0),Dm.set(this,void 0),Jh.set(this,void 0)}[(rE=new WeakMap,ti=new WeakMap,Pm=new WeakMap,kr=new WeakMap,Ea=new WeakMap,ou=new WeakMap,ha=new WeakMap,oy=new WeakMap,Un=new WeakMap,km=new WeakMap,Dm=new WeakMap,Jh=new WeakMap,qt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Sa;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=ci.fromReadableStream(e,this.controller);for await(const o of i)F(this,qt,"m",Sh).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new dr;return this._addRun(F(this,qt,"m",Eh).call(this))}toReadableStream(){return new ci(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new Sa;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,qt,"m",Sh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new dr;return this._addRun(F(this,qt,"m",Eh).call(this))}static createThreadAssistantStream(e,n,r){const i=new Sa;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new Sa;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return F(this,km,"f")}currentRun(){return F(this,Dm,"f")}currentMessageSnapshot(){return F(this,kr,"f")}currentRunStepSnapshot(){return F(this,Jh,"f")}async finalRunSteps(){return await this.done(),Object.values(F(this,ti,"f"))}async finalMessages(){return await this.done(),Object.values(F(this,Pm,"f"))}async finalRun(){if(await this.done(),!F(this,Ea,"f"))throw Error("Final run was not received.");return F(this,Ea,"f")}async _createThreadAssistantStream(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of o)F(this,qt,"m",Sh).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new dr;return this._addRun(F(this,qt,"m",Eh).call(this))}async _createAssistantStream(e,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const u of a)F(this,qt,"m",Sh).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new dr;return this._addRun(F(this,qt,"m",Eh).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(ow(s)&&ow(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!ow(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=s[a];l==null?s.push(o):s[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}Sa=Zh,Sh=function(e){if(!this.ended)switch(ce(this,km,e),F(this,qt,"m",Ik).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":F(this,qt,"m",Ak).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":F(this,qt,"m",bk).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":F(this,qt,"m",Tk).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Eh=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");if(!F(this,Ea,"f"))throw Error("Final run has not been received");return F(this,Ea,"f")},Tk=function(e){const[n,r]=F(this,qt,"m",Ck).call(this,e,F(this,kr,"f"));ce(this,kr,n),F(this,Pm,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=F(this,ou,"f")){if(F(this,ha,"f"))switch(F(this,ha,"f").type){case"text":this._emit("textDone",F(this,ha,"f").text,F(this,kr,"f"));break;case"image_file":this._emit("imageFileDone",F(this,ha,"f").image_file,F(this,kr,"f"));break}ce(this,ou,i.index)}ce(this,ha,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(F(this,ou,"f")!==void 0){const i=e.data.content[F(this,ou,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,F(this,kr,"f"));break;case"text":this._emit("textDone",i.text,F(this,kr,"f"));break}}F(this,kr,"f")&&this._emit("messageDone",e.data),ce(this,kr,void 0)}},bk=function(e){const n=F(this,qt,"m",Rk).call(this,e);switch(ce(this,Jh,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==F(this,oy,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(F(this,Un,"f")&&this._emit("toolCallDone",F(this,Un,"f")),ce(this,oy,s.index),ce(this,Un,n.step_details.tool_calls[s.index]),F(this,Un,"f")&&this._emit("toolCallCreated",F(this,Un,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,Jh,void 0),e.data.step_details.type=="tool_calls"&&F(this,Un,"f")&&(this._emit("toolCallDone",F(this,Un,"f")),ce(this,Un,void 0)),this._emit("runStepDone",e.data,n);break}},Ik=function(e){F(this,rE,"f").push(e),this._emit("event",e)},Rk=function(e){switch(e.event){case"thread.run.step.created":return F(this,ti,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=F(this,ti,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Sa.accumulateDelta(n,r.delta);F(this,ti,"f")[e.data.id]=i}return F(this,ti,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":F(this,ti,"f")[e.data.id]=e.data;break}if(F(this,ti,"f")[e.data.id])return F(this,ti,"f")[e.data.id];throw new Error("No snapshot available")},Ck=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=F(this,qt,"m",xk).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},xk=function(e,n){return Sa.accumulateDelta(n,e)},Ak=function(e){switch(ce(this,Dm,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ce(this,Ea,e.data),F(this,Un,"f")&&(this._emit("toolCallDone",F(this,Un,"f")),ce(this,Un,void 0));break}};let NI=class extends se{constructor(){super(...arguments),this.steps=new Uj(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(z`/threads/${i}/runs/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/threads/${e}/runs`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(z`/threads/${i}/runs/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return Zh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Sf(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return Zh.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(z`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return Zh.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};NI.Steps=Uj;class _v extends se{constructor(){super(...arguments),this.runs=new NI(this._client),this.messages=new jj(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/threads/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(z`/threads/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Zh.createThreadAssistantStream(e,this._client.beta.threads,n)}}_v.Runs=NI;_v.Messages=jj;class fc extends se{constructor(){super(...arguments),this.realtime=new yv(this._client),this.chatkit=new vv(this._client),this.assistants=new Nj(this._client),this.threads=new _v(this._client)}}fc.Realtime=yv;fc.ChatKit=vv;fc.Assistants=Nj;fc.Threads=_v;class $j extends se{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class zj extends se{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}/content`,{...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let LI=class extends se{constructor(){super(...arguments),this.content=new zj(this._client)}create(e,n,r){return this._client.post(z`/containers/${e}/files`,Qa({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(z`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/containers/${e}/files`,It,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(z`/containers/${i}/files/${e}`,{...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}};LI.Content=zj;class VI extends se{constructor(){super(...arguments),this.files=new LI(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(z`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/containers/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}}VI.Files=LI;class Wj extends se{create(e,n,r){const{include:i,...s}=n;return this._client.post(z`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(z`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(z`/conversations/${e}/items`,Zg,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(z`/conversations/${i}/items/${e}`,r)}}class FI extends se{constructor(){super(...arguments),this.items=new Wj(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(z`/conversations/${e}`,n)}update(e,n,r){return this._client.post(z`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(z`/conversations/${e}`,n)}}FI.Items=Wj;class Hj extends se{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Kt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Kt(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=Rse(l)}),o)))}}class Kj extends se{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(z`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(z`/evals/${i}/runs/${e}/output_items`,It,{query:s,...r})}}class BI extends se{constructor(){super(...arguments),this.outputItems=new Kj(this._client)}create(e,n,r){return this._client.post(z`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(z`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(z`/evals/${e}/runs`,It,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(z`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(z`/evals/${i}/runs/${e}`,r)}}BI.OutputItems=Kj;class jI extends se{constructor(){super(...arguments),this.runs=new BI(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(z`/evals/${e}`,n)}update(e,n,r){return this._client.post(z`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/evals/${e}`,n)}}jI.Runs=BI;let qj=class extends se{create(e,n){return this._client.post("/files",Qa({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",It,{query:e,...n})}delete(e,n){return this._client.delete(z`/files/${e}`,n)}content(e,n){return this._client.get(z`/files/${e}/content`,{...n,headers:te([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Sf(n),o=await this.retrieve(e),Date.now()-s>r)throw new II({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class Gj extends se{}let Xj=class extends se{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class UI extends se{constructor(){super(...arguments),this.graders=new Xj(this._client)}}UI.Graders=Xj;class Qj extends se{create(e,n,r){return this._client.getAPIList(z`/fine_tuning/checkpoints/${e}/permissions`,gv,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(z`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(z`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let $I=class extends se{constructor(){super(...arguments),this.permissions=new Qj(this._client)}};$I.Permissions=Qj;class Yj extends se{list(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/checkpoints`,It,{query:n,...r})}}class zI extends se{constructor(){super(...arguments),this.checkpoints=new Yj(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(z`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",It,{query:e,...n})}cancel(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(z`/fine_tuning/jobs/${e}/events`,It,{query:n,...r})}pause(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(z`/fine_tuning/jobs/${e}/resume`,n)}}zI.Checkpoints=Yj;class pc extends se{constructor(){super(...arguments),this.methods=new Gj(this._client),this.jobs=new zI(this._client),this.checkpoints=new $I(this._client),this.alpha=new UI(this._client)}}pc.Methods=Gj;pc.Jobs=zI;pc.Checkpoints=$I;pc.Alpha=UI;class Jj extends se{}class WI extends se{constructor(){super(...arguments),this.graderModels=new Jj(this._client)}}WI.GraderModels=Jj;class Zj extends se{createVariation(e,n){return this._client.post("/images/variations",Qa({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Qa({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class eU extends se{retrieve(e,n){return this._client.get(z`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",gv,e)}delete(e,n){return this._client.delete(z`/models/${e}`,n)}}class tU extends se{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class nU extends se{accept(e,n,r){return this._client.post(z`/realtime/calls/${e}/accept`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(z`/realtime/calls/${e}/hangup`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(z`/realtime/calls/${e}/refer`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(z`/realtime/calls/${e}/reject`,{body:n,...r,headers:te([{Accept:"*/*"},r==null?void 0:r.headers])})}}class rU extends se{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class wv extends se{constructor(){super(...arguments),this.clientSecrets=new rU(this._client),this.calls=new nU(this._client)}}wv.ClientSecrets=rU;wv.Calls=nU;function Cse(t,e){return!e||!Ase(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:iU(t,e)}function iU(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Dse(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:xse(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||iE(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function xse(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function Ase(t){var e;return!!AI((e=t.text)==null?void 0:e.format)}function Pse(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function kse(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Dse(t,e){const n=kse(t.tools??[],e.name);return{...e,...e,parsed_arguments:Pse(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function iE(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var kl,Fp,Fs,Bp,Pk,kk,Dk,Ok;class HI extends kI{constructor(e){super(),kl.add(this),Fp.set(this,void 0),Fs.set(this,void 0),Bp.set(this,void 0),ce(this,Fp,e)}static createResponse(e,n,r){const i=new HI(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var a;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),F(this,kl,"m",Pk).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of s)F(this,kl,"m",kk).call(this,l,o);if((a=s.controller.signal)!=null&&a.aborted)throw new dr;return F(this,kl,"m",Dk).call(this)}[(Fp=new WeakMap,Fs=new WeakMap,Bp=new WeakMap,kl=new WeakSet,Pk=function(){this.ended||ce(this,Fs,void 0)},kk=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=F(this,kl,"m",Ok).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new oe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new oe(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},Dk=function(){if(this.ended)throw new oe("stream has ended, this shouldn't happen");const n=F(this,Fs,"f");if(!n)throw new oe("request ended without sending any events");ce(this,Fs,void 0);const r=Ose(n,F(this,Fp,"f"));return ce(this,Bp,r),r},Ok=function(n){var i;let r=F(this,Fs,"f");if(!r){if(n.type!=="response.created")throw new oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ce(this,Fs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);const o=s.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?s.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new oe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new oe(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const o=(i=s.content)==null?void 0:i[n.content_index];if(!o)throw new oe(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new oe(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{ce(this,Fs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=F(this,Bp,"f");if(!e)throw new oe("stream ended without producing a ChatCompletion");return e}}function Ose(t,e){return Cse(t,e)}class sU extends se{list(e,n={},r){return this._client.getAPIList(z`/responses/${e}/input_items`,It,{query:n,...r})}}class oU extends se{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Sv extends se{constructor(){super(...arguments),this.inputItems=new sU(this._client),this.inputTokens=new oU(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&iE(r),r))}retrieve(e,n={},r){return this._client.get(z`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&iE(i),i))}delete(e,n){return this._client.delete(z`/responses/${e}`,{...n,headers:te([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>iU(r,e))}stream(e,n){return HI.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(z`/responses/${e}/cancel`,n)}compact(e={},n){return this._client.post("/responses/compact",{body:e,...n})}}Sv.InputItems=sU;Sv.InputTokens=oU;class aU extends se{create(e,n,r){return this._client.post(z`/uploads/${e}/parts`,Qa({body:n,...r},this._client))}}class KI extends se{constructor(){super(...arguments),this.parts=new aU(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(z`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(z`/uploads/${e}/complete`,{body:n,...r})}}KI.Parts=aU;const Mse=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class lU extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/file_batches`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/file_batches/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(z`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(z`/vector_stores/${i}/file_batches/${e}/files`,It,{query:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Sf(l);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(s,n.length),a=this._client,l=n.values(),u=[...r];async function c(f){for(let p of f){const g=await a.files.create({file:p,purpose:"assistants"},i);u.push(g.id)}}const d=Array(o).fill(l).map(c);return await Mse(d),await this.createAndPoll(e,{file_ids:u})}}class uU extends se{create(e,n,r){return this._client.post(z`/vector_stores/${e}/files`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(z`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(z`/vector_stores/${e}/files`,It,{query:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(z`/vector_stores/${i}/files/${e}`,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var s;const i=te([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),a=o.data;switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=o.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await Sf(l);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(z`/vector_stores/${i}/files/${e}/content`,gv,{...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Ev extends se{constructor(){super(...arguments),this.files=new uU(this._client),this.fileBatches=new lU(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(z`/vector_stores/${e}`,{body:n,...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",It,{query:e,...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(z`/vector_stores/${e}`,{...n,headers:te([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(z`/vector_stores/${e}/search`,gv,{body:n,method:"post",...r,headers:te([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Ev.Files=uU;Ev.FileBatches=lU;class cU extends se{create(e,n){return this._client.post("/videos",vk({body:e,...n},this._client))}retrieve(e,n){return this._client.get(z`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Zg,{query:e,...n})}delete(e,n){return this._client.delete(z`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(z`/videos/${e}/content`,{query:n,...r,headers:te([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(z`/videos/${e}/remix`,vk({body:n,...r},this._client))}}var jl,hU,Om;class dU extends se{constructor(){super(...arguments),jl.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");F(this,jl,"m",hU).call(this,r);const s=te([n]).values,o=F(this,jl,"m",Om).call(this,s,"webhook-signature"),a=F(this,jl,"m",Om).call(this,s,"webhook-timestamp"),l=F(this,jl,"m",Om).call(this,s,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new ph("Invalid webhook timestamp format");const c=Math.floor(Date.now()/1e3);if(c-u>i)throw new ph("Webhook timestamp is too old");if(u>c+i)throw new ph("Webhook timestamp is too new");const d=o.split(" ").map(E=>E.startsWith("v1,")?E.substring(3):E),f=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),p=l?`${l}.${a}.${e}`:`${a}.${e}`,g=await crypto.subtle.importKey("raw",f,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const E of d)try{const b=Buffer.from(E,"base64");if(await crypto.subtle.verify("HMAC",g,b,new TextEncoder().encode(p)))return}catch{continue}throw new ph("The given webhook signature does not match the expected signature")}}jl=new WeakSet,hU=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Om=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var sE,qI,Mm,fU;class ye{constructor({baseURL:e=Pl("OPENAI_BASE_URL"),apiKey:n=Pl("OPENAI_API_KEY"),organization:r=Pl("OPENAI_ORG_ID")??null,project:i=Pl("OPENAI_PROJECT_ID")??null,webhookSecret:s=Pl("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(sE.add(this),Mm.set(this,void 0),this.completions=new $j(this),this.chat=new MI(this),this.embeddings=new Hj(this),this.files=new qj(this),this.images=new Zj(this),this.audio=new Tf(this),this.moderations=new tU(this),this.models=new eU(this),this.fineTuning=new pc(this),this.graders=new WI(this),this.vectorStores=new Ev(this),this.webhooks=new dU(this),this.beta=new fc(this),this.batches=new Mj(this),this.uploads=new KI(this),this.responses=new Sv(this),this.realtime=new wv(this),this.conversations=new FI(this),this.evals=new jI(this),this.containers=new VI(this),this.videos=new cU(this),n===void 0)throw new oe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Lie())throw new oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??qI.DEFAULT_TIMEOUT,this.logger=a.logger??console;const l="warn";this.logLevel=l,this.logLevel=gk(a.logLevel,"ClientOptions.logLevel",this)??gk(Pl("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Uie(),ce(this,Mm,zie),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return te([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Xie(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Fl}`}defaultIdempotencyKey(){return`stainless-node-retry-${LB()}`}makeStatusError(e,n,r,i){return Yt.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof oe?r:new oe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new oe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!F(this,sE,"m",fU).call(this)&&r||this.baseURL,s=kie(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Die(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new mv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var S,y;const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:l}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),c=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Kt(this).debug(`[${u}] sending request`,oa({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),(S=i.signal)!=null&&S.aborted)throw new dr;const f=new AbortController,p=await this.fetchWithTimeout(a,o,l,f).catch(q0),g=Date.now();if(p instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if((y=i.signal)!=null&&y.aborted)throw new dr;const x=K0(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return Kt(this).info(`[${u}] connection ${x?"timed out":"failed"} - ${w}`),Kt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (${w})`,oa({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),this.retryRequest(i,n,r??u);throw Kt(this).info(`[${u}] connection ${x?"timed out":"failed"} - error; no more retries left`),Kt(this).debug(`[${u}] connection ${x?"timed out":"failed"} (error; no more retries left)`,oa({retryOfRequestLogID:r,url:a,durationMs:g-d,message:p.message})),x?new II:new fv({cause:p})}const E=[...p.headers.entries()].filter(([w])=>w==="x-request-id").map(([w,x])=>", "+w+": "+JSON.stringify(x)).join(""),b=`[${u}${c}${E}] ${o.method} ${a} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${g-d}ms`;if(!p.ok){const w=await this.shouldRetry(p);if(n&&w){const R=`retrying, ${n} attempts remaining`;return await $ie(p.body),Kt(this).info(`${b} - ${R}`),Kt(this).debug(`[${u}] response error (${R})`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),this.retryRequest(i,n,r??u,p.headers)}const x=w?"error; no more retries left":"error; not retryable";Kt(this).info(`${b} - ${x}`);const O=await p.text().catch(R=>q0(R).message),k=Nie(O),T=k?void 0:O;throw Kt(this).debug(`[${u}] response error (${x})`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:T,durationMs:Date.now()-d})),this.makeStatusError(p.status,k,T,p.headers)}return Kt(this).info(b),Kt(this).debug(`[${u}] response start`,oa({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:g-d})),{response:p,options:i,controller:f,requestLogID:u,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new ise(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,c={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...a};o&&(c.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i==null?void 0:i.get("retry-after-ms");if(o){const l=parseFloat(o);Number.isNaN(l)||(s=l)}const a=i==null?void 0:i.get("retry-after");if(a&&!s){const l=parseFloat(a);Number.isNaN(l)?s=Date.parse(a)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Sf(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,l=this.buildURL(s,o,a);"timeout"in r&&Mie("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:u,body:c}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:u,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&c instanceof globalThis.ReadableStream&&{duplex:"half"},...c&&{body:c},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=te([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...jie(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=te([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:XB(e)}:F(this,Mm,"f").call(this,{body:e,headers:r})}}qI=ye,Mm=new WeakMap,sE=new WeakSet,fU=function(){return this.baseURL!=="https://api.openai.com/v1"};ye.OpenAI=qI;ye.DEFAULT_TIMEOUT=6e5;ye.OpenAIError=oe;ye.APIError=Yt;ye.APIConnectionError=fv;ye.APIConnectionTimeoutError=II;ye.APIUserAbortError=dr;ye.NotFoundError=jB;ye.ConflictError=UB;ye.RateLimitError=zB;ye.BadRequestError=VB;ye.AuthenticationError=FB;ye.InternalServerError=WB;ye.PermissionDeniedError=BB;ye.UnprocessableEntityError=$B;ye.InvalidWebhookSignatureError=ph;ye.toFile=use;ye.Completions=$j;ye.Chat=MI;ye.Embeddings=Hj;ye.Files=qj;ye.Images=Zj;ye.Audio=Tf;ye.Moderations=tU;ye.Models=eU;ye.FineTuning=pc;ye.Graders=WI;ye.VectorStores=Ev;ye.Webhooks=dU;ye.Beta=fc;ye.Batches=Mj;ye.Uploads=KI;ye.Responses=Sv;ye.Realtime=wv;ye.Conversations=FI;ye.Evals=jI;ye.Containers=VI;ye.Videos=cU;const Nse=()=>localStorage.getItem("openai_api_key"),pU=()=>{const t=Nse();if(!t)throw new Error("OpenAI API Key not found. Please add it in the Account settings.");return new ye({apiKey:t,dangerouslyAllowBrowser:!0})};async function Lse(t){try{const n=await pU().chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"Analyze this clothing item. Return a JSON object with the following fields: 'type' (e.g., shirt, pants, dress), 'color' (primary color), 'style' (e.g., casual, formal, sporty), 'tags' (array of 3-5 descriptive keywords), and 'refreshCycle' (suggested number of days before re-wearing, e.g., 1 for underwear, 7 for shirts, 14 for pants)."},{type:"image_url",image_url:{url:t}}]}],response_format:{type:"json_object"}});return JSON.parse(n.choices[0].message.content)}catch(e){return console.error("Error analyzing image:",e),{type:"unknown",color:"unknown",style:"unknown",tags:["manual-entry"],refreshCycle:7}}}async function mU(t,e){try{const n=t.map(a=>({id:a.id,type:a.type,color:a.color,tags:a.tags,style:a.style,rating:a.rating||3,wearCount:a.wearCount||0})),r=`
      I need 3 outfit suggestions from the following wardrobe items:
      ${JSON.stringify(n)}

      Criteria:
      - Destination: ${e.destination}
      - Temperature: ${e.temperature}
      - Style Preference: ${e.style}

      Rules:
      1. Prioritize items with higher 'rating'.
      2. Consider 'wearCount' - if an item has a high rating but low wear count, suggest it more.
      3. Ensure the outfits are appropriate for the temperature and destination.

      Please select 3 distinct outfits. For each outfit, provide:
      1. A short summary explaining why it fits the criteria.
      2. The list of item IDs used in the outfit.
      
      Return the result as a JSON object with a key "outfits" containing an array of the 3 suggestions.
    `,s=await pU().chat.completions.create({model:"gpt-4o",messages:[{role:"system",content:"You are a helpful fashion stylist assistant."},{role:"user",content:r}],response_format:{type:"json_object"}});return JSON.parse(s.choices[0].message.content).outfits}catch(n){return console.error("Error generating outfits:",n),[]}}const Mk=(t,e=200,n=200)=>new Promise(r=>{let i=new Image;i.src=t,i.onload=()=>{let s=document.createElement("canvas"),o=i.width,a=i.height;o>a?o>e&&(a*=e/o,o=e):a>n&&(o*=n/a,a=n),s.width=o,s.height=a,s.getContext("2d").drawImage(i,0,0,o,a),r(s.toDataURL("image/jpeg",.4))}});function Vse(){const[t,e]=I.useState(null),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(null),l=I.useRef(null),{addItem:u}=dv(),c=ec(),d=Ti();I.useEffect(()=>{var b;(b=d.state)!=null&&b.image&&(async()=>{const y=await Mk(d.state.image);e(y),p(y)})()},[]);const f=b=>{const S=b.target.files[0];if(S){const y=new FileReader;y.onloadend=async()=>{const w=await Mk(y.result);e(w),p(w)},y.readAsDataURL(S)}},p=async b=>{r(!0);try{const S=await Lse(b);a(S)}catch(S){console.error("Analysis failed",S),alert("Failed to analyze image. Please try again.")}finally{r(!1)}},g=async()=>{if(t&&o&&!i){s(!0);const S=t.length*3/4/1024;console.log(`Attempting to save image. Size: ${S.toFixed(2)} KB`);try{u({imageUri:t,...o,lastWorn:null}).catch(y=>{console.error("Background save failed:",y)}),c("/closet")}catch(y){console.error("Failed to save item:",y),alert(`Failed to save item: ${y.message}.`),s(!1)}}},E=()=>{e(null),a(null),l.current&&l.current.click()};return M.jsxs(Nr,{style:{flex:1},contentContainerStyle:Me.container,children:[M.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:l,style:{display:"none"},onChange:f}),M.jsx(G,{style:Me.title,children:"Add New Item"}),t?M.jsxs(X,{style:Me.previewContainer,children:[M.jsx(Si,{source:{uri:t},style:Me.previewImage}),n?M.jsxs(X,{style:Me.loadingContainer,children:[M.jsx(Jd,{size:"large",color:"#007AFF"}),M.jsx(G,{style:Me.loadingText,children:"Analyzing your item..."})]}):o?M.jsxs(X,{style:Me.formContainer,children:[M.jsxs(X,{style:Me.rowContainer,children:[M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Type"}),M.jsx(Qn,{style:Me.compactInput,value:o.type,onChangeText:b=>a({...o,type:b})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Color"}),M.jsx(Qn,{style:Me.compactInput,value:o.color,onChangeText:b=>a({...o,color:b})})]}),M.jsxs(X,{style:Me.inputGroup,children:[M.jsx(G,{style:Me.label,children:"Style"}),M.jsx(Qn,{style:Me.compactInput,value:o.style,onChangeText:b=>a({...o,style:b})})]})]}),M.jsx(G,{style:Me.label,children:"Tags"}),M.jsx(X,{style:Me.tagsContainer,children:o.tags.map((b,S)=>M.jsx(X,{style:Me.tagBadge,children:M.jsx(G,{style:Me.tagText,children:b})},S))}),M.jsxs(X,{style:Me.buttonGroup,children:[M.jsx(Ce,{style:[Me.button,Me.secondaryButton],onPress:E,children:M.jsx(G,{style:Me.secondaryButtonText,children:"Retake"})}),M.jsx(Ce,{style:Me.button,onPress:g,disabled:i,children:M.jsx(G,{style:Me.buttonText,children:i?"Saving...":"Save to Closet"})})]})]}):null]}):M.jsx(X,{style:Me.uploadContainer,children:M.jsx(Ce,{style:Me.button,onPress:()=>l.current.click(),children:M.jsx(G,{style:Me.buttonText,children:"Take Photo / Upload"})})})]})}const Me=De.create({container:{flexGrow:1,padding:20,alignItems:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:20},uploadContainer:{flex:1,justifyContent:"center",alignItems:"center",width:"100%"},previewContainer:{width:"100%",alignItems:"center"},previewImage:{width:300,height:300,borderRadius:10,marginBottom:20},loadingContainer:{alignItems:"center"},loadingText:{marginTop:10,color:"#666"},formContainer:{width:"100%"},rowContainer:{flexDirection:"row",justifyContent:"space-between",marginBottom:15},inputGroup:{width:"30%"},label:{fontWeight:"600",fontSize:12,color:"#666",marginBottom:4,textTransform:"uppercase"},compactInput:{borderWidth:1,borderColor:"#eee",padding:8,borderRadius:8,backgroundColor:"#f9f9f9",fontSize:14},tagsContainer:{flexDirection:"row",flexWrap:"wrap",marginBottom:20,marginTop:5},tagBadge:{backgroundColor:"#f0f0f0",paddingHorizontal:10,paddingVertical:5,borderRadius:15,marginRight:8,marginBottom:8},tagText:{fontSize:12,color:"#333"},buttonGroup:{flexDirection:"row",justifyContent:"space-between",marginTop:20},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",flex:1,marginHorizontal:5},buttonText:{color:"#fff",fontWeight:"bold"},secondaryButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#007AFF"},secondaryButtonText:{color:"#007AFF",fontWeight:"bold"}});function Fse(){const{items:t,isItemAvailable:e,addToSchedule:n}=dv(),r=ec(),[i,s]=I.useState(""),[o,a]=I.useState(""),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState([]),[g,E]=I.useState(null),[b,S]=I.useState(!1),[y,w]=I.useState(new Date().toISOString().split("T")[0]),x=async()=>{if(!i||!o||!l){alert("Please fill in all fields");return}d(!0);const v=t.filter(e);try{const R=await mU(v,{destination:i,temperature:o,style:l});p(R)}catch(R){console.error("Failed to generate outfits",R),alert("Failed to generate suggestions. Please try again.")}finally{d(!1)}},O=v=>{E(v),S(!0)},k=()=>{g&&y&&(n(y,g.items),S(!1),E(null),alert("Outfit scheduled!"),r("/schedule"))},T=v=>t.find(R=>R.id===v);return M.jsxs(Nr,{contentContainerStyle:Pe.container,children:[M.jsx(G,{style:Pe.title,children:"Virtual Dressing Room"}),M.jsxs(X,{style:Pe.form,children:[M.jsx(G,{style:Pe.label,children:"Destination / Occasion"}),M.jsx(Qn,{style:Pe.input,placeholder:"e.g. Work, Date Night, Gym",value:i,onChangeText:s}),M.jsx(G,{style:Pe.label,children:"Temperature"}),M.jsx(Qn,{style:Pe.input,placeholder:"e.g. 75F, Cold, Rainy",value:o,onChangeText:a}),M.jsx(G,{style:Pe.label,children:"Style Preference"}),M.jsx(Qn,{style:Pe.input,placeholder:"e.g. Casual, Chic, Edgy",value:l,onChangeText:u}),M.jsx(Ce,{style:[Pe.button,c&&Pe.disabledButton],onPress:x,disabled:c,children:c?M.jsx(Jd,{color:"#fff"}):M.jsx(G,{style:Pe.buttonText,children:"Generate Outfits"})})]}),f.length>0&&M.jsxs(X,{style:Pe.results,children:[M.jsx(G,{style:Pe.subtitle,children:"Suggestions"}),f.map((v,R)=>M.jsxs(X,{style:Pe.outfitCard,children:[M.jsx(G,{style:Pe.outfitSummary,children:v.summary}),M.jsx(Nr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Pe.itemsRow,children:v.items.map(C=>{const A=T(C);return A?M.jsxs(X,{style:Pe.itemPreview,children:[M.jsx(Si,{source:{uri:A.imageUri},style:Pe.itemImage}),M.jsx(G,{style:Pe.itemType,children:A.type})]},C):null})}),M.jsx(Ce,{style:Pe.scheduleButton,onPress:()=>O(v),children:M.jsx(G,{style:Pe.scheduleButtonText,children:"Schedule This Outfit"})})]},R))]}),M.jsx(Sd,{visible:b,transparent:!0,animationType:"slide",children:M.jsx(X,{style:Pe.modalContainer,children:M.jsxs(X,{style:Pe.modalContent,children:[M.jsx(G,{style:Pe.modalTitle,children:"Select Date"}),M.jsx("input",{type:"date",value:y,onChange:v=>w(v.target.value),style:Pe.dateInput}),M.jsxs(X,{style:Pe.modalButtons,children:[M.jsx(Ce,{style:[Pe.button,Pe.cancelButton],onPress:()=>S(!1),children:M.jsx(G,{style:Pe.cancelButtonText,children:"Cancel"})}),M.jsx(Ce,{style:Pe.button,onPress:k,children:M.jsx(G,{style:Pe.buttonText,children:"Confirm"})})]})]})})})]})}const Pe=De.create({container:{flexGrow:1,padding:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},form:{backgroundColor:"#fff",padding:20,borderRadius:10,marginBottom:20,elevation:2},label:{fontWeight:"bold",marginBottom:5,color:"#333"},input:{borderWidth:1,borderColor:"#ddd",padding:10,borderRadius:5,marginBottom:15,backgroundColor:"#f9f9f9"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center"},disabledButton:{backgroundColor:"#99c9ff"},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},results:{marginTop:10,paddingBottom:40},subtitle:{fontSize:20,fontWeight:"bold",marginBottom:15},outfitCard:{backgroundColor:"#fff",padding:15,borderRadius:10,marginBottom:15,elevation:2},outfitSummary:{fontSize:16,marginBottom:10,lineHeight:22},itemsRow:{flexDirection:"row",marginTop:10,marginBottom:15},itemPreview:{marginRight:15,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:5,marginBottom:5},itemType:{fontSize:12,color:"#666",textTransform:"capitalize"},scheduleButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center"},scheduleButtonText:{color:"#fff",fontWeight:"bold"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"},modalContent:{backgroundColor:"#fff",padding:20,borderRadius:10,width:"80%",alignItems:"center"},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:20},dateInput:{padding:10,fontSize:16,marginBottom:20,width:"100%",border:"1px solid #ddd",borderRadius:5},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},cancelButton:{backgroundColor:"#fff",borderWidth:1,borderColor:"#ddd",marginRight:10},cancelButtonText:{color:"#333"}}),mw=async(t,e)=>{try{const r=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&daily=temperature_2m_max,temperature_2m_min,weathercode&temperature_unit=fahrenheit&timezone=auto`)).json(),i={};return r.daily.time.forEach((s,o)=>{i[s]={max:Math.round(r.daily.temperature_2m_max[o]),min:Math.round(r.daily.temperature_2m_min[o]),code:r.daily.weathercode[o]}}),i}catch(n){return console.error("Error fetching weather:",n),null}},Bse=t=>({0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",95:"Thunderstorm"})[t]||"Variable";function jse(){const{schedule:t,items:e,markAsWorn:n,addToSchedule:r,isItemAvailable:i}=dv(),[s,o]=I.useState({}),[a,l]=I.useState(!1),[u,c]=I.useState(null),[d,f]=I.useState(!1),[p,g]=I.useState([]),[E,b]=I.useState({destination:"",style:"",temperature:""});I.useEffect(()=>{(async()=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition(async A=>{const N=await mw(A.coords.latitude,A.coords.longitude);N&&o(N)},async()=>{const A=await mw(40.7128,-74.006);A&&o(A)});else{const A=await mw(40.7128,-74.006);A&&o(A)}})()},[]);const S=()=>{const v=[];for(let R=0;R<7;R++){const C=new Date;C.setDate(C.getDate()+R),v.push(C.toISOString().split("T")[0])}return v},y=v=>e.find(R=>R.id===v),w=(v,R)=>{confirm("Mark this outfit as worn? Items will be unavailable for their refresh cycle.")&&n(R,v)},x=v=>{c(v),g([]),b({destination:"",style:"",temperature:""}),l(!0)},O=async()=>{f(!0);try{const v=s[u],R=v?`${v.max}F / ${v.min}F`:"Unknown",C=e.filter(i),A=await mU(C,{destination:E.destination,temperature:E.temperature||R,style:E.style});A&&A.outfits&&g(A.outfits)}catch(v){console.error("Generation failed",v),alert("Failed to generate outfits. Check your API key.")}finally{f(!1)}},k=v=>{r(u,v.itemIds),l(!1)},T=S();return M.jsxs(Nr,{contentContainerStyle:Ie.container,children:[M.jsx(G,{style:Ie.title,children:"Outfit Schedule"}),T.map(v=>{const R=t[v],C=new Date(v),A=C.toLocaleDateString("en-US",{weekday:"long"}),N=C.toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=s[v];return M.jsxs(X,{style:Ie.dayCard,children:[M.jsxs(X,{style:Ie.dateHeader,children:[M.jsxs(X,{children:[M.jsx(G,{style:Ie.dayName,children:A}),M.jsx(G,{style:Ie.dateText,children:N})]}),D&&M.jsxs(X,{style:Ie.weatherContainer,children:[M.jsxs(G,{style:Ie.weatherTemp,children:[D.max," / ",D.min,""]}),M.jsx(G,{style:Ie.weatherDesc,children:Bse(D.code)})]})]}),R?M.jsxs(X,{children:[M.jsx(Nr,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Ie.itemsRow,children:R.map(de=>{const fe=y(de);return fe?M.jsxs(X,{style:Ie.itemPreview,children:[M.jsx(Si,{source:{uri:fe.imageUri||fe.image},style:Ie.itemImage}),M.jsx(G,{style:Ie.itemType,children:fe.type})]},de):null})}),M.jsx(Ce,{style:Ie.wearButton,onPress:()=>w(v,R),children:M.jsx(G,{style:Ie.wearButtonText,children:"Wear This Outfit"})})]}):M.jsx(Ce,{style:Ie.generateButton,onPress:()=>x(v),children:M.jsx(G,{style:Ie.generateButtonText,children:"+ Generate Outfit"})})]},v)}),M.jsx(Sd,{visible:a,animationType:"slide",onRequestClose:()=>l(!1),children:M.jsxs(X,{style:Ie.modalContainer,children:[M.jsxs(G,{style:Ie.modalTitle,children:["Plan for ",u]}),M.jsxs(Nr,{style:{flex:1},children:[M.jsxs(X,{style:{marginBottom:20},children:[M.jsx(G,{style:Ie.label,children:"Destination / Occasion"}),M.jsx(Qn,{style:Ie.input,placeholder:"e.g. Work, Date Night, Gym",value:E.destination,onChangeText:v=>b(R=>({...R,destination:v}))}),M.jsx(G,{style:Ie.label,children:"Temperature"}),M.jsx(Qn,{style:Ie.input,placeholder:"e.g. 75F, Cold, Rainy (Leave blank to use forecast)",value:E.temperature,onChangeText:v=>b(R=>({...R,temperature:v}))}),M.jsx(G,{style:Ie.label,children:"Style Preference"}),M.jsx(Qn,{style:Ie.input,placeholder:"e.g. Casual, Chic, Edgy",value:E.style,onChangeText:v=>b(R=>({...R,style:v}))})]}),M.jsx(Ce,{style:[Ie.genButton,d&&{opacity:.7}],onPress:O,disabled:d,children:d?M.jsx(Jd,{color:"#fff"}):M.jsx(G,{style:Ie.genButtonText,children:"Generate Suggestions"})}),p.map((v,R)=>M.jsxs(Ce,{style:Ie.suggestionCard,onPress:()=>k(v),children:[M.jsx(G,{style:Ie.suggestionSummary,children:v.reason||v.summary}),M.jsx(Nr,{horizontal:!0,children:v.itemIds.map(C=>{const A=y(C);return A?M.jsx(Si,{source:{uri:A.imageUri||A.image},style:Ie.smallImage},C):null})}),M.jsx(X,{style:Ie.selectButton,children:M.jsx(G,{style:Ie.selectButtonText,children:"Select This Outfit"})})]},R))]}),M.jsx(Ce,{style:Ie.closeButton,onPress:()=>l(!1),children:M.jsx(G,{style:Ie.closeButtonText,children:"Close"})})]})})]})}const Ie=De.create({container:{flexGrow:1,padding:20,paddingBottom:80},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},dayCard:{backgroundColor:"#fff",borderRadius:10,padding:15,marginBottom:15,elevation:2},dateHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},weatherContainer:{alignItems:"flex-end"},weatherTemp:{fontSize:16,fontWeight:"bold"},weatherDesc:{fontSize:12,color:"#666"},generateButton:{backgroundColor:"#f0f0f0",padding:15,borderRadius:8,alignItems:"center",borderWidth:1,borderColor:"#ddd",borderStyle:"dashed"},generateButtonText:{color:"#007AFF",fontSize:16},modalContainer:{flex:1,padding:20,backgroundColor:"#fff"},modalTitle:{fontSize:22,fontWeight:"bold",marginBottom:10,textAlign:"center"},modalWeather:{textAlign:"center",marginBottom:20,color:"#666"},genButton:{backgroundColor:"#007AFF",padding:15,borderRadius:10,alignItems:"center",marginBottom:10},genButtonText:{color:"#fff",fontWeight:"bold",fontSize:16},suggestionCard:{borderWidth:1,borderColor:"#ddd",borderRadius:10,padding:15,marginBottom:20},suggestionSummary:{marginBottom:10,fontStyle:"italic"},smallImage:{width:60,height:60,borderRadius:5,marginRight:5},selectButton:{backgroundColor:"#34C759",padding:10,borderRadius:5,alignItems:"center",marginTop:10},selectButtonText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:15,alignItems:"center"},closeButtonText:{color:"red"},dayName:{fontSize:18,fontWeight:"bold"},dateText:{color:"#666"},itemsRow:{flexDirection:"row",marginBottom:10},itemPreview:{marginRight:10,alignItems:"center"},itemImage:{width:80,height:80,borderRadius:8,marginBottom:5},itemType:{fontSize:12},wearButton:{backgroundColor:"#007AFF",padding:10,borderRadius:5,alignItems:"center"},wearButtonText:{color:"#fff",fontWeight:"bold"},emptyText:{textAlign:"center",color:"#999",fontStyle:"italic",padding:10}});function Use(){const[t,e]=I.useState(""),[n,r]=I.useState(""),[i,s]=I.useState(!0),[o,a]=I.useState(!1),[l,u]=I.useState(""),[c,d]=I.useState(!1),[f,p]=I.useState(""),g=async()=>{u(""),p(""),a(!0);try{c?(await pZ(t),p("Check your email for password reset instructions."),d(!1)):i?await hZ(t,n):await dZ(t,n)}catch(E){u(E.message.replace("Firebase: ",""))}finally{a(!1)}};return M.jsxs(X,{style:Tn.container,children:[M.jsx(Si,{source:{uri:"/pwa-192x192.png"},style:{width:100,height:100,marginBottom:20,alignSelf:"center"}}),M.jsxs(X,{style:Tn.card,children:[M.jsx(G,{style:Tn.title,children:c?"Reset Password":i?"Pocket Stylist Login":"Create Account"}),l?M.jsx(G,{style:Tn.error,children:l}):null,f?M.jsx(G,{style:Tn.success,children:f}):null,M.jsx(Qn,{style:Tn.input,placeholder:"Email",value:t,onChangeText:e,autoCapitalize:"none",keyboardType:"email-address"}),!c&&M.jsx(Qn,{style:Tn.input,placeholder:"Password",value:n,onChangeText:r,secureTextEntry:!0}),M.jsx(Ce,{style:Tn.button,onPress:g,disabled:o,children:o?M.jsx(Jd,{color:"#fff"}):M.jsx(G,{style:Tn.buttonText,children:c?"Send Reset Email":i?"Log In":"Sign Up"})}),M.jsx(X,{style:Tn.footer,children:c?M.jsx(Ce,{onPress:()=>d(!1),children:M.jsx(G,{style:Tn.link,children:"Back to Login"})}):M.jsxs(M.Fragment,{children:[M.jsx(Ce,{onPress:()=>s(!i),children:M.jsx(G,{style:Tn.link,children:i?"Need an account? Sign Up":"Have an account? Log In"})}),M.jsx(Ce,{onPress:()=>d(!0),children:M.jsx(G,{style:[Tn.link,Tn.forgotLink],children:"Forgot Password?"})})]})})]})]})}const Tn=De.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5",padding:20,height:"100vh"},card:{backgroundColor:"#fff",padding:30,borderRadius:15,width:"100%",maxWidth:400,elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center",color:"#333"},input:{backgroundColor:"#f9f9f9",padding:15,borderRadius:8,marginBottom:15,borderWidth:1,borderColor:"#eee"},button:{backgroundColor:"#007AFF",padding:15,borderRadius:8,alignItems:"center",marginTop:10},buttonText:{color:"#fff",fontWeight:"bold",fontSize:16},error:{color:"red",marginBottom:15,textAlign:"center"},success:{color:"green",marginBottom:15,textAlign:"center"},footer:{marginTop:20,alignItems:"center"},link:{color:"#007AFF",marginTop:10},forgotLink:{color:"#666",fontSize:12}});function $se({onNavigate:t}){const e=ec(),n=Ti(),r=s=>{t?t(s):e(s)},i=[{name:"Home",path:"/"},{name:"Closet",path:"/closet"},{name:"Style",path:"/outfits"},{name:"Plan",path:"/schedule"}];return M.jsx(X,{style:eh.navBar,children:i.map(s=>{const o=n.pathname===s.path;return M.jsx(Ce,{style:[eh.tab,o&&eh.activeTab],onPress:()=>r(s.path),children:M.jsx(G,{style:[eh.tabText,o&&eh.activeTabText],children:s.name})},s.name)})})}const eh=De.create({navBar:{flexDirection:"row",justifyContent:"space-around",backgroundColor:si.colors.background,borderTopWidth:1,borderTopColor:si.colors.border,paddingBottom:20,paddingTop:10,position:"absolute",bottom:0,left:0,right:0},tab:{alignItems:"center",padding:10},activeTab:{borderBottomWidth:2,borderBottomColor:si.colors.highlight},tabText:{fontSize:16,color:si.colors.secondaryText},activeTabText:{color:si.colors.highlight,fontWeight:"bold"}});function zse({visible:t,onClose:e}){const n=uc.currentUser,[r,i]=I.useState("");I.useEffect(()=>{n&&_ie(n.uid).then(a=>{if(a!=null&&a.openai_api_key)i(a.openai_api_key),localStorage.setItem("openai_api_key",a.openai_api_key);else{const l=localStorage.getItem("openai_api_key");l&&i(l)}})},[n,t]);const s=async()=>{n&&(await vie(n.uid,{openai_api_key:r}),localStorage.setItem("openai_api_key",r),alert("API Key saved to account!"))},o=async()=>{try{await fZ(),e()}catch(a){console.error("Failed to log out",a)}};return M.jsx(Sd,{visible:t,transparent:!0,animationType:"fade",onRequestClose:e,children:M.jsxs(X,{style:tn.overlay,children:[M.jsx(Ce,{style:De.absoluteFill,activeOpacity:1,onPress:e}),M.jsxs(X,{style:tn.modalContent,children:[M.jsx(G,{style:tn.title,children:"Account"}),M.jsxs(X,{style:tn.info,children:[M.jsx(G,{style:tn.label,children:"Email"}),M.jsx(G,{style:tn.value,children:n==null?void 0:n.email})]}),M.jsxs(X,{style:tn.section,children:[M.jsx(G,{style:tn.label,children:"OpenAI API Key"}),M.jsx("input",{type:"password",style:{width:"100%",padding:10,marginBottom:10,border:"1px solid #ddd",borderRadius:8,fontSize:16,boxSizing:"border-box"},placeholder:"sk-...",value:r,onChange:a=>i(a.target.value)}),M.jsx(Ce,{style:tn.saveButton,onPress:s,children:M.jsx(G,{style:tn.saveButtonText,children:"Save Key"})})]}),M.jsx(Ce,{style:tn.refreshButton,onPress:()=>window.location.reload(),children:M.jsx(G,{style:tn.refreshButtonText,children:"Refresh App"})}),M.jsx(Ce,{style:tn.logoutButton,onPress:o,children:M.jsx(G,{style:tn.logoutText,children:"Log Out"})}),M.jsx(Ce,{style:tn.closeButton,onPress:e,children:M.jsx(G,{style:tn.closeText,children:"Close"})})]})]})})}const tn=De.create({overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"#fff",width:"80%",maxWidth:300,borderRadius:15,padding:20,alignItems:"center",elevation:5},title:{fontSize:20,fontWeight:"bold",marginBottom:20},info:{marginBottom:20,alignItems:"center"},section:{width:"100%",marginBottom:20},label:{color:"#666",fontSize:12,marginBottom:5},value:{fontSize:16,fontWeight:"500"},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:10,marginBottom:10,width:"100%"},saveButton:{backgroundColor:"#007AFF",padding:10,borderRadius:8,alignItems:"center"},saveButtonText:{color:"#fff",fontWeight:"bold"},refreshButton:{backgroundColor:"#34C759",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},refreshButtonText:{color:"#fff",fontWeight:"bold"},logoutButton:{backgroundColor:"#FF3B30",paddingVertical:12,paddingHorizontal:30,borderRadius:25,marginBottom:10,width:"100%",alignItems:"center"},logoutText:{color:"#fff",fontWeight:"bold"},closeButton:{padding:10},closeText:{color:"#007AFF"}}),Wse={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:t=>({zIndex:0,x:t<0?"100%":"-100%",opacity:0})},th=({children:t,direction:e})=>M.jsx(mie.div,{custom:e,variants:Wse,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",ease:"easeInOut",duration:.3},style:{height:"100%",width:"100%",backgroundColor:"#ffffff",overflowY:"auto",overflowX:"hidden",position:"absolute",top:0,left:0,paddingBottom:"80px"},children:t});function Hse(){const{currentUser:t}=J2(),[e,n]=I.useState(!1),[r,i]=I.useState(0),s=ec(),o=Ti(),a=["/","/closet","/outfits","/schedule"],l=c=>{const d=a.indexOf(o.pathname),f=a.indexOf(c);i(f>d?1:-1),s(c)},u=RZ({onSwipedLeft:()=>{const c=a.indexOf(o.pathname);c<a.length-1&&(i(1),s(a[c+1]))},onSwipedRight:()=>{const c=a.indexOf(o.pathname);c>0&&(i(-1),s(a[c-1]))},preventScrollOnSwipe:!1,trackMouse:!0,delta:50});return t?M.jsxs(X,{style:gw.container,children:[M.jsxs(X,{style:gw.header,children:[M.jsx(X,{style:{flexDirection:"row",alignItems:"center",flex:1},children:M.jsx(Si,{source:{uri:gie},style:{width:260,height:52,resizeMode:"contain",marginLeft:-25}})}),M.jsx(Ce,{onPress:()=>n(!0),children:M.jsx(NZ,{size:34,color:si.colors.highlight})})]}),M.jsx(X,{style:gw.content,...u,children:M.jsx(Fte,{mode:"popLayout",custom:r,children:M.jsxs(D8,{location:o,children:[M.jsx(Dl,{path:"/",element:M.jsx(th,{direction:r,children:M.jsx(yie,{})})}),M.jsx(Dl,{path:"/closet",element:M.jsx(th,{direction:r,children:M.jsx(Aie,{})})}),M.jsx(Dl,{path:"/camera",element:M.jsx(th,{direction:r,children:M.jsx(Vse,{})})}),M.jsx(Dl,{path:"/outfits",element:M.jsx(th,{direction:r,children:M.jsx(Fse,{})})}),M.jsx(Dl,{path:"/schedule",element:M.jsx(th,{direction:r,children:M.jsx(jse,{})})})]},o.pathname)})}),M.jsx($se,{onNavigate:l}),M.jsx(zse,{visible:e,onClose:()=>n(!1)})]}):M.jsx(Use,{})}function Kse(){return M.jsx(tH,{children:M.jsx(Hse,{})})}const gw=De.create({container:{flex:1,height:"100vh",maxHeight:"100dvh",backgroundColor:"#ffffff",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:15,backgroundColor:si.colors.background,borderBottomWidth:1,borderBottomColor:si.colors.border,paddingTop:15,zIndex:10,height:70},headerTitle:{fontSize:18,fontWeight:"bold",color:si.colors.text},accountButton:{color:si.colors.highlight,fontWeight:"500"},content:{flex:1,paddingBottom:60,overflow:"hidden"}});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)}).catch(e=>{console.log("ServiceWorker registration failed: ",e)})});yw.createRoot(document.getElementById("root")).render(M.jsx(gt.StrictMode,{children:M.jsx(mZ,{children:M.jsx(Iie,{children:M.jsx(Kse,{})})})}));
